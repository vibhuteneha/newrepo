"use strict";function sessionToLocal(){sessionStorage&&angular.forEach(sessionStorage,function(a,b){"refresh.key"!==b&&"refresh.status"!==b?(localStorage.setItem(b,a),sessionStorage.removeItem(b)):__env.enableDebug&&console.log(b+" "+a)})}function setAuthProfiderUrls(a,b,c){b.enableDebug&&console.log(c.symphonyUrl),a.loginUrl=(b.apiUrl&&""!==b.apiUrl?b.apiUrl:c.onescreenUrl)+"/newlogin",a.signupUrl=(b.symphonyUrl&&""!=b.symphonyUrl?b.symphonyUrl:c.symphonyUrl)+"/login"}!function(a){a.configParams=a.configParams||{};var b={};"production"==a.__env.environment?(b={symphonyUrl:"https://bridge.kotter.net",audioUrl:"https://onescreen.kotter.net",vcUrl:"https://video.kotter.net",ssUrl:"https://myscreen.kotter.net/",onescreenUrl:"https://onescreen.kotter.net",chatUrl:"https://chat.kotter.net/api/v4",chatWebsocket:"wss://chat.kotter.net/api/v4/websocket",defaultSender:"bridge@kotter.net",supportDID:"411"},b.stripe_key="pk_live_7HDHBWnOcvLpmwREtEkAMPTD"):(b={symphonyUrl:"https://"+a.__env.environment+".kotter.net",audioUrl:"https://"+a.__env.environment+".onescreen.kotter.net",vcUrl:"https://"+a.__env.environment+".video.kotter.net",ssUrl:"https://"+a.__env.environment+".myscreen.kotter.net/",onescreenUrl:"https://"+a.__env.environment+".onescreen.kotter.net",chatUrl:"https://"+a.__env.environment+".chat.kotter.net/api/v4",chatWebsocket:"wss://"+a.__env.environment+".chat.kotter.net/api/v4/websocket",defaultSender:"bridge@kotter.net",supportDID:"411"},b.stripe_key="pk_test_a8mSKGJ47JUXuuKA3upG6Kfp"),a.__env.audioUrl&&(b.audioUrl=a.__env.audioUrl),a.__env.vcUrl&&(b.vcUrl=a.__env.vcUrl),a.configParams=b}(this);var env={},configVars={};"function"!=typeof Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}),window&&(Object.assign(env,window.__env),window.__env.apiUrl||(window.__env.apiUrl=window.configParams.onescreenUrl),window.__env.apiUrl&&(window.configParams.audioUrl=window.__env.apiUrl),Object.assign(configVars,window.configParams)),sessionToLocal();var proySymphony=angular.module("symphonyApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngMaterial","ngRoute","ngSanitize","ngTouch","ui.bootstrap","mgcrea.ngStrap","satellizer","frapontillo.bootstrap-switch","rzModule","angular-websocket","hc.marked","angularMoment","slugifier","ngTagsInput","pusher-angular","angularFileUpload","monospaced.elastic","mgo-angular-wizard","ngAudio","angular-web-notification","timer","angular-js-xlsx","googlechart","kotterAudioRecorder","vkEmojiPicker","angular-clipboard","hljs","ui.bootstrap.contextMenu","ui.bootstrap.dropdownToggle","ngDraggable","ngIdle","dndLists","ngMaterialDatePicker","mdPickers","ae-datetimepicker","md.data.table","jlareau.bowser","textAngular","angularSpectrumColorpicker","angularPayments"]);proySymphony.factory("_",["$window",function(a){return a._}]),proySymphony.factory("TawkAPI",["$window",function(a){return a.Tawk_API}]),proySymphony.value("treeViewDefaults",{foldersProperty:"folders",filesProperty:"files",displayProperty:"folder_name",collapsible:!0,showFiles:!0}),proySymphony.constant("__env",env),__env.audioUrl&&(configVars.audioUrl=__env.audioUrl),proySymphony.constant("symphonyConfig",configVars),setAuthProfiderUrls.$inject=["$authProvider","__env","symphonyConfig"],proySymphony.config(setAuthProfiderUrls),proySymphony.config(["markedProvider",function(a){a.setRenderer({link:function(a,b,c){return"<a href='"+a+"'"+(b?" title='"+b+"'":"")+" target='_blank'>"+c+"</a>"}})}]),proySymphony.config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]),proySymphony.config(["$httpProvider",function(a){a.useApplyAsync(!0)}]),proySymphony.config(["recorderServiceProvider",function(a){a.forceSwf(window.location.search.indexOf("forceFlash")>-1).setSwfUrl("lib/recorder.swf").withMp3Conversion(!0)}]),proySymphony.config(["$mdThemingProvider",function(a){a.definePalette("primary",{50:"0073a5",100:"0073a5",200:"0073a5",300:"0073a5",400:"0073a5",500:"0073a5",600:"0073a5",700:"0073a5",800:"0073a5",900:"0073a5",A100:"0073a5",A200:"0073a5",A400:"0073a5",A700:"0073a5",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),a.theme("default").primaryPalette("primary").accentPalette("primary")}]),proySymphony.config(["$httpProvider",function(a){a.interceptors.splice(0,1)}]),proySymphony.config(["IdleProvider","KeepaliveProvider","__env",function(a,b,c){a.idle(c.idleTime?c.idleTime:14400),a.timeout(c.idleTimeout?c.idleTimeout:30),b.interval(c.idleKeepalive?c.idleKeepalive:14400)}]),proySymphony.config(["$routeProvider","$locationProvider","__env",function(a,b,c){a.when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/chatplus",{templateUrl:"views/new-chatplus.html",controller:"ChatPlusCtrl"}).when("/calls",{templateUrl:"views/calls.html"}).when("/oldcallhistory",{templateUrl:"views/callhistory.html"}).when("/callhistory",{templateUrl:"views/callhistorynew.html"}).when("/callcenter",{templateUrl:"views/callcenter.html"}).when("/reports",{templateUrl:"views/reports.html",controller:"ReportsCtrl",controllerAs:"reports"}).when("/mobileupload",{templateUrl:"views/mobileupload.html"}).when("/fax",{templateUrl:"views/fax/vfax.html"}).when("/advfeatures",{templateUrl:"views/advfeatures.html"}).when("/settings",{templateUrl:"views/settings/settings.html",controller:"SettingsCtrl",controllerAs:"settings"}).when("/filesharing",{templateUrl:"views/filesharing.html",controller:"FileSharingCtrl",controllerAs:"filesharing"}).when("/timeclockpro",{templateUrl:"views/timeclockpro/dashboard.html",controller:"TimeKeeperCtrl",controllerAs:"timeclockpro"}).when("/cloudstorage",{templateUrl:"views/cloudstorage/cloudstorage.html",controller:"CloudFileCtrl",controllerAs:"cloudstorage"}).when("/callrecording",{templateUrl:"views/callrecording/callrecording.html",controller:"CallRecordingCtrl",controllerAs:"callrecording"}).when("/visualvoicemail",{templateUrl:"views/visualvoicemail.html"}).when("/communications",{templateUrl:"views/communications.html"}).when("/contactdetails/:cntID",{templateUrl:"views/contactdetails.html",controller:"ContactDetailsCtrl",controllerAs:"contactDetails"}).when("/sms",{templateUrl:"views/sms-new.html",controller:"SmsCtrl"}).when("/videocall",{templateUrl:"views/calls/videocall.html"}).when("/public",{templateUrl:"views/public.html",controller:"PublicCtrl"}).when("/public/:type/:room",{templateUrl:"views/public.html",controller:"PublicCtrl"}).when("/video/:videoroom",{templateUrl:"views/public.html",controller:"PublicCtrl"}).when("/cloud/:linkhash",{templateUrl:"views/publiccloud.html",controller:"PublicCloudCtrl"}).when("/conferencecall/",{templateUrl:"views/calls/conference.html"}).when("/conferencecalls/:confID",{templateUrl:"views/calls/conferencecalls.html"}).when("/screenshare",{templateUrl:"views/screensharing/screenshare.html"}).when("/screenshare/:screenroom",{templateUrl:"views/screenshare-public.html"}).when("/videoconference",{templateUrl:"views/videoconference.html"}).when("/automatedmessaging",{templateUrl:"views/autodialing/landingpage.html"}).when("/automatedmessaging/new",{templateUrl:"views/autodialing/automaticdialing.html"}).when("/automatedmessaging/:rc_uuid",{templateUrl:"views/autodialing/automaticdialing.html"}).when("/conversations",{templateUrl:"views/conversations.html"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/logout",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/login/:resettoken/:resetemail",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/login/:resettoken/:resetemail/:confirm",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).otherwise({redirectTo:"/main"}),b.html5Mode(!0,!0,!0),b.hashPrefix("!")}]),proySymphony.run(["$rootScope","$cookies","$location","amMoment","$window","Idle","$interval","$auth","$http","$pusher","$filter","dataFactory","usefulTools","__env","symphonyConfig","mmApi","$anchorScroll","$mdDialog","$timeout","contactGroupsService","chatService","userContactService","cloudStorageService","callService","bowser","userService","audioLibraryService","musicOnHoldService","smsService","metaService","newChatService","chatMessages",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){function G(){a.curChannel&&delete a.curChannel,a.user&&delete a.user,a.userContacts&&delete a.userContacts,a.nonContacts&&delete a.nonContacts,a.userToken&&delete a.userToken,a.teamId&&delete a.teamId,a.mmProfile&&delete a.mmProfile,a.teamUserKeys&&delete a.teamUserKeys,a.allPreferences&&delete a.allPreferences,a.channelMembers&&delete a.channelMembers,a.availableChannels&&delete a.availableChannels,b.remove("userToken"),console.log(a)}function H(){var a='You can download it <a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank">here</a>';r.show(r.alert().clickOutsideToClose(!0).title("Bridge is best experienced through the Google Chrome web browser").htmlContent(a).ok("Got it!"))}e.localStorage.getItem("satellizer_token")||h.logout(),t.handleGoogleAuthIfIsRedirect(),q.yOffset=50,a.alerts=[],a.chatDisabled=n.disableChat,a.symphonyUrl=n.symphonyUrl&&""!==n.symphonyUrl?n.symphonyUrl:o.symphonyUrl,n.disableMobileCutoff&&(angular.element("#main-container").attr("style","display: flex !important"),angular.element("#try-mobile").attr("style","display: none !important;")),a.$on("$routeChangeStart",function(b,d,f){if(n.enableDebug&&f&&console.log("CUR TEMPLATE "+f.templateUrl),n.enableDebug&&console.log("NEXT TEMPLATE "+d.templateUrl),f&&"views/callcenter.html"==f.templateUrl&&a.updateCallCenter&&g.cancel(a.updateCallCenter),"views/login.html"==d.templateUrl,!h.isAuthenticated()||!e.localStorage.getItem("satellizer_token")||e.localStorage.getItem("satellizer_token")&&!e.localStorage.getItem("currentUser"))"views/login.html"==d.templateUrl||"views/publiccloud.html"==d.templateUrl||"views/public.html"==d.templateUrl||"views/screenshare-public.html"==d.templateUrl||(n.enableDebug&&console.log("NOT LOGGED IN"),G(),e.localStorage.clear(),n.enableDebug&&console.log("LOGGING YOU OUT - INSIDE ON"),c.path("/login"));else if("views/login.html"==d.templateUrl){n.enableDebug&&console.log("LOGGING YOU OUT"),n.enableDebug&&console.log(c.path()),n.enableVerto&&(n.enableDebug&&console.log("Logging out of Verto"),vertoHandleBase.logout(),n.enableDebug&&console.log("Verto logout returned"));var j={status:"Offline"};a.user.user_status="Offline",l.updateStatus(j).then(function(b){a.logoutMessage="You have been successfully logged out.",s(function(){var b=e.sessionStorage.getItem("refresh.key");if(b){var c={refreshkey:b,vertoToken:a.vertoToken};l.postCheckForRefresh(c)}h.logout(),a.active=!1,v.clearInfo(),w.clearInfo(),F.closeSocket(!0),E.clearInfo(),t.clearInfo(),z.clearInfo(),E.reset(),G(),e.localStorage.clear(),e.sessionStorage.clear()},1e3,!1)})}else null!==e.localStorage.getItem("userToken")&&(a.userToken=e.localStorage.getItem("userToken"),i.defaults.headers.common.Authorization="Bearer "+a.userToken),a.user||(a.user=JSON.parse(e.localStorage.getItem("currentUser"))),a.teamId||(a.teamId=a.user.symphony_domain_settings.mattermost_team_id)}),D.registerOnRootScopeUserLoadCallback(function(){a.$broadcast("user.loaded"),a.userLoaded=!0,E.init(),C.init(a.user.id),a.userStatusIconClass=m.funcPutIcon(a.user.user_status,"userstatusicon"),a.loadDomainsStatus(),A.updateRingtoneSettings(),B.init(),e.localStorage.setItem("currentUser",JSON.stringify(a.user));var b=a.user.contact_name_given,c=a.user.email_address;e.Tawk_API.visitor={name:b,email:c,hash:"b90b12e89d8bff10c374d38c036c934d1b3713af06940ae7b789ae9d22d78ab7"},e.startTawk(),x.initialize(),n.enableDebug&&console.log("ROOTSCOPE USER"),n.enableDebug&&console.log(a.user),a.teamId=a.user.symphony_domain_settings?a.user.symphony_domain_settings.mattermost_team_id:"",a.chatUserId=a.user.symphony_user_settings?a.user.symphony_user_settings.mattermost_user_id:""}),h.isAuthenticated()&&(z.performOnLoadMediaCheck(),a.$broadcast("add.master.permissions.group")),e.localStorage.getItem("satellizer_token")&&n.enableDebug&&console.log(e.localStorage.getItem("satellizer_token")),h.isAuthenticated()&&e.localStorage.getItem("satellizer_token")&&(f.watch(),a.active=!0,a.chatDisabled&&(a.DisableChatMessage="ChatPlus has been disabled from the environment."),z.getUserInfoByUuid().then(function(b){b&&(v.setContacts().then(function(a){t.groups.length<1&&t.setGroups()}),a.user=b,D.performCallbackCollection(D.onRootScopeUserLoadCallbacks),n.enableDebug&&console.log("CURRENT USER"),n.enableDebug&&console.log(a.user),a.user.needSmsNumber=!1,a.user.symphony_user_settings.sms_phone_number||(a.user.needSmsNumber=!0))}),a.timeZones||null===e.localStorage.getItem("timeZones")||(a.timeZones=JSON.parse(e.localStorage.getItem("timeZones")))),a.showAlert=function(a,b){return r.show(r.alert().clickOutsideToClose(!0).title(a).htmlContent(b).ok("Got it!"))},y.chrome||s(function(){H()}),a.showSuccessAlert=function(b){return b||(b="That's a bingo!"),a.showAlert("Congratulations!",b)},a.showInfoAlert=function(b){return b||(b="Info"),a.showAlert("Info ",b)},a.showErrorAlert=function(b){return b||(b="Something went wrong."),a.showAlert("Uh-Oh :(",b)},a.showalerts=function(b){b.data.error?a.showErrorAlert(b.data.error.message):a.showSuccessAlert(b.data.success.message)},a.displayAlerts=function(){a.alerts.length>0&&(alert=a.alerts.shift(),alert.success?a.showSuccessAlert(alert.message).then(function(){a.displayAlerts()}):alert.error&&a.showErrorAlert(alert.message).then(function(){a.displayAlerts()}))},a.$watch("alerts.length",function(b,c){b>c&&a.displayAlerts()}),a.confirmDialog=function(a,b){var c=r.confirm().title(a).textContent(b).ok("Yes").cancel("Nevermind");return r.show(c).then(function(){return!0},function(){return!1})},a.confirmPrompt=function(a,b){var c=r.prompt().title(a).textContent(b).ok("Yes").cancel("Nevermind");return r.show(c)},a.customFields=[],a.pendingSmsCount=[],a.alertTimeout=n.enableDebug?"20000":"4000",a.closeAlert=function(b){"undefined"==typeof a.alerts?(n.enableDebug&&console.log("alerts object is undefined"),a.alerts.push({type:"success",msg:"Success: Symphony is good."})):a.alerts.splice(b)},a.contactPhones=[],a.contactEmails=[],a.fileSharingList=[],a.fileList=[],a.currentPage=0,a.entryLimit=0,a.filteredItems=0,a.totalItems=0,a.activePath=c.path(),a.pathImgProfile=(n.apiUrl&&""!==n.apiUrl?n.apiUrl:o.onescreenUrl)+"/imported/freeswitch/storage/avatars/",n.pathImgProfile&&(a.pathImgProfile=n.apiUrl+n.pathImgProfile),a.onescreenBaseUrl=n.apiUrl&&""!==n.apiUrl?n.apiUrl:o.onescreenUrl,a.chatApiUrl=n.mmUrl&&""!==n.mmUrl?n.mmUrl:o.chatUrl,a.userLogin=!1,a.userRole=0,a.userEmail="",a.phoneNumberTypes=["Mobile","Work","Home","Fax"],a.contactTypes=["Friend","Customer","Co-Worker","Vendor","Other"],a.selectMonths=[{display:"January",value:"01"},{display:"February",value:"02"},{display:"March",value:"03"},{display:"April",value:"04"},{display:"May",value:"05"},{display:"June",value:"06"},{display:"July",value:"07"},{display:"August",value:"08"},{display:"September",value:"09"},{display:"October",value:"10"},{display:"November",value:"11"},{display:"December",value:"12"}],a.putIconPhone=function(a){return"Mobile"===a?"fa fa-mobile-phone cls-color-green-tkg":"Work"===a?"fa fa-industry cls-color-blue-tkg":"Home"===a?"fa fa-home cls-color-grey-tkg":"Fax"===a?"fa fa-fax cls-color-red-tkg":null};for(var I=[],J=moment().format("YYYY"),K=J;K>J-8;K--)I.push(K);a.loadingChannel=!1,a.selectYears=I,a.contactaddition={},a.testing="HELP",a.showMissedCalls=!1,a.delivery={},a.roboCallUUID="0",a.phoneList=[],a.actionContact="",a.contactUpdated=!1,a.onCallWith=!1,a.confcalloptions=null,a.tabContactGroup=!1,a.callAudio={},a.confExtension="",a.dialInNumber="",a.conferenceCallID="",a.onConferenceCall=!1,a.showCounterTime=!1,a.showScreenShare=!1,a.confMembers=[],a.iconMuteCC="mdi-headset mdi-24px",a.iconLock="mdi-lock-open mdi-24px",a.iconStartConf="fa-gear",a.startStopConfToolTip="Start conference before entering phone numbers",a.startStopConfBtn="Start conference",a.toolTipScreenS="Show screen share options",a.toolRecording="Start recording",a.toolMute="Mute everyone",a.toolLock="Lock Conference",a.clickBtn1=!1,a.clickBtn2=!1,a.clickBtn3=!1,a.clickBtn4=!1,a.clickBtn5=!1}]),proySymphony.controller("MainCtrl",["$scope","focusService","$routeParams","FileUploader","Idle","$filter","$location","TawkAPI","$rootScope","$uibModalStack","$auth","$window","usefulTools","dataFactory","__env","symphonyConfig","$interval","$timeout","emailService","callService","$cookies","smsService","newChatService","timeKeeperService","tooltipsService","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){i.activePath=null,i.tips=y.tips,a.$on("$routeChangeSuccess",function(){a.activePath=g.path(),o.enableDebug&&console.log("location.path ==> "+a.activePath),o.enableDebug&&console.log(g.path()),a.fullScreenRightContainer=!1,"/main"===g.path()?i.showHeaderPpal=!1:"/login"===g.path()||"/logout"===g.path()||"/login"===g.path().substring(0,6)||"/cloud"===g.path().substring(0,6)?a.fullScreenRightContainer=!0:i.showHeaderPpal=!0,"/main"===g.path()?i.showHeaderPpal=!1:i.showHeaderPpal=!0}),a.totalMentionCount=function(){var a=w.totalMentionCount();return a?"("+a+")":null},i.sendSmsTop=function(a){return a.message?void v.sendSmsMessage(a.message,null,"1"+a.smsnumber).then(function(a){a!==!0&&i.showErrorAlert(a),j.dismissAll()}):void i.showErrorAlert("You can not send an empty message.")},a.unreadSms=function(){return v.unreadMessages()},a.showHeader=!0,a.showLeftbar=!0;var A=function(b){var c=["views/login.html","views/public.html","views/publiccloud.html"];o.enableDebug&&console.log("ROUTE: "+b),-1!==c.indexOf(b)||-1!==g.path().indexOf("/cloud/")?(a.showHeader=!1,a.showLeftbar=!1):(a.showHeader=!0,a.showLeftbar=!0)},B=function(b){var c=["views/chatplus.html","views/sms-new.html","views/sms.html","views/cloudstorage/cloudstorage.html","views/new-chatplus.html"];-1!==c.indexOf(b)?a.showContentPadding=!1:a.showContentPadding=!0};a.$on("$routeChangeStart",function(a,b){o.enableDebug&&console.log(a),o.enableDebug&&console.log(g.$$path),o.enableDebug&&console.log(b),o.enableDebug&&console.log(b.templateUrl),o.enableDebug&&console.log(g.path());b.templateUrl&&(B(b.templateUrl),A(b.templateUrl)),i.showChatContacts=o.disableChat?!1:"/chatplus"===g.path(),i.showContacts=o.disableChat?!0:"/chatplus"!==g.path()}),i.showChatContacts=o.disableChat?!1:"/chatplus"===g.path(),i.showContacts=o.disableChat?!0:"/chatplus"!==g.path(),a.doremove=function(){n.removeOldUsers()},i.openMessenger=function(a){a&&u.put("hideFacebookModal","true"),j.dismissAll(),l.open("https://www.messenger.com/t/","_blank")},i.showMessengerModal=function(){u.get("hideFacebookModal")&&"true"===u.get("hideFacebookModal")?l.open("https://www.messenger.com/t/","_blank"):i.showModal("/modals/facebookmessenger.html","")};var C=a.uploader=new d({url:i.onescreenBaseUrl+"/hawksoft/uploadscreenshot",queueLimit:1,headers:{Authorization:"Bearer "+i.userToken}});C.onWhenAddingFileFailed=function(a,b,c){console.info("onWhenAddingFileFailed",a,b,c)},C.onAfterAddingFile=function(a){console.info("onAfterAddingFile",a)},C.onAfterAddingAll=function(a){console.info("onAfterAddingAll",a)},C.onBeforeUploadItem=function(a){console.info("onBeforeUploadItem",a)},C.onProgressItem=function(a,b){console.info("onProgressItem",a,b)},C.onProgressAll=function(a){console.info("onProgressAll",a)},C.onSuccessItem=function(a,b,c,d){console.info("onSuccessItem",a,b,c,d)},C.onErrorItem=function(a,b,c,d){console.info("onErrorItem",a,b,c,d)},C.onCancelItem=function(a,b,c,d){console.info("onCancelItem",a,b,c,d)},C.onCompleteItem=function(a,b,c,d){console.info("onCompleteItem",a,b,c,d),o.enableDebug&&console.log(b)},C.onCompleteAll=function(){console.info("onCompleteAll")},a.doTestMobileUpload=function(b){o.enableDebug&&console.log(b),o.enableDebug&&console.log(a.uploadfile);var c={file:b};o.enableDebug&&console.log(c),n.postCloudMobileUpload(c).then(function(a){i.showalerts(a)})},a.gotoMissedCalls=function(){i.showMissedCalls=!0,g.path("/callhistory/").search({missed:"true"})},a.sortTilesAlphabetically=function(){n.getSortedTiles().then(function(a){o.enableDebug&&console.log(a),i.user.symphony_user_settings.dashboard_order=a.data})},a.resetTiles=function(){n.getResetTiles().then(function(a){o.enableDebug&&console.log(a),i.user.symphony_user_settings.dashboard_order=a.data})},i.getContactbyContactUUID=function(a){o.enableDebug&&console.log("GETTING CONTACT BY UUID");var b=f("getContactbyUUID")(i.userContacts,a);return o.enableDebug&&console.log(b),null!==b?i.userContacts[b]:null},i.setHeaderProfileColor=function(a){var b=i.getContactbyContactUUID(a).then(function(a){return o.enableDebug&&console.log("HEADER COLOR"+b.contact_profile_color),"background-color: "+b.contact_profile_color+" !important;"});return""},i.showTimer=!1,a.checkStatus=function(a){angular.forEach(i.domainsStatus,function(b){a==b.status_name?(i.start_timer=b.start_timer,l.localStorage.setItem("start_timer",JSON.stringify(i.start_timer))):("Available"==a||"Away"==a||"Do Not Disturb"==a||"Busy on Call"==a)&&(i.start_timer=!0,l.localStorage.setItem("start_timer",JSON.stringify(i.start_timer)))})},i.start_timer=JSON.parse(l.localStorage.getItem("start_timer")),i.changeUserStatus=function(b,c){if(a.checkStatus(b),b.status_name||(b={status_name:b}),i.onCallWith&&"Busy on Call"===i.user.user_status)return i.alerts.push({type:"danger",msg:"Action invalid:  you cannot change your status while on a call."}),!0;if(t.onCall()&&!c)return null;if(i.user){var d=f("getByUUID")(i.userContacts,i.user.contact_uuid,"contact");null!==d&&(i.userContacts[d].status=b.status_name),i.user.user_status=b.status_name,l.localStorage.setItem("currentUser",JSON.stringify(i.user));var g={status:b.status_name,status_uuid:b.status_uuid?b.status_uuid:null};return i.userStatusIconClass=m.funcPutIcon(b.status_name,"fa-2x"),x.setTkUsers(),i.tkUsers||(i.tkUsers=JSON.parse(l.localStorage.getItem("tkUsers"))),angular.forEach(i.tkUsers,function(a){a.user_uuid==i.user.id&&(l.localStorage.setItem("isTkUser",JSON.stringify(a)),i.showTimer=!0)}),n.updateStatus(g).then(function(a){a.data.error||("Offline"!==b.status_name&&"Available"!==b.status_name,"Available"===b.status_name&&e.watch())},function(a){o.enableDebug&&console.log(a)})}},z.registerOnRootScopeUserLoadCallback(function(){x.setTkUsers(),i.tkUsers=x.tkUsers,i.tkUsers||(i.tkUsers=JSON.parse(l.localStorage.getItem("tkUsers"))),angular.forEach(i.tkUsers,function(a){a.user_uuid==i.user.id||"user"!=i.user.accessgroup?(l.localStorage.setItem("isTkUser",JSON.stringify(a)),i.showTimer=!0):l.localStorage.removeItem("isTkUser")})}),a.dialPadClick=function(a){i.phone_number=(i.phone_number?i.phone_number:"")+a,angular.element("#iconClose").focus()},a.backSpace=function(){i.phone_number=i.phone_number.substring(0,i.phone_number.length-1)},i.phone_number999="",a.dialPadClickOnCall=function(a){i.phone_number999=i.phone_number999+a,angular.element("#iconClose").focus()},a.backSpaceOnCall=function(){i.phone_number999=i.phone_number999.substring(0,i.phone_number999.length-1)},a.logoutUser=function(){k.logout().then(function(a){l.localStorage.clear(),l.localStorage.getItem("satellizer_token")&&l.localStorage.removeItem("satellizer_token"),g.path("/login")})["catch"](function(a){})},a.goToOption=function(a){"/quote-sheet"===a?i.showModal("/quote-sheet-message.html"):g.path(a)},a.goToUrl=function(a){l.open(a,"_blank")},a.tileOptions=function(b,c){return"false"==c?[["Hide",function(d){o.enableDebug&&console.log(c),a.toggleTile(b,c)}]]:[["Show",function(d){o.enableDebug&&console.log(c),a.toggleTile(b,c)}]]},a.hoverIn=function(b){1===b?a.thum1=!0:2===b?a.thum2=!0:3===b?a.thum3=!0:4===b?a.thum4=!0:5===b?a.thum5=!0:6===b?a.thum6=!0:7===b?a.thum7=!0:8===b?a.thum8=!0:9===b?a.thum9=!0:10===b&&(a.thum10=!0)},a.hoverOut=function(b){1===b?a.thum1=!1:2===b?a.thum2=!1:3===b?a.thum3=!1:4===b?a.thum4=!1:5===b?a.thum5=!1:6===b?a.thum6=!1:7===b?a.thum7=!1:8===b?a.thum8=!1:9===b?a.thum9=!1:10===b&&(a.thum10=!1)},a.TawkAPI=h,a.TawkAPI.onLoad=function(){a.TawkAPI.hideWidget()},a.TawkAPI.onChatMinimized=function(){a.TawkAPI.hideWidget()},a.callSupport=function(){t.makeCall(p.supportDID)},a.toggleChat=function(){a.TawkAPI.isChatHidden()?a.startChat():a.closeChat()},a.triggerFeedbackEmail=function(){var a="pilot@kotter.net",b="Bridge Pilot Feedback",c="tell us what you think!";s.startEmailClient(a,b,c)},a.closeChat=function(){a.TawkAPI.hideWidget(),a.TawkAPI.minimize()},a.startChat=function(){a.TawkAPI.maximize(),a.TawkAPI.showWidget()},a.togglegreenbox=function(){var a="false";i.user.greenbox_active&&"false"!=i.user.greenbox_active||(a="true"),n.getToggleGreenboxStatus(a).then(function(a){o.enableDebug&&console.log(a.data)})},a.toggleTile=function(a,b){i.user.symphony_user_settings.dashboard_order[a].active=b,l.localStorage.setItem("currentUser",JSON.stringify(i.user));var c={order:i.user.symphony_user_settings.dashboard_order};n.postUpdateDashboard(c)},a.showCommunications=function(a){i.contactCommSearch=a,g.path("/communications")},a.onDropComplete=function(a,b,c){for(var d=i.user.symphony_user_settings.dashboard_order,e=(d[a],d.indexOf(b));0>e;)e+=d.length;for(;0>a;)a+=d.length;if(a>=d.length)for(var f=a-d.length;f--+1;)d.push(void 0);o.enableDebug&&console.log(a,e),d.splice(a,0,d.splice(e,1)[0]),i.user.symphony_user_settings.dashboard_order=d,l.localStorage.setItem("currentUser",JSON.stringify(i.user)),o.enableDebug&&console.log(d);var g={order:d};n.postUpdateDashboard(g)},a.goToMyProfile=function(){i.showMyProfile=!0,"/settings"===g.path()?i.$broadcast("show.my.profile"):g.path("/settings")}}]),proySymphony.controller("ChatPlusCtrl",["$scope","$location","$rootScope","$http","$timeout","$interval","$window","$filter","$cookies","$q","__env","symphonyConfig","$uibModal","$uibModalStack","$myModal","FileUploader","$routeParams","Slug","$anchorScroll","usefulTools","dataFactory","mmApi","$sce","chatWebsocket","fileService","$compile","chatService","chatMacroService","emailService","callService","videoConfService","userContactService","newChatService","chatMessages",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H){function I(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;35>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}function J(){a.search={},a.search={showSearch:!1,searchText:null,highlightPost:null,jumpToPost:a.jumpToPost,sendSearch:a.sendSearch,results:{}}}function K(){var a={},b={};angular.copy(G.publicChannels,a),angular.copy(G.privateChannels,b);var c=_.merge(a,b);return t.convertObjectToArray(c)}if(a.chatData=G.publicData,a.currentChannel=function(){return a.chatData.currentChannel},a.currentTypingUsers={},a.typingTimeoutTime=4e3,a.mainChatInput=angular.element("#chatInput")[0],console.log(angular.element("#chatInput")),console.log(angular.element("#chatInput")[0]),a.publicChannels=function(){return t.convertObjectToArray(G.publicChannels)},a.privateChannels=function(){return t.convertObjectToArray(G.privateChannels)},a.directChannels=function(){return t.convertObjectToArray(G.directChannels)},a.teamMembers=G.teamMembers,a.showChatStatus=function(a){var b="Offline";if(a){var c=F.contacts,d=h("getContactbyMMID")(c,a.id);null!==d&&(b=d.status)}return t.funcPutIcon(b,"")},a.getOrderPost=function(b){return a.currentChannel().postInfo.posts[b]},a.getSearchOrderPost=function(b){return a.currentChannel().searchInfo.posts[b]},a.$watch("websocket.restart.needed",function(b,c){console.log("RESTART SOCKET"),H.closeSocket(),a.chatMessages=H}),console.log(q),q.chId){var L=q.chId,M=q.poId;if(b.search({}),i.put("currentChannel",L),M){var N=G.publicData.currentChannel.postInfo.posts[M];N&&e(function(){a.jumpToPost(N)},500)}else a.scrollToBottom()}q&&g.localStorage.setItem("lastChannel",JSON.stringify(c.lastChannel)),a.handleScroll=function(b){var d=100,g=0,h=f(function(){if(g+=1,g>d&&f.cancel(h),a.currentChannel().postInfo){f.cancel(h);var i;c.showingMorePosts?(i=G.getNextPost(c.showingMorePosts),i&&(a.jumpToPost(i),e(function(){a.jumpToPost(i)},2*b)),c.showingMorePosts=!1):(a.scrollToBottom(),e(function(){a.scrollToBottom()},2*b))}},100)},a.$watch("chatData.currentChannel",function(b,c){a.$evalAsync(function(){a.handleScroll(100)})}),a.$watch("chatData.currentChannel.postInfo.count",function(b,c){var d=0;b&&!c&&0!==c&&(d=100),console.log(d),d>0?e(function(){a.handleScroll(d)},d):a.$evalAsync(function(){a.handleScroll(d)})}),a.setChannel=function(a){G.setCurrentChannel(a)},a.jumpToPost=function(a){k.enableDebug&&console.log(a);var b='chat-post[data-post-id="'+a.id+'"]';console.log(b);var c=angular.element(b)[0];console.log(c),c&&c.scrollIntoView&&c.scrollIntoView(!1)},a.scrollToBottom=function(){e(function(){var a=angular.element(".posts-container")[0];a.scrollTop=a.scrollHeight})},a.sendPost=function(b,c,d){if(d||(d={}),d.uploader||b!==a.mainChatInput||(d.uploader=P),d.uploader&&d.uploader.queue.length>0)return void d.uploader.uploadAll();var e=b.value.trim();!e&&G.postFiles.length>0&&(e=b.value="file: "),e&&G.sendPost(c,e,d),b.value="";var f=d.root_id?d.root_id:c.id;G.setInProgress(f,"")},e(function(){f(function(){g.autoType&&(a.mainChatInput.value=I(),a.onUserIsTyping(a.currentChannel()),a.sendPost(a.mainChatInput,a.currentChannel()))},2e3)},5e3),a.showMemberCount=function(){var b=h("numKeys")(a.currentChannel().members);return b+" Member"+(b>1?"s":"")},a.showMorePosts=function(){var b=a.currentChannel(),d={},e=b.postInfo.posts,f=b.postInfo.order,g=e[f[0]];g&&(d.before=g.id),c.showingMorePosts=g,G.getChannelPosts(a.currentChannel(),d)},a.getCurrentlyTypingUsersByChannelId=function(b,c){b||(b=a.currentChannel().id);var d=a.currentTypingUsers[b];d||(d={});var e=function(a){return d[a].mmUser},f=Object.keys(d).map(e),g=function(a){return a.first_name};return c?f.map(g):f},a.currentTypingMessage=function(){var b=a.getCurrentlyTypingUsersByChannelId(null,!0);return 0===b.length?void 0:1===b.length?b[0]+" is typing":2===b.length?b[0]+" and "+b[1]+" are typing":b[0]+" and "+(b.length-1)+" others are typing"},a.addTypingUser=function(b,c){a.currentTypingUsers[b]?a.currentTypingUsers[b][c.id]&&e.cancel(a.currentTypingUsers[b][c.id].typingTimeout):a.currentTypingUsers[b]={};var d=e(function(){delete a.currentTypingUsers[b][c.id],e.cancel(d)},a.typingTimeoutTime+1e3);a.currentTypingUsers[b][c.id]={typingTimeout:d,mmUser:c}},a.showLoadEarlierButton=function(){var b=a.currentChannel(),c=b.total_msg_count;if(b.searchInfo)return!1;if(b.postInfo&&b.postInfo.order){var d=b.postInfo.order.length;return c>d}return!1},H.registerEventHandler("typing",function(b,c){var d=G.teamMembers[c.user_id];d&&a.addTypingUser(b.channel_id,d)}),a.openThread=function(b){if(a.closeSearchDisplay(),a.isThreadPost(b)){var c=a.currentChannel().postInfo.posts[b.parent_id];a.threadPost=c}else a.threadPost=b},a.$watch("threadPost",function(b,c){b?a.showThreadPanel=b:e(function(){a.showThreadPanel=b})}),a.closeThreadedDisplay=function(){e(function(){a.threadPost=null})},a.isThreadPost=function(a){return G.isThreadPost(a)},a.threadPostRootUserName=function(b){var d;if(b.root_id){var e=a.threadPostRootPost(b);d=c.teamUsers[e.user_id]}else d=c.teamUsers[b.user_id];return d?d.first_name+" "+d.last_name:void 0},a.threadPostRootPost=function(b){return a.currentChannel().postInfo.posts[b.root_id]};var O=k.mmUrl&&""!=k.mmUrl?k.mmUrl:l.chatUrl,P=new p({url:O+"/files",alias:"files",removeAfterUpload:!0,headers:{Authorization:"Bearer "+i.get("accessToken")},transformRequest:angular.identity
});a.uploader=P,a.showUploadingFiles=!1,a.showUploadingOverlay=!1,a.showUploadingFiles2=!1,a.$watch("uploader.queue.length",function(b,c){b>0&&(a.showUploadingFiles=!0),0===b&&(a.showUploadingFiles=!1)}),a.threadedClassObj={},a.getClassObj=function(){return{well:!0,"my-drop-zone":!0,"with-side-panel":a.showThreadPanel||a.search&&a.search.showSearch,"with-file-upload":a.showUploadingFiles}},P.onWhenAddingFileFailed=function(a,b,c){k.enableDebug&&console.info("onWhenAddingFileFailed",a,b,c)},P.onAfterAddingFile=function(a){k.enableDebug&&console.info("onAfterAddingFile",a)},P.onAfterAddingAll=function(a){k.enableDebug&&console.info("onAfterAddingAll",a)},P.onBeforeUploadItem=function(b){a.uploadChannel=G.currentChannel();var c=a.uploadChannel.id;b.formData.push({channel_id:c}),k.enableDebug&&console.info("onBeforeUploadItem",b)},P.onProgressItem=function(a,b){k.enableDebug&&console.info("onProgressItem",a,b)},P.onProgressAll=function(a){k.enableDebug&&console.info("onProgressAll",a)},P.onErrorItem=function(a,b,c,d){k.enableDebug&&console.log("ERROR RESPONSE FROM UPLOADING AVATAR"),k.enableDebug&&console.log(b),fileitem.isUploaded=!1,k.enableDebug&&console.info("onErrorItem",a,b,c,d)},P.onCancelItem=function(a,b,c,d){k.enableDebug&&console.info("onCancelItem",a,b,c,d),P.clearQueue()},P.onCompleteItem=function(a,b,c,d){k.enableDebug&&console.info("onCompleteItem",a,b,c,d)},P.onCompleteAll=function(){k.enableDebug&&console.info("onCompleteAll"),k.enableDebug&&console.log("FILE IDS"),k.enableDebug&&console.log(G.postFiles),a.doSendMessage(a.uploadChannel)},a.sendMessage=function(){G.getCurrentMessage()||0!=a.uploader.queue.length?0==a.uploader.queue.length?a.doSendMessage():a.uploader.uploadAll():c.showErrorAlert("You have just tried to send an empty message.")},a.doSendMessage=function(b){b||(b=G.currentChannel()),a.sendPost(a.mainChatInput,b)},a.$watch(G.getCurrentMessage,function(a,b){G.inProgressMessages[G.publicData.currentChannel.id]=a}),a.chatView={getCurrentMessage:G.getCurrentMessage,setCurrentMessage:G.setCurrentMessage,showPeopleSuggestionList:!1,showChannelSuggestionList:!1,checkCallout:"",selectedIndex:null},a.hasSearchResults=function(){return a.chatData.currentChannel.searchInfo?!0:!1},a.goToRecentMessages=function(){G.goToCurrentChannel()},a.sendSearch=function(){a.search.showSearch=!0,a.closeThreadedDisplay(),G.doChatSearch(a.search.searchText).then(function(b){a.search.results=b})},J(),a.closeSearchDisplay=function(){a.search.showSearch=!1},a.sendUserTypingEvent=function(a){var b={channel_id:a.id,parent_id:""};H.sendMessage("user_typing",b)},a.onUserIsTyping=function(b){a.lastTypingTimeout||(a.lastTypingTimeout=e(function(){e.cancel(a.lastTypingTimeout),delete a.lastTypingTimeout},a.typingTimeoutTime),a.sendUserTypingEvent(b))},a.getPeopleForList=function(){var a=[{username:"channel",id:"@channel",first_name:"Notify everyone in this channel"}],b=function(a){return a.id!==G.userProfile.id},c=t.convertObjectToArray(G.teamMembers);return c=c.filter(b),c=c.concat(a)},G.registerChatEventCallback("teamMembersLoaded",function(){a.peopleListData={people:a.getPeopleForList(),selectedIndex:0,element:null,scope:a,select:function(b){var c=this.scope,d=this.element;a.selectCurrentSelection(c,d,b)}}}),G.registerChatEventCallback("memberAdded",function(){a.peopleListData&&(a.peopleListData.people=a.getPeopleForList())}),B.getChatMacros().then(function(b){b&&(a.macrosListData={macros:b,selectedIndex:0,element:null,scope:a,select:function(b,c){var d=this.scope,e=this.element;a.selectMacroSelection(d,e,{index:b,suggestion:c})}})}),a.getChatMacroHotKeys=function(a){return a.macrosListData?_.map(a.macrosListData.macros,function(a){return Object.keys(a)[0]}):null},G.registerChatEventCallback("chatInitialized",function(){a.channelListData={channels:K(),selectedIndex:0,element:null,scope:a,select:function(b){var c=this.scope,d=this.element;a.selectCurrentSelection(c,d,b)}}}),G.registerChatEventCallback("channelRemoved",function(){a.channelListData&&(a.channelListData.channels=K())}),G.registerChatEventCallback("channelAdded",function(){a.channelListData&&(a.channelListData.channels=K())}),a.selectCurrentSelection=function(b,c,d){if(b.showPeopleList){d||(d=b.peopleListData.selectedIndex);var e=b.peopleListData.people[d].username,f=c.value,g=a.getKeyReverseIndex(f,"@"),h=f.split("").reverse(),i=h.slice(g,h.length).reverse().join("")+e+" ";c.value=i,b.showPeopleList=!1,b.peopleListData.selectedIndex=0}else if(b.showChannelList){d||(d=b.channelListData.selectedIndex);var j=b.channelListData.channels[d].name,f=c.value,g=a.getKeyReverseIndex(f,"#"),h=f.split("").reverse(),i=h.slice(g,h.length).reverse().join("")+j+" ";c.value=i,b.showPeopleList=!1,b.showChannelList=!1,b.channelListData.selectedIndex=0}},a.selectMacroSelection=function(a,b,c){c||(c={});var d=c.suggestion,e=(c.index?c.index:a.macrosListData.selectedIndex,d.text_choice_text),f=b.value,g=f.split(" ").reverse().indexOf(d.hot_key_text),h=f.split(" ").reverse(),i=h.slice(g+1,h.length).reverse().join(" ")+" "+e+" ";b.value=i,a.showMacrosList=!1},a.getKeyPressChatFns=function(b){return{onKeyDown:{bareEnter:function(c,d){c.stopImmediatePropagation(),c.preventDefault(),b.$evalAsync(function(){if(b.showPeopleList||b.showChannelList)a.selectCurrentSelection(b,d.element);else if(b.showMacrosList){var c=b.macrosListData,e={suggestion:c.suggestions[c.selectedIndex],index:c.selectedIndex};a.selectMacroSelection(b,d.element,e)}else d.doSendPost()})},shiftEnter:function(a,b){},at:function(a,c){var d=t.doGetCaretPosition(a.target);(0===d||a.target.value.length>0&&" "===a.target.value.substr(a.target.value.length-1,1))&&(a.stopImmediatePropagation(),b.$evalAsync(function(){b.showPeopleList=!0}))},hash:function(a,c){var d=t.doGetCaretPosition(a.target);(0===d||a.target.value.length>0&&" "===a.target.value.substr(a.target.value.length-1,1))&&(a.stopImmediatePropagation(),b.$evalAsync(function(){b.showChannelList=!0}))},tab:function(c,d){if(c.stopImmediatePropagation(),c.preventDefault(),b.showPeopleList||b.showChannelList)a.selectCurrentSelection(b,d.element);else if(b.showMacrosList){var e=b.macrosListData,f={suggestion:e.suggestions[e.selectedIndex],index:e.selectedIndex};a.selectMacroSelection(b,d.element,f)}},esc:function(a,c){b.$evalAsync(function(){b.showChannelList=!1,b.showPeopleList=!1,b.showMacrosList=!1})},spc:function(a,c){b.$evalAsync(function(){b.showChannelList=!1,b.showPeopleList=!1,b.showMacrosList=!1})},up:function(a,c){a.stopImmediatePropagation(),b.$evalAsync(function(){if(b.showPeopleList){var a=(b.peopleListData.people.length,b.peopleListData.selectedIndex);0>a-1||(b.peopleListData.selectedIndex-=1)}else if(b.showChannelList){var a=(b.channelListData.channels.length,b.channelListData.selectedIndex);0>a-1||(b.channelListData.selectedIndex-=1)}else if(b.showMacrosList){var a=(b.macrosListData.macros.length,b.macrosListData.selectedIndex);0>a-1||(b.macrosListData.selectedIndex-=1)}})},down:function(a,c){a.stopImmediatePropagation(),b.$evalAsync(function(){if(b.showPeopleList){var a=b.peopleListData.people.length,c=b.peopleListData.selectedIndex;c+1>a-1||(b.peopleListData.selectedIndex+=1)}else if(b.showChannelList){var a=b.channelListData.channels.length,c=b.channelListData.selectedIndex;c+1>a-1||(b.channelListData.selectedIndex+=1)}else if(b.showMacrosList){var a=b.macrosListData.suggestions.length,c=b.macrosListData.selectedIndex;c+1>a-1||(b.macrosListData.selectedIndex+=1)}})},backspace:function(a,c){var d=c.element.value.split("").pop();b.$evalAsync(function(){b.showPeopleList?"@"===d&&(b.showPeopleList=!1):b.showChannelList?"#"===d&&(b.showChannelList=!1):b.showMacrosList})},always:function(c,d){a.onUserIsTyping(d.channel());for(var e,f=d.element.value,g=f.split(" "),h=b.macrosListData.macros,i=a.getChatMacroHotKeys(b),j=g[g.length-1],k=0;k<i.length;k++)if(e=i[k],j.indexOf(e)>-1){b.showMacrosList=!0;var l=h[k],m=l[Object.keys(l)[0]];b.macrosListData.suggestions=m}},noRelevant:function(a,b){}},onKeyUp:{bareEnter:function(a,b){},shiftEnter:function(a,b){},at:function(a,b){},hash:function(a,b){},tab:function(a,b){},esc:function(a,b){},spc:function(a,b){},up:function(a,b){},down:function(a,b){},always:function(c,d){b.$evalAsync(function(){function c(b){var c=a.findSearchTermFromElementByKey(d.element,"@");return b.username.indexOf(c)>-1}if(d.setInProgress(d.element.value),b.showPeopleList&&G){var e=a.getPeopleForList().filter(c);b.peopleListData.people=e,b.peopleListData.selectedIndex>e.length-1&&(b.peopleListData.selectedIndex=0)}})},noRelevant:function(a){}},onPaste:function(b,c){a.handlePaste(b,P)}}},a.handlePaste=function(a,b){var c,d,e,f,g;if(a.clipboardData&&a.clipboardData.items)for(var h=0;h<a.clipboardData.items.length;h++)c=a.clipboardData.items[h],c.getAsFile()&&(d=c.getAsFile(),e=moment().format("YYYY-M-D H-m"),f=y.getFileTypeByMimeType(d.type),g=new File([d],"Image Pasted at "+e+"."+f,{type:d.type}),b.addToQueue(g))},a.keyPressChatFns=a.getKeyPressChatFns(a),a.findSearchTermFromElementByKey=function(b,c){var d=b.value,e=d.split("").reverse(),f=a.getKeyReverseIndex(d,c),g=e.slice(0,f).reverse().join().replace(/,/g,"");return g},a.getKeyReverseIndex=function(a,b){var c=a.split("").reverse(),d=c.indexOf(b);return d},a.copySelected={},a.enableCopyMode=!1,a.toggleCopyMode=function(){a.enableCopyMode=!a.enableCopyMode,a.enableCopyMode||(a.copySelected={})},a.copyMessage=function(b){a.copySelected[b]?delete a.copySelected[b]:a.copySelected[b]=!0},a.saveCopiedMessages=function(){G.saveCopiedPosts(a.copySelected),a.toggleCopyMode()},a.cancelCopyMessages=function(){a.toggleCopyMode()},a.$on("main.chat.insert.macro.text",function(a,b,d){c.$broadcast("close.main.channel.chat.macro.suggestion");var e=B.getMainChatCurMessageValue();e=B.insertTextIntoMessage(b,e,d),G.setCurrentMessage(e)}),a.emojiLocation=g.innerHeight-430,wdtEmojiBundle.defaults.emojiSheets.apple="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_apple_64_indexed_128.png",wdtEmojiBundle.defaults.emojiSheets.google="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_google_64_indexed_128.png",wdtEmojiBundle.defaults.emojiSheets.twitter="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_twitter_64_indexed_128.png",wdtEmojiBundle.defaults.emojiSheets.emojione="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_emojione_64_indexed_128.png",wdtEmojiBundle.defaults.emojiSheets.facebook="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_facebook_64_indexed_128.png",wdtEmojiBundle.defaults.emojiSheets.messenger="https://res.cloudinary.com/freebizads/image/upload/v1492270732/wdt/sheet_messenger_64_indexed_128.png",wdtEmojiBundle.defaults.sectionOrders={Recent:10,Custom:9,People:8,Nature:7,Foods:6,Activity:5,Places:4,Objects:3,Symbols:2,Flags:1},wdtEmojiBundle.defaults.type="twitter"}]),proySymphony.controller("ChatPlusSideCtrl",["$scope","$location","$rootScope","$http","$timeout","$window","$filter","$cookies","$q","$uibModal","$uibModalStack","chatWebsocket","chatService","$anchorScroll","usefulTools","$interval","$myModal","dataFactory","mmApi","Slug","pusherService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){}]),proySymphony.controller("CallHistoryCtrl",["$scope","$window","$filter","$mdDialog","ngAudio","$rootScope","$routeParams","$location","dataFactory","__env","symphonyConfig","$timeout","emailService","callHistoryService","callService","usefulTools","userContactService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){n.getCallHistory().then(function(a){f.callHistoryData=a,i.getResetMissedCalls(f.user.extension.extension_uuid),f.missedCalls=0})}g.videoroom,a.historyTableHeight=b.innerHeight-320,a.maxSize=50,a.predicate="start_stamp",a.reverse=!0,a.ppOptions=[10,20,50,100],a.startEmailClient=function(a){m.startEmailClient(a)},console.log("USER"),console.log(f.user),f.emulationStatus||(f.emulationStatus=JSON.parse(b.localStorage.getItem("emulationStatus"))),a.currentPageCallHist=0,a.displayCallHistoryRST=[],a.returnAvatarName=function(a,b){var c,d;return f.userContacts.forEach(function(b){a===b.extension?(d=b.contact_name_full,c=b.contact_profile_image):b.phones.forEach(function(e){var f=e.phone_number.replace(/-/g,""),g=f.length;(f===a.substring(a.length-g)||a===e.phone_extension)&&(d=b.contact_name_full,c=b.contact_profile_image)})}),d&&"ava"===b?c:c&&"nam"===b?d:!1},a.showChevron=function(b){return p.showChevron(b,a.predicate,a.reverse)};var s=new Date;f.callHistory={user_uuid:f.user.id,page:1,perPage:20,maxPages:50,currentPage:1,fromDate:"",toDate:""},a.displayFromDate=new Date(moment().subtract(30,"days")),a.displayToDate=new Date,a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:new Date(2016,1,1),maxDate:s},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:f.callHistory.fromDate,maxDate:s},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.processFromDate=function(b){if(null!=b){var c=new Date(b);if(!f.callHistory.toDate||f.callHistory.toDate<c){var d=c;a.toDateOptions.minDate=d,f.callHistory.toDate=d}var e=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.functGetCallHistory(e)}},a.processToDate=function(a){null!=a&&((!f.callHistory.fromDate||f.callHistory.fromDate>a)&&(f.callHistory.fromDate=new Date(a)),f.callHistory.toDate=new Date(a));var b=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.functGetCallHistory(b)},a.processFromDate(),a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},f.callHistoryRST=[],a.clearDateSearch=function(){a.displayFromDate=new Date(moment().subtract(30,"days")),a.displayToDate=new Date,f.callHistory.fromDate="",f.callHistory.toDate="",f.callHistory.currentPage=1;var b=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.functGetCallHistory(b)},a.submitDateSearch=function(){var a=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.callHistory.currentPage=1,f.functGetCallHistory(a)},f.selectEmulateUser=null,f.showTable=!1,a.voicemailFilenames=[],f.callHistoryRST=[],a.stopScroll=!0,a.historyLength=0,a.dateSearched=!0,a.changePerPage=function(){var a=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.functGetCallHistory(a)},a.changePage=function(a){f.callHistory.currentPage=a;var b=f.selectEmulateUser&&null!==f.selectEmulateUser?f.selectEmulateUser:f.user.id;f.functGetCallHistory(b)},a.showMissed=function(a){return"true"===g.missed?"missed"===a.call_status||"sent_to_voicemail"===a.call_status:!0},a.showMissedField=function(){return"true"===g.missed},a.clearMissedFilter=function(){h.path("/callhistory").search({missed:!1}),f.showMissedCalls=!1},a.searchCallHistory=function(b){if(!a.historySearch||b.caller_id_name&&-1!=b.caller_id_name.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.caller_id_number&&-1!=b.caller_id_number.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.noncontact&&b.noncontact.name&&-1!=b.noncontact.name.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.noncontact&&b.noncontact.phone&&-1!=b.noncontact.phone.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.contact&&b.contact.extension&&-1!=b.contact.extension.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_given.toLowerCase().indexOf(a.historySearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_family.toLowerCase().indexOf(a.historySearch.toLowerCase()))return!0;if(b.contact&&b.contact.phones.length>0){var c=!1;return angular.forEach(b.contact.phones,function(b){-1!=b.phone_number.indexOf(a.historySearch)&&(c=!0)}),c}return!1},a.loadedAll=!1,a.copyCallToHawksoft=function(a){console.log(a),a.user_uuid=f.user.id,a.extension_uuid=f.user.extension.extension_uuid,i.postHSCopyCall(a).then(function(a){console.log(a)},function(a){console.log(a)})},f.functGetCallHistory=function(a){f.callHistory.user_uuid=a,f.callHistory.page=1,n.getCallHistory().then(function(a){f.callHistoryData=a})},a.$on("new.contact.added",function(a,b){var c;angular.forEach(f.callHistoryData,function(a){c=a.contact_number;var d=q.phoneNumberBelongsToContact(b,c);d&&(a.noncontact=null,a.contact_uuid=b.contact_uuid,a.contact_name=b.contact_name_full,a.from_to=b.contact_name_full,a.isContact=!0,a.isUser="user"===b.contact_type,a.contact=b)})}),a.$on("contact.deleted",function(a,b){angular.forEach(f.callHistoryData,function(a){a.contact&&a.contact.contact_uuid===b&&(a.noncontact=!0,a.contact_uuid=void 0,a.contact_name=void 0,a.from_to=void 0,a.isContact=!1,a.isUser=void 0,a.contact=void 0)})}),q.data.initialContactsLoaded?r():q.registerOnContactLoadCallback(function(){r()}),a.pageChanged=function(){(a.currentPageCallHist-1)*a.entryLimitCallHist;j.enableDebug&&console.log(a.currentPageCallHist)},a.audioPlaying=null,f.playRecording=function(b){a.audio=new Audio(k.audioUrl+b),a.audioPlaying=b,a.audio.play()},f.playVoicemail=function(b){var c=b.indexOf("voicemails");j.enableDebug&&console.log(b.substring(c)),a.audio=new Audio(k.audioUrl+b.substring(c)),a.audioPlaying=b,a.audio.play()},f.stopPlaying=function(){a.audio.pause(),a.audioPlaying=null},a.formatDate=function(a){var b=new Date(a);return b},a.formatTime=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=a%60;return c=10>c?"0"+c:c,d=10>d?"0"+d:d,b+":"+c+":"+d},a.filter=function(){l(function(){a.filteredItemsCallHist=a.filtered.length},100)},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.getIcon=function(a){return"glyphicon-chevron-down"},a.showBtnDelCalls=!1,a.callsSelected=[],a.showCallSelected={},a.callSelected=function(b){a.showCallSelected[b]?delete a.showCallSelected[b]:a.showCallSelected[b]=!0},a.hasSelections=function(){var b=p.convertObjectToArray(a.showCallSelected);return b.length>0},a.deleteCallSelected=function(){var b=[];angular.forEach(a.showCallSelected,function(a,c){a===!0&&b.push(c)});var e=d.confirm().title("Are you sure you want to delete the "+b.length+" select calls?").ariaLabel("Delete").ok("Yes").cancel("Cancel");d.show(e).then(function(){var d={calls:b};i.postSoftDeleteCallHistory(d).then(function(d){a.showalerts(d),angular.forEach(b,function(b){var d=c("getByUUID")(a.callHistoryData,b,"call_history_fs");null!==d&&a.callHistoryData.splice(d,1)}),a.showCallSelected={}},function(a){j.enableDebug&&console.log(a)})},function(){a.showCallSelected={}})},a.makeCall=function(a){o.makeCall(a)}}]),proySymphony.controller("CallCenterCtrl",["$scope","$interval","$window","$location","$filter","$rootScope","dataFactory","ngAudio","callService","$timeout","userService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function m(a){return a.oncall&&!n(a)}function n(a){return a.contact.contact_uuid===f.user.contact_uuid}function o(a){return"Outbound"===a.direction?a.uuid:a.b_uuid}function p(){g.getCurrentCalls().then(function(b){if(__env.enableDebug&&console.log("CALL CENTER RESPONSE"),__env.enableDebug&&console.log(b),b.error)__env.enableDebug&&console.log(b.error.message);else{a.currentCalls=b.data.success.data,a.currentCalls.forEach(function(a){});var c=0;f.userContacts&&f.userContacts.forEach(function(b){if("user"==b.contact_type&&f.isManagerOf(b.user_uuid,"callcenter")){a.staffCallStatus[c]={},a.staffCallStatus[c].contact=b,a.staffCallStatus[c].call={},a.staffCallStatus[c].oncall=!1,a.staffCallStatus[c].contact.group="Sales",3>c&&(a.staffCallStatus[c].contact.group="Support");var d=e("getOutCallbyExt")(a.currentCalls,b.extension),g=e("getInCallbyExt")(a.currentCalls,b.extension);if(g||d){a.staffCallStatus[c].contact.status="Busy on Call";var h=null;if(g&&(h=g),d&&(h=d),null!==h)if(a.staffCallStatus[c].oncall=!0,a.staffCallStatus[c].call.direction=h.inOut,a.staffCallStatus[c].call.uuid=h.uuid[0],a.staffCallStatus[c].call.b_uuid=h.b_uuid[0],a.staffCallStatus[c].call.ext=h.ext[0],a.staffCallStatus[c].call.duration=h.talkTime,d)a.staffCallStatus[c].call.number=h.onCallWithNum[0],a.staffCallStatus[c].call.callerid=h.onCallWithName[0];else if(g){a.staffCallStatus[c].call.number=e("split")(h.ext[0],"@",0);var i=e("getContactbyExtension")(f.userContacts,a.staffCallStatus[c].call.number);a.staffCallStatus[c].call.callerid=i.contact_name_given+" "+i.contact_name_family}}else"Busy on Call"===b.status&&(a.staffCallStatus[c].contact.status="Available");l(1e3,45e3);c++}})}},function(a){__env.enableDebug&&console.log(a)})}f.emulationStatus||(f.emulationStatus=JSON.parse(c.localStorage.getItem("emulationStatus")));var q=k.isAdminGroupOrGreater(),r=function(){return f.emulationStatus&&f.emulationStatus.callcenter&&"true"===f.emulationStatus.callcenter.manager||q};if(a.allowed=r,a.allowed){a.callcenterTableHeight=c.innerHeight-300,a.perPage=10,a.maxSize=50,a.predicate="contact.contact_name_full",a.reverse=!0,a.currentPage=1,a.showTable=!0,a.ppOptions=[5,10,20,50,100],f.isLWBCall=!1,a.searchStaff=function(b){return!a.staffSearch||b.contact&&-1!=b.contact.contact_name_full.toLowerCase().indexOf(a.staffSearch.toLowerCase())||b.contact&&-1!=b.contact.extension.toLowerCase().indexOf(a.staffSearch.toLowerCase())?!0:!1},a.formatDate=function(a){var b=new Date(a);return b},a.filter=function(){j(function(){a.filteredItemsCallHist=a.filtered.length},100)},a.setPage=function(b){a.currentPageCallHist=b},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.getIcon=function(a){return"glyphicon-chevron-down"},f.userContacts||(f.userContacts=JSON.parse(c.localStorage.getItem("userContacts"))),__env.enableDebug&&console.log(f.userContacts);a.callListen=function(a){var b=angular.copy(a,{});i.listenCall(b)},a.LWBInProgress=i.LWBInProgress,a.callWhisper=function(a){var b=angular.copy(a,{});i.whisperCall(b)},a.callBarge=function(a){var b=angular.copy(a,{});i.bargeCall(b)},a.hangUpLWB=function(a,b){var c=o(b);i.hangUpLWB(a,c)},a.showDisabledIcon=function(a,b){var c=a.call;o(c),i.activeLWBCall();return i.onCall()?!0:!m(a)},a.showNotInProgressIcon=function(b,c){var d=(b.call,o(b.call));return a.showDisabledIcon(b,c)||a.LWBInProgress(c,d)?!1:m(b)},a.showInProgressIcon=function(b,c){var d=o(b.call);return d?a.LWBInProgress(c,d):!1},f.counter=1,b(function(){f.counter++},1e3),a.currentCalls=[],a.staffCallStatus=[],p(),f.updateCallCenter=b(function(){p()},5e3),f.$watch("active",function(a,c){a===!1&&b.cancel(f.updateCallCenter)}),a.showCounter=function(c){b(function(){a.staffCallStatus[c].call.duration++},1e3)}}}]),proySymphony.controller("ReportsCtrl",["$scope","$auth","$location","$rootScope",function(a,b,c,d){a["var"]=null}]),proySymphony.controller("AdvFeaturesCtrl",["$scope","$auth","$location","$rootScope","$uibModal","$document","__env","$uibModalStack","$http","dataFactory",function(a,b,c,d,e,f,g,h,i,j){a["var"]=null,a.roboactive=a.fileshareactive=a.videocallactive=!0,a.showfeaturesOptions=!0,a.showAutomaticDialer=a.showFileSharing=a.showVideoCalling=a.showScreenSharing=a.showConferenceCalling=!1,a.viewSection=function(b){a[b]=!0,a.showfeaturesOptions=!1},a.onShowAllFeatures=function(){a.showfeaturesOptions=!0,a.showAutomaticDialer=a.showVideoCalling=a.showConferenceCalling=a.showScreenSharing=a.showFileSharing=!1},a.status={isFirstOpen:!0,isFirstDisabled:!1,isSecondDisabled:!0,isThirdDisabled:!0,isFourthDisabled:!0,isFifthDisabled:!0},a.getTemplate1=function(){return"editbroadcast"},a.getTemplate2=function(){return"editnum"},a.getTemplate3=function(){return"editschedule"},a.getTemplate4=function(){return"editrecording"},a.editbroadcast=function(){a.getTemplate1=function(){return"editbroadcast"}},a.editnumfrm=function(){a.getTemplate2=function(){return"editnum"}},a.editschedulefrm=function(){a.getTemplate3=function(){return"editschedule"}},a.editrecordingfrm=function(){a.getTemplate4=function(){return"editrecording"}},a.opentab2=function(b){""!==b.broadcastname&&""!==b.callerid&&(a.userData=angular.copy(b),console.log(b.broadcastname),d.user=b,a.status.isSecondDisabled=!1,a.status.open2=!0,a.getTemplate1=function(){return"displaybroadcast"})},a.opentab3=function(){a.status.isThirdDisabled=!1,a.status.open3=!0,a.getTemplate2=function(){return"displaynum"}},a.opentab4=function(b){console.log(b),void 0!==b&&(d.sch=b,a.status.isFourthDisabled=!1,a.status.open4=!0,a.getTemplate3=function(){return"displayschedule"})},a.opentab5=function(){a.status.isFifthDisabled=!1,a.status.open5=!0,a.getTemplate4=function(){return"displayrecording"}},a.opentab6=function(){},a.openContactExist=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"AddContactExist.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!0,appendTo:c});d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.okContactExist=function(){},a.cancelContactExist=function(){h.dismissAll()},a.openAddNumBroadcast=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"AddNum.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!1,appendTo:c});d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.cancelAddNumBroadcast=function(){h.dismissAll()},a.okAddNumBroadcast=function(a){d.broadcastcontacts.push({firstname:a.firstname,lastname:a.lastname,phone:a.phoneno,balance:a.balance,duedate:a.duedate}),h.dismissAll()},a.okAddAnotherNumBroadcast=function(b){console.log(a.broadcastcontacts),a.broadcastcontacts.push({firstname:b.firstname,lastname:b.lastname,phone:b.phoneno,balance:b.balance,duedate:b.duedate})},a.openUploadBroadcastFile=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"UploadBroadcastFile.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!0,appendTo:c});d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.okUploadBroadcastFile=function(){h.dismissAll()},a.cancelUploadBroadcastFile=function(){h.dismissAll()},a.openAddRecordMessage=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"AddRecordMessage.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!0,appendTo:c});a.num="66",d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.okAddRecordMessage=function(){h.dismissAll()},a.cancelAddRecordMessage=function(){h.dismissAll()},a.openAddTextMessage=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"AddTextMessage.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!0,appendTo:c});d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.okAddTextMessage=function(a){d.textmessage=a.textmessage,console.log(a.textmessage),h.dismissAll()},a.cancelAddTextMessage=function(){h.dismissAll()},a.openUploadAudioFile=function(b){var c=b?angular.element(f[0].querySelector(".modal-demo "+b)):void 0,d=e.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"UploadAudioFile.html",controller:"AdvFeaturesCtrl",controllerAs:"$ctrl",backdrop:!0,appendTo:c});d.result.then(function(b){a.selected=b},function(){console.info("Modal dismissed at: "+new Date)})},a.okUploadAudioFile=function(){h.dismissAll()},a.cancelUploadAudioFile=function(){h.dismissAll()},a.nextStep=function(b,c){a[b]=!1,a[c]=!0},a.showVideoCall=function(){c.path("/videocall")},a.showConferenceCalls=function(){c.path("/conferencecalls")},a.showFileSharing=function(){c.path("/filesharing")}}]),proySymphony.controller("SettingsCtrl",["$scope","$http","$location","usefulTools","$timeout","$filter","$compile","fileUpload","$q","$rootScope","$uibModal","$uibModalStack","$window","FileUploader","dataFactory","customerGroupCodeService","userContactService","contactGroupsService","_","$cookies","domainService","emulationService","$mdDialog","permissionService","userService","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(){return{userContactTotalMaxedOut:a.userContactTotalMaxedOut}}function B(a){var b=JSON.stringify(a);return __env.enableDebug&&console.log(b),b}function C(b){r.handleNewGroup(b),m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),l.dismissAll()}function D(b,c){__env.enableDebug&&console.log(b),__env.enableDebug&&console.log(c),a.contactGroups[c].group_name=b.group_name,a.contactGroups[c].group_color=b.group_color,a.contactGroups[c].group_image=b.group_image,a.contactGroups[c].group_type=b.group_type,a.contactGroups[c].members=b.members,a.contactGroups[c].contacts=r.getContactRetrievalFuncForGroup(b),m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),l.dismissAll()}function E(){o.getLanguages().then(function(b){a.languages=b.data},function(b){a.status+="Unable to load Language data: "+JSON.stringify(b,null,4)+"\n"})}function F(b,c){var d=[],e=[];angular.forEach(b.member_list,function(a,b){a===!0&&e.push(b)}),angular.forEach(b.group_list,function(a,b){var c,d;a===!0&&(c=r.getGroupByUuid(b),d=r.retrieveGroupMemberUuids(c),e=e.concat(d))}),b.group_name||d.push("Must enter a name for this group.");var f={group_uuid:null!==c?a.contactGroups[c].group_uuid:null,group_name:b.group_name,group_type:b.group_type,group_color:b.group_color?b.group_color:null,group_members:e,errors:d};return f.group_members=s.uniq(f.group_members),f}function G(){var a=P();o.getPermissionGroups(a).then(function(a){j.permissionsGroups=[],a.data.error?__env.enableDebug&&console.log(a.data.error.message):a.data.success&&(j.permissionsGroups=a.data.success.data,__env.enableDebug&&console.log("PERM GROUPS"),__env.enableDebug&&console.log(j.permissionsGroups),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)))},function(a){__env.enableDebug&&console.log(a)})}function H(){o.getPermissionCommunications().then(function(a){j.permissionCommunications=a.data,__env.enableDebug&&console.log("COMMUNICATIONS RESPONSE"),__env.enableDebug&&console.log(j.permissionCommunications)})}function I(a,b){__env.enableDebug&&console.log(a);var c=[],d=[];angular.forEach(a.communication_options,function(a,b){a===!0&&d.push(b)});var e=[];angular.forEach(a.member,function(a,b){a===!0&&e.push(b)});var f=[];angular.forEach(a.manager,function(a,b){a===!0&&f.push(b)}),0===d.length&&c.push("At least one Communication Channel must be selected."),0===e.length&&c.push("At least one Member must be specified."),0===f.length&&c.push("At lease one Manager must be specified.");var g={permissions_group_uuid:null!==b?j.permissionsGroups[b].permissions_group_uuid:null,domain_uuid:P(),group_name:a.group_name,group_color:a.group_color?a.group_color:null,group_communications:d,group_members:e,group_managers:f,errors:c};return console.log(g),g}function J(){o.getManagerEmulationStatus().then(function(a){a.data.error?__env.enableDebug&&console.log(a.data.error.message):(j.emulationStatus=a.data.success.data,m.localStorage.setItem("emulationStatus",JSON.stringify(j.emulationStatus)),__env.enableDebug&&console.log("MANAGER EMULATION STATUS"),__env.enableDebug&&console.log(j.emulationStatus))},function(a){__env.enableDebug&&console.log(a)})}function K(a){var b={};return angular.forEach(a,function(a){angular.forEach(a,function(a){b[a.status]?b[a.status]=b[a.status]+a.duration:b[a.status]=a.duration})}),console.log(b),b}function L(b){var c={},e=0,f=0;return angular.forEach(b,function(a){
var g=moment(a.changed_at),h=moment();e>0&&(h=moment(b[e-1].changed_at)),f=d.roundNumber(moment.duration(h.diff(g))/6e4,2),a.duration=moment.duration(h.diff(g)).humanize(),c[a.status_name]?c[a.status_name]=c[a.status_name]+f:c[a.status_name]=f,e+=1}),a.productivityStats&&(a.productivityStats=b),a.productivityCompanyStats&&(a.productivityCompanyStats=b),console.log(c),c}function M(b){console.log(b),console.log(b);var c=[],d=[],e=0;angular.forEach(b,function(a,b){console.log("ROW: "+b+" "+a);var f={c:[{v:b},{v:a}]};c.push(f);var g={key:b,value:a};d.push(g),e+=a});var f={cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Slices",type:"number"}],rows:c};console.log(f),a.myChartObject.data=f,console.log(a.myChartObject.data)}function N(){a.myChartObject={},a.myChartObject.type="PieChart",a.myChartObject.options={title:"Status Distribution (Minutes)",chartArea:{left:10,top:50,bottom:10,width:"100%",height:"100%"},displayExactValues:!0,width:"100%",height:"100%",is3D:!0}}function O(a,b){var c;if(a&&b)for(var d=0;d<b.length;d++)if(c=b[d],c.domain_uuid===a)return c;return c}function P(){var a;return a=v.emulatedCompany?v.emulatedCompany.domain_uuid:j.user.domain.domain_uuid}function Q(b){return a.domains?d.find(a.domains,"domain_uuid",b):null}function R(){var a=P(),b=Q(a),c=b.domain_enabled;return"true"===c?!0:"false"===c?!1:null}function S(){return a.isAdminGroupOrGreater()?2:1}function T(){a.$watch("activeSettingTab",function(a,b){a!==b&&(a+="",t.put("activeSettingTab",a))})}function U(){T(),j.showMyProfile=!1,a.activeSettingTab=0,t.put("activeSettingTab",0)}j.userLoaded?a.user=j.user:z.rootScopeOn(a,"user.loaded",function(){a.user=j.user}),a.setCompanyStatus=function(){a.currentDomainStatus?a.suspendDomain():a.enableDomain()},a.deleteUser=function(){var a,b={user_uuid:"994e5d37-f902-39c8-82a5-56bfffd2ebe3",type:"hard",cloud_assign_to:null},c="Are you sure you want to delete this user?";j.confirmDialog(c).then(function(c){c&&o.deleteBridgeUser(b).then(function(b){b.data.success?(a="User successfully deleted",j.showSuccessAlert(a)):b.data.error&&(a="Something went wrong and we could not delete the user",j.showErrorAlert(a))},function(a){console.log(a)})})},a.deleteDomain=function(){var b,c=P(),d={domain_uuid:c,type:"hard"},e=(O(c,a.domains),"Are you sure you want to delete this domain? All users, extensions, numbers, storage will be removed. Please type YES in the space provided below if you are sure.");j.confirmPrompt(e).then(function(e){"YES"===e&&o.deleteBridgeDomain(d).then(function(d){if(d.data.success){b="Domain successfully deleted",j.showSuccessAlert(b),console.log(a),a.test.emulatedCompany=null,a.test.searchText="";var e=f("getByUUID")(a.domains,c,"domain");console.log(e),a.domains.splice(e,1),console.log(a.domains);var g=j.user.domain.domain_uuid,h=O(g,a.domains);a.setEmulatedCompany(h)}else d.data.error&&(b="Something went wrong and we could not delete the domain",j.showErrorAlert(b))},function(a){console.log(a)})})},a.suspendDomain=function(){var b=P(),c=(Q(b),{domain_uuid:b,domain_status:"suspended"}),d="Are you sure you want to suspend this domain? Data will be retained but the account will not be usable.";j.confirmDialog(d).then(function(b){b?o.suspendBridgeDomain(c).then(function(b){if(b.data.success){var c="Domain has been successfuly disabled";j.showSuccessAlert(c)}else b.data.error&&(a.currentDomainStatus=!a.currentDomainStatus)},function(a){console.log(a)}):a.currentDomainStatus=!a.currentDomainStatus})},a.enableDomain=function(){var b=P(),c=(Q(b),{domain_uuid:b,domain_status:"enabled"}),d="Are you sure you want to enable this domain?";j.confirmDialog(d).then(function(b){b?o.suspendBridgeDomain(c).then(function(b){if(b.data.success){var c="Domain has been successfuly re-enabled";j.showSuccessAlert(c)}else b.data.error&&(a.currentDomainStatus=!a.currentDomainStatus)},function(a){console.log(a)}):a.currentDomainStatus=!a.currentDomainStatus})},a.importContact=!1,a["import"]=function(){a.importContact=!a.importContact},a.toggleState="spreadsheet",a.closeContacts=function(){l.dismissAll()},a.initializeGoogle=function(){console.log("Initializing"),r.handleClientLoad()},a.userContactTotalMaxedOut=q.userContactTotalMaxedOut,a.obtainTargetGroup=function(){j.showModalWithData("/company/googlecontacts.html",A())},a.authGoogle=function(){r.authGoogle()},a.authGoogleNew=function(){r.handleAuthClick()},a.modalTableHeight=m.innerHeight-400,a.showFormVoicemail=!1,a.showFormFaxOption=!1,a.showFormReports=!1,a.showAvatarUpload=!1,a.editingPhoneIndex=null,a.showAudioSelector=!1,j.timeZones||null===m.localStorage.getItem("timeZones")||(j.timeZones=JSON.parse(m.localStorage.getItem("timeZones"))),a.contactGroups=r.groups,a.confirmDelete=!1,a.contacts={},a.clearFieldFrmPhone=function(){a.contacts.contact_phone_uuid="",a.contacts.phone_label="",a.contacts.phone_number="",a.contacts.phone_extension="",a.contacts.phone_primary="",j.contactPhone={}},a.dataDelete="",a.moduleDelete="",a.showAlertDelete=function(b,c,d){a.confirmDelete=!0,a.moduleDelete=b,a.dataDelete=c,a.phoneIndex=d,"contact"===b?a.deleteMsg="Are you sure you want to delete this contact?":"phone"===b&&(c.contact_phone_uuid?a.deleteMsg="Are you sure you want to delete this phone number?":a.deleteMsg="Do you want to remove this phone number from the list?")},a.confirmDeleteFunct=function(){if("contact"===a.moduleDelete)j.removeContact(a.dataDelete);else if("phone"===a.moduleDelete){f("getIndexbyUUID")(j.userContacts,a.dataDelete.contact_uuid);a.dataDelete.contact_phone_uuid&&j.deleteContactPhone(a.dataDelete.contact_phone_uuid),j.phoneList.splice(a.phoneIndex,1)}a.confirmDelete=!1},"add"===j.actionContact?a.action="Add contact":a.action="Edit contact",a.removeAvatar=function(){j.contactUser.contact_profile_image=null,a.uploader.queue.length>0&&a.uploader.clearQueue()},j.editingContact?(j.contactUser={},angular.copy(j.editingContact,j.contactUser),j.editingContact.phones&&j.editingContact.phones.length>0&&(j.phoneList=j.editingContact.phones,__env.enableDebug&&console.log("PHONE LIST"),__env.enableDebug&&console.log(j.phoneList))):(j.phoneList=!1,j.phoneList=[],j.contactUser={}),a.listPhoneNumber=function(b,c){var d=!1;if(j.userContacts.forEach(function(a){a.phones.forEach(function(a){b.phone_number==a.phone_number&&(d=!0)})}),d)j.alerts.push({error:!0,message:"That phone number is already assigned to another contact. Please try again."});else{var e=!1;if(null!==a.editingPhoneIndex)null!==c&&(j.phoneList[c]=b),j.contactPhone={};else if(j.phoneList.forEach(function(a){a.phone_number===b.phone_number&&(j.alerts.push({error:!0,message:"The phone number is already listed! "}),e=!0)}),!e){var f={contact_phone_uuid:null,contact_uuid:c?j.contactUser.contact_uuid:null,phone_label:b.phone_label,phone_number:b.phone_number,phone_extension:b.phone_extension,phone_primary:b.phone_primary,phone_type_text:b.phone_type_text};j.phoneList.push(f),j.contactPhone={}}a.editingPhoneIndex=null,1===b.phone_primary&&angular.forEach(j.phoneList,function(a){a.phone_number!==b.phone_number&&(a.phone_primary=0)})}},a.editPhone=function(b,c){j.contactPhone={},angular.copy(b,j.contactPhone),a.editingPhoneIndex=c},a.saveContactUser=function(a){console.log(a),a.phones=j.phoneList,"add"===j.actionContact?j.addContactSubmit(a):j.updateContactInfo(a),l.dismissAll()},a.setColorContacts=function(a){j.profile.contact_profile_color=a},a.btnMnuAct="1",j.templateInclude="users",j.btnMnuAct?a.btnMnuAct="3":a.btnMnuAct="1",j.templateInclude="users",a.showAudio=!1,j.$watch("templateInclude",function(b,c){if(console.log(b),console.log(c),"permissions"===b)H(),G(),a.newgroup={},a.newgroup.group_color="";else if("attendant"===b){a.test.searchText="";var d=j.user.domain.domain_uuid,e=O(d,a.domains);a.setEmulatedCompany(e),a.test.emulatedCompany=e}}),a.addStatus=function(){j.domainsStatus.length<8?a.showAddStatus=!a.showAddStatus:j.alerts.push({error:!0,message:"You can add only 8 statuses!"})},a.statusSuggestedIcons=[{code:4,description:"fa-pause-circle-o",color:"#99cc00",available:!0},{code:5,description:"fa-minus",color:"#cc3300",available:!0},{code:6,description:"fa-user-o",color:"#009900",available:!0},{code:7,description:"fa-handshake-o",color:"#ff9933",available:!0},{code:8,description:"fa-bank",color:"#6699ff",available:!0},{code:9,description:"fa-calendar-o",color:"#00b3b3",available:!0},{code:10,description:"fa-coffee",color:"#734d26",available:!0},{code:11,description:"fa-group",color:"#0066cc",available:!0},{code:12,description:"fa-car",color:"#4d9900",available:!0},{code:13,description:"fa-cutlery",color:"#d1e0e0",available:!0}],a.getAvailStatusIcons=function(){console.log("GETTING AVAILABLE");for(var b=0;b<j.domainsStatus.length;b++)for(var c=0;c<a.statusSuggestedIcons.length;c++)a.statusSuggestedIcons[c].available&&j.domainsStatus[b].status_icon==a.statusSuggestedIcons[c].description&&(a.statusSuggestedIcons[c].available=!1)},a.statusAfterChange=function(){console.log("Checking Available Stauts");for(var b=0;b<a.statusSuggestedIcons.length;b++)a.statusSuggestedIcons[b].available=!0;a.getAvailStatusIcons()},a.returnColorIcon=function(b){a.statusSuggestedIcons.forEach(function(a){return a.description===b?a.color:void 0})},a.RSTstatus={},a.getDomainsStatus=function(){var b=P();o.getDomainsStatus(b).then(function(b){console.log(b),j.domainsStatus=b.data.data,a.getAvailStatusIcons()},function(a){j.msgContacts+="Error from contacts user: "+JSON.stringify(a,null,4)+"\n"})},a.updDomainsStatus=function(b){console.log("REST: ",j.domainsStatus),null==b.receive_calls||"undefined"==b.receive_calls?b.receive_calls=!1:"",null==b.start_timer||"undefined"==b.start_timer?b.start_timer=!1:"",o.updDomainsStatus(b).then(function(a){console.log(a),a.data.success||j.alerts.push({error:!0,message:"Please setup all the fields."})},function(a){j.alerts.push({error:!0,message:a.data.error.message})}),a.statusAfterChange()},a.NEWstatus={},a.insDomainsStatus=function(b){null==b.receive_calls||"undefined"==b.receive_calls?b.receive_calls=!1:"",null==b.start_timer||"undefined"==b.start_timer?b.start_timer=!1:"",null==b.status_active||"undefined"==b.status_active?b.status_active=!1:"";var c=P(),d={domain_uuid:c,receive_calls:b.receive_calls,status_active:b.status_active,start_timer:b.start_timer,status_name:b.status_name,status_description:b.status_description,status_icon:b.status_icon};console.log(d),o.insDomainsStatus(d).then(function(b){console.log(b),b.data.success?(j.alerts.push({success:!0,message:"Success: "+b.data.success.message}),a.domainsStatus.push(b.data.success.data),a.NEWstatus={},a.showAddStatus=!1):j.alerts.push({error:!0,message:"Please setup all the fields before saving."})},function(a){j.alerts.push({error:!0,message:a.data.error.message})})},a.cancelInsertStatus=function(){a.NEWstatus={},a.showAddStatus=!a.showAddStatus},a.cancelEdit=function(){a.getDomainsStatus()},a.customerGroupCodes=[],a.saveGroupCode=function(b){console.log(b),o.postSaveGroupCode(b).then(function(c){console.log(c.data),c.data.success&&(b.customer_group_code_uuid||a.customerGroupCodes.push(c.data.success.data)),l.dismissAll(),j.groupcode=null})},j.customerGroupCodes=[],a.isCodeAvailable=function(b){o.getCheckGroupCode(a.conference.room).then(function(b){b.data.error?(console.log(b.data.error.message),a.urlNotAvailable=!0,a.availMessage="Not Available"):(j.videoConference=b.data.success,a.urlNotAvailable=!1,a.clipboardCopy=a.vcUrl+"/"+a.conference.room)},function(b){console.log(b),a.urlNotAvailable=!0,a.availMessage="Not Available"})},a.btnMnuActAdmin="1",j.templateIncludeAdmin="agencies",a.mnuSelectedAdmin=function(b){a.btnMnuActAdmin=b,"1"===b?j.templateIncludeAdmin="agencies":"2"===b?j.templateIncludeAdmin="groupcodes":"3"===b?j.templateIncludeAdmin="autoattendant":j.templateIncludeAdmin="admintoadmin"},a.btnMnuActBill="1",j.templateIncludeBill="summary",a.mnuSelectedBill=function(b){a.btnMnuActBill=b,"1"===b?j.templateIncludeBill="summary":"2"===b?j.templateIncludeBill="makeapayment":"3"===b?j.templateIncludeBill="services":j.templateIncludeBill="dashboard"},a.setPage=function(a){j.currentPage=a},a.filter=function(){e(function(){j.filteredItems=j.filtered.length},10)},a.sort_by=function(a){j.predicate=a,j.reverse=!j.reverse},a.status="",a.displayUser=JSON.stringify(j.user,null,4),E(),a.hideFields=!0,a.showFields=!0,a.cancelprofile=!1,a.editprofile=!0,a.showProfileEdit=function(){a.hideFields=!1,a.showFields=!1,a.showproflie=!1,a.cancelprofile=!0,a.editprofile=!1},a.hideProfileEdit=function(){a.hideFields=!0,a.showFields=!0,a.showproflie=!0,a.cancelprofile=!1,a.editprofile=!0},a.showSave=!1,a.showVoicemail=!0,a.showEditPassword=!1,a.showFormFindMeFollowMe=!1,a.volumeSlider={value:10,options:{ceil:100,showSelectionBar:!0}},a.dndOptions="Do Not Disturb"===j.user.user_status?"On":"Off",a.vmAutomaticDelete=j.user.voicemail&&"false"===j.user.voicemail.voicemail_local_after_email?"On":"Off",a.vmAttachMessage=j.user.voicemail&&"attach"===j.user.voicemail.voicemail_file?"On":"Off",a.vmRemoteAccess=j.user.settings&&"on"===j.user.settings.remote_access?"On":"Off",a.vmAllowReview=j.user.settings&&"on"===j.user.settings.allow_review?"On":"Off",a.vmEnvelopePlayback=j.user.settings&&"on"===j.user.settings.envelope_playback?"On":"Off",a.onText="Yes",a.offText="No",a.isActive=!0,a.size="normal",a.animate=!0,a.radioOff=!0,a.handleWidth="auto",a.labelWidth="auto";var V="";a.showVmStatus=!1,a.onDndChange=function(){var b={setting:"user_status",setting_descr:"Do Not Disturb",value:"On"===a.dndOptions?"Do Not Disturb":"Available"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.user_status=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})})},a.onAutomaticDelete=function(){var b={setting:"voicemail_local_after_email",setting_descr:"Automatic Delete",value:"On"===a.vmAutomaticDelete?"false":"true"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.voicemail.voicemail_local_after_email=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})}),a.msg=V,a.showVmStatus=!0,e(function(){a.showVmStatus=!1},4e3)},a.onAttachMessage=function(){var b={setting:"voicemail_file",setting_descr:"Attach Message",value:"On"===a.vmAttachMessage?"attach":"link"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.voicemail.voicemail_file=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})}),e(function(){a.vmAutomaticDeleteStatus},3e3)},a.onEnvelopePlayback=function(){var b={setting:"usersetting",field:"envelope_playback",setting_descr:"Envelope Playback",value:"On"===a.vmEnvelopePlayback?"on":"off"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.settings.envelope_playback=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})}),e(function(){a.vmEnvelopePlaybackStatus},3e3)},a.onRemoteAccess=function(){var b={setting:"usersetting",field:"remote_access",setting_descr:"Remote Access",value:"On"===a.vmRemoteAccess?"on":"off"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.settings.remote_access=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})})},a.onAllowReview=function(){var b={setting:"usersetting",field:"allow_review",setting_descr:"Allow Review",value:"On"==a.vmAllowReview?"on":"off"};o.changeSetting(b).then(function(a){j.showalerts(a),a.data.success&&(j.user.settings.allow_review=b.value)},function(a){j.alerts.push({error:!0,message:"Unable to update status "+(__env.enableDebug?a:"")})})};var W=function(){var a=i.defer();return o.getResetToken().then(function(b){b.data.error?a.reject(""):a.resolve(b.data.success.data)},function(b){a.reject("")}),a.promise};a.ChangePassword=function(){W().then(function(b){var c={password:a.password,password_confirmation:a.password_confirmation,token:b};o.resetPassword(c).then(function(b){j.showalerts(b),b.data.success&&(a.showEditPassword=!1)},function(a){j.alerts.push({error:!0,message:"Unable to update the Password "+(__env.enableDebug?a:"")})})})},a.doAvatarUpload=function(){a.showAvatarUpload=!0},a.cancelEditAvatar=function(){a.showAvatarUpload=!1},a.files=[],a.jsonData={name:"Jignesh Trivedi",comments:"Multiple upload files"},a.$on("seletedFile",function(b,c){a.$apply(function(){a.files.push(c.file)})}),a.AddFmFm=function(){var b={fmfmDest:a.fmfmDest,fmfmDelay:a.fmfmDelay,fmfmTimeout:a.fmfmTimeout,fmfmPrompt:a.fmfmPrompt};o.changeSetting(b).then(function(a){j.showalerts(a)},function(a){j.alerts.push({error:!0,message:"Unable to Add Number "+(__env.enableDebug?a:"")})})},j.closeAddContact=function(){j.contactaddition={},l.dismissAll()},j.checkinfo=function(a,b){__env.enableDebug&&console.log("DATA"),__env.enableDebug&&console.log(JSON.stringify(j.contactaddition));var c="",d=[];for(var e in a)a.hasOwnProperty(e)&&(c+=e+" , "+a[e]+"\n",d.push({p:a[e]}));__env.enableDebug&&console.log(d),alert(c),__env.enableDebug&&console.log(b)},j.updateAvatar={},j.updateAvatar.contact_uuid="",a.setUploaderOption=function(){j.uploaderOption="/user/change-picture",a.uploader.url=j.onescreenBaseUrl+j.uploaderOption},a.triggerUpload=function(b){a.uploader.clearQueue(),__env.enableDebug&&console.log(a.uploader),angular.element("#cloud-upload").trigger("click")};var X=a.uploader=new n({url:j.onescreenBaseUrl+j.uploaderOption,queueLimit:1,headers:{Authorization:"Bearer "+j.userToken}});__env.enableDebug&&console.log(X),X.filters.push({name:"imageFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|".indexOf(c)}}),X.onWhenAddingFileFailed=function(a,b,c){__env.enableDebug&&console.info("onWhenAddingFileFailed",a,b,c),j.alerts.push({error:!0,message:"Problem Adding File: Image must be under 2MB in size and a jpg, bmp or png file"})},X.onAfterAddingFile=function(a){__env.enableDebug&&console.info("onAfterAddingFile",a),console.log(j.uploaderOption),console.log(X),console.log(j.contactUser),__env.enableDebug&&console.log(X.queue),"/user/change-picture"===j.uploaderOption&&X.uploadAll()},X.onAfterAddingAll=function(a){__env.enableDebug&&console.info("onAfterAddingAll",a)},X.onBeforeUploadItem=function(b){if(__env.enableDebug&&console.info("onBeforeUploadItem",b),__env.enableDebug&&console.log(j.uploaderOption),X.url=j.onescreenBaseUrl+j.uploaderOption,"/user/contact/new"===j.uploaderOption)var c={input:B(j.contactUser),phones:B(j.phoneList)};else if("/contacts/groups/create"===j.uploaderOption||"/contacts/groups/update"===j.uploaderOption){var d=F(j.updateGroup,j.editGroupIndex),c={input:B(d)};console.log(c)}else if("/permissions/group/create"===j.uploaderOption||"/permissions/group/update"===j.uploaderOption){console.log(j.updateGroup),console.log(j.editPermissionIndex);var d=I(j.updateGroup,j.editPermissionIndex),c={input:B(d)};console.log(c)}else if("/user/contact/update-avatar"===j.uploaderOption)var c={input:B({contact_uuid:j.contactUser.contact_uuid})};else if("/user/change-picture"===j.uploaderOption){var e=v.emulatedUser?j.uploadUser:j.user,c={domain_uuid:P(),user_uuid:e.user_uuid?e.user_uuid:e.id};a.lastUploadData=c}c&&b.formData.push(c),__env.enableDebug&&console.log("onBeforeUploadItem"),__env.enableDebug&&console.log(b),__env.enableDebug&&console.info("onBeforeUploadItem",b)},X.onProgressItem=function(a,b){__env.enableDebug&&console.info("onProgressItem",a,b)},X.onProgressAll=function(a){__env.enableDebug&&console.info("onProgressAll",a)},X.onSuccessItem=function(b,c,e,g){if(__env.enableDebug&&console.log("RESPONSE FROM UPLOADING AVATAR"),__env.enableDebug&&console.log(c),c.error)j.alerts.push({error:!0,message:c.error.message});else if("/user/contact/new"===j.uploaderOption){j.contactsAvailable&&j.contactsAvailable.push(c.success.data),a.newgroup={};var h=c.success.data;j.$broadcast("new.contact.added",h),j.contactsAvailable&&j.contactsAvailable.push(h),j.userContacts.push(h),q.contacts.push(h),l.dismissAll()}else if("/user/change-picture"===j.uploaderOption){a.lastUploadData.user_uuid===j.user.id&&(j.user.profile_image=c.success.file);var h=d.find(q.contacts,"user_uuid",a.lastUploadData.user_uuid);h?q.setContactProfileImage(h,c.success.file):q.performUserProfileImageChangeCallbacks(a.lastUploadData.user_uuid,c.success.file)}else if("/user/contact/update-avatar"===j.uploaderOption){var i=f("getIndexbyUUID")(j.userContacts,c.success.contact_uuid);j.userContacts[i].contact_profile_image=c.success.image}else if("/contacts/groups/create"===j.uploaderOption)C(c.success.data);else if("/contacts/groups/update"===j.uploaderOption){var i=f("getGroupIndexbyUUID")(a.contactGroups,c.success.data.group_uuid,"");D(c.success.data,i)}else"/permissions/group/create"===j.uploaderOption?(j.permissionsGroups||(j.permissionsGroups=[]),j.permissionsGroups.push(c.success.data),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)),l.dismissAll()):"/permissions/group/update"===j.uploaderOption&&(j.permissionsGroups.splice(j.editPermissionIndex,1),j.permissionsGroups.push(c.success.data),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)),l.dismissAll());X.clearQueue(),__env.enableDebug&&console.info("onSuccessItem",b,c,e,g)},X.onErrorItem=function(a,b,c,d){__env.enableDebug&&console.log("RESPONSE FROM UPLOADING AVATAR"),__env.enableDebug&&console.log(b),fileitem.isUploaded=!1,j.alerts.push({error:!0,message:b.error.message}),__env.enableDebug&&console.info("onErrorItem",a,b,c,d)},X.onCancelItem=function(a,b,c,d){__env.enableDebug&&console.info("onCancelItem",a,b,c,d),"/permissions/group/update"===j.uploaderOption&&(j.contactUser.contact_profile_image=null),X.clearQueue()},X.onCompleteItem=function(a,b,c,d){__env.enableDebug&&console.info("onCompleteItem",a,b,c,d)},X.onCompleteAll=function(){__env.enableDebug&&console.info("onCompleteAll")},j.numPhones=1,j.addAnotherPhone=function(){j.numPhones++},a.phoneLines=[],a.phoneCount=1,a.phoneLines.push({line:1}),a.addNewPhoneLine=function(){a.phoneCount++,a.phoneLines.push({line:a.phoneCount})},j.addContactSubmit=function(b){if(j.contactUser=b,__env.enableDebug&&console.log(b),__env.enableDebug&&console.log(a.uploader.queue.length),__env.enableDebug&&console.log(X.queue.length),a.uploader.queue.length>0)void 0===b.favorite&&(b.favorite=!1),j.contactUser=b,j.uploaderOption="/user/contact/new",a.uploader.url=j.onescreenBaseUrl+j.uploaderOption,a.uploader.uploadAll();else{var c={input:b,phones:j.phoneList};l.dismissAll(),q.addContact(c).then(function(a){a.status?(j.$broadcast("new.contact.added",a.data),j.showAlert("Congratulations","Your new contact has been added.")):j.showAlert("Uh-Oh :(","Something went wrong")})}j.phoneList=[]},m.localStorage.setItem("currentUser",JSON.stringify(j.user)),j.updateContactInfo=function(b){o.postUpdateContactInfo(b).then(function(c){if(c.data.success){__env.enableDebug&&console.log(b);var d=f("getIndexbyUUID")(j.userContacts,b.contact_uuid);angular.forEach(b,function(a,b){"phones"!==b&&(j.userContacts[d][b]=a)}),j.userContacts[d].contact_name_full=j.userContacts[d].contact_name_given+" "+j.userContacts[d].contact_name_family;j.userContacts[d];b.contact_profile_image||(j.userContacts[d].contact_profile_image=null),j.phoneList=b.phones,j.phoneList.forEach(function(a){j.updateContactPhone(a,b.contact_uuid)}),j.updateContactColor(b),j.contactUpdated=!0,a.uploader.queue.length>0&&(j.contactUser.contact_uuid=b.contact_uuid,__env.enableDebug&&console.log("UPDATE AVATAR"),j.uploaderOption="/user/contact/update-avatar",a.uploader.url=j.onescreenBaseUrl+j.uploaderOption,a.uploader.uploadAll())}j.showalerts(c)},function(a){j.alerts.push({error:!0,message:response.data.error.message})})},j.deleteContactPhone=function(a){o.deleteContactPhone(a).then(function(b){if(b.data.success){var c=null,d=null,e=b.data.success.data;c=f("getIndexbyUUID")(j.userContacts,e),null!==c&&(d=f("getByUUID")(j.userContacts[c].phones,a,"contact_phone")),null!==d&&null!==c&&j.userContacts[c].phones.splice(d,1)}else __env.enableDebug&&console.log(b.data.error.message)},function(a){__env.enableDebug&&console.log(a)})},j.updateContactPhone=function(a,b){a.contact_phone_uuid||(a.contact_uuid=b),console.log(a),o.postUpdateContactPhone(a).then(function(b){if(b.data.success){var c=b.data.success.phone;__env.enableDebug&&console.log(c);var d=f("getIndexbyUUID")(j.userContacts,c.contact_uuid);if(a.contact_phone_uuid){var e=f("getByUUID")(j.userContacts[d].phones,a.contact_phone_uuid,"contact_phone");null!==e&&(j.userContacts[d].phones[e]=c)}else angular.forEach(j.userContacts[d].phones,function(b,c){b.phone_number===a.phone_number&&j.userContacts[d].phones.splice(c,1)}),__env.enableDebug&&console.log(j.userContacts[d].phones),j.userContacts[d].phones.push(c),__env.enableDebug&&console.log(j.userContacts[d].phones)}},function(a){j.alerts.push({error:!0,message:"Post Failure: "+response.data.error.message})})},j.updateContactColor=function(a){var b={contact_uuid:a.contact_uuid,color:a.contact_profile_color};__env.enableDebug&&console.log(b),o.postUpdateContactColor(b).then(function(c){if(!c.data.error){var d=f("getIndexbyUUID")(j.userContacts,a.contact_uuid);j.userContacts[d].contact_profile_color=b.color}},function(a){j.alerts.push({error:!0,message:"Post Failure: "+response.data.error.message})})},j.profilecoloroptions=["#033860","#721121","#1B998B","#E87461","#A1CF6B","#9F838C","#1C448E","#FFA552","#3C1642","#3C3744","#065143","#BB7E5D"],a.groupActive=[],a.createNewGroup=function(a,b){var c=F(a,null);__env.enableDebug&&console.log(c);var d={input:B(c)};if(0===c.errors.length)b&&b(),r.createGroup(d);else{var e="";angular.forEach(c.errors,function(a){e+=(0!==e.length?", ":"")+a}),j.alerts.push({error:!0,message:"Error: "+e})}},a.createGroupWithImage=function(b,c){j.updateGroup=b,c&&c(),a.uploader.uploadAll()},a.updateGroupWithImage=function(b,c){j.updateGroup=b,c&&c(),a.uploader.uploadAll()},a.updateContactGroup=function(a,b,c){c&&c();var d=F(a,b),e={input:B(d)};if(0===d.errors.length)o.postUpdateGroup(e).then(function(a){j.showalerts(a),a.data.success&&D(a.data.success.data,b)},function(a){__env.enableDebug&&console.log(a)});else{var f="";angular.forEach(d.errors,function(a){f+=(0!==f.length?", ":"")+a}),j.alerts.push({error:!0,message:"Error: "+f})}},a.getMemberName=function(a){var b=f("getContactbyUUID")(j.userContacts,a);return null!==b?b.contact_name_given+" "+b.contact_name_family:""},a.getUserName=function(a){var b=f("getContactbyUserUUID")(j.userContacts,a);return null!==b?b.contact_name_given+" "+b.contact_name_family:""},a.getGroupName=function(b){var c=f("getGroupbyUUID")(a.contactGroups,b);return null!==c?c.group_name:""},a.showAllMembers=function(b,c){"contact"===c&&(a.groupActive[b.group_uuid]=!0),"permissions"===c&&(a.groupActive[b.permissions_group_uuid]=!0)},a.hideMembers=function(b,c){"contact"===c&&(a.groupActive[b.group_uuid]=!1),"permissions"===c&&(a.groupActive[b.permissions_group_uuid]=!1)},a.isGroupMember=function(b,c){if(null!==b){__env.enableDebug&&console.log(a.contactGroups[b].contacts),__env.enableDebug&&console.log(c);var d=a.contactGroups[b].contacts,e=!1;return angular.forEach(d,function(a){a.contact_uuid===c&&(e=!0)}),e}return!1},a.isGroupViewGroup=function(a,b){var c=!1;return a&&a.forEach(function(a){a.view_group_uuid===b&&(c=!0)}),c},a.isGroupViewMember=function(a,b){var c=!1;return a&&a.forEach(function(a){a.view_contact_uuid===b&&(c=!0)}),c},a.showEditGroup=function(b){j.editGroupIndex=b,j.uploaderOption="/contacts/groups/create",j.showNewGroup=!0,null!==b&&(__env.enableDebug&&console.log(a.contactGroups[b]),j.uploaderOption="/contacts/groups/update",j.showNewGroup=!1),a.uploader.url=j.onescreenBaseUrl+j.uploaderOption,j.showModal("/company/docontactgroup.html")},a.updateGroupContacts=function(b,c){var d=[];angular.forEach(c,function(a,b){a===!0&&d.push(b)});var e={group_uuid:b,members:d};o.postUpdateGroupContactList(e).then(function(c){if(j.showalerts(c),c.data.success){var d=f("getGroupIndexbyUUID")(a.contactGroups,b,"");a.contactGroups[d].members=c.data.success.data;var e=[];a.contactGroups[d].members.forEach(function(a){var b=f("getContactbyUUID")(j.userContacts,a.contact_uuid);null!==b&&e.push(b)}),a.contactGroups[d].contacts=e,m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),l.dismissAll()}},function(a){__env.enableDebug&&console.log(a)})},j.updateGroup={},a.updateviewgroup={},a.updateGroupViewers=function(b,c,d){var e=[];angular.forEach(d,function(a,b){a===!0&&e.push(b)});var g=[];angular.forEach(c,function(a,b){a===!0&&g.push(b)});var h={group_uuid:b,user_viewers:e,group_viewers:g};__env.enableDebug&&console.log(h),o.postUpdateGroupContactViewerList(h).then(function(c){if(j.showalerts(c),c.data.success){__env.enableDebug&&console.log(c.data);var d=f("getGroupIndexbyUUID")(a.contactGroups,b,"");a.contactGroups[d].viewer_users=c.data.success.viewer_users,a.contactGroups[d].viewer_groups=c.data.success.viewer_groups,__env.enableDebug&&console.log(a.contactGroups),m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),l.dismissAll()}},function(a){__env.enableDebug&&console.log(a)})},a.dissolveContactGroup=function(b){var c={group_uuid:b.group_uuid};__env.enableDebug&&console.log(c),o.deleteGroup(c).then(function(c){if(j.showalerts(c),c.data.success){var d=f("getGroupIndexbyUUID")(a.contactGroups,b.group_uuid,"");a.contactGroups.splice(d,1),m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),l.dismissAll()}},function(a){__env.enableDebug&&console.log(a)})},a.removeGroupFromViewGroup=function(b,c){var d={group_uuid:b,view_group_uuid:c};o.deleteGroupFromViewerGroup(d).then(function(c){if(j.showalerts(c),c.data.success){var d=f("getGroupIndexbyUUID")(a.contactGroups,b,"");a.contactGroups[d].viewer_groups=c.data.success.data,m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups))}},function(a){__env.enableDebug&&console.log(a)})},a.removeUserFromViewGroup=function(b,c){var d={group_uuid:b,view_contact_uuid:c};__env.enableDebug&&console.log(d),o.deleteUserFromViewerGroup(d).then(function(c){if(j.showalerts(c),c.data.success){var d=f("getGroupIndexbyUUID")(a.contactGroups,b,"");a.contactGroups[d].viewer_users=c.data.success.data,m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups))}},function(a){__env.enableDebug&&console.log(a)})},a.removeGroupContact=function(b,c){var d={group_uuid:b,contact_uuid:c};o.deleteGroupContact(d).then(function(c){if(c.data.error)__env.enableDebug&&console.log(c.data.error.message);else{__env.enableDebug&&console.log(c.data.success.message);var d=f("getGroupIndexbyUUID")(a.contactGroups,b,"");a.contactGroups[d].members=c.data.success.data;var e=[];a.contactGroups[d].members.forEach(function(a){var b=f("getContactbyUUID")(j.userContacts,a.contact_uuid);null!==b&&e.push(b)}),a.contactGroups[d].contacts=e,m.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups))}})},a.closeCreateGroup=function(){a.newgroup={},l.dismissAll()},a.dissolveGroup=function(b){if(__env.enableDebug&&console.log(b),b.permissions_group_uuid){var c=f("getGroupIndexbyUUID")(j.permissionsGroups,b.permissions_group_uuid,"permissions_");a.dissolvePermissionsGroup(c)}else a.dissolveContactGroup(b)},a.clearFilter=function(){a.search.contact_name_full=""},a.showCommunications=function(a){var b=JSON.parse(j.permissionsGroups[a].communications),c="";return angular.forEach(b,function(a){c+=(""!==c?", ":"")+a}),c},a.createNewPermissionsGroup=function(b){if(a.uploader.queue.length>0){var c=a.uploader.queue.pop();b.file=c._file}x.createNewPermissionsGroup(b)},a.showEditPermissions=function(b){j.editPermissionIndex=b,j.uploaderOption="/permissions/group/create",j.showNewGroup=!0,null!==b&&(console.log(a.uploader),j.uploaderOption="/permissions/group/update",j.showNewGroup=!1),
a.uploader.url=j.onescreenBaseUrl+j.uploaderOption,a.search={};var c={editPermissionIndex:j.editPermissionIndex,closeCreateGroup:a.closeCreateGroup,permissionsGroups:j.permissionsGroups,profilecoloroptions:j.profilecoloroptions,showNewGroup:j.showNewGroup,uploader:a.uploader,permissionCommunications:j.permissionCommunications,clearFilter:a.clearFilter,modalTableHeight:a.modalTableHeight,userContacts:j.userContacts,updatePermissionsGroup:a.updatePermissionsGroup,createNewPermissionsGroup:a.createNewPermissionsGroup,domain:v.emulatedCompany,isPermCommunication:a.isPermCommunication,isPermGroupMember:a.isPermGroupMember,search:a.search};j.showModal("/company/dopermissionsgroup.html",c)},a.updatePermissionsGroup=function(a,b){var c=I(a,b);__env.enableDebug&&console.log(c);var d={input:B(c),domain_uuid:P()};if(0===c.errors.length)console.log(d),o.postUpdatePermissionGroup(d).then(function(a){j.showalerts(a),a.data.success&&(j.permissionsGroups.splice(b,1),j.permissionsGroups.push(a.data.success.data),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)),J(),l.dismissAll())},function(a){__env.enableDebug&&console.log(a)});else{var e="";angular.forEach(c.errors,function(a){e+=(0!==e.length?", ":"")+a}),j.alerts.push({error:!0,message:"Error: "+e})}},a.postRemovePermissionGroupMember=function(a,b,c){if("member"===c&&a.members.length>1||"manager"===c&&a.managers.length>1){var d={permissions_group_uuid:a.permissions_group_uuid,permissions_group_member_uuid:"member"===c?a.members[b].permissions_group_member_uuid:a.managers[b].permissions_group_member_uuid,member_type:c};__env.enableDebug&&console.log(d),o.postRemovePermissionGroupMember(d).then(function(d){if(d.data.error)__env.enableDebug&&console.log(d.data.error.message);else{__env.enableDebug&&console.log(d.data.success.message);var e=f("getGroupIndexbyUUID")(j.permissionsGroups,a.permissions_group_uuid,"permissions_");j.permissionsGroups[e][c+"s"].splice(b,1),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)),J()}})}else j.alerts.push({error:!0,message:"Error: You can not remove this "+c+" as there must be at least one "+c+" in each group."})},a.dissolvePermissionsGroup=function(a){o.getRemovePermissionGroup(j.permissionsGroups[a].permissions_group_uuid).then(function(b){j.showalerts(b),b.data.success&&(j.permissionsGroups.splice(a,1),m.localStorage.setItem("permissionsGroups",JSON.stringify(j.permissionsGroups)),J(),l.dismissAll())},function(a){__env.enableDebug&&console.log(a)})},a.isPermCommunication=function(a,b){if(null!==a){__env.enableDebug&&console.log(a);var c=JSON.parse(j.permissionsGroups[a].communications),d=!1;return angular.forEach(c,function(a,c){a===b&&(d=!0)}),d}return!1},a.isPermGroupMember=function(a,b,c){if(null!==a){var d=j.permissionsGroups[a][c+"s"],e=!1;return angular.forEach(d,function(a){a.user_uuid===b&&(e=!0)}),e}return!1},a.prodStatsUser=j.user.id,a.companyUserStats=[],a.prodTitle="",a.showStats=!1,a.loadUserProductivity=function(b){a.showStats=!1,a.productivityCompanyStats=null,(void 0==a.fromDate||void 0==a.toDate)&&(a.fromDate="",a.toDate="");var c={user_uuid:b,from_date:a.fromDate,to_date:a.toDate};console.log(c),o.postGetUserProdStats(c).then(function(c){if(c.data.success){console.log("productivityStats"),a.productivityUser=f("getItemByUUID")(j.userContacts,b,"user"),console.log(c.data.success.data),""==a.fromDate?a.prodTitle="For "+moment().format("dddd, MMMM Do YYYY"):a.prodTitle="From "+moment(a.fromDate).format("dddd, MMMM Do YYYY")+" to "+moment(a.toDate).format("dddd, MMMM Do YYYY"),a.productivityStats=c.data.success.data;var d=L(a.productivityStats);console.log(d),N(),M(d),a.showStats=!0}else console.log("productivity"),console.log(c.data.error.message)},function(b){a.productivityStats=[],console.log(b)})},a.loadUserProductivity(a.prodStatsUser),a.changeProductivityStatsUser=function(){a.loadUserProductivity(a.prodStatsUser)},a.updateProductivityDateRange=function(){a.productivityStats&&a.loadUserProductivity(a.prodStatsUser),a.productivityCompanyStats&&a.loadCompanyProductivity()},a.loadCompanyProductivity=function(){a.showStats=!1,a.productivityStats=null;var b={from_date:a.fromDate,to_date:a.toDate};o.postGetUserProdStatsDomain(b).then(function(b){if(b.data.success){a.companyUserStats=[],console.log("productivityCompanyStats"),console.log(b.data.success.data),""==a.fromDate?a.prodTitle="For "+moment().format("dddd, MMMM Do YYYY"):a.prodTitle="From "+moment(a.fromDate).format("dddd, MMMM Do YYYY")+" to "+moment(a.toDate).format("dddd, MMMM Do YYYY"),a.productivityCompanyStats=b.data.success.data;var c=[];angular.forEach(a.productivityCompanyStats,function(b){var d=L(b.updates),e=[];console.log(d),angular.forEach(d,function(a,b){var c={status:b,duration:a};e.push(c)}),console.log("KEITH"),console.log(e),a.companyUserStats[b.user_uuid]=e,c.push(e)}),console.log(a.companyUserStats),console.log("SUMMARY"),console.log(c);var d=K(c);N(),M(d),a.showStats=!0}else console.log("productivity"),console.log(b.data.error.message)},function(b){a.productivityCompanyStats=[],console.log(b)})};var Y=new Date;a.fromDate="",a.toDate="",a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,minDate:new Date(2016,1,1),maxDate:Y},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,maxDate:Y},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.ChangeToMinDate=function(b){if(null!=b){var c=new Date(b);a.toDateOptions.minDate=c,a.toDate=c}},a.ChangeToMinDate(),a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},a.clearSelectionTab=function(){j.tabContactGroup=!1},a.cleanConsole=function(){console.API,"undefined"!=typeof console._commandLineAPI?console.API=console._commandLineAPI:"undefined"!=typeof console._inspectorCommandLineAPI?console.API=console._inspectorCommandLineAPI:"undefined"!=typeof console.clear&&(console.API=console),console.API.clear()},a.test={emulatedCompany:null,searchText:""},u.getDomains().then(function(b){if(b){a.domains=b;var c=j.user.domain.domain_uuid,d=O(c,a.domains);a.test.emulatedCompany=d}}),a.setEmulatedCompany=function(b){b&&(console.log(y.retrievingUsers),v.setEmulatedCompany(b),G(),a.getDomainsStatus(),a.currentDomainStatus=R())},a.getDomainsBySearchText=function(){return a.test.searchText?(console.log(a.domains),a.domains.filter(function(b){return b.domain_name.indexOf(a.test.searchText)>-1})):(console.log(a.domains),a.domains)},a.changeTemplate=function(a){j.templateInclude=a},a.isAdminGroupOrGreater=function(){return y.isAdminGroupOrGreater()},a.isKotterTechOrGreater=function(){return y.isKotterTechOrGreater()},a.isKotterTech=function(){return y.isKotterTech()},a.searchTextChange=function(b){console.log(a.test),console.log("Text changed to "+b)},a.getCurrentDomain=function(){var a=P();return a?Q(a):null},a.isKotterGroupCompany=function(){var b=O(P(),a.domains);if(b){var c=b.domain_name;return"the-kotter-group"===c.slice(0,16)||"kotter-agency"===c.slice(0,13)||"qa-kotter-test"===c.slice(0,14)}return!1},a.openDissolveGroupModal=function(b){var c={group:b,dissolveGroup:a.dissolveGroup};j.showModalWithData("/company/confirmdissolvegroup.html",c)},j.$on("set.contact.groups.tab",function(){a.activeSettingTab=S()}),j.showMyProfile?U():t.get("activeSettingTab")&&(a.activeSettingTab=parseInt(t.get("activeSettingTab")),T()),j.$on("show.my.profile",function(){U()}),a.userContactTotalMaxedOut=q.userContactTotalMaxedOut}]),proySymphony.controller("ContactDetailsCtrl",["$scope","$auth","Idle","$interval","$uibModal","Keepalive","$rootScope","$routeParams","smsService","fileService","usefulTools","$myModal","dataFactory","$timeout","$location","pusherService","$uibModalStack","__env","symphonyConfig","$window","smsApi","$sce","$filter","contactGroupsService","userContactService","callService","emailService","videoConfService","userService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){a.warning&&(a.warning.close(),a.warning=null),a.timedout&&(a.timedout.close(),a.timedout=null)}function E(){m.getRefreshToken().then(function(a){r.enableDebug&&console.log(a);var c=a.data.success.data;g.userToken=c,t.localStorage.setItem("userToken",c),r.enableDebug&&console.log(c),b.setToken(c),r.enableDebug&&b.isAuthenticated()&&console.log("YEP")})}a.pusherService=p,a.contactGroups=x.groups,a.started=!1,g.selectedContacts={},g.contactsSelected=[],a.limit=100,a.contactLoadInfo=y.contactLoadInfo,a.onNearEndScroll=function(){a.addingMoreScrollContacts||(a.addingMoreScrollContacts=!0,y.addMoreScrollContacts(),n(function(){a.addingMoreScrollContacts=!1},1e3))},a.userContactServiceData=y.data,a.showContactsList=!0,a.contacts=y.contacts,a.makeCall=z.makeCall,a.noEmail=function(){g.showErrorAlert("This User does not have an email set up")},a.conference=B.videoConference,a.contactListInfo={},g.getNonContacts=function(a){m.getNonContacts(a).then(function(b){r.enableDebug&&console.log("NON CONTACTS"),r.enableDebug&&console.log(b.data),g.nonContacts=b.data,a!==g.user.id&&t.localStorage.setItem("nonContacts",JSON.stringify(g.nonContacts))})},g.getNonContacts(g.user.id),a.isCollapsed=!1,a.startEmailClient=function(a){A.startEmailClient(a)},g.showManageGroups=function(){o.path("/settings"),n(function(){g.$broadcast("set.contact.groups.tab")})},g.showEditContactForm=function(a){var b=w("getIndexbyUUID")(g.userContacts,a.contact_uuid);g.editingContact=g.userContacts[b],null==a.favorite?a.favorite=!1:"",g.actionContact="edit",r.enableDebug&&console.log(a),g.profile={},g.profile.favorite=a.favorite,g.profile.contact_profile_color=a.contact_profile_color,g.contactPhoneCount=a.phones.length,g.uploaderOption="/user/contact/update-avatar",g.phoneList=a.phones;var c={onClose:function(){g.editingContact=!1,g.phoneList=[]}};g.showModalFull("/company/contactsmaster.html",c,"lg")},g.isPhoneNumber=function(a){var b=a.toString().trim().replace(/^\+/,"");return angular.isNumber(+b)&&b.length>9&&b.length<12},g.showContactPhoto=function(a,b){var c={},d="",e="38px",f="20px",h="2x",i="lg";if("large"===b&&(e="90px",f="40px",h="3x",i="3x"),a){c.contact=a;var j=a.contact?a:a.contact_uuid?c:a;!j.contact&&j.contact_uuid&&(j.contact=j),d+=j.contact?j.contact.contact_profile_image?'<span class="fa-stack fa-'+i+'"><span class="fa-stack-1x contact-image"><img src="'+g.pathImgProfile+j.contact.contact_profile_image+'" class="contact-image-icon" alt=""/></span></span>':'<span class="fa-stack fa-'+i+'"><i class="fa fa-circle fa-stack-'+h+" icon-border circle-icon-"+b+'" style="'+g.setIconColor(j.contact)+'"></i><span class="fa-stack-1x contact-text-'+b+'">'+j.contact.contact_name_given.substring(0,1).toUpperCase()+" "+j.contact.contact_name_family.substring(0,1).toUpperCase()+"</span></span>":j.noncontact?'<span class="fa-stack fa-'+i+'"><i class="fa fa-circle fa-stack-'+h+" icon-border circle-icon-"+b+'" style="'+g.setIconColor(j.noncontact)+'"></i><span class="fa-stack-1x contact-text-'+b+'"><i class"fa fa-user contact-icon-'+b+'"></i></span></span>':'<span class="fa-stack fa-'+i+'"><i class="fa fa-circle fa-stack-'+h+' icon-border" style="font-size: '+e+'" ></i><i class="fa fa-user fa-stack-1x contact-icon-'+b+'"></i></span>'}else d+='<span class="fa-stack fa-'+i+'"><i class="fa fa-circle fa-stack-'+h+' icon-border" style="font-size: '+e+'" ></i><i class="fa fa-user fa-stack-1x contact-icon-'+b+'"></i></span>';return v.trustAsHtml(d)},g.filterContactData=[],g.selectContact=function(a){console.log(a),y.selectContact(a)},g.setIconColor=function(a){return null===a?"":(""===a.contact_profile_color&&(a.contact_profile_color="#cfdef0")," color: "+a.contact_profile_color+" !important;")},g.showAddContactForm=function(a,b){switch(r.enableDebug&&console.log(b),r.enableDebug&&console.log(a),g.actionContact="add",g.editingContact=!1,g.contactUser={},g.contactPhone={},g.uploaderOption="/user/contact/new",a){case"fileshare":g.contactUser.contact_email_address=b.recipient_email;break;case"filesharecontact":g.contactUser.contact_email_address=b;break;case"callhistory":var c=w("split")(b.contact_name," ",0),d=w("split")(b.contact_name," ",1);g.contactUser.contact_name_given=c,g.contactUser.contact_name_family=d,g.contactPhone.phone_number=b.contact_number;break;case"callrecording":var c=w("split")(b.contact_name," ",0),d=w("split")(b.contact_name," ",1);g.contactUser.contact_name_given=c,g.contactUser.contact_name_family=d,g.contactPhone.phone_number=b.contact_number;break;case"sms":g.contactPhone.phone_number=b;break;case"smscontact":isNaN(b)?g.contactUser.contact_name_given=b:g.contactPhone.phone_number=b;break;case"videoconference":var c=w("split")(b.recipient_name," ",0),d=w("split")(b.recipient_name," ",1);g.contactUser.contact_name_given=c,g.contactUser.contact_name_family=d,g.contactUser.contact_email_address=b.recipient_email;break;case"visualvoicemail":g.contactPhone.phone_number=b.caller_id_number;break;case"vfax":g.contactPhone.phone_number=b;break;default:}g.editingContact=g.contactUser,g.showModalFull("/company/contactsmaster.html",null,"lg","cls-modal-contacts")},a.filterForGroups=function(b){"53c18fa9-ad22-3743-a534-9557bfac56b1"===b.contact_uuid;for(var c=null,d=0,e=a.contactGroups.length;e>d&&(c=w("getIndexbyUUID")(a.contactGroups[d].members,b.contact_uuid),null===c);d++);return null===c?!0:!1},g.repeatContactDisplay=[],g.repeatContactDisplay.push({check:1}),g.repeatContactDisplay.push({check:2}),g.toggleContactasFavorite=function(b){m.getToggleFavorite(b).then(function(c){if(g.alerts.push({type:"success",msg:"Success: "+c.data.success.message}),!c.data.error){var d=w("getIndexbyUUID")(g.userContacts,b);g.userContacts[d].favorite=c.data.success.category,a.contactGroups.forEach(function(d,e){d.contacts.forEach(function(d,f){return d.contact_uuid===b?(a.contactGroups[e].contacts[f].favorite=c.data.success.category,t.localStorage.setItem("contactGroups",JSON.stringify(a.contactGroups)),!0):void 0})})}})},g.showicon=function(a){return k.funcPutIcon(a,"")},g.setProfileColor=function(a){return null===a?"":(""===a&&(a="#cfdef0"),"background-color: "+a+" !important;")},a.addUser=function(){var b={txtNameGiven:a.txtNameGiven,txtNameFamily:a.txtNameFamily,txtEmail:a.txtEmail,txtExtension:a.txtExtension,txtMobile:a.txtMobile,url_client:r.symphonyUrl&&""!==r.symphonyUrl?r.symphonyUrl+"/login":s.symphonyUrl+"/login"};m.doUserCreation(b).then(function(b){b.data.error?g.alerts.push({type:"danger",msg:"Failure: "+b.data.error.message}):(g.alerts.push({type:"success",msg:"Success: "+b.data.success.message}),a.showFrmUser=!1)},function(a){g.alerts.push({type:"danger",msg:"Failure Creating User Account "+(r.enableDebug?a:"")})})},a.funcPutIcon=function(a){return"A"===a?"fa fa-check-circle cls-color-green-tkg":"S"===a?"fa fa-clock-o  cls-color-yellow-tkg":"I"===a?"fa fa-times-circle cls-color-red-tkg disabled":void 0},a.funcPutIconPhones=function(a){return"O"===a?"fa fa-institution cls-color-green-tkg":"H"===a?"fa fa-home  cls-color-green-tkg":"M"===a?"fa fa-mobile cls-color-green-tkg disabled":void 0},a.cnt_ID=h.cntID,a.contactSelected=[],a.contSel={},a.cnt_ID&&a.contacts.forEach(function(b){parseInt(b.cntID)===parseInt(a.cnt_ID)&&(r.enableDebug&&console.log(b),a.contactSelected.push(b))}),a.contactSelectedPhones=[],a.contSelPhones={},a.contactSelectedEmails=[],a.contSelEmails={},g.currentPage=1,g.entryLimit=9,a.showFrmUser=!1,a.showFrmAtt=!1,a.showFrmQueues=!1,a.showFrmAudio=!1,r.enableDebug&&console.log("CONTACT GROUPS: "),r.enableDebug&&console.log(a.contactGroups),a.btnFiltAct="",g.contactsFilters=[],g.favoritesFilter=!1,a.allRecords=!0,a.filterOpcSelected=function(b){b===a.btnFiltAct?a.btnFiltAct="":a.btnFiltAct=b,"1"===b?g.favoritesFilter?g.favoritesFilter=!1:g.favoritesFilter=!0:"2"===b&&(a.allRecords?a.allRecords=!1:a.allRecords=!0)},g.removeContact=function(a){y.deleteContact(a).then(function(b){b&&(g.showalerts(b),x.removeContactFromGroupsByUuid(a)),q.dismissAll()})},a.setPage=function(a){g.currentPage=a},a.sort_by=function(a){g.predicate=a,g.reverse=!g.reverse},g.formatTime=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.round(a%60);return c=10>c?"0"+c:c,d=10>d?"0"+d:d,b+":"+c+":"+d},m.getUnreadCount().then(function(a){g.unreadVoicemails=0,null!==a.data&&(g.unreadVoicemails=a.data)}),m.getMissedCallCount(g.user.extension.extension_uuid).then(function(a){g.missedCalls=0,null!==a.data&&(g.missedCalls=a.data)}),g.showPendingSmsCount=function(){var a=0;angular.forEach(g.pendingSmsCount,function(b,c){a+=c}),g.totalPendingSmsCount=a},g.contactHeadingClicked=function(a,b){a===b-1&&n(function(){k.goToId("contacts-bottom")},1e3,!1)},g.showContact=function(a,b){var c="",d=g.userContacts;g.selectEmulateUser&&g.selectEmulateUser!==g.user.id&&(d=g.emulatedUserContacts);var e=w("getContactbyUUID")(d,a);c+='<ul style="margin: 0; padding: 0; list-style: none;" ><li style="width: 45px; float: left;">',c+=null!==e.contact_profile_image&&""!==e.contact_profile_image?'<img src="'+g.pathImgProfile+e.contact_profile_image+'" class="cls-img-lst-contact" alt=""/></li>':'<label class="cls-img-lst-contact-null" style="'+g.setProfileColor(e.contact_profile_color)+'">'+e.contact_name_given.substring(0,1).toUpperCase()+e.contact_name_family.substring(0,1).toUpperCase()+"</label></li>";var f="";return"number"===b?(f='<span ng-click="makeCall('+e.contact_primary_number+')"><strong>'+w("tel")(e.contact_primary_number)+"</strong></span>",e.extension&&(f='Ext: <span ng-click="makeCall('+e.extension+')"><strong>'+e.extension+"</strong></span>")):"email"===b&&(f='<a href="mailto:'+e.contact_email_address+'">'+e.contact_email_address+"</a>"),c+='<li style="float: left;">'+e.contact_name_given+" "+e.contact_name_family+"<br />"+f+"</li></ul>",v.trustAsHtml(c)},g.storeNonContact=function(a){var b={email:a.email,phone:a.phone,name:a.name,color:a.color,user_uuid:a.user_uuid};return m.postNonContact(b).then(function(a){return r.enableDebug&&console.log("STORING NON CONTACT RESULT"),r.enableDebug&&console.log(a),a.data.success?(g.nonContacts||(g.nonContacts=[]),g.nonContacts.push(a.data.success.noncontact),a.data.success.noncontact):null})},g.invitee={},g.addNonContactInvitee=function(a){var b={name:a.name,email:a.email,contact_uuid:null,is_user:"false"};g.invitee={},g.addedInvitees.push(b)},g.removeInvitee=function(a){g.addedInvitees.splice(a,1)},g.showNonContact=function(a,b,c){var d="",e={email:a,phone:b,name:c,color:randomColor({luminosity:"light"})};g.nonContacts||(g.nonContacts=JSON.parse(t.localStorage.getItem("nonContacts")));var f=g.nonContacts;g.selectEmulateUser&&g.selectEmulateUser!==g.user.id&&(f=g.emulatedNonContacts);var h=null!==f?w("getNonContact")(f,e):null;return h||(g.storeNonContact(e),h=e),d+='<ul style="margin: 0; padding: 0; list-style: none;" ><li style="width: 45px; display: inline-block;">',d+='<label class="chat-profile-image-null" '+(h.color?'style="background-color: '+h.color+' !important;"':"")+'><i class="fa fa-user"></i></label></li>',d+=null!==h.name?'<li style="display: inline-block;">'+(h.name!==h.phone?'<span class="capitalize">'+h.name+"</span>":w("tel")(h.phone))+(null!==h.email||null!==h.phone?"<br />":"")+(null!==h.email?'<a href="mailto:'+h.email+'">'+h.email+"</a>":null!==h.phone&&h.name!==h.phone?"<strong>"+w("tel")(h.phone)+"</strong>":"")+"</li></ul>":'<li style="display: inline-block;">'+(null!==h.phone?w("tel")(h.phone):"")+(null!==h.email?(null!==h.phone?"<br />":"")+'<a href="mailto:'+h.email+'">'+h.email+"</a>":"")+"</li></ul>",v.trustAsHtml(d)},g.sendVideoCallInvites=function(a){r.enableDebug&&console.log("START OF SEND");var b=[];if(g.invitee&&g.invitee.email&&""!==g.invitee.email&&null!==g.invitee.email){var c={name:g.invitee.name?g.invitee.name:null,email:g.invitee.email,contact_uuid:null,is_user:"false"};g.invitee={},g.addedInvitees.push(c)}if(g.addedInvitees&&g.addedInvitees.length>0&&angular.forEach(g.addedInvitees,function(a){b.push(a)}),g.addedInvitees=[],g.contactsUsr&&g.contactsUsr.length>0&&angular.forEach(g.contactsUsr,function(a){if(a.contact_email_address&&""!==a.contact_email_address){var c={name:a.contact_name_given+" "+a.contact_name_family,email:a.contact_email_address,contact_uuid:a.contact_uuid,is_user:!a.user_uuid||""===a.user_uuid&&null===a.user_uuid?"false":"true"};b.push(c)}}),r.enableDebug&&console.log("RECIPIENT"),r.enableDebug&&console.log(b),b.length>0){var d={video_conference_uuid:g.user.videoConference.video_conference_uuid,recipients:b,sender_name:g.user.contact_name_given+" "+g.user.contact_name_family,sender_email:g.user.email_address,sender_company:g.user.contact_organization,body:g.videoInviteBody,redirect_path:(r.symphonyUrl&&""!==r.symphonyUrl?r.symphonyUrl:s.symphonyUrl)+"/video",origin:a};r.enableDebug&&console.log("SENDING VIDEO INVITE"),r.enableDebug&&console.log(d),m.postSendVideoConferenceInvites(d).then(function(b){if(r.enableDebug&&console.log(b),g.showalerts(b),b.data.success){if("modal"===a){g.videoConference.participants=g.videoConference.participants.concat(b.data.success.data);var c=q.getTop();c&&q.dismiss(c.key)}else"icon"===a&&g.showModalWithData("/video/outgoingvideocallmodal.html",b.data.success.data);g.addedInvitees=[]}return b},function(a){r.enableDebug&&console.log(a)})}else g.alerts.push({type:"danger",msg:"Error: Please specify at least one contact before clicking Send Invites."})},g.emulationStatus||(g.emulationStatus=k.getManagerStatus()),g.selectEmulateUser=null,g.isEmulatedUser=function(){return null!==g.selectEmulateUser&&g.selectEmulateUser!==g.user.id?!0:!1},g.getNameByUUID=function(a){var b=w("getContactbyUserUUID")(g.userContacts,a);return b?b.contact_name_given+" "+b.contact_name_family:"nf"},g.isManagerOf=function(a,b){return w("checkIfManager")(g.emulationStatus[b].watched,a)||C.isAdminGroupOrGreater()},g.setEmulationUser=function(a,b){g.showTable=!1,g.selectEmulateUser=a;var c={domain_uuid:g.user.domain.domain_uuid,user_uuid:a};m.postGetContacts(c).then(function(c){g.emulatedUserContacts=[],c.data.success&&(r.enableDebug&&console.log("GET CONTACTS - EMULATED USER"),g.emulatedUserContacts=c.data.success.data,r.enableDebug&&console.log(g.emulatedUserContacts)),m.getNonContacts(a).then(function(c){switch(g.emulatedNonContacts=[],c.data&&(r.enableDebug&&console.log("EMULATED NON CONTACTS"),r.enableDebug&&console.log(c.data),g.emulatedNonContacts=c.data),b){case"fileshare":j.getShares(a);break;case"videoconference":r.enableDebug&&console.log("MANAGING VIDEO CONFERENCE"),g.getVCSessions(a),g.getVideoConference(a);break;case"voicemail":;g.getVisualVoicemail();break;case"callhistory":g.callHistoryRST=[],g.functGetCallHistory(a);break;case"sms":i.setEmulationUser(a)}})},function(a){g.msgContacts+="Error from contacts user: "+JSON.stringify(a,null,4)+"\n"})},a.$on("IdleStart",function(){D(),a.warning=e.open({templateUrl:"warning-dialog.html",windowClass:"modal-danger"})}),a.$on("IdleEnd",function(){E(),D(),a.start()}),a.$on("IdleTimeout",function(){D(),o.path("/logout"),a.timedout=e.open({templateUrl:"timedout-dialog.html",windowClass:"modal-danger"})}),a.start=function(){D(),c.watch(),a.started=!0},a.stop=function(){D(),c.unwatch(),a.started=!1},a.vcUrl=r.vcUrl&&""!==r.vcUrl?r.vcUrl:s.vcUrl,a.sendVideoInvite=function(a){B.sendVideoInvite(a)}}]),proySymphony.controller("SmsCtrl",["$scope","$rootScope","$filter","$auth","$window","__env","symphonyConfig","Slug","$routeParams","$cookies","$location","FileUploader","$modal","$timeout","$q","$log","$interval","$mdDialog","$uibModal","userContactService","smsService","smsApi","dataFactory","usefulTools","$sce","$uibModalStack",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(){a.search={},a.search={showSearch:!1,searchText:null,highlightMessage:null,sendSearch:a.sendSearch,results:{}}}function B(b){u.blacklistNumber(a.smsData.currentThread.contact_phone_number,b).then(function(a){z.dismissAll()})}function C(){z.dismissAll()}function D(b){var c=0;return angular.forEach(b,function(a){c+=a.file.size}),a.totalSize=+(c/1e3).toFixed(2),a.totalSize}f.enableDebug&&console.log("Executing SMSCtrl"),a.imageBaseUrl=(f.apiUrl&&""!==f.apiUrl?f.apiUrl:g.onescreenUrl)+"/imported/freeswitch/storage/avatars/",a.mediaUrl=f.apiUrl?f.apiUrl:g.onescreenUrl;if(a["var"]=null,a.date=new Date,a.copySelected={},a.enableCopyMode=!1,b.selectedContacts={},b.contactsSelected=[],a.showCompose=!1,a.smsData=u.smsData,a.currentThread=function(){return u.smsData.currentThread},a.contactSelectionType="sms",console.log(i),i.thId){var E=i.thId;k.search({}),E&&n(function(){j.put("goToThread",E)})}b.$watch("current-thread-updated",function(b,c){console.log("smsdata"),a.smsData=u.smsData}),a.availThreads=function(){return x.convertObjectToArray(u.availThreads)},a.setCurrentThread=function(a){u.setCurrentThread(a)},a.messages=function(){return u.smsData.currentThread.messages},a.isDisabled=function(){return b.isEmulatedUser()},a.showAllConversations=function(){u.smsData.currentThread=null,a.showCompose=!1,b.contactsSelected=[],b.selectedContacts={},a.delivery.message=""},a.toggleComposeMode=function(){a.showCompose=!a.showCompose,b.contactsSelected=[]},a.hasSearchResults=function(){return u.smsData.currentThread&&u.smsData.currentThread.searchInfo?!0:!1},a.goToRecentMessages=function(){u.showCurrentMessages()},a.sendSearch=function(){var c={search:a.search.searchText,user_uuid:b.selectEmulateUser&&b.selectEmulateUser!==b.user.id?b.selectEmulateUser:b.user.id};a.search.showSearch=!0,u.searchSmsMessages(c).then(function(b){a.search.results=b})},a.scrollToBottom=function(){n(function(){var a=angular.element(".sms-message-list")[0];a.scrollTop=a.scrollHeight})},A(),a.closeSearchDisplay=function(){a.search.showSearch=!1},a.addThreadToBlackList=function(){var c={thread:a.smsData.currentThread,blacklistNumber:B,closeModal:C};b.showModalWithData("/sms/blacklist-sms-number.html",c)},a.blacklist={reach:"domain"},a.showBlacklistModal=function(a){b.showModalFull("/modals/blacklist-sms-number-modal.html",{thread:a,onClose:C})},a.showBlacklistTableModal=function(a){b.showModalFull("/modals/blacklist-table-modal.html",{user_uuid:b.selectEmulateUser?b.selectEmulateUser:b.user.id,closeModal:C})},a.handleScroll=function(b){var c=100,d=0,e=q(function(){d+=1,d>c&&q.cancel(e),a.smsData.currentThread&&a.smsData.currentThread.messages&&(q.cancel(e),a.scrollToBottom(),n(function(){a.scrollToBottom()},2*b))},100)},a.$watch("smsData.currentThread",function(b,c){a.$evalAsync(function(){a.handleScroll(100)})}),a.$watch("smsData.currentThread.messages.count",function(b,c){var d=0;b&&!c&&0!==c&&(d=100),console.log(d),d>0?n(function(){a.handleScroll(d)},d):a.$evalAsync(function(){a.handleScroll(d)})}),a.threadpredicate="mostrecent",a.threadreverse=!0,a.threadSortFunction=function(b){return"mostrecent"===a.threadpredicate?b.most_recent?b.most_recent.created_at:null:"contact"===a.threadpredicate?b.contact?b.contact.contact_name_full:b.contact_phone_number:"unread"===a.threadpredicate?b.unread_count:null},a.sortThreadBy=function(b){console.log(b),a.threadpredicate=b,a.threadreverse=!a.threadreverse},a.toggleCopyMode=function(){a.enableCopyMode=!a.enableCopyMode,a.enableCopyMode||(a.copySelected={})},a.copyText=function(b){a.copySelected[b]?delete a.copySelected[b]:a.copySelected[b]=!0},a.showSaveCopyToolTip=function(){return"hawksoft"==b.user.exportType.partner_code?b.tips.sms.copy_to_hawksoft:"generic"==b.user.exportType.partner_code?b.tips.sms.copy_to_management:void 0},a.showExportTarget=function(){return"hawksoft"==b.user.exportType.partner_code?"Hawksoft Inbox":"generic"==b.user.exportType.partner_code?"Management System Inbox":void 0},a.saveCopiedTexts=function(){var d=[];angular.forEach(a.copySelected,function(a,b){var e=c("getByUUID")(u.smsData.currentThread.messages,b,"message");null!==e&&d.push(u.smsData.currentThread.messages[e])});var e={texts:d,domain_uuid:b.user.domain_uuid,user_uuid:b.user.id};w.postHSCopySmsTexts(e).then(function(c){c.data.success?(b.showSuccessAlert(d.length+" Text Messages were copied."),a.copySelected={},a.toggleCopyMode()):b.showErrorAlert(c.data.error.message)},function(a){console.log(a)})},a.isPhoneNumber=function(a){return x.isPhoneNumber(a)},a.deliverSmsMessage=function(c){if(console.log(c),a.mainSmsInput=angular.element("#smsInput")[0],console.log(angular.element("#smsInput")),console.log(angular.element("#smsInput")[0]),0==a.uploader.queue.length){if(!a.mainSmsInput.value)return void b.showErrorAlert("You can not send an empty message.");u.sendSmsMessage(a.mainSmsInput.value,null,null).then(function(d){d===!0?(a.mainSmsInput.value="",a.delivery.message="",a.postFiles=[],c&&"compose"===c&&a.showAllConversations()):b.showErrorAlert(d)})}else a.uploader.uploadAll()},a.removeMessage=function(a){var c=r.confirm().title("Confirm Delete").htmlContent("Are you sure you want to delete this message?").ariaLabel("Delete").ok("Delete").cancel("Cancel");r.show(c).then(function(){u.deleteMessage(a).then(function(a){a.data.error&&b.showErrorAlert(a.data.error.message)})})},a.removeThread=function(){var d=c("tel")(a.smsData.currentThread.contact_phone_number),e=r.confirm().title("Confirm Delete").htmlContent("Are you sure you want to delete this thread with <strong>"+d+"</strong>?").ariaLabel("Delete").ok("Delete").cancel("Cancel");r.show(e).then(function(){var c=u.smsData.currentThread.thread_uuid;u.removeThread(c).then(function(c){b.showalerts(c),c.data.success&&(a.showAllConversations(),z.dismissAll())})})},a.toArray=function(a){return x.convertObjectToArray(a)},a.playVideo=function(c){var d=c,e=a.mediaUrl+c.url;d.publicurl=e,d.smsVideo=!0,b.showModalFull("/video/playrecording.html",d,"")},a.uploadIsImage=function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)},a.uploadIsVideo=function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|mp4|mpg|".indexOf(b)};var F=a.uploader=new l({url:b.onescreenBaseUrl+"/sms/uploadmedia",alias:"file",removeAfterUpload:!0,headers:{Authorization:"Bearer "+b.userToken},transformRequest:angular.identity});F.filters.push({name:"checkFileSize",fn:function(a,b){console.log(a);var c=a.name.split("."),d=c[c.length-1].toLowerCase();return"jpg"===d||"png"===d||"jpeg"===d?!0:a.size>1e6?!1:!0}}),a.showUploadingFiles=!1,a.showUploadingOverlay=!1,a.showUploadingFiles2=!1,a.$watch("uploader.queue.length",function(b,c){b>0&&(a.showUploadingFiles=!0),0===b&&(a.showUploadingFiles=!1),"number"==typeof b&&"number"==typeof c&&c>b&&D(F.queue)}),F.onWhenAddingFileFailed=function(a,c,d){f.enableDebug&&console.info("onWhenAddingFileFailed",a,c,d),"checkFileSize"===c.name&&b.showErrorAlert("The maximum size for an MMS message is 1MB. The file you have tried uploading is "+(a.size/1e6).toFixed(2)+"MB")},F.onAfterAddingFile=function(a){f.enableDebug&&console.info("onAfterAddingFile",a),f.enableDebug&&console.log(D(F.queue)+" KB")},F.onAfterAddingAll=function(b){a.postFiles=[],f.enableDebug&&console.info("onAfterAddingAll",b)},F.onBeforeUploadItem=function(a){f.enableDebug&&console.info("onBeforeUploadItem",a)},F.onProgressItem=function(a,b){f.enableDebug&&console.info("onProgressItem",a,b)},F.onProgressAll=function(a){f.enableDebug&&console.info("onProgressAll",a)},F.onSuccessItem=function(b,c,d,e){f.enableDebug&&console.info("onSuccessItem",b,c,d,e),f.enableDebug&&console.log(c.success.data),a.postFiles.push(c.success.data)},F.onErrorItem=function(a,b,c,d){f.enableDebug&&console.log("ERROR RESPONSE FROM UPLOADING AVATAR"),f.enableDebug&&console.log(b),fileitem.isUploaded=!1,f.enableDebug&&console.info("onErrorItem",a,b,c,d)},F.onCancelItem=function(a,b,c,d){f.enableDebug&&console.info("onCancelItem",a,b,c,d),F.clearQueue()},F.onCompleteItem=function(a,b,c,d){f.enableDebug&&console.info("onCompleteItem",a,b,c,d)},F.onCompleteAll=function(){f.enableDebug&&console.info("onCompleteAll"),f.enableDebug&&console.log("FILE IDS"),f.enableDebug&&console.log(a.postFiles),
u.sendSmsMessage(a.mainSmsInput.value,a.postFiles),a.showAllConversations()}}]),proySymphony.controller("LoginCtrl",["$scope","Idle","$myModal","$cookies","$uibModalStack","$mdDialog","$rootScope","$auth","$location","$q","$routeParams","$filter","$window","$http","chatMessages","usefulTools","mmApi","dataFactory","__env","symphonyConfig","$timeout","smsService","contactGroupsService","userContactService","callService","userService","audioLibraryService","musicOnHoldService","metaService","newChatService","timeKeeperService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){function F(b){var c=angular.element(document.querySelector("#tos")),d=f.confirm().title("Please Confirm").htmlContent(c[0].innerHTML).ariaLabel("Confirm you agree").ok("Yes, I Agree").cancel("Cancel");f.show(d).then(function(){a.processingSignupStep2=!0;var b=new Date,c=b.getTimezoneOffset();s.enableDebug&&console.log("TIMEZONE OFFSET = "+c);var d=c/60;p.isDST()&&(d+=1);var e=a.getAddressInfo(),f={address_details:e};r.postValidateE911Address(f).then(function(b){if(s.enableDebug&&console.log("VALIDATION RESULT"),s.enableDebug&&console.log(b),!b.data.success)return a.processingSignupStep2=!1,void g.showErrorAlert("The address entered can not be validated. Please check and try again.");var c={stripe_token:a.stripe_token,bridge_lead_uuid:a.lead.bridge_lead_uuid,ipinfo:a.ipInfo,tzoffset:d,address_details:e,customerId:a.customerId?a.customerId:null};r.postSubmitSignup(c,"step2").then(function(b){if(console.log(b.data),b.data.success)g.showAlert("Payment and Registration Successful",b.data.success.message),a.transition("loginForm"),a.processingSignupStep2=!1,a.signup={},a.lead=null;else{console.log(b.data.error.data);var c=b.data.error;if(c.data.error_code&&"missing_lead"===c.data.error_code)g.showAlert("Registration Failed",c.message),a.lead=null,a.signup={},a.transition("SignupStep1");else{var d="<p>Your transaction was not successful and your card was not charged. Please correct the information submitted or use a different card. </p><p>";c.data.response&&(d+="<strong>Error: </strong>"+c.data.response.error.message,a.customerId=c.data.stripe_customer),c.message&&(d+="<strong>Error: </strong>"+c.message),d+="</p><p>If the problem persists please contact customer support at (770) 717-1777.</p>",g.showAlert("Payment Failed",d)}a.processingSignupStep2=!1}})})})}function G(){return z.getUserInfoByUuid().then(function(a){return console.log(a),a?(g.user=a,C.performCallbackCollection(C.onRootScopeUserLoadCallbacks),r.getTimezones().then(function(a){g.timeZones=a.data,m.localStorage.setItem("timeZones",JSON.stringify(g.timeZones)),s.enableDebug&&console.log("TIMEZONES"),s.enableDebug&&console.log(a.data)}),!0):Q("Retrieving User Profile")},function(a){return Q("Retrieving User Profile")})}function H(){return x.setUserContactsOnly().then(function(b){if(b)return g.start_timer=!1,m.localStorage.setItem("start_timer",JSON.stringify(g.start_timer)),g.changeUserStatus("Available"),E.setTkUsers(),w.groups.length<1&&w.setGroups(),x.setContacts(),!0;var c="Could not retrieve contacts";return a.msgContacts+="Error from contacts user: "+JSON.stringify(c,null,4)+"\n",s.enableDebug&&console.log("ERROR GETTING CONTACTS "+JSON.stringify(c)),Q("Getting User Contacts"+JSON.stringify(c,null,4))})}function I(){return r.getManagerEmulationStatus().then(function(a){return a.data.error?(s.enableDebug&&console.log(a.data.error.message),!1):(g.emulationStatus=a.data.success.data,m.localStorage.setItem("emulationStatus",JSON.stringify(g.emulationStatus)),s.enableDebug&&console.log("MANAGER EMULATION STATUS"),s.enableDebug&&console.log(g.emulationStatus),!0)},function(a){return s.enableDebug&&console.log(a),!1})}function J(){b.watch(),a.loginSpinner=!1,i.path("/main")}a.ipInfo=m.localStorage.getItem("userIPInfo")?JSON.parse(m.localStorage.getItem("userIPInfo")):null,a.modalTableHeight=m.innerHeight-250,r.getStates().then(function(b){a.billingStates=b.data,console.log(b.data)}),a.billing={},a.currentState="loginForm",a.states={loginForm:{possibleStates:["forgotPassword","signUpStep1","confirmPass"],transitions:{}},forgotPassword:{possibleStates:["loginForm"],transitions:{}},confirmPass:{possibleStates:["loginForm"],transitions:{}},signUpStep1:{possibleStates:["loginForm","signUpStep2"],transitions:{}},signUpStep2:{possibleStates:["loginForm","signUpStep1"],transitions:{}}},a.transition=function(b){var c,d=a.states[a.currentState].possibleStates;d.indexOf(b)>-1&&(c=a.states[a.currentState].transitions[b],a.currentState=b,c&&c())},a.registerTransition=function(b,c,d){a.states[c].transitions[d]=b};var K=function(){console.log("login to signup1")};a.registerTransition(K,"loginForm","signUpStep1");var L=function(){angular.element(".panel-primary")[0].style="width: 80rem;"};a.registerTransition(L,"signUpStep1","signUpStep2"),m.localStorage.clear();var M=h.getToken();a.userToken=M,a.showConfirm=!1,a.showResetPassword=!0,a.showForgotButton=!1,a.showInvalidCredMsg=!1,a.processingSignup=!1,a.hideConfirmPass=!0;var N=k.resettoken?k.resettoken:"",O=k.resetemail?k.resetemail:"",P=k.confirm?k.confirm:"";a.resetEmail=O,""!=P&&(a.showConfirm=!0,a.showResetPassword=!1),""!==N&&a.transition("confirmPass"),g.showModalWithData=function(a,b){c.openTemplate("views"+a,b,"")},g.showModalFull=function(a,b,d){c.openTemplate("views"+a,b,d)},a.showTOS=function(){var a=angular.element(document.querySelector("#tos"));f.show(f.alert().clickOutsideToClose(!0).title("Terms of Service").htmlContent(a[0].innerHTML).ariaLabel("Terms of Service").ok("Close"))},a.showTaxes=function(){r.getTaxesAndFees().then(function(a){var b=(a.data.success.data,'<p><strong>Federal Universal Service Recovery Fee:</strong> This fee is used to recover contributions The Kotter Group is required to make to the federal Universal Service Fund, which provides support to promote access to telecommunications services at reasonable rates for those living in rural and high-cost areas, income-eligible consumers, rural health care facilities, and schools and libraries. The Kotter Group is permitted, but not required, to recover these costs from its customers. The Federal Communications Commission (FCC) sets the applicable USF rate on a quarterly basis, and it is subject to change.</p><p><strong>Compliance and Administrative Cost Recovery Fee:</strong> The Kotter Group Compliance and Administrative Cost Recovery Fee (CRF) is a fee that The Kotter Group charges in order to recover the various costs and expenses that it incurs in connection with:</p><ol type="i"><li>complying with legal, regulatory, and other requirements, including without limitation federal, state, and local reporting and filing requirements;</li><li>responding to subpoenas, civil investigation demands, and other official requests, and otherwise assisting with official investigations;</li><li>reporting and managing payments to third-party telecommunications services providers; and</li><li>acquiring and protecting intellectual property, including without limitation through the filing and maintenance of patents, trademarks, and other proprietary rights.</li></ol><p>The CRF is not a tax, nor is it mandated by any level of government or government agency.</p>');f.show(f.alert().clickOutsideToClose(!0).title("Taxes and Fees").htmlContent(b).ariaLabel("Taxes and Fees").ok("Close"))})},a.forgotPassword=function(b){var c={email:b,url_client:s.symphonyUrl&&""!==s.symphonyUrl?s.symphonyUrl+"/login":t.symphonyUrl+"/login"};a.show=!0,r.forgotPassword(c).then(function(a){g.showalerts(a)},function(a){g.alerts.push({error:!0,message:a})})},a.resetPassword=function(a){a.token=N,r.resetPassword(a).then(function(a){g.showalerts(a),i.path("/login")},function(a){g.alerts.push({error:!0,message:a})})},a.closeLogout=function(){r.closeTkRecord().then(function(a){}),g.start_timer=!1,m.localStorage.setItem("start_timer",JSON.stringify(g.start_timer)),g.logoutMessage=""},Stripe.setPublishableKey("pk_test_a8mSKGJ47JUXuuKA3upG6Kfp"),a.handleStripe=function(b,c){console.log(c),c.error?(g.showErrorAlert("We were unable to validate your payment information. Please review your information and try again."),console.log(c.error)):(M=c.id,a.stripe_token=c.id,console.log(M),F())},a.signup={},a.submitStep1=function(b){return p.isPhoneNumber(a.signup.txtMobile)?(a.processingSignup=!0,void(a.lead&&a.lead.firstName===a.signup.txtNameGiven&&a.lead.lastName===a.signup.txtNameFamily&&a.lead.email_address===a.signup.txtEmail&&a.lead.company===a.signup.txtCompany&&a.lead.phone===a.signup.txtMobile&&a.lead.zip===a.signup.zipcode?(a.totalFees=a.lead.code.per_seat*(parseFloat(a.lead.billingfees.universal_service_fee)/100+parseFloat(a.lead.billingfees.recovery_fee/100)),a.totalCharge=parseFloat(a.lead.code.per_seat)+parseFloat(a.totalFees),a.processingSignup=!1,a.transition("signUpStep2")):(a.lead&&(a.signup.bridge_lead_uuid=a.lead.bridge_lead_uuid),r.postSubmitSignup(a.signup,"step1").then(function(b){b.data.success?(a.lead=b.data.success.data,a.totalFees=a.lead.code.per_seat*(parseFloat(a.lead.billingfees.universal_service_fee)/100+parseFloat(a.lead.billingfees.recovery_fee/100)),console.log(a.totalFees),a.totalCharge=parseFloat(a.lead.code.per_seat)+parseFloat(a.totalFees),console.log(a.totalCharge),a.processingSignup=!1,a.processingSignupStep2=!1,a.transition("signUpStep2")):(g.showErrorAlert(b.data.error.message),a.processingSignup=!1)})))):void g.showErrorAlert("You must use a valid phone number. Please review and resubmit your request.")},a.e911Address={},a.getStep2FormInputValue=function(a){var b=angular.element('[name="Step2"]'),c=b.find('input[ng-model="'+a+'"]')[0];return c?c.value:null},a.getAddressInfo=function(){var b;return b=a.e911Address.billingSameAsCompanyAddress?a.billing:a.e911Address},a.customerId=null,a.submitSignup=function(){u(function(){a.hideprocessingSignup=!1,a.hidesignupForm=!0,a.signup.url_client=s.symphonyUrl&&""!==s.symphonyUrl?s.symphonyUrl+"/login":t.symphonyUrl+"/login";var b=new Date,c=b.getTimezoneOffset();s.enableDebug&&console.log("TIMEZONE OFFSET = "+c),a.signup.tzoffset=c/60,p.isDST()&&(a.signup.tzoffset+=1),r.sendSignup(a.signup).then(function(b){b.data.error?(a.hideprocessingSignup=!0,a.hidesignupForm=!1,g.alerts.push({error:!0,message:b.data.error.message})):(a.hideprocessingSignup=!0,a.hidesignupForm=!0,a.hideLoginForm=!1,a.hideSignUp=!0,g.alerts.push({success:!0,message:b.data.success.message}))},function(b){a.hideprocessingSignup=!0,a.hidesignupForm=!1,g.alerts.push({error:!0,message:b})})},250)};var Q=function(b){return h.logout(),a.loginSpinner=!1,g.alerts.push({error:!0,message:"There was a problem with Login - "+b}),!1};a.loginSpinner=!1,a.loginUser=function(b){a.loginSpinner=!0,s.enableDebug&&console.log(b);var c={username:l("lowercase")(b.email),password:b.password};h.login(c).then(function(b){b.data.error?(401===b.status?g.alerts.push({error:!0,message:" Invalid Credentials Passed"}):b.data.disabled?g.alerts.push({error:!0,message:"Your account has been disabled. Please contact the company admin to re-enable your account"}):b.data.deleted&&g.alerts.push({error:!0,message:"This account has been deleted"}),a.loginSpinner=!1):(b.data.token&&""!=b.data.token||Q("Login Failed"),g.userToken=b.data.token,s.enableDebug&&console.log("USER TOKEN"),s.enableDebug&&console.log(g.userToken),m.localStorage.setItem("userToken",b.data.token),g.user={},G().then(function(b){b&&(a.chatMessages=o,H().then(function(a){a&&I().then(function(a){a&&J()})}))})),z.performOnLoadMediaCheck()})["catch"](function(b){a.loginSpinner=!1,401===b.status&&g.alerts.push({error:!0,message:" Invalid Credentials Passed"})})}}]),proySymphony.controller("PublicCtrl",["$scope","$routeParams","$location","$interval","$auth","__env","dataFactory","symphonyConfig","$window","$rootScope",function(a,b,c,d,e,f,g,h,i,j){function k(b){g.checkVideoSession(b).then(function(b){console.log("CHECKING SESSION"),console.log(b.data),b.data.success&&b.data.success.active&&"true"===b.data.success.active?(a.showWaitingForVideo=!1,i.location.href=(f.vcUrl&&""!==f.vcUrl?f.vcUrl:h.vcUrl)+"/?room="+n):a.showWaitingForVideo=!0},function(b){a.showWaitingForVideo=!0})}function l(){console.log("DISABLING BUTTONS"),j.roomActive=!0}if(console.log("ROUTEPARAMS"),console.log(b),i.localStorage.getItem("openEmail")){var m=i.localStorage.getItem("openEmail");console.log(m),i.open(m),i.localStorage.removeItem("openEmail"),i.close()}else if(a.showWaitingForVideo=!1,a.showInvalidRoom=!1,j.$safeApply=function(a,b){b=b||function(){},a.$$phase?b():a.$apply(b)},a.$safeApply(a,function(){}),b.videoroom){a.pageTitle="Video Conferencing";var n=null!==b.videoroom?b.videoroom:"000";console.log(n),"000"===n?a.showInvalidRoom=!0:(a.showInvalidRoom=!1,k(n),d(function(){k(n)},1e4))}else if(b.screenroom){a.pageTitle="Screen Sharing";var o=b.screenroom;j.roomId=o,document.getElementById("room-id").value=o,a.screenShareInfo={},a.screenShareInfo.source=null,j.roomActive=!1,a.showspinner=function(){j.roomActive?(console.log("CHANGE TO FALSE"),j.roomActive=!1):j.roomActive||(console.log("CHANGE TO TRUE"),j.roomActive=!0)},a.roomLocked=!0,a.lockRoom=function(b){"true"===a.roomLocked?a.roomLocked="false":a.roomLocked="true";var c={roomid:b,lock:a.roomLocked};g.postLockScreenShareRoom(c)},a.closeRoom=function(a){g.getCloseScreenRoom(a)},a.openRoom=function(a){l(),p.open(a,function(){})},a.joinRoom=function(a){l(),console.log(j),p.join(a)},a.openOrJoinRoom=function(a){l(),p.openOrJoin(a,function(a,b){})};var p=new RTCMultiConnection;p.socketURL="https://rtcmulticonnection.herokuapp.com:443/",p.socketMessageEvent="screen-sharing-demo",localStorage.setItem(p.socketMessageEvent,o),p.session={screen:!0,oneway:!0},p.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},p.videosContainer=document.getElementById("videos-container"),p.onstream=function(a){p.videosContainer.appendChild(a.mediaElement),a.mediaElement.play(),setTimeout(function(){a.mediaElement.play()},5e3)},p.getScreenConstraints=function(a){getScreenConstraints(function(b,c){if(!b)return c=p.modifyScreenConstraints(c),void a(b,c);throw b})},a.screenSharingURL=(f.symphonyUrl&&""!==f.symphonyUrl?f.symphonyUrl:h.symphonyUrl)+"/screenshare/"+a.roomId,a.showRoomURL=function(){var b="<h2>URL for your room:</h2><br>\n";return b+="<p><strong>Room ID: "+a.roomId+"</strong></p>\n",b+='<p><a href="'+a.screenSharingURL+'" target="_blank">'+a.screenSharingURL+"</a></p>\n",b+='<a class="btn btn-primary btn-lg" href="'+a.screenSharingURL+'" target="_blank">Enter Room Now</a>\n',console.log(b),$sce.trustAsHtml(b)},function(){function a(a){return decodeURIComponent(a.replace(/\+/g," "))}for(var b,c={},d=/([^&=]+)=?([^&]*)/g,e=window.location.search;b=d.exec(e.substring(1));)c[a(b[1])]=a(b[2]);window.params=c}(),localStorage.getItem(p.socketMessageEvent)?o=localStorage.getItem(p.socketMessageEvent):(o=p.token(),localStorage.setItem(p.socketMessageEvent,o)),document.getElementById("room-id").value=o,document.getElementById("room-id").onkeyup=function(){localStorage.setItem(p.socketMessageEvent,this.value)},g.getScreenRoom(o).then(function(b){if(console.log("SCREENROOM"),console.log(b),console.log(p),b.data.error)console.log(b.data.error.message);else if(a.screenShareInfo=b.data.success.info,"user"===a.screenShareInfo.screen_source||null===a.screenShareInfo.screen_source)if(e.isAuthenticated())console.log("OPENING ROOM"),a.openRoom(o),j.roomActive=!0,l();else{var c=0;!function d(){p.checkPresence(o,function(b){return console.log(b),b?(console.log("JOINING ROOM"),a.joinRoom(o),void(a.$$phase||a.$apply())):(console.log("WAITING "+o),j.roomActive=!1,a.$$phase||a.$apply(),c++,void setTimeout(d,5e3))})}()}else"contact"===a.screenShareInfo.screen_source&&console.log("WAIT FOR CONTACT TO OPEN ROOM")},function(a){console.log(a)}),a.leaveRoom=function(){p.leave(),j.roomActive=!1},a.toggleFullscreen=function(){a.fullscreen?a.fullscreen=!1:a.fullscreen=!0}}}]),proySymphony.controller("ModalInstanceCtrl",["$rootScope","$uibModalInstance","dataFactory","items",function(a,b,c,d){a.vm=this,a.vm.content=d,console.log(a.vm.content),a.vm.confirm=b.close,a.vm.cancel=b.dismiss}]).controller("ModalCtrl",["$scope","$location","$rootScope","$http","$timeout","$cookies","$window","chatMessages","$filter","$q","$uibModal","ngAudio","$uibModalStack","notificationService","$anchorScroll","usefulTools","dataFactory","mmApi","$auth","$sce","$myModal","smsApi","$compile","__env","symphonyConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){c.modalTableHeight=g.innerHeight-300;try{c.nonContacts||(c.nonContacts=JSON.parse(g.localStorage.getItem("nonContacts")))}catch(z){console.log(z)}c.ringModal=function(a){u.openTemplate("views"+a,"","lg")},c.showModal=function(a,b){x.enableDebug&&console.log(c.permissionsGroups),console.log(a),u.openTemplate("views"+a,b,"")},c.showModalWithData=function(a,b){u.openTemplate("views"+a,b,"")},c.showModalFull=function(a,b,c){u.openTemplate("views"+a,b,c)},c.showEditorModal=function(a,b,c,d,e,f){u.openTemplate("views"+a,b,c,d,e,f)},c.number=6,c.closeThisModal=function(){var a=m.getTop();a&&m.dismiss(a.key)},c.closeEditorModal=function(){c.showModal("/autodialing/confirmcloseeditor.html")},c.closeModal=function(){m.dismissAll()},c.closeMemberAdded=function(){c.memberAddedMessage=null},c.copyToHawksoft=function(a){var b={uuid:a.uuid,call_history_fs_uuid:a.call_history_fs_uuid?a.call_history_fs_uuid:null,user_uuid:c.user.id,domain_uuid:c.user.domain_uuid,domain_name:c.user.domain.domain_name};console.log(b),"voicemail"===a.type||"history-voicemail"===a.type?q.postHSCopyVoicemail(b).then(function(a){console.log(a)},function(a){console.log(a)}):"history-recording"===a.type||"recording"===a.type?q.postHSCopyRecordingNew(b).then(function(a){console.log(a)},function(a){console.log(a)}):"videoconference"===a.type?q.postHSCopyVideoConference(b).then(function(a){console.log(a)},function(a){console.log(a)}):"voicemail-info"===a.type&&q.postHSCopyVoicemailInfo(b).then(function(a){console.log(a)},function(a){console.log(a)})},c.showAudioModal=function(b,d){var e="";x.enableDebug&&console.log(b),x.enableDebug&&console.log(d);var f={type:d,url:e,description:"Temp",date:new Date,title:"Playing Audio File"},g=x.apiUrl?x.apiUrl:y.audioUrl;if("voicemail"===d){var h=c.visualVoicemail[b];"unread"===c.visualVoicemail[b].vm_status&&(c.visualVoicemail[b].vm_status="saved",q.getSaveVoicemail(h.visual_voicemail_uuid),c.unreadVoicemails--),e=g+"/imported/freeswitch/storage/voicemail/default/"+h.vm_file,x.enableDebug&&console.log(e),f.uuid=h.visual_voicemail_uuid,f.date=h.left_at,f.url=e,f.description="Voicemail From "+(h.contact?h.contact.contact_name_full:h.noncontact?h.noncontact.name:h.caller_id_number),f.title="Play Voicemail"}else"history-voicemail"===d?(console.log("HISTORY VOICEMAIL: ",b),e=g+b.voicemail_filepath,x.enableDebug&&console.log(e),f.date=b.start_stamp,f.url=e,f.description="Voicemail From "+(b.contact?b.contact.contact_name_full:null!=b.noncontact.name?b.noncontact.name:b.noncontact.phone),f.title="Play Voicemail"):"history-recording"===d?(e=g+b.recording_filepath,f.uuid=b.uuid,f.date=b.start_stamp,f.url=e,f.description="Call Recording "+(b.contact_name?"With "+b.contact_name:""),f.title="Play Recording"):"history-recording-manual"===d?(e=g+b.manual_recording_filepath,f.uuid=b.uuid,f.date=b.start_stamp,f.url=e,f.description="Call Recording "+(b.contact_name?"With "+b.contact_name:""),f.title="Play Recording"):"recording"===d?(e=g+b.recording_file,f.uuid=b.uuid,f.date=b.start_stamp,f.url=e,f.description="Call Recording "+(b.contact?"With "+b.contact.contact_name_full:b.noncontact&&b.noncontact.name?"With "+b.noncontact.name:""),f.title="Play Recording"):"ivr-greeting"===d?(e=g+"/imported/freeswitch/recordings/"+c.user.domain.domain_name+"/"+b,f.date=b.start_stamp,f.url=e,f.description="Auto Attendant Greeting",f.title="Play Greeting"):"voicemail-greeting1"===d?(e=g+"/imported/freeswitch/storage/voicemail/default/"+c.user.domain.domain_name+"/"+b.voicemail_id+"/"+b.greeting_filename,f.date="",f.url=e,f.description="Voicemail Greeting"+(b.greeting_name?": "+b.greeting_name:""),f.title="Play Greeting"):"robocall-recording"===d?(e=g+b,f.date=b.start_stamp,f.url=e,f.description="Robocall Recording",f.title="Play Recording"):"call-recording"===d?(e=g+b.recording_filepath,f.url=e,f.date=b.start_stamp,f.title="Play Auto Recording",f.description="Call Recording"):"call-recording-manual"===d?(e=g+b.manual_recording_filepath,f.url=e,f.date=b.start_stamp,f.title="Play Recording",f.description="Call Recording"):"voicemail-greeting"===d?(e=g+"/imported/freeswitch/storage/voicemail/default/"+c.user.domain.domain_name+"/"+c.user.user_ext+"/"+b.greeting_filename,f.url=e,f.title="Play Voicemail Greeting",f.description=""):(e=g+b,f.url=e,f.title="Play Recording",f.description="Call Recording");a.audio=new Audio(e),a.audio.volume=.8,console.log(f),c.showModalWithData("/modals/playaudio.html",f)},c.makeVideoCall=function(a){if(null!==a.contact_email_address){c.contactsUsr=[],c.contactsUsr.push(a);c.sendVideoCallInvites("icon")}},c.toTimestamp=function(a){var b=Date.parse(a);return b},c.sortby=function(a){x.enableDebug&&console.log("SORTING"),x.enableDebug&&console.log(a),c.predicateSort=a,c.reverseSort=!c.reverseSort},c.thumbDimensions=function(a,b){var c=new Image;if(c.src=a,c.width<=c.height){if("thumb"===b){var d=(120*c.height/c.width).toFixed(0);return"width: 120px; height: "+d+"px;"}if("preview"===b)return"max-height: 420px;"}else{if("thumb"===b){var e=(100*c.width/c.height).toFixed(0);return"height: 100px; width: "+e+"px;"}if("preview"===b)return"width: 100%; max-width: "+c.width+"px;"}};c.refresh=!1,x.disableAutoLogout||$(window).keydown(function(a){var b="";(a.keyCode>=65&&a.keyCode<=90||116==a.keyCode)&&(b=(a.metaKey?"-":"")+(a.ctrlKey?"Ctrl-":"")+(a.shiftKey?"Shift-":"")+String.fromCharCode(a.keyCode).toLowerCase(),c.show=b),116==a.keyCode?c.refresh=!0:116==a.keyCode&&a.ctrlKey?c.refresh=!0:82==a.keyCode&&a.ctrlKey?c.refresh=!0:82==a.keyCode&&a.ctrlKey&&a.shiftKey?c.refresh=!0:82==a.keyCode&&a.metaKey&&a.shiftKey?c.refresh=!0:82==a.keyCode&&a.metaKey&&(c.refresh=!0)})}]),proySymphony.controller("EmailEditorCtrl",["$scope","$rootScope","$http","$location","$sce","$uibModal","focus","$log","$timeout","$document","$uibModalStack","FileUploader","$filter","dataFactory","usefulTools","$window","__env","symphonyConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.editorContainerHeight=p.innerHeight-140;var s=function(a,b,c,d,e){var f=new XMLHttpRequest;if(q.enableDebug&&console.log(d),f.onreadystatechange=function(){if(4===f.readyState&&200===f.status){var a=JSON.parse(f.responseText);e(a)}},f.open(a,b,!0),c&&d)if("multipart/form-data"===d){var g=new FormData;for(var h in c)g.append(h,c[h]);c=g}else f.setRequestHeader("Content-type",d);f.send(c)},t=[{type:"unsubscribe",label:"SpecialLink.Unsubscribe",link:"http://[unsubscribe]/"},{type:"subscribe",label:"SpecialLink.Subscribe",link:"http://[subscribe]/"}],u=[{name:"tag 1",value:"[tag1]"},{name:"tag 2",value:"[tag2]"}],v=[{name:"content 1",value:"[content1]"},{name:"content 2",value:"[content1]"}],w={uid:"test1-clientside",container:"bee-plugin-container",autosave:15,language:"en-US",preventClose:!0,specialLinks:t,mergeTags:u,mergeContents:v,onSave:function(a,b){y(a,b)},onSaveAsTemplate:function(a){x(a)},onAutoSave:function(a){q.enableDebug&&console.log((new Date).toISOString()+" autosaving..."),window.localStorage.setItem("newsletter.autosave",a)},onSend:function(a){z(a)},onError:function(a){q.enableDebug&&console.log("onError ",a)}},x=function(a){var c={json:a,keywords:[],title:"Saved Template","public":"false"};b.showModalWithData("/autodialing/savetemplate.html",c)};b.saveAsTemplate=function(a){q.enableDebug&&console.log("SAVING AS TEMPLATE");var a={template_json:a.json,keywords:a.keywords,title:a.title,"public":a["public"]};b.saveEmailTemplate(a)},b.saveEmailTemplate=function(a){n.postUpdateEmailTemplate(a).then(function(a){q.enableDebug&&console.log("RESPONSE TO SAVE TEMPLATE"),q.enableDebug&&console.log(a),b.showalerts(a),a.data.success&&(b.availEmailTemplates||(b.availEmailTemplates=[]),b.availEmailTemplates.push(a.data.success.data),b.closeThisModal())},function(a){b.alerts.push({type:"danger",msg:"Failure: "+JSON.stringify(a)})})};var y=function(a,c){q.enableDebug&&console.log("SAVING EMAIL"),q.enableDebug&&console.log(b.editingScheduleUUID),q.enableDebug&&console.log(b.broadcast.schedules);var d=m("getByUUID")(b.broadcast.schedules,b.editingScheduleUUID,"robocall_schedule");q.enableDebug&&console.log(d),null!==d?b.saveHtmlEmail(a,c,d):b.alerts.push({type:"danger",msg:"Error: There was a problem saving your message."})},z=function(a){var c={html:a,recipients:[]};b.showModalWithData("/autodialing/sendtestemail.html",c)};b.sendTestEmail=function(a,c){q.enableDebug&&console.log(c);var d={html:a,email_addresses:c,from:b.user.email_address,broadcast_uuid:null};n.postSendTestEmail(d).then(function(a){b.showalerts(a)})};var A=null,B=function(a){var b=a.target.files[0],c=new FileReader;c.onload=function(){var a=c.result,b=JSON.parse(a);A.load(b)},c.readAsText(b)};document.getElementById("choose-template").addEventListener("change",B,!1),s("POST","https://auth.getbee.io/apiauth","grant_type=password&client_id=5fed7922-309b-4a16-a8c7-2dca741debce&client_secret=odCWtfCyLn9KTN8oiM14Got9LsTx4SqEOL5ELCe9SSiF1DtXZbh","application/x-www-form-urlencoded",function(a){BeePlugin.create(a,w,function(a){A=a,s("GET","https://rsrc.getbee.io/api/templates/m-bee",null,null,function(a){A.start(a)})})})}]),proySymphony.controller("FileSharingCtrl",["$scope","$rootScope","$http","$location","$sce","$uibModal","focus","$log","$timeout","fileService","$document","$uibModalStack","FileUploader","$filter","dataFactory","usefulTools","$window","__env","symphonyConfig","emailService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a){return a?b.displayContacts.filter(x(a)):b.displayContacts}function v(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function w(c){if(c&&"undefined"!==c){b.contactsSelected.push(c);var d=n("getIndexbyUUID")(b.displayContacts,c.contact_uuid);b.displayContacts.splice(d,1)}a.selectedItem=null}function x(a){var b=angular.lowercase(a);return function(a){return a.contact_name_full&&angular.lowercase(a.contact_name_full).indexOf(b)>=0?!0:a.contact_email_address&&a.contact_email_address.indexOf(b)>=0?!0:!1}}function y(){b.displayContacts=[];var a=b.userContacts;angular.forEach(a,function(a){b.displayContacts.push(a)})}console.log("Loading FileSharingCtrl"),b.displayContacts||(b.displayContacts=b.userContacts),a.fsTableHeight=q.innerHeight-300,a.perPage=20,a.maxSize=50,a.predicate="created_at",a.reverse=!0,a.currentPage=1,a.ppOptions=[10,20,50,100],a.isDisabled=!1,a.querySearch=u,a.selectedItemChange=w,b.contactsSelected=[],a.isEmailAddress=function(a){return v(a)},a.useEmailAddress=function(c){var d={contact_name_full:"",contact_email_address:c,contact_uuid:null};b.contactsSelected.push(d),a.selectedItem=null},a.copyShareToHawksoft=function(a){a.file_size=a.file.file_size,a.domain_uuid=b.user.domain_uuid,a.user_uuid=b.user.id,console.log(a),o.postHSCopyFileshare(a).then(function(a){console.log(a)},function(a){console.log(a)})},b.showTable=!1;var z=new Date;a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:new Date(2016,1,1),maxDate:z},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:a.fromDate,maxDate:z},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.ChangeToMinDate=function(c){if(null!=c){if(!a.toDate){var d=new Date(c);a.toDateOptions.minDate=d,a.toDate=d}var e=b.selectEmulateUser&&null!==b.selectEmulateUser?b.selectEmulateUser:b.user.id;j.getShares(e,a.fromDate,a.toDate)}},a.processToDate=function(c){null!=c&&(a.fromDate||(a.fromDate=new Date(c)),a.toDate=new Date(c));var d=b.selectEmulateUser&&null!==b.selectEmulateUser?b.selectEmulateUser:b.user.id;j.getShares(d,a.fromDate,a.toDate)},a.ChangeToMinDate(),a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},j.getShares(b.user.id),a.searchRecipients=function(b){if(!a.shareSearch||-1!=b.original_filename.toLowerCase().indexOf(a.shareSearch.toLowerCase())||b.noncontact&&b.noncontact.name&&-1!=b.noncontact.name.toLowerCase().indexOf(a.shareSearch.toLowerCase())||b.noncontact&&b.noncontact.phone&&-1!=b.noncontact.phone.toLowerCase().indexOf(a.shareSearch.toLowerCase())||b.noncontact&&b.noncontact.email&&-1!=b.noncontact.email.toLowerCase().indexOf(a.shareSearch.toLowerCase())||-1!=b.recipient_email.toLowerCase().indexOf(a.shareSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_given.toLowerCase().indexOf(a.shareSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_family.toLowerCase().indexOf(a.shareSearch.toLowerCase()))return!0;if(b.contact&&b.contact.phones.length>0){var c=!1;return angular.forEach(b.contact.phones,function(b){-1!=b.phone_number.indexOf(a.shareSearch)&&(c=!0)}),c}return!1},a.showFileShareModal=function(){a.msgEmailSent=!1,b.contactsSelected=[],y(),b.showModalWithData("/modals/filesharingmodal.html",{onClose:a.closeFileShareModal})},a.sortBy=function(b){a.predicate=b,a.reverse=!a.reverse},a.showFileName=function(a){var c="",d=a.uploadfile.original_filename;return a.uploadfile.original_filename.length>40&&(d=a.uploadfile.original_filename.substring(0,19)+" ... "+a.uploadfile.original_filename.substring(a.uploadfile.original_filename.length-19)),c='<a href="'+(r.apiUrl&&""!==r.apiUrl?r.apiUrl:s.onescreenUrl)+"/media/me-download-file/"+a.download_hash+"?token="+b.userToken+'" target="_blank" title="'+a.uploadfile.original_filename+'" >'+d+"</a><br />Size: "+a.uploadfile.file_size,e.trustAsHtml(c)},a.filterByMonth=function(b){return null!==a.monthStart&&null!==a.monthEnd&&(b.created_at<a.monthStart||b.created_at>a.monthEnd)?!1:!0},a.monthStart=null,a.monthEnd=null,a.limitDisplay=function(){a.monthStart=moment([0,0,1]).month(a.selectMonth.display).year(a.selectYear).format("YYYY-MM-DD"),a.monthEnd=moment([0,0,31]).month(a.selectMonth.display).year(a.selectYear).format("YYYY-MM-DD")},a.clearLimitDisplay=function(){a.monthStart=null,a.monthEnd=null,a.selectMonth=null,a.selectYear=null},a.shareExpired=function(a){var b=moment(a.expires_at),c=moment(),d=b.diff(c,"minutes");return 0>d?!0:!1},a.resendFileShareNotice=function(c,d){var e={shared_file_uuid:c,file_uuid:d,sender_name:b.user.contact_name_given+" "+b.user.contact_name_family,sender_email:b.user.email_address,sender_company:b.user.contact_organization,body:a.bodyMail};o.postResendFileNotice(e).then(function(a){b.showalerts(a)},function(a){r.enableDebug&&console.log(a)})},a.emailUsrs=[],a.bodyMail="",a.mailTo=[],a.chargerVal=function(b,c){r.enableDebug&&console.log("INPUT"),r.enableDebug&&console.log(b),r.enableDebug&&console.log(c),a.emailUsrs=!1,a.emailUsrs=[],a.usrSel=b,a.bodyMail=c,b.forEach(function(b){b.contact_name_full?a.emailUsrs.push({mail:b}):b.emails.email_address&&a.emailUsrs.push({mail:b.emails.email_address})}),a.emailUsrs.forEach(function(b){b.mail.emails?a.mailTo.push(b.mail.emails[0].email_address):b.mail.contact_name_full&&a.mailTo.push(b.mail.contact_name_full)})},a.contactSelectionType="file",b.closeFilterAlert=function(){b.alertError=""},a.sendCloudShareFile=function(c){var d={file_uuid:c.file_uuid,upload_type:"cloud",sender_name:b.user.contact_name_given+" "+b.user.contact_name_family,sender_email:b.user.email_address,sender_company:b.user.contact_organization,recipients:JSON.stringify(b.contactsSelected),body:a.contentEmail};o.fileUpload(d).then(function(c){r.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),r.enableDebug&&console.log(c),c.data.success?(b.contactsSelected=[],
a.msgEmailSent=!0):b.alertError=c.error.message})},b.focusonme=!0,b.sendingFile=!1;var A=a.uploader=new m({url:(r.apiUrl&&""!==r.apiUrl?r.apiUrl:s.onescreenUrl)+"/media/upload",queueLimit:1,headers:{Authorization:"Bearer "+b.userToken}});A.filters.push({name:"enforceMaxFileSize",fn:function(a){return a.size<=262144e3}}),A.filters.push({name:"enforceFileType",fn:function(a,b){var c=a.name.split("."),d=c[c.length-1].toLowerCase(),e="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return console.log(e+" "+d),"||"===e&&"rar"===d?!0:"||"===e?!1:-1==="|exe|javascript|x-msdownload|php|".indexOf(e)}}),A.onWhenAddingFileFailed=function(a,c,d){r.enableDebug&&console.info("onWhenAddingFileFailed",a,c,d),b.alertError="","enforceMaxFileSize"===c.name&&(b.alertError+="Problem Adding File: Max file size is 250MB."),"enforceFileType"===c.name&&(b.alertError+=(""!==b.alertError?", ":"")+"Problem Adding File: File Type Not allowed. (The following are allowable file types: pdf, odt, doc, docx, ppt, pptx, xls, xlsx, csv, txt, rtf, html, zip, mp3, mpg, flv, jpg, jpeg, png, gif, mp4, pub, m4a, mov, vts, vob, m4v, m2ts, dvr, 264, mp4, flv, bup, mts, psd, png, MOV, mpeg-4, tar.gz, gz, rar, targz, 7z, aak, bd)")},A.onAfterAddingFile=function(a){a.file.name=a.file.name.toLowerCase(),r.enableDebug&&console.info("onAfterAddingFile",a)},A.onAfterAddingAll=function(a){r.enableDebug&&console.info("onAfterAddingAll",a)},A.onBeforeUploadItem=function(c){r.enableDebug&&console.info("onBeforeUploadItem",c),r.enableDebug&&console.log(b.contactsSelected);var d={sender_name:b.user.contact_name_given+" "+b.user.contact_name_family,sender_email:b.user.email_address,sender_company:b.user.contact_organization,recipients:JSON.stringify(b.contactsSelected),body:a.contentEmail};r.enableDebug&&console.log(d),c.formData.push(d)},A.onProgressItem=function(a,b){r.enableDebug&&console.info("onProgressItem",a,b)},A.onProgressAll=function(a){r.enableDebug&&console.info("onProgressAll",a)},A.onSuccessItem=function(c,d,e,f){r.enableDebug&&console.info("onSuccessItem",c,d,e,f),r.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),r.enableDebug&&console.log(d),d.success?(b.contactsSelected=[],d.success.shares.forEach(function(a){a.created_at=moment.tz(a.created_at,"America/New_York"),b.user.settings.timezone&&(a.created_at=a.created_at.clone().tz(b.user.settings.timezone));var c=b.userContacts,d=b.nonContacts,e=n("getContactbyUUID")(c,a.contact_uuid);if(e)a.contact=e;else{var f={email:a.recipient_email,phone:null,name:a.recipient_name,color:randomColor({luminosity:"light"})},g=n("getNonContact")(d,f);g||(b.storeNonContact(f),g=f),a.noncontact=g}a.original_filename=a.uploadfile.original_filename,b.fileSharingList.push(a)}),a.msgEmailSent=!0):b.alertError=d.error.message},A.onErrorItem=function(a,b,c,d){r.enableDebug&&console.info("onErrorItem",a,b,c,d)},A.onCancelItem=function(a,b,c,d){r.enableDebug&&console.info("onCancelItem",a,b,c,d)},A.onCompleteItem=function(a,b,c,d){r.enableDebug&&console.info("onCompleteItem",a,b,c,d)},A.onCompleteAll=function(){r.enableDebug&&console.info("onCompleteAll"),A.queue.length=0},a.confCallsPartic=[],a.participant={},a.confCallsNotify=function(c,d,e){var f=0;b.userContacts.forEach(function(d){d.contact_user_uuid===c.contact_user_uuid&&(a.confCallsPartic.push(d),b.userContacts.splice(f,1),a.participant.contact_name_given=""),f++})},a.closeFileShareModal=function(){b.contactsSelected=[],b.selectedContacts={},l.dismissAll()},b.userCts=[],b.chgRst=!1,b.chargeCntsRST=function(){b.userContacts.forEach(function(a){var b="";a.phones&&a.phones.forEach(function(a){"Mobile"===a.phone_label&&(b=a.phone_number)}),a.contact_name_full=a.contact_name_given+" "+a.contact_name_family})},b.loadTags=function(a){return b.chgRst||(b.chargeCntsRST(),b.chgRst=!0),b.userContacts.filter(function(b){return-1!==b.contact_name_full.toLowerCase().indexOf(a.toLowerCase())})},a.startEmailClient=function(a){t.startEmailClient(a)}}]),proySymphony.controller("CloudFileCtrl",["$scope","$rootScope","fileService","cloudStorageService","userContactService","$window","$filter","moment","$timeout","usefulTools","__env","symphonyConfig","dataFactory","$uibModalStack","FileUploader",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(b){-1!==b.folder_name.toLowerCase().indexOf(a.cloud.searchText.toLowerCase())&&a.cloud.foldersFound.push(b),b.files.length>0&&q(b.files);for(var c=0;c<b.folders.length;c++)p(b.folders[c])}function q(b){var c=a.cloud.searchText;angular.forEach(b,function(b){var d=!1;-1!==b.original_filename.toLowerCase().indexOf(c.toLowerCase())&&(d=!0),b.file_description&&-1!==b.file_description.toLowerCase().indexOf(c.toLowerCase())&&(d=!0),b.file_caption&&-1!==b.file_caption.toLowerCase().indexOf(c.toLowerCase())&&(d=!0),d&&a.cloud.filesFound.push(b)})}angular.element(".main-container").attr("style","overflow-y: hidden;"),a.cloud={searchText:null,foldersFound:[],filesFound:[]},a.showSearchBox=!1,a.ulList=[],a.doCloudSearch=function(b){a.cloud.foldersFound=[],a.cloud.filesFound=[],a.showSearchBox=!0;var c=d.userRootFolder;console.log(a.ulList),console.log(c),p(c),console.log(a.cloud)},a.onClose=function(){var a=n.getTop();console.log(a),a&&n.dismiss(a.key)},a.clearFilter=function(){a.search.contact_name_full=""},a.closeSearch=function(){a.showSearchBox=!1,a.cloud.foldersFound=[],a.cloud.filesFound=[],b.$broadcast("clear.hightlight.file")},a.getFolderType=function(a){return"true"!=a.shared_folder&&"true"!=a.is_protected?"folder":"true"===a.is_protected&&"true"!==a.is_mobile_upload?"protected":a.user_uuid===b.user.id?"shared":a.user_uuid!==b.user.id?"owned":null},a.getFileType=function(a){return c.getFileTypeByMimeType(a.file_mime_type)},a.goToFolder=function(a){console.log(a),b.$broadcast("open.search.folder",a)},a.goToFile=function(a){var c=d.userRootFolder,e=d.getFolderByUuid(c,a.parent_folder_uuid),f={file:a,parent:e};b.$broadcast("show.search.file",f)},d.getUserRootFolder(b.user.id).then(function(b){b&&(a.userRootFolder=b)});var r=new o({url:b.onescreenBaseUrl+"/cloud/upload",headers:{Authorization:"Bearer "+b.userToken}});a.uploader=r,a.getTotalSpaceUsed=function(){var a=d.getTotalSpaceUsed();return d.getAppropriateFileSizeFromB(a,1)},a.userLimit=function(){var a=1e6*parseFloat(b.user.symphony_domain_settings.limit_storage_user);return d.getAppropriateFileSizeFromB(a,0)},a.domainUsage=function(){return d.getAppropriateFileSizeFromB(parseFloat(b.user.domainCloudStorageUsage),1)},a.domainLimit=function(){var a=1e6*parseFloat(b.user.symphony_domain_settings.limit_storage_user)*e.countUsers();return d.getAppropriateFileSizeFromB(a,0)},a.contactSelectionType="cloudlink",a.doSendLink=function(c){var d={link:c.link,contacts:b.contactsSelected,message:a.contentEmail,bridgeUrl:k.symphonyUrl&&""!==k.symphonyUrl?k.symphonyUrl:l.symphonyUrl};console.log(d),m.postSendCloudShareLink(d).then(function(c){c.data.success?(b.showSuccessAlert(c.data.success.message),b.closeThisModal()):(console.log(c.data.error.message),a.alertError=c.data.error.message)}),console.log(d)},a.storeFolderPermissions=function(c,e){k.enableDebug&&console.log(e);var f={folder_uuid:e.folder_uuid,permissions:c};k.enableDebug&&console.log(f),n.dismissAll(),d.numFoldersUpdatingPerms+=1,m.postUpdateFolderPermissions(f).then(function(c){if(b.showalerts(c),d.numFoldersUpdatingPerms-=1,c.data.success){a.root=e.parent;var f=g("getByUUID")(a.root.folders,e.folder_uuid,"folder");null!=f&&(a.root.folders[f].permissions=c.data.success.permissions,a.root.folders[f].shared_folder=c.data.success.shared_folder)}},function(a){k.enableDebug&&console.log(a)})},a.hasPermission=function(a,b){var c="none";return angular.forEach(a,function(a){a.user_uuid==b&&(c=a.permission)}),c},a.folderPerms=[],a.isPermGroupMember=function(a,c,d){if(null!==a){var e=b.permissionsGroups[a][d+"s"],f=!1;return angular.forEach(e,function(a){a.user_uuid===c&&(f=!0)}),f}return!1}}]),proySymphony.controller("PublicCloudCtrl",["$scope","$http","fileService","$cookies","$routeParams","$location","FileUploader","$interval","$auth","__env","dataFactory","usefulTools","symphonyConfig","$window","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){var b={linkhash:e.linkhash,thefiles:JSON.stringify(a.uploadedFiles)};k.postSendPublicUploadNotification(b).then(function(a){j.enableDebug&&console.log(a.data)})}function q(a,b){var d,e,f,g,h;if(a.clipboardData&&a.clipboardData.items)for(var i=0;i<a.clipboardData.items.length;i++)d=a.clipboardData.items[i],d.getAsFile()&&(e=d.getAsFile(),f=moment().format("YYYY-M-D H-m"),g=c.getFileTypeByMimeType(e.type),h=new File([e],"Image Pasted at "+f+"."+g,{type:e.type}),b.addToQueue(h))}if(j.enableDebug&&console.log("ROUTEPARAMS"),j.enableDebug&&console.log(e),e.linkhash){a.showNoHash=!1,a.messages=[],a.contactInfo={firstName:null,lastName:null,emailAddress:null,company:null,rememberMe:!1},a.ipInfo=n.localStorage.getItem("userIPInfo")?JSON.parse(n.localStorage.getItem("userIPInfo")):null,j.enableDebug&&console.log(a.ipInfo),k.getPublicLinkDetails(e.linkhash).then(function(b){b.data.success?(j.enableDebug&&console.log(b.data.success.data),a.linkInfo=b.data.success.data,"true"===a.linkInfo.requireName?(a.showContactInfo=!0,a.showDropZone=!1,d.get("publicCloudFirstName")&&(j.enableDebug&&console.log("USING COOKIE"),a.contactInfo.firstName=d.get("publicCloudFirstName"),a.contactInfo.lastName=d.get("publicCloudLasstName"),a.contactInfo.emailAddress=d.get("publicCloudEmailAddress"),a.contactInfo.company=d.get("publicCloudCompany"),a.contactInfo.rememberMe=d.get("publicCloudRememberMe"),a.showContactInfo=!1,a.showDropZone=!0)):(a.showContactInfo=!1,a.showDropZone=!0)):a.invalidHash=b.data.error.message}),a.editContactInfo=function(){a.showContactInfo=!0,a.showDropZone=!1},a.showDropZoneArea=function(b){b.rememberMe&&(j.enableDebug&&console.log("SETTING COOKIE"),d.put("publicCloudFirstName",b.firstName),d.put("publicCloudLasstName",b.lastName),d.put("publicCloudEmailAddress",b.emailAddress),d.put("publicCloudCompany",b.company),d.put("publicCloudRememberMe",b.rememberMe)),j.enableDebug&&console.log(a.contactInfo),a.showContactInfo=!1,a.showDropZone=!0},a.showIcon=function(a){var b=a.split(".");b[b.length-1].toLowerCase();return c.getFileTypeByMimeType(file.file_mime_type)},a.getFileType=function(a){return c.getFileTypeByMimeType(a.type)};var r=a.uploader=new g({url:o.onescreenBaseUrl+"/cloud/public/upload",alias:"file"});a.handlePaste=function(a){q(a,r)},a.uploadedFiles=[],a.$watch("uploader.queue.length",function(b,c){b>0&&(a.showUploadingFiles=!0),0===b&&(a.showUploadingFiles=!1)}),r.onWhenAddingFileFailed=function(a,b,c){j.enableDebug&&console.info("onWhenAddingFileFailed",a,b,c)},r.onAfterAddingFile=function(a){j.enableDebug&&console.info("onAfterAddingFile",a)},r.onAfterAddingAll=function(a){j.enableDebug&&console.info("onAfterAddingAll",a)},r.onBeforeUploadItem=function(b){var c={linkhash:e.linkhash,public_cloud_link_uuid:a.linkInfo.public_cloud_link_uuid,ipInfo:JSON.stringify(a.ipInfo),contactInfo:"true"===a.linkInfo.requireName?JSON.stringify(a.contactInfo):null};b.formData.push(c),j.enableDebug&&console.info("onBeforeUploadItem",b)},r.onProgressItem=function(a,b){j.enableDebug&&console.info("onProgressItem",a,b)},r.onProgressAll=function(a){j.enableDebug&&console.info("onProgressAll",a)},r.onErrorItem=function(a,b,c,d){j.enableDebug&&j.enableDebug&&console.log("ERROR RESPONSE FROM UPLOADING AVATAR"),j.enableDebug&&j.enableDebug&&console.log(b),j.enableDebug&&console.info("onErrorItem",a,b,c,d)},r.onCancelItem=function(a,b,c,d){j.enableDebug&&console.info("onCancelItem",a,b,c,d),r.clearQueue()},r.onCompleteItem=function(a,b,c,d){j.enableDebug&&console.info("onCompleteItem",a,b,c,d),j.enableDebug&&console.log(b)},r.onSuccessItem=function(b,c,d,e){j.enableDebug&&j.enableDebug&&console.log("RESPONSE FROM UPLOADING FILES"),j.enableDebug&&j.enableDebug&&console.log(c),c.error?o.alerts.push({error:!0,message:c.error.message}):a.uploadedFiles.push(c.success.data),j.enableDebug&&console.info("onSuccessItem",b,c,d,e)},r.onCompleteAll=function(){j.enableDebug&&console.info("onCompleteAll"),r.clearQueue(),j.enableDebug&&console.log(a.uploadedFiles),a.messages.push({"class":"info",message:a.uploadedFiles.length+" file"+(a.uploadedFiles.length>1?"s were":" was")+" uploaded"}),"true"===a.linkInfo.sendEmail&&p(),a.uploadedFiles=[]}}else a.showNoHash=!0}]),proySymphony.controller("CallRecordingCtrl",["$scope","$rootScope","$window","dataFactory","usefulTools","$filter","symphonyConfig","userContactService",function(a,b,c,d,e,f,g,h){a.vvmTableHeight=c.innerHeight-300,a.perPage=20,a.maxSize=50,a.predicate="start_stamp",a.reverse=!0,a.currentPage=1,a.filtered={},b.callRecordings=[],a.ppOptions=[10,20,50,100],b.nonContacts||(b.nonContacts=JSON.parse(c.localStorage.getItem("nonContacts"))),b.userContacts||(b.userContacts=JSON.parse(c.localStorage.getItem("userContacts"))),b.showTable=!1,a.showChevron=function(b){return e.showChevron(b,a.predicate,a.reverse)},b.getRecordedCalls=function(a){d.getRetrieveRecordingslList(a).then(function(d){if(d.data.success){__env.enableDebug&&console.log("RECORDED CALLS"),__env.enableDebug&&console.log(d.data.success.data);var e=b.userContacts,g=b.nonContacts;a!==b.user.id&&(e=b.emulatedUserContacts,g=b.emulatedNonContacts),b.callRecordings=d.data.success.data,angular.forEach(b.callRecordings,function(c){if(c.message_length=parseInt(c.duration),c.contact_uuid&&(c.contact=f("getItemByUUID")(e,c.contact_uuid,"contact"),c.contact&&(c.isContact=!0,c.contact_name=c.contact.contact_name_full,"outbound"===c.call_direction&&(c.contact_number=c.destination_number),"inbound"===c.call_direction&&(c.contact_number=c.caller_id_number))),("10000"==c.destination_number||c.destination_number=="1"+c.caller_id_number||c.destination_number=="10"+c.caller_id_number)&&(c.contact_name="Conference Call"),!c.contact){var d;if("outbound"===c.call_direction&&(d=c.destination_number),"inbound"===c.call_direction&&(d=c.caller_id_number),c.contact_number=d,c.contact=f("getContactbyExtension")(e,c.number),c.contact&&(c.contact_name=c.contact.contact_name_full),!c.contact&&(c.contact=f("getContactbyPhone")(e,d),c.contact&&(c.contact_name=c.contact.contact_name_full),!c.contact)){var h={user_uuid:a,email:null,phone:d,name:null,color:randomColor({luminosity:"dark"})},i=null!==g?f("getNonContact")(g,h):null;i?(c.noncontact=i,c.contact_name="Conference Call"!==c.contact_name?c.noncontact.name?c.noncontact.name:null:c.contact_name):(b.storeNonContact(h),c.noncontact=h)}}}),__env.enableDebug&&console.log("CALL RECORDINGS"),__env.enableDebug&&console.log(b.callRecordings),b.showTable=!0,a===b.user.id&&c.localStorage.setItem("callRecordings",JSON.stringify(b.callRecordings))}},function(a){__env.enableDebug&&console.log("RECORDINGS ERROR"),__env.enableDebug&&console.log(a)})},h.registerOnContactLoadCallback(function(){b.getRecordedCalls(b.user.id)}),a.playingRecording=null,a.audioUrl=function(a){return g.audioUrl+a},a.searchRecordinga=function(b){if(!a.filterSearch||b.vm_transcript&&-1!=b.vm_transcript.toLowerCase().indexOf(a.filterSearch.toLowerCase())||b.noncontact&&b.noncontact.name&&-1!=b.noncontact.name.toLowerCase().indexOf(a.filterSearch.toLowerCase())||b.noncontact&&b.noncontact.phone&&-1!=b.noncontact.phone.toLowerCase().indexOf(a.filterSearch.toLowerCase())||b.contact&&b.contact.extension&&-1!=b.contact.extension.toLowerCase().indexOf(a.filterSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_given.toLowerCase().indexOf(a.filterSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_family.toLowerCase().indexOf(a.filterSearch.toLowerCase()))return!0;if(b.contact&&b.contact.phones.length>0){var c=!1;return angular.forEach(b.contact.phones,function(b){-1!=b.phone_number.indexOf(a.filterSearch)&&(c=!0)}),c}return!1},a.copyRecordingToHawksoft=function(a){console.log(a);var c={call_history_fs_uuid:a.call_history_fs_uuid,uuid:a.onescreen_uuid,type:"recording"};b.copyToHawksoft(c)},b.playRecording=function(c){"unread"===b.callRecordings[c].vm_status&&(b.callRecordings[c].vm_status="saved",d.getSaveRecording(b.callRecordings[c].visual_voicemail_uuid),b.unreadRecordings--);var e=b.callRecordings[c];a.audio&&a.audio.pause(),a.audio=new Audio(g.audioUrl+"/imported/freeswitch/storage/voicemail/default/"+e.vm_file),a.playingRecording=c,a.audio.play()},b.stopRecording=function(){a.audio.pause(),a.playingRecording=null,a.audioPlaying=!1},a.removeRecording=function(a){d.removeRecording(a).then(function(c){b.showalerts(c);var d=f("getByUUID")(b.callRecordings,a,"call_history_fs");c.data.success&&null!==d&&b.callRecordings.splice(d,1)},function(a){__env.enableDebug&&console.log(a)})},a.setPage=function(b){a.currentPageVVM=b},a.sort_by=function(b){b===a.predicate?a.reverse=!a.reverse:a.predicate=b},a.getIcon=function(b){return b===a.predicate?a.reverse?"glyphicon-chevron-down":"glyphicon-chevron-up":"glyphicon-chevron-down"};var i=new Date;a.fromDate="",a.toDate="",a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,minDate:new Date(2016,1,1),maxDate:i},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,maxDate:i},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.ChangeToMinDate=function(b){if(null!=b){var c=new Date(b);a.toDateOptions.minDate=c,a.toDate=c}},a.ChangeToMinDate(),a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},a.dateFilter=function(b,c,d){var e=a.fromDate?moment(a.fromDate):null;a.toDate?moment(a.toDate):null;return e&&e>b.start_stamp?!1:a.toDate&&a.toDate<b.start_stamp?!1:!0},a.convertTime=function(a){var b=Math.floor(3600*parseInt(a.slice(0,2))),c=Math.floor(3600*parseInt(a.slice(3,5))/60),d=parseInt(a.slice(6,8));console.log("hh: ",b," mm: ",c," ss: ",d);var e=b+c+d;return e},a.durationFormat=function(b,c,d){b=parseInt(b),c=c.slice(11),d=d.slice(11),c=a.convertTime(c),d=a.convertTime(d);var e=b+c,f=d-e;return console.log("CallTIme: "+b),console.log("StartTime: "+c),console.log("CreatedAt: "+d),f}}]),proySymphony.controller("ScreenShareCtrl",["$scope","$uibModal","$uibModalStack","$rootScope","__env","symphonyConfig","dataFactory","$filter","$window","Slug","clipboard","$cookies","videoConfService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b){g.getVideoArchives(b,"share").then(function(b){console.log(b),b.data.error?console.log(b.data.error.message):a.videoArchives=b.data.success.data},function(a){console.log(a)})}a.videoArchives=[],a.symphonyConfig=f,a.symphonyURL=e.symphonyUrl&&""!==e.symphonyUrl?e.symphonyUrl:f.symphonyUrl,a.ssUrl=e.ssUrl&&""!==e.ssUrl?e.ssUrl:f.ssUrl,d.nonContacts||(d.nonContacts=JSON.parse(i.localStorage.getItem("nonContacts"))),k.supported||e.enableDebug&&console.log("Sorry, copy to clipboard is not supported"),a.init=function(){d.videoConference={},a.conference=m.shareConferenceInitial,m.resetInitial("share"),a.clipboardCopy=a.ssUrl+"/"+a.conference.room,d.videoConference=a.conference,a.urlNotAvailable=!1,d.showTable=function(){return m.roomBeingRetrieved("video")}},a.init(),a.viewArchive=function(b){var c=a.videoArchives[b],g=(e.audioUrl&&""!==e.audioUrl?e.audioUrl:f.audioUrl)+"/imported/freeswitch/recordings/"+d.user.domain.domain_name+"/video/"+c.archivetime+"--"+c.tokbox_uuid+".mp4";c.publicurl=g,c.screenshareArchive=!0,d.showModalFull("/video/playrecording.html",c,"")},a.removeArchive=function(b){g.getRemoveArchive(a.videoArchives[b].tokbox_conference_archive_uuid).then(function(c){d.showalerts(c),c.data.success&&a.videoArchives.splice(b,1)})},a.copyConferenceToHawksoft=function(a){var b={uuid:a.tokbox_conference_archive_uuid,type:"videoconference"};d.copyToHawksoft(b)},n(d.user.id),a.clickHandler=function(){a.clipboardCopy=a.ssUrl+"/"+a.conference.room,k.copyText(a.clipboardCopy),d.alerts.push({success:!0,message:"Your info has been copied to your clipboard "})},a.isRoomAvailable=function(){a.conference.room=j.slugify(a.conference.room),a.conference.room.length<3?(a.urlNotAvailable=!0,a.availMessage="Min of 3 Chars"):m.isRoomAvailable(a.conference.room,"share").then(function(b){b.status?a.urlNotAvailable=!1:(a.urlNotAvailable=!0,a.availMessage="Not Available")})},a.joinConference=function(){a.conference&&a.conference.room&&m.openConference(a.ssUrl+"/"+a.conference.room)},a.closeVideoCallModal=function(){d.addedInvitees=[],a.invitee={};var b=c.getTop();b&&c.dismiss(b.key)},a.removeInvitation=function(a){var b={video_conference_invite_uuid:d.videoConference.participants[a].video_conference_invite_uuid};e.enableDebug&&console.log(b),e.enableDebug&&console.log(d.videoConference),e.enableDebug&&console.log("index "+a),g.postDisableVideoConferenceInvite(b).then(function(b){e.enableDebug&&console.log(b),d.showalerts(b),b.data.success&&d.videoConference.participants.splice(a,1)})},a.resetAdminLink=function(){g.getResetVideoConferenceAdminLink().then(function(a){if(e.enableDebug&&console.log(a),d.showalerts(a),a.data.success){d.videoConference.moderator_hash=a.data.success.data;var b=h("getVCInviteIndexbyUUID")(d.videoConference.participants,d.videoConference.mod_invite_uuid);d.videoConference.participants[b].invite_hash=a.data.success.data}})},a.resendInvitation=function(a){var b={video_conference_invite_uuid:d.videoConference.participants[a].video_conference_invite_uuid,sender_name:d.user.contact_name_given+" "+d.user.contact_name_family,sender_email:d.user.email_address,sender_company:d.user.contact_organization,redirect_path:(e.symphonyUrl&&""!==e.symphonyUrl?e.symphonyUrl:f.symphonyUrl)+"/video"};e.enableDebug&&console.log(b),g.postResendVideoConferenceInvite(b).then(function(b){e.enableDebug&&console.log(b),d.showalerts(b),b.data.success&&(d.videoConference.participants[a].invite_hash=b.data.success.data)})},a.sendVideoInvites=function(a){d.contactsUsr=a&&a.messageContacts?a.messageContacts:null,d.videoInviteBody=a&&a.videoInviteBody?a.videoInviteBody:"",d.sendVideoCallInvites("modal")},a.sortBy=function(b){a.category===b?a.sortDirection=!a.sortDirection:(a.sortDirection=!1,a.category=b)},a.showChevronUp=function(b){return a.category===b&&a.sortDirection},a.showChevronDown=function(b){return a.category!==b||!a.sortDirection}}]),proySymphony.controller("CommunicationsCtrl",["$scope","$filter","$sce","smsApi","$rootScope","$routeParams","smsService","fileService","callHistoryService","symphonyConfig","ngAudio","$location","$window","dataFactory",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){e.userContacts||(e.userContacts=JSON.parse(m.localStorage.getItem("userContacts"))),console.log(a.searchcontact),a.copyingToHs={},a.perPage=20,a.maxSize=50,a.currentPage=1,a.ppOptions=[10,20,50,100];var o=new Date;a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:new Date(2016,1,1),maxDate:o},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:a.fromDate,maxDate:o},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.changeToMinDate=function(b){if(null!=b){if(!a.toDate||a.toDate<b){var c=new Date(b);a.toDateOptions.minDate=c,a.toDate=c}a.doSearch()}},a.processToDate=function(b){null!=b&&((!a.fromDate||a.fromDate>b)&&(a.fromDate=new Date(b)),a.toDate=new Date(b)),a.doSearch()},a.fromDate=new Date(moment().subtract(30,"days")),a.toDate=new Date,a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},a.search||(a.search={},a.search.channel||(a.search.channel={},a.search.channel.texts=!0,a.search.channel.calls=!0),e.contactCommSearch&&(a.search.contact_uuid=e.contactCommSearch.contact_uuid),console.log(a.search),console.log(e.contactCommSearch)),e.callHistory={user_uuid:e.user.id,fromDate:"",toDate:""},a.display={calls:!1,texts:!1,chats:!1,fileshares:!1,videos:!1,faxes:!1},a.showList=!1,a.predicate={all:"date",fax:"sent_at",sms:"sent_at",call:"start_stamp",fileshare:"created_at"},a.reverse={all:!0,fax:!0,sms:!0,call:!0,fileshare:!0},a.sortAllBy=function(b){a.predicate.all=b,a.reverse.all=!a.reverse.all},a.sortSmsBy=function(b){a.predicate.sms=b,a.reverse.sms=!a.reverse.sms},a.sortCallBy=function(b){a.predicate.call=b,a.reverse.call=!a.reverse.call},a.sortFileBy=function(b){a.predicate.fileshare=b,a.reverse.fileshare=!a.reverse.fileshare},a.sortFaxBy=function(b){a.predicate.fax=b,a.reverse.fax=!a.reverse.fax},a.doSearch=function(){a.display={calls:!1,texts:!1,chats:!1,fileshares:!1,videos:!1,faxes:!1},console.log(a.display);var c=e.user.id;a.showList=!1,a.searching=!0,a.showTextTable=!1,a.showFileTable=!1,a.showCallTable=!1,a.showChatTable=!1,a.showFaxTable=!1,console.log(a.search);var f=b("getItemByUUID")(e.userContacts,a.search.contact_uuid,"contact"),g=[];if(a.search.channel.texts){var j={user_uuid:c,contact_uuid:a.search.contact_uuid?a.search.contact_uuid:null,searchtest:a.search.filterText,from_date:a.fromDate,to_date:a.toDate};console.log(j),d.postSearchMasterSmsMessages(j).then(function(c){console.log(c.data),c.data.success?(angular.forEach(c.data.success.data,function(a){a.to_contact_uuid&&(a.to_contact=b("getItemByUUID")(e.userContacts,a.to_contact_uuid,"contact")),a.from_contact_uuid&&(a.from_contact=b("getItemByUUID")(e.userContacts,a.from_contact_uuid,"contact")),g.push({date:a.created_at,type:"sms",data:a})}),a.masterDisplayMessages=c.data.success.data):(console.log(c.data.error.message),a.masterDisplayMessages=[]),a.showTextTable=!0,a.showSms=!0,a.display.texts=!0})}a.search.channel.fileshares&&(a.fileShareList=[],h.getShares(c,new Date(a.fromDate),new Date(a.toDate)).then(function(b){console.log(b),b.shareList&&(a.search.contact_uuid?angular.forEach(b.shareList,function(b){b.recipient_email===f.contact_email_address&&a.fileShareList.push(b)}):a.fileShareList=b.shareList,angular.forEach(a.fileShareList,function(a){g.push({date:a.created_at,type:"fileshare",data:a})})),a.showFileTable=!0,a.showFs=!0,a.display.fileshares=!0})),a.search.channel.faxes&&(a.faxList=[],n.getFaxMessages(c).then(function(b){console.log("FAXING"),console.log(b.data),b.data&&b.data.success&&(a.faxList=b.data.success.data.message,angular.forEach(a.faxList,function(a){g.push({date:a.created_at,type:"fax",data:a})})),a.showFaxTable=!0,a.showFaxes=!0,a.display.faxes=!0})),a.search.channel.calls&&(e.callHistory.user_uuid=c,e.callHistory.fromDate=new Date(a.fromDate),e.callHistory.toDate=new Date(a.toDate),e.callHistory.contact_uuid=a.search.contact_uuid,i.getCallHistory().then(function(b){a.contactCallHistory=b,angular.forEach(b,function(a){g.push({date:a.start_stamp,type:"call",data:a})}),a.showCallTable=!0,a.showCalls=!0,a.display.calls=!0})),a.communicationsList=g,console.log("COMMUNICATIONS"),console.log(g)},a.watchCollectionLog=[],a.$watchCollection("display",function(b,c){(a.search.channel.calls&&b.calls||!a.search.channel.calls)&&(a.search.channel.fileshares&&b.fileshares||!a.search.channel.fileshares)&&(a.search.channel.texts&&b.texts||!a.search.channel.texts)&&(a.search.channel.videos&&b.videos||!a.search.channel.videos)&&(a.search.channel.faxes&&b.faxes||!a.search.channel.faxes)&&(a.search.channel.chats&&b.chats||!a.search.channel.chats)&&(a.searching=!0,a.showList=!0),console.log(b),console.log(c)}),a.exportFilteredToHawksoft=function(b){var c=[];a.copyingToHs={status:!0,message:"Exporting communications."},angular.forEach(b,function(a){var b={};"sms"===a.type?b={uuid:a.data.message_uuid,type:a.type,date:a.date,contact_uuid:a.data.to_contact?a.data.to_contact.contact_uuid:a.data.from_contact?a.data.from_contact.contact_uuid:null}:"call"===a.type?b={uuid:a.data.call_history_fs_uuid,type:a.type,date:a.date,contact_uuid:a.data.contact?a.data.contact.contact_uuid:null,call_status:a.data.call_status,duration:a.data.duration,direction:a.data.call_direction,caller_id_number:a.data.caller_id_number,destination_number:a.data.destination_number,voicemail_filepath:a.data.voicemail_filepath,recording_filepath:a.data.recording_filepath,manual_recording_filepath:a.data.manual_recording_filepath}:"fax"===a.type?b={uuid:a.data.message_uuid,type:a.type,date:a.date,contact_uuid:a.data.contact?a.data.contact.contact_uuid:null,direction:a.data.direction,original_filename:a.data.original_filename,status:a.data.status,source_number:a.data.source_number,destination_number:a.data.destination_number}:"fileshare"===a.type?b={uuid:a.data.message_uuid,type:a.type,date:a.date,direction:"Out",contact_uuid:a.data.contact?a.data.contact.contact_uuid:null,recipient_email:a.data.recipient_email,original_filename:a.data.file.original_filename,file_size:a.data.file.file_size,downloaded_at:a.data.downloaded_at}:"chat"===a.type&&(b={}),c.push(b)}),console.log(c);var d={results:JSON.stringify(c),fromDate:a.fromDate,toDate:a.toDate,search:a.search,user_uuid:e.user.id,domain_uuid:e.user.domain.domain_uuid};console.log(d),n.postCopyConversations(d).then(function(b){console.log(b),e.showSuccessAlert(c.length+" Entries were exported."),e.copySelected={},a.enableCopyMode=!1,a.copyingToHs={}},function(a){console.log(a)})},a.searchAll=function(b){return"sms"===b.type?a.searchTexts(b):"fileshare"===b.type?a.searchFileshares(b):"call"===b.type?a.searchCalls(b):"fax"===b.type?a.searchFax(b):"video"===b.type?a.searchVideo(b):"chat"===b.type?a.searchChat(b):void 0},a.searchTexts=function(b){return b.data&&(b=b.data),!a.search.filterText||b.from_contact&&"in"===b.message_direction&&-1!==b.from_contact.contact_name_full.toLowerCase().indexOf(a.search.filterText.toLowerCase())||b.to_contact&&"out"===b.message_direction&&-1!==b.to_contact.contact_name_full.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.from_number.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.to_number.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.message.toLowerCase().indexOf(a.search.filterText.toLowerCase())?!0:!1},a.searchFax=function(b){return b.data&&(b=b.data),!a.search.filterText||b.contact&&-1!==b.contact.contact_name_full.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.destination_number.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.source_number.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.original_filename.toLowerCase().indexOf(a.search.filterText.toLowerCase())?!0:!1},a.searchFileshares=function(b){return b.data&&(b=b.data),!a.search.filterText||b.contact&&-1!==b.contact.contact_name_full.toLowerCase().indexOf(a.search.filterText.toLowerCase())||b.contact&&-1!==b.contact.contact_email_address.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.recipient_email.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.original_filename.toLowerCase().indexOf(a.search.filterText.toLowerCase())?!0:!1},a.searchCalls=function(b){return b.data&&(b=b.data),!a.search.filterText||b.contact&&-1!==b.contact.contact_name_full.toLowerCase().indexOf(a.search.filterText.toLowerCase())||b.contact&&-1!==b.contact.contact_email_address.toLowerCase().indexOf(a.search.filterText.toLowerCase())||-1!==b.contact_number.toLowerCase().indexOf(a.search.filterText.toLowerCase())?!0:!1},a.showFileName=function(a){var b="",d=a.uploadfile.original_filename;return a.uploadfile.original_filename.length>25&&(d=a.uploadfile.original_filename.substring(0,10)+" ... "+a.uploadfile.original_filename.substring(a.uploadfile.original_filename.length-10)),b='<a href="'+(__env.apiUrl&&""!==__env.apiUrl?__env.apiUrl:j.onescreenUrl)+"/media/me-download-file/"+a.download_hash+"?token="+e.userToken+'" target="_blank" title="'+a.uploadfile.original_filename+'" tooltip-placement="bottom" uib-tooltip="'+e.tips.fileshare.downloadfile+'">'+d+"</a><br />Size: "+a.uploadfile.file_size,c.trustAsHtml(b)},a.showFaxFile=function(a){var b="";return null!==a&&(b=a.original_filename,a.original_filename.length>35&&(b=a.original_filename.substring(0,17)+" ... "+a.original_filename.substring(a.original_filename.length-17))),b},a.viewMessageImage=function(a){n.getFaxImage(a).then(function(a){__env.enableDebug&&console.log("FAX IMAGE"),
__env.enableDebug&&console.log(a.data.success.data.original_filename);var b=a.data.success.data.original_filename.split("."),c=b[b.length-1],d="data:"+getMimetypeByFiletype(c)+";base64, "+a.data.success.data.file;"jpg"===c?e.showModalWithData("/fax/viewfaximage.html",{obj:d}):"pdf"===c?m.open(d):(angular.element("#download_link").attr("href",d),angular.element("#download_link").attr("download",a.data.success.data.original_filename),angular.element("#download_link")[0].click())})},a.shareExpired=function(a){var b=moment(a.expires_at),c=moment(),d=b.diff(c,"minutes");return 0>d?!0:!1}}]),proySymphony.controller("VideoConferenceCtrl",["$scope","$uibModal","$uibModalStack","$rootScope","__env","symphonyConfig","dataFactory","$filter","$window","Slug","clipboard","$cookies","videoConfService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(b){g.getVideoArchives(b,"video").then(function(b){console.log("VIDEO ARCHIVES"),console.log(b),b.data.error?console.log(b.data.error.message):a.videoArchives=b.data.success.data},function(a){console.log(a)})}a.videoArchives=[],a.symphonyConfig=f,a.symphonyURL=e.symphonyUrl&&""!==e.symphonyUrl?e.symphonyUrl:f.symphonyUrl,a.vcUrl=e.vcUrl&&""!==e.vcUrl?e.vcUrl:f.vcUrl,d.nonContacts||(d.nonContacts=JSON.parse(i.localStorage.getItem("nonContacts"))),k.supported||console.log("Sorry, copy to clipboard is not supported"),a.copyConferenceToHawksoft=function(a){var b={uuid:a.tokbox_conference_archive_uuid,type:"videoconference"};d.copyToHawksoft(b)},a.init=function(){d.videoConference={},a.conference=m.videoConferenceInitial,a.clipboardCopy=a.vcUrl+"/"+a.conference.room,d.videoConference=a.conference,a.urlNotAvailable=!1,d.showTable=function(){return m.roomBeingRetrieved("video")}},a.init(),n(d.user.id),a.clickHandler=function(){a.clipboardCopy=a.vcUrl+"/"+a.conference.room,k.copyText(a.clipboardCopy),d.alerts.push({success:!0,message:"Your info has been copied to your clipboard "})},a.isRoomAvailable=function(){a.conference.room=j.slugify(a.conference.room),a.conference.room.length<3?(a.urlNotAvailable=!0,a.availMessage="Min of 3 Chars"):m.isRoomAvailable(a.conference.room,"video").then(function(b){b.status?a.urlNotAvailable=!1:(a.urlNotAvailable=!0,a.availMessage="Not Available")})},a.joinConference=function(){m.openConference(a.vcUrl+"/"+a.conference.room)},a.viewArchive=function(b){var c=a.videoArchives[b],g=(e.audioUrl&&""!==e.audioUrl?e.audioUrl:f.audioUrl)+"/imported/freeswitch/recordings/"+d.user.domain.domain_name+"/video/"+c.archivetime+"--"+c.tokbox_uuid+".mp4";c.publicurl=g,c.videoArchive=!0,d.showModalFull("/video/playrecording.html",c,"")},a.removeArchive=function(b){g.getRemoveArchive(a.videoArchives[b].tokbox_conference_archive_uuid).then(function(c){d.showalerts(c),c.data.success&&a.videoArchives.splice(b,1)})},a.closeVideoCallModal=function(){d.addedInvitees=[],a.invitee={};var b=c.getTop();b&&c.dismiss(b.key)},a.removeInvitation=function(a){var b={video_conference_invite_uuid:d.videoConference.participants[a].video_conference_invite_uuid};console.log(b),console.log(d.videoConference),console.log("index "+a),g.postDisableVideoConferenceInvite(b).then(function(b){console.log(b),d.showalerts(b),b.data.success&&d.videoConference.participants.splice(a,1)})},a.resetAdminLink=function(){g.getResetVideoConferenceAdminLink().then(function(a){if(console.log(a),d.showalerts(a),a.data.success){d.videoConference.moderator_hash=a.data.success.data;var b=h("getVCInviteIndexbyUUID")(d.videoConference.participants,d.videoConference.mod_invite_uuid);d.videoConference.participants[b].invite_hash=a.data.success.data}})},a.resendInvitation=function(a){var b={video_conference_invite_uuid:d.videoConference.participants[a].video_conference_invite_uuid,sender_name:d.user.contact_name_given+" "+d.user.contact_name_family,sender_email:d.user.email_address,sender_company:d.user.contact_organization,redirect_path:(e.symphonyUrl&&""!==e.symphonyUrl?e.symphonyUrl:f.symphonyUrl)+"/video"};console.log(b),g.postResendVideoConferenceInvite(b).then(function(b){console.log(b),d.showalerts(b),b.data.success&&(d.videoConference.participants[a].invite_hash=b.data.success.data)})},a.sendVideoInvites=function(a){d.contactsUsr=a&&a.messageContacts?a.messageContacts:null,d.videoInviteBody=a&&a.videoInviteBody?a.videoInviteBody:"",d.sendVideoCallInvites("modal")},a.sortBy=function(b){a.category===b?a.sortDirection=!a.sortDirection:(a.sortDirection=!1,a.category=b)},a.showChevronUp=function(b){return a.category===b&&a.sortDirection},a.showChevronDown=function(b){return a.category!==b||!a.sortDirection}}]),proySymphony.controller("VisualVoiceMailCtrl",["$scope","usefulTools","$filter","$rootScope","symphonyConfig","ngAudio","$location","$window","dataFactory",function(a,b,c,d,e,f,g,h,i){a.vvmTableHeight=h.innerHeight-300,a.visualVoiceMailRST=[],a.perPage=20,a.maxSize=50,a.predicate="left_at",a.reverse=!0,a.currentPage=1,a.filtered={},d.visualVoicemail=[],a.ppOptions=[10,20,50,100],d.nonContacts||(d.nonContacts=JSON.parse(h.localStorage.getItem("nonContacts"))),d.showTable=!0;var j=new Date;a.toDate=new Date,a.fromDate=new Date(moment().subtract(30,"days")),a.displayFromDate=new Date(moment().subtract(30,"days")),a.displayToDate=new Date,a.dateFormat="yyyy-MM-dd",a.dateSearched=!0,a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:new Date(2016,1,1),maxDate:j},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:a.fromDate,maxDate:j},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.ChangeToMinDate=function(b){if(null!=b){if(!a.toDate){var c=new Date(b);a.toDateOptions.minDate=c,a.toDate=c}d.getVisualVoicemail()}},a.processToDate=function(b){null!=b&&(a.fromDate||(a.fromDate=new Date(b)),a.toDate=new Date(b)),d.getVisualVoicemail()},a.ChangeToMinDate(),a.OpenfromDate=function(){a.dateSearched=!1,a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.dateSearched=!1,a.toDatePopup.opened=!a.toDatePopup.opened},d.getVisualVoicemail=function(){var b={user_uuid:d.selectEmulateUser?d.selectEmulateUser:d.user.id,from_date:a.fromDate?a.fromDate:new Date(moment().subtract(30,"days")),to_date:a.toDate?a.toDate:new Date};i.postRetrieveVisualVoicemailList(b).then(function(a){if(a.data.success){var e=d.userContacts,f=d.nonContacts;b.uuid!==d.user.id&&(e=d.emulatedUserContacts,f=d.emulatedNonContacts),d.visualVoicemail=a.data.success.voicemails,d.unreadVoicemails=a.data.success.unread,angular.forEach(d.visualVoicemail,function(a){a.message_length=parseInt(a.message_length);var e=d.userContacts,f=d.nonContacts,g=c("getContactbyExtension")(e,a.caller_id_number);if(null!==g&&(a.contact=g,a.contact_name=g.contact_name_full),!a.contact&&a.caller_id_number.length>=10){a.caller_id_number=a.caller_id_number.substring(a.caller_id_number.length-10);var g=c("getContactbyPhone")(e,a.caller_id_number);if(null!==g)a.contact=g,a.contact_name=g.contact_name_full;else if(a.contact_name=a.caller_id_name,b.uuid===d.user.id){var h={email:null,phone:a.caller_id_number,name:a.caller_id_name,color:randomColor({luminosity:"light"})},i=c("getNonContact")(f,h);i||(d.storeNonContact(h),i=h),a.noncontact=i}}a.contact_name?a.caller_sort=a.contact_name:a.caller_sort=a.caller_id_number}),__env.enableDebug&&console.log("VISUAL VOICEMAIL"),__env.enableDebug&&console.log(d.visualVoicemail),d.showTable=!0,b.uuid===d.user.id&&h.localStorage.setItem("visualVoicemail",JSON.stringify(d.visualVoicemail))}},function(a){__env.enableDebug&&console.log("VV ERROR"),__env.enableDebug&&console.log(a)})},d.getVisualVoicemail(),a.playingVoicemail=null,a.searchVoicemail=function(b){var c=!1;return(!a.vmSearch||b.vm_transcript&&-1!=b.vm_transcript.toLowerCase().indexOf(a.vmSearch.toLowerCase())||b.noncontact&&b.noncontact.name&&-1!=b.noncontact.name.toLowerCase().indexOf(a.vmSearch.toLowerCase())||b.noncontact&&b.noncontact.phone&&-1!=b.noncontact.phone.toLowerCase().indexOf(a.vmSearch.toLowerCase())||b.contact&&b.contact.extension&&-1!=b.contact.extension.toLowerCase().indexOf(a.vmSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_given.toLowerCase().indexOf(a.vmSearch.toLowerCase())||b.contact&&-1!=b.contact.contact_name_family.toLowerCase().indexOf(a.vmSearch.toLowerCase()))&&(c=!0),b.contact&&b.contact.phones.length>0&&angular.forEach(b.contact.phones,function(b){b.phone_number&&-1!=b.phone_number.indexOf(a.vmSearch)&&(c=!0)}),a.fromDate&&a.toDate&&(moment(b.left_at).startOf("day")>moment(a.toDate).startOf("day")||moment(b.left_at).startOf("day")<moment(a.fromDate).startOf("day"))&&(c=!1),c},a.copyVmToHawksoft=function(a){var b={uuid:a.visual_voicemail_uuid,type:"voicemail"};d.copyToHawksoft(b)},a.copyVmInfoToHawksoft=function(a){var b={uuid:a.visual_voicemail_uuid,type:"voicemail-info"};d.copyToHawksoft(b)},d.playVoicemail=function(a){"unread"===d.visualVoicemail[a].vm_status&&(d.visualVoicemail[a].vm_status="saved",i.getSaveVoicemail(d.visualVoicemail[a].visual_voicemail_uuid),d.unreadVoicemails--),d.showAudioModal(a,"voicemail")},d.stopVoicemail=function(){a.audio.pause(),a.playingVoicemail=null,a.audioPlaying=!1},a.removeVoicemail=function(a){var b="Are you sure you want to delete this voicemail?";d.confirmDialog(b).then(function(b){b&&i.removeVisualVoicemail(d.visualVoicemail[a].visual_voicemail_uuid).then(function(b){b.data.success?("unread"===d.visualVoicemail[a].vm_status&&(d.visualVoicemail[a].vm_status="deleted",d.unreadVoicemails--),d.visualVoicemail.splice(a,1)):__env.enableDebug&&console.log(b.data.error.message)},function(a){__env.enableDebug&&console.log(a)})})},a.setPage=function(b){a.currentPageVVM=b},a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.showChevron=function(c){return b.showChevron(c,a.predicate,a.reverse)},a.getIcon=function(a){return"glyphicon-chevron-down"}}]),proySymphony.controller("AutoDialingCtrl",["$scope","$mdDialog","$rootScope","$log","$routeParams","$location","$timeout","$filter","$window","usefulTools","$sce","$interval","Slug","ngAudio","$parse","FileUploader","dataFactory","__env","symphonyConfig","$uibModalStack","WizardHandler","uibDateParser","emailService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(){c.customFields=[],c.customFields.push({key:"firstname",value:"First Name"},{key:"lastname",value:"Last Name"},{key:"email_address",value:"Email Address"},{key:"contact_phone1",value:"Phone Number 1"},{key:"contact_phone2",value:"Phone Number 2"},{key:"notes",value:"Notes"})}function y(a){return w.validEmailAddress(a)}function z(a){if(!a)return!1;var b=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;return b.test(a)}function A(a){var b,d=a?c.contactsAvailable.filter(C(a)):c.contactsAvailable;return c.simulateQuery?(b=$q.defer(),g(function(){b.resolve(d)},1e3*Math.random(),!1),b.promise):d}function B(b){if(r.enableDebug&&console.log(b),d.info("Item changed to "+JSON.stringify(b)),r.enableDebug&&console.log(c.selectContact),b&&"undefined"!==b)if(b.contact_primary_number)if(a.checkPhoneNumber(b.contact_primary_number)){c.listCntcRecMess.push({robocall_contact_uuid:null,contact_from_list:b.contact_uuid,domain_uuid:a.broadcast.domain_uuid,robocall_uuid:c.broadcast.robocall_uuid,firstname:b.contact_name_full,contact_phone1:b.contact_primary_number,notes:"In contact list",status:"NotDelivered"}),c.contactsSelected.push(b);var e=h("getIndexbyUUID")(c.contactsAvailable,b.contact_uuid);c.contactsAvailable.splice(e,1),a.filteredItemsCampCnts=c.listCntcRecMess.length,a.totalItemsCampCnts=c.listCntcRecMess.length}else a.procContacError=!0;else alert("This user do not have phone number");r.enableDebug&&console.log(c.contactsSelected),c.selectedItem=null}function C(a){var b=angular.lowercase(a);return function(a){return a.contact_name_full&&angular.lowercase(a.contact_name_full).indexOf(b)>=0?!0:a.contact_email_address&&a.contact_email_address.indexOf(b)>=0?!0:!1}}function D(){q.getAvailableDidsforAm().then(function(b){r.enableDebug&&console.log(b.data),b.data.success?a.availableDids=b.data.success.data:r.enableDebug&&console.log(b.data.error.message)})}function E(){a.myChartObject={},a.myChartObject.type="PieChart",a.myChartObject.options={title:"...",chartArea:{left:10,top:10,bottom:10,width:"100%",height:"100%"},displayExactValues:!0,width:"100%",height:"100%",is3D:!0}}function F(b,c){var d=h("getByUUID")(a.currentCampaign.schedules,c.robocall_schedule_uuid,"robocall_schedule"),e={};return r.enableDebug&&console.log(c),r.enableDebug&&console.log(b),q.getScheduleDeliveries(c.robocall_schedule_uuid).then(function(b){if(r.enableDebug&&console.log("DELIVERY RESPONSE"),r.enableDebug&&console.log(b),b.data.success){var c=b.data.success.data;a.currentCampaign.schedules[d].deliveries=c.deliveries,angular.forEach(a.currentCampaign.schedules[d].deliveries,function(b){var c=h("getByUUID")(a.currentCampaign.contacts,b.robocall_contact_uuid,"robocall_contact");b.contact=null,null!==c&&(b.contact=a.currentCampaign.contacts[c])});var f=[],g=[],i=0;angular.forEach(c,function(a,b){if("deliveries"!==b){var c={c:[{v:b},{v:a}]};f.push(c);var d={key:b,value:a};g.push(d),i+=a}});var j=a.currentCampaign.contacts.length-i,k={c:[{v:"Completed"},{v:j}]};f.push(k),a.currentCampaign.schedules[d].results=g,e={cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Slices",type:"number"}],rows:f},r.enableDebug&&console.log(e),a.myChartObject.data=e,r.enableDebug&&console.log(a.currentCampaign)}}),e}function G(a){return angular.forEach(a.schedules,function(a){r.enableDebug&&console.log(a.start_at),a.start_at=h("toLocalTime")(a.start_at),r.enableDebug&&console.log(a.start_at),a.start_at=a.start_at.toDate(),r.enableDebug&&console.log(a.start_at)}),a}function H(a){return a?String(a).replace(/<[^>]+>/gm,""):""}function I(a,b,d){return a.user_uuid=c.user.id,"Yes"===c.broadcast.schedule_status&&"One"===c.broadcast.schedule_type&&(a.start_at=new Date),a.start_at&&(a.start_at=a.start_at.toLocaleString("en-US"),a.timezone=c.user.settings.timezone?c.user.settings.timezone:"America/New_York"),q.postUpdateRoboCallSchedule(a).then(function(a){return r.enableDebug&&console.log("RESPONSE TO SAVE SCHEDULE"),r.enableDebug&&console.log(a),d&&c.showalerts(a),a.data.success&&(r.enableDebug&&console.log(c.broadcast.schedules[b]),r.enableDebug&&console.log(a.data.success.data)),a},function(a){c.alerts.push({type:"danger",msg:"Failure: "+JSON.stringify(a)})})}function J(a){var b=a.date,c=a.mode;return"day"===c&&(0===b.getDay()||6===b.getDay())}function K(b){var c=b.date,d=b.mode;if("day"===d)for(var e=new Date(c).setHours(0,0,0,0),f=0;f<a.events.length;f++){var g=new Date(a.events[f].date).setHours(0,0,0,0);if(e===g)return a.events[f].status}return""}function L(){q.getAudioLibrary("automated").then(function(b){b.data.success?(r.enableDebug&&console.log("AUDIO LIBRARY"),r.enableDebug&&console.log(b.data.success.data),a.audioLibrary=b.data.success.data):r.enableDebug&&console.log(b.data.error.message)})}a.months=[{name:"January",number:1},{name:"February",number:2},{name:"March",number:3},{name:"April",number:4},{name:"May",number:5},{name:"June",number:6},{name:"July",number:7},{name:"August",number:8},{name:"September",number:9},{name:"October",number:10},{name:"November",number:11},{name:"December",number:12}],a.years=[2015,2016,2017,2018,2019,2020,2021],a.showAllCampaigns=!0,a.activeCampaign=null,a.automarketingTableHeight=i.innerHeight-380,a.perPage=20,a.perPage2=20,a.maxSize=50,a.predicate="sort_date",a.predicate2="created_at",a.reverse=!0,a.canEnter=!0,a.showNewField=[],a.colSelect=[],a.newField=[],a.contacts={reverse:!0},a.contacts={predicate:"lastname"},a.insert={shortcode:null},a.reverse2=!0,a.currentPage=1,a.currentPage2=1,a.ppOptions=[10,20,50,100],a.includeHeaders=!0,a.showPlayer=!1,a.gridOptions={},a.colOptions=[{key:"firstname",value:"First Name"},{key:"lastname",value:"Last Name"},{key:"email_address",value:"Email Address"},{key:"contact_phone1",value:"Phone Number 1"},{key:"contact_phone2",value:"Phone Number 2"},{key:"notes",value:"Notes"}],a.contact={activeTab:0},a.checkforcode=function(b,d){a.cursorPos=j.doGetCaretPosition(b.target),219===b.which?(a.showShortcodeList=!0,a.selectedIndex=0):9===b.which||13===b.which?(b.preventDefault(),a.insertShortcode(c.customFields[a.selectedIndex].key,d)):38===b.which?(b.preventDefault(),a.selectedIndex>0&&(a.selectedIndex+=-1)):40===b.which?(b.preventDefault(),a.selectedIndex+=1):(32===b.which||27===b.which)&&(a.showShortcodeList=!1)},a.insertShortcode=function(b,d){var e=d.sms_message?d.sms_message:"",f=a.cursorPos?a.cursorPos:e.length,g=angular.copy(f);"{"==e.substring(f-1,f)&&(g+=-1),"{{"==e.substring(f-2,f)&&(g+=-1);var i=e.slice(0,g)+(0===g||" "===e.substring(g-1,g)?"":" ")+"{{"+b+"}} "+e.slice(f+1),j=h("getByUUID")(c.broadcast.schedules,d.robocall_schedule_uuid,"robocall_schedule");null!==j&&(c.broadcast.schedules[j].sms_message=i),a.showShortcodeList=!1,a.insert.shortcode=null},a.showShortcodeList=!1,a.filterData=[],a.cursorPos=0,a.editContact=function(b){var d=angular.copy(c.broadcast.contacts);a.showEdit=b;var e=h("getByUUID")(d,b,"robocall_contact");r.enableDebug&&console.log(e),a.tempContact=d[e],i.localStorage.setItem("editContact",JSON.stringify(a.tempContact)),r.enableDebug&&console.log(a.tempContact)},a.cancelEdit=function(){var b=h("getByUUID")(c.broadcast.contacts,a.tempContact.robocall_contact_uuid,"robocall_contact");return c.broadcast.contacts[b]=JSON.parse(i.localStorage.getItem("editContact")),r.enableDebug&&console.log(c.broadcast.contacts[b]),a.showEdit=null,a.tempContact=null,c.broadcast.contacts[b]},a.saveContact=function(b){var d=h("getByUUID")(c.broadcast.contacts,b.robocall_contact_uuid,"robocall_contact");r.enableDebug&&console.log(d),r.enableDebug&&console.log(b),q.postUpdateAmContact(b).then(function(b){r.enableDebug&&console.log(b.data),b.data.success?(c.broadcast.contacts[d]=b.data.success.data,a.showEdit=null,a.tempContact=null):r.enableDebug&&console.log(b.data.error.message)})},a.removeCampaignContact=function(a){var b=h("getByUUID")(c.broadcast.contacts,a,"robocall_contact");q.deleteRoboCallContacts(a).then(function(a){a.data.success&&null!==b&&c.broadcast.contacts.splice(b,1),a.data.error&&c.alerts.push({type:"danger",msg:a.data.error.message})})},a.audioFilePlaying=null,a.recordingPlaying=!1,a.playRecording=function(a){r.enableDebug&&console.log(a),c.showAudioModal(a,"robocall-recording")},a.playAudioFile=function(b,c){a.audioFilePlaying=c;var d=r.apiUrl?r.apiUrl:s.audioUrl;a.audio=new Audio(d+b),a.recordingPlaying=!0,a.audio.play()},c.stopPlaying=function(){a.audio.pause(),a.audioFilePlaying=!1,a.recordingPlaying=!1},a.btnMnuFile="1",a.templateIncludeFileProcess="fileprocessxlsx",!a.amCampaigns&&i.localStorage.getItem("amCampaigns")&&(a.amCampaigns=JSON.parse(i.localStorage.getItem("amCampaigns"))),a.mnuSelectedFile=function(b){a.btnMnuFile=b,"1"===b?a.templateIncludeFileProcess="fileprocessxlsx":"2"===b?a.templateIncludeFileProcess="fileprocesscsv":"3"===b&&(a.templateIncludeFileProcess="fileprocesstxt")},a.step1Disabled=function(a){return a.robocall_name&&""!==a.robocall_name&&a.message_type&&""!==a.message_type&&a.robocall_type&&""!==a.robocall_type&&a.schedule_type&&""!==a.schedule_type?!1:!0},a.getCampaigns=function(){a.showArchivedCampaigns=!1,q.getAllCampaigns().then(function(b){a.amCampaigns=[],b.data.success&&(angular.forEach(b.data.success.data,function(a){a.schedules&&a.schedules.length>0?a.sort_date=a.schedules[0].start_at:a.sort_date=a.updated_at}),a.amCampaigns=b.data.success.data,a.currentPageCampaign=1,a.entryLimitCampaign=10,a.filteredItemsCampaign=a.amCampaigns.length,a.totalItemsCampaign=a.amCampaigns.length,r.enableDebug&&console.log("GET CAMPAIGNS"),r.enableDebug&&console.log(a.amCampaigns)),i.localStorage.setItem("amCampaigns",JSON.stringify(a.amCampaigns)),a.showTable=!0},function(a){r.enableDebug&&console.log(a)})},a.getCampaigns(),a.loadArchivedCampaigns=function(){a.showTable=!1,q.getArchivedCampaigns().then(function(b){r.enableDebug&&console.log(b.data),b.data.success?(a.amCampaigns=b.data.success.data,a.showTable=!0,a.showArchivedCampaigns=!0):r.enableDebug&&console.log(b.data.error.message)})},a.csv={},a.csv.result=null,a.csv={content:null,separator:",",accept:".csv",result:null,encoding:"ISO-8859-1",uploadButtonLabel:""},a.csv.callback=function(b){r.enableDebug&&console.log(b),r.enableDebug&&console.log(a.csv.result)},a.colSelect=[],a.cancelCsvUpload=function(){c.$broadcast("clear.csv.filename"),a.csv={content:null,separator:",",accept:".csv",result:null,encoding:"ISO-8859-1",uploadButtonLabel:"Upload a csv file"},a.contactRows=null,a.displayLineErrors=null},a.prepareContacts=function(b){r.enableDebug&&console.log(b),angular.forEach(b,function(a){a=j.convertObjectToArray(a)}),a.contactRows=b,a.colHeaders=j.convertObjectToArray(b[0])},a.importCsvContacts=function(b,d,e){if(0===b.length){var f="",g="";"Email"===c.broadcast.message_type?(g="an ",f="Email Address"):(g="a ",f="Phone Number"),a.displayImportErrors="No Recipients Were Imported - All recipients must have at least "+g+f+" to deliver "+g+c.broadcast.message_type+" Campaign."}else{var h=[],i=0;a.lineError=[],e||d.splice(0,1),angular.forEach(d,function(d){var e=j.convertObjectToArray(d),f={},g=0,k=!1,l="";angular.forEach(b,function(a,b){var d=a.key;r.enableDebug&&console.log(b+": "+d+" - i = "+g),"ignore"!==d&&("email_address"===d?(e[b]&&!y(e[b])&&(l+=e[b]+" is an Invalid Email Address"),e[b]||"Email"!==c.broadcast.message_type||(l+=(0!==l.length?", ":"")+"Row "+i+" of imported file is missing an email address (required for an email campaign)")):"contact_phone1"===d&&(e[b]=m.slugify(e[b]),e[b]=e[b].replace("-",""),e[b]&&!z(e[b])&&(l+=(0!==l.length?", ":"")+e[b]+" is an invalid phone number"),e[b]||"Email"===c.broadcast.message_type||(l+=(0!==l.length?", ":"")+"Missing Phone Number")),r.enableDebug&&console.log(e[b]),f[d]=e[b]),g++}),f.contact_phone1&&z(f.contact_phone1)||f.contact_phone2&&z(f.contact_phone2)||"Email"===c.broadcast.message_type||(l+=(0!==l.length?", ":"")+"Row "+i+" of imported file is missing a valid phone number which is required for an "+c.broadcast.message_type+" campaign"),""!==l&&(a.lineError[i]=l),k||h.push(f),i++});var k={contacts:h,robocall_uuid:c.broadcast.robocall_uuid};r.enableDebug&&console.log(a.lineError),r.enableDebug&&console.log(k),a.displayLineErrors="",q.postRoboCallContactArray(k).then(function(b){c.showalerts(b),b.data.success&&(r.enableDebug&&console.log(b.data.success),c.broadcast.contacts=b.data.success.data,r.enableDebug&&console.log(c.broadcast.contacts),b.data.success.duplicate_phone.length>0&&angular.forEach(b.data.success.duplicate_phone,function(b){a.displayLineErrors+=b+"<br />"}),b.data.success.duplicate_email.length>0&&angular.forEach(b.data.success.duplicate_email,function(b){a.displayLineErrors+=b+"<br />"}),angular.forEach(a.lineError,function(b){b.length>0&&(a.displayLineErrors+=b+"<br />")}),a.displayLineErrors&&(a.displayLineErrors="<strong>Errors were noted with some of the contacts that you've imported. Please review the comments below and make any necessary corrections.</strong><br />"+a.displayLineErrors),a.contact.activeTab=0,a.csv.result=null,a.csv.content=null,a.contactRows=null,a.colSelect=[],c.$broadcast("clear.csv.filename"))})}},c.addContactsToCampaign=function(b){r.enableDebug&&console.log("UUID = "+b),a.gridOptions={},a.contactRows=null,i.localStorage.setItem("goToStepNumber","step 2: Recipients"),f.path("/automatedmessaging/"+b)},a.goToNewCampaign=function(){a.contactRows=null,a.gridOptions={},c.showDelivering=!1,f.path("/automatedmessaging/new")},a.goToEditCampaign=function(b){a.gridOptions={},a.contactRows=null,f.path("/automatedmessaging/"+b)},a.contcFromXlsx=0,c.procXlsxSuccess=!1,c.procXlsxError=!1,a.listXlsxTmp=[],a.cancelXlsxUpload=function(){a.displayLineErrors=null,a.gridOptions={}},a.importXlsContacts=function(b,d){if(a.lineError=[],0===b.length){var e="",f="";"Email"===c.broadcast.message_type?(f="an ",e="Email Address"):(f="a ",e="Phone Number"),a.displayImportErrors="No Recipients Were Imported - All recipients must have at least "+f+e+" to deliver "+f+c.broadcast.message_type+" Campaign."}else{var g=[],h=0;angular.forEach(d.data,function(e){var f={},i=0,j=!1,k="";angular.forEach(b,function(a,b){var g=a.key,j=e[d.columnDefs[b].field];"ignore"!==g&&("email_address"===g?(j&&!y(j)&&(k+=j+" is an Invalid Email Address"),j||"Email"!==c.broadcast.message_type||(k+=(0!==k.length?", ":"")+"Row "+h+" of imported file is missing an email address (required for an email campaign)")):("contact_phone1"===g||"contact_phone2"===g)&&(j=m.slugify(j),j=j.replace("-",""),j&&!z(j)&&(k+=(0!==k.length?", ":"")+j+" is an invalid phone number")),f[g]=j),i++}),f.contact_phone1&&z(f.contact_phone1)||f.contact_phone2&&z(f.contact_phone2)||"Email"===c.broadcast.message_type||(k+=(0!==k.length?", ":"")+"Row "+h+" of imported file is missing a valid phone number which is required for "+("Email"===c.broadcast.message_type?"an"+c.broadcast.message_type:"a "+c.broadcast.message_type)+" campaign."),""!==k&&(a.lineError[h]=k),j||g.push(f),h++});var i={contacts:g,robocall_uuid:c.broadcast.robocall_uuid};r.enableDebug&&console.log(i),a.displayLineErrors="",q.postRoboCallContactArray(i).then(function(b){b.data.success?(r.enableDebug&&console.log(b.data.success),c.broadcast.contacts=b.data.success.data,a.contact.activeTab=0,a.gridOptions={},b.data.success.duplicate_phone.length>0&&angular.forEach(b.data.success.duplicate_phone,function(b){a.displayLineErrors+=b+"<br />"}),b.data.success.duplicate_email.length>0&&angular.forEach(b.data.success.duplicate_email,function(b){a.displayLineErrors+=b+"<br />"}),angular.forEach(a.lineError,function(b){b.length>0&&(a.displayLineErrors+=b+"<br />")}),a.displayLineErrors&&(a.displayLineErrors="<strong>Errors were noted with some of the contacts that you've imported. Please review the comments below and make any necessary corrections.</strong><br />"+a.displayLineErrors),a.colSelect=[]):b.data.error&&c.alerts.push({type:"danger",msg:b.data.error.message})})}},a.closeMessage=function(){c.successMessage="",c.failureMessage="",a.displayLineErrors=""},a.changeCampaignStatus=function(b,d){q.getUpdateCampaignStatus(d,b.robocall_uuid).then(function(d){if(d.data.success){var e=h("getByUUID")(a.amCampaigns,b.robocall_uuid,"robocall");null!==e&&(a.amCampaigns[e]=d.data.success.data),a.currentCampaign=d.data.success.data,c.showSuccessAlert(d.data.success.message)}else r.enableDebug&&console.log(d.data.error.message),c.showErrorAlert(d.data.error.message)})},a.$on("am-campaign-update",function(b,c){var d=h("getByUUID")(a.amCampaigns,c.robocall_uuid,"robocall");null!==d&&(a.amCampaigns[d]=c,a.currentCampaign&&a.currentCampaign.robocall_uuid===c.robocall_uuid&&a.getCampaignDetail(c.robocall_uuid))}),a.repet=0,a.checkPhoneNumber=function(b){var d=!0,e=a.listXlsxTmp;return e.forEach(function(c){return c.contact_phone1===b?(a.repet++,d=!1,!0):void 0}),d&&c.listCntcRecMess.length>0&&c.listCntcRecMess.forEach(function(c){return c.contact_phone1===b?(a.repet++,d=!1,!0):void 0}),d?!0:!1},a.dropAlert=function(){c.procXlsxError=!1,a.procAddIndError=!1,a.procContacError=!1},a.processAnotherFile=function(){c.procXlsxSuccess=!1,c.procXlsxError=!1},a.error=function(a){r.enableDebug&&console.log(a),c.procXlsxSuccess=!1},c.userContacts||(c.userContacts=JSON.parse(i.localStorage.getItem("userContacts"))),c.contactsAvailable=c.userContacts,c.simulateQuery=!1,c.isDisabled=!1,c.querySearch=A,c.selectedItemChange=B,c.contactsSelected=[],c.removeSelectedContact=function(a){c.contactsAvailable.push(c.contactsSelected[a]),c.contactsSelected.splice(a,1)},a.getSelectedNumber=function(b){var c=null;return b&&angular.forEach(a.availableDids,function(a){a.destination_number===b&&(c=angular.copy(a))}),c},a.getNumberBySearchText=function(b){return r.enableDebug&&console.log(a.availableDids),b?a.availableDids.filter(function(a){return a.destination_number.indexOf(b)>-1}):a.availableDids},a.itemChange=function(a,b){r.enableDebug&&console.log(a);var d=h("getByUUID")(c.broadcast.schedules,a.robocall_schedule_uuid,"robocall_schedule");null!==d&&(c.broadcast.schedules[d].call_from_did=b.destination_number)},a.showItemText=function(a){return h("tel")(a.destination_number)+(a.destination_description?" - "+a.destination_description:"")},c.updateRoboCall=!1,e.rc_uuid&&"0"!==e.rc_uuid&&(c.updateRoboCall=!0,c.roboCallUUID=e.rc_uuid,q.getRoboCallUUID(e.rc_uuid).then(function(b){r.enableDebug&&console.log("GET RCUUID"),r.enableDebug&&console.log(b),c.broadcast=b.data.success.data,D(),x(),angular.forEach(c.broadcast.customFields,function(a){c.customFields.push({value:a.field_name,key:a.field_key})}),c.broadcast=G(c.broadcast);var d=h("getByUUID")(a.amCampaigns,b.data.success.data.robocall_uuid,"robocall");null!==d&&(a.amCampaigns[d]=c.broadcast),c.roboCallUUID=b.data.success.data.robocall_uuid,i.localStorage.getItem("goToStepNumber")&&g(function(){var b=i.localStorage.getItem("goToStepNumber");i.localStorage.removeItem("goToStepNumber"),a.goToStep(b)})},function(a){r.enableDebug&&console.log(a)})),a.goToStep=function(a){r.enableDebug&&console.log(a),r.enableDebug&&console.log(u.wizard()),r.enableDebug&&console.log(u.wizard().currentStepNumber()),u.wizard().goTo(a)},a.opcCallResult=!0,a.opcSurveyResult=!1,a.callResult=function(){a.opcCallResult=!0,a.opcSurveyResult=!1},a.surveyResult=function(){a.opcCallResult=!1,a.opcSurveyResult=!0},a.returnToLanding=function(){c.showDelivering=!1,a.activeCampaign=null,a.showAllCampaigns=!0,f.path("/automatedmessaging")},a.getCampaignDetail=function(b){c.showDelivering=!1;var d=h("getByUUID")(a.amCampaigns,b,"robocall"),e=null;q.getRoboCallUUID(b).then(function(f){r.enableDebug&&console.log("RESPONSE FROM RETRIEVING CAMPAIGN"),r.enableDebug&&console.log(f),f.data.success&&(e=f.data.success.data,angular.forEach(e.schedules,function(a){r.enableDebug&&console.log("ITEM START AT"),r.enableDebug&&console.log(a.start_at)}),e=G(e),a.currentCampaign=e,a.amCampaigns[d]=e,"sent"===e.status&&(E(),F(e,e.schedules[0])),a.showAllCampaigns=!1,a.activeCampaign=b,a.contact.activeTab=1),null===e&&c.alerts.push({type:"danger",msg:"We were unable to load this campaign."})},function(a){r.enableDebug&&console.log(a)})},a.campContactsRst=[],a.rstCampContacts={},a.currentPageCampCnts=1,a.entryLimitCampCnts=15,a.filteredItemsCampCnts=0,a.totalItemsCampCnts=0,a.getRoboCallContacts=function(b){q.getRoboCallContacts(b).then(function(b){a.campContactsRst=b.data,c.listCntcRecMess=b.data,c.broadcast.contacts=b.data,a.filteredItemsCampCnts=c.listCntcRecMess.length,a.totalItemsCampCnts=c.listCntcRecMess.length},function(a){r.enableDebug&&console.log(a)})},c.broadcast={},c.mytime=(new Date).toLocaleString("en-US",{timeZone:c.user.settings.timezone?c.user.settings.timezone:"America/New_York"}),c.hstep=1,c.mstep=1,c.ismeridian=!0,c.changed=function(){d.log("Time changed to: "+c.mytime)},c.broadcast.user_uuid=c.user.id,c.broadcast.domain_uuid=c.user.domain_uuid,a.saveStep1=function(b){if(r.enableDebug&&console.log(b),c.showDelivering=!1,r.enableDebug&&console.log(c.broadcast.robocall_uuid),c.broadcast.robocall_uuid)q.updateRoboCall(c.broadcast).then(function(b){if(r.enableDebug&&console.log(b),b.data.success){c.broadcast=b.data.success.data,c.broadcast=G(c.broadcast);var d=h("getByUUID")(a.amCampaigns,b.data.success.data.robocall_uuid,"robocall");null!==d&&(a.amCampaigns[d]=c.broadcast)}else r.enableDebug&&console.log(b.data.error.message)},function(a){r.enableDebug&&console.log(a)});else{var d={domain_uuid:b.domain_uuid,message_type:b.message_type,robocall_type:b.robocall_type,robocall_name:b.robocall_name,schedule_type:b.schedule_type,schedule_status:"One"===b.schedule_type?"Yes":"No",user_uuid:b.user_uuid};q.postRoboCall(d).then(function(b){if(b.data.success){c.broadcast=b.data.success.data,c.broadcast=G(c.broadcast);var d=h("getByUUID")(a.amCampaigns,b.data.success.data.robocall_uuid,"robocall");null!==d&&(a.amCampaigns[d]=c.broadcast),r.enableDebug&&console.log(c.broadcast),
c.roboCallUUID=c.broadcast.robocall_uuid,r.enableDebug&&console.log("ROBOCALL UUID: "+c.broadcast.robocall_uuid),i.localStorage.setItem("goToStepNumber","step 2: Recipients"),f.path("/automatedmessaging/"+c.broadcast.robocall_uuid),i.localStorage.getItem("goToStepNumber")&&g(function(){i.localStorage.getItem("goToStepNumber");i.localStorage.removeItem("goToStepNumber"),a.goToStep("step 2: Recipients")})}else r.enableDebug&&console.log(b.data.error)},function(a){r.enableDebug&&console.log(a)})}},a.selectedItemChanged=function(b){"add_new"===a.colSelect[b]&&(a.showNewField[b]=!0)},a.saveNewField=function(b,d){var e=null;if(d){e=m.slugify(d),e=e.replaceAll("-","_");var f={robocall_uuid:c.broadcast.robocall_uuid,field_name:d,field_key:e,form_type:"text"};q.postAddCustomField(f).then(function(f){f.data.success?(c.broadcast.customFields=f.data.success.data,c.customFields.push({value:d,key:e}),a.newField[b]=null,a.showNewField[b]=!1,g(function(){a.colSelect[b]=e})):(r.enableDebug&&console.log(f.data.error.message),c.showErrorAlert(f.data.error.message))})}},a.createEmptySchedule=function(b){var d=(new Date).toLocaleString("en-US",{timeZone:c.user.settings.timezone?c.user.settings.timezone:"America/New_York"}),e=parseInt(b)+1,f={title:"Message "+e,start_at:d};r.enableDebug&&console.log(f),a.addScheduleEntry(f)},a.step2Validation=function(){if(a.list&&!angular.equals({},a.list))return a.displayLineErrors="You have an unsaved recipient on the Add Individually tab. Please click Put On List or Clear before moving on.",g(function(){j.goToId("top")}),!1;if(a.contactRows&&a.contactRows.length>0||a.gridOptions.columnDefs)return a.displayLineErrors="You have a pending recipient import. Please complete the import or Cancel Import to continue.",g(function(){j.goToId("top")}),!1;if(c.broadcast.schedules&&0!==c.broadcast.schedules.length)a.showOneSchedule=!0;else{c.broadcast.schedule_status="Yes";var b={title:"Message 1 ",start_at:new Date},d=c.user.settings.timezone?c.user.settings.timezone:"America/NewYork",e=moment(new Date);a.newdate=e.tz(d);var b={title:"Message 1",start_at:a.newdate};r.enableDebug&&console.log(b),a.showOneSchedule=!1,a.addScheduleEntry(b)}return a.displayLineErrors=null,r.enableDebug&&console.log(c.broadcast.schedules[0]),r.enableDebug&&console.log(c.user),!0},a.saveStep2=function(){},a.step3Validation=function(a){var b=!1;return angular.forEach(a.schedules,function(c){"Email"===a.message_type?c.start_at&&c.email_subject&&c.email_from_email&&c.email_message_html||(b=!0):"Text"===a.message_type?c.start_at&&c.sms_message&&c.sms_reply_number||(b=!0):"Voice"===a.message_type&&(c.start_at&&c.recording_file&&c.call_from_did||(b=!0))}),b},a.saveStep3=function(){if("One"===c.broadcast.schedule_type)a.updateSchedule(c.broadcast.schedules[0],0,!1);else{var b=0;angular.forEach(c.broadcast.schedules,function(c){a.updateSchedule(c,b,!1),b+=1})}},a.deleteContactList=function(b){r.enableDebug&&console.log(b),c.listCntcRecMess.forEach(function(a,d){return a.robocall_contact_uuid===b?(alert("Review API delete..."),void c.listCntcRecMess.splice(d,1)):void 0}),a.filteredItemsCampCnts=c.listCntcRecMess.length,a.totalItemsCampCnts=c.listCntcRecMess.length},a.procContacError=!1,c.listCntcRecMess=[],c.rstListCntcRecMess={},a.loadListContact=function(b){if(r.enableDebug&&console.log(b),b.contact_primary_number)a.checkPhoneNumber(b.contact_primary_number)?(c.listCntcRecMess.push({robocall_contact_uuid:null,contact_from_list:b.contact_uuid,domain_uuid:a.broadcast.domain_uuid,robocall_uuid:c.broadcast.robocall_uuid,firstname:b.contact_name_full,contact_phone1:b.contact_primary_number,notes:"In contact list",status:"NotDelivered"}),a.filteredItemsCampCnts=c.listCntcRecMess.length,a.totalItemsCampCnts=c.listCntcRecMess.length):a.procContacError=!0;else{alert("This user do not have phone number");var d=a.contactsUsrRC.indexOf(b);r.enableDebug&&console.log(d)}},a.removeContactList=function(b){r.enableDebug&&console.log(b),c.listCntcRecMess.forEach(function(a,d){if(b.contact_uuid){if(a.contact_from_list===b.contact_uuid)return void c.listCntcRecMess.splice(d,1)}else if(a.contact_from_list===b)return void c.listCntcRecMess.splice(d,1)}),a.filteredItemsCampCnts=c.listCntcRecMess.length,a.totalItemsCampCnts=c.listCntcRecMess.length},a.procAddIndError=!1,a.list={},a.clearIndividually=function(){a.list={}},a.addListIndividually=function(b){if(r.enableDebug&&console.log(b),a.displayLineErrors="","Email"===c.broadcast.message_type?b.email&&y(b.email)||(a.displayLineErrors="For an Email Campaign, all recipients must have a valid email address."):(b.phone||(a.displayLineErrors="For a Voice or Text Campaign, all recipients must have a phone number."),b.phone&&10!==b.phone.length&&(a.displayLineErrors="For a Voice or Text Campaign, all recipients must have a valid phone number.")),!a.displayLineErrors){var d={robocall_uuid:c.broadcast.robocall_uuid,firstname:b.name,lastname:b.lastname,email_address:b.email?b.email:"",contact_phone1:b.phone?b.phone:"",notes:b.notes?b.notes:"",status:"NotDelivered"};r.enableDebug&&console.log(d),q.postAddContact(d).then(function(b){b.data.success?(c.broadcast.contacts||(c.broadcast.contacts=[]),c.broadcast.contacts.push(b.data.success.data),a.contact.activeTab=0,a.list={}):b.data.error&&(c.alerts.push({type:"danger",msg:b.data.error.message}),r.enableDebug&&console.log(b.data.error.message))},function(a){r.enableDebug&&console.log(a)})}},c.loadTemplates=function(){q.getAvailTemplates().then(function(a){a.data.success?c.availEmailTemplates=data.response.success.data:r.enableDebug&&console.log(a.data.error.message)})},a.oneAtATime=!0,a.showAddSchedule=!1,a.saveEmailMessage=function(a,b,d){if("Email"===c.broadcast.message_type&&!(b.start_at&&b.email_subject&&b.email_from_email&&b.email_message_html))return void c.showErrorAlert("The start time, subject, from email and message fields are all required.");var e={robocall_schedule_uuid:c.broadcast.schedules[a].robocall_schedule_uuid,email_message_html:b.email_message_html,email_message_text:H(b.email_message_html),email_subject:b.email_subject,email_from_email:b.email_from_email,email_from_name:b.email_from_name,title:b.title?b.title:c.broadcast.schedules[a].title,start_at:b.start_at};r.enableDebug&&console.log(e),I(e,a,d)},a.duplicateCampaign=function(b){q.getDuplicateCampaign(b).then(function(b){c.showalerts(b),b.data.success?(a.amCampaigns.push(b.data.success.data),a.showAllCampaigns=!0,a.activeCampaign=null):r.enableDebug&&console.log(b.data.error.message)})},c.saveHtmlEmail=function(a,b,d){var e={robocall_schedule_uuid:c.broadcast.schedules[d].robocall_schedule_uuid,email_message_template:a,email_message_html:b};c.broadcast.schedules[d].email_message_template=a,c.broadcast.schedules[d].email_message_html=b,I(e,d,!0)},a.saveSmsMessage=function(a,b,d){if(!("Text"!==c.broadcast.message_type||b.start_at&&b.sms_message&&b.sms_reply_number))return void c.showErrorAlert("The start time, from number and message fields are all required.");var e={sms_message:b.sms_message,sms_reply_number:b.sms_reply_number,sms_from:null,robocall_schedule_uuid:b.robocall_schedule_uuid,title:b.title?b.title:c.broadcast.schedules[a].title,start_at:b.start_at};return r.enableDebug&&console.log(e),I(e,a,d)},a.saveVoiceMessage=function(a,b,d){if(!("Voice"!==c.broadcast.message_type||b.start_at&&b.call_from_did))return void c.showErrorAlert("The start time and caller id number fields are all required.");var e={call_from_did:b.call_from_did,robocall_schedule_uuid:b.robocall_schedule_uuid,title:b.title?b.title:c.broadcast.schedules[a].title,start_at:b.start_at};return r.enableDebug&&console.log(e),I(e,a,d)},a.updateSchedule=function(b,d,e){var f;if("Text"===c.broadcast.message_type)f=a.saveSmsMessage(d,b,e);else if("Email"===c.broadcast.message_type)f=a.saveEmailMessage(d,b,e);else if("Voice"===c.broadcast.message_type){var g={robocall_schedule_uuid:b.robocall_schedule_uuid,title:b.title,start_at:b.start_at,call_from_did:b.call_from_did};f=I(g,d,e)}f.then(function(b){b.data.success?q.updateRoboCall(c.broadcast).then(function(b){if(b.data.success){r.enableDebug&&console.log(b.data.success),b.data.success.data.robocall_uuid;var d=h("getByUUID")(a.amCampaigns,b.data.success.data.robocall_uuid,"robocall"),f=G(b.data.success.data);null!==d&&(a.amCampaigns[d]=f),e&&c.showSuccessAlert(b.data.success.message)}else r.enableDebug&&console.log(b.data.error.message)}):r.enableDebug&&console.log(b.data.error.message)})},a.sortByDate=function(a){var b=new Date(a.start_at);return b},a.goToLanding=function(){f.path("/automatedmessaging")},a.campaignErrors=[],a.checkCampaignStatus=function(b){return b.contacts&&0!=b.contacts.length||a.campaignErrors.push("You have not added any recipients to your campaign."),angular.forEach(b.schedules,function(c){"Text"!==b.message_type||c.sms_message||c.sms_reply_number||a.campaignErrors.push("You have not added any recipients to your campaign.")}),a.campaignErrors.length>0?!1:!0},a.startCampaign=function(b){var d={robocall_uuid:b.robocall_uuid,status:"queue"};q.postStartRoboCallCampaign(d).then(function(d){if(d.data.success){var e=h("getByUUID")(a.amCampaigns,b.robocall_uuid,"robocall");null===e&&(a.amCampaigns.push(b),e=h("getByUUID")(a.amCampaigns,b.robocall_uuid,"robocall")),null!==e&&(r.enableDebug&&console.log(a.amCampaigns[e]),a.amCampaigns[e].status="queue",c.showDelivering=!0,angular.forEach(a.amCampaigns[e].schedules,function(a){a.status="queue"}),i.localStorage.setItem("amCampaigns",JSON.stringify(a.amCampaigns)))}else c.showErrorAlert(d.data.error.message)},function(a){c.alerts.push({type:"danger",msg:"Failure: "+JSON.stringify(a)})})},a.showEditMessage=function(b){a.editMessage?a.editMessage[b]=!a.editMessage[b]:(a.editMessage=[],a.editMessage[b]=!0),c.scheduleIndex=b,a.editSchedule&&a.editSchedule[b]&&(a.editSchedule[b]=!1)},a.showEditSchedule=function(b){a.editSchedule||(a.editSchedule=[]),a.editSchedule[b]=!a.editSchedule[b],a.editMessage&&a.editMessage[b]&&(a.editMessage[b]=!1)},a.scheduleReady=function(a){if("Text"===a.message_type){if(!a.start_at||!a.sms_message||!a.sms_reply_number)return!1}else if("Voice"===a.message_type){if(!a.start_at||!a.recording_file)return!1}else if("Email"===a.message_type&&!(a.start_at&&a.email_subject&&a.email_from_email&&a.email_message_html))return!1;return!0},a.dateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,minDate:new Date,maxDate:M},a.datePopup=[],a.editSchedule=null,c.newschedule={},a.addScheduleEntry=function(b){if(b&&b.title&&b.start_at){var d={robocall_uuid:c.broadcast.robocall_uuid,title:b.title,start_at:b.start_at,message_type:c.broadcast.message_type,status:"draft",timezone:c.user.settings.timezone?c.user.settings.timezone:"America/New_York"};q.postCreateRoboCallSchedule(d).then(function(b){b.data.success?(c.broadcast.schedules||(c.broadcast.schedules=[]),c.broadcast.schedules.push(b.data.success.data),c.broadcast=G(c.broadcast),a.newschedule={},a.addSchedule=!1,a.showOneSchedule=!0):b.data.error&&c.alerts.push({type:"danger",msg:b.data.error.message})},function(a){r.enableDebug&&console.log(a)})}else c.alerts.push({type:"danger",msg:"Error: Title, Start Date and Time are required to create a new campaign leg."})},a.openEmailEditor=function(a){r.enableDebug&&console.log(a),c.editingScheduleUUID=a,c.showEditorModal("/autodialing/emaileditor.html",a,"lg","editor-modal-window","static","false")},a.deleteRobocallCampaign=function(){var d=b.confirm().title("Are you sure you want to Delete this Campaign: "+a.currentCampaign.robocall_name+"?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");b.show(d).then(function(){q.deleteRobocallCampaign(a.currentCampaign.robocall_uuid).then(function(b){if(c.showalerts(b),b.data.success){var d=h("getByUUID")(a.amCampaigns,a.currentCampaign.robocall_uuid,"robocall");null!==d&&a.amCampaigns.splice(d,1),a.currentCampaign=null,a.showAllCampaigns=!0,a.activeCampaign=null,f.path("/automatedmessaging"),a.contact.activeTab=0}else b.data.error&&r.enableDebug&&console.log(b.data.error.message)},function(a){r.enableDebug&&console.log(a)})})},a.archiveCampaign=function(){var c=b.confirm().title("Are you sure you want to Archive this Campaign: "+a.currentCampaign.robocall_name+"? You can display all archives campaigns by choosing the Archive button at the bottom of the page.").ariaLabel("Archive").ok("Yes").cancel("Never Mind");b.show(c).then(function(){q.getArchiveCampaign(a.currentCampaign.robocall_uuid).then(function(b){if(r.enableDebug&&console.log(b.data),b.data.success){var c=h("getByUUID")(a.amCampaigns,a.currentCampaign.robocall_uuid,"robocall");null!==c&&a.amCampaigns.splice(c,1),a.currentCampaign=null,a.showAllCampaigns=!0,a.activeCampaign=null,f.path("/automatedmessaging"),a.contact.activeTab=0}else b.data.error&&r.enableDebug&&console.log(b.data.error.message)},function(a){r.enableDebug&&console.log(a)})})},a.removeAutomatedScheduleEntry=function(a){var d=b.confirm().title("Are you sure you want to delete this Automated Messaging Schedule Entry? This is not reversible!").ariaLabel("Delete").ok("Yes").cancel("Never Mind");b.show(d).then(function(){q.getRemoveScheduleEntry(a).then(function(b){if(c.showalerts(b),b.data.success){var d=h("getByUUID")(c.broadcast.schedules,a,"robocall_schedule");null!==d&&c.broadcast.schedules.splice(d,1)}c.closeThisModal()})})},a.setOpcMessageBroadcast=function(b){1===b?(a.opcBroadcast="newrecord",a.opcBroadcastTitle="Record a New Message..."):2===b?(a.opcBroadcast="uploadfile",a.opcBroadcastTitle="Upload an Audio File..."):3===b?(a.opcBroadcast="audiolibrary",a.opcBroadcastTitle="Select from Audio Library..."):(a.opcBroadcast="messagetyped",a.opcBroadcastTitle="Type Your Message...")},a.finishedWizard=function(){};var M=new Date;a.dateFormat="MM-dd-yyyy",a.broadcastDateOptions={formatYear:"yyyy",showWeeks:!1,startingDay:1},a.clear=function(){a.dt=null},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.altInputFormats=["M!/d!/yyyy"],a.inlineOptions={customClass:K,minDate:new Date,showWeeks:!0},a.dateOptions={dateDisabled:J,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},a.popup1={opened:!1},a.open1=function(){a.popup1.opened=!0},a.popup2={opened:!1},a.open2=function(){a.popup2.opened=!0},a.popup3={opened:!1},a.open3=function(){a.popup3.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.seriesDatePopup=[],a.seriesOpenDateBox=function(b){a.seriesDatePopup[b]||(a.seriesDatePopup[b]=!0),a.seriesDatePopup[b]=!0},a.newDatePopup=!1,a.openNewDatePopup=function(){a.newDatePopup=!0},a.formatDate=function(a){var b=new Date(a);return b},a.formatTime=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=a%60;return c=10>c?"0"+c:c,d=10>d?"0"+d:d,b+":"+c+":"+d},a.showCampaignStatus=function(a){return"sent"===a?"Completed":"draft"===a?"Draft":"sending"===a?"Sending":"paused"===a?"Paused":"queue"===a?"Queued For Sending":"stopped"===a?"Stopped":void 0},a.amContactSearch="",a.contacts={amContactSearch:null},a.searchAmContacts=function(b){return!a.contacts.amContactSearch||b.firstname&&-1!=b.firstname.toLowerCase().indexOf(a.contacts.amContactSearch.toLowerCase())||b.lastname&&-1!=b.lastname.toLowerCase().indexOf(a.contacts.amContactSearch.toLowerCase())||b.email_address&&-1!=b.email_address.toLowerCase().indexOf(a.contacts.amContactSearch.toLowerCase())||b.contact_phone1&&-1!=b.contact_phone1.toLowerCase().indexOf(a.contacts.amContactSearch.toLowerCase())?!0:!1},a.landing={amCampaignSearch:null},a.searchCampaigns=function(b){if(!a.landing.amCampaignSearch||b.robocall_name&&-1!=b.robocall_name.toLowerCase().indexOf(a.landing.amCampaignSearch.toLowerCase())||b.status&&-1!=b.status.toLowerCase().indexOf(a.landing.amCampaignSearch.toLowerCase()))return!0;if(b.schedules&&b.schedules.length>0){var c=!1;if(angular.forEach(b.schedules,function(b){b.title&&-1!=b.title.toLowerCase().indexOf(a.landing.amCampaignSearch.toLowerCase())&&(c=!0)}),c)return!0}return!1},a.filterDeliveries=function(b){return a.filterBy&&a.filterByValue?b[a.filterBy]===a.filterByValue?!0:!1:!0},a.sortBy=function(b){a.predicate=b,a.reverse=!a.reverse},a.contactSortBy=function(b){a.contacts.predicate=b,a.contacts.reverse=!a.contacts.reverse},a.btnMnuAct="Total Contacts",a.buttonSelected=function(b){switch(a.btnMnuAct=b,b){case"Total Contacts":a.filterBy=null,a.filterByValue=null;break;case"Bounced":a.filterBy="status",a.filterByValue="bounce";break;case"Dropped":a.filterBy="status",a.filterByValue="dropped";break;case"Deferred":a.filterBy="status",a.filterByValue="deferred";break;case"Opened":a.filterBy="reply",a.filterByValue="open";break;case"Clicked":a.filterBy="reply",a.filterByValue="click";break;case"Unsubscribed":a.filterBy="reply",a.filterByValue="unsubscribe";break;case"Spam Report":a.filterBy="reply",a.filterByValue="spamreport";break;case"Reply":a.filterBy="reply",a.filterByValue="reply";break;case"Invalid Number":a.filterBy="status",a.filterByValue="invalid";break;case"Failed":a.filterBy="status",a.filterByValue="failed"}},L(),a.uploadAudioFile=function(b,d,e){a.uploadingLibrary=!0;var f=new FormData;r.enableDebug&&console.log(d),r.enableDebug&&console.log(b),f.append("robocall_schedule_uuid",d),f.append("recording",b),f.append("title",e),r.enableDebug&&console.log(f),q.postUploadRecording(f).then(function(b){if(r.enableDebug&&console.log(b.data),a.uploadingLibrary=!1,b.data.success){c.showSuccessAlert(b.data.success.message);var e=h("getByUUID")(c.broadcast.schedules,d,"robocall_schedule");null!==e&&(c.broadcast.schedules[e].recording_file=b.data.success.data.filepath),a.audioLibrary.push(b.data.success.data),a.opcBroadcast=null,a.showPlayer=!0}else c.showErrorAlert(b.data.error.message),r.enableDebug&&console.log(b.data.error.message)},function(a){r.enableDebug&&console.log(a)})},a.cancelAddAudio=function(){a.opcBroadcast=null},c.saveToServer=function(b,d){a.uploadingLibrary=!0,r.enableDebug&&console.log(c.myIndex),r.enableDebug&&console.log(b),r.enableDebug&&console.log(c.broadcast.schedules[b]),r.enableDebug&&console.log(d);var e=d?d:null,f=new FormData;f.append("robocall_schedule_uuid",c.broadcast.schedules[b].robocall_schedule_uuid),f.append("recording",c.getaudioModel),f.append("title",e),r.enableDebug&&console.log(f),q.postUploadRecording(f).then(function(d){a.uploadingLibrary=!1,d.data.success?(c.showSuccessAlert(d.data.success.message),c.broadcast.schedules[b].recording_file=d.data.success.data.filepath,c.broadcast.schedules[b].library=d.data.success.data,c.broadcast.schedules[b].audio_library_uuid=d.data.success.data.audio_library_uuid,a.audioLibrary||(a.audioLibrary=[]),a.audioLibrary.push(d.data.success.data),a.opcBroadcast=null,a.showPlayer=!0):c.showErrorAlert(d.data.error.message)},function(a){c.alerts.push({type:"danger",msg:"Failure: "+JSON.stringify(a)})})},a.selectAudioLibraryFile=function(b,d){var e=h("getByUUID")(c.broadcast.schedules,d,"robocall_schedule");null!==e&&(c.broadcast.schedules[e].recording_file=b.filepath,c.broadcast.schedules[e].library=b),a.showPlayer=!0;var f={robocall_schedule_uuid:d,recording_file:b.filepath,audio_library_uuid:b.audio_library_uuid};I(f,e,!0),a.opcBroadcast=null,a.showPlayer=!0},a.recordingBeingEdited=function(b){return a.editingRecording&&a.editingRecording.audio_library_uuid===b.audio_library_uuid},a.setEditRecording=function(b){r.enableDebug&&console.log(b),a.editingRecording=angular.copy(b)},a.cancelEditRecording=function(){var b=h("getByUUID")(a.audioLibrary,a.editingRecording.audio_library_uuid,"audio_library");null!==b&&(a.audioLibrary[b]=angular.copy(a.editingRecording)),a.editingRecording=null},a.isDomainAdmin=function(){return"superadmin"===c.user.accessgroup||"admin"===c.user.accessgroup},a.saveEditRecording=function(b){q.postUpdateAmRecordingTitle(b).then(function(d){if(r.enableDebug&&console.log(d.data),d.data.success){var e=h("getByUUID")(a.audioLibrary,b.audio_library_uuid,"audio_library");null!==e&&(a.audioLibrary[e]=b),a.editingRecording=null}else c.showErrorAlert(d.data.error.message)})},a.deleteRecording=function(d){var e=b.confirm().title("Are you sure you want to Delete the Recording?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");b.show(e).then(function(){q.deleteAmRecording(d.audio_library_uuid).then(function(b){if(r.enableDebug&&console.log(b),b.data.success){var e=h("getByUUID")(a.audioLibrary,d.audio_library_uuid,"audio_library");null!==e&&a.audioLibrary.splice(e,1)}else c.showErrorAlert(b.data.error.message)})})},a.checkForChars=function(a){r.enableDebug&&console.log(a),a||c.showErrorAlert("It seems you have entered an invalid character. Time fields but be numbes only")},a.showHtml=function(a){return k.trustAsHtml(a)},a.onText="Yes",a.offText="No",a.isActive=!0,a.size="normal",a.animate=!0,a.radioOff=!0,a.handleWidth="auto",a.labelWidth="auto",String.prototype.replaceAll=function(a,b){return this.split(a).join(b)}}]),proySymphony.config(["$provide",function(a){a.decorator("taOptions",["taRegisterTool","$delegate","$rootScope",function(a,b,c){return a("backgroundColor",{display:"<div spectrum-colorpicker ng-model='color' on-change='!!color && action(color)' format='\"hex\"' options='options'></div>",action:function(a){var b=this;return this.$editor().wrapSelection?this.$editor().wrapSelection("backColor",a):void setTimeout(function(){b.action(a)},100)},options:{replacerClassName:"fa fa-paint-brush",showButtons:!1},color:"#fff"}),a("fontColor",{display:"<spectrum-colorpicker trigger-id='{{trigger}}' ng-model='color' on-change='!!color && action(color)' format='\"hex\"' options='options'></spectrum-colorpicker>",action:function(a){var b=this;return this.$editor().wrapSelection?this.$editor().wrapSelection("foreColor",a):void setTimeout(function(){b.action(a)},100)},options:{replacerClassName:"fa fa-font",showButtons:!1},color:"#000"}),a("fontName",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-blue dropdown-toggle' type='button' ng-disabled='showHtml()' style='padding-top: 4px'><i class='fa fa-font'></i><i class='fa fa-caret-down'></i></button><ul class='dropdown-menu'><li ng-repeat='o in options' ng-click='action($event, o.css)' class='editor-option' style='font-family: {{o.css}};'><i ng-if='o.active' class='fa fa-check'></i>{{o.name}}</li></ul></span>",action:function(a,b){return __env.enableDebug&&console.log(b),a.stopPropagation&&(a.stopPropagation(),$("body").trigger("click")),this.$editor().wrapSelection("fontName",b)},options:[{name:"Sans-Serif",css:"Arial, Helvetica, sans-serif"},{name:"Serif",css:"'times new roman', serif"},{name:"Wide",css:"'arial black', sans-serif"},{name:"Narrow",css:"'arial narrow', sans-serif"},{name:"Comic Sans MS",css:"'comic sans ms', sans-serif"},{name:"Courier New",css:"'courier new', monospace"},{name:"Garamond",css:"garamond, serif"},{name:"Georgia",css:"georgia, serif"},{name:"Tahoma",css:"tahoma, sans-serif"},{name:"Trebuchet MS",css:"'trebuchet ms', sans-serif"},{name:"Helvetica",css:"'Helvetica Neue', Helvetica, Arial, sans-serif"},{name:"Verdana",css:"verdana, sans-serif"},{name:"Proxima Nova",css:"proxima_nova_rgregular"}]}),a("fontSize",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-blue dropdown-toggle' type='button' ng-disabled='showHtml()' style='padding-top: 4px'><i class='fa fa-text-height'></i><i class='fa fa-caret-down'></i></button><ul class='dropdown-menu'><li ng-repeat='o in options' ng-click='action($event, o.value)' class='editor-option' style='font-size: {{o.css}};'><i ng-if='o.active' class='fa fa-check'></i> {{o.name}}</li></ul></span>",action:function(a,b){return a.stopPropagation&&(a.stopPropagation(),$("body").trigger("click")),this.$editor().wrapSelection("fontSize",parseInt(b))},options:[{name:"xx-small",css:"xx-small",value:1},{name:"x-small",css:"x-small",value:2},{name:"small",css:"small",value:3},{name:"medium",css:"medium",value:4},{name:"large",css:"large",value:5},{name:"x-large",css:"x-large",value:6},{name:"xx-large",css:"xx-large",value:7}]}),b.toolbar[4]=[],b.toolbar[4].push("fontColor","fontName","fontSize"),b}])}]),proySymphony.config(["$provide",function(a){a.decorator("taOptions",["taRegisterTool","$delegate","$rootScope",function(a,b,c){return c.$watchCollection("customFields",function(d,e){__env.enableDebug&&console.log(d),__env.enableDebug&&console.log(e),d!==e&&(a("quickFields",{display:"<span class='bar-btn-dropdown dropdown'><button class='btn btn-blue dropdown-toggle' type='button' ng-disabled='showHtml()' style='padding-top: 4px'>shortcodes<i class='fa fa-caret-down'></i></button><ul class='dropdown-menu'><li ng-repeat='o in options' ng-click='action($event, o.key)' class='editor-option'><i ng-if='o.active' class='fa fa-check'></i> {{o.value}}</li></ul></span>",tooltiptext:c.tips.automated.insertshortcodeemail,action:function(a,b){a.stopPropagation&&(a.stopPropagation(),$("body").trigger("click"));var c="{{"+b+"}}";return __env.enableDebug&&console.log(c),this.$editor().wrapSelection("insertHTML",c,!0)},options:c.customFields}),b.toolbar[4].push("quickFields"))}),b}])}]),proySymphony.controller("FaxCtrl",["$scope","$filter","$auth","$mdDialog","$location","$rootScope","FileUploader","dataFactory","$uibModal","$window","$timeout","metaService","userContactService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.sortDown=!0,a.sortCol="updated_at",a.faxMessages=[],a.currentPage=1,a.callsPerPage=5,a.useCoverPage=!1,a.faxSubject="",a.faxMessage="",a.messagesBegin=function(){return a.callsPerPage*(a.currentPage-1)},a.messagesEnd=function(){return a.messagesBegin()+a.callsPerPage-1},a.isAdminGroupOrGreater=function(){var a=f.user.accessgroup;return"admin"===a||"superadmin"===a},a.sortBy=function(b){__env.enableDebug&&console.log(b),b==a.sortCol?a.sortDown=!a.sortDown:(a.sortDown=!0,a.sortCol=b)},a.validDestinationNumber=function(){return a.destinationNumber?10==a.destinationNumber.replace(/[^0-9]/g,"").length:!1},a.closeSuccess=function(){a.showSuccessMsg=!1},a.fileInQueue=function(){return n?n.queue.length>0:!1},a.queueFileName=function(){return n.queue.first.filename},a.handleFileUploaderButton=function(){n&&n.queue.length>1||a.triggerUpload()},a.loseFocusIfEnter=function(a){"Enter"===a.key&&a.target.blur()},a.toggleEditingAuthorizedEmail=function(b){a.editingAuthorizedEmail=!a.editingAuthorizedEmail,a.editingAuthorizedEmail&&f.$broadcast("editing.authorized")},a.$watch("authorizedEmailAddress",function(a,b){if(b&&a!==b){var c={fax_authorized_email_address:a};h.postUpdateVfax(c).then(function(a){a.data.success?f.alerts.push({success:!0,message:a.data.success.message}):a.data.error&&f.alerts.push({error:!0,message:a.data.error.message})})}}),a.$watch("forwardEmailAddress",function(a,b){if(b&&a!==b){var c={fax_reply_email_address:a};h.postUpdateVfax(c).then(function(a){a.data.success?f.alerts.push({success:!0,message:a.data.success.message}):a.data.error&&f.alerts.push({error:!0,message:a.data.error.message})})}}),a.toggleEditingForwardEmail=function(){a.editingForwardEmail=!a.editingForwardEmail,a.editingForwardEmail&&f.$broadcast("editing.forward")},a.getPdfUrl=function(a){var b=(__env.apiUrl&&""!==__env.apiUrl?__env.apiUrl:symphonyConfig.onescreenUrl)+"/vfax/viewpdf/"+a.vfax_message_uuid+"?token="+f.userToken;return b},a.showOrderFaxNumber=function(){h.getDaysRemain().then(function(a){var b=a.data.success.data,c=parseFloat(f.user.groupcode.per_fax_line).toFixed(2),e=(c*parseFloat(b.remain)/parseFloat(b.days)).toFixed(2),g=d.confirm().title("Please Confirm").htmlContent("A pro-rated charge of $"+e+"* will be added to your next monthly bill. You will be charged $"+c+'/month plus taxes/fees for this fax line moving forward. <br><span style="font-size: 12px;">* $'+c+"/line x "+b.remain+" days remaining in this month / "+b.days+" days this month</span>").ariaLabel("Confirm").ok("I Agree").cancel("Cancel");d.show(g).then(function(){f.showModalWithData("/fax/faxordermodal.html",[])})})},a.viewMessageImage=function(a){h.getFaxImage(a).then(function(a){__env.enableDebug&&console.log("FAX IMAGE"),__env.enableDebug&&console.log(a.data.success.data.original_filename);var b=a.data.success.data.original_filename.split("."),c=b[b.length-1],d="data:"+o(c)+";base64, "+a.data.success.data.file;"jpg"===c?f.showModalWithData("/fax/viewfaximage.html",{obj:d}):"pdf"===c?j.open(d):(angular.element("#download_link").attr("href",d),angular.element("#download_link").attr("download",a.data.success.data.original_filename),angular.element("#download_link")[0].click())})},a.assignVFaxProps=function(){a.userFaxNumber=f.user.domain.vfax.fax_number,a.forwardEmailAddress=f.user.domain.vfax.fax_reply_email_address,a.authorizedEmailAddress=f.user.domain.vfax.fax_authorized_email_address,a.userCallerIdName=f.user.domain.vfax.caller_id_name},f.$on("did.ordered",function(b){a.assignVFaxProps(),j.localStorage.setItem("currentUser",JSON.stringify(f.user))}),a.showFileName=function(a){var b="";return a.original_filename&&(b=a.original_filename,b.length>30&&(b=b.substring(0,14)+" ... "+b.substring(b.length-14))),b},a.showMessageStatus=function(a){return"sent"===a.status||"received"===a.status||"sending"===a.status?b("capitalize")(a.status):"Failed"},a.copyFaxToManagementSystem=function(a){console.log(a);({uuid:a.vfax_message_uuid});h.postCopyFaxToManagementSystem(a).then(function(a){console.log(a)},function(a){console.log(a)})},a.getCoverPreviewUrl=function(){var b=(__env.apiUrl&&""!==__env.apiUrl?__env.apiUrl:symphonyConfig.onescreenUrl)+"/vfax/getcoverpreview/"+a.userFaxNumber+"?token="+f.userToken;return b},a.showCopyTooltip=function(){var a=f.user;return a.exportType&&a.exportType.partner_code&&"generic"!==a.exportType.partner_code?a.exportType.partner_name:"Management System"},a.getFaxMessages=function(){a.userFaxNumber&&h.getFaxMessages(f.user.domain.domain_uuid).then(function(b){b.data&&b.data.success&&(angular.copy(b.data.success.data.message,a.faxMessages),a.totalItems=a.faxMessages.length,__env.enableDebug&&console.log("FAX MESSAGES"),__env.enableDebug&&console.log(a.faxMessages))})},a.getUserContact=function(a){var b=a.send_user_uuid,c=a.domain_uuid;return m.getContactByUserUuid(b,c)},a.resendMessage=function(a){h.getResendFaxMessage(a).then(function(a){__env.enableDebug&&console.log(a),a.data.success?f.alerts.push({success:!0,message:a.data.success.message}):a.data.error&&f.alerts.push({error:!0,message:a.data.error.message})})},a.getFaxImage=function(a){h.getFaxImage(a).then(function(a){__env.enableDebug&&console.log(a)})};var n=a.uploader=new g({url:f.onescreenBaseUrl+"/vfax/send",queueLimit:1,headers:{Authorization:"Bearer "+f.userToken}});n.filters.push({name:"faxFilter",fn:function(a,b){var c="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|",d=-1!=="|jpg|jpeg|png|pdf|doc|docx|xls|csv|htm|html|txt|tif|tiff|vnd.openxmlformats-officedocument.wordprocessingml.document|msword|vnd.ms-excel|vnd.openxmlformats-officedocument.spreadsheetml.sheet|plain|".indexOf(c);return d}});var o=function(a){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",pdf:"application/pdf"}[a]};a.sendFax=function(){a.sending=!0,n.uploadAll()},a.triggerUpload=function(){n.clearQueue(),angular.element("#fax-upload").trigger("click")},n.onWhenAddingFileFailed=function(a,b,c){__env.enableDebug&&console.info("onWhenAddingFileFailed",a,b,c)},n.onAfterAddingFile=function(b){__env.enableDebug&&console.info("onAfterAddingFile",b),a.queueFileName=b._file.name},n.onAfterAddingAll=function(a){__env.enableDebug&&console.info("onAfterAddingAll",a)},n.onBeforeUploadItem=function(b){console.log(a.useCoverPage);var c={destination_number:a.destinationNumber,useCoverPage:a.useCoverPage?"true":"false",faxSubject:a.faxSubject?a.faxSubject:null,faxMessage:a.faxMessage?a.faxMessage:null,faxRecipient:a.faxRecipient?a.faxRecipient:null};console.log(c),b.formData.push(c)},n.onProgressItem=function(a,b){__env.enableDebug&&console.info("onProgressItem",a,b)},n.onProgressAll=function(a){__env.enableDebug&&console.info("onProgressAll",a)},n.onSuccessItem=function(b,c,d,e){
__env.enableDebug&&console.info("onSuccessItem",b,c,d,e),__env.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),__env.enableDebug&&console.log(c),a.sending=!1,n.clearQueue(),a.$apply(),c.success?(a.faxMessages.push(c.success.data),a.useCoverPage=!1,a.showSuccessMsg=!0):(a.sending=!1,f.showErrorAlert("We could not upload that file at this time. Please contact customer support to report this error."))},n.onErrorItem=function(b,c,d,e){__env.enableDebug&&console.info("onErrorItem",b,c,d,e),a.sending=!1,f.showErrorAlert("We could not upload that file at this time. Please contact customer support to report this error.")},n.onCancelItem=function(a,b,c,d){__env.enableDebug&&console.info("onCancelItem",a,b,c,d)},n.onCompleteItem=function(a,b,c,d){__env.enableDebug&&console.info("onCompleteItem",a,b,c,d)},n.onCompleteAll=function(){__env.enableDebug&&console.info("onCompleteAll"),n.queue.length=0};var p=new Date;a.fromDate="",a.toDate="",a.dateFormat="yyyy-MM-dd",a.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,minDate:new Date(2016,1,1),maxDate:p},a.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:1,maxDate:p},a.fromDatePopup={opened:!1},a.toDatePopup={opened:!1},a.ChangeToMinDate=function(b){if(null!=b){var c=new Date(b);a.toDateOptions.minDate=c,a.toDate=c}},a.ChangeToMinDate(),a.OpenfromDate=function(){a.fromDatePopup.opened=!a.fromDatePopup.opened},a.OpentoDate=function(){a.toDatePopup.opened=!a.toDatePopup.opened},a.dateFilter=function(b,c,d){var e=new Date(b.updated_at.split(" ")[0]+" 00:00:00");return a.fromDate&&a.fromDate>e?!1:a.toDate&&a.toDate<e?!1:!0},l.registerOnRootScopeUserLoadCallback(function(){f.user.domain.vfax&&(a.assignVFaxProps(),a.getFaxMessages())})}]),proySymphony.controller("ConferenceCallCtrl",["$scope","$uibModal","$uibModalStack","$rootScope","__env","symphonyConfig","dataFactory","$filter","$window","Slug","clipboard","$cookies","$interval","callService","userContactService","videoConfService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.eventTimer={},a.didNumber=null,d.didnumber=null,a.confName=d.user.username,d.getConfig=function(){g.getConferenceConfiguration().then(function(b){console.log("AUDIO CONFERENCE CONFIGURATION"),console.log(b),console.log("Conference config error:  86776564"===b.data),"Conference config error:  86776564"===b.data?d.alerts.push({type:"error",msg:"Error: "+b.data}):(a.domainName=b.data.domainName,d.confExtension=b.data.modExtension,d.dialInNumber=b.data.did,a.confName=b.data.confName)})},d.getConfig(),a.updateConfList=function(){g.listConferenceUsers(a.domainName).then(function(a){var b,c,e=!1;a.data.userList&&a.data.userList.forEach(function(a){return a.cidNumber===d.user.user_ext?(b=a.cidName,c=a.cidNumber,e=!0,!0):void 0}),console.log(a.data),e?(console.log("printing: "+a.data.userList),d.confMembers=a.data.userList):(d.confMembers=!1,d.confMembers=[])})},a.userContactsOnly=o.userContactsOnly,a.$watch("userContactsOnly.length",function(b,c){!a.didNumber&&b&&(a.didNumber=a.userContactsOnly[0].phones[0].phone_number)}),a.startConference=function(){console.log(a.didNumber),console.log(a.confName+" - "+a.domainName),null==a.didNumber?d.alerts.push({error:!0,message:"Please Select Conference DID."}):(d.didnumber=a.didNumber,g.listConferenceUsers(a.domainName).then(function(b){if(console.log(b.data),b.data.userList&&0!==b.data.userList.length){d.onCallWith=!1,d.confcalloptions="start";var c,e,f=!1;if(d.didnumber=null,b.data.userList.forEach(function(a){return a.cidNumber===d.user.user_ext?(c=a.cidName,e=a.cidNumber,f=!0,!0):void 0}),f)d.onConferenceCall=!1,d.startStopConfToolTip="Start conference before entering phone numbers",d.startStopConfBtn="Start conference",d.iconStartConf="fa-gear",d.clickBtn3&&(a.recordingStopConference(),d.clickBtn3=!1,d.toolRecording="Start recording"),a.clickBtn4&&(a.unMuteAllConference(),d.clickBtn4=!1,d.toolMute="Unmute everyone",d.iconMuteCC="mdi-headset mdi-24px"),a.clickBtn5&&(a.unLockConference(),d.clickBtn5=!1,d.toolLock="Lock conference",d.iconLock="mdi-lock-open mdi-24px"),d.showScreenShare=!1,d.showCounterTime=!1,d.clickBtn1=!1,d.clickBtn2=!1,d.clickBtn3=!1,d.clickBtn4=!1,d.clickBtn5=!1,d.participants="",a.endConference();else{var c,e;b.data.userList.forEach(function(a){return console.log(a),"moderator"===a.flags.substring(a.flags.length-9,a.flags.length)?(c=a.cidName,e=a.cidNumber,!0):void 0}),d.alerts.push({type:"danger",msg:"Sorry the conference room is being used by:  "+c+"  Ext: ( "+e+" ) "})}}else d.onConferenceCall=!0,n.makeCall(d.confExtension),d.startStopConfToolTip="Disconnect all calls",d.startStopConfBtn="Stop conference",d.iconStartConf="fa-gear faa-spin animated",d.showCounterTime=!0,a.eventTimer.startConf=new Date}))},d.$on("end.conference.call",function(){a.startConference()});var q=m(function(){a.updateConfList()},5e3);a.$on("$destroy",function(){q&&m.cancel(q)}),a.endConference=function(){g.getEndConference(a.domainName+"-"+a.domainName).then(function(b){console.log("AUDIO CONFERENCE END CONFERENCE"),a.updateConfList(),console.log(b),d.onConferenceCall=!1})},a.shakingIcon="mdi mdi-phone-plus",a.addParticipantsToConference=function(){console.log(d.didnumber),a.shakingIcon="mdi mdi-phone-plus mdi-24px faa-shake animated";var b=a.getParticipants(),c={participants:b,extension:d.user.user_ext,domain:a.domainName,didnumber:d.didnumber};g.postCreateConference(c).then(function(b){console.log("AUDIO CONFERENCE CREATE CONFERENCE"),console.log(b),a.shakingIcon="mdi mdi-phone-plus mdi-24px",a.participants=""},function(b){console.log("AUDIO CONFERENCE CREATE CONFERENCE (FAILED)"),console.log(b),a.participants=""})},a.getParticipants=function(){return t(a.participants)},a.toggleUserMute=function(b){a.userIsMuted(b)?s(b):r(b)},a.hangupUser=function(b){g.getHangupUser(a.domainName,b).then(function(b){console.log("AUDIO CONFERENCE HANGUP USER"),a.updateConfList(),console.log(b)})},a.userIsMuted=function(a){return a.flags.indexOf("speak")<0};var r=function(b){console.log(b),g.getMuteUser(a.domainName+"-"+a.domainName,b.userNumber).then(function(b){a.updateConfList(),console.log("AUDIO CONFERENCE MUTE USER"),console.log(b)})},s=function(b){g.getUnmuteUser(a.domainName+"-"+a.domainName,b.userNumber).then(function(b){a.updateConfList(),console.log("AUDIO CONFERENCE UNMUTE USER"),console.log(b)})},t=function(a){console.log(a);var b=a.split(",");return b=$.map(b,function(a){return a.replace(/[^0-9]/g,"")}),b.join(",")};a.recordingStartConference=function(){g.recodStartConference(d.conferenceCallID).then(function(a){console.log(a)},function(a){console.log(a)})},a.recordingStopConference=function(){g.recordStopConference(d.conferenceCallID).then(function(a){console.log(a)},function(a){console.log(a)})},a.muteAllConference=function(){g.muteAllConference(a.domainName+"-"+a.domainName).then(function(a){console.log(a)},function(a){console.log(a)})},a.unMuteAllConference=function(){g.unMuteAllConference(a.domainName+"-"+a.domainName).then(function(a){console.log(a)},function(a){console.log(a)})},a.lockConference=function(){g.lockConference().then(function(a){console.log(a)},function(a){console.log(a)})},a.unLockConference=function(){g.unLockConference().then(function(a){console.log(a)},function(a){console.log(a)})},a.buttonsAction=function(b){angular.element("#participants").focus(),0===b?d.onConferenceCall?(d.onConferenceCall=!1,d.startStopConfToolTip="Start conference before entering phone numbers",d.startStopConfBtn="Start conference",d.iconStartConf="fa-gear",d.showScreenShare=!1,d.showCounterTime=!1,d.clickBtn1=!1,d.clickBtn2=!1,d.clickBtn3=!1,d.clickBtn4=!1,d.clickBtn5=!1,d.participants="",a.endConference()):(d.startStopConfToolTip="Disconnect all calls",d.startStopConfBtn="Stop conference",d.iconStartConf="fa-gear faa-spin animated",d.showCounterTime=!0,a.eventTimer.startConf=new Date,a.startConference()):1===b?(a.addParticipantsToConference(),d.clickBtn1=!0):2===b?(d.showScreenShare=!d.showScreenShare,d.showScreenShare?(d.clickBtn2=!0,d.toolTipScreenS="Hide screen share options"):(d.clickBtn2=!1,d.toolTipScreenS="Show screen share options")):3===b?d.clickBtn3?(a.recordingStopConference(),d.clickBtn3=!1,d.toolRecording="Start recording"):(a.recordingStartConference(),d.clickBtn3=!0,d.toolRecording="Stop recording"):4===b?a.clickBtn4?(a.unMuteAllConference(),d.clickBtn4=!1,d.toolMute="Unmute everyone",d.iconMuteCC="mdi-headset mdi-24px"):(a.muteAllConference(),d.clickBtn4=!0,d.toolMute="Mute everyone",d.iconMuteCC="mdi-headset-off mdi-24px"):5===b&&(a.clickBtn5?(a.unLockConference(),d.clickBtn5=!1,d.toolLock="Lock conference",d.iconLock="mdi-lock-open mdi-24px"):(a.lockConference(),d.clickBtn5=!0,d.toolLock="Unlock conference",d.iconLock="mdi-lock mdi-24px"))},a.searchContactInfo=function(a){var b=null,c=null,g=(e.symphonyUrl&&""!==e.symphonyUrl?e.symphonyUrl:f.symphonyUrl,h("getContactbyPhone")(d.userContacts,a));g&&(c=g.contact_name_full,b=g.contact_profile_image),c=null!==c?c:"Contact unregistered";var i={name:c,avatar:b};return i}}]),proySymphony.controller("ctrlNavBar",["$scope","$auth","$location","$rootScope","$uibModal","$document","__env","$uibModalStack","$http","dataFactory",function(a,b,c,d,e,f,g,h,i,j){a.menuOpen=!1,a.openNav=function(){a.menuOpen=!a.menuOpen}}]),proySymphony.controller("ctrlSupport",["$scope","$routeParams","$location","$interval","$auth","__env","dataFactory","symphonyConfig","$window","$rootScope",function(a,b,c,d,e,f,g,h,i,j){a.callSupport=function(){alert("Calling Support")},a.toggleChat=function(){alert("Toggling Chat")}}]),proySymphony.controller("BillingCtrl",["$scope","$filter","$location","$routeParams","$rootScope","$auth","$window","usefulTools","dataFactory","__env","symphonyConfig","$interval","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.savedCards=[]}a.paid=!1,a.showNewCard=!1,a.amount=10,n(),a.initializeBilling=function(){a.accountInvoices=[],i.getInvoices().then(function(b){b.data.success?(a.accountInvoices=b.data.success.invoices,a.balanceDue=b.data.success.balance,a.lastPayment=b.data.success.lastPayment):console.log(b.data.error.message)})},a.addCardStripe=function(b,c){console.log(c),c.error?(a.paid=!1,a.message="Error from Stripe.com",console.log(a.message)):i.getAddCardStripe(c.id).then(function(b){b.data.success&&(a.savedCards.push(b.data.success.data),console.log(a.savedCards),a.showNewCard=!1)})},a.generateInvoice=function(){i.generateInvoice(e.user.domain_uuid).then(function(a){console.log(a)})},a.addStripePayment=function(){var b={card_id:a.card_id,pay_amount:a.pay_amount};i.postAddStripePayment(b).then(function(b){b.data.success&&(a.savedCards.push(b.data.success.data),console.log(a.savedCards),a.showNewCard=!1)})},a.handleStripe=function(b,c){if(c.error)a.paid=!1,a.message="Error from Stripe.com",console.log(a.message);else{var d={token:c.id,customer_id:"cus_9FUMzLfY7b1g2W",total:a.amount};console.log(d),a.paid=!0}}}]),proySymphony.controller("ctrlAutoAttendant",["$scope","$mdToast","$auth","$mdDialog","$filter","Idle","$interval","$uibModal","Keepalive","$rootScope","$routeParams","usefulTools","$myModal","dataFactory","$timeout","$uibModalStack","recordingService","userContactService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){n.getAudioLibrary("ivrgreeting").then(function(b){b.data.success?(console.log("Greetings LOADED"),console.log(b.data.success),a.audioLibrary=b.data.success.data):b.data.error&&console.log(b.data.error.message)})}function t(){console.log(j.newIvr),n.getVoicemailGreetingsById(j.newIvr.did.ext).then(function(b){console.log(b.data),b.data.success?(console.log("AUDIO LIBRARY"),console.log(b.data.success),a.voicemailGreetings=b.data.success.data,console.log(a.voicemailGreetings)):console.log(b.data.error.message)})}function u(b){var c=b.date,d=b.mode;if("day"===d)for(var e=new Date(c).setHours(0,0,0,0),f=0;f<a.events.length;f++){var g=new Date(a.events[f].date).setHours(0,0,0,0);if(e===g)return a.events[f].status}return""}function v(){var b=[];r.contacts.forEach(function(a){"user"==a.contact_type&&a.phones.forEach(function(c){"DID"==c.phone_label&&a.contact_name_full&&a.extension&&b.push({ext:a.user_ext,name:a.contact_name_full,phone:c.phone_number,user_uuid:a.user_uuid})})}),a.userList2.items=e("orderBy")(b,"ext",!1)}function w(b){return n.getValidDIDs(b).then(function(b){console.log(b.data),b.data.success?a.availDids=b.data.success.data:(console.log(b.data.error.message),a.availDids=[])})}function x(){return n.getAvailableDidsForAa().then(function(b){return b.data.success?(a.reusableDids=b.data.success.data,console.log(a.reusableDids),a.reusableDids):(console.log(b.data.error.message),[])})}function y(){var a=new Date,b=new Date;a.setHours(9),a.setMinutes(0),a.setSeconds(0),b.setHours(17),b.setMinutes(0),b.setSeconds(0);var c={weekly:[{day:"sunday",daynum:"1",times:{start:"",end:""},disabled:!0},{day:"monday",daynum:"2",times:{start:a,end:b},disabled:!1},{day:"tuesday",daynum:"3",times:{start:a,end:b},disabled:!1},{day:"wednesday",daynum:"4",times:{start:a,end:b},disabled:!1},{day:"thursday",daynum:"5",times:{start:a,end:b},disabled:!1},{day:"friday",daynum:"6",times:{start:a,end:b},disabled:!1},{day:"saturday",daynum:"7",times:{start:"",end:""},disabled:!0}],holiday:[]};return c}function z(a){n.getPresetHolidays(a).then(function(a){console.log(a.data),j.newIvr.presetHolidays=angular.copy(D),angular.forEach(j.newIvr.presetHolidays,function(b){-1!==a.data.success.data.indexOf(b.preset)&&(b.status=!0)}),console.log(j.newIvr)})}function A(b){return console.log(b),b.ivr_menu_enabled=!1,a.toggleEnable(b).then(function(){return b.ivr_menu_enabled=!0,a.toggleEnable(b)})}function B(){n.getRingGroups(a.domain.domain_uuid).then(function(b){b.data.success?(a.availRinggroups=b.data.success.data,console.log(a.availRinggroups)):(console.log(b.data.error.message),j.showErrorAlert(b.data.error.message))})}function C(){var a=document.getElementById("menu-options").offsetTop;document.getElementById("edit-auto-attendant").scrollTop=a-10}a.sendToOpts=[{name:"Dial By Name",tip:""},{name:"Transfer to an Extension",tip:"Select only one person"},{name:"Transfer to External Number",tip:"Send to a specific number"},{name:"Ring Group",tip:"Group"}],a.showExtras=!0,a.uploadingLibrary=!1,a.showAddOptions=!1,a.selectedAttendant={},j.jsonObject={},j.myOptions={ivr_menu_uuid:""},j.myAttendants=[],j.optionsList=[],j.currentIndex=0,a.weeklyHours=[],a.holidayHours=[],j.usedDid=[],a.aaWorking={},j.usedDid1=[],a.userList={selected:null,items:[]},a.userList2={selected:null,items:[]},j.availableContacts=[],j.newIvr={},a.menu={main:!0,create:!1},a.domain=j.user.domain,a.setOpcMessageBroadcast=function(b){1===b?(a.opcBroadcast="newrecord",a.opcBroadcastTitle="Record a New Message..."):2===b?(a.opcBroadcast="uploadfile",a.opcBroadcastTitle="Upload an Audio File..."):3===b?(a.opcBroadcast="audiolibrary",a.opcBroadcastTitle="Select from Audio Library..."):(a.opcBroadcast="messagetyped",a.opcBroadcastTitle="Type Your Message...")},a.recordingService=q,a.checkIfExisting=function(){var b=!1;console.log(a.myAttendants),console.log(j.newIvr.did),angular.forEach(a.myAttendants,function(a){console.log(a.did.phone),b||j.newIvr.did.phone!==a.did.phone||(console.log(j.newIvr.did),j.newIvr.did={},b=!0,j.showErrorAlert("Selecting this number will create a new Auto Attendant on top of an existing Attendant. If you wish to do this please use the Clone Option from the main table instead."))})},a.audioFilePlaying=null,a.recordingPlaying=!1,a.playRecording=function(a){console.log(a),j.showAudioModal(a,"ivr-greeting")},a.playAudioFile=function(b,c){a.audioFilePlaying=c;var d=__env.apiUrl?__env.apiUrl:symphonyConfig.audioUrl;a.audio=new Audio(d+b),a.recordingPlaying=!0,a.audio.play()},a.stopPlaying=function(){a.audio.pause(),a.audioFilePlaying=!1,a.recordingPlaying=!1},a.currentVoicemailGreeting=function(a){return j.newIvr.vmgreeting&&a.voicemail_greeting_uuid===j.newIvr.vmgreeting.voicemail_greeting_uuid},a.cancelAddAudio=function(){a.opcBroadcast=null},s(),a.uuid=j.user.domain_uuid,a.uploadAudioFile=function(b,c){a.uploadingLibrary=!0;var d=new FormData;console.log(a.uuid),console.log(b),d.append("recording",b),d.append("domain_uuid",a.uuid),d.append("category","ivrgreeting"),d.append("ivr_menu_uuid",j.newIvr.ivr_menu_uuid),d.append("title",c),console.log(d),n.postUploadAttendantGreeting(d).then(function(b){console.log(b.data),b.data.success?(a.uploadingLibrary=!1,j.showSuccessAlert(b.data.success.message),a.audioLibrary.push(b.data.success.data),j.newIvr.ivr_menu_greet_long=b.data.success.data.original_filename,a.opcBroadcast=null,s()):(a.errorMessage=b.data.error.message,console.log(b.data.error.message))},function(a){console.log(a)})},a.uploadVoicemailAudio=function(b){var c=new FormData;c.append("recording",b),c.append("domain_uuid",a.uuid),c.append("voicemail_id",j.newIvr.did.ext),n.postUploadAttendantVoicemailGreeting(c).then(function(b){console.log(b.data),b.data.success?(j.showSuccessAlert(b.data.success.message),j.newIvr.vmgreeting=b.data.success.data,a.showVoicemailSelector=!1,a.opcBroadcast=null,t()):(a.errorMessage=b.data.error.message,console.log(b.data.error.message))},function(a){console.log(a)})},a.selectVoicemailGreeting=function(b){var c={greeting_id:b.greeting_id,voicemail_id:j.newIvr.did.ext};n.postSetVoicemailGreetingId(c).then(function(c){c.data.success&&(j.newIvr.vmgreeting=b,a.opcBroadcast=null,j.showSuccessAlert(c.data.success.message))})},j.saveToServer=function(b,c){console.log(c);var d=c?c:null;if(0==b){var e=new FormData,f=q.blob;f=new File([f],"recording",{type:f.type}),e.append("recording",f),e.append("domain_uuid",a.uuid),e.append("category","ivrgreeting"),e.append("ivr_menu_uuid",j.newIvr.ivr_menu_uuid),e.append("title",d),console.log(e),n.postUploadAttendantGreeting(e).then(function(b){b.data.success?(j.showSuccessAlert(b.data.success.message),a.opcBroadcast=null,j.newIvr.ivr_menu_greet_long=b.data.success.data.original_filename,s()):a.errorMessage=b.data.error.message},function(a){j.alerts.push({type:"danger",msg:"Failure: "+JSON.stringify(a)})})}else{var g=new FormData;g.append("recording",j.getaudioModel),g.append("domain_uuid",a.uuid),g.append("voicemail_id",j.newIvr.did.ext),g.append("title",d),n.postUploadAttendantVoicemailGreeting(g).then(function(b){console.log(b.data),b.data.success?(j.showSuccessAlert(b.data.success.message),j.newIvr.vmgreeting=b.data.success.data,a.showVoicemailSelector=!1,a.opcBroadcast=null,t()):(a.errorMessage=b.data.error.message,console.log(b.data.error.message))},function(a){console.log(a)})}};var D={new_years_day:{preset:"new_years_day",title:"New Year's Day",mon:"1",mday:"1",wday:null,group:100,status:!1},martin_luther_king_jr_day:{preset:"martin_luther_king_jr_day",title:"Martin Luther King Jr. Day",mon:"1",mday:"15-21",wday:"2",group:105,status:!1},presidents_day:{preset:"presidents_day",title:"Presidents Day",mon:"2",mday:"15-21",wday:"2",group:110,status:!1},memorial_day:{preset:"memorial_day",title:"Memorial Day",mon:"5",mday:"25-31",wday:"2",group:115,status:!1},independence_day:{preset:"independence_day",title:"Independence Day",mon:"7",mday:"4",wday:null,group:120,status:!1},labor_day:{preset:"labor_day",title:"Labor Day",mon:"9",mday:"1-7",wday:"2",group:125,status:!1},columbus_day:{preset:"columbus_day",title:"Columbus Day",mon:"10",mday:"8-14",wday:"2",group:130,status:!1},veterans_day:{preset:"veterans_day",title:"Veteran's Day",mon:"11",mday:"11",wday:null,group:135,status:!1},thanksgiving_day:{preset:"thanksgiving_day",title:"Thanksgiving Day",mon:"11",mday:"22-28",wday:"5-6",group:140,status:!1},christmas_day:{preset:"christmas_day",title:"Christmas Day",mon:"12",mday:"25",wday:null,group:145,status:!1}};a.hasPresets=function(a){var b=!1;return angular.forEach(a.presetHolidays,function(a){a.status&&(b=!0)}),b},a.hasWeekly=function(){var a=!1;return angular.forEach(j.scheduleType.weekly,function(b){b.disabled||(a=!0)}),a},a.togglePresetStatus=function(b){var c=0;if(angular.forEach(j.newIvr.presetHolidays,function(a){a.status&&a.preset!==b.preset&&(c+=1)}),console.log(c),!a.hasWeekly()&&0===c&&0===j.scheduleType.holiday.length)return j.showErrorAlert("You can not delete this holiday entry at this time because an auto attendant must have at least one day of the week with set hours, have one custom holiday created or one preset holiday enabled."),void(j.newIvr.presetHolidays[b.preset].status=!b.status);var d={preset:b,attendant:j.newIvr};console.log(d),n.postTogglePresetHoliday(d).then(function(a){a.data.success&&(j.newIvr.presetHolidays[b.preset].status=a.data.success.data)})},j.cancelCreateGroup=function(){var b=d.confirm().title("Are you sure you want to cancel editing? Any unsaved changes will be lost.").ariaLabel("Cancel").ok("Yes").cancel("Never Mind");d.show(b).then(function(){p.dismissAll(),a.cancelEditing()})},a.selectAudioLibraryFile=function(b){if(b){var c={ivr_menu_uuid:j.newIvr.ivr_menu_uuid,greeting:b};n.postChangeAaGreeting(c).then(function(c){if(j.showalerts(c),c.data.success){console.log(c.data.success.data),a.opcBroadcast=null;j.newIvr.ivr_menu_greet_long;if("false"===c.data.success.data.used){var d=e("getByUUID")(a.audioLibrary,c.data.success.data.audio_library_uuid,"audio_library");null!==d&&(a.audioLibrary[d].used="false")}j.newIvr.greeting=b,j.newIvr.ivr_menu_greet_long=b.original_filename;var d=e("getByUUID")(a.audioLibrary,b.audio_library_uuid,"audio_library");null!==d&&(a.audioLibrary[d].used="true")}})}},a.getGreetingFilepath=function(a){var b="/imported/freeswitch/storage/voicemail/default/"+j.user.domain.domain_name+"/"+j.newIvr.did.ext+"/";return b+a},a.getCurrentGreeting=function(b){console.log(greeting_id);var c=null;return angular.forEach(a.voicemailGreetings,function(b){console.log(b),b.greeting_id==greeting_id&&(c=a.getGreetingFilepath(b.greeting_filename))}),c},a.initDirectory=function(){a.directoryOpts=[{digit:"1",available:!0},{digit:"2",available:!0},{digit:"3",available:!0},{digit:"4",available:!0},{digit:"5",available:!0},{digit:"6",available:!0},{digit:"7",available:!0},{digit:"8",available:!0},{digit:"9",available:!0},{digit:"0",available:!0},{digit:"#",available:!0},{digit:"*",available:!0}]},a.initDirectory(),a.initSchedule=function(){j.hstep=1,j.mstep=1,j.ismeridian=!0,j.scheduleType={weekly:[{day:"sunday",daynum:"1",times:{start:"",end:""},disabled:!0},{day:"monday",daynum:"2",times:{start:"",end:""},disabled:!0},{day:"tuesday",daynum:"3",times:{start:"",end:""},disabled:!0},{day:"wednesday",daynum:"4",times:{start:"",end:""},disabled:!0},{day:"thursday",daynum:"5",times:{start:"",end:""},disabled:!0},{day:"friday",daynum:"6",times:{start:"",end:""},disabled:!0},{day:"saturday",daynum:"7",times:{start:"",end:""},disabled:!0}],holiday:[{timeStart:"",timeEnd:""}]}},a.initSchedule(),a.formats=["dd-MMMM-yyyy","yyyy MMMM dd","dd.MM.yyyy","shortDate","MMMM dd"],a.format=a.formats[4],a.altInputFormats=["M!/d!/yyyy"],a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.inlineOptions={customClass:u,minDate:new Date,showWeeks:!0},a.startDateOptions={formatYear:"yyyy",showWeeks:!1,startingDay:1},a.endDateOptions={formatYear:"yyyy",showWeeks:!1,startingDay:1},a.dateFormat="MM-dd-yyyy",a.popup1={opened:!1},a.open1=function(){a.popup1.opened=!0},a.popup2={opened:!1},a.open2=function(){a.popup2.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.settings={voicemail_password:"12345",voicemail_mail_to:"",voicemail_id:"",voicemail_greeting:""},a.updateVoicemail=function(){var a={voicemail_password:j.newIvr.voicemail.voicemail_password,voicemail_mail_to:j.newIvr.voicemail.voicemail_mail_to,voicemail_id:j.newIvr.did.ext,voicemail_greeting:j.newIvr.vmgreeting?j.newIvr.vmgreeting.greeting_id:null};console.log(a),n.postUpdateAttendantVoicemail(a).then(function(a){a.data.success?j.showSuccessAlert("Your information has been updated."):a.data.error&&j.showErrorAlert(a.data.error.message[0])})},v(),a.getWeeklySchedule=function(){a.weeklyHours=[];var b=angular.copy(j.scheduleType.weekly);b.forEach(function(b){if(b.times.start&&b.times.end)if(moment.isMoment(b.times.start)&&moment.isMoment(b.times.end))a.weeklyHours.push({daynum:b.daynum,shours:b.times.start.hour(),smin:b.times.start.minute(),ehours:b.times.end.hour(),emin:b.times.end.minute(),minuteofday_uuid:b.minuteofday_uuid?b.minuteofday_uuid:"",wday_uuid:b.wday_uuid?b.wday_uuid:"",group_number:b.group_number?b.group_number:"",order:b.order?b.order:"",disabled:b.disabled});else{var c=moment(b.times.start),d=moment(b.times.end);a.weeklyHours.push({daynum:b.daynum,shours:c.hour(),smin:c.minute(),ehours:d.hour(),emin:d.minute(),minuteofday_uuid:b.minuteofday_uuid?b.minuteofday_uuid:"",wday_uuid:b.wday_uuid?b.wday_uuid:"",group_number:b.group_number?b.group_number:"",order:b.order?b.order:"",disabled:b.disabled})}else b.disabled=!0,b.times.start="",b.times.end=""})},a.showGreetingFileTitle=function(b){var c=null;return a.audioLibrary.forEach(function(a){a.original_filename===b&&(c=a.file_title)}),c},a.getHolidaySchedule=function(){a.holidayHours=[],j.scheduleType.holiday.forEach(function(b){if(b.timeStart&&b.timeEnd)if(b.timeEnd<b.timeStart&&(b.timeEnd=b.timeStart),moment.isMoment(b.timeStart)&&moment.isMoment(b.timeEnd))console.log("Its moment"),a.holidayHours.push({times:b.timeStart.format("YYYY-MM-DD")+" 00:00~"+b.timeEnd.format("YYYY-MM-DD")+" 23:59",datetime_uuid:b.datetime_uuid?b.datetime_uuid:"",group_number:b.group_number?b.group_number:"",order:b.order?b.order:""});else{var c=moment(b.timeStart),d=moment(b.timeEnd);a.holidayHours.push({times:c.format("YYYY-MM-DD")+" 00:00~"+d.format("YYYY-MM-DD")+" 23:59",datetime_uuid:b.datetime_uuid?b.datetime_uuid:"",group_number:b.group_number?b.group_number:"",order:b.order?b.order:""})}else j.scheduleType.holiday.splice(b,1)}),console.log(j.scheduleType.holiday)},a.getAttendants=function(){return a.ordered=!1,n.getAutoAttendants(a.domain.domain_uuid).then(function(a){return a.data.success?(console.log(a.data.success.data),j.myAttendants=a.data.success.data,j.myAttendants.forEach(function(a){"true"==a.ivr_menu_enabled?a.ivr_menu_enabled=!0:"false"==a.ivr_menu_enabled&&(a.ivr_menu_enabled=!1)}),console.log(j.myAttendants),"done"):a.data.error?(j.showErrorAlert(a.data.error.message),"error"):void 0})},a.getAttendants(),a.loadAvailableDid=function(){a.userList.items=[],j.availableContacts=[],n.getUnavailableDid().then(function(b){if(b.data&&(j.usedDid=b.data,j.usedDid1=b.data,console.log(b.data)),r.contacts.forEach(function(b){b.phones.forEach(function(c){"DID"==c.phone_label&&b.contact_name_full&&b.extension&&a.userList.items.push({ext:b.user_ext,name:b.contact_name_full,phone:c.phone_number})})}),j.usedDid.length>0){for(var c=0;c<a.userList.items.length;c++)for(var d=0;d<j.usedDid.length;d++)if(j.usedDid[d].phone==a.userList.items[c].phone){j.usedDid.splice(d,1)}j.usedDid.forEach(function(b){a.userList.items.push({ext:b.ext,name:"External number",phone:b.phone})})}console.log(a.userList.items)})},a.checkForChars=function(a){console.log(a)},a.changeAaNumber=function(){a.showChangeNumber=!0,a.oldDid=angular.copy(j.newIvr.did)},a.cancelChangeAaNumber=function(){a.showChangeNumber=!1,j.newIvr.did=angular.copy(a.oldDid),a.oldDid=null},a.saveChangeAaNumber=function(){j.newIvr.did=j.newIvr.newdid;var b={attendant:j.newIvr,oldDid:a.oldDid};console.log(b),n.postChangeAaNumber(b).then(function(b){b.data.success?(a.oldDid=null,a.menu.main=!0,a.initDirectory(),a.getAttendants(),B(),a.weeklyHours=[],a.holidayHours=[],j.newIvr={},a.menu.clone=!1,a.menu.edit=!1,a.menu.respondsto=!1,j.editingAttendant={},j.showSuccessAlert(b.data.success.message)):j.showErrorAlert(b.data.error.message)})},a.addSecondary=!1,a.addSecondaryNumber=function(){return a.addSecondary?void j.showErrorAlert('You must save the "In Progress" number before adding another'):void(a.addSecondary=!0)},a.saveNewSecondaryNumber=function(b){a.savingSecondaryNumber=!0;var c={ivr_menu_uuid:j.newIvr.ivr_menu_uuid,ext:j.newIvr.did.ext,dest_uuid:b.destination_uuid};console.log(c),n.postSaveNewSecondaryNumber(c).then(function(b){console.log(b.data),b.data.success?(j.newIvr.secondaryNumbers.push(b.data.success.data),a.addSecondary=!1,a.savingSecondaryNumber=!1):j.showErrorAlert(b.data.error.message)})},a.deleteSecondaryNumber=function(a){n.getDeleteSecondaryNumber(a.auto_attendant_did_uuid).then(function(b){if(console.log(b.data),b.data.success){console.log(j.newIvr.secondaryNumbers);var c=e("getByUUID")(j.newIvr.secondaryNumbers,a.auto_attendant_did_uuid,"auto_attendant_did");null!==c&&j.newIvr.secondaryNumbers.splice(c,1)}else j.showErrorAlert(b.data.error.message)})},a.orderNewSecondaryNumber=function(){a.orderingSecondaryNumber=!0},a.cancelNewSecondaryNumber=function(){a.addSecondary=!1},a.createNewAttendant=function(){j.newIvr={},j.newIvr.did={},a.menu.create=!0,a.menu.edit=!1,a.menu.main=!1,a.newdid=!1,a.editing=!1,a.newAttendant=!0,a.loadAvailableDid(),x(),w(j.user.domain_uuid)},a.sendNewAutoAttendant=function(){if(!j.newIvr.did.phone||!j.newIvr.ivr_menu_name)return void j.showErrorAlert("You are missing either the Auto Attendant Name or Number selection. Please correct and resubmit");a.aaWorking={status:!0,message:"Creating Attendant"},a.menu.create=!1,j.scheduleType=y(),a.getHolidaySchedule(),a.getWeeklySchedule();var b={newIvr:j.newIvr,weekly:a.weeklyHours,holiday:a.holidayHours};console.log(b),n.postCreateEmptyIvr(b).then(function(b){console.log(b.data),b.data.success?(a.newAttendant=!1,a.getAttendants().then(function(){a.aaWorking={};var c=e("getByUUID")(j.myAttendants,b.data.success.data.ivr_menu_uuid,"ivr_menu");a.editAttendant(j.myAttendants[c]),console.log(j.myAttendants[c])})):(console.log(b.data.error.message),j.showErrorAlert(b.data.error.message))})},a.createAttendant=function(){j.editingAttendant={},j.newIvr={},j.newIvr.did={},j.optionsList=[],a.menu.main=!1,a.menu.create=!1,a.menu.edit=!0,a.editing=!1,a.newdid=!1,a.optionsitems=!1,a.loadAvailableDid(),a.initDirectory(),a.initSchedule()},j.usedDid=[],a.loadSchedule=function(b){return j.newIvr.alternate_destination=[],j.scheduleType={weekly:[{day:"sunday",daynum:"1",times:{start:"",end:""},disabled:!0},{day:"monday",daynum:"2",times:{start:"",end:""},disabled:!0},{day:"tuesday",daynum:"3",times:{start:"",end:""},disabled:!0},{day:"wednesday",daynum:"4",times:{start:"",end:""},disabled:!0},{day:"thursday",daynum:"5",times:{start:"",end:""},disabled:!0},{day:"friday",daynum:"6",times:{start:"",end:""},disabled:!0},{day:"saturday",daynum:"7",times:{start:"",end:""},disabled:!0}],holiday:[]},n.getSchedule(b).then(function(b){var c=new Date,c=moment(c).format("YYYY-MM-DD");return b.data.success?(a.retrivedSchedule=b.data.success.data,console.log(a.retrivedSchedule),b.data.success.data.forEach(function(a){if("weekly"==a.type)j.scheduleType.weekly.forEach(function(b){a.daynum===b.daynum&&(console.log("CHANGING "+b.day),b.daynum=a.daynum,b.times.start=c+" "+a.stime,b.times.end=c+" "+a.etime,b.minuteofday_uuid=a.minuteofday_uuid,b.wday_uuid=a.wday_uuid,j.scheduleType.type="weekly",b.disabled=!1,b.group_number=a.group_number,b.order=a.order)});else if("holiday"==a.type&&a.stime){new Date(a.stime);j.scheduleType.type="holiday",j.scheduleType.holiday.push({timeStart:new Date(a.stime),timeEnd:new Date(a.etime),datetime_uuid:a.datetime_uuid,group_number:a.group_number,order:a.order})}}),a.loadPostData&&(a.getHolidaySchedule(),a.getWeeklySchedule(),a.loadPostData=!1),console.log(j.newIvr.did),!0):(console.log(b.data.error.message),void j.showErrorAlert(b.data.error.message))})},a.toggleEdit=function(){a.editing=!1,a.loadAvailableDid()},a.editAttendant=function(b){console.log(b),j.editingAttendant=b,j.ivr_menu_uuid=j.editingAttendant.ivr_menu_uuid,a.loadOptions(j.ivr_menu_uuid),j.newIvr=b,z(b.ivr_menu_extension),j.newIvr.ivr_menu_enabled=j.newIvr.ivr_menu_enabled?"true":"false",a.loadSchedule(j.ivr_menu_uuid).then(function(){t()}),a.loadAvailableDid(),x(),w(j.user.domain_uuid),a.optionsitems=!0,a.editing=!0,
a.newdid=!1,a.menu.main=!1,a.menu.edit=!0,a.menu.create=!1,console.log(j.newIvr)},a.newNumberForClone=function(){a.orderingNumber=!0;var b=j.user.symphony_user_settings.sms_phone_number;n.getNewNumber(b).then(function(b){b.data.success&&(j.newIvr.newdid=b.data.success.data,console.log(j.newIvr.newdid),a.reusableDids.push(b.data.success.data),a.orderingNumber=!1,a.ordered=!0)})},a.newNumberForRespondsTo=function(){a.orderingNumber=!0;var b=j.user.symphony_user_settings.sms_phone_number;n.getNewNumber(b).then(function(b){b.data.success&&(j.newIvr.newdid=b.data.success.data,console.log(j.newIvr.newdid),a.orderingNumber=!1,a.reusableDids.push(b.data.success.data),a.ordered=!0)})},a.newNumber=function(){a.orderingNumber=!0;var b=j.user.symphony_user_settings.sms_phone_number;n.getNewNumber(b).then(function(b){b.data.success&&(j.newIvr.did=b.data.success.data,console.log(j.newIvr.did),t(),a.orderingNumber=!1,a.reusableDids.push(b.data.success.data),a.editing=!0,a.newdid=!0)})},a.saveAttendant=function(b){console.log(j.scheduleType.weekly);var c=!1;if(angular.forEach(j.scheduleType.weekly,function(a){a.disabled||a.times.start&&a.times.end||(c=!0)}),c)return void j.showErrorAlert("There are currently invalid times selected in the Weekly Schedule section. Please return and correct those before saving the attendant.");if(a.editingOption||a.editingHoliday||a.showAddOptions){var d=a.editingOption||a.showAddOptions?"a Menu Option":"";return d+=(a.editingHoliday&&d.length>0?" and ":"")+(a.editingHoliday?"a Holiday Entry":""),void j.showErrorAlert("You are currently editing/adding "+d+". Please complete and save that entry before submitting the overall attendant.")}if(!a.hasWeekly()&&!a.hasPresets(j.newIvr)&&0===j.scheduleType.holiday.length)return void j.showErrorAlert("You must have at least one day of the week with set hours or have one holiday created or enabled in order to save the attendant.");angular.copy(j.scheduleType);console.log(b),j.editingAttendant.ivr_menu_uuid&&("none"==j.scheduleType.type?j.jsonObject={editAttendant:j.newIvr}:(console.log(j.scheduleType),a.getHolidaySchedule(),a.getWeeklySchedule(),j.jsonObject={editAttendant:j.newIvr,options:a.optionsList,weekly:a.weeklyHours,holiday:a.holidayHours}),console.log(j.jsonObject),n.updateAutoAttendant(j.jsonObject).then(function(c){console.log(c.data),c.data.success?(console.log(b),"continue"===b?(console.log("Continuing"),"true"===j.newIvr.ivr_menu_enabled&&A(j.newIvr),j.showSuccessAlert("Your changes have been saved.")):(console.log("GOING TO LIST"),s(),"true"===j.newIvr.ivr_menu_enabled?A(j.newIvr).then(function(){a.menu.create=!1,a.menu.edit=!1,a.menu.clone=!1,a.menu.respondsto=!1,a.initDirectory(),a.getAttendants(),B(),a.weeklyHours=[],a.holidayHours=[],a.menu.main=!0}):(a.menu.create=!1,a.menu.edit=!1,a.menu.clone=!1,a.menu.respondsto=!1,a.initDirectory(),a.getAttendants(),B(),a.weeklyHours=[],a.holidayHours=[],a.menu.main=!0))):c.data.error&&j.showErrorAlert(c.data.error.message)}))},a.toggleEnable=function(a){console.log(a);var b=a.buildstatus,c=!1;if(a.ivr_menu_enabled===!0)if("true"!==b.greeting||"true"!==b.voicemail&&"userext"!==b.voicemail||"true"!==b.customize_menu||"true"!==b.holiday&&"true"!==b.weekly_schedule){var d="";"true"!==b.holiday&&"true"!==b.weekly_schedule&&(d+=(d.length>0?", ":"")+"Weekly Schedule and/or Holiday Schedule"),"true"!==b.customize_menu&&(d+=(d.length>0?", ":"")+"Customize Your Menu"),"true"!==b.greeting&&(d+=(d.length>0?", ":"")+"Record Greeting"),"true"!==b.voicemail&&"userext"!==b.voicemail&&(d+=(d.length>0?", ":"")+"Setup Voicemail"),j.showErrorAlert("You have not fully completed preparing the attendant. Please complete the following section: "+d);var f=e("getByUUID")(j.myAttendants,a.ivr_menu_uuid,"ivr_menu");null!==f&&(j.myAttendants[f].ivr_menu_enabled=!1)}else c=!0;else c=!0;if(c){var g={ivr_menu_uuid:a.ivr_menu_uuid,ivr_menu_enabled:a.ivr_menu_enabled?"true":"false",did:a.did};return console.log(g),n.postToggleAttendant(g).then(function(a){return console.log(a.data),a.data.success?!0:(console.log(a.data.error.message),!1)})}return!1},a.postCloneAttendant=function(){a.aaWorking={status:!0,message:"Cloning Attendant"},a.menu.clone=!1;a.ivrClone;console.log(j.newIvr.ext),console.log(j.newIvr),console.log(j.newIvr.did),console.log(a.userList.items),a.optionsitems=!1,a.editing=!1,a.newdid=!1,a.menu.main=!1,a.menu.edit=!1,a.menu.create=!1,a.loadPostData=!0,j.newIvr.ivr_menu_enabled="false",a.loadSchedule(j.newIvr.ivr_menu_uuid).then(function(){!j.newIvr.newdid&&j.newIvr.ext&&angular.forEach(a.userList.items,function(a){console.log(a.ext+" : "+j.newIvr.ext),a.ext==j.newIvr.ext&&(console.log("FOUND IT"),j.newIvr.newdid=a)});var b={attendant:j.newIvr,options:a.optionsList,weekly:a.weeklyHours,holiday:a.holidayHours};console.log(b),n.postCloneAutoAttendant(b).then(function(b){console.log(b.data),b.data.success?(a.initDirectory(),a.getAttendants().then(function(){a.aaWorking={},j.showSuccessAlert(b.data.success.message),a.menu.main=!0,a.weeklyHours=[],a.holidayHours=[],j.newIvr={},a.menu.respondsto=!1,j.editingAttendant={}})):b.data.error&&j.showErrorAlert(b.data.error.message)})})},a.cloneAttendant=function(b){j.editingAttendant={},b.ivr_menu_name=b.ivr_menu_name+" (Clone)",j.newIvr=b,j.newIvr.newdid=angular.copy(j.newIvr.did),a.loadAvailableDid(),x(),w(j.user.domain_uuid),a.loadOptions(j.newIvr.ivr_menu_uuid),z(j.newIvr.ivr_menu_extension),console.log(a.userList.items),a.editing=!1,j.newIvr.ext=j.newIvr.did.ext,a.menu.clone=!0,a.menu.respondsto=!1,a.menu.create=!1,a.menu.edit=!1,a.menu.main=!1,a.newdid=!1,a.editing=!1,a.newAttendant=!1,console.log(j.newIvr)},a.changeRespondsTo=function(b){j.editingAttendant={},j.newIvr=b,j.newIvr.newdid=angular.copy(j.newIvr.did),a.loadAvailableDid(),x(),w(j.user.domain_uuid),a.editing=!1,j.newIvr.ext=j.newIvr.did.ext,a.oldDid=angular.copy(j.newIvr.did),a.menu.clone=!1,a.menu.respondsto=!0,a.menu.create=!1,a.menu.edit=!1,a.menu.main=!1,a.newdid=!1,a.editing=!1,a.newAttendant=!1},a.deleteAttendant=function(b){console.log(b);var c=d.confirm().title("Are you sure you want to Delete Auto Attendant?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");d.show(c).then(function(){""!=b.ivr_menu_uuid&&n.postDeleteAttendant(b).then(function(b){b.data.success&&(j.showSuccessAlert(b.data.success.message),a.getAttendants(),B())})})},a.cancel=function(b){var c=d.confirm().title("Are you sure you want to cancel?").ariaLabel("Cancel").targetEvent(b).ok("Yes").cancel("Never Mind");d.show(c).then(function(){a.menu.create=!1,a.oldDid=null,a.menu.edit=!1,a.ivrClone=null,j.newIvr={},a.menu.clone=!1,a.menu.respondsto=!1,a.getAttendants(),a.menu.main=!0,a.holidayHours=[],a.weeklyHours=[],a.initDirectory()},function(){})},a.getAvailableNumbers=function(){a.initDirectory();for(var b=0;b<j.optionsList.length;b++)for(var c=0;c<a.directoryOpts.length;c++)a.directoryOpts[c].available&&j.optionsList[b].ivr_menu_option_digits==a.directoryOpts[c].digit&&(a.directoryOpts[c].available=!1)},a.directoryAfterChange=function(){console.log("Checking Available Digits");for(var b=0;b<a.directoryOpts.length;b++)a.directoryOpts[b].available=!0;a.getAvailableNumbers()},a.loadOptions=function(b){return n.getOptionsList(b).then(function(b){return console.log("RESPONSE TO GET OPTIONS"),console.log(b),b.data.success?(j.optionsList=b.data.success.data,console.log(j.optionsList),a.getAvailableNumbers(),!0):(console.log(b.data.error.message),j.showErrorAlert(b.data.error.message),j.optionsList={},void 0)})},a.checkBuildStatus=function(a,b){if("weekly_schedule"==b){if("true"===a.buildstatus.weekly_schedule||"true"===a.buildstatus.holiday)return!0}else if("true"===a.buildstatus[b])return!0;return!1},a.addOptions=function(){a.myOptions.ivr_menu_uuid=j.editingAttendant.ivr_menu_uuid,console.log(a.myOptions),void 0==a.myOptions.ivr_menu_option_digits||void 0==a.myOptions.ivr_menu_option_description||void 0==a.myOptions.action?j.showErrorAlert("Please fill all the fields"):(a.myOptions.ivr_menu_option_uuid="","Ring Group"==a.myOptions.action?a.myOptions.ringgroup=j.ringGroupOption:"Transfer to External Number"==a.myOptions.action?a.myOptions.ivr_menu_option_param=l.cleanPhoneNumber(a.myOptions.ivr_menu_option_param):a.myOptions.ringgroup="",a.optionsList.push(a.myOptions),a.myOptions={},a.showAddOptions=!1,j.jsonObject={options:a.optionsList}),a.directoryAfterChange()},a.addNewOption=function(){j.editingOption||a.showAddOptions?j.showErrorAlert("You are already editing a Menu Option. Please complete and save that before opening another."):(a.optionsitems=!0,a.addedOption={},a.showAddOptions=!a.showAddOptions,j.myOptions={ivr_menu_uuid:""})},a.cancelInsertOption=function(){0==j.optionsList.length&&(a.optionsitems=!1),a.showAddOptions=!a.showAddOptions,a.myOptions={}},a.editOptions=function(a){console.log(a)},a.deleteOption=function(b){console.log(b);var c=d.confirm().title("Are you sure you want to Delete this menu option?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");d.show(c).then(function(){""!=b.ivr_menu_option_uuid?n.postDeleteMenuOption(b).then(function(c){c.data.success&&(j.showSuccessAlert(c.data.success.message),a.initDirectory(),a.directoryAfterChange(),a.loadOptions(b.ivr_menu_uuid))}):(a.optionsList.splice(a.optionsList.indexOf(b),1),a.initDirectory(),a.directoryAfterChange())})},a.sendClass="send-options",j.currentIndex=j.optionsList.length-1,a.selectSendCallTo=function(a,b,c){console.log("Sending to ",b)},a.show=function(b){for(var c=0;c<j.optionsList.length;c++)j.optionsList[c].show=!1;j.optionsList[b].show=!0,a.currentIndex=b},a.editRinggroup=function(b){a.editingRingGroup=angular.copy(b);var c=angular.copy(a.userList2.items);j.options={selected:null,users:{items:c},services:{items:[{label:"simultaneous",tip:"Rings all group members at the same time",items:[]},{label:"sequence",tip:"Rings group members in order",items:[]},{label:"random",tip:"Rings group members randomly",items:[]}]},noAnswer:["Voicemail","Hangup"]},console.log(a.userList),a.userList.items.forEach(function(a){3===a.ext.length?j.options.noAnswer.push("Voicemail - User Extension - "+a.ext):j.options.noAnswer.push("Voicemail - External Number - "+a.ext)}),a.reusableDids.forEach(function(a){j.options.noAnswer.push("Voicemail - "+a.phone+" - "+a.ext)}),a.availRinggroups.forEach(function(a){j.options.noAnswer.push("RingGroup - "+a.title+" - "+a.queue_extension)}),j.ringGroupOption=b.ringgroup,j.ringGroupOption.containers&&j.ringGroupOption.containers.length>0&&j.ringGroupOption.containers[0].items.length>0&&j.ringGroupOption.containers[0].items.forEach(function(a){var b=e("getByUUID")(j.options.users.items,a.user_uuid,"user");null!==b&&j.options.users.items.splice(b,1)}),console.log(j.ringGroupOption),j.ringModal("/company/ringGroup.html")},j.editingOption=null,a.editingHoliday=null,a.changeEnd=function(b){if(null!=b){var c=e("getByUUID")(j.scheduleType.holiday,a.editingHoliday.datetime_uuid,"datetime");j.scheduleType.holiday[c].timeEnd||(j.scheduleType.holiday[c].timeEnd=new Date(b)),j.scheduleType.holiday[c].timeStart=new Date(b)}},a.changeStart=function(b){if(null!=b){var c=e("getByUUID")(j.scheduleType.holiday,a.editingHoliday.datetime_uuid,"datetime");j.scheduleType.holiday[c].timeStart||(j.scheduleType.holiday[c].timeStart=new Date(b)),j.scheduleType.holiday[c].timeEnd=new Date(b)}},a.holidayEdited=function(b){return a.editingHoliday?a.editingHoliday.datetime_uuid===b.datetime_uuid:!1},a.addHoliday=function(){if(null!==a.editingHoliday)return void j.showErrorAlert("You are currently editing another Holiday. Please save or cancel that first.");j.scheduleType.holiday.push({datetime_uuid:"add",timeStart:"",timeEnd:""}),j.scheduleType.type="holiday";var b=e("getByUUID")(j.scheduleType.holiday,"add","datetime");a.editingHoliday=angular.copy(j.scheduleType.holiday[b])},a.saveHoliday=function(b){if(!b.timeEnd||!b.timeStart)return void j.showErrorAlert("Both the start and end date are required to save the Holiday.");"add"===b.datetime_uuid&&(b.datetime_uuid=null);var c={datetime_uuid:b.datetime_uuid?b.datetime_uuid:"",group_number:b.group_number?b.group_number:"",order:b.order?b.order:""};if(b.timeStart&&b.timeEnd)if(b.timeEnd<b.timeStart&&(b.timeEnd=b.timeStart),moment.isMoment(b.timeStart)&&moment.isMoment(b.timeEnd))c.times=b.timeStart.format("YYYY-MM-DD")+" 00:00~"+b.timeEnd.format("YYYY-MM-DD")+" 23:59";else{var d=moment(b.timeStart),f=moment(b.timeEnd);c.times=d.format("YYYY-MM-DD")+" 00:00~"+f.format("YYYY-MM-DD")+" 23:59"}var g={attendant:angular.copy(j.newIvr),holiday:c};console.log(g),n.postSaveHoliday(g).then(function(b){if(b.data.success){"true"===g.attendant.ivr_menu_enabled&&A(g.attendant);var c=e("getByUUID")(j.scheduleType.holiday,"add","datetime");null!==c&&j.scheduleType.holiday.splice(c,1),a.editingHoliday=null,a.loadSchedule(j.newIvr.ivr_menu_uuid)}else console.log(b.data.error.message)})},a.removeHoliday=function(b){return a.hasWeekly()||a.hasPresets(j.newIvr)||1!==j.scheduleType.holiday.length?void n.getDeleteHoliday(b.datetime_uuid).then(function(c){c.data.success?(j.scheduleType.holiday.splice(j.scheduleType.holiday.indexOf(b),1),a.loadSchedule(j.newIvr.ivr_menu_uuid)):console.log(c.data.error.message)}):void j.showErrorAlert("You can not delete this holiday entry at this time because an auto attendant must have at least one day of the week with set hours, have one custom holiday created or one preset holiday enabled.")},a.removeDate=function(a){j.scheduleType.holiday.splice(j.scheduleType.holiday.indexOf(a),1)},a.greetingBeingEdited=function(b){return a.editingGreeting&&a.editingGreeting.audio_library_uuid===b.audio_library_uuid},a.setEditGreeting=function(b){console.log(b),a.editingGreeting=angular.copy(b)},a.cancelEditGreeting=function(){var b=e("getByUUID")(a.audioLibrary,a.editingGreeting.audio_library_uuid,"audio_library");null!==b&&(a.audioLibrary[b]=angular.copy(a.editingGreeting)),a.editingGreeting=null},a.saveEditGreeting=function(b){n.updateGreetingTitle(b).then(function(c){if(console.log(c.data),c.data.success){var d=e("getByUUID")(a.audioLibrary,b.audio_library_uuid,"audio_library");null!==d&&(a.audioLibrary[d]=b),a.editingGreeting=null}else j.showErrorAlert(c.data.error.message)})},a.deleteGreeting=function(b){var c=d.confirm().title("Are you sure you want to Delete the Auto Attendant Greeting?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");d.show(c).then(function(){console.log(b),console.log(a.audioLibrary),n.deleteAaGreeting(b.audio_library_uuid,j.newIvr.ivr_menu_uuid).then(function(c){if(console.log(c.data),c.data.success){console.log(b.audio_library_uuid);var d=e("getByUUID")(a.audioLibrary,b.audio_library_uuid,"audio_library");console.log(d),null!==d&&a.audioLibrary.splice(d,1),j.newIvr.ivr_menu_greet_long=c.data.success.data}else j.showErrorAlert(c.data.error.message)})})},a.vmGreetingBeingEdited=function(b){return a.editingVmGreeting&&a.editingVmGreeting.voicemail_greeting_uuid===b.voicemail_greeting_uuid},a.setEditVmGreeting=function(b){console.log(b),a.editingVmGreeting=angular.copy(b)},a.cancelEditVmGreeting=function(){var b=e("getByUUID")(a.voicemailGreetings,a.editingVmGreeting.voicemail_greeting_uuid,"voicemail_greeting");null!==b&&(a.voicemailGreetings[b]=angular.copy(a.editingVmGreeting)),a.editingVmGreeting=null},a.saveEditVmGreeting=function(b){n.postUpdateAaVoicemailGreetingRecord(b).then(function(c){if(console.log(c.data),c.data.success){var d=e("getByUUID")(a.voicemailGreetings,b.voicemail_greeting_uuid,"voicemail_greeting");null!==d&&(a.voicemailGreetings[d]=b),a.editingVmGreeting=null}else j.showErrorAlert(c.data.error.message)})},a.deleteVmGreeting=function(b){var c=d.confirm().title("Are you sure you want to Delete this Voicemail Greeting?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");d.show(c).then(function(){console.log(b),console.log(a.voicemailGreetings),n.deleteAaVoicemailGreeting(b.voicemail_greeting_uuid).then(function(c){if(console.log(c.data),c.data.success){console.log(b.voicemail_greeting_uuid);var d=e("getByUUID")(a.voicemailGreetings,b.voicemail_greeting_uuid,"voicemail_greeting");console.log(d),null!==d&&a.voicemailGreetings.splice(d,1),j.newIvr.ivr_menu_greet_long=c.data.success.data}else j.showErrorAlert(c.data.error.message)})})},a.beingEdited=function(a){return j.editingOption===a.ivr_menu_option_uuid},a.editHoliday=function(b){a.editingHoliday=angular.copy(b)},a.cancelEditingHoliday=function(){console.log(j.scheduleType.holiday);var b=e("getByUUID")(j.scheduleType.holiday,a.editingHoliday.datetime_uuid,"datetime");console.log(b),null!==b&&("add"===a.editingHoliday.datetime_uuid?j.scheduleType.holiday.splice(b,1):j.scheduleType.holiday[b]=angular.copy(a.editingHoliday)),a.editingHoliday=null},a.setEditing=function(b){j.editingOption||a.showAddOptions?j.showErrorAlert("You are already editing a Menu Option. Please complete and save that before opening another."):(console.log("SET EDIT"),a.editedOption=angular.copy(b),console.log("Edited option"),console.log(a.editedOption),j.editingOption=b.ivr_menu_option_uuid,"Transfer to External Number"===a.editedOption.action?(a.editedOption.external_number=a.editedOption.ivr_menu_option_param,a.editedOption.external_number.length>10&&(a.editedOption.external_number=a.editedOption.external_number.substring(4))):"Ring Group"===b.action&&!a.fromModal)},a.restartRinggroup2=function(b){console.log(b),n.getDeleteRingGroup(b.call_center_queue_uuid).then(function(c){if(console.log(c.data),c.data.success){var d=e("getByUUID")(a.availRinggroups,b.call_center_queue_uuid,"call_center_queue");null!==d&&a.availRinggroups.splice(d,1),a.initDirectory(),a.getAttendants()}else c.data.error&&j.showErrorAlert(c.data.error.message)})},a.manageRingGroups=function(){a.menu={},a.menu.ringgroups=!0,a.loadAvailableDid(),x(),w(j.user.domain_uuid)},a.manageAttendants=function(){a.menu={},a.menu.main=!0},a.restartRinggroup=function(b){a.aaWorking={status:!0,message:"Restarting Ring Group"},n.getRestartRinggroup(b.call_center_queue_uuid).then(function(b){console.log(b.data),a.aaWorking={}})},B(),a.showAutoAttendants=function(){a.getAttendants(),a.menu={},a.menu.main=!0},a.showStrategy=function(a){return"sequentially-by-agent-order"===a.queue_strategy?"Sequence":"ring-all"===a.queue_strategy?"Simultaneous":"random"===a.queue_strategy?"Random":void 0},a.createRingGroup=function(){a.menu={},a.menu.ringgroups=!0},j.saveRinggroup=function(){console.log(j.ringGroupOption);var b=a.editingRingGroup;if(b.ringgroup=j.ringGroupOption,!b.ringgroup.name)return void j.showErrorAlert("You must enter a name describing the Ring Group.");if(0===b.ringgroup.containers.length||b.ringgroup.containers&&0===b.ringgroup.containers[0].items.length)return void j.showErrorAlert("You must setup the ring pattern and add users to it before saving.");p.dismissAll(),a.aaWorking={status:!0,message:"Saving Ring Group"};var c={domain_uuid:a.domain.domain_uuid,queue:b};n.postSaveRingGroup(c).then(function(c){if(c.data.success){var d=c.data.success.data;n.getRestartRinggroup(d).then(function(d){b.call_center_queue_uuid&&b.attendants&&b.attendants.length>0&&angular.forEach(b.attendants,function(a){var b=e("getByUUID")(j.myAttendants,a,"ivr_menu");if(null!==b&&j.myAttendants[b]&&j.myAttendants[b].ivr_menu_enabled===!0){var c=j.myAttendants[b];A(c)}}),j.showalerts(c),B(),a.menu={},a.menu.ringgroups=!0,a.aaWorking={}})}})},a.cancelEditing=function(){var b=e("getByUUID")(j.optionsList,j.editingOption,"ivr_menu_option");null!==b&&(j.optionsList[b]=angular.copy(a.editedOption)),j.editingOption=null},a.showOptionsParams=function(a){var b="";return"Transfer to External Number"===a.action?b=a.ivr_menu_option_param.length>10?e("tel")(a.ivr_menu_option_param.substring(4)):e("tel")(a.ivr_menu_option_param):"Transfer to an Extension"===a.action?b="Ext: "+a.ivr_menu_option_param:"Ring Group"===a.action&&(b=a.ringgroup.name+" ("+a.ivr_menu_option_param+")"),b},a.saveOption=function(b,c){if("Ring Group"==b.action)a.aaWorking={status:!0,message:"Saving Ring Group"};else if("Transfer to External Number"==b.action){var d=l.cleanPhoneNumber(c.external_number);b.ivr_menu_option_param=d}var e={attendant:j.newIvr,option:b};console.log(e),n.postSaveMenuOption(e).then(function(c){c.data.success?(console.log(c.data.success.data),console.log(b),a.loadOptions(j.newIvr.ivr_menu_uuid).then(function(){"Ring Group"==b.action&&(a.aaWorking={},o(function(){C()})),j.editingOption=null,a.showAddOptions=!1,j.myOptions={ivr_menu_uuid:""},"true"===j.newIvr.ivr_menu_enabled&&A(j.newIvr)})):j.showErrorAlert(c.data.error.message)})},a.showPlaceHolder=function(){return"dndPlaceholder"},a.createNewRinggroup=function(){var b=angular.copy(a.userList2.items);j.options={selected:null,users:{items:b},services:{items:[{label:"simultaneous",tip:"Rings all group members at the same time",items:[]},{label:"sequence",tip:"Rings group members in order",items:[]},{label:"random",tip:"Rings group members randomly",items:[]}]},noAnswer:["Voicemail","Hangup"]},a.userList.items.forEach(function(a){3===a.ext.length?j.options.noAnswer.push("Voicemail - User Extension - "+a.ext):j.options.noAnswer.push("Voicemail - External Number - "+a.ext)}),a.reusableDids.forEach(function(a){j.options.noAnswer.push("Voicemail - "+a.phone+" - "+a.ext)}),a.availRinggroups.forEach(function(a){j.options.noAnswer.push("RingGroup - "+a.title+" - "+a.queue_extension)}),a.editingRingGroup={},j.ringGroupOption={containers:[],timeout:120,noAnswer:"Hangup"},j.ringModal("/company/ringGroup.html"),console.log(j.ringGroupOption)},a.model=[[],[]]}]),proySymphony.controller("ctrlRingGroup",["$scope","$q","$filter","$mdToast","$auth","$mdDialog","Idle","$interval","$uibModal","Keepalive","$rootScope","$routeParams","usefulTools","$myModal","dataFactory","$timeout","$uibModalStack",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){a.logEvent=function(a){console.log(a)},a.logListEvent=function(a,b,c,d){var e=c?"External ":"";e+=d+" element was "+a+" position "+b,console.log(e)},a.dragoverCallback=function(b,c,d){return a.logListEvent("dragged over",b,c,d),"container"!=d||c||console.log("Container being dragged contains  items"),!0},a.dropIndCallback=function(b,c,d,e,f){return a.logListEvent("dropped at",c,e,f),console.log("DROPPED"),k.ringGroupOption.items.splice(0),k.ringGroupOption.items.push(d),d};var r=f.confirm().title("Would you like to change the Ring Pattern?").textContent("Are you sure you want to change the current ring pattern? We will move any contacts already added into the new pattern.").ariaLabel("replace").ok("Yes").cancel("Nevermind");a.dropContainCallback=function(b,c,d,e){a.logListEvent("dropped at",b,d,e),console.log(c),console.log(k.ringGroupOption.containers[0]),a.dropped=!0,console.log("DROPPED");var g=k.ringGroupOption.containers.length>0?angular.copy(k.ringGroupOption.containers[0]):{};return 0===k.ringGroupOption.containers.length?(console.log("ADD AS NEW"),c):(console.log("CHECK IF REPLACE"),void(0===c.items.length&&f.show(r).then(function(){return console.log("DO REPLACR"),g.label=c.label,k.ringGroupOption.containers.splice(0),k.ringGroupOption.containers.push(g),console.log(k.ringGroupOption.containers),!0},function(){return!1})))},a.removeContainer=function(b,c,d){var e=f.confirm().title("Would you like to remove the Ring Pattern?").textContent("Are you sure you want to remove the current ring pattern? This will remove any contacts that have already been added into the pattern.").ariaLabel("remove").ok("Yes").cancel("Nevermind");console.log("remove container"),console.log(b),console.log(c),console.log(d);var g=angular.copy(k.ringGroupOption.containers[0]);console.log(g),console.log(d.items.length+" ? "+g.items.length),console.log(d.label+" ? "+g.label),p(function(){d.items.length!==g.items.length||d.label!==g.label||a.dropped||(console.log("WANT TO REMOVE"),f.show(e).then(function(){k.ringGroupOption.containers.splice(0,1)})),a.dropped=!1})},a.removeFromContainer=function(a,b){console.log("remove user from container"),console.log(a),console.log(k.ringGroupOption.containers[0].items),console.log(k.ringGroupOption.containers[0].items.length);var c=k.ringGroupOption.containers[0].items[b];k.ringGroupOption.containers[0].items.splice(b,1),console.log(c),p(function(){var a=0;angular.forEach(k.ringGroupOption.containers[0].items,function(b){b.user_uuid===c.user_uuid&&(a+=1)}),0===a&&k.options.users.items.push(c)})},a.removeFromUsers=function(a){console.log("remove from users")},a.dropRingCallback=function(b,d,e,f){a.logListEvent("dropped at",b,e,f),console.log("DROPPING A USER IN"),console.log(d);var g=c("getByUUID")(k.options.users.items,d.user_uuid,"user"),h=0;return angular.forEach(k.ringGroupOption.containers[0].items,function(a){a.user_uuid===d.user_uuid&&(h+=1)}),console.log(h),null!==g&&k.options.users.items.splice(g,1),d}}]),proySymphony.controller("TimeKeeperCtrl",["$scope","$http","$location","usefulTools","$timeout","$filter","$compile","fileUpload","$q","$rootScope","$uibModal","$uibModalStack","$window","FileUploader","dataFactory","customerGroupCodeService","userContactService","timeKeeperService","contactGroupsService","_","$cookies","domainService","emulationService","$mdDialog","permissionService","userService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(){a.activeTimekeeperTab=1}function B(){o.getTkGroups().then(function(a){j.tkGroups=[],a.data.error?__env.enableDebug&&console.log(a.data.error.message):a.data.success&&(j.tkGroups=a.data.success.data,__env.enableDebug&&console.log("PERM GROUPS"),__env.enableDebug&&console.log(j.tkGroups),m.localStorage.setItem("tkGroups",JSON.stringify(j.tkGroups)))},function(a){__env.enableDebug&&console.log(a)})}function C(a,b){__env.enableDebug&&console.log(a);var c=[],d=[];angular.forEach(a.member,function(a,b){a===!0&&d.push(b)});var e=[];angular.forEach(a.manager,function(a,b){a===!0&&e.push(b)}),0===d.length&&c.push("At least one Member must be specified."),0===e.length&&c.push("At lease one Manager must be specified.");var f={group_uuid:null!==b?j.tkGroups[b].time_keeper_group_uuid:null,group_name:a.group_name,group_members:d,group_managers:e,errors:c};return console.log(f),f}function D(a){var b=JSON.stringify(a);return __env.enableDebug&&console.log(b),b}function E(b,c){var d=new Date(c,b,1);for(a.days=[],a.fulldate={};d.getMonth()===b;)a.fulldate.date=d.getDate(),a.fulldate.day=H[d.getDay()].substring(0,3),a.fulldate.fullday=H[d.getDay()],a.fulldate.month=G[d.getMonth()],a.fulldate.monthnum=d.getMonth(),a.fulldate.year=c,a.days.push(a.fulldate),a.fulldate={},d.setDate(d.getDate()+1);return a.days}a.user=j.user,a.user.contact_name_full=a.user.contact_name_given+" "+a.user.contact_name_family,a.$watch(function(){return j.user},function(b,c){a.user.id===j.user.id&&(a.user=j.user)}),a.user.user_uuid=j.user.id,a.member_list={},j.tkusers=[],j.contacts=[],j.tkusersList=[],r.tkUsers.length<1&&r.setTkUsers(),r.getTkUsers(),j.tkusers=r.tkUsers,j.tkusers.length<1&&(j.tkusers=JSON.parse(m.localStorage.getItem("tkUsers"))),j.tkusers||m.localStorage.removeItem("isTkUser"),angular.forEach(j.tkusers,function(a){a.user_uuid==j.user.id||"user"!=j.user.accessgroup?(m.localStorage.setItem("isTkUser",JSON.stringify(a)),j.showTimer=!0):m.localStorage.removeItem("isTkUser")}),a.getTkUserForCurrentUser=function(){for(var a,b=0;b<j.tkusers.length;b++)if(a=j.tkusers[b],a.user_uuid===j.user.id)return a;return null},a.getUsers=function(){o.getTimeKeeperUsers().then(function(a){a.data.success&&(j.tkusers=[],j.tkusersList=[],j.tkusers=a.data.success.data,m.localStorage.setItem("tkUsers",JSON.stringify(j.tkusers)),angular.forEach(j.tkusers,function(a){a.enabled&&j.tkusersList.push(a)}),j.tkusersList)})},(!j.tkusers||j.tkusers.length<1)&&a.getUsers(),a.closeCreateGroup=function(){a.newgroup={},l.dismissAll()},a.today=new Date,a.time={start_stamp:a.today,end_stamp:a.today},a.ismeridian=!0,a.hstep=1,a.mstep=15,a.addEditRecord=function(b,c,d){if("Add"==c.action)if(c.selectedDay)var e=c.selectedDay.fullday+" "+c.selectedDay.month+" "+c.selectedDay.date+" "+c.selectedDay.year,f=e+" "+b.start_stamp.getHours()+":"+b.start_stamp.getMinutes()+":"+b.start_stamp.getSeconds(),g=e+" "+b.end_stamp.getHours()+":"+b.end_stamp.getMinutes()+":"+b.end_stamp.getSeconds(),h={start_stamp:new Date(f).toString().replace(/GMT.+/,""),end_stamp:new Date(g).toString().replace(/GMT.+/,""),user_uuid:c.user.user_uuid,action:c.action};else var h={start_stamp:b.start_stamp.toString().replace(/GMT.+/,""),end_stamp:b.end_stamp.toString().replace(/GMT.+/,""),user_uuid:c.user.user_uuid,action:c.action};else if(c.selectedDay)var i=new Date(c.record.start_stamp),k=new Date(c.record.end_stamp),e=c.selectedDay.fullday+" "+c.selectedDay.month+" "+c.selectedDay.date+" "+c.selectedDay.year,f=e+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),g=e+" "+k.getHours()+":"+k.getMinutes()+":"+k.getSeconds(),h={start_stamp:new Date(f).toString().replace(/GMT.+/,""),end_stamp:new Date(g).toString().replace(/GMT.+/,""),user_uuid:c.user.user_uuid,action:c.action,record_uuid:c.record.time_keeper_record_uuid};else var h={start_stamp:c.record.start_stamp.toString().replace(/GMT.+/,""),end_stamp:c.record.end_stamp.toString().replace(/GMT.+/,""),user_uuid:c.user.user_uuid,action:c.action,record_uuid:c.record.time_keeper_record_uuid};var l=new Date(h.start_stamp);a.strdate=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate(),o.addEditRecord(h).then(function(b){b.data.success?j.showSuccessAlert(b.data.success.message):j.showErrorAlert(b.data.error.message),a.putRecords(a.strdate)}),d&&d()},a.closeAddEditRecord=function(){l.dismissAll()},j.$on("set.timeline.tab",function(b,c){a.user=c.user,A()}),a.downloadUrl=function(a){return j.onescreenBaseUrl+"/timeclockpro/screenshot/download/"+a.time_keeper_screenshot_uuid+"?token="+j.userToken},a.groupActive=[],B(),a.toggleShowGroupMembers=function(a){a.showMembers=!a.showMembers},a.toggleShowGroupManagers=function(a){a.showManagers=!a.showManagers},a.createNewTkGroup=function(a){var b=C(a,null);if(0===b.errors.length)o.postCreateTkGroup(b).then(function(a){if(j.showalerts(a),a.data.success){j.tkGroups||(j.tkGroups=[]);var b=a.data.success.data;j.tkGroups.push(b),r.setTkUsers(),m.localStorage.setItem("tkGroups",JSON.stringify(j.tkGroups)),l.dismissAll()}},function(a){__env.enableDebug&&console.log(a)});else{var c="";angular.forEach(b.errors,function(a){c+=(0!==c.length?", ":"")+a}),j.alerts.push({error:!0,message:"Error: "+c})}},a.getUserName=function(a){var b=f("getContactbyUserUUID")(j.userContacts,a);return null!==b?b.contact_name_given+" "+b.contact_name_family:""},a.showEditPermissions=function(b){j.editPermissionIndex=b,j.uploaderOption="/permissions/group/create",j.showNewGroup=!0,null!==b&&(console.log(a.uploader),j.uploaderOption="/permissions/group/update",j.showNewGroup=!1),a.uploader.url=j.onescreenBaseUrl+j.uploaderOption,a.search={};var c={editPermissionIndex:j.editPermissionIndex,closeCreateGroup:a.closeCreateGroup,tkGroups:j.tkGroups,showNewGroup:j.showNewGroup,uploader:a.uploader,clearFilter:a.clearFilter,modalTableHeight:a.modalTableHeight,userContacts:j.userContacts,updateTkGroup:a.updateTkGroup,createNewTkGroup:a.createNewTkGroup,isTkGroupMember:a.isTkGroupMember,search:a.search};j.showModal("/timeclockpro/createupdategroup.html",c)},a.updateTkGroup=function(a,b){var c=C(a,b);__env.enableDebug&&console.log(c);var d={input:D(c)};if(0===c.errors.length)console.log(d),o.postUpdateTkGroup(d).then(function(a){j.showalerts(a),a.data.success&&(j.tkGroups.splice(b,1),j.tkGroups.push(a.data.success.data),r.setTkUsers(),m.localStorage.setItem("tkGroups",JSON.stringify(j.tkGroups)),l.dismissAll())},function(a){__env.enableDebug&&console.log(a)});else{var e="";angular.forEach(c.errors,function(a){e+=(0!==e.length?", ":"")+a}),j.alerts.push({error:!0,message:"Error: "+e})}},a.clearFilter=function(){a.search.contact_name_full=""},a.isAdmin=function(){return z.isAdminGroupOrGreater()},a.isAdminOrManager=function(){
var b;return j.user.tkRole?(b=j.user.tkRole,a.isAdmin()||"manager"===b):a.isAdmin()?!0:null},a.message=!1,a.isTkUserOrGreater=function(){return a.isTkUser=JSON.parse(m.localStorage.getItem("isTkUser")),a.isTkUser?(a.message=!1,!0):void(a.message=!0)},a.postRemoveTkGroupMember=function(a,b,c){if("member"===c&&a.members.length>1||"manager"===c&&a.managers.length>1){var d={group_uuid:a.time_keeper_group_uuid,group_member_uuid:"member"===c?a.members[b].user_uuid:a.managers[b].user_uuid,member_type:c};__env.enableDebug&&console.log(d),o.postRemoveTkGroupMember(d).then(function(d){if(d.data.error)__env.enableDebug&&console.log(d.data.error.message);else{__env.enableDebug&&console.log(d.data.success.message);var e=f("getGroupIndexbyUUID")(j.tkGroups,a.time_keeper_group_uuid,"time_keeper_");j.tkGroups[e][c+"s"].splice(b,1),r.setTkUsers(),m.localStorage.setItem("tkGroups",JSON.stringify(j.tkGroups))}})}else j.alerts.push({error:!0,message:"Error: You can not remove this "+c+" as there must be at least one "+c+" in each group."})},a.dissolveTkGroup=function(a){o.getRemoveTkGroup(j.tkGroups[a].time_keeper_group_uuid).then(function(b){j.showalerts(b),b.data.success&&(j.tkGroups.splice(a,1),m.localStorage.setItem("tkGroups",JSON.stringify(j.tkGroups)),r.setTkUsers(),l.dismissAll())},function(a){__env.enableDebug&&console.log(a)})},a.dissolveGroup=function(b){if(__env.enableDebug&&console.log(b),b.time_keeper_group_uuid){var c=f("getGroupIndexbyUUID")(j.tkGroups,b.time_keeper_group_uuid,"time_keeper_");a.dissolveTkGroup(c)}},a.openDissolveGroupModal=function(b){var c={group:b,dissolveGroup:a.dissolveGroup};j.showModalWithData("/company/confirmdissolvegroup.html",c)},a.isTkGroupMember=function(a,b,c){if(null!==a){var d=j.tkGroups[a][c+"s"],e=!1;return angular.forEach(d,function(a){a.user_uuid===b&&(e=!0)}),e}return!1},a.showModalFull=j.showModalFull,a.tkusersList=JSON.parse(m.localStorage.getItem("activetkUsers")),a.tkusersList&&angular.forEach(a.tkusersList,function(b){b.user_uuid==j.user.id&&(a.user=b)}),j.$on("set.timeline.tab",function(b,c){a.user=c.user,a.todaysDate(a.today)}),a.downloadUrl=function(a){return j.onescreenBaseUrl+"/timeclockpro/screenshot/download/"+a.time_keeper_screenshot_uuid+"?token="+j.userToken};var F=new Date,G=new Array;G[0]="January",G[1]="February",G[2]="March",G[3]="April",G[4]="May",G[5]="June",G[6]="July",G[7]="August",G[8]="September",G[9]="October",G[10]="November",G[11]="December";var H=new Array(7);H[0]="Sunday",H[1]="Monday",H[2]="Tuesday",H[3]="Wednesday",H[4]="Thursday",H[5]="Friday",H[6]="Saturday",a.today={tday:H[F.getDay()],tmonth:F.getMonth(),tmonthname:G[F.getMonth()],tyear:F.getFullYear(),tdate:F.getDate()},a.initializeDate=function(){a.today={tday:H[F.getDay()],tmonth:F.getMonth(),tmonthname:G[F.getMonth()],tyear:F.getFullYear(),tdate:F.getDate()},a.todaysDate(a.today)},a.selectedDay=null,a.thumbnailUrl=function(a){return j.onescreenBaseUrl+"/timeclockpro/screenshot/thumb/"+a.time_keeper_screenshot_uuid+"/"+a.domain_uuid+"?token="+j.userToken},a.snapshotUrl=function(a){return j.onescreenBaseUrl+"/timeclockpro/screenshot/image/"+a.time_keeper_screenshot_uuid+"/"+a.domain_uuid+"?token="+j.userToken},a.putRecords=function(b){j.records=[];var c=new Date(b+" 00:00");o.getRecords(a.user.user_uuid,b).then(function(a){j.userRecords=a.data,angular.forEach(j.userRecords.records,function(a){var b=new Date(a.start_stamp),d=new Date(a.end_stamp),e=0;if(e=d.getTime()-b.getTime(),b.setHours(0,0,0,0),d.setHours(0,0,0,0),c.setHours(0,0,0,0),b.getTime()==c.getTime()){var f=new Date(a.start_stamp),g=new Date(a.end_stamp);a.stime=f,a.etime=g,j.records.push(a)}}),angular.forEach(j.userRecords.activity.activityData,function(a){a.width=2.9*(parseInt(a.timeh)+1)})})},a.selectedDate=function(b){a.selectedDay=b,j.selectedDay1=b,a.fulldate1=b.fullday+", "+b.month+" "+b.date,j.dateSel=b.year+"-"+(b.monthnum+1)+"-"+b.date,a.putRecords(j.dateSel)},a.todaysDate=function(b){a.selectedDay=null,a.fulldate1=b.tday+", "+b.tmonthname+" "+b.tdate,j.dateSel=b.tyear+"-"+(b.tmonth+1)+"-"+b.tdate,a.putRecords(j.dateSel)},a.editRecord=function(a,b){j.strdate=j.selectedDay1,j.showModalFull("/timeclockpro/addEditRecord.html",{user:b,selectedDay:j.selectedDay1,action:"Edit",record:a},"lg")},a.addOfflineTime=function(a){j.strdate=j.selectedDay1,j.showModalFull("/timeclockpro/addEditRecord.html",{user:a,selectedDay:j.selectedDay1,action:"Add"},"lg")},j.strdate||a.todaysDate(a.today),console.log(j.strdate),E(F.getMonth(),a.today.tyear),a.next=function(b){11==a.today.tmonth?(a.today.tmonth=0,a.today.tyear=b.tyear+1):(a.today.tmonth=b.tmonth+1,a.today.tyear=b.tyear);var c=new Date(a.today.tyear,a.today.tmonth,1);a.today={tday:H[c.getDay()],tmonth:c.getMonth(),tmonthname:G[c.getMonth()],tyear:c.getFullYear(),tdate:c.getDate()},a.selectedDay=null,a.fulldate1=a.today.tday+", "+a.today.tmonthname+" "+a.today.tdate,a.dateSel=a.today.tyear+"-"+(a.today.tmonth+1)+"-"+a.today.tdate,E(a.today.tmonth,a.today.tyear),a.putRecords(a.dateSel)},a.previous=function(b){0==a.today.tmonth?(a.today.tmonth=11,a.today.tyear=b.tyear-1):(a.today.tmonth=b.tmonth-1,a.today.tyear=b.tyear);var c=new Date(a.today.tyear,a.today.tmonth,1);a.today={tday:H[c.getDay()],tmonth:c.getMonth(),tmonthname:G[c.getMonth()],tyear:c.getFullYear(),tdate:c.getDate()},a.selectedDay=null,a.fulldate1=a.today.tday+", "+a.today.tmonthname+" "+a.today.tdate,a.dateSel=a.today.tyear+"-"+(a.today.tmonth+1)+"-"+a.today.tdate,E(a.today.tmonth,a.today.tyear),a.putRecords(a.dateSel)},a.deleteScreenshot=function(b,c){var d={screenshot:b,record:c};o.postDeleteScreenshot(d).then(function(b){b.data.success&&(j.showSuccessAlert("Screenshot Deleted successfully!"),a.putRecords(j.dateSel))})}}]),proySymphony.directive("bootstrapSwitch",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){b.bootstrapSwitch(),b.on("switchChange.bootstrapSwitch",function(b,c){d&&a.$apply(function(){d.$setViewValue(c)})}),a.$watch(c.ngModel,function(a,c){a?b.bootstrapSwitch("state",!0,!0):b.bootstrapSwitch("state",!1,!0)})}}}).directive("companySetupNumberSetupTab",["dataFactory","$mdDialog","$filter","$rootScope","metaService","chatMacroService","$timeout","e911Service","userService","$uibModalStack","$q","_",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"E",templateUrl:"views/company/company-setup-number-setup-tab.html",scope:{domain:"<"},link:function(f,g,m){function n(a){var b=a.e911DestinationUuid,c=f.e911CandidateDIDs[b];f.outboundDIDChoices[a.id]=c}f.init=function(){f.loading=!0,f.newE911Number={},f.outboundDIDChoices={},f.emergencyDidChoices={},f.e911Registrations={},f.userDIDChoices={},f.editingDid=null;var a=[];a.push(f.loadStates()),a.push(f.loadUsers(f.domain.domain_uuid)),a.push(f.getE911Registrations(f.domain.domain_uuid)),a.push(f.getValidDIDs(f.domain.domain_uuid)),k.all(a).then(function(a){l.every(a,Boolean)&&f.$evalAsync(function(){f.initializeUserDIDChoices(),f.initializeOutboundDIDChoices(),f.initializeEmergencyDidChoices(),f.loading=!1})})},e.rootScopeOn(f,"portingnumber.activated",function(){console.log("INITIALIZE"),f.init()}),f.loadStates=function(){return a.getStates().then(function(a){return f.billingStates=a.data,f.billingStates})},f.loadUsers=function(a){return i.findUsers(a).then(function(a){return a&&f.$evalAsync(function(){f.users=i.mergeUserColWithContacts(a)}),a})},f.getE911Registrations=function(a){return h.getE911Registrations(a).then(function(a){return a&&f.$evalAsync(function(){f.e911Registrations=a}),a})},f.getValidDIDs=function(a){return h.getValidDIDs(a).then(function(a){return a&&f.$evalAsync(function(){f.validDids=a}),a})},f.getE911CandidateDIDs=function(a){return h.getE911CandidateDIDs(a).then(function(a){return a&&f.$evalAsync(function(){f.e911CandidateDIDs=a}),a})},f.initializeOutboundDIDChoices=function(){angular.forEach(f.users,function(a){var b=a.extension.outbound_caller_id_number;b&&f.$evalAsync(function(){f.outboundDIDChoices[a.id]=f.validDids[b]})}),console.log(f.outboundDIDChoices)},f.initializeUserDIDChoices=function(){angular.forEach(f.users,function(a){var b=a.did;b&&f.$evalAsync(function(){f.userDIDChoices[a.id]=f.validDids[b]})}),console.log(f.userDIDChoices),console.log(f.users)},f.initializeEmergencyDidChoices=function(){angular.forEach(f.users,function(a){var b=a.e911DestinationUuid;b&&f.$evalAsync(function(){f.emergencyDidChoices[a.id]=f.e911Registrations[b]})})},f.editDid=function(a){f.editingDid=a.id},f.cancelEditUserDid=function(a){f.editingDid=null,f.userDIDChoices[a.id]=f.validDids[a.did]},f.isAvailDid=function(a,b){return a.port&&"ported"!==a.port.port_status?!1:a.info&&a.info.isConference||a.info.isIvr?!1:a.info&&a.info.isUser&&a.destination_number!==b.did?!1:!0},f.doChangeUserDid=function(e){var g=f.userDIDChoices[e.id];if(console.log(e.did),console.log(g.destination_number),e.did===g.destination_number)return void f.cancelEditUserDid(e);var h=b.confirm().title("Confirm").htmlContent("Please confirm that you want to change the DID for <strong>"+e.contact_name_given+" "+e.contact_name_family+"</strong> from <strong>"+c("tel")(e.did)+"</strong> to <strong>"+c("tel")(g.destination_number)+"</strong>?").ariaLabel("Confirm").ok("Yes").cancel("Cancel"),i={domain_uuid:e.domain_uuid,user_uuid:e.id,destination_uuid:g.destination_uuid};b.show(h).then(function(){a.postChangeUserDid(i).then(function(a){console.log(a.data),a.data.success?(e.did=g.destination_number,f.userDIDChoices[e.id]=a.data.success["new"],f.editingDid=null):d.showErrorAlert(a.data.error.message)})},function(){f.cancelEditUserDid(e)})},f.DIDIsUnregistered=function(a){return!f.e911Registrations[a.destination_uuid]},f.registerE911Phone=function(){var a=f.newE911Number;a.callername=f.domain.domain_name;var b=f.newE911Number.number.destination_uuid;return b?h.registerE911Phone(b,a).then(function(a){return a?f.e911Registrations[b]=a:null}):null},f.orderE911Address=function(a){var b=f.newE911Number;return b.callername=f.domain.domain_name,console.log(b),h.orderE911Address(f.domain.domain_uuid,b).then(function(b){return b?(f.e911Registrations[b.destination_uuid]=b,a&&(f.emergencyDidChoices[a.id]=b),f.assignCallerIdNumber(a,!0),j.dismissAll(),!0):null})},f.saveEditE911=function(a){var b=f.editE911Number;b.callername=f.domain.domain_name;var c=a.destination_uuid;return c?h.registerE911Phone(c,b).then(function(a){return a?f.e911Registrations[c]=a:null}):null},f.setCallerId=function(b){var c=f.outboundDIDChoices[b.id],d={extension_uuid:b.extension.extension_uuid,did:c.destination_number};a.postUpdateUserCallerId(d).then(function(a){console.log(a.data),a.data.success?b.extension.outbound_caller_id_number=c.destination_number:f.outboundDIDChoices[b.id]=f.validDids[b.extension.outbound_caller_id_number]})},f.assignE911Registration=function(a,b){if("createnew"===f.emergencyDidChoices[a.id])console.log("CREATE NEW");else{({extension_uuid:a.extension.extension_uuid,destination_uuid:b.destination_uuid})}},f.modalRegisterAndAssignCallerIdNumber=function(a){j.dismissAll(),f.registerE911Phone().then(function(b){b?f.assignCallerIdNumber(a).then(function(b){b||n(a)}):n(a)})},f.$watch("domain",function(a,b){var c=a&&!b||a===b,d=a&&b&&a!==b;(c||d)&&f.init()}),f.setDefaultE911Address=function(a){h.setDefaultE911Address(a).then(function(b){b.success?(angular.forEach(f.e911Registrations,function(a){a.domain_default=null}),f.e911Registrations[a.destination_uuid].domain_default="true"):d.showErrorAlert("Unable to set the address as default")})},f.addressNotSet=function(a){return!f.emergencyDidChoices[a.id]},f.assignCallerIdNumber=function(a,b){var c=f.emergencyDidChoices[a.id];return console.log(c),c||b?h.assignCallerIdNumber(a.id,c.destination_uuid).then(function(b){return b&&(a.extension.emergency_caller_id_number=b.emergency_caller_id_number),b}):(f.showNewE911Modal(a),null)},f.showNewE911Modal=function(a){var b={billingStates:f.billingStates,newE911Number:f.newE911Number,modalRegister:f.orderE911Address,user:a};return d.showModalWithData("/settings/order-e911-modal.html",b),null},f.addNewE911Number=function(){f.showAddE911=!0},f.cancelAddE911=function(a){a&&(f.emergencyDidChoices[a.id]=null),f.showAddE911=!1},f.editE911Number={},f.editE911=function(a){a.editing=!0,f.editE911Number.address1=a.address,f.editE911Number.community=a.city,f.editE911Number.state=a.state,f.editE911Number.postalcode=a.zipcode},f.cancelEditE911=function(a){a.editing=!1}}}}]).directive("keyPressChat",["chatMessages","$timeout","newChatService","chatMacroService","$rootScope","usefulTools","$window","metaService",function(a,b,c,d,e,f,g,h){return{restrict:"A",scope:{sendPost:"&",rootPost:"<",isThreadedInput:"<",chatData:"=",chatView:"=",runInit:"=",isDelayed:"<",uploader:"<",keyPressEventFns:"<",peopleData:"=",channelData:"=",macroData:"="},link:function(a,b,d){function g(a){for(var b,c,d=Object.keys(n),e=0;e<d.length;e++)if(c=d[e],(b=n[c])(a))return c;return null}function i(b){b.stopImmediatePropagation();var c=g(b),d=a.keyPressEventFns.onKeyDown,e=d[c],f=d.always,h=d.noRelevant;e?e(b,a):h(b,a),f(b,a)}function j(b){b.stopImmediatePropagation();var c=g(b),d=a.keyPressEventFns.onKeyUp,e=d[c],f=d.always,h=d.noRelevant;e?e(b,a):h(b,a),f(b,a)}if(a.doGetCaretPosition=f.doGetCaretPosition,a.init=function(){var c=a.getInProgress();b[0].value=c?c:"",b.bind("keydown",i),b.bind("keyup",j),b[0].onpaste=a.keyPressEventFns.onPaste},a.element=b[0],a.peopleData)a.peopleData.element=a.element;else var k=a.$watch("peopleData",function(b,c){b&&(a.peopleData.element=a.element,k())});if(a.channelData)a.channelData.element=a.element;else var l=a.$watch("channelData",function(b,c){b&&(a.channelData.element=a.element,l())});if(a.macroData)a.macroData.element=a.element;else var m=a.$watch("macroData",function(b,c){b&&(a.macroData.element=a.element,m())});a.doSendPost=function(){var d;d=a.isThreadedInput?c.findChannelById(a.rootPost.channel_id):a.channel();var e={root_id:a.isThreadedInput?a.rootPost.id:null,uploader:a.uploader?a.uploader:null};a.sendPost()(b[0],d,e)},a.$watch(function(){return a.channel().id},function(b,c){a.init()}),a.channel=function(){return c.publicData.currentChannel},a.setInProgress=function(b){a.isThreadedInput?c.setInProgress(a.rootPost.id,b):c.setInProgress(a.channel().id,b)},a.getInProgress=function(){return a.rootPost&&a.isThreadedInput?c.getInProgress(a.rootPost.id):c.getInProgress(a.channel().id)};var n={bareEnter:function(a){return 13===a.which&&!a.shiftKey},shiftEnter:function(a){return 13===a.which&&a.shiftKey},at:function(a){return 50===a.which&&a.shiftKey},hash:function(a){return 51===a.which&&a.shiftKey},tab:function(a){return 9===a.which},esc:function(a){return 27===a.which},spc:function(a){return 32===a.which},up:function(a){return 38===a.which},down:function(a){return 40===a.which},backspace:function(a){return 8===a.which}};h.rootScopeOn(a,"emojis-initialized",function(a){var c=b.siblings().filter(".wdt-emoji-picker");c.on("click",function(a){var d=c.hasClass("wdt-emoji-picker-open");d&&e.$broadcast("emoji-opened",b[0])})}),a.init()}}}]).directive("emojiPopup",["metaService",function(a){return{restrict:"E",templateUrl:"views/emoji-popup.html",scope:{post:"<"},link:function(b,c,d){var e=function(a){return a.getBoundingClientRect()},f=function(){return c.find(".wdt-emoji-popup")[0]};b.getThisElementHeight=function(){return f().getBoundingClientRect().height},b.calculateStyle=function(a){var b=f(),c=b.getBoundingClientRect(),d=a.top-c.height,e=c.width,g=a.left+a.width+-e;b.style.left=g+"px",b.style.top=d+"px"},a.rootScopeOn(b,"emoji-opened",function(a,c){var d=e(c);b.$evalAsync(function(){b.calculateStyle(d)})})}}}]).directive("giphyImg",["$timeout","$interval","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/giphy-img.html",scope:{post:"<"},link:function(a,d,e){var f=function(){return d.find(".giphy-img")[0]};a.getHeight=function(){return f().getBoundingClientRect().height},a.scrollToBottom=function(){var a=angular.element(".posts-container")[0];a.scrollTop=a.scrollHeight};var g=100,h=0,i=b(function(){a.getHeight()>0&&!c.showingMorePosts?(a.scrollToBottom(),b.cancel(i)):h===g&&b.cancel(i),h+=1},100)}}}]).directive("chatSendButton",["chatService","newChatService",function(a,b){return{restrict:"A",scope:{inputElement:"<",sendPost:"&",isThreadedButton:"<",rootPost:"<"},link:function(a,c,d){a.channel=function(){return b.publicData.currentChannel},c.on("click",function(b){var c={root_id:a.isThreadedButton?a.rootPost.id:null};a.sendPost()(a.inputElement,a.channel(),c)})}}}]).directive("chatAvatar",["chatService","newChatService",function(a,b){return{restrict:"E",templateUrl:"views/chat-avatar.html",scope:{post:"<",contact:"<",chatUser:"<",isConsecutivePost:"<"},link:function(a,c,d){a.contact.contact_profile_color?a.contactColor=a.contact.contact_profile_color:a.contactColor="",a.showMemberPhoto=b.showMemberPhoto}}}]).directive("chatPeopleSuggestionList",["$rootScope","chatMacroService","metaService","$window",function(a,b,c,d){return{restrict:"E",templateUrl:"views/chat/chat-people-suggestion-list.html",scope:{parentData:"<",inputElement:"<"},link:function(a,b,c){var d=function(){return a.inputElement.getBoundingClientRect()},e=function(){return b.find(".suggestion-list")[0]};a.getTop=function(){return d().top},a.getThisElementHeight=function(){return e().getBoundingClientRect().height},a.calculateStyle=function(){var b=d();a.top=b.top-a.getThisElementHeight(),a.styleObj={top:a.top,width:b.width,left:b.left}},a.$watch(a.getTop,function(b,c){a.$evalAsync(function(){a.calculateStyle()})}),a.$watch(a.getThisElementHeight,function(b,c){a.$evalAsync(function(){a.calculateStyle()})}),a.calculateStyle()}}}]).directive("chatChannelsSuggestionList",["$rootScope","chatMacroService","metaService",function(a,b,c){return{restrict:"E",templateUrl:"views/chat/chat-channels-suggestion-list.html",scope:{parentData:"<",inputElement:"<"},link:function(a,b,c){var d=function(){return a.inputElement.getBoundingClientRect()};a.getTop=function(){return d().top},a.calculateStyle=function(){var b=d();a.top=b.top-b.height-138,a.styleObj={top:a.top,width:b.width,left:b.left}},a.$watch(a.getTop,function(b,c){a.$evalAsync(function(){a.calculateStyle()})}),a.calculateStyle()}}}]).directive("chatMacroSuggestionList",["$rootScope","chatMacroService","metaService",function(a,b,c){return{restrict:"E",templateUrl:"views/chat/chat-macro-suggestion-list.html",scope:{parentData:"<",inputElement:"<"},link:function(a,b,c){var d=function(){return a.inputElement.getBoundingClientRect()};a.getTop=function(){return d().top},a.calculateStyle=function(){var b=d();a.top=b.top-b.height-138,a.styleObj={top:a.top,width:b.width,left:b.left}},a.$watch(a.getTop,function(b,c){a.$evalAsync(function(){a.calculateStyle()})}),a.calculateStyle()}}}]).directive("threadedMessageDisplay",["$rootScope","mmApi","$cookies","chatService","$timeout","FileUploader","fileService","$window","newChatService","__env","symphonyConfig","usefulTools","chatMacroService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"E",templateUrl:"views/chat/threaded-message-display.html",scope:{rootPost:"<",closeDisplay:"&",sendPost:"&",classObj:"=",getKeyPressFns:"&",selectCurrentSelection:"&",selectMacroSelection:"&"},link:function(b,d,g){function h(){var a={},b={};angular.copy(i.publicChannels,a),angular.copy(i.privateChannels,b);var c=_.merge(a,b);return l.convertObjectToArray(c)}b.keyPressFns=b.getKeyPressFns()(b),i.registerChatEventCallback("teamMembersLoaded",function(){b.peopleListData={people:l.convertObjectToArray(i.teamMembers),selectedIndex:0,element:null,scope:b,select:function(a){var c=this.scope,d=this.element;b.selectCurrentSelection()(c,d,a)}}}),i.registerChatEventCallback("chatInitialized",function(){var a=h();b.channelListData={channels:l.convertObjectToArray(a),selectedIndex:0,element:null,scope:b,select:function(a){var c=this.scope,d=this.element;b.selectCurrentSelection()(c,d,a)}}}),m.getChatMacros().then(function(a){a&&(b.macrosListData={macros:a,selectedIndex:0,element:null,scope:b,select:function(a,c){var d=this.scope,e=this.element;b.selectMacroSelection()(d,e,{index:a,suggestion:c})}})}),b.$watch("rootPost",function(a,c){a&&b.init()}),b.getOrderPost=function(a){return b.channel().postInfo.posts[a]},b.showUploadingFiles=!1,b.$watch("showUploadingFiles",function(a,c){(a===!0||a===!1)&&(b.classObj["with-file-upload"]=b.showUploadingFiles)}),b.init=function(){b.showUploadingFiles=!1,b.inputElement=d.find("textarea")[0],b.sendPostOpts={root_id:b.rootPost.id,uploader:b.uploader}},b.jumpToPost=function(a){var b='chat-post[data-threaded-post-id="'+a.id+'"]',c=angular.element(b)[0];c&&c.scrollIntoView&&c.scrollIntoView()},b.$watch("rootPost.postInfo.order.length",function(a,c){var d=0;a&&!c&&0!==c&&(d=100),e(function(){if(b.rootPost&&b.rootPost.postInfo){var a,c=b.rootPost.postInfo.order,d=c[c.length-1];a=b.rootPost.postInfo.posts[d],a&&b.jumpToPost(a)}},d)}),b.channel=function(){return b.rootPost?i.findChannelById(b.rootPost.channel_id):null};var n=j.mmUrl&&""!=j.mmUrl?j.mmUrl:k.chatUrl,o=b.uploader=new f({url:n+"/files",alias:"files",removeAfterUpload:!0,headers:{Authorization:"Bearer "+c.get("accessToken")},transformRequest:angular.identity});b.$watch("uploader.queue.length",function(a,c){a>0&&(b.showUploadingFiles=!0),0===a&&(b.showUploadingFiles=!1)}),o.onBeforeUploadItem=function(a){var c=b.channel().id;a.formData.push({channel_id:c})},o.onCancelItem=function(a,b,c,d){o.clearQueue()},o.onCompleteAll=function(a,c){b.sendPost()(b.inputElement,b.channel(),b.sendPostOpts)},e(function(){document.querySelector(".include-emojis");wdtEmojiBundle.init(".include-emojis"),e(function(){a.emojisInitialized=!0,a.$broadcast("emojis-initialized")},1e3)})}}}]).directive("searchMessageDisplay",["$rootScope","mmApi","$sce","$cookies","chatService","$timeout","FileUploader","fileService","$window","newChatService",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"views/chat/search-message-display.html",scope:{search:"=",sendSearch:"&",closeDisplay:"&"},link:function(a,b,c){a.showPostInChannel=function(b){console.log(b),a.search.highlightPost=b.id,j.goToSearchResult(b).then(function(){a.search.jumpToPost(b)})}}}}]).directive("postActions",["$rootScope","$uibModalStack","userContactService","emailService","callService","videoConfService","newChatService",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"views/chat/post-action.html",scope:{post:"<",chatUser:"<",openThread:"&",isThreaded:"<"},link:function(h,i,j){function k(){b.dismissAll()}function l(c,d){b.dismissAll(),g.editPost(c,d).then(function(b){b||a.showErrorAlert("There was an error updating the channel.")})}function m(c){b.dismissAll(),g.deletePost(c).then(function(b){b||a.showErrorAlert("There was a problem deleting the channel.")})}h.tips=a.tips,h.userProfile=g.userProfile,h.showModalWithData=a.showModalWithData,h.isCurrentUsersPost=function(){return g.userOwnsPost(h.post)},h.showActionsStyle={width:h.isThreaded?"35px":"70px"},h.isThreadPost=function(a){return g.isThreadPost(a)},h.getContact=function(){return h.contact||(h.contact=h.getContactByPost(h.post)),h.contact},h.getContactByPost=function(a){return c.getContactbyMMId(h.post.user_id)},h.startEmailClient=function(){var a=h.getContact();a&&a.contact_email_address&&d.startEmailClient(a.contact_email_address)},h.makeCall=function(a){e.makeCall(a)},h.startSmsModal=function(){var b=h.getContact();b&&a.showModalWithData("/sms/sendsmstop.html",b)},h.sendVideoInvite=function(){var a=h.getContact();a&&f.sendVideoInvite(a)},h.editMessage=function(b){var c={message:b.message,post:b,doEditPost:l,closeModal:k};a.showModalWithData("/chat/editpost.html",c)},h.deleteMessage=function(b){var c={post:b,doDeletePost:m,closeModal:k};a.showModalWithData("/chat/deletepost.html",c)};var n=i.find(".dropup");n.on("show.bs.dropdown",function(){angular.element("body").append(n.css({position:"absolute",left:n.offset().left,top:n.offset().top}).detach())}),n.on("hidden.bs.dropdown",function(){i.append(n.css({position:!1,left:!1,top:!1}).detach())})}}}]).directive("manageChannel",["$rootScope","newChatService","$uibModalStack","usefulTools","userContactService",function(a,b,c,d,e){return{restrict:"E",templateUrl:"views/chat/manage-channel.html",scope:{channel:"<"},link:function(e,f,g){function h(){c.dismissAll(),e.messages=[]}function i(a){e.messages.splice(a,1)}function j(a){return b.isChannelAdmin(b.publicData.currentChannel.id,a)}function k(a){return b.isChannelMember(b.publicData.currentChannel,a)}function l(){return e.messages}function m(a,c){console.log(c),b.addChannelMember(a,c.id).then(function(a){a?e.messages.push({type:"success",note:c.first_name+" "+c.last_name+" has been added."}):e.messages.push({type:"danger",note:"There was a problem adding "+c.first_name+" "+c.last_name+"."})})}function n(a,c){b.removeChannelMember(a,c.id).then(function(a){a?e.messages.push({type:"success",note:c.first_name+" "+c.last_name+" has been removed."}):e.messages.push({type:"danger",note:"There was a problem removing "+c.first_name+" "+c.last_name+"."})})}function o(a,c,d){b.changeMemberRole(a,c,d)}function p(d){b.editChannel(d).then(function(b){b?a.showSuccessAlert("Channel was updated successfully."):a.showErrorAlert("There was an error updating the channel."),c.dismissAll()})}function q(d){b.deleteChannel(d).then(function(b){b?a.showSuccessAlert("Channel was Deleted successfully."):a.showErrorAlert("There was a problem deleting the channel."),c.dismissAll()})}function r(a){b.leaveChannel(a).then(function(a){c.dismissAll()})}e.chatData=b.publicData,e.messages=[],e.editChannel=function(){var c={memberId:b.userProfile.id,channel:b.publicData.currentChannel,teamMembers:d.convertObjectToArray(b.teamMembers),doEditChannel:p,isMemberOf:k,closeModal:h};"P"===c.channel.type&&(c.channel.channelmember={},angular.forEach(c.teamMembers,function(a){c.channel.channelmember[a.id]=k(a.id)})),console.log(c),a.showModalWithData("/chat/editchannel.html",c)},e.deleteChannel=function(){var c={channel:b.publicData.currentChannel,doDeleteChannel:q,closeModal:h};a.showModalWithData("/chat/deletechannel.html",c)},e.addMembers=function(){var c={channel:b.publicData.currentChannel,teamMembers:d.convertObjectToArray(b.teamMembers),doAddMember:m,isMemberOf:k,closeModal:h};a.showModalWithData("/chat/addtoprivatechannel.html",c)},e.leaveChannel=function(){var c={channel:b.publicData.currentChannel,unsubscribeChannel:r,closeModal:h};a.showModalWithData("/chat/unsubscribechannel.html",c)},e.manageMembers=function(){var c={user:b.userProfile,channel:b.publicData.currentChannel,teamMembers:d.convertObjectToArray(b.teamMembers),messages:l(),doAddMember:m,doRemoveMember:n,closeMessages:i,doChangeRole:o,isAdminOf:j,isMemberOf:k,closeModal:h};a.showModalWithData("/chat/managechannelmembers.html",c)}}}}]).directive("chatSearchResult",["newChatService","userContactService","emailService","callService","$rootScope","videoConfService",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"views/chat/chat-search-result.html",scope:{results:"<",postId:"<",showPostInChannel:"&"},link:function(c,d,e){c.post=c.results.posts[c.postId],c.contact=b.getContactbyMMId(c.post.user_id),c.user=a.teamMembers[c.post.user_id],c.showChannelName=function(b){var c=a.findChannelById(b.channel_id),d="";if(c&&(d=c.display_name,c&&"D"===c.type)){var e=c.name.split("__");angular.forEach(e,function(b){a.teamMembers[b]&&b!==a.userProfile.id&&(d="Direct Message: "+a.teamMembers[b].first_name+" "+a.teamMembers[b].last_name)})}return d}}}}]).directive("chatPost",["$uibModalStack","usefulTools","newChatService","userContactService","emailService","callService","$rootScope","videoConfService","$filter","marked",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"views/chat-post.html",scope:{post:"<",channel:"<",isSearch:"<",highlightPost:"<",openThread:"&",isThreaded:"<",isThreadedRootPost:"<",scrollToBottom:"&"},link:function(k,l,m){function n(){a.dismissAll()}function o(b){var d=c.getDMChannelByUserId(b.id);d?(c.activateDirectChannel(d,b.id),g.showSuccessAlert("Your direct message channel has been created."),a.dismissAll()):c.createDirectChannel(b).then(function(b){console.log(b),b?g.showSuccessAlert("Your direct message channel has been created."):g.showErrorAlert("There was a problem creating the direct message channel."),a.dismissAll()})}function p(a){var b=!1;return c.userProfile.preferences.forEach(function(c){"direct_channel_show"===c.category&&"true"===c.value&&a.id===c.name&&(b=!0)}),!b}k.member=c.userProfile,!k.post,k.isFirstDayPost=k.isSearch?!1:c.isFirstDayPost(k.post),k.chatData=c.publicData,k.contact=function(){return d.getContactbyMMId(k.post.user_id)},k.user=function(){return c.teamMembers[k.post.user_id]},k.isCurrentUsersPost=function(){return c.userOwnsPost(k.post)},k.getMarkedInput=function(){var a=i("callouts")(i("nl2br")(i("linky")(k.isEdited(k.post),"_blank")));return j(a)},k.isFirstThreadPost=function(){if(k.isSearch)return!1;if(k.isThreaded)return!1;var a=k.post,b=c.getPreviousPost(a);if(b&&(k.prevId=b.id),b&&k.isThreadPost(a)){if(!k.isThreadPost(b))return!0;if(b.user_id!==a.user_id)return!0;if(k.isThreadPost(b)&&b.root_id!==a.root_id)return!0}return!1},k.setChannel=function(a){var b=c.findChannelById(a);c.setCurrentChannel(b)},k.showMemberPhoto=function(){return c.showMemberPhoto(k.contact,"-xl")},k.showMember=function(a,b){var e=c.teamMembers[b],f=d.getContactbyMMId(b),h={contact:f,user:e,makeCall:k.makeCall,startSmsModal:k.startSmsModal,createDirectChannel:k.addDirectMessage,sendVideoInvite:k.sendVideoInvite};g.showModalFull("/chat/viewmember.html",h,"sm")},k.isConsecutive=function(){return k.isThreadedRootPost?!1:k.isFirstThreadPost()?!1:k.isThreaded?k.post.isThreadedConsecutive:k.post.isConsecutive},k.getContact=function(){return k.contact||(k.contact=k.getContactByPost(k.post)),k.contact},k.getContactByPost=function(a){return d.getContactbyMMId(k.post.user_id)},k.startEmailClient=function(){var a=k.getContact();a&&a.contact_email_address&&e.startEmailClient(a.contact_email_address)},k.isEdited=function(a){return a.edit_at?a.message+" (edited)":a.message},k.makeCall=function(a){f.makeCall(a)},k.startSmsModal=function(){var a=k.getContact();a&&g.showModalWithData("/sms/sendsmstop.html",a)},k.sendVideoInvite=function(){var a=k.getContact();a&&h.sendVideoInvite(a)},k.isGiphyLink=function(a){return c.isGiphyLink(a)},k.showFilesDisplayForPost=function(a){return c.showFilesDisplayForPost(a)},k.isThreadPost=function(a){return c.isThreadPost(a)},k.isThreadPost(k.post)&&(k.rootPost=function(){var a=c.publicData.currentChannel.postInfo.posts;return a[k.post.root_id]},k.rootPostUser=function(){var a=k.rootPost();return a?c.teamMembers[a.user_id]:null}),k.addDirectMessage=function(){var a={chatUserProfile:k.member,teamMembers:b.convertObjectToArray(c.teamMembers),createDirectMessage:o,dmExists:p,closeModal:n};g.showModalWithData("/chat/createdirectmessagechannel.html",a)}}}}]).directive("chatChannelsList",["$rootScope","chatMessages","$filter","$uibModalStack","usefulTools","$window","metaService","$cookies","newChatService",function(a,b,c,d,e,f,g,h,i){return{restrict:"E",templateUrl:"views/chat-channels-list.html",scope:{},link:function(b,c,f){function g(){d.dismissAll()}function j(b){console.log(b),i.createChannel(b).then(function(b){console.log(b),b&&(a.$broadcast("websocket.restart.needed"),d.dismissAll())})}function k(b){console.log(b);var c=i.getDMChannelByUserId(b.id);c?(i.activateDirectChannel(c,b.id),a.showSuccessAlert("Your direct message channel has been created."),d.dismissAll()):i.createDirectChannel(b).then(function(b){console.log(b),b?a.showSuccessAlert("Your direct message channel has been created."):a.showErrorAlert("There was a problem creating the direct message channel."),d.dismissAll()})}function l(a){var b=!1;return i.userProfile.preferences.forEach(function(c){"direct_channel_show"===c.category&&"true"===c.value&&a.id===c.name&&(b=!0)}),!b}b.init=function(){b.chatUserProfile=i.userProfile,
b.showModal=a.showModal},i.registerChatEventCallback("chatInitialized",b.init),b.favoritesExist=function(){return i.favorites.length>0},b.toggleFavorites=function(){b.toggleChannelListStatus("Favorites")},b.toggleTopicChannels=function(){b.toggleChannelListStatus("TopicChannels")},b.toggleDMChannels=function(){b.toggleChannelListStatus("DMChannels")},b.toggleChannelListStatus=function(a){a="show"+a,b[a]=!b[a],b[a]?h.put(a,"true"):h.remove(a)},b.isFavoriteChannel=function(a,c){return c&&(a=b.prefToChannel(a)),i.isFavoriteChannel(a)},b.toggleFavoriteChannel=function(a,c){c&&(a=b.prefToChannel(a)),b.isFavoriteChannel(a)?i.removeChannelFromFavorites(a):i.addChannelToFavorites(a)},b.initChannelListStatus=function(a){a="show"+a;var c=h.get(a);"true"===c?b[a]=!0:b[a]=!1},b.initChannelListStatus("Favorites"),b.initChannelListStatus("TopicChannels"),b.initChannelListStatus("DMChannels"),b.setChannel=function(a){i.setCurrentChannel(a)},b.addChannel=function(){var c={chatUserProfile:b.chatUserProfile,teamMembers:e.convertObjectToArray(i.teamMembers),createChannel:j,closeModal:g};a.showModalWithData("/chat/addchannel.html",c)},b.addDirectMessage=function(){var c={chatUserProfile:b.chatUserProfile,teamMembers:e.convertObjectToArray(i.teamMembers),createDirectMessage:k,dmExists:l,closeModal:g};a.showModalWithData("/chat/createdirectmessagechannel.html",c)}}}}]).directive("dmChannelsList",["$rootScope","chatService","usefulTools","userContactService","$filter","$window","metaService","newChatService",function(a,b,c,d,e,f,g,h){function i(a,b){a[b]=a[b]()}return{restrict:"E",templateUrl:"views/dm-channels-list.html",scope:{toggleFavoriteChannel:"&",isFavoriteChannel:"&",favoritesOnly:"<"},link:function(a,b,f){a.init=function(){for(var b,c=["toggleFavoriteChannel","isFavoriteChannel"],d=0;d<c.length;d++)b=c[d],i(a,b)},a.init(),a.teamMembers=h.teamMembers,a.channels=function(){return c.convertObjectToArray(h.directChannels)},a.setChannel=function(a){h.setCurrentChannel(a)},a.$on("company.setup.user.added",function(a){}),a.hideDirectMessage=function(a){h.hideDirectMessage(a.id)},a.showChatStatus=function(a){var b="Offline";if(a){var f=d.contacts,g=e("getContactbyMMID")(f,a.id);null!==g&&(b=g.status)}return c.funcPutIcon(b,"")}}}}]).directive("topicChannelsList",["$rootScope","chatMessages","chatService","$uibModalStack","metaService","$filter","newChatService","$window","usefulTools",function(a,b,c,d,e,f,g,h,i){function j(a,b){a[b]=a[b]()}return{restrict:"E",templateUrl:"views/topic-channels-list.html",scope:{toggleFavoriteChannel:"&",isFavoriteChannel:"&",favoritesOnly:"<"},link:function(b,c,e){function f(){o();var b={teamMembers:i.convertObjectToArray(g.teamMembers),createChannel:h,closeModal:o};a.showModalWithData("/chat/addchannel.html",b)}function h(b){g.createChannel(b).then(function(b){b&&(a.$broadcast("websocket.restart.needed"),d.dismissAll())})}function k(a){g.leaveChannel(a)}function l(a){g.joinChannel(a.id,g.userProfile.id).then(function(a){d.dismissAll()})}function m(a){return g.isChannelAdmin(a.id,g.userProfile.id)}function n(a){return g.publicChannels[a.id]?!0:!1}function o(){d.dismissAll()}b.init=function(){for(var a,c=["toggleFavoriteChannel","isFavoriteChannel"],d=0;d<c.length;d++)a=c[d],j(b,a)},b.init(),b.setChannel=function(a){g.setCurrentChannel(a)},b.channels=function(){var a=i.convertObjectToArray(g.publicChannels),b=i.convertObjectToArray(g.privateChannels);return a.concat(b)},b.manageSubscriptions=function(){g.getAvailableChannels().then(function(b){var c={channels:i.convertObjectToArray(b),leaveChannel:k,joinChannel:l,isChannelAdmin:m,isSubscribed:n,addChannel:f,closeModal:o};console.log(c.channels),a.showModalWithData("/chat/managesubscriptions.html",c)})}}}}]).directive("favoriteChannelsList",["$rootScope","chatService","$filter","newChatService","usefulTools",function(a,b,c,d,e){function f(a,b){a[b]=a[b]()}return{restrict:"E",templateUrl:"views/favorite-channels-list.html",scope:{toggleFavoriteChannel:"&",isFavoriteChannel:"&",getAllPreferences:"&"},link:function(a,b,c){a.init=function(){for(var b,c=["toggleFavoriteChannel","isFavoriteChannel","getAllPreferences"],d=0;d<c.length;d++)b=c[d],f(a,b)},a.init(),a.favoritePreferences=function(){return a.getAllPreferences().filter(function(b){return a.isFavoriteChannel(b,!0)})},a.favoriteTopicChannels=function(){return d.publicChannels},a.favoriteDirectChannels=function(){return d.directChannels}}}}]).directive("compileTemplate",["$compile","$parse",function(a,b){return{link:function(c,d,e){function f(){return(g(c)||"").toString()}var g=b(e.ngBindHtml);c.$watch(f,function(){a(d,null,-9999)(c)})}}}]).directive("dynamicElement",["$compile",function(a){return{restrict:"E",scope:{message:"="},replace:!0,link:function(b,c,d){var e=a(b.message)(b);c.replaceWith(e)}}}]).directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]).service("fileUpload",["$http",function(a){this.uploadFileToUrl=function(b,c,d){var e=new FormData;e.append("file",b),e.append("name",d),a.post(c,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).success(function(){__env.enableDebug&&console.log("Success")}).error(function(){__env.enableDebug&&console.log("Success")})}}]).directive("file",function(){return{scope:{file:"="},link:function(a,b,c){b.bind("change",function(b){var c=b.target.files[0];a.file=c?c:void 0,a.$apply()})}}}).directive("addPhoneFields",["$rootScope",function(a){return{restrict:"E",scope:{label:"=label",number:"=number",extension:"=extension",typefax:"=typefax",typevideo:"=typevideo",typevoice:"=typevoice",typetext:"=typetext",phonedata:"=phonedata"},templateUrl:"views/company/addcontactnumber.html"}}]).directive("master",["$window",function(a){function b(b,c,d){b.$watch(function(){b.style={height:a.innerHeight-125-c[0].offsetHeight+"px"}})}return{restrict:"AE",link:b}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown",function(b){13===b.which&&(b.stopPropagation(),a.$apply(function(){a.$eval(c.ngEnter,{e:b})}))})}}).directive("cloudEnter",function(){return{restrict:"A",scope:!0,link:function(a,b,c){b.on("keydown",function(b){13===b.which&&(__env.enableDebug&&console.log("ENTER PRESSED"),a.$apply(function(){var a=b.target;a.blur()}),b.preventDefault())})}}}).directive("contactSelector",["$timeout","$rootScope","userContactService","symphonyConfig","$filter","__env","emailService","usefulTools",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/contact-selector.html",scope:!0,link:function(a,c,d){a.type=a.$parent.contactSelectionType,"sms"===a.type?a.inputPlaceholder="Type contact name or mobile number":"file"===a.type?a.inputPlaceholder="Type contact name, mobile number or email address":"cloudlink"===a.type&&(a.inputPlaceholder="Type contact name or email address"),b.contact={},b.contact.recipients=null,a.selectedIndex=0,a.clearRecipients=function(){b.contact.recipients=null,a.showContactSelection=!1,b.invalidContactSelected=!1},a.searchRecipients=function(a){var c=h.find(b.contactsSelected,"contact_uuid",a.contact_uuid);if(c)return!1;if(!b.contact.recipients||-1!=a.contact_email_address.toLowerCase().indexOf(b.contact.recipients.toLowerCase())||-1!=a.contact_name_given.toLowerCase().indexOf(b.contact.recipients.toLowerCase())||-1!=a.contact_name_family.toLowerCase().indexOf(b.contact.recipients.toLowerCase()))return!0;if(a.phones.length>0){var d=!1;return angular.forEach(a.phones,function(a){-1!=a.phone_number.indexOf(b.contact.recipients)&&(d=!0)}),d}return!1},a.$watch("contact.recipients.length",function(a,c){0===a&&(b.invalidContactSelected=!1)}),a.$watch("filterContactData[selectedIndex]",function(a,c){a!==c&&(b.invalidContactSelected=!1)}),a.removeSelectedContact=function(a){var c=e("getByUUID")(b.contactsSelected,a.contact_uuid,"contact");b.contactsSelected.splice(c,1)},a.test=function(a){console.log(a)},a.addContact=function(c){console.log(c),console.log(a.contact),console.log(a.filterContactData),console.log(a.type),console.log(a.selectedIndex);var d;if(!c){if(c=a.filterContactData[a.selectedIndex],!c){if("sms"===a.type&&(a.contact.recipients=h.cleanPhoneNumber(a.contact.recipients),!h.isPhoneNumber(a.contact.recipients)))return void b.showErrorAlert("Target must be a valid phone number.");if(("file"===a.type||"cloudlink"===a.type)&&!h.isValidEmail(a.contact.recipients))return void b.showErrorAlert("Target must be a valid email address.");c=a.contact,d=c.recipients}console.log(c),console.log(d)}if(a.filterContactData.length>0){var e=!1;if("file"===a.type||"cloudlink"===a.type){var f=g.validEmailAddress(c.contact_email_address);f&&(e=!0)}else"sms"===a.type&&c.phones.length>0&&(e=!0);e?(b.contactsSelected.push(c),a.clearRecipients(),b.invalidContactSelected=!1):b.invalidContactSelected="That contact does not have a valid email address."}else"file"===a.type||"cloudlink"===a.type?a.useEmailAddress(d):"sms"===a.type&&a.useSmsNumber(d)},a.selecttheContact=function(a){f.enableDebug&&console.log(a),f.enableDebug&&console.log(b.contactsSelected),f.enableDebug&&console.log(b.selectedContacts),void 0===b.selectedContacts[a.contact_uuid]?b.selectedContacts[a.contact_uuid]=!0:b.selectedContacts[a.contact_uuid]=!b.selectedContacts[a.contact_uuid];var c=e("getByUUID")(b.contactsSelected,a.contact_uuid,"contact");null!==c?b.selectedContacts[a.contact_uuid]||b.contactsSelected.splice(c,1):b.selectedContacts[a.contact_uuid]&&b.contactsSelected.push(a)},a.useSmsNumber=function(c){var d={contact_mobile_number:c,contact_uuid:null};b.contactsSelected.push(d),a.showContactSelection=!1,b.invalidContactSelected=!1,a.clearRecipients()},a.useEmailAddress=function(c){console.log(c);var d=g.validEmailAddress(c);if(d){var e={contact_email_address:c,contact_uuid:null};b.contactsSelected.push(e),a.showContactSelection=!1,b.invalidContactSelected=!1,a.clearRecipients()}else b.invalidContactSelected="That is not a valid email address"}}}}]).directive("contactSelect",["$rootScope","emailService",function(a,b){function c(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}return{restrict:"A",scope:!0,link:function(b,d,e){b.type=b.$parent.contactSelectionType,d.on("focus",function(a){b.$apply(function(){b.$parent.showContactSelection=!0})}),d.on("blur",function(a){}),d.on("keypress",function(d){var e=c(d.target);b.$parent.selectedIndex=0;var f=0===e?"":a.contact.recipients.substring(e-1,e);64!==d.which||0!==e&&""!==f&&" "!==f&&null!==f?35!==d.which||0!==e&&""!==f&&" "!==f&&null!==f||(b.$parent.checkCallout="",b.$parent.selectedIndex=0):b.$parent.selectedIndex=0}),d.on("keyup",function(a){var d=c(a.target);b.$apply(function(){b.$parent.cursorPos=d+1})}),d.on("keydown",function(d){var e=c(d.target);b.$apply(function(){8===d.keyCode?b.$parent.cursorPos=e-1:13===d.which||9===d.which?"sms"===b.type?(0==a.contactsSelected.length?(d.preventDefault(),b.$parent.addContact(),b.$parent.showContactSelection=!1):(d.preventDefault(),b.$parent.showContactSelection=!1),angular.element("#enterText").focus()):(d.preventDefault(),b.$parent.addContact()):32===d.which||27===d.which?(d.preventDefault(),b.$parent.showContactSelection=!1):38===d.which?(d.preventDefault(),b.$parent.selectedIndex>0&&(b.$parent.selectedIndex+=-1)):40===d.which&&(d.preventDefault(),b.$parent.selectedIndex<b.$parent.filterContactData.length-1&&(b.$parent.selectedIndex+=1))})})}}}]).directive("keyDownChat",function(){return{restrict:"A",scope:!0,link:function(a,b,c){(a.$parent.showPeopleSuggestionList||a.$parent.showChannelSuggestionList)&&b.on("keydown",function(b){a.$parent.doGetCaretPosition(b.target);__env.enableDebug&&console.log(a),__env.enableDebug&&console.log(b.which),13===b.which?(a.$apply(function(){a.$eval(c.ngEnter,{e:b})}),b.preventDefault()):9===b.which?(__env.enableDebug&&console.log("TAB PRESSED"),b.preventDefault()):32===b.which||27===b.which?(__env.enableDebug&&console.log("ESC or SPACE PRESSED"),a.$parent.showPeopleSuggestionList=!1,a.$parent.showChannelSuggestionList=!1):38===b.which?(b.preventDefault(),a.$parent.selectedIndex>0&&(a.$parent.selectedIndex+=-1)):40===b.which&&(b.preventDefault(),a.$parent.selectedIndex+=1)})}}}).directive("keyDownAmSms",["usefulTools",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){c.on("keydown",function(c){__env.enableDebug&&console.log(b),b.$parent.cursorPos=a.doGetCaretPosition(c.target),__env.enableDebug&&console.log(b.$parent.cursorPos),__env.enableDebug&&console.log(c.which),219===c.which?b.$parent.showShortcodeList=!0:13===c.which?(b.$apply(function(){b.$eval(d.ngEnter,{e:c})}),c.preventDefault()):9===c.which?(__env.enableDebug&&console.log("TAB PRESSED"),c.preventDefault()):32===c.which||27===c.which?(__env.enableDebug&&console.log("ESC or SPACE PRESSED"),b.$apply(function(){b.$parent.showShortcodeList=!1})):38===c.which?(c.preventDefault(),b.$parent.selectedIndex>0&&(b.$parent.selectedIndex+=-1)):40===c.which&&(c.preventDefault(),b.$parent.selectedIndex+=1)})}}}]).directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit(d.onFinishRender)})}}}]).directive("showonhoverparent",function(){return{link:function(a,b,c){b.parent().bind("mouseenter",function(){b.show()}),b.parent().bind("mouseleave",function(){b.hide()})}}}).directive("modaldraggable",["$document",function(a){return function(b,c){function d(a){i=a.screenY-g,h=a.screenX-f,c.css({top:i+"px",left:h+"px"})}function e(){a.unbind("mousemove",d),a.unbind("mouseup",e)}var f=0,g=0,h=0,i=0;c=angular.element(document.getElementsByClassName("modal-dialog")),c.css({position:"fixed",cursor:"move"}),c.on("mousedown",function(b){b.preventDefault(),f=b.screenX-h,g=b.screenY-i,a.on("mousemove",d),a.on("mouseup",e)})}}]).directive("draggable",function(){return{restrict:"A",link:function(a,b,c){b.draggable({})}}}).directive("phoneInput",["$filter","$browser","$timeout",function(a,b,c){return{require:"ngModel",link:function(d,e,f,g){var h=function(){var b=e.val().replace(/[^0-9]/g,"");b.length>10&&("1"==b.charAt(0)&&(b=b.substring(1)),b=b.substring(b.length-10,b.length)),e.val(a("tel2")(b,!1))};d.listener=h,d.model=g.$modelValue,g.$parsers.push(function(a){return a.replace(/[^0-9]/g,"").slice(0,10)}),g.$render=function(){e.val(a("tel2")(g.$viewValue,!1))},e.bind("change",h),e.bind("keydown",function(a){var c=a.keyCode;91===c||8===c||c>15&&19>c||c>=37&&40>=c||b.defer(h)}),e.bind("paste cut",function(){b.defer(h)}),c(function(){h()})}}}]).directive("callPhoneInput",["$filter","$rootScope","$browser","$timeout","callService",function(a,b,c,d,e){function f(a){return"-"!==a&&"("!==a&&")"!==a}var g=function(b){return b=b.replace(/[^0-9]/g,""),b.length>10&&("1"==b.charAt(0)&&(b=b.substring(1)),b=b.slice(0,10)),a("tel2")(b,!1)};return{restrict:"A",scope:{ngModel:"="},link:function(a,b,c){a.$watch("ngModel",function(b,c){if(b&&b!==c){var d=b[b.length-1];f(d)&&!a.backspacePressed&&(a.ngModel=g(b))}}),b.on("keydown",function(b){var c=b.keyCode;a.backspacePressed=8===c?!0:!1,13===c&&(__env.enableDebug&&console.log("ENTER PRESSED"),a.$apply(function(){e.makeCall(a.ngModel)}),b.preventDefault())})}}}]).directive("addCallPhoneInput",["$filter","$rootScope","$browser","$timeout","callService",function(a,b,c,d,e){function f(a){return"-"!==a&&"("!==a&&")"!==a}var g=function(b){return b=b.replace(/[^0-9]/g,""),b.length>10&&("1"==b.charAt(0)&&(b=b.substring(1)),b=b.slice(0,10)),a("tel2")(b,!1)};return{restrict:"A",scope:{ngModel:"="},link:function(a,b,c){a.$watch("ngModel",function(b,c){if(b&&b!==c){var d=b[b.length-1];f(d)&&!a.backspacePressed&&(a.ngModel=g(b))}}),b.on("keydown",function(b){var c=b.keyCode;a.backspacePressed=8===c?!0:!1,13===c&&(__env.enableDebug&&console.log("ENTER PRESSED"),a.$apply(function(){e.addCall(a.ngModel)}),b.preventDefault())})}}}]).directive("chatMessage",["$rootScope","metaService",function(a,b){return{link:function(c,d,e){b.rootScopeOn(c,"add",function(b,c){var e=d[0];if(document.selection){e.focus();var f=document.selection.createRange();f.text=c,e.focus()}else if(null!==a.insertPosition);else if(e.selectionStart||0===e.selectionStart){var g=e.selectionStart,h=e.selectionEnd,i=e.scrollTop;e.value=e.value.substring(0,g)+c+e.value.substring(h,e.value.length),e.focus(),e.selectionStart=g+c.length,e.selectionEnd=g+c.length,e.scrollTop=i}else e.value+=c,e.focus()})}}}]).directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]).directive("statsTable",["callStatisticsApi","$filter","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/stats_table.html",scope:{searchField:"<",toDate:"<",fromDate:"<"},link:function(d,e,f){d.callStats=[],d.showingStat={};var g=function(a){return b("date")(a,"yyyy-MM-dd")},h=function(a){return b("number")(a,2)},i=function(){return{domain:c.user.domain.domain_name,start:g(d.fromDate),end:g(d.toDate)}},j=function(){var a=d.showingStat.name;return"Average"==a?"Total Calls Average":"Total Calls for "+a},k=function(){return[["Number of Received Calls: ",h(d.showingStat.receivedCalls)],["Number of Answered Calls: ",h(d.showingStat.answered)],["Number of Unanswered Calls: ",h(d.showingStat.unanswered)],["Number of Abandoned Calls: ",h(d.showingStat.abandoned)],["Number of Transferred Calls: ",h(d.showingStat.transferred)],["Abandon Rate: ",h(d.showingStat.abandonRate)],["Number of Agent Logins: ",h(d.showingStat.agentLogins)],["Number of Agent Logoffs: ",h(d.showingStat.agentLogouts)],["Avg Talk: ",h(d.showingStat.avgTalk)],["Percent Answered: ",h(d.showingStat.pctAnswered)],["Percent Unsanswered: ",h(d.showingStat.pctUnanswered)],["Answered Talk Time: ",h(d.showingStat.talkTime)]]},l=function(){return[["Number of Outbound Calls: ",h(d.showingStat.outboundCalls,3)],["Number of Answered Calls: ",h(d.showingStat.outboundAnswered,3)],["Number of Unanswered Calls: ",h(d.showingStat.outboundUnanswered,3)]]},m=function(a){var b=[],c=[];return angular.forEach(a,function(a){b.push(a[0]),c.push(a[1])}),[b,c]};d.getDataArray=function(){return m([m(k()),m(l())])},d.generate=function(){({content:[{text:"Call Statistics Report",style:"header"},{text:j(),style:"subheader"},{style:"tableExample",table:{body:k()}},{text:"Outbound Calls",style:"subheader"},{style:"tableExample",table:{body:l()}}],styles:{header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]},tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:13,color:"black"}}})};var n=function(){var b=i();a.getCallStats(b).then(function(a){__env.enableDebug&&console.log(a),angular.copy(a,d.callStats),angular.copy(a[0],d.showingStat)})};n(),d.$watchGroup(["toDate","fromDate"],function(a,b){d.toDate&&d.fromDate&&n()}),d.$watch("searchField",function(a,c){var e=b("filter")(d.callStats,{name:d.searchField});_.any(e)&&(angular.copy(e[0],d.showingStat),__env.enableDebug&&console.log(d.showingStat))})}}}]).directive("convertToNumber",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return parseInt(a,10)}),d.$formatters.push(function(a){return""+a})}}}).directive("datepickerPopup",function(){return{restrict:"EAC",require:"ngModel",link:function(a,b,c,d){d.$formatters.shift()}}}).directive("eventFocus",["focus",function(a){return function(b,c,d){c.on(d.eventFocus,function(){a(d.eventFocusId)}),b.$on("$destroy",function(){c.off(d.eventFocus)})}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).directive("faxOrder",["dataFactory","$rootScope",function(a,b){return{restrict:"A",templateUrl:"views/fax/faxorderdirective.html",scope:{dids:"<"},link:function(c,d){c.availableStates=[],c.availableRatecenters=[],c.availableDids=[],c.startOrder=function(){c.ordering=!0,c.orderDid=c.did},c.senderName=b.user.domain.domain_name,c.email=b.user.email_address,c.emailAddress=c.email,c.close=function(){b.closeModal()},a.getFaxListStates().then(function(a){if(a.data.success){var b=Object.values(a.data.success.data);__env.enableDebug&&console.log("STATES"),__env.enableDebug&&console.log(b),angular.copy(b,c.availableStates)}}),c.getAvailableRatecenters=function(){a.getFaxListRatecenters(c.state).then(function(a){if(a.data.success){var b=Object.values(a.data.success.data);__env.enableDebug&&console.log("RATECENTERS"),__env.enableDebug&&console.log(b),angular.copy(b,c.availableRatecenters)}})},c.getAvailableDids=function(){var b={rateCenter:c.ratecenter,state:c.state};a.postGetAvailableFaxDids(b).then(function(a){__env.enableDebug&&console.log("DIDS"),__env.enableDebug&&console.log(a);var b=_.values(a.data.success.localDids).slice(1,11);angular.copy(b,c.availableDids)},function(a){__env.enableDebug&&console.log(a)})},c.$watch("state",function(a,b){a!==b&&c.getAvailableRatecenters()}),c.$watch("ratecenter",function(a,b){a!==b&&c.getAvailableDids()}),c.postOrderDid=function(){var d={did:c.orderDid,email_address:c.emailAddress,sender_name:c.senderName};b.closeModal(),a.postOrderDid(d).then(function(a){b.user.domain.vfax||(b.user.domain.vfax={}),__env.enableDebug&&console.log("DID ORDER"),__env.enableDebug&&console.log(a),200==a.status?(angular.copy(a.data.success.data,b.user.domain.vfax),b.$broadcast("did.ordered"),b.showSuccessAlert(a.data.success.message)):a.data.error&&b.showErrorAlert(a.data.error.message)})}}}}]).directive("focusOn",["$timeout",function(a){return{restrict:"A",templateUrl:"views/fax/faxorderdirective.html",scope:{dids:"<"},link:function(b,c,d){b.$on(d.focusOn,function(b,d){a(function(){c[0].focus()})})}}}]).directive("commaTel",["$filter",function(a){var b=[8,9,37,39,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,188],c=function(b){return b=b.replace(/[^0-9]/g,""),a("tel2")(b,!1)},d=function(a){return a[a.length-1]},e=function(a){return 44===a},f=function(a){var b=a.length,c=a.split("").reverse().join("");return c.indexOf(",")>-1?b-(c.indexOf(",")+1):-1},g=function(a){return!(-1===$.inArray(a,b))},h=function(a,b){var c=a.replace(/[^0-9]/g,"").length;return 8!==b&&c>0&&a.length-f(a)===15&&","!==d(a)&&188!==b},i=function(a,b){var d=a.replace(/\)\ /g,"").split(/[,\ ]/).map(function(a){return a.replace(/[^0-9]/g,"")});return d=$.map(d,function(a){return 8!==b?c(a):a}),a=d.join(","),h(a,b)&&(a+=","),a};return function(a,b,c){b.bind("keypress",function(a){var c=a.keyCode;g(c)||a.preventDefault();var d=i(b.val(),c);e(c)&&(d+=","),b.val(d)})}}]).directive("fileShareTable",["$rootScope","$http","$location","$sce","$uibModal","focus","$log","$timeout","fileService","userContactService","$document","$uibModalStack","FileUploader","$filter","dataFactory","usefulTools","$window","__env","symphonyConfig","emailService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return{restrict:"E",templateUrl:"views/cloudstorage/file-share-table.html",scope:{domain:"<"},link:function(b,c,e){function f(b){return b?a.displayContacts.filter(j(b)):a.displayContacts}function g(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}function h(c){if(c&&"undefined"!==c){a.contactsSelected.push(c);var d=n("getIndexbyUUID")(a.displayContacts,c.contact_uuid);a.displayContacts.splice(d,1)}b.selectedItem=null}function j(a){var b=angular.lowercase(a);return function(a){return a.contact_name_full&&angular.lowercase(a.contact_name_full).indexOf(b)>=0?!0:a.contact_email_address&&a.contact_email_address.indexOf(b)>=0?!0:!1}}r.enableDebug&&console.log(b.domain),r.enableDebug&&console.log(b),b.showAddContactForm=a.showAddContactForm,b.tips=a.tips,b.user=a.user,b.pathImgProfile=a.pathImgProfile,b.onescreenBaseUrl=a.onescreenBaseUrl,i.getShares(a.user.id,new Date(moment().subtract(30,"days")),new Date).then(function(a){r.enableDebug&&console.log("Shared Files"),r.enableDebug&&console.log(a.shareList),b.sharedFiles=a.shareList,b.showTable=!0}),b.fsTableHeight=q.innerHeight-300,b.perPage=20,b.maxSize=50,b.predicate="created_at",b.reverse=!0,b.currentPage=1,b.ppOptions=[10,20,50,100],b.isDisabled=!1,b.querySearch=f,b.selectedItemChange=h,a.contactsSelected=[],b.isEmailAddress=function(a){return g(a)},b.showEmail=function(a){return a.length>26?a.substring(0,13)+" ... "+a.substring(a.length-13):a},b.useEmailAddress=function(c){var d={contact_name_full:"",contact_email_address:c,contact_uuid:null};a.contactsSelected.push(d),b.selectedItem=null},b.copyShareToHawksoft=function(b){b.file_size=b.file.file_size,b.domain_uuid=a.user.domain_uuid,b.user_uuid=a.user.id,console.log(b),o.postHSCopyFileshare(b).then(function(a){console.log(a)},function(a){console.log(a)})},b.showChevron=function(a){return p.showChevron(a,b.predicate,b.reverse)};var k=new Date;b.dateFormat="yyyy-MM-dd",b.fromDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:new Date(2016,1,1),maxDate:k},b.toDateOptions={formatYear:"yy",showWeeks:!1,startingDay:0,minDate:b.fromDate,maxDate:k},b.fromDatePopup={opened:!1},b.toDatePopup={opened:!1},b.ChangeToMinDate=function(c){if(null!=c){if(!b.toDate){var d=new Date(c);b.toDateOptions.minDate=d,b.toDate=d}var e=a.selectEmulateUser&&null!==a.selectEmulateUser?a.selectEmulateUser:a.user.id;i.getShares(e,b.fromDate,b.toDate).then(function(a){r.enableDebug&&console.log("Shared Files"),r.enableDebug&&console.log(a.shareList),b.sharedFiles=a.shareList,b.showTable=!0})}},b.processToDate=function(c){null!=c&&(b.fromDate||(b.fromDate=new Date(c)),b.toDate=new Date(c));var d=a.selectEmulateUser&&null!==a.selectEmulateUser?a.selectEmulateUser:a.user.id;i.getShares(d,b.fromDate,b.toDate).then(function(a){r.enableDebug&&console.log("Shared Files"),r.enableDebug&&console.log(a.shareList),b.sharedFiles=a.shareList,b.showTable=!0})},b.ChangeToMinDate(),b.OpenfromDate=function(){b.fromDatePopup.opened=!b.fromDatePopup.opened},b.OpentoDate=function(){b.toDatePopup.opened=!b.toDatePopup.opened},b.searchRecipients=function(a){if(!b.shareSearch||-1!=a.original_filename.toLowerCase().indexOf(b.shareSearch.toLowerCase())||a.noncontact&&a.noncontact.name&&-1!=a.noncontact.name.toLowerCase().indexOf(b.shareSearch.toLowerCase())||a.noncontact&&a.noncontact.phone&&-1!=a.noncontact.phone.toLowerCase().indexOf(b.shareSearch.toLowerCase())||a.noncontact&&a.noncontact.email&&-1!=a.noncontact.email.toLowerCase().indexOf(b.shareSearch.toLowerCase())||-1!=a.recipient_email.toLowerCase().indexOf(b.shareSearch.toLowerCase())||a.contact&&-1!=a.contact.contact_name_given.toLowerCase().indexOf(b.shareSearch.toLowerCase())||a.contact&&-1!=a.contact.contact_name_family.toLowerCase().indexOf(b.shareSearch.toLowerCase()))return!0;if(a.contact&&a.contact.phones.length>0){var c=!1;return angular.forEach(a.contact.phones,function(a){-1!=a.phone_number.indexOf(b.shareSearch)&&(c=!0)}),c}return!1},b.sortBy=function(a){b.predicate=a,b.reverse=!b.reverse},b.showFileName=function(b){var c="",e=b.uploadfile.original_filename;return b.uploadfile.original_filename.length>40&&(e=b.uploadfile.original_filename.substring(0,19)+" ... "+b.uploadfile.original_filename.substring(b.uploadfile.original_filename.length-19)),c='<a href="'+(r.apiUrl&&""!==r.apiUrl?r.apiUrl:s.onescreenUrl)+"/media/me-download-file/"+b.download_hash+"?token="+a.userToken+'" target="_blank" title="'+b.uploadfile.original_filename+'" >'+e+"</a><br />Size: "+b.uploadfile.file_size,d.trustAsHtml(c)},b.filterByMonth=function(a){return null!==b.monthStart&&null!==b.monthEnd&&(a.created_at<b.monthStart||a.created_at>b.monthEnd)?!1:!0},b.monthStart=null,b.monthEnd=null,b.limitDisplay=function(){b.monthStart=moment([0,0,1]).month(b.selectMonth.display).year(b.selectYear).format("YYYY-MM-DD"),b.monthEnd=moment([0,0,31]).month(b.selectMonth.display).year(b.selectYear).format("YYYY-MM-DD")},b.clearLimitDisplay=function(){b.monthStart=null,b.monthEnd=null,b.selectMonth=null,b.selectYear=null},b.shareExpired=function(a){var b=moment(a.expires_at),c=moment(),d=b.diff(c,"minutes");return 0>d?!0:!1},b.resendFileShareNotice=function(c,d){var e={shared_file_uuid:c,file_uuid:d,sender_name:a.user.contact_name_given+" "+a.user.contact_name_family,sender_email:a.user.email_address,sender_company:a.user.contact_organization,body:b.bodyMail};o.postResendFileNotice(e).then(function(b){a.showalerts(b)},function(a){r.enableDebug&&console.log(a)})},b.emailUsrs=[],b.bodyMail="",b.mailTo=[],b.chargerVal=function(a,c){r.enableDebug&&console.log("INPUT"),r.enableDebug&&console.log(a),r.enableDebug&&console.log(c),b.emailUsrs=!1,b.emailUsrs=[],b.usrSel=a,b.bodyMail=c,a.forEach(function(a){a.contact_name_full?b.emailUsrs.push({mail:a}):a.emails.email_address&&b.emailUsrs.push({mail:a.emails.email_address})}),b.emailUsrs.forEach(function(a){a.mail.emails?b.mailTo.push(a.mail.emails[0].email_address):a.mail.contact_name_full&&b.mailTo.push(a.mail.contact_name_full)})},b.contactSelectionType="file",a.closeFilterAlert=function(){a.alertError=""},b.sendCloudShareFile=function(c){var d={file_uuid:c.file_uuid,upload_type:"cloud",sender_name:a.user.contact_name_given+" "+a.user.contact_name_family,sender_email:a.user.email_address,sender_company:a.user.contact_organization,recipients:JSON.stringify(a.contactsSelected),body:b.contentEmail};o.fileUpload(d).then(function(c){r.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),r.enableDebug&&console.log(c),c.data.success?(a.contactsSelected=[],b.msgEmailSent=!0):a.alertError=c.error.message})},a.focusonme=!0,a.sendingFile=!1;var u=b.uploader=new m({url:(r.apiUrl&&""!==r.apiUrl?r.apiUrl:s.onescreenUrl)+"/media/upload",queueLimit:1,headers:{Authorization:"Bearer "+a.userToken}});u.filters.push({name:"enforceMaxFileSize",fn:function(a){return a.size<=262144e3}}),u.filters.push({name:"enforceFileType",fn:function(a,b){var c=a.name.split("."),d=c[c.length-1].toLowerCase(),e="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return console.log(e+" "+d),"||"===e&&"rar"===d?!0:"||"===e?!1:-1==="|exe|javascript|x-msdownload|php|".indexOf(e)}}),u.onWhenAddingFileFailed=function(b,c,d){r.enableDebug&&console.info("onWhenAddingFileFailed",b,c,d),a.alertError="","enforceMaxFileSize"===c.name&&(a.alertError+="Problem Adding File: Max file size is 250MB."),"enforceFileType"===c.name&&(a.alertError+=(""!==a.alertError?", ":"")+"Problem Adding File: File Type Not allowed. (The following are allowable file types: pdf, odt, doc, docx, ppt, pptx, xls, xlsx, csv, txt, rtf, html, zip, mp3, mpg, flv, jpg, jpeg, png, gif, mp4, pub, m4a, mov, vts, vob, m4v, m2ts, dvr, 264, mp4, flv, bup, mts, psd, png, MOV, mpeg-4, tar.gz, gz, rar, targz, 7z, aak, bd)")},u.onAfterAddingFile=function(a){a.file.name=a.file.name.toLowerCase(),r.enableDebug&&console.info("onAfterAddingFile",a)},u.onAfterAddingAll=function(a){r.enableDebug&&console.info("onAfterAddingAll",a)},u.onBeforeUploadItem=function(c){r.enableDebug&&console.info("onBeforeUploadItem",c),r.enableDebug&&console.log(a.contactsSelected);var d={sender_name:a.user.contact_name_given+" "+a.user.contact_name_family,sender_email:a.user.email_address,sender_company:a.user.contact_organization,
recipients:JSON.stringify(a.contactsSelected),body:b.contentEmail};r.enableDebug&&console.log(d),c.formData.push(d)},u.onProgressItem=function(a,b){r.enableDebug&&console.info("onProgressItem",a,b)},u.onProgressAll=function(a){r.enableDebug&&console.info("onProgressAll",a)},u.onSuccessItem=function(c,d,e,f){r.enableDebug&&console.info("onSuccessItem",c,d,e,f),r.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),r.enableDebug&&console.log(d),d.success?(a.contactsSelected=[],d.success.shares.forEach(function(b){b.created_at=moment.tz(b.created_at,"America/New_York"),a.user.settings.timezone&&(b.created_at=b.created_at.clone().tz(a.user.settings.timezone));var c=a.userContacts,d=a.nonContacts,e=n("getContactbyUUID")(c,b.contact_uuid);if(e)b.contact=e;else{var f={email:b.recipient_email,phone:null,name:b.recipient_name,color:randomColor({luminosity:"light"})},g=n("getNonContact")(d,f);g||(a.storeNonContact(f),g=f),b.noncontact=g}b.original_filename=b.uploadfile.original_filename,a.fileSharingList.push(b)}),b.msgEmailSent=!0):a.alertError=d.error.message},u.onErrorItem=function(a,b,c,d){r.enableDebug&&console.info("onErrorItem",a,b,c,d)},u.onCancelItem=function(a,b,c,d){r.enableDebug&&console.info("onCancelItem",a,b,c,d)},u.onCompleteItem=function(a,b,c,d){r.enableDebug&&console.info("onCompleteItem",a,b,c,d)},u.onCompleteAll=function(){r.enableDebug&&console.info("onCompleteAll"),u.queue.length=0},b.confCallsPartic=[],b.participant={},b.confCallsNotify=function(c,d,e){var f=0;a.userContacts.forEach(function(d){d.contact_user_uuid===c.contact_user_uuid&&(b.confCallsPartic.push(d),a.userContacts.splice(f,1),b.participant.contact_name_given=""),f++})},b.closeFileShareModal=function(){a.contactsSelected=[],a.selectedContacts={},l.dismissAll()},a.userCts=[],a.chgRst=!1,a.chargeCntsRST=function(){a.userContacts.forEach(function(a){var b="";a.phones&&a.phones.forEach(function(a){"Mobile"===a.phone_label&&(b=a.phone_number)}),a.contact_name_full=a.contact_name_given+" "+a.contact_name_family})},a.loadTags=function(b){return a.chgRst||(a.chargeCntsRST(),a.chgRst=!0),a.userContacts.filter(function(a){return-1!==a.contact_name_full.toLowerCase().indexOf(b.toLowerCase())})},b.startEmailClient=function(a){t.startEmailClient(a)},b.$on("new.contact.added",function(c,d){angular.forEach(b.sharedFiles,function(b){i.populateContact(a.user.id,b)})})}}}]).directive("fileDisplayTable",["$rootScope","dataFactory","$window","userContactService","cloudStorageService","$timeout","$interval","__env","$uibModalStack","symphonyConfig","fileService","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"A",templateUrl:"views/cloudstorage/file-display-table.html",scope:{root:"<",search:"=",uploader:"="},link:function(b,m,n){function o(a){return"true"===a.is_protected&&"Public Cloud"===a.folder_name?!0:a.parent?o(a.parent):!1}function p(){a.displayContacts=[];var b=d.contacts;angular.forEach(b,function(b){a.displayContacts.push(b)})}function q(c,d){return c&&("admin"===c.permission||"manager"===c.permission||"owner"===c.permission)||b.sharedFolderOpen&&"manager"==b.sharedPermission||d.user_uuid==a.user.id}b.user=a.user,e.getUserRootFolder(b.user.id).then(function(a){a&&(b.root=a)}),console.log(b.search),b.cloudErrors=[],b.cloudSuccess=[],b.tips=a.tips,b.sortDown=!1,b.sortFile="original_filename",b.sortFolder="folder_name",b.display={showingShares:!1},b.addFolder=function(){if(b.display.showingShares=!1,"true"===b.root.is_protected&&"true"!==b.root.is_mobile_upload&&"Public Cloud"!==b.root.folder_name)return void a.showErrorAlert("This folder is protected and you can not create new folders within it.");b.root.dummyFolders||(b.root.dummyFolders=[]);var c=Math.random().toString(36),d=new Date;d=d.toString(),b.root.dummyFolders.push({dummyId:c,parent:b.root,updated_at:d})},b.showUploadingSpinner=function(){return e.getNumFoldersUpdatingPerms()>0},b.getTotalSpaceUsed=function(){var a=e.getTotalSpaceUsed();return e.getAppropriateFileSizeFromB(a,1)},b.userLimit=function(){var b=1e6*parseFloat(a.user.symphony_domain_settings.limit_storage_user);return e.getAppropriateFileSizeFromB(b,0)},b.domainUsage=function(){return e.getAppropriateFileSizeFromB(parseFloat(a.user.domainCloudStorageUsage),1)},b.domainLimit=function(){var b=1e6*parseFloat(a.user.symphony_domain_settings.limit_storage_user)*d.countUsers();return e.getAppropriateFileSizeFromB(b,0)};var r=[];r.push({name:"cloud.show.error",fn:function(){}}),r.push({name:"cloud.hide.error",fn:function(){b.showErrorMsg=!1}}),r.push({name:"cloud.show.success",fn:function(){b.showSuccessMsg=!0}}),r.push({name:"cloud.hide.success",fn:function(){b.showSuccessMsg=!1}}),l.multiRootScopeOn(b,r),b.sortBy=function(a,c){b.sortDown=!b.sortDown,b.sortFile=a,b.sortFolder=c},b.parentTop=function(){return m.parent().position().top},b.parentBottom=function(){return m.parent().position().top+m.parent().height()},b.showRequestFiles=function(c){a.showModalFull("/modals/request-files-modal.html",{onClose:b.onCloseModal,thefolder:c},"lg")},b.onCloseModal=function(){i.dismissAll()},b.rootParent=function(){var a=e.userRootFolder;return e.getFolderByUuid(a,b.root.parent_folder_uuid)},b.onDrop=function(a,c,d){var g,h=e.userRootFolder,i=e.getFolderByUuid(h,a.parent_folder_uuid);e.moveFile(a.file_uuid,c.folder_uuid).then(function(b){b?(g=e.getFolderByUuid(h,b.parent_folder_uuid),e.moveFileFromFolderToFolder(b,i,g)):a.hide=!1}),f(function(){b.dragging=!1},1e3)},b.stopDrag=function(a){a.element.css("position","static"),f(function(){b.dragging=!1},1e3)},b.dragStart=function(a){b.dragging=!0},b.$watch("dragging",function(a,c){a&&a!==c?b.interval=g(function(){b.dragEvent.event.pageY<b.parentTop()?m.parent()[0].scrollTop-=10:b.dragEvent.event.pageY>b.parentBottom()&&(m.parent()[0].scrollTop+=10)},10):a||a===c||g.cancel(b.interval)}),b.dragMove=function(a){b.dragEvent=a},b.getFileType=function(a){return k.getFileTypeByMimeType(a.file_mime_type)},b.sharedFolderOpen="false",b.rootPermission=null,b.openFolder=function(c){h.enableDebug&&console.log(c),b.root=c,a.currentCSRoot=b.root.folder_uuid,c.shared_folder&&"true"==c.shared_folder&&(b.sharedFolderOpen="true",c.permission&&(b.sharedPermission=c.permission))},b.hasPermission=function(c){if("true"===c.is_protected&&"true"!==c.is_mobile_upload||c.user_uuid===a.user.id||c.permission&&("viewer"==c.permission||"manager"==c.permission))return!0;if(c.permissions&&"true"===c.is_mobile_upload){var d=!1;return angular.forEach(c.permissions,function(b){b.user_uuid===a.user.id&&(d=!0)}),d}return"true"==b.sharedFolderOpen?!0:!1},b.getFolderType=function(c){return"true"!=c.shared_folder&&"true"!=c.is_protected&&"true"!=b.sharedFolderOpen?"folder":"true"===c.is_protected&&"true"!==c.is_mobile_upload?"protected":c.user_uuid===a.user.id?"shared":c.user_uuid!==a.user.id?"owned":null},b.ascend=function(){h.enableDebug&&console.log(b.root),b.root.shared_folder&&"true"==b.root.shared_folder&&(b.sharedPermission=null,b.sharedFolderOpen="false"),b.root=b.root.parent,a.currentCSRoot=b.root.folder_uuid},b.renameFolder=function(a){a.renaming=!1,f(function(){e.renameFolder(a.folder_uuid,a.folder_name).then(function(b){b.data.error&&(a.folder_uuid=b.data.error.folder.folder_uuid)})})},b.removeFileExtensionFromFilename=function(a){return k.removeFileExtensionFromFilename(a)},b.getFileExtensionFromFilename=function(a){return k.getFileExtensionFromFilename(a)},b.renameFile=function(a,c){a.renaming=!1,c=c+"."+b.getFileExtensionFromFilename(a.original_filename),a.original_filename=c,f(function(){e.renameFile(a.file_uuid,c).then(function(b){b.data.error&&(a.original_filename=b.data.error.file.original_filename)})})},l.rootScopeOn(b,"folders.refreshed",function(c,d,f){b.root=e.getFolderByUuid(d,f),a.currentCSRoot=b.root.folder_uuid}),b.getFolderSize=function(a){return e.getFolderSize(a)},b.copyFile=function(a,c){e.copyFile(a.file_uuid,c.folder_uuid).then(function(a){a&&e.handleDuplicateFileRename(a,b.root)})},b.moveFile=function(a,c){e.moveFile(a.file_uuid,c.folder_uuid).then(function(a){a&&e.handleDuplicateFileRename(a,b.root)})},b.tableMenuOptions=function(){return[["Paste",function(a){b.copyingFile?b.copyFile(b.copiedFile,b.root):b.moveFile(b.copiedFile,b.root)},function(){return h.enableDebug&&console.log(b.copiedFile),b.copiedFile&&(b.sharedFolder&&"manager"==b.sharedPermission||b.root.user_uuid==a.user.id)}]]},b.isFolderManager=function(b){if(b.user_uuid==a.user.id)return!0;$go=!0;do;while($go);return!1},b.isFileManager=function(b){return b.user_uuid==a.user.id?!0:!1},b.folderMenuOptions=function(c){return[["Delete...",function(b){var c=b.folder,d="";d=c.files.length>0||c.folders.length>0?"Are you sure you want to delete this folder and all of its contents?":"Are you sure you want to delete this folder?",a.confirmDialog(d).then(function(a){a&&e.deleteFolder(c.folder_uuid)&&e.removeFolderFromParentByUuid(c.parent,c.folder_uuid)})},function(){return"true"!==c.is_protected&&(b.sharedFolderOpen&&"manager"==b.sharedPermission||c.user_uuid==a.user.id)}],["Rename",function(a){a.folder.renaming=!0;var b=angular.element("[folder-id='"+c.folder_uuid+"']"),d=b.find("input");f(function(){d.focus()})},function(){return"true"!==c.is_protected&&(b.sharedFolderOpen&&"manager"==b.sharedPermission||c.user_uuid==a.user.id)}],["Edit Permissions",function(b){a.permissions={},a.showModalWithData("/cloudstorage/cloudpermissions-modal.html",b.folder)},function(){return("true"!==c.is_protected||"true"===c.is_protected&&"true"===c.is_mobile_upload)&&(b.sharedFolder&&"manager"==b.sharedPermission||"manager"==c.permission||"admin"==c.permission||"owner"==c.permission||c.user_uuid==a.user.id)}],o(c)?["Make a Sharable Link",function(a){console.log(c),b.showRequestFiles(c)},function(){return o(c)&&(b.sharedFolder&&"manager"==b.sharedPermission||"manager"==c.permission||"admin"==c.permission||"owner"==c.permission||c.user_uuid==a.user.id)}]:null]},l.rootScopeOn(b,"open.search.folder",function(a,c){b.openFolder(c)}),l.rootScopeOn(b,"clear.hightlight.file",function(){b.highlightFile=null}),l.rootScopeOn(b,"show.search.file",function(a,c){b.highlightFile=c.file,b.openFolder(c.parent)}),b.showFileShareModal=function(){b.msgEmailSent=!1,a.contactsSelected=[],p(),a.showModalWithData("/modals/filesharingmodal.html",{onClose:b.closeFileShareModal})},b.dummyFolderMenuOptions=function(){return[["Delete...",function(a){var b=a.folder;e.removeDummyFolderFromParentByUuid(b.parent,b.dummyId)}]]},b.getItemCount=function(){var a=0;return b.root?(b.root.files&&(a+=b.root.files.length),b.root.folders&&(a+=b.root.folders.length),a):void 0},b.apiUrl=h.apiUrl&&""!==h.apiUrl?h.apiUrl:j.onescreenUrl,b.token=a.userToken,b.downloadFile=function(a){var b=h.apiUrl&&""!==h.apiUrl?h.apiUrl:j.onescreenUrl,c=b+"/cloud/downloadfile/"+a.file_uuid+"/"+!1;k.downloadFileByUrl(c)},l.rootScopeOn(b,"cloud.progress.bar.percentage",function(a,c){b.progressBarPercentage=c}),b.closeFileShareModal=function(){a.contactsSelected=[],a.selectedContacts={},i.dismissAll()},b.fileMenuOptions=function(c){h.enableDebug&&console.log(c);var d=e.userRootFolder,f=e.getFolderByUuid(d,c.parent_folder_uuid);return h.enableDebug&&console.log(f),[["Download",function(a){var c=a.file;b.downloadFile(c)}],["Share File",function(c){var d=c.file;h.enableDebug&&console.log("FILE"),h.enableDebug&&console.log(d),d.onClose=b.closeFileShareModal;a.showModalWithData("/cloudstorage/fileshare-modal.html",d)}],["Delete...",function(b){var c=b.file;a.confirmDialog("Are you sure you want to delete this file?").then(function(a){if(a&&e.deleteFile(c.file_uuid)){var b=e.userRootFolder,d=e.getFolderByUuid(b,c.parent_folder_uuid);e.removeFileFromParentByUuid(d,c.file_uuid)}})},function(){return q(f,c)}],["Rename",function(a){a.file.renaming=!0},function(){return q(f,c)}],["Cut",function(a){var c=a.file,d=e.userRootFolder,f=e.getFolderByUuid(d,c.parent_folder_uuid);b.copiedFile=c,e.removeFileFromParentByUuid(f,c.file_uuid)},function(){return q(f,c)}],["Copy",function(a){var c=a.file;b.copiedFile=c,b.copyingFile=!0},function(){return q(f,c)}],["Paste",function(a){b.copyingFile?e.copyFile(b.copiedFile.file_uuid,b.root.folder_uuid).then(function(a){a&&b.root.files.push(a)}):e.moveFile(b.copiedFile.file_uuid,b.root.folder_uuid).then(function(a){a&&b.root.files.push(a)})},function(){return b.copiedFile&&q(f,c)}]]},b.viewFile=function(d){if(!b.dragging)if(h.enableDebug&&console.log(d),"image"===d.file_type){var f=!0;e.downloadFile(d.file_uuid,f).then(function(e){if(!b.dragging){var f="data:"+d.file_mime_type+";base64, "+e.file;"image"===d.file_type?a.showModalWithData("/fax/viewfaximage.html",{obj:f}):"pdf"===d.file_type?c.open(f):(angular.element("#download_link").attr("href",f),angular.element("#download_link").attr("download",d.original_filename),angular.element("#download_link")[0].click())}})}else b.downloadFile(d)},angular.element("html").on("dragover",function(){angular.element(".cloud-scroll-body").addClass("nv-file-over")}),angular.element("html").on("mouseleave",function(){angular.element(".cloud-scroll-body").is(":hover")||angular.element(".nv-file-over").removeClass("nv-file-over")}),angular.element(".cloud-scroll-body").on("dragover",!1).on("drop",function(a){if(a.target.hasAttribute("cloud-folder")){var c=angular.element(a.target).scope().folder;b.dropFolder=c}}),l.rootScopeOn(b,"updateCloudStorage",function(c,d){d&&(h.enableDebug&&console.log(b.root),e.getUserRootFolder(a.user.id).then(function(c){c&&(e.userRootFolder=c,b.root=e.getFolderByUuid(e.userRootFolder,b.root.folder_uuid),h.enableDebug&&console.log(c),h.enableDebug&&console.log(b.root),a.updateCloudStorage=!1)}))}),b.uploader.filters.push({name:"enforceMaxFileSize",fn:function(a){return a.size<=262144e3}}),b.uploader.filters.push({name:"cloudFilter",fn:function(a,b){var c=a.type;if(h.enableDebug&&console.log("type = "+c),!a.type)return!0;var d=k.allowedCloudStorageMimeTypes.indexOf(c)>-1;return d}}),b.uploader.filters.push({name:"usageFilter",fn:function(b,c){h.enableDebug&&console.log(b);var e=parseFloat(a.user.domainCloudStorageUsage)+b.size;return h.enableDebug&&console.log(e),e<1e6*parseFloat(a.user.symphony_domain_settings.limit_storage_user)*d.countUsers()}});b.triggerUpload=function(){return b.display.showingShares=!1,"true"===b.root.is_protected&&"true"!==b.root.is_mobile_upload&&"Public Cloud"!==b.root.folder_name?void a.showErrorAlert("This folder is protected and you can not add new files to it."):(b.uploader.clearQueue(),void angular.element("#cloud-upload").trigger("click"))},b.closeError=function(){b.cloudErrors=[]},b.closeSuccess=function(a){b.cloudSuccess.splice(a,1)},b.uploader.onWhenAddingFileFailed=function(a,c,d){console.info("onWhenAddingFileFailed",a,c,d),b.showErrorMsg=!0,h.enableDebug&&console.log(a),h.enableDebug&&console.log(c),"cloudFilter"===c.name&&(b.errorMsg=a.name+": This file type is not permitted"),"usageFilter"===c.name&&(b.errorMsg=a.name+": Uploading would exceed the domain storage limit. Contact The Kotter Group to arrange for an increase in your storage limits."),b.cloudErrors.push({message:b.errorMsg})},b.uploader.onAfterAddingFile=function(a){console.info("onAfterAddingFile",a),b.queueFileName=a._file.name},b.uploader.onAfterAddingAll=function(a){console.info("onAfterAddingAll",a),h.enableDebug&&console.log("sending"),f(function(){b.uploader.uploadAll()})},b.fileNameExistsInFolder=function(a,b){return e.fileNameExistsInFolder(a,b)},b.incrementFileName=function(a){return e.incrementFileName(a)},b.uploader.onBeforeUploadItem=function(a){for(var c=b.dropFolder?b.dropFolder:b.root,d={parent_folder_uuid:c.folder_uuid},e=b.removeFileExtensionFromFilename(a._file.name),f=b.getFileExtensionFromFilename(a._file.name);b.fileNameExistsInFolder(e+"."+f,c);)e=b.incrementFileName(e);d.file_name=e+"."+f,a.formData.push(d)},b.uploader.onProgressItem=function(a,b){console.info("onProgressItem",a,b)},b.uploader.onProgressAll=function(a){console.info("onProgressAll",a)},b.uploader.onSuccessItem=function(c,d,f,g){console.info("onSuccessItem",c,d,f,g),h.enableDebug&&console.log("RESPONSE FROM SENDING FILE"),h.enableDebug&&console.log(d),b.progressBarPercentage=0,b.$apply(),d.success?(e.handleSuccessfulUserFileUpload(d.success.data),b.showErrorMsg=!1,a.$broadcast("cloud.hide.error"),b.successMsg=c.file.name+" was uploaded successfully",b.cloudSuccess.push({message:c.file.name+" was uploaded successfully"})):(b.showErrorMsg=!0,b.errorMsg=c.file.name+": "+d.error.message,b.cloudErrors.push({message:b.errorMsg}),a.$broadcast("cloud.show.error"))},b.progressBarPercentage=0,b.$watch("uploader.progress",function(a,c){a!==c&&a>1&&(b.progressBarPercentage=a)}),b.uploader.onErrorItem=function(a,b,c,d){console.info("onErrorItem",a,b,c,d),alert("Error..."+JSON.stringify(b))},b.uploader.onCancelItem=function(a,b,c,d){console.info("onCancelItem",a,b,c,d)},b.uploader.onCompleteItem=function(a,b,c,d){console.info("onCompleteItem",a,b,c,d)},b.uploader.onCompleteAll=function(){console.info("onCompleteAll"),b.dropFolder=void 0,b.uploader.clearQueue()},b.showShareLogs=function(){b.display.showingShares=!0},b.showFolders=function(){b.display.showingShares=!1}}}}]).directive("dummyFolderInput",["cloudStorageService","$timeout","$rootScope",function(a,b,c){return{restrict:"A",scope:{folder:"<"},link:function(c,d,e){d.focus(),c.createFolder=function(){c.$apply(function(){c.folder.folder_uuid;a.createFolder(c.folder.parent.folder_uuid,c.folder.folder_name)})},d.on("keydown",function(a){13===a.which&&(c.$apply(function(){var b=a.target;b.blur()}),a.preventDefault())}),d.on("focusout",function(a){b(function(){c.folder.folder_name?(d.attr("style","display: none;"),c.createFolder()):c.folder.parent.dummyFolders.pop()})}),c.$watch("folder.folder_name",function(a,b){a!==b&&__env.enableDebug&&console.log(a)})}}}]).directive("ngFocusOn",["$timeout","$rootScope",function(a,b){return{restrict:"A",link:function(b,c,d){b.$watch(d.focusEvent,function(b,d){b!==d&&a(function(){c.focus()})})}}}]).directive("fileread",[function(){return{scope:{opts:"="},link:function(a,b,c){b.on("change",function(c){var d=new FileReader;d.onload=function(c){a.$apply(function(){var d=c.target.result,e=XLSX.read(d,{type:"binary"});__env.enableDebug&&console.log(e);var f=XLSX.utils.sheet_to_json(e.Sheets[e.SheetNames[0]],{header:1})[0];__env.enableDebug&&console.log(f);var d=XLSX.utils.sheet_to_json(e.Sheets[e.SheetNames[0]]);__env.enableDebug&&console.log(d),a.opts.columnDefs=[],f.forEach(function(b){a.opts.columnDefs.push({field:b})}),a.opts.data=d,__env.enableDebug&&console.log(a.opts),b.val(null)})},d.readAsBinaryString(c.target.files[0])})}}}]).directive("ngCsvImport",["$rootScope","metaService",function(a,b){return{restrict:"E",transclude:!0,replace:!0,scope:{content:"=?",header:"=?",headerVisible:"=?",separator:"=?",separatorVisible:"=?",result:"=?",encoding:"=?",encodingVisible:"=?",accept:"=?",acceptSize:"=?",acceptSizeExceedCallback:"=?",callback:"=?",mdButtonClass:"@?",mdInputClass:"@?",mdButtonTitle:"@?",mdSvgIcon:"@?",uploadButtonLabel:"="},template:function(a,b){angular.isDefined(b.material),angular.isDefined(b.multiple);return'<label class="btn btn-default btn-file btn-block" style="border-top-left-radius: 5; border-bottom-left-radius: 5;"><span class="cls-color-blue-tkg"><i class=" fa fa-file-text-o cls-color-blue-tkg" style="margin-right: 10px;"></i> Import a csv file</span><input ng-model="filename" type="file" accept="{{accept}}" multiple="{{multiple}}" style="display: none;" /></label></div>'},link:function(a,c,d){if(__env.enableDebug&&console.log(c),a.acceptSize=a.acceptSize||Number.POSITIVE_INFINITY,a.material=angular.isDefined(d.material),a.multiple=angular.isDefined(d.multiple),a.multiple)throw new Error("Multiple attribute is not supported yet.");var e=angular.element(c[0].querySelector('input[type="file"]')),f=angular.element(c[0].querySelector("md-input-container"));if(a.material&&e){if(e.removeClass("ng-show"),e.addClass("ng-hide"),f){var g=angular.element(f[0].querySelector("div.md-errors-spacer"));g&&g.remove()}a.onClick=function(){e.click()}}angular.element(c[0].querySelector(".separator-input")).on("keyup",function(b){if(null!=a.content){var c={csv:a.content,header:a.header,separator:b.target.value,encoding:a.encoding};a.result=h(c),a.$apply(),"function"==typeof a.callback&&a.callback(b)}}),b.rootScopeOn(a,"clear.csv.filename",function(){e=angular.element(c[0].querySelector('input[type="file"]')),angular.element(e).val(null)}),c.on("change",function(b){if(__env.enableDebug&&console.log("Changing"),__env.enableDebug&&console.log(b),b.target.files.length){if(b.target.files[0].size>a.acceptSize)return void("function"==typeof a.acceptSizeExceedCallback&&a.acceptSizeExceedCallback(b.target.files[0]));a.filename=b.target.files[0].name;var c=new FileReader;if(c.onload=function(c){a.$apply(function(){var d={csv:c.target.result.replace(/\r\n|\r/g,"\n"),header:a.header,separator:a.separator};a.content=d.csv,a.result=h(d),a.result.filename=a.filename,a.$$postDigest(function(){"function"==typeof a.callback&&a.callback(b)})})},"file"!==b.target.type||null==b.target.files&&null==b.srcElement.files){if(null!=a.content){var d={csv:a.content,header:!a.header,separator:a.separator};a.result=h(d),a.$$postDigest(function(){"function"==typeof a.callback&&a.callback(b)})}}else c.readAsText((b.srcElement||b.target).files[0],a.encoding)}});var h=function(a){var b=a.csv.split(new RegExp('\n(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)')),c=[],d=0,e=b[0].split(a.separator).length,f=[];a.header&&(f=b[0].split(a.separator),d=1);for(var g=d;g<b.length;g++){var h={},j=b[g].split(new RegExp(a.separator+'(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)'));if(j.length===e){if(a.header)for(var k=0;k<f.length;k++)h[f[k]]=i(j[k]);else for(var l=0;l<j.length;l++)h[l]=i(j[l]);c.push(h)}}return c},i=function(a){return a.replace(/^\s*|\s*$/g,"").replace(/^"|"$/g,"").replace(/""/g,'"')}}}}]).directive("ngMaterialCollapse",["$timeout","$rootScope","$interval","metaService",function(a,b,c,d){return{restrict:"A",link:function(c,e,f){var g=e.find("md-toolbar"),h=e.find(".collapsible-content");g.css("cursor","pointer"),g.addClass("settings-toolbar-collapsed"),c.isCollapsedVertical=!0,c.debug=function(){},a(function(){f.open&&c.open()},2e3),d.rootScopeOn(c,"settings.accordion",function(){c.close()}),c.close=function(){c.isCollapsedVertical=!0,g.removeClass("settings-toolbar-open"),g.addClass("settings-toolbar-collapsed")},c.open=function(){b.$broadcast("settings.accordion"),c.isCollapsedVertical=!1,g.removeClass("settings-toolbar-collapsed"),g.addClass("settings-toolbar-open"),a(function(){var a=h.find("input")[0];a&&a.focus()})},g.click(function(){a(function(){c.isCollapsedVertical?c.open():c.close()})})}}}]).directive("blurToCurrency",["$filter",function(a){return{scope:{amount:"="},link:function(b,c,d){c.val(a("currency")(b.amount)),c.bind("focus",function(){c.val(b.amount)}),c.bind("input",function(){b.amount=c.val(),b.$apply()}),c.bind("blur",function(){c.val(a("currency")(b.amount))})}}}]).directive("currencyFormatter",["$filter",function(a){var b=function(b){return a("currency")(b)};return{restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$parsers.push(function(a){return a?Number(a):""}),e.$formatters.push(b),c.bind("blur",function(){c.val(b(e.$modelValue))}),c.bind("focus",function(){c.val(e.$modelValue)})}}}]).directive("editGroupCode",["$rootScope","$myModal","dataFactory","$filter","$window","$uibModalStack","customerGroupCodeService",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"editgroupcode.html",scope:{code:"=?"},link:function(b,d,e){function g(){c.getManagementPartners().then(function(a){a.data.success?b.partnerApps=a.data.success.data:b.partnerApps=[]})}__env.enableDebug&&console.log(b),__env.enableDebug&&console.log(b.code),b.groupcode=b.code,g(),b.closeModal=function(){f.dismissAll()},b.saveGroupCode=function(b){return"generic"!==b.customer_group_code||b.customer_group_code_uuid?(__env.enableDebug&&console.log(b),void c.postSaveGroupCode(b).then(function(b){a.showalerts(b),b.data.success&&a.$broadcast("groupcode.changed",b.data.success.data),f.dismissAll()})):void a.showErrorAlert("The keyword 'generic' is restricted and can not be used for a new group code.")}}}}]).directive("adminAgenciesTab",["$rootScope","$myModal","usefulTools","userContactService","dataFactory","$mdDialog","$filter","$window","$uibModalStack","domainService","customerGroupCodeService","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"E",templateUrl:"views/tkgadmin/agencies.html",scope:{},link:function(b,h,m){function n(a){return"user"===a.contact_type}function o(a){return e.getBareAttendants(a).then(function(c){return c.data.success?b.attendants=c.data.success.data:(console.log(c.data.error.message),b.attendants=[]),j.loadDomainDids(a).then(function(c){return console.log(c),b.domainNumbers=c.dids,b.portingNumbers=c.ports,b.editingDomain=!0,b.users=_.filter(d.contacts,n),e.getActiveUsersByDomain(a).then(function(a){return a.data.success?b.users=a.data.success.data:b.users=[],!0})})})}function p(c){c.domain_uuid=b.thedomain.domain_uuid,console.log(c),j.postUpdateNumberPort(c).then(function(c){console.log(c),c.success?(b.domainNumbers.push(c.success.data),b.portingNumbers.push(c.success.data.port),i.dismissAll()):a.showErrorAlert("Unable to create the number port")})}b.tips=a.tips,b.perPage=20,b.maxSize=50,b.currentPage=1,b.editingDomain=!1,b.showModalWithData=a.showModalWithData,b.state="table",k.setCustomerGroupCodes(),b.customerGroupCodes=k.codes,__env.enableDebug&&console.log(b.customerGroupCodes),b.predicate="domain_description",b.numpredicate="number",b.reverse=!1,b.numreverse=!1,b.sortBy=function(a){b.predicate=a,b.reverse=!b.reverse},b.numsortBy=function(a){b.numpredicate=a,b.numreverse=!b.numreverse},j.getDomains().then(function(a){a?b.domains=a:b.domains=[]}),b.filterDomains=function(a){return!b.domainSearch||a.domain_description&&-1!==a.domain_description.toLowerCase().indexOf(b.domainSearch.toLowerCase())||-1!==a.domain_name.toLowerCase().indexOf(b.domainSearch.toLowerCase())||a.customerSettings&&a.customerSettings.customer_group_code&&-1!==a.customerSettings.customer_group_code.toLowerCase().indexOf(b.domainSearch.toLowerCase())?!0:!1},b.title=function(){return"table"===b.state?"Company":"spreadsheet"===b.state?"Import Contacts From Spreadsheet":void 0},b.isEnabled=function(a){return"true"==a?!0:!1},b.showChevron=function(a){return c.showChevron(a,b.predicate,b.reverse)},b.showNumChevron=function(a){return c.showChevron(a,b.numpredicate,b.numreverse)},b.editDomain=function(a){o(a.domain_uuid).then(function(){b.thedomain=angular.copy(a),b.portinfo={}})},b.creatingPort=!1,b.cancelCreatePortNumber=function(){b.portInfo={},b.creatingPort=!0},b.showNewPort=function(){var c={attendants:b.attendants,users:b.users,createPortNumber:p,domain:b.thedomain,portInfo:{}};a.showModalWithData("/tkgadmin/numberport.html",c)},b.showNumberStatus=function(a){return a.port&&"porting"===a.port.port_status?"Porting":"fax"===a.type?"true"===a.inUse?"In Use":"Inactive":"did"===a.type?a.info&&a.info.isUser||a.info.isConference||a.info.isIvr?"In Use":"Inactive":"sms"===a.type?"In Use":void 0},b.showNumberDescription=function(a){if(a.port&&"porting"===a.port.port_status)return a.port.description;if("fax"===a.type)return"Domain Fax Number";if("sms"===a.type)return"Bulk Sms Number";if("did"===a.type){if(a.info){if(a.info.isUser)return a.info.name+" - "+a.info.ext;if(a.info.isConference)return"Company Conference Call Number";if(a.info.isIvr)return"Active IVR Number"}return a.port&&"ported"===a.port.port_status?a.port.description:"Available"}},b.activatePortingNumber=function(c){var d;"fax"===c.number_type&&(d="for sending and receiving faxes."),"did"===c.number_type&&(d="as a user's did and sms number."),"sms"===c.number_type&&(d="as the company's outbound bulk sms number.");var h=f.confirm().title("Confirm").htmlContent("Please confirm that you want to activate <strong>"+g("tel")(c.number)+"</strong>? This will allow the number to be used "+d).ariaLabel("Activate").ok("Yes").cancel("Never Mind");f.show(h).then(function(){e.getActivatePortingNumber(c.number_port_uuid).then(function(d){if(d.data.success){var e=d.data.success.data,f=g("getByUUID")(b.portingNumbers,c.number_port_uuid,"number_port");null!==f&&(b.portingNumbers[f].port_status="ported"),f=g("getByUUID")(b.domainNumbers,c.uuid,j.getUuidType(c)),null!==f&&(b.domainNumbers[f]=e),a.$broadcast("portingnumber.activated",e)}else a.showErrorAlert(d.data.error.message)})})},b.deletePortingNumber=function(c){var d=f.confirm().title("Confirm DID Deletion").htmlContent("Are you sure you want to delete the port for <strong>"+g("tel")(c.number)+"</strong>? ").ariaLabel("Delete").ok("Yes").cancel("Never Mind");f.show(d).then(function(){e.getDeletePortingNumber(c.number_port_uuid).then(function(d){if(d.data.success){var e=g("getByUUID")(b.portingNumbers,c.number_port_uuid,"number_port");null!==e&&b.portingNumbers.splice(e,1),e=g("getByUUID")(b.domainNumbers,c.uuid,j.getUuidType(c)),null!==e&&b.domainNumbers.splice(e,1)}else a.showErrorAlert(d.data.error.message)})})},b.deleteDid=function(b){var c=f.confirm().title("Confirm DID Deletion").htmlContent("Are you sure you want to delete this <strong>"+g("tel")(b.number)+"</strong>? This action is permanant and irreversible.").ariaLabel("Delete").ok("Yes").cancel("Never Mind");f.show(c).then(function(){a.showInfoAlert("This feature is not yet completed")})},b.updatePortNumber=function(a,c){a.action=c,j.postUpdateNumberPort(a).then(function(c){if(c.success){var d=c.success.data,e=g("getByUUID")(b.domainNumbers,d.uuid,j.getUuidType(a));null!==e&&(b.domainNumbers[e].port=d),b.portinfo={}}})},b.updateDomain=function(c){__env.enableDebug&&console.log(b.settings);var d={domain_uuid:c.domain_uuid,description:c.domain_description,group_code:c.customerSettings.customer_group_code};e.postUpdateDomain(d).then(function(c){if(a.showalerts(c),c.data.success){var e=g("getByUUID")(b.domains,d.domain_uuid,"domain");null!==e&&(b.domains[e]=c.data.success.data),b.editingDomain=!1,b.thedomain=null}else __env.enableDebug&&console.log(c.data.error.message),b.editingDomain=!1,b.thedomain=null})},b.back=function(){b.editingDomain=!1,b.thedomain=null},l.rootScopeOn(b,"groupcode.changed",function(){}),b.toggleState=function(a){b.state=a},b.stateIsShowing=function(a){return a===b.state}}}}]).directive("adminGroupCodesTab",["$rootScope","$myModal","dataFactory","$filter","$window","$uibModalStack","customerGroupCodeService","metaService",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/tkgadmin/groupcodes.html",scope:{},link:function(d,e,f){d.showModalWithData=a.showModalWithData,d.state="table",g.setCustomerGroupCodes(),d.customerGroupCodes=g.codes,d.predicate="customer_group_code",d.reverse=!1,d.sortBy=function(a){d.predicate=a,d.reverse=!d.reverse},d.filterCodes=function(a){return d.codeSearch&&-1===a.customer_group_code.indexOf(d.codeSearch.toLowerCase())&&-1===a.description.indexOf(d.codeSearch.toLowerCase())&&-1===a.partner.partner_name.indexOf(d.codeSearch.toLowerCase())?!1:!0},d.title=function(){return"table"===d.state?"Group Codes":"spreadsheet"===d.state?"Import Contacts From Spreadsheet":void 0},d.isEnabled=function(a){return"true"==a?!0:!1},d.showEditCode=function(a){b.openTemplate("managecodes.html",a,"")},d.getToggleGroupCodeStatus=function(b){c.getToggleGroupCodeStatus(b).then(function(b){__env.enableDebug&&console.log(b.data),b.data.error?__env.enableDebug&&console.log(b.data.error.message):a.$broadcast("groupcode.changed","")})},h.rootScopeOn(d,"groupcode.changed",function(){g.setCustomerGroupCodes(),d.customerGroupCodes=g.codes}),d.toggleState=function(a){d.state=a},d.stateIsShowing=function(a){return a===d.state}}}}]).directive("avatarUpload",["$timeout","$rootScope","FileUploader",function(a,b,c){return{restrict:"E",templateUrl:"views/settings/avatar-upload.html",scope:{uploader:"="},link:function(a,c,d){
a.pathImgProfile=b.pathImgProfile,a.user=b.user,a.triggerUpload=function(){a.uploader.url=b.onescreenBaseUrl+"/user/change-picture",b.uploaderOption="/user/change-picture",angular.element("#cloud-upload").trigger("click")},a.uploader.onAfterAddingFile=function(c){console.info("onAfterAddingFile",c),"/user/change-picture"===b.uploaderOption&&a.uploader.uploadAll()}}}}]).directive("userInfoSettings",["$timeout","$filter","$rootScope","dataFactory","userService",function(a,b,c,d,e){function f(a){a.settings={firstName:a.user.contact_name_given,lastName:a.user.contact_name_family,phoneExtension:a.user.user_ext,email:a.user.email_address,phoneNumber:a.user.phone_number,timeZone:a.user.settings.timezone_display,user_uuid:a.user.id},__env.enableDebug&&console.log(a.settings)}return{restrict:"E",templateUrl:"views/settings/user-info-settings.html",scope:{user:"="},link:function(a,e,g){a.init=function(){f(a)},a.init(),a.timeZones=c.timeZones,a.triggerUpdate=function(){var b="";c.user.email_address!==a.settings.email&&(b=" NOTE: Updating the email address for your profile will also update your login email address."),c.confirmDialog("Are you sure you want to update with this information?"+b).then(function(b){b&&a.updateInfo()})},a.updateInfo=function(){__env.enableDebug&&console.log(a.settings),d.postUpdateUser(a.settings).then(function(d){if(__env.enableDebug&&console.log(d.data),d.data.success){a.user.contact_name_given=a.settings.firstName,a.user.contact_name_family=a.settings.lastName,a.user.email=a.settings.email,a.user.phone_number=a.settings.phoneNumber,a.user.settings.timezone_display=a.settings.timeZone;var e=b("getTimezone")(a.settings.timeZone);a.user.settings.timezone=e,a.user.user_ext=a.settings.phoneExtension,c.showSuccessAlert("Your information was updated."),c.$broadcast("emulated.user.updated",a.user)}else d.data.error&&c.showErrorAlert(d.data.error.message)})}}}}]).directive("changePasswordSettings",["$timeout","$rootScope","dataFactory","$mdDialog","$q",function(a,b,c,d,e){var f=function(a){var b=e.defer();return c.getResetToken(a).then(function(a){a.data.error?b.reject(""):b.resolve(a.data.success.data)},function(a){b.reject("")}),b.promise};return{restrict:"E",templateUrl:"views/settings/change-password-settings.html",scope:{user:"<"},link:function(a,d,e){a.fields={},a.triggerUpdate=function(){b.confirmDialog("Are you sure you want to change your password?").then(function(b){b?a.updatePassword():a.fields={}})},a.updatePassword=function(){f(a.user.id).then(function(d){a.fields.token=d,c.resetPassword(a.fields).then(function(c){if(c.data.success)__env.enableDebug&&console.log(c.data.success.message),b.showSuccessAlert("Your password has been updated."),a.fields={};else if(c.data.error){var d=c.data.error.message;__env.enableDebug&&console.log(d),b.showErrorAlert(d[0]),a.fields={}}})})}}}}]).directive("voicemailSettings",["$timeout","$rootScope","dataFactory",function(a,b,c){var d=function(){if(b.user.voicemail)var a=b.user.voicemail.voicemail_enabled;a&&("true"===a||"1"===a?b.user.voicemail.voicemail_enabled=!0:(b.user.voicemail&&"false"===b.user.voicemail.voicemail_enabled||"0"===b.user.voicemail.voicemail_enabled)&&(b.user.voicemail.voicemail_enabled=!1))};return{restrict:"E",templateUrl:"views/settings/voicemail-settings.html",scope:{user:"="},link:function(e,f,g){d(),e.user||(e.user=b.user),e.showAudioModal=b.showAudioModal,e.settings={firstName:e.user.contact_name_given,lastName:e.user.contact_name_family,user_uuid:e.user.id},e.getCurrentGreeting=function(a){__env.enableDebug&&console.log(a);var b=null;return angular.forEach(e.user.voicemailgreetings,function(c){__env.enableDebug&&console.log(c),c.greeting_id==a&&(b=c)}),b},c.getVoicemailStatus().then(function(a){__env.enableDebug&&console.log(a),a.data.success&&(e.isActive=!1,"true"===a.data.success.voicemail_enabled&&(e.isActive=!0))}),e.setVoicemailStatus=function(){a(function(){var a=e.isActive?"true":"false";c.getSetVoicemailStatus(e.user.id,a).then(function(a){})})},e.triggerUpdate=function(){b.confirmDialog("Are you sure you want to update your voicemail settings?").then(function(a){a&&e.updateSettings()})},e.setNoAnswerStatus=function(){var a=e.settings.isNoAnswerActive?"false":"true",b={forward_no_answer_enabled:a};c.setNoAnswerStatus(b).then(function(a){})},e.setNotRegisteredStatus=function(){var a=e.settings.isNotRegisterActive?"false":"true",b={forward_user_not_registered_enabled:a};c.setNotRegisteredStatus(b).then(function(a){})},e.updateSettings=function(){__env.enableDebug&&console.log(e.settings),c.postUpdateVoicemail(e.settings).then(function(a){a.data.success?(b.user.voicemail=a.data.success.voicemail,b.showSuccessAlert("Your information has been updated.")):a.data.error&&b.showErrorAlert(a.data.error.message[0])})}}}}]).directive("requestFilesTable",["$timeout","$rootScope","$uibModalStack","$filter","clipboard","cloudStorageService","dataFactory","$mdDialog",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/cloudstorage/request-files-table.html",scope:{input:"<"},link:function(i,j,k){function l(a,b){var c=a;angular.forEach(b.folders,function(a){i.ulList.push({string:c+"->"+a.folder_name,folder_uuid:a.folder_uuid}),a.folders.length>0&&l(c+"->"+a.folder_name,a)})}i.thefolder=i.input.thefolder?i.input.thefolder:null,console.log(i.thefolder),i.showBlTable=!1,i.tips=b.tips,i.requestLinks=[],i.availFolders=[],i.symphonyUrl=b.symphonyUrl,i.showAddForm=!1,i.showSendEmail=!1,i.showTable=!1,i.showOptions=!1,i.preselectedNode=null,i.defaultOptions={sendEmail:!0,requireEmail:!1,expireAt:"6month"},i.addNewLink=function(){i.newLink={},i.newLink.options=i.defaultOptions,i.newLink.folder_uuid=i.public_cloud.folder_uuid,i.showAddForm=!0},i.editLink=function(a){i.newLink=a,i.newLink.options={},i.newLink.options.sendEmail="true"===a.send_email?!0:!1,i.newLink.options.requireEmail="true"===a.require_contact_info?!0:!1,i.newLink.options.expireAt=a.expires,i.preselectedNode=a.folder_uuid,i.showAddForm=!0},i.showSendLink=function(a){b.showModalWithData("/cloudstorage/sharelink-modal.html",{onClose:i.onCloseModal,link:a})},i.addFolder=function(){i["new"]={folder_name:null},i.showNewFolder=!0},i.showFolderSpinner=!1,i.saveNewFolder=function(b){i.showFolderSpinner=!0;var c=i.public_cloud.folder_uuid;f.createFolder(c,b).then(function(b){i.structure.folders[0].folders.push(b),a(function(){i["new"]={folder_name:null},i.showNewFolder=!1,i.showFolderSpinner=!1})})},i.expireOptions=[{value:"never",display:"never"},{value:"1year",display:"after a year"},{value:"6month",display:"after 6 months"},{value:"3month",display:"after 3 months"},{value:"1month",display:"after 1 month"},{value:"1week",display:"after 1 week"},{value:"1day",display:"after 1 day"}],i.ulList=[],g.getPublicLinks().then(function(a){if(!a.data.success)return console.log(a.data.error.message),[];console.log(a.data.success),i.showTable=!0,i.requestLinks=a.data.success.data,i.public_cloud=a.data.success.public_cloud;var b=i.public_cloud.folder_name;if(i.ulList.push({string:b,folder_uuid:i.public_cloud.folder_uuid}),l(b,i.public_cloud),i.structure={folders:[{folder_name:i.public_cloud.folder_name,folder_uuid:i.public_cloud.folder_uuid,files:i.public_cloud.files,folders:i.public_cloud.folders}]},console.log(i.structure),console.log(i.ulList),i.availFolders.push(i.public_cloud),i.input.thefolder){var c=d("getByUUID")(i.requestLinks,i.input.thefolder.folder_uuid,"folder");null!==c?i.editLink(i.requestLinks[c]):(i.preselectedNode=i.input.thefolder.folder_uuid,i.addNewLink())}}),b.$on("request.folder.selected",function(a,b){console.log("SELECTED FOLDER"),console.log(b),i.selectedFolder=b.folder_uuid?b.folder_uuid:b}),i.cancelEditLink=function(){i.newLink={},i.showAddForm=!1},i.removeLink=function(a){var b=h.confirm().title("Are you sure you want to delete this link?").ariaLabel("Delete").ok("Yes").cancel("Never Mind");h.show(b).then(function(){g.getDeletePublicLink(i.requestLinks[a].public_cloud_link_uuid).then(function(b){b.data.success?i.requestLinks.splice(a,1):b.data.error&&console.log(b.data.error.message)})})},i.saveLink=function(a){return console.log(a),i.selectedFolder?(a.folder_uuid=i.selectedFolder,console.log(a),void g.postSavePublicLink(a).then(function(a){if(a.data.success){console.log(a.data.success.data);var c=d("getByUUID")(i.requestLinks,a.data.success.data.public_cloud_link_uuid,"public_cloud_link");null!==c?i.requestLinks[c]=a.data.success.data:i.requestLinks.push(a.data.success.data),i.showAddForm=!1}else console.log(a.data.error.message),b.showErrorAlert(a.data.error.message)})):void b.showErrorAlert("You must first select a target folder for uploaded files.")},i.breadcrums=[""],i.options={onNodeSelect:function(a,b){i.breadcrums=b}},i.treeViewOptions={collapsible:!1,showFiles:!1};var m={txt:"icon-file-text",jpg:"icon-picture blue",png:"icon-picture orange",gif:"icon-picture"},n="icon-file";i.options3={mapIcon:function(a){var b=/\.(\w+)$/,c=b.exec(a.name),d=c&&c[1];return m[d]||n}},i.onCloseModal=function(){c.dismissAll()},i.copyLink=function(a){i.clipboardCopy=b.symphonyUrl+"/cloud/"+a.hash,e.copyText(i.clipboardCopy),b.alerts.push({success:!0,message:"The link has been copied to your clipboard."})}}}}]).directive("treeView",["$q","treeViewDefaults","$rootScope",function(a,b,c){return{restrict:"A",scope:{treeView:"=treeView",treeViewOptions:"=treeViewOptions",preselectedNode:"=preselectedNode"},replace:!0,template:'<div class="tree"><div tree-view-node="treeView"></div></div>',controller:["$scope",function(a){var d,e,f=this,g=angular.extend({},b,a.treeViewOptions);a.preselectedNode&&(console.log(a.preselectedNode),c.$broadcast("request.folder.selected",a.preselectedNode)),f.selectNode=function(b,f){console.log(b),c.$broadcast("request.folder.selected",b),e&&(e=void 0),d=b,a.preselectedNode=null,"function"==typeof g.onNodeSelect&&g.onNodeSelect(b,f)},f.selectFile=function(a,b){d&&(d=void 0),e=a,"function"==typeof g.onNodeSelect&&g.onNodeSelect(a,b)},f.isSelected=function(a){return a===d||a===e},f.isUuid=function(b){return b.folder_uuid&&b.folder_uuid===a.preselectedNode},f.getOptions=function(){return console.log("OPTIONS"),g}}]}}]).directive("treeViewNode",["$q","$compile",function(a,b){return{restrict:"A",require:"^treeView",link:function(a,c,d,e){function f(){a.expanded=!a.expanded}function g(){var e='<div class="tree-folder" ng-repeat="node in '+d.treeViewNode+"."+i+'"><a href="#" class="tree-folder-header inline" ng-click="selectNode($event)" ng-class="{ selected: isSelected(node) || isUuid(node) }"><i class="icon-folder-close" ng-class="getFolderIconClass()"></i> <span class="tree-folder-name">{{ node.'+k+' }}</span> </a><div class="tree-folder-content"'+(l?' ng-show="expanded"':"")+'><div tree-view-node="node"></div></div></div>'+(m?'<a href="#" class="tree-item" ng-repeat="file in '+d.treeViewNode+"."+j+'" ng-click="selectFile(file, $event)" ng-class="{ selected: isSelected(file) }"><span class="tree-item-name"><i ng-class="getFileIconClass(file)"></i> {{ file.'+k+" }}</span></a>":"");c.html("").append(b(e)(a))}var h=e.getOptions(),i=h.foldersProperty,j=h.filesProperty,k=h.displayProperty,l=h.collapsible,m=h.showFiles;a.expanded=0==l,a.getFolderIconClass=function(){return"fa fa-folder"+(a.expanded&&a.hasChildren()?"-open":"")},a.getFileIconClass="function"==typeof h.mapIcon?h.mapIcon:function(a){return"file"},a.hasChildren=function(){var b=a.node;return Boolean(b&&b[i]&&b[i].length||b[j]&&b[j].length)},a.selectNode=function(b){b.preventDefault(),l&&f();for(var c=[],d=a;d.node;)c.push(d.node[k]),d=d.$parent;e.selectNode(a.node,c.reverse())},a.selectFile=function(b,c){c.preventDefault();for(var d=[b[k]],f=a;f.node;)d.push(f.node[k]),f=f.$parent;e.selectFile(b,d.reverse())},a.isUuid=function(a){return e.isUuid(a)},a.isSelected=function(a){return e.isSelected(a)},g()}}}]).directive("defaultRingtones",["$timeout","$rootScope","$uibModalStack","dataFactory","ngAudio","symphonyConfig","audioLibraryService","metaService","$window",function(a,b,c,d,e,f,g,h,i){function j(a){g.loadAudioLibraries(a.domain.domain_uuid,!1).then(function(b){b?(a.audioLibraries=b,l(a),a.$broadcast("rzSliderForceRender")):__env.enableDebug&&console.log("FAILED LOADING AUDIO LIBRARIES")})}function k(a,b){return g.getAudioLibraryFromCollectionByUuid(b,a.ringtones())}function l(a){var b=a.user.domain.callRingtone,c=a.user.domain.chatRingtone,d=a.user.domain.textRingtone,e=a.user.domain.videoInviteRingtone,f=a.user.domain.callRingtoneVolume,g=a.user.domain.chatRingtoneVolume,h=a.user.domain.textRingtoneVolume,i=a.user.domain.videoInviteRingtoneVolume;return b&&(a.callRingtone=k(a,b.audio_library_uuid)),c&&(a.chatRingtone=k(a,c.audio_library_uuid)),d&&(a.textRingtone=k(a,d.audio_library_uuid)),e&&(a.videoInviteRingtone=k(a,e.audio_library_uuid)),f?a.callRingtoneVolume=f:a.callRingtoneVolume=5,a.user.textRingtoneVolume?a.textRingtoneVolume=h:a.textRingtoneVolume=5,a.user.chatRingtoneVolume?a.chatRingtoneVolume=g:a.chatRingtoneVolume=5,void(a.user.videoInviteRingtoneVolume?a.videoInviteRingtoneVolume=i:a.videoInviteRingtoneVolume=5)}return{restrict:"E",templateUrl:"views/settings/default-ringtones.html",scope:{restricted:"<",domain:"<",user:"<"},link:function(e,i,k){e.ringtones=function(){var a=g.filterAudioLibrariesByCategories(e.audioLibraries,["ringtones"]);return a&&(a=a.filter(function(a){return"company"===a.access_level})),a},j(e),e.updateRingtones=function(){var a={domain_uuid:e.domain.domain_uuid,user_uuid:e.user.id,callRingtoneVolume:e.callRingtoneVolume,textRingtoneVolume:e.textRingtoneVolume,chatRingtoneVolume:e.chatRingtoneVolume,videoInviteRingtoneVolume:e.videoInviteRingtoneVolume};__env.enableDebug&&console.log("RINGTONE DATA"),__env.enableDebug&&console.log(a),e.callRingtone&&(a.callRingtone=e.callRingtone.audio_library_uuid),e.textRingtone&&(a.textRingtone=e.textRingtone.audio_library_uuid),e.chatRingtone&&(a.chatRingtone=e.chatRingtone.audio_library_uuid),e.videoInviteRingtone&&(a.videoInviteRingtone=e.videoInviteRingtone.audio_library_uuid),d.postUpdateDefaultRingtones(a).then(function(d){if(d.data.success){__env.enableDebug&&console.log("RINGTONE RESPONSE"),__env.enableDebug&&console.log(d.data.success);var f=d.data.success.settings;f.callRingtone&&(e.user.domain.callRingtone=f.callRingtone,e.user.domain.callRingtoneVolume=a.callRingtoneVolume),f.textRingtone&&(e.user.domain.textRingtone=f.textRingtone,e.user.domain.textRingtoneVolume=a.textRingtoneVolume),f.chatRingtone&&(e.user.domain.chatRingtone=f.chatRingtone,e.user.domain.chatRingtoneVolume=a.chatRingtoneVolume),f.videoInviteRingtone&&(e.user.domain.videoInviteRingtone=f.videoInviteRingtone,e.user.domain.videoInviteRingtoneVolume=a.videoInviteRingtoneVolume),b.$broadcast("reset.audio.libraries"),c.dismissAll()}else d.data.error&&(__env.enableDebug&&console.log(d.data.error.message),b.showErrorAlert("There was an error updating your ringtones :("))})},e.onCloseModal=function(){c.dismissAll(),b.$broadcast("ringtones.modal.closed")},h.rootScopeOn(e,"ringtones.modal.closed",function(){e.stopPlayingLibrary()}),e.stopPlayingLibrary=function(){e.audio&&(e.audio.pause(),e.audio=void 0,e.libraryPlaying=void 0)},e.filteredLibraries=function(){var a=g.filterAudioLibrariesByCategories(e.audioLibraries,e.categories);return a=g.filterAudioLibrariesByField(a,"access_level",e.accessLevels)},e.playRingtone=function(a,b){e.audio&&e.audio.pause(),e.audio=new Audio(f.audioUrl+a.filepath);var c=function(a,b){a!==b&&(e.audio.volume=a/10)};"call"===b?(e.audio.volume=e.callRingtoneVolume/10,e.clearVolumeWatch=e.$watch("callRingtoneVolume",c)):"chat"===b?(e.audio.volume=e.chatRingtoneVolume/10,e.clearVolumeWatch=e.$watch("chatRingtoneVolume",c)):"text"===b?(e.audio.volume=e.textRingtoneVolume/10,e.clearVolumeWatch=e.$watch("textRingtoneVolume",c)):"videoInvite"===b&&(e.audio.volume=e.videoInviteRingtoneVolume/10,e.clearVolumeWatch=e.$watch("videoInviteRingtoneVolume",c)),e.audio.error||(e.ringtonePlaying=b,e.progress=e.audio.progress,e.audio.play(),e.clearWatch=e.$watch("audio.progress",function(a){1===a&&(e.audio=void 0,e.ringtonePlaying=!1,e.clearWatch(),e.clearVolumeWatch())}))},e.$watchGroup(["callRingtone","textRingtone","chatRingtone","videoInviteRingtone"],function(a,b){e.stopRingtone()}),e.stopRingtone=function(){e.audio&&(e.audio.pause(),e.audio=void 0,e.ringtonePlaying=!1,e.clearWatch())},d.getNotificationsStatus().then(function(a){a.data.success&&(e.show_notifications=a.data.success.data,e.user.show_notifications=a.data.success.data)}),e.setNotificationsStatus=function(){a(function(){var a=e.show_notifications;d.getSetNotificationsStatus(a).then(function(a){a.data.success&&(__env.enableDebug&&console.log("got back"),__env.enableDebug&&console.log(a.data.success.data),"true"===a.data.success.data?a.data.success.data=!0:a.data.success.data=!1,e.user.show_notifications=a.data.success.data)})},50)}}}}]).directive("ringtoneSettings",["$timeout","$rootScope","dataFactory","ngAudio","symphonyConfig","audioLibraryService","metaService",function(a,b,c,d,e,f,g){function h(a){f.loadAudioLibraries(a.user.domain_uuid,!1).then(function(b){b?(a.audioLibraries=b,__env.enableDebug&&console.log("LOADED AUDIO LIBRARIES"),m(a)):__env.enableDebug&&console.log("FAILED LOADING AUDIO LIBRARIES")})}function i(a,b){var c=f.getAudioLibraryFromCollectionByUuid(b,a.ringtones());return c||(__env.enableDebug&&console.log("COULDNT FIND"),__env.enableDebug&&console.log(b)),c}function j(a,b,c){return c||(c=b),a.user[b]?a.user[b]:a.user.domain[b]?a.user.domain[b][c]:null}function k(a,b,c){var d=j(a,b,c);d&&(a[b]=i(a,d))}function l(a,b){var c=j(a,b);c?a[b]=c:a[b]=5}function m(a){return __env.enableDebug&&console.log("SYNCING RINGTONES"),__env.enableDebug&&console.log(b.user),k(a,"callRingtone","audio_library_uuid"),k(a,"chatRingtone","audio_library_uuid"),k(a,"textRingtone","audio_library_uuid"),k(a,"videoInviteRingtone","audio_library_uuid"),l(a,"callRingtoneVolume"),l(a,"chatRingtoneVolume"),l(a,"textRingtoneVolume"),void l(a,"videoInviteRingtoneVolume")}return{restrict:"E",templateUrl:"views/settings/ringtone-settings.html",scope:{user:"="},link:function(d,i,j){b.libraryDeleted=null,d.ringtones=function(){var a=f.filterAudioLibrariesByCategories(d.audioLibraries,["ringtones"]);return a&&(a=a.filter(function(a){return a.user_uuid===d.user.id||"company"===a.access_level})),a},d.$on("profile.emulation.ended",function(a,b){b.id===d.user.id&&h(d)}),b.userLoaded?h(d):g.rootScopeOn(d,"user.loaded",function(){h(d)}),d.updateRingtones=function(){var a={user_uuid:d.user.id,callRingtoneVolume:d.callRingtoneVolume,textRingtoneVolume:d.textRingtoneVolume,chatRingtoneVolume:d.chatRingtoneVolume,videoInviteRingtoneVolume:d.videoInviteRingtoneVolume};d.callRingtone&&(a.callRingtone=d.callRingtone.audio_library_uuid),d.textRingtone&&(a.textRingtone=d.textRingtone.audio_library_uuid),d.chatRingtone&&(a.chatRingtone=d.chatRingtone.audio_library_uuid),d.videoInviteRingtone&&(a.videoInviteRingtone=d.videoInviteRingtone.audio_library_uuid),__env.enableDebug&&console.log("RINGTONE DATA"),__env.enableDebug&&console.log(a),c.postUpdateRingtones(a).then(function(c){if(c.data.success){__env.enableDebug&&console.log("RINGTONE RESPONSE"),__env.enableDebug&&console.log(c.data.success);var e=c.data.success.settings;e.callRingtone&&(d.user.callRingtone=e.callRingtone.audio_library_uuid,d.user.callRingtonePath=e.callRingtone.filepath,d.user.callRingtoneVolume=a.callRingtoneVolume),e.textRingtone&&(d.user.textRingtone=e.textRingtone.audio_library_uuid,d.user.textRingtonePath=e.textRingtone.filepath,d.user.textRingtoneVolume=a.textRingtoneVolume),e.chatRingtone&&(d.user.chatRingtone=e.chatRingtone.audio_library_uuid,d.user.chatRingtonePath=e.chatRingtone.filepath,d.user.chatRingtoneVolume=a.chatRingtoneVolume),e.videoInviteRingtone&&(d.user.videoInviteRingtone=e.videoInviteRingtone.audio_library_uuid,d.user.videoInviteRingtonePath=e.videoInviteRingtone.filepath,d.user.videoInviteRingtoneVolume=a.videoInviteRingtoneVolume),b.showSuccessAlert("Ringtones have been updated!")}else c.data.error&&(__env.enableDebug&&console.log(c.data.error.message),b.showErrorAlert("There was an error updating your ringtones :("))})},g.rootScopeOn(d,"reset.audio.libraries",function(){h(d)}),d.showRingtonesModal=function(){b.showModalFull("/modals/ringtone-manager-modal.html",{restricted:!0,onClose:d.onCloseModal,libraries:d.audioLibraries,domain:d.user.domain,user:d.user},"lg")},d.onCloseModal=function(){b.$broadcast("ringtones.modal.closed")},d.isDomainDefault=function(a,c){return"call"===c&&b.user.domain.callRingtone&&b.user.domain.callRingtone.audio_library_uuid===a.audio_library_uuid?!0:"chat"===c&&b.user.domain.chatRingtone&&b.user.domain.chatRingtone.audio_library_uuid===a.audio_library_uuid?!0:"text"===c&&b.user.domain.textRingtone&&b.user.domain.textRingtone.audio_library_uuid===a.audio_library_uuid?!0:"videoInvite"===c&&b.user.domain.videoInviteRingtone&&b.user.domain.videoInviteRingtone.audio_library_uuid===a.audio_library_uuid?!0:!1},d.uploadRingtone=function(a){f.createLibrary(a,"ringtones","personal").then(function(a){a.data.success?(d.successMessage=a.data.success.message,b.showSuccessAlert(a.data.success.message),d.opcBroadcast=null,d.showPlayer=!0,h(d)):(d.errorMessage=a.data.error.message,__env.enableDebug&&console.log(a.data.error.message))})},d.playRingtone=function(a,b){d.audio&&d.audio.pause(),__env.enableDebug&&console.log(e.audioUrl+a.filepath),d.audio=new Audio(e.audioUrl+a.filepath);var c=function(a,b){a!==b&&(d.audio.volume=a/10)};"call"===b?(d.audio.volume=d.callRingtoneVolume/10,d.clearVolumeWatch=d.$watch("callRingtoneVolume",c)):"chat"===b?(d.audio.volume=d.chatRingtoneVolume/10,d.clearVolumeWatch=d.$watch("chatRingtoneVolume",c)):"text"===b?(d.audio.volume=d.textRingtoneVolume/10,d.clearVolumeWatch=d.$watch("textRingtoneVolume",c)):"videoInvite"===b&&(d.audio.volume=d.videoInviteRingtoneVolume/10,d.clearVolumeWatch=d.$watch("videoInviteRingtoneVolume",c)),d.audio.error||(d.ringtonePlaying=b,d.progress=d.audio.progress,d.audio.play(),d.clearWatch=d.$watch("audio.progress",function(a){1===a&&(d.audio=void 0,d.ringtonePlaying=!1,d.clearWatch(),d.clearVolumeWatch())}))},d.$watchGroup(["callRingtone","textRingtone","chatRingtone","videoInvite"],function(a,b){d.stopRingtone()}),b.$watch("libraryDeleted",function(e,f){e&&(__env.enableDebug&&console.log(b.libraryDeleted),a(function(){c.getUserRingtoneSettings(d.user.id).then(function(a){if(__env.enableDebug&&console.log(a.data),a.data.success){var c=a.data.success.data;c.callRingtone&&(d.user.callRingtone=c.callRingtone.audio_library_uuid),c.chatRingtone&&(d.user.chatRingtone=c.chatRingtone.audio_library_uuid),c.textRingtone&&(d.user.textRingtone=c.textRingtone.audio_library_uuid),c.videoInviteRingtone&&(d.user.videoInviteRingtone=c.videoInviteRingtone.audio_library_uuid),h(d),b.libraryDeleted=null,__env.enableDebug&&console.log(b.libraryDeleted),__env.enableDebug&&console.log(d)}})},2e3))}),d.stopRingtone=function(){d.audio&&(d.audio.pause(),d.audio=void 0,d.ringtonePlaying=!1,d.clearWatch())},d.triggerUpload=function(){d.triggerUploader=!0},c.getNotificationsStatus(d.user.id).then(function(a){a.data.success&&(d.show_notifications=a.data.success.data,b.user.show_notifications=a.data.success.data)}),d.setNotificationsStatus=function(){a(function(){var a=d.show_notifications;c.getSetNotificationsStatus(a,d.user.id).then(function(a){if(a.data.success){var c=a.data.success.data;c="true"===c?!0:!1,b.user.show_notifications=c}})},50)}}}}]).directive("audioSelector",["$timeout","$rootScope","dataFactory","ngAudio","symphonyConfig","$filter","__env",function(a,b,c,d,e,f,g){function h(a){c.getVoicemailGreetings(a.user.id).then(function(b){b.data.success?(g.enableDebug&&console.log("AUDIO LIBRARY"),g.enableDebug&&console.log(b.data.success.data),a.audioLibrary=b.data.success.data):g.enableDebug&&console.log(b.data.error.message)})}return{restrict:"E",templateUrl:"views/settings/audio-selector.html",scope:{settings:"=",user:"="},link:function(a,d,i){g.enableDebug&&console.log(a.settings),a.audiopath="/imported/freeswitch/storage/voicemail/default/",a.init=function(){var b=a.audiopath;b+=a.user.domain.domain_name+"/",a.user.voicemail&&(b+=a.user.voicemail.voicemail_id+"/"),h(a),a.showPlayer=!1,a.audioFilePlaying=null},a.user?a.init():(a.user=b.user,a.init()),a.selectFile=function(d){a.settings.voicemail_greeting=d.greeting_id,a.isActive=!0;var e={greeting_id:d.greeting_id,voicemail_uuid:a.user.voicemail.voicemail_uuid,user_uuid:a.user.id};c.postSetGreetingId(e).then(function(c){c.data.success&&(a.settings.voicemail_greeting=d.greeting_id,a.user.voicemail.greeting_id=d.greeting_id,a.opcBroadcast=null,b.showSuccessAlert(c.data.success.message))}),g.enableDebug&&console.log(a.settings)},a.getGreetingFilepath=function(b){return a.audiopath+a.user.domain.domain_name+"/"+a.user.user_ext+"/"+b},a.setOpcMessageBroadcast=function(b){1===b?(a.opcBroadcast="newrecord",a.opcBroadcastTitle="Record a New Message..."):2===b?(a.opcBroadcast="uploadfile",a.opcBroadcastTitle="Upload an Audio File..."):3===b?(a.opcBroadcast="audiolibrary",a.opcBroadcastTitle="Select from Audio Library..."):(a.opcBroadcast="messagetyped",a.opcBroadcastTitle="Type Your Message...")},a.playAudioFile=function(b,c){a.audio&&a.audio.pause(),a.audioFilePlaying=c,a.audio=new Audio(e.audioUrl+b),a.recordingPlaying=!0,a.audio.play()},a.stopPlaying=function(){a.audio.pause(),a.audioFilePlaying=!1,a.recordingPlaying=!1},a.removeGreeting=function(d){b.confirmDialog("Are you sure you want to remove this greeting?").then(function(b){b?(a.showingAlert=!1,c.getRemoveGreeting(d.voicemail_greeting_uuid).then(function(b){if(b.data.success){a.settings.voicemail_greeting=b.data.success.data,a.user.voicemail&&(a.user.voicemail.greeting_id=b.data.success.data);var c=f("getByUUID")(a.audioLibrary,d.voicemail_greeting_uuid,"voicemail_greeting");null!==c&&a.audioLibrary.splice(c,1)}})):a.showingAlert=!1})},a.uploadAudioFile=function(d){var e=new FormData;e.append("recording",d),e.append("user_uuid",a.user.id),e.append("voicemail_uuid",a.user.voicemail.voicemail_uuid),c.postUploadGreeting(e).then(function(c){g.enableDebug&&console.log(c.data),c.data.success?(b.showSuccessAlert(c.data.success.message),a.settings.voicemail_greeting=c.data.success.data.greeting_id,a.user.voicemail.greeting_id=c.data.success.data.greeting_id,a.user.voicemailgreetings.push(c.data.success.data),a.opcBroadcast=null,a.showPlayer=!0,h(a)):(a.errorMessage=c.data.error.message,g.enableDebug&&console.log(c.data.error.message))},function(a){g.enableDebug&&console.log(a)})},b.saveToServer=function(c){c||(c=b.getaudioModel),a.uploadAudioFile(c)},a.playRecording=function(b){a.audio=new Audio(e.audioUrl+b),a.recordingPlaying=!0,a.audio.play()}}}}]).directive("companySetupUserTab",["$rootScope","emulationService","userContactService","userService","metaService",function(a,b,c,d,e){return{restrict:"E",templateUrl:"views/company/users.html",scope:{domain:"<",uploader:"<",triggerUpload:"&"},link:function(c,d,f){e.rootScopeOn(c,"emulate.profile.edit",function(a,d){c.user=d,b.emulatedUser=d,c.emulateProfileEditing=b.emulatedUser}),c.back=function(){a.$broadcast("profile.emulation.ended",b.emulatedUser),b.emulatedUser=null,c.emulateProfileEditing=b.emulatedUser}}}}]).directive("companySetupAutoAttendant",function(){return{restrict:"E",templateUrl:"views/company/attendant.html"}}).directive("companySetupCallQueues",function(){return{restrict:"E",templateUrl:"views/company/queues.html"}}).directive("companySetupAudioTab",function(){return{restrict:"E",templateUrl:"views/company/company-setup-audio-tab.html",scope:{domain:"<"},link:function(a,b,c){a.state="ringtones"}}}).directive("musicOnHoldManageTable",["musicOnHoldService","usefulTools","symphonyConfig","__env","fileService","$timeout","$rootScope",function(a,b,c,d,e,f,g){function h(b){a.getMusicOnHoldRecords().then(function(a){a?a[0]&&b.$apply(function(){b.record=a[0]}):d.enableDebug&&console.log("FAILED LOADING MUSIC ON HOLD RECORDS")})}return{restrict:"E",templateUrl:"views/company/music-on-hold-manage-table.html",scope:{},link:function(b,i,j){h(b),b.triggerUpload=function(){b.triggerUploader=!0},b.createMusicOnHoldRecord=function(c){b.uploadingRecord=!0,b.record?a.addMusicToMusicOnHold(b.record,c).then(function(a){b.uploadingRecord=!1,a.data.error&&g.showErrorAlert("Could not upload your file.")}):a.createMusicOnHold(c,"domainMusic").then(function(a){a&&(b.uploadingRecord=!1,b.record=a)})},b.isDefaultMOHFile=function(b){return b===a.data.defaultMOHName},b.addMusicFile=function(c){a.addMusicToMusicOnHold(b.addMusicRecord,c)},b.deleteMusicFile=function(b,c){var d="Are you sure you want to delete this ringtone? ";g.confirmDialog(d,c).then(function(d){d&&a.deleteMusicFile(b,c)})},b.convertFreeswitchPathToFilePath=function(a){var b=a.split("/"),c=b[6],d=b[7],e="/imported/freeswitch/music/"+c+"/"+d+"/48000/";return e},b.playMusicFile=function(a,e){d.enableDebug&&console.log(a),d.enableDebug&&console.log(e),b.audio&&b.audio.pause();var f=a.music_on_hold_path,g=c.audioUrl+b.convertFreeswitchPathToFilePath(f)+e;d.enableDebug&&console.log(g),b.audio=new Audio(g),b.audio.error||(b.progress=b.audio.progress,b.filePlaying=e,b.audio.play())},b.stopPlayingFile=function(){b.audio&&(b.audio.pause(),b.audio=void 0,b.filePlaying=void 0)},b.downloadMusicFile=function(a,b){var f=d.apiUrl&&""!==d.apiUrl?d.apiUrl:c.onescreenUrl,g=f+"/audio/musiconhold/download";g+="/"+a.music_on_hold_uuid,g+="/"+b,g+="/"+!1,e.downloadFileByUrl(g)},b.removeFileExtensionFromFilename=function(a){return e.removeFileExtensionFromFilename(a)},b.renameFile=function(c,d){d||(d=b.currentRecordEditing);var f=b.currentFileEditing?b.currentFileEditing:b.lastFileEdited,g=e.getFileExtensionFromFilename(f);c+="."+g,a.renameMusicFile(f,c,d)},b.stopEditing=function(){f(function(){if(b.lastFileEdited=b.currentFileEditing,b.currentFileEditing=null,b.fileEdited){var a=b.currentEditInput[0].value;b.renameFile(a,b.currentRecordEditing)}b.currentEditinput=null,b.currentRecordEditing=null,b.currentFileEditing=null})},b.editFile=function(a,c,d){b.isDefaultMOHFile(a)||(c=angular.element(c),b.currentFileEditing=a,b.currentRecordEditing=d,b.currentEditInput=c,f(function(){c.focus()}))},b.setFileToEdited=function(){b.$apply(function(){b.fileEdited=!0})},b.getNeighboringInputValueByEvent=function(a){return b.getNeighboringInputByEvent(a).value},b.getNeighboringInputByEvent=function(a){var b=angular.element(a.currentTarget),c=b.siblings("input");return c[0]}}}}]).directive("audioManageTable",["audioLibraryService","symphonyConfig","ngAudio","fileService","$timeout","$mdDialog","usefulTools","$rootScope","metaService",function(a,b,c,d,e,f,g,h,i){function j(b){a.loadAudioLibraries(b.domain.domain_uuid,!1).then(function(a){a?b.audioLibraries=a:__env.enableDebug&&console.log("FAILED LOADING AUDIO LIBRARIES")})}return{restrict:"E",templateUrl:"views/company/audio-manage-table.html",scope:{restricted:"<",categories:"<",accessLevels:"<",domain:"<",option:"<",audioLibraries:"<",user:"<"},link:function(c,f,k){c.uploadingLibrary=!1;var l=!0;c.user||(l=!1,c.user=h.user),c.calldefault=c.user.domain.callRingtone,c.textdefault=c.user.domain.textRingtone,c.chatdefault=c.user.domain.chatRingtone,c.videoinvitedefault=c.user.domain.videoInviteRingtone,c.categories||(c.categories=["ringtones","ivrgreetings"]),c.accessLevels||(c.accessLevels=["personal","company"]),c.domain&&!c.audioLibraries&&j(c),c.isAdminGroupOrGreater=function(){var a=h.user.accessgroup;return"admin"===a||"KotterTech"===a||"superadmin"===a},c.$watch("domain",function(a,b){a&&a!==b&&j(c)}),h.$watch("user.domain.callRingtone",function(a,b){a&&(c.calldefault=h.user.domain.callRingtone)}),h.$watch("user.domain.textRingtone",function(a,b){a&&(c.textdefault=h.user.domain.textRingtone)}),h.$watch("user.domain.chatRingtone",function(a,b){a&&(c.chatdefault=h.user.domain.chatRingtone)}),h.$watch("user.domain.videoInviteRingtone",function(a,b){
a&&(c.videoinvitedefault=h.user.domain.videoInviteRingtone)}),c.restricted&&i.rootScopeOn(c,"ringtones.modal.closed",function(){c.stopPlayingLibrary()}),c.filteredLibraries=function(){var b=a.filterAudioLibrariesByCategories(c.audioLibraries,c.categories);return b=a.filterAudioLibrariesByField(b,"access_level",c.accessLevels)},c.libraryAllowed=function(a){return a.access_level||(a.access_level="personal"),c.restricted&&"company"===a.access_level?!1:c.restricted&&a.user_uuid!==c.user.id?!1:!0},c.showDefaultRingtonesModal=function(){h.showModalFull("/modals/default-ringtones-modal.html",{restricted:!1,domain:c.domain,onClose:c.onCloseModal,user:c.user})},c.showNoRingtones=function(){h.showInfoAlert("You must upload ringtones before you can set the default ringtones.")},c.deleteAudioLibrary=function(b){var d=null;l&&(d=c.user.id),h.confirmDialog("Are you sure you want to delete this ringtone? ",b.file_title).then(function(e){e&&a.deleteAudioLibraryByUuid(b.audio_library_uuid,d).then(function(){j(c);var a=b.audio_library_uuid,d=["text","call","chat","videoInvite"];angular.forEach(d,function(b){c.user[b+"Ringtone"]===a&&(c.user[b+"Ringtone"]=null,c.user[b+"RingtonePath"]=null)}),h.$broadcast("reset.audio.libraries")})})},c.triggerUpload=function(){c.triggerUploader=!0},c.uploading=function(){return c.uploadingLibrary},c.sortDirection=!1,c.sortCol="file_title",c.sortBy=function(a){a===c.sortCol?c.sortDirection=!c.sortDirection:(c.sortDirection=!c.sortDirection,c.sortCol=a)},c.uploadAudioLibrary=function(b){var d=c.restricted?"personal":"company";c.uploadingLibrary=!0,a.createLibrary(b,c.categories[0],d,c.domain.domain_uuid,c.audioLibraries).then(function(a){__env.enableDebug&&console.log(a),c.uploadingLibrary=!1,a.data.success?g.showSuccessAlert(a.data.success.message):g.showErrorAlert(a.data.error.message)})},c.playAudioLibrary=function(a){c.audio&&c.audio.pause(),c.audio=new Audio(b.audioUrl+a.filepath),c.audio.error||(c.progress=c.audio.progress,c.libraryPlaying=a,c.audio.play())},c.stopPlayingLibrary=function(){c.audio&&(c.audio.pause(),c.audio=void 0,c.libraryPlaying=void 0)},c.downloadAudioFile=function(a){var c=__env.apiUrl&&""!==__env.apiUrl?__env.apiUrl:b.onescreenUrl,e=c+"/audio/getfile/"+a.audio_library_uuid+"/"+!1;d.downloadFileByUrl(e)},c.removeFileExtensionFromFilename=function(a){return d.removeFileExtensionFromFilename(a)},c.renameLibrary=function(b){var e=b.input[0].value;c.renameHappened=!0;var f=d.getFileExtensionFromFilename(b.file_title);e+="."+f,a.renameAudioLibraryByUuid(b.audio_library_uuid,e).then(function(a){a&&(b.file_title=a),c.renameHappened=!1,c.stopEditingLibrary(b)})},c.stopEditingLibrary=function(a,b){e(function(){c.renameHappened||(a.editing=!1,a.edited=!1,a.input=!1,b&&(b.value=c.removeFileExtensionFromFilename(a.file_title)))},100)},c.editLibrary=function(a,b){c.libraryAllowed(a)&&(b=angular.element(b),a.editing=!0,a.input=b,e(function(){b.focus()}))},c.setLibraryToEdited=function(a){c.$apply(function(){a.edited=!0})},c.getNeighboringInputValueByEvent=function(a){return c.getNeighboringInputByEvent(a).value},c.getNeighboringInputByEvent=function(a){var b=angular.element(a.currentTarget),c=b.siblings("input");return c[0]}}}}]).directive("companySetupPermissions",function(){return{restrict:"E",templateUrl:"views/company/permissions.html"}}).directive("companySetupPermissions1",["$timeout","$rootScope","dataFactory","symphonyConfig","permissionGroupService",function(a,b,c,d,e){function f(a){audioLibraryService.loadAudioLibraries(a.user.domain_uuid,!1).then(function(b){b?(a.audioLibraries=b,syncWithUserSettings(a)):__env.enableDebug&&console.log("FAILED LOADING AUDIO LIBRARIES")})}return{restrict:"E",templateUrl:"views/company/permissions.html",scope:{domain:"<"},link:function(e,g,h){e.ringtones=function(){var a=audioLibraryService.filterAudioLibrariesByCategories(e.audioLibraries,["ringtones"]);return a&&(a=a.filter(function(a){return a.user_uuid===b.user.id||"company"===a.access_level})),a},e.$on("profile.emulation.ended",function(a,b){b.id===e.user.id&&f(e)}),f(e),e.updateRingtones=function(){var a={user_uuid:e.user.id,callRingtoneVolume:e.callRingtoneVolume,textRingtoneVolume:e.textRingtoneVolume,chatRingtoneVolume:e.chatRingtoneVolume};__env.enableDebug&&console.log("RINGTONE DATA"),__env.enableDebug&&console.log(a),e.callRingtone&&(a.callRingtone=e.callRingtone.audio_library_uuid),e.textRingtone&&(a.textRingtone=e.textRingtone.audio_library_uuid),e.chatRingtone&&(a.chatRingtone=e.chatRingtone.audio_library_uuid),c.postUpdateRingtones(a).then(function(c){if(c.data.success){__env.enableDebug&&console.log("RINGTONE RESPONSE"),__env.enableDebug&&console.log(c.data.success);var d=c.data.success.settings;d.callRingtone&&(e.user.callRingtone=d.callRingtone.audio_library_uuid,e.user.callRingtonePath=d.callRingtone.filepath,e.user.callRingtoneVolume=a.callRingtoneVolume),d.textRingtone&&(e.user.textRingtone=d.textRingtone.audio_library_uuid,e.user.textRingtonePath=d.textRingtone.filepath,e.user.textRingtoneVolume=a.textRingtoneVolume),d.chatRingtone&&(e.user.chatRingtone=d.chatRingtone.audio_library_uuid,e.user.chatRingtonePath=d.chatRingtone.filepath,e.user.chatRingtoneVolume=a.chatRingtoneVolume),b.showSuccessAlert("Ringtones have been updated!")}else c.data.error&&(__env.enableDebug&&console.log(c.data.error.message),b.showErrorAlert("There was an error updating your ringtones :("))})},e.showRingtonesModal=function(){b.showModalFull("/modals/ringtone-manager-modal.html",{restricted:!0,onClose:e.onCloseModal,libraries:e.audioLibraries,domain:e.user.domain,user:e.user},"lg")},e.onCloseModal=function(){b.$broadcast("ringtones.modal.closed")},e.isDomainDefault=function(a,c){return"call"===c&&b.user.domain.callRingtone&&b.user.domain.callRingtone.audio_library_uuid===a.audio_library_uuid?!0:"text"===c&&b.user.domain.textRingtone&&b.user.domain.textRingtone.audio_library_uuid===a.audio_library_uuid?!0:"chat"===c&&b.user.domain.chatRingtone&&b.user.domain.chatRingtone.audio_library_uuid===a.audio_library_uuid?!0:!1},e.uploadRingtone=function(a){audioLibraryService.createLibrary(a,"ringtones","personal").then(function(a){a.data.success?(e.successMessage=a.data.success.message,b.showSuccessAlert(a.data.success.message),e.opcBroadcast=null,e.showPlayer=!0,f(e)):(e.errorMessage=a.data.error.message,__env.enableDebug&&console.log(a.data.error.message))})},e.playRingtone=function(a,b){e.audio&&e.audio.pause(),e.audio=new Audio(d.audioUrl+a.filepath);var c=function(a,b){a!==b&&(e.audio.volume=a/10)};"call"===b?(e.audio.volume=e.callRingtoneVolume/10,e.clearVolumeWatch=e.$watch("callRingtoneVolume",c)):"chat"===b?(e.audio.volume=e.chatRingtoneVolume/10,e.clearVolumeWatch=e.$watch("chatRingtoneVolume",c)):"text"===b&&(e.audio.volume=e.textRingtoneVolume/10,e.clearVolumeWatch=e.$watch("textRingtoneVolume",c)),e.audio.error||(e.ringtonePlaying=b,e.progress=e.audio.progress,e.audio.play(),e.clearWatch=e.$watch("audio.progress",function(a){1===a&&(e.audio=void 0,e.ringtonePlaying=!1,e.clearWatch(),e.clearVolumeWatch())}))},e.$watchGroup(["callRingtone","textRingtone","chatRingtone"],function(a,b){e.stopRingtone()}),b.$watch("libraryDeleted",function(d,g){d&&(__env.enableDebug&&console.log(b.libraryDeleted),a(function(){c.getUserRingtoneSettings(e.user.id).then(function(a){if(__env.enableDebug&&console.log(a.data),a.data.success){var c=a.data.success.data;c.callRingtone&&(e.user.callRingtone=c.callRingtone.audio_library_uuid),c.chatRingtone&&(e.user.chatRingtone=c.chatRingtone.audio_library_uuid),c.textRingtone&&(e.user.textRingtone=c.textRingtone.audio_library_uuid),f(e),b.libraryDeleted=null,__env.enableDebug&&console.log(b.libraryDeleted),__env.enableDebug&&console.log(e)}})},2e3))}),e.stopRingtone=function(){e.audio&&(e.audio.pause(),e.audio=void 0,e.ringtonePlaying=!1,e.clearWatch())},e.triggerUpload=function(){e.triggerUploader=!0},c.getNotificationsStatus(e.user.id).then(function(a){a.data.success&&(e.show_notifications=a.data.success.data,b.user.show_notifications=a.data.success.data)}),e.setNotificationsStatus=function(){a(function(){var a=e.show_notifications;c.getSetNotificationsStatus(a,e.user.id).then(function(a){if(a.data.success){var c=a.data.success.data;c="true"===c?!0:!1,b.user.show_notifications=c}})},50)}}}}]).directive("companySetupStatusTab",function(){return{restrict:"E",templateUrl:"views/company/company-status.html"}}).directive("companySetupChatMacros",["dataFactory","$rootScope","chatMacroService","$timeout",function(a,b,c,d){function e(a){return a.domain?a.domain.domain_uuid!==b.user.domain_uuid:!1}return{restrict:"E",templateUrl:"views/company/chat-macros.html",scope:{domain:"<"},link:function(a,b,d){a.newTextChoiceBranch="",a.init=function(){e(a)?c.loadChatMacros(a.domain.domain_uuid,!1).then(function(b){if(b){var d={};angular.forEach(b,function(a){c.addMacroToCollection(a,d)}),a.chatMacros=d}}):c.getChatMacros().then(function(b){b&&(a.chatMacros=b)})},a.init(),a.$watch("domain",function(b,c){c&&b&&b!==c&&a.init()}),a.updateMacro=function(a){a.editing&&c.updateMacro(a).then(function(b){b.data.success||(a.text_choice_text=a.editing),a.editing=!1})},a.setMacroToEditing=function(a){a.editing||(a.editing=a.text_choice_text)},a.createFullMacro=function(){if(e(a))var b=a.chatMacros;c.createMacro(a.hotKeyText,a.textChoiceText,b,a.domain.domain_uuid),a.hotKeyText=null,a.textChoiceText=null},a.createTextChoiceMacro=function(b,d){if(e(a))var f=a.chatMacros;c.createMacro(b,d.newTextChoiceBranch,f,a.domain.domain_uuid),d.newTextChoiceBranch=null},a.removeMacro=function(b){if(e(a))var d=a.chatMacros;c.deleteMacro(b,d)}}}}]).directive("companySetupUsersTable",["$timeout","$mdDialog","$rootScope","dataFactory","ngAudio","symphonyConfig","$filter","__env","$window","userContactService","emulationService","chatService","usefulTools","userService","_","$q","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return{restrict:"E",templateUrl:"views/company/company-setup-users-table.html",scope:{editingUser:"=",domain:"<"},link:function(e,g,i){console.log(e.domain),e.domain||(e.domain=c.user.domain),e.predicate="user_ext",e.reverse=!1,e.sortBy=function(a){e.predicate=a,e.reverse=!e.reverse},e.init=function(){console.log(e.domain),e.getUsers(e.domain.domain_uuid)},e.$watch("domain",function(a,b){console.log(a);var d=a&&!b,f=a&&b&&a!==b,g=a&&b&&a===b;if(d||f||g){var h=e.editingUser?e.editingUser.id:c.user.id;e.reload(e.domain.domain_uuid,h)}}),e.getUsers=function(a){console.log(a),n.findUsers(a).then(function(a){if(a){console.log(a);e.users=n.mergeUserColWithContacts(a),console.log(e.users)}})},e.reload=function(a,b){j.registerOnContactLoadCallback(function(){j.findContacts(a,b).then(function(b){b&&(a!==c.user.domain.domain_uuid&&(b=b.filter(function(b){return b.user_uuid!==c.user.id&&b.domain_uuid===a})),e.init())})})},e.showUserProfileInfo=function(a){c.$broadcast("emulate.profile.edit",a)},e.$on("user.contacts.reloaded",function(){e.contacts=c.userContacts}),e.editUser=function(a){e.editingUser=a},e.toggleAddUserRow=function(){e.showAddUserRow=!e.showAddUserRow},e.addUser=function(){return e.newUser&&e.newUser.txtExtension&&e.newUser.txtNameGiven&&e.newUser.txtNameFamily&&e.newUser.txtEmail?m.isValidEmail(e.newUser.txtEmail)?!e.newUser.txtExtension||3!==e.newUser.txtExtension.length||isNaN(e.newUser.txtExtension)?void c.showErrorAlert("You must enter an extension that is 3 numbers long."):void d.getDaysRemain().then(function(g){var i=g.data.success.data,j=parseFloat(c.user.groupcode.per_seat).toFixed(2),l=(j*parseFloat(i.remain)/parseFloat(i.days)).toFixed(2),m=b.confirm().title("Please Confirm").htmlContent("A pro-rated charge of $"+l+"* will be added to your next monthly bill. You will be charged $"+j+'/month plus taxes/fees for this user moving forward. <br><span style="font-size: 12px;">*($'+j+"/user x "+i.remain+" days remaining in this month / "+i.days+" days this month)</span>").ariaLabel("Confirm").ok("I Agree").cancel("Cancel");b.show(m).then(function(){e.showSpinner=!0,e.newUser.txtnewdid=c.userContacts[0].phones[0].phone_number,e.newUser.url_client||(e.newUser.url_client=h.symphonyUrl&&""!==h.symphonyUrl?h.symphonyUrl+"/login":f.symphonyUrl+"/login");var b=new Date,g=b.getTimezoneOffset();e.newUser.tzoffset=g/60,h.enableDebug&&console.log(e.newUser);var i;i=k.emulatedCompany?k.emulatedCompany.domain_uuid:c.user.domain.domain_uuid,e.newUser.domainUuid=i,h.enableDebug&&console.log(i),d.doUserCreation(e.newUser).then(function(b){if(b.data.success){h.enableDebug&&console.log(b.data.success),e.newUser={},a(function(){e.showSpinner=!1});var d=o.merge(b.data.success.data,b.data.success.user);e.users.push(d),h.enableDebug&&console.log(e.users),e.toggleAddUserRow(),c.showSuccessAlert(b.data.success.message)}else b.data.error&&(e.showSpinner=!1,c.showErrorAlert(b.data.error.message))})},function(a){})}):void c.showErrorAlert("You must use a valid email address."):void c.showErrorAlert("All fields are required.")},e.$on("company.setup.delete.user",function(a,b){angular.forEach(e.users,function(a,c){a.user_uuid==b&&e.users.splice(c,1)}),angular.forEach(c.userContacts,function(a,d){a.user_uuid==b&&c.userContacts.splice(d,1)})}),q.rootScopeOn(e,"company.setup.reload.users",function(){if(e.domain){var a=e.domain.domain_uuid;j.getContacts(a).then(function(a){a&&e.init(a)})}else e.init()}),q.rootScopeOn(e,"contact.user.image.changed",function(a,b){var d;b.domain_uuid===c.user.domain_uuid&&(e.contacts=c.userContacts),d=b.contact_uuid?e.contacts.filter(function(a){return a.contact_uuid===b.contact_uuid})[0]:e.contacts.filter(function(a){return a.user_uuid===b.user_uuid})[0],d.contact_profile_image=b.contact_profile_image}),q.rootScopeOn(e,"emulated.user.updated",function(a,b){e.contacts||(e.contacts=c.userContacts);var d=e.contacts.filter(function(a){return a.contact_uuid===b.contact_uuid})[0];d.contact_name_given=b.contact_name_given,d.contact_name_family=b.contact_name_family,d.emails[0].email_address=b.email,d.phones[0].phone_number=b.phone_number,d.user_ext=b.phone_extension}),e.isKotterTechOrGreater=function(){var a=c.user.accessgroup;return"KotterTech"===a||"superadmin"===a}}}}]).directive("companySetupUserEdit",["$timeout","$rootScope","dataFactory","$mdDialog","ngAudio","symphonyConfig","$filter","__env",function(a,b,c,d,e,f,g,h){function i(a){a.settings={firstName:a.user.contact_name_given,lastName:a.user.contact_name_family,phoneNumber:a.user.phone_number,user_uuid:a.user.id,email:a.user.email_address,recordAll:!!a.user.user_record,userProfileStatus:a.user.profile_status,userIsAdmin:a.user.companyAdmin},h.enableDebug&&console.log(a.settings),a.fields={}}return{restrict:"E",templateUrl:"views/company/company-setup-user-edit.html",scope:{user:"="},link:function(e,f,j){var k;e.alerts=[],h.enableDebug&&console.log(e.settings),e.showAlerts=function(){e.alerts.length>0&&(k=e.alerts.shift(),k.success?b.showSuccessAlert(k.message).then(function(){e.showAlerts()}):k.error&&b.showErrorAlert(k.message).then(function(){e.showAlerts()}))},e.$watch("alerts.length",function(a,b){a>b&&!e.showingAlert&&e.showAlerts()}),e.back=function(){e.user=void 0},e.$watch("user",function(a,b){a!==b&&(angular.element("#phone-input").scope()&&angular.element("#phone-input").scope().listener(),a&&i(e))}),e.$watch("settings.userProfileStatus",function(a,b){a===b||void 0===b||e.disableProfileWatch||(console.log(a),e.disableUserProfile(a))}),e.$watch("settings.userIsAdmin",function(a,b){}),e.disableUserProfile=function(d){var f={user_uuid:e.user.user_uuid,setting:d};c.postUserProfileDisable(f).then(function(c){if(c.data.success){e.user.profile_status=d,d&&(e.user.user_enabled="true"),d||(e.user.user_enabled="false");var f=g("getByUUID")(b.userContacts,e.user.contact_uuid,"contact");null!==f&&(b.userContacts[f].profile_status=d)}else c.data.error&&(e.settings.userProfileStatus=!d,e.disableProfileWatch=!0,a(function(){e.disableProfileWatch=!1}))})},e.deleteUserProfile=function(){var a={user_uuid:e.user.user_uuid,setting:!0};c.getDaysRemain().then(function(f){var g=f.data.success.data,i=parseFloat(b.user.groupcode.per_seat).toFixed(2),j=(i*parseFloat(g.remain)/parseFloat(g.days)).toFixed(2),k=d.confirm().title("Please Confirm").htmlContent("Are you sure you want to delete this user? A pro-rated credit of $"+j+" for deleting this user will be applied to your next monthly bill.").ariaLabel("Delete").ok("Yes, Delete").cancel("Never Mind");d.show(k).then(function(){c.postUserProfileDelete(a).then(function(a){a.data.success?(b.$broadcast("company.setup.delete.user",e.user.user_uuid),e.user=void 0):a.data.error&&h.enableDebug&&console.log(a.data.error.message)})})})},e.changeUserExtension=function(a){if(!a||a>999||100>a)return void b.showErrorAlert("You must enter an extension that is 3 numbers long.");h.enableDebug&&console.log(e.user);var f={user_uuid:e.user.user_uuid,newExt:a},g=d.confirm().title("Are you sure you want to change this user's extension from "+e.user.user_ext+" to "+a+"?").ariaLabel("Confirm").ok("Yes").cancel("Never Mind");d.show(g).then(function(){c.postChangeUserExtension(f).then(function(c){h.enableDebug&&console.log(c),c.data.success?(h.enableDebug&&console.log(c.data.success),b.$broadcast("company.setup.reload.users"),b.showSuccessAlert("The user's extension has been successfully changed to "+a)):c.data.error&&(h.enableDebug&&console.log(c.data.error.message),b.showSuccessAlert(c.data.error.message))})})},e.triggerUpdate=function(){e.userInfoChanged?(e.showingAlert=!0,b.confirmDialog("Are you sure you want to update with this information?").then(function(a){a?(e.showingAlert=!1,e.updateInfo(),e.triggerPasswordUpdate(),e.showAlerts()):e.showingAlert=!1})):e.triggerPasswordUpdate()},e.$watch("settings.recordAll",function(a,b){a!==b&&e.toggleRecordAllCalls()}),e.toggleRecordAllCalls=function(){var a=e.settings.recordAll?"all":"Disabled",b={setting:a,user_uuid:e.user.user_uuid};c.postCallRecord(b).then(function(a){a.data.error&&(e.settings.recordAll=!e.settings.recordAll,e.alerts.push({error:!0,message:a.data.error.message}))})},e.triggerPasswordUpdate=function(){e.fields.password&&(e.showingAlert=!0,b.confirmDialog("Are you sure you want to change this user's password?").then(function(a){a&&e.updatePassword(),e.showingAlert=!1}))},e.updateInfo=function(){return h.enableDebug&&console.log(e.settings),c.postUpdateUser(e.settings).then(function(a){if(a.data.success){var c=e.settings.firstName,d=e.settings.lastName;e.user.contact_name_given=c,e.user.contact_name_family=d,e.user.contact_name_full=c+" "+d,e.user.phones[0].phone_number=e.settings.phoneNumber,e.user.user_uuid===b.user.id&&(b.user.contact_name_given=c,b.user.contact_name_family=d,b.user.contact_name_full=c+" "+d,b.user.phone_number=e.settings.phoneNumber),e.alerts.push({success:!0,message:"The information has been updated."})}else{var f=a.data.error.message;h.enableDebug&&console.log(f),e.alerts.push({error:!0,message:f[0]}),i(e)}})},e.updatePassword=function(){return e.fields.user_uuid=e.user.user_uuid,c.postAdminResetPassword(e.fields).then(function(a){if(a.data.success)h.enableDebug&&console.log(a.data.success.message),e.alerts.push({success:!0,message:"The password has been updated."}),e.fields={};else if(a.data.error){var c=a.data.error.message;h.enableDebug&&console.log(c),e.alerts.push({error:!0,message:c[0]}),e.fields={}}b.$broadcast("company.setup.reload.users")})}}}}]).directive("chooseGroupGoogleImport",["$rootScope","dataFactory","$filter","$window","$uibModalStack","contactGroupsService","userContactService",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"group-dialog-template.html",scope:!0,link:function(b,c,g){b.groups=f.groups,b.submit=function(a){d.localStorage.setItem("importGmailContactsTo",a),e.dismissAll(),f.authGoogle()},b.cancel=function(){e.dismissAll()};var h;b.alerts=[],__env.enableDebug&&console.log(b.settings),b.showAlerts=function(){b.alerts.length>0&&(h=b.alerts.shift(),h.success?a.showSuccessAlert(h.message).then(function(){b.showAlerts()}):h.error&&a.showErrorAlert(h.message).then(function(){b.showAlerts()}))}}}}]).directive("contactGroupsManager",["$rootScope","$mdDialog","dataFactory","$filter","$window","$uibModalStack","contactGroupsService","userContactService",function(a,b,c,d,e,f,g,h){function i(a){var b=[];return angular.forEach(a,function(a,c){a&&b.push(c)}),b}return{restrict:"E",templateUrl:"views/company/groupmanager.html",scope:{updateGroupViewers:"&"},link:function(b,j,k){function l(){return{userContactTotalMaxedOut:b.userContactTotalMaxedOut}}b.showModalWithData=a.showModalWithData,b.contactGroups=g.groups,b.pathImgProfile=a.pathImgProfile,b.state="table",b.stateIsShowing=function(a){return a===b.state},b.authGoogle=function(){g.authGoogle()},b.closeCreateGroup=function(){b.newgroup={},f.dismissAll()},b.toggleShowGroupManagers=function(a){a.showManagers=!a.showManagers},b.toggleShowViewAccessMembers=function(a){a.showViewAccessMembers=!a.showViewAccessMembers},b.toggleShowGroupMembers=function(a){a.showGroupMembers=!a.showGroupMembers},b.showEditGroup=function(c){if(a.editGroupIndex=c,a.uploaderOption="/contacts/groups/create",a.showNewGroup=!0,null!==c){__env.enableDebug&&console.log(b.contactGroups[c]),a.uploaderOption="/contacts/groups/update",a.showNewGroup=!1;var d=b.contactGroups[c];d.member_list=g.getMemberListForGroup(d),a.showModalFull("/company/docontactgroup.html",{updateGroup:d},"lg")}else a.showModalFull("/company/docontactgroup.html",{updateGroup:{}},"lg")},b.showSpreadsheetImport=function(){a.showModalFull("/company/contact-spreadsheet-importer-modal.html",{},"lg")},b.initializeGoogle=function(){__env.enableDebug&&console.log("Initializing"),g.handleClientLoad()},b.authGoogleNew=function(){b.initializeGoogle(),$timeout(function(){g.handleAuthClick()},2e3)},b.userContactTotalMaxedOut=h.userContactTotalMaxedOut,b.obtainTargetGroup=function(){a.showModalWithData("/company/googlecontacts.html",l())},b.specifyContactGroup=function(c){angular.element(document.body);b.groups=g.groups,b.contactTarget=void 0,a.showModalWithData("/company/googlecontacts.html",l())},b.userIsManagerOfGroup=function(b){return g.userIsManagerOfGroup(a.user.id,b)},b.isGroupMember=function(a,c){if(null!==a){__env.enableDebug&&console.log(b.contactGroups[a].contacts),__env.enableDebug&&console.log(c);var d=b.contactGroups[a].contacts,e=!1;return angular.forEach(d,function(a){a.contact_uuid===c&&(e=!0)}),e}return!1},b.isGroupViewGroup=function(a,b){var c=!1;return a&&a.forEach(function(a){a.view_group_uuid===b&&(c=!0)}),c},b.isGroupViewMember=function(a,b){var c=!1;return a&&a.forEach(function(a){a.view_contact_uuid===b&&(c=!0)}),c},b.getMemberName=function(b){var c=d("getContactbyUUID")(a.userContacts,b);return null!==c?c.contact_name_given+" "+c.contact_name_family:""},b.getUserName=function(b){var c=d("getContactbyUserUUID")(a.userContacts,b);return null!==c?c.contact_name_given+" "+c.contact_name_family:""},b.getGroupName=function(a){var c=d("getGroupbyUUID")(b.contactGroups,a);return null!==c?c.group_name:""},b.hideGroup=function(a){g.hideGroup(a)},b.openGroupManagerModal=function(c,d){var e={};angular.forEach(c.managers,function(a){e[a.contact_uuid]=!0});var f={updateGroupManagers:b.updateGroupManagers,contactIsGroupManager:g.contactIsGroupManager,group:c,managers:e,managerGroups:{}};a.showModalWithData("/company/setcontactgroupmanagers.html",f)},b.updateGroupManagers=function(a,c,d,e){var f=i(c);g.setManagersList(a,f,d,b.updateGroupViewers),e&&e()},b.removeManager=function(a,c){g.revokeManagerStatus(a,c,b.updateGroupViewers)},b.dissolveContactGroup=function(b){a.confirmDialog(b.group_name,"Are you sure you want to dissolve this group?").then(function(a){a&&g.deleteGroup(b)})},b.removeGroupFromViewGroup=function(f,g){var h={group_uuid:f,view_group_uuid:g};c.deleteGroupFromViewerGroup(h).then(function(c){if(a.showalerts(c),c.data.success){var g=d("getGroupIndexbyUUID")(b.contactGroups,f,"");b.contactGroups[g].viewer_groups=c.data.success.data,e.localStorage.setItem("contactGroups",JSON.stringify(b.contactGroups))}},function(a){__env.enableDebug&&console.log(a)})},b.removeUserFromViewGroup=function(f,g){var h={group_uuid:f,view_contact_uuid:g};__env.enableDebug&&console.log(h),c.deleteUserFromViewerGroup(h).then(function(c){if(a.showalerts(c),c.data.success){var g=d("getGroupIndexbyUUID")(b.contactGroups,f,"");b.contactGroups[g].viewer_users=c.data.success.data,e.localStorage.setItem("contactGroups",JSON.stringify(b.contactGroups))}},function(a){__env.enableDebug&&console.log(a)})},b.removeGroupContact=function(a,f){var h={group_uuid:a,contact_uuid:f};c.deleteGroupContact(h).then(function(c){if(c.data.error)__env.enableDebug&&console.log(c.data.error.message);else{__env.enableDebug&&console.log(c.data.success.message);var f=d("getGroupIndexbyUUID")(b.contactGroups,a,""),h=d("getGroupbyUUID")(b.contactGroups,a);b.contactGroups[f].members=c.data.success.data,b.contactGroups[f].contacts=g.getContactRetrievalFuncForGroup(h),e.localStorage.setItem("contactGroups",JSON.stringify(b.contactGroups))}})}}}}]).directive("contactSpreadsheetImporter",["$rootScope","dataFactory","userContactService","metaService",function(a,b,c,d){function e(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a?b.test(a):!1}function f(a){if(!a)return!1;var b=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;return b.test(a)}function g(a){var b,d,e,f,g,i=[];return __env.enableDebug&&console.log(a),angular.forEach(a,function(a){d=[],b={contact_profile_color:randomColor({luminosity:"dark"})},f=Object.keys(a),angular.forEach(f,function(e){g=h(e),g&&a[e]&&(__env.enableDebug&&console.log(g),"contact_phone1"===g?d.push(c.buildDefaultPhoneObject(a[e],"Mobile")):"contact_phone2"===g?d.push(c.buildDefaultPhoneObject(a[e],"Work")):"contact_phone3"===g?d.push(c.buildDefaultPhoneObject(a[e],"Home")):"contact_phone4"===g?d.push(c.buildDefaultPhoneObject(a[e],"Fax")):b[g]=a[e])}),e={},e.input=b,e.phones=d,i.push(e)}),__env.enableDebug&&console.log(i),i}function h(a){return{firstname:"contact_name_given",lastname:"contact_name_family",contact_phone1:"contact_phone1",contact_phone2:"contact_phone2",contact_phone3:"contact_phone3",contact_phone4:"contact_phone4",email_address:"contact_email_address",notes:"contact_note"}[a]}function i(a){return{contact_name_family:a.input.contact_name_family,contact_name_given:a.input.contact_name_given,phone_number:j(a.phones[0].phone_number)}}function j(a){return a.replace(/[^0-9]/g,"")}return{restrict:"E",templateUrl:"views/company/contact-spreadsheet-importer.html",scope:{},link:function(b,c,j){b.displayLineErrors,b.gridOptions={},b.getNewCsvObj=function(){return{content:null,separator:",",accept:".csv",result:null,encoding:"ISO-8859-1",uploadButtonLabel:""}},b.csv=b.getNewCsvObj(),b.resetCsvInput=function(){angular.element(".csv-import").find("input")[0].value=""},d.rootScopeOn(b,"close.csv",function(){b.resetCsvInput(),a.$broadcast("clear.csv.filename"),angular.copy(b.getNewCsvObj(),b.csv)}),d.rootScopeOn(b,"close.xlsx",function(){angular.copy({},b.gridOptions)}),b.closeMessage=function(){a.successMessage="",a.failureMessage="",b.displayLineErrors=""},b.commonContactFunctions={isValidEmail:e,isValidPhone:f,packageContactsForContactCreation:g,mapContactFieldToPackagedContactField:h,packageContactForHashCheck:i}}}}]).directive("xlsxImportProcessor",["$rootScope","dataFactory","$window","usefulTools","Slug","userContactService","$q","contactGroupsService",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/company/xlsx-import-processor.html",scope:{xlsx:"=",columnDefs:"=",closeMessage:"&",commonContactFunctions:"="},link:function(b,c,d){var e=(b.commonContactFunctions.isValidEmail,b.commonContactFunctions.isValidPhone),g=b.commonContactFunctions.packageContactsForContactCreation;b.commonContactFunctions.mapContactFieldToPackagedContactField,b.commonContactFunctions.packageContactForHashCheck;b.colSelect=[],b.groups=h.groups,b.importDestination,b.requiredFields=["firstname","lastname"],b.phoneOptions=["contact_phone1","contact_phone2","contact_phone3"],b.shapeXlsx=function(){__env.enableDebug&&console.log(b.xlsx)},b.shapeXlsx(),b.colOptions=[{key:"ignore",value:"Ignore"},{key:"firstname",value:"First Name"},{key:"lastname",value:"Last Name"},{key:"email_address",value:"Email Address"},{key:"contact_phone1",value:"Mobile Phone Number",isPhoneField:!0},{key:"contact_phone2",value:"Work Phone Number",isPhoneField:!0},{key:"contact_phone3",value:"Home Phone Number",isPhoneField:!0},{key:"contact_phone4",value:"Fax Number",isPhoneField:!0},{key:"notes",value:"Notes"}],b.endImport=function(){a.$broadcast("close.xlsx")},b.packageContactByRowAndColSelect=function(a){for(var c,d,e={},f=0;f<a.length;f++)c=b.colSelect[f],d=a[f],c&&(e[c]=d);return e},b.cleanPhoneNumber=function(a){return a=a.replace(/[^0-9]/g,""),a.length>10&&(a=a.slice(1,a.length)),a},b.importContacts=function(){var c=[],d=[],e=b.xlsx.data;if(__env.enableDebug&&console.log(e),angular.forEach(e,function(a){var e={};angular.forEach(b.colSelect,function(c,d){var f=a[b.xlsx.columnDefs[d].field];__env.enableDebug&&console.log(f),c&&"ignore"!==c&&(("contact_phone1"===c||"contact_phone2"===c||"contact_phone3"===c||"contact_phone4"===c)&&f&&(f=b.cleanPhoneNumber(f)),e[c]=f)}),__env.enableDebug&&console.log(e),b.validRow(e)?(__env.enableDebug&&console.log("IS VALID"),c.push(e)):(__env.enableDebug&&console.log("SUCKS"),d.push(e))}),d.length>0){var i,j="";angular.forEach(d,function(a){i=(a.firstname?a.firstname+" ":"")+(a.lastname?a.lastname:""),i&&f.addToInvalidContactData(i)}),__env.enableDebug&&console.log(j)}__env.enableDebug&&console.log(c);var k=g(c);__env.enableDebug&&console.log(k),f.batchCreateContacts(k).then(function(a){b.importDestination&&h.addContactsToGroup(a,b.importDestination.group_uuid),b.endImport()}),c.length>100&&(b.endImport(),a.showInfoAlert("Your contacts are importing. Feel free to continue using Bridge while we process them."))},b.addContactsToGroup=function(a){angular.forEach(a,function(a){h.addContactToGroup(a,b.importDestination.group_uuid)}),h.setGroups()},b.validRow=function(a){var c=!0;angular.forEach(b.requiredFields,function(b){a[b]||(c=!1)});var d=!1;return angular.forEach(b.phoneOptions,function(b){d||a[b]&&e(a[b])&&(d=!0)}),d||(c=!1),c}}}}]).directive("csvImportProcessor",["$rootScope","dataFactory","$window","usefulTools","Slug","userContactService","contactGroupsService",function(a,b,c,d,e,f,g){return{restrict:"E",templateUrl:"views/company/csv-import-processor.html",scope:{csv:"=",closeMessage:"&",commonContactFunctions:"="},link:function(b,c,e){function h(a){__env.enableDebug&&console.log(a),angular.forEach(a,function(a){a=d.convertObjectToArray(a)}),b.contactRows=a,b.colHeaders=d.convertObjectToArray(a[0]),__env.enableDebug&&console.log(a),__env.enableDebug&&console.log(b.colHeaders)}var i=(b.commonContactFunctions.isValidEmail,b.commonContactFunctions.isValidPhone),j=b.commonContactFunctions.packageContactsForContactCreation;b.commonContactFunctions.mapContactFieldToPackagedContactField;b.includeFirstRow=!0,b.groups=g.groups,b.importDestination,b.colSelect=[],b.requiredFields=["firstname","lastname"],b.phoneOptions=["contact_phone1","contact_phone2","contact_phone3"],h(b.csv),b.colOptions=[{key:"ignore",value:"Ignore"},{key:"firstname",value:"First Name"},{key:"lastname",value:"Last Name"},{key:"email_address",value:"Email Address"},{key:"contact_phone1",value:"Mobile Phone Number"},{key:"contact_phone2",value:"Work Phone Number"},{key:"contact_phone3",value:"Home Phone Number"},{key:"contact_phone4",value:"Fax Number"},{key:"notes",value:"Notes"}],b.endImport=function(){a.$broadcast("close.csv")},b.packageContactByRowAndColSelect=function(a){for(var c,d,e={},f=0;f<a.length;f++)c=b.colSelect[f],d=a[f],c&&(e[c]=d);return e},b.importContacts=function(){var a=[],c=[],e=b.includeFirstRow?b.csv:b.csv.slice(1,b.csv.length);
if(angular.forEach(e,function(e,f){var g=d.convertObjectToArray(e);__env.enableDebug&&console.log(e);var h={};angular.forEach(b.colSelect,function(a,b){var c=g[b];__env.enableDebug&&console.log(c),a&&"ignore"!==a&&(h[a]=c)}),__env.enableDebug&&console.log(h),b.validRow(h)?(__env.enableDebug&&console.log("IS VALID"),a.push(h)):(__env.enableDebug&&console.log("SUCKS"),c.push(h))}),c.length>0){var h,i="";angular.forEach(c,function(a){h=(a.firstname?a.firstname+" ":"")+(a.lastname?a.lastname:""),h&&f.addToInvalidContactData(h)}),__env.enableDebug&&console.log(i)}var k=j(a);f.batchCreateContacts(k).then(function(a){b.importDestination&&g.addContactsToGroup(a,b.importDestination.group_uuid),b.endImport()})},b.addContactsToGroup=function(a){angular.forEach(a,function(a){g.addContactToGroup(a,b.importDestination.group_uuid)}),g.setGroups()},b.validRow=function(a){var c=!0;angular.forEach(b.requiredFields,function(b){a[b]||(c=!1)});var d=!1;return angular.forEach(b.phoneOptions,function(b){d||a[b]&&i(a[b])&&(d=!0)}),d||(c=!1),c}}}}]).directive("chatPostFilesDisplay",["$rootScope",function(a){return{restrict:"E",templateUrl:"views/chat/chat-post-files-display.html",scope:{post:"<",show:"<"},link:function(b,c,d){b.thumbDimensions=a.thumbDimensions,b.showModalWithData=a.showModalWithData}}}]).directive("chatPostUploadPreview",["$rootScope","newChatService","fileService",function(a,b,c){return{restrict:"E",templateUrl:"views/chat/chat-post-upload-preview.html",scope:{show:"<",uploader:"<",sendMessage:"&"},link:function(a,d,e){a.uploadIsImage=function(a){return c.uploadIsImage(a)},a.max=100,a.$watch("uploader.progress",function(b,c){b!==c&&b>1&&(a.progressBarPercentage=b)}),a.sendMessage=function(){a.uploader.uploadAll()},a.uploader.onSuccessItem=function(c,d,e,f){__env.enableDebug&&console.info("onSuccessItem",c,d,e,f),__env.enableDebug&&console.log("RESPONSE FROM UPLOADING EACH FILE"),__env.enableDebug&&console.log(d),a.progressBarPercentage=0,b.postFiles||(b.postFiles=[]),b.postFiles.push(d.file_infos[0])}}}}]).directive("myNgChange",["$rootScope","fileService","$timeout",function(a,b,c){return{restrict:"A",scope:{ngModel:"<",myNgChange:"&"},link:function(a,b,c){a.$watch("ngModel",function(b,c){b&&b!==c&&a.myNgChange()})}}}]).directive("onEnter",function(){return{restrict:"A",scope:{onEnter:"&"},link:function(a,b,c){b.bind("keydown",function(b){13===b.which&&(b.stopPropagation(),a.onEnter(b))})}}}).directive("simpleUploader",function(){return{restrict:"E",templateUrl:"views/simple-uploader.html",scope:{uploadFn:"&",trigger:"=",accept:"<"},link:function(a,b,c){a.$watch("trigger",function(c,d){c&&c!==d&&(b.find("input")[0].click(),a.trigger=!1)}),a.$watch("fileModel",function(b,c){b&&b!==c&&(a.uploadFn()(b),a.fileModel=null)})}}}).directive("callBox",["callService","$timeout","$rootScope","metaService",function(a,b,c,d){return{restrict:"E",templateUrl:"views/calls/call-box.html",scope:{},link:function(b,e,f){b.startTime,b.dialPadShowing=!1,b.inputNumber="",b.outgoingCall=a.outgoingCall,b.getCurrentCall=function(){if(b.currentCall)return b.currentCall;var c=a.currentCalls()[0];return c?(b.currentCall=c,b.currentCall):null},b.showCallInputBox=function(){return!(a.onCall()||a.calling||b.dialPadShowing||b.showIncomingCallBox()||b.showVideoInvite())},b.showOnCallBox=function(){var c=a.onCall()&&!b.showIncomingCallBox()&&!b.showOnCallDialPad()&&b.getCurrentCall()&&!b.showIncomingCallBox()&&!b.showIncomingCallThreeWay();return c},b.showIncomingCallBox=function(){return 1==a.totalIncomingCalls&&!a.onCall()},b.showIncomingCallThreeWay=function(){return 1==a.totalIncomingCalls&&a.onCall()},b.showIncomingCallsQueue=function(){return!1},b.showDialPad=function(){return b.dialPadShowing&&!a.calling&&!a.onCall()&&!b.showIncomingCallBox()},b.toggleDialPad=function(){b.dialPadShowing=!b.dialPadShowing},b.showOnCallDialPad=function(){return b.onCallDialPadShowing&&a.onCall()},b.toggleOnCallDialPad=function(){b.onCallDialPadShowing=!b.onCallDialPadShowing},b.toggleCallTransfer=function(){b.transferCall=!b.transferCall,angular.element(".mdi").blur()},b.showNormalOnCallDisplay=function(){return!(b.showTransferCallDisplay()||b.showAddCallDisplay()||a.outgoingThreeWayCall()||a.onThreeWayCall())},b.showTransferCallDisplay=function(){return b.transferCall},b.showAddCallDisplay=function(){return b.addCall&&!b.showThreeWayCallDisplay()},b.showOutgoingCallBox=function(){return b.outgoingCall()&&!a.outgoingThreeWayCall()},b.toggleAddCallDisplay=function(){b.addCall=!b.addCall,angular.element(".mdi").blur()},b.showThreeWayCallDisplay=function(){return(a.outgoingThreeWayCall()||a.onThreeWayCall())&&!b.showIncomingCallBox()&&!b.showIncomingCallThreeWay()&&!a.data.transferringCall},b.onCallEndCallback=function(){b.transferCall=!1,b.currentCall=null,b.addCall=!1},a.registerOnCallEndCallback(b.onCallEndCallback),b.showVideoInvite=function(){return b.videoInviteSender&&!b.showThreeWayCallDisplay()&&!b.showOutgoingCallBox()&&!b.showAddCallDisplay()&&!b.showTransferCallDisplay()&&b.showNormalOnCallDisplay()&&!b.showOnCallDialPad()&&!b.showDialPad()&&!b.showIncomingCallsQueue()&&!b.showIncomingCallThreeWay()&&!b.showIncomingCallBox()&&!b.showOnCallBox()},b.endVideoInvite=function(){b.videoInviteSender=null,c.notification&&c.notification.pause()},d.rootScopeOn(b,"video.invite",function(a,c,d){if(c&&d){var e={senderUuid:c,roomUrl:d};b.videoInviteSender=e}}),d.rootScopeOn(b,"video.invite.cancel",function(a,c){c&&b.endVideoInvite()})}}}]).directive("videoInvite",["dataFactory","$rootScope","__env","symphonyConfig","$cookies","$window","userContactService","notificationService","videoConfService","callService",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"views/calls/video-invite.html",scope:{senderData:"=",endInvite:"&"},link:function(a,c,d){if(a.contact=g.getContactByUserUuid(a.senderData.senderUuid),a.contact){a.avatarPath=b.pathImgProfile+a.contact.contact_profile_image;var e={name:a.contact.contact_name_full,phone_number:a.senderData.roomUrl};h.handleIncomingCallNotification(j.onCall(),e)}a.acceptInvite=function(){i.openConference(a.senderData.roomUrl),a.endInvite()},a.declineInvite=function(){a.endInvite()}}}}]).directive("callInputBox",["callService","$rootScope","$window",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/call-input-box.html",scope:{toggleDialPad:"&",inputNumber:"="},link:function(d,e,f){d.makeCall=function(){a.makeCall(d.inputNumber),c.localStorage.setItem("number",d.inputNumber)},d.redialNumber=function(){c.localStorage.getItem("number")&&(d.inputNumber=c.localStorage.getItem("number"))},d.showSmsModal=function(){d.contact12={smsnumber:d.inputNumber},b.showModalWithData("/sms/sendsmstop.html",d.contact12)},a.registerOnCallDialedCallback(function(){d.inputNumber=""})}}}]).directive("dialPadBox",["callService","DialerSvc","$window",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/dial-pad-box.html",scope:{toggleDialPad:"&",inputNumber:"="},link:function(d,e,f){d.makeCall=function(){a.makeCall(d.inputNumber)},d.pad=b.pad,d.rowFrequencies=b.rows,d.colFrequencies=b.cols,d.press=b.press.bind(b),d.release=b.release.bind(b),d.addNumber=function(a){d.inputNumber.length<=13&&(d.inputNumber+=a)},d.removeNumber=function(){d.inputNumber=d.inputNumber.replace(/\D/g,"").slice(0,-1)},d.redialNumber=function(){c.localStorage.getItem("number")&&(d.inputNumber=c.localStorage.getItem("number"))},d.lttBtn=[{id:"1",val:""},{id:"2",val:"ABC"},{id:"3",val:"DEF"},{id:"4",val:"GHI"},{id:"5",val:"JKL"},{id:"6",val:"MNO"},{id:"7",val:"PQRS"},{id:"8",val:"TUV"},{id:"9",val:"WXYZ"},{id:"*",val:""},{id:"0",val:"+"},{id:"#",val:""}]}}}]).directive("onCallDialPadBox",["callService","DialerSvc","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/on-call-dial-pad-box.html",scope:{toggleOnCallDialPad:"&"},link:function(c,d,e){c.pad=b.pad,c.rowFrequencies=b.rows,c.colFrequencies=b.cols,c.press=b.press.bind(b),c.release=b.release.bind(b),c.pressKey=function(b){var c=a.getFirstAnsweredCallNotOnHold();c.dtmf(b)},c.lttBtn=[{id:"1",val:""},{id:"2",val:"ABC"},{id:"3",val:"DEF"},{id:"4",val:"GHI"},{id:"5",val:"JKL"},{id:"6",val:"MNO"},{id:"7",val:"PQRS"},{id:"8",val:"TUV"},{id:"9",val:"WXYZ"},{id:"*",val:""},{id:"0",val:"+"},{id:"#",val:""}]}}}]).directive("outgoingCallBox",["callService","$rootScope",function(a,b){return{restrict:"E",templateUrl:"views/calls/outgoing-call-box.html",scope:{call:"="},link:function(c,d,e){c.pathImgProfile=b.pathImgProfile,c.hangUp=a.hangUpCall}}}]).directive("onCallButtons",["callService","$rootScope",function(a,b){return{restrict:"E",templateUrl:"views/calls/on-call-buttons.html",scope:{toggleOnCallDialPad:"&",toggleCallTransfer:"&",showTransferCallDisplay:"&",toggleAddCallDisplay:"&",showAddCallDisplay:"&",showThreeWayCallDisplay:"&"},link:function(b,c,d){b.muteActive=a.muteActive,b.hangUp=a.hangUpCall,b.muteAllCalls=a.muteAllCalls,b.unMuteAllCalls=a.unMuteAllCalls,b.recordCall=a.recordCall,b.recordingActive=a.recordingActive,b.stopRecording=a.stopRecording,b.onHold=a.onHold,b.holdCall=a.holdCall,b.unHoldCall=a.unHoldCall,b.isConferenceCall=function(){return a.currentCalls().length>0?a.currentCalls()[0].isConferenceCall:null},b.mergeCalls=function(){var b=a.currentCalls(),c=b[0].callID,d=b[1].callID;a.mergeThreeWayCall(c,d)}}}}]).directive("incomingCallBox",["callService","$timeout","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/incoming-call-box.html",scope:{},link:function(b,d,e){b.pathImgProfile=c.pathImgProfile,b.getCurrentIncomingCall=function(){var b=a.incomingCalls();return b[0]},b.call=b.getCurrentIncomingCall(),b.answerCall=function(b){a.answerCall(b.callID)},b.sendToVoicemail=function(b){a.sendToVoicemail(b.callID)},b.declineCall=function(b){a.declineCall(b.callID)}}}}]).directive("incomingCallThreeWay",["callService","$timeout",function(a,b){return{restrict:"E",templateUrl:"views/calls/incoming-call-three-way.html",scope:{call:"="},link:function(b,c,d){b.getCurrentIncomingCall=function(){var b=a.incomingCalls();return b[0]},b.incomingCall=b.getCurrentIncomingCall(),b.answerCall=function(b){a.answerCall(b.callID)},b.sendToVoicemail=function(b){a.sendToVoicemail(b.callID)},b.declineCall=function(b){__env.enableDebug&&console.log(b),a.declineCall(b.callID)}}}}]).directive("normalOnCallDisplay",["callService","userContactService","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/normal-on-call-display.html",scope:{call:"="},link:function(a,b,d){a.pathImgProfile=c.pathImgProfile}}}]).directive("addCallDisplay",["callService",function(a){return{restrict:"E",templateUrl:"views/calls/add-call-display.html",scope:{call:"=",toggleAddCallDisplay:"&"},link:function(b,c,d){b.addCall=function(){a.addCall(b.inputNumber)}}}}]).directive("transferCallDisplay",["callService","$timeout","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/transfer-call-display.html",scope:{call:"=",toggleCallTransfer:"&"},link:function(b,c,d){b.type="supervised",b.callServiceData=a.data,b.hangUpCall=function(){a.hangUpCall(),b.inputNumber=""},b.transferCall=function(){"supervised"===b.type?a.initiateSupervisedTransfer(b.inputNumber):"blind"===b.type&&a.blindTransfer(b.inputNumber)},b.confirmTransfer=function(){a.confirmSupervisedTransfer()},b.cancelTransfer=function(){if(b.callServiceData.transferringCall){var c=a.getSupervisedTransferRecipientCallId();c&&a.hangUpCallById(c.callID),b.callServiceData.transferringCall=!1,b.toggleCallTransfer()()}else b.toggleCallTransfer()()}}}}]).directive("threeWayCallDisplay",["callService","usefulTools","$window",function(a,b,c){return{restrict:"E",templateUrl:"views/calls/three-way-call-display.html",scope:{},link:function(c,d,e){c.calls=function(){var c=a.currentCalls();if(a.outgoingThreeWayCall()){var d=a.outgoingThreeWayCall();return c=c.filter(function(a){return!!a.startTime}),b.spreadArrayAndArg(c,d)}return c},c.hangUpCallById=function(b){a.hangUpCallById(b),a.onHold()&&a.unHoldCall()},c.toggleCallHold=function(b){b.onHold?a.unHoldCallById(b.callID):a.holdCallById(b.callID)},c.mergeCalls=function(){var b=c.calls(),d=b[0].callID,e=b[1].callID;a.mergeThreeWayCall(d,e)},c.hangUpCallBeforeAnswer=function(b){angular.forEach(a.currentCalls(),function(d){d.params.remote_caller_id_number===b.number&&(a.hangUpCallById(d.callID),c.calls())})},c.swap=a.swap,c.onConferenceCall=a.onConferenceCall,c.swapButtonStyle=function(){return c.onConferenceCall()?{width:"100%"}:{}}}}}]).directive("queueIncomingCallsDisplay",["callService",function(a){return{restrict:"E",templateUrl:"views/calls/queue-incoming-calls-display.html",scope:{call:"="},link:function(a,b,c){}}}]).directive("searchCommunications",["$timeout","$rootScope","dataFactory","ngAudio","symphonyConfig","audioLibraryService",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"views/communications.html",scope:{domain:"<"},link:function(a,c,d){b.userContacts||(b.userContacts=JSON.parse($window.localStorage.getItem("userContacts"))),a.search||(a.search={},a.search.channel||(a.search.channel={},a.search.channel.text=!0,a.search.channel.calls=!0)),a.onCloseModal=function(){b.$broadcast("ringtones.modal.closed")},a.$watchGroup(["callRingtone","textRingtone","chatRingtone"],function(b,c){a.stopRingtone()})}}}]).directive("emulateProfileEdit",["callService",function(a){return{restrict:"E",templateUrl:"views/company/emulate-profile-edit.html",scope:{user:"="},link:function(a,b,c){}}}]).directive("userProfileEdit",["callService","$rootScope","userContactService","$timeout","userService","dataFactory",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"views/settings/user-profile-edit.html",scope:{user:"<",uploader:"<",triggerUpload:"&",uploaderOption:"<"},link:function(a,d,e){a.init=function(){a.avatarPath=a.user&&a.user.profile_image?b.pathImgProfile+a.user.profile_image:null,c.registerOnProfileImageChange(function(c,d){(d.contact_uuid===a.user.contact_uuid||d.user_uuid===a.user.id)&&(a.avatarPath=d.contact_profile_image?b.pathImgProfile+d.contact_profile_image:null,b.$broadcast("contact.user.image.changed",d))})},c.contacts.length>0?a.init():c.registerOnContactLoadCallback(function(){a.init()}),a.triggerContactUpload=function(){b.uploadUser=a.user,a.triggerUpload()}}}}]).directive("adminView",["callService","$window","dataFactory","$rootScope","userContactService","timeKeeperService","$timeout","userService",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/timeclockpro/adminview.html",scope:{contacts:"<"},link:function(a,b,g){a.init=function(){a.contacts=e.userContactsOnly,console.log(a.contacts),d.tkusersList=f.tkUsers},a.selectedContact=null,e.contacts.length>0?a.init():e.registerOnContactLoadCallback(function(){a.init()}),a.clearFilter=function(){a.search.contact_name_full=""},a.predicate="contact_name_full",a.reverse=!1,a.sort_by=function(b){a.predicate=b,a.reverse=!a.reverse},a.tkusers=f.tkUsers,a.addUser=function(a,b){console.log(a,b);var d={status:b,userUuid:a};c.addTimeKeeperUser(d).then(function(a){a.data.success},function(a){console.log(a)})},a.getTabClass=function(a){},a.setActiveTab=function(b){a.selectedContact=b,a.setpay=!0,a.setfrequency=!0,angular.forEach(d.tkusersList,function(c){c.user_uuid==b.user_uuid&&(0!=c.user_rate?(a.setpay=!1,a.changepay=!0,a.setpayinput=!1):a.setpay=!0,0!=c.screenshot_frequency&&null!=c.screenshot_frequency?(a.setfrequency=!1,a.changefrequency=!0,a.setfrequencyinput=!1,a.enabled=!0):(a.setfrequency=!0,a.enabled=!1),a.selectedContact=c)})},a.setpay=!0,a.setfrequency=!0,a.setPayRateInput=function(){a.setpay=!1,a.setpayinput=!0},a.setPayRate=function(){a.setpay=!0,a.setpayinput=!1},a.changePayRate=function(b){a.setpay=!1,a.setpayinput=!1;var d={user_uuid:b.user_uuid,payrate:b.user_rate};c.setPayRate(d).then(function(a){a.data.success},function(a){console.log(a)})},a.changePayInput=function(){a.setpayinput=!0,a.changepay=!1},a.setFrequencyInput=function(){a.setfrequencyinput=!0,a.setfrequency=!1},a.setFrequency=function(){a.setfrequency=!0,a.setfrequencyinput=!1},a.changeFrequency=function(b){a.setfrequency=!1,a.setfrequencyinput=!1;var d={user_uuid:b.user_uuid,screenshot_frequency:b.screenshot_frequency};c.setFrequency(d).then(function(a){a.data.success})},a.disableScreenshot=function(b){if(a.enabled=!a.enabled,a.enabled){var d={user_uuid:b.user_uuid,screenshot_frequency:b.screenshot_frequency};c.setFrequency(d).then(function(a){a.data.success})}else{var d={user_uuid:b.user_uuid,screenshot_frequency:0};c.setFrequency(d).then(function(a){a.data.success})}},a.changeFrequencyInput=function(){a.setfrequencyinput=!0,a.changefrequency=!1},a.toggleManager=function(a){console.log(a),a.isManager&&c.createTkManager(a.user_uuid).then(function(a){})},a.createUpdateGroup=function(a){d.showModalFull("/timeclockpro/createupdategroup.html",{manager:a},"lg")}}}}]).directive("myTeam",["$rootScope","$cookies","$window","$timeout","$location","userContactService","dataFactory","timeKeeperService",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/timeclockpro/myteam.html",scope:{user:"<"},link:function(b,c,g){b.init=function(){b.contacts=f.userContactsOnly,console.log(b.contacts),b.selectedContact=b.contacts[0]},f.contacts.length>0?b.init():f.registerOnContactLoadCallback(function(){b.init()}),a.tkusers=h.tkUsers,b.tkusersList=h.tkUsers,b.getTodaysData=function(){},b.clearFilter=function(){b.search.contact_name_full=""},b.predicate="contact_name_full",b.reverse=!1,b.sort_by=function(a){b.predicate=a,b.reverse=!b.reverse},b.thumbnailUrl=function(b){return a.onescreenBaseUrl+"/timeclockpro/screenshot/thumb/"+b.time_keeper_screenshot_uuid+"/"+b.domain_uuid+"?token="+a.userToken},b.showTimeLine=function(c){b.user=c,e.path("/timeclockpro"),d(function(){a.$broadcast("set.timeline.tab",{user:b.user})})}}}}]).directive("timelineView",function(){return{restrict:"E",templateUrl:"views/timeclockpro/timeline-view.html"}}).directive("teamSettings",function(){return{restrict:"E",templateUrl:"views/timeclockpro/team-settings.html"}}).directive("outOfOfficeSettings",["$rootScope","dataFactory","metaService",function(a,b,c){return{restrict:"E",templateUrl:"views/settings/out-of-office-settings.html",scope:{user:"<"},link:function(d,e,f){d.init=function(){d.currentStatus="true"===d.user.outOfOfficeStatus?!0:!1,d.response=d.user.outOfOfficeResponse},c.registerOnRootScopeUserLoadCallback(function(){d.init()}),d.setOutOfOfficeStatus=function(){b.getSetOutOfOfficeStatus(d.currentStatus,a.user.id).then(function(b){if(b.data.success){var c=b.data.success.data;d.currentStatus="true"===c?!0:!1,d.user.id===a.user.id&&(a.user.outOfOfficeStatus=c)}else a.showErrorAlert(b.data.error.message)},function(b){a.showErrorAlert(b.data.message)})},d.updateResponse=function(){b.getSetOutOfOfficeResponse(d.response,a.user.id).then(function(b){b.data.success?a.showSuccessAlert("You have successfully updated your response"):a.showErrorAlert(b.data.error.message)},function(b){a.showErrorAlert(b.data.message)})}}}}]).directive("infiniteScroll",["$window","$interval","$timeout",function(a,b,c){return{restrict:"A",scope:{nearEndCallback:"&",contactListInfo:"="},link:function(a,b,c){}}}]).directive("contactList",["$window","$interval","$timeout","$filter","$rootScope","videoConfService","emailService","callService","metaService","newChatService","$location","$uibModalStack",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"E",templateUrl:"views/contact-list.html",scope:{contactType:"<",contacts:"<",limit:"<",searchText:"<",filterForGroups:"&",contactListInfo:"=",contactGroups:"<"},link:function(a,b,m){function n(a){return a.user_uuid!==e.user.id}a.setProfileColor=e.setProfileColor,a.pathImgProfile=e.pathImgProfile,a.showEditContactForm=e.showEditContactForm,a.toggleContactasFavorite=e.toggleContactasFavorite,a.showModalWithData=e.showModalWithData,a.startDirectMessageFromContact=function(b){var c=j.getDMChannelByUserId(b.chat_id),d=j.teamMembers[b.chat_id];c?(a.openChannel(c),a.createDirectMessage(d)):a.createDirectMessage(d)},a.openChannel=function(a){k.path("/chatplus"),j.setCurrentChannel(a)},a.showicon=e.showicon,a.contactHeadingClicked=e.contactHeadingClicked,a.sendVideoInvite=f.sendVideoInvite,a.makeCall=h.makeCall,a.startEmailClient=function(a){g.startEmailClient(a)},a.createDirectMessage=function(b){console.log(b);var c=j.getDMChannelByUserId(b.id);c&&!c.showDirect?(k.path("/chatplus"),j.activateDirectChannel(c,b.id),e.showSuccessAlert("Your direct message channel has been created."),l.dismissAll()):c||j.createDirectChannel(b).then(function(b){console.log(b),b?(a.openChannel(b),e.showSuccessAlert("Your direct message channel has been created.")):e.showErrorAlert("There was a problem creating the direct message channel."),l.dismissAll()})},a.searchContacts=function(b){if(!a.searchText||-1!=b.contact_name_given.toLowerCase().indexOf(a.searchText.toLowerCase())||-1!=b.contact_name_family.toLowerCase().indexOf(a.searchText.toLowerCase()))return!0;if(b.phones.length>0){var c=!1;if(angular.forEach(b.phones,function(b){-1!=b.phone_number.indexOf(a.searchText)&&(c=!0)}),c===!0)return!0}return!1},a.limit=20,"group"!==a.contactType&&i.rootScopeOn(a,"contact.list.update",function(){c(function(){a.filteredContacts()})}),a.beginIndex=0,a.searchBeginIndex=0,a.$watch("searchText",function(b,c){c&&!b&&(a.searchBeginIndex=0)}),a.addMoreContacts=function(){a.searchText?a.searchBeginIndex+=a.limit:a.beginIndex+=a.limit},a.showPreviousContacts=function(){a.beginIndex-=a.limit},"group"!==a.contactType?a.filteredContacts=function(){var b,c=a.contacts;return c=d("orderBy")(c,"contact_name_given"),c=d("filter")(c,a.searchContacts),"user"===a.contactType?c=d("filter")(c,{contact_type:"user"}):"nonUser"===a.contactType&&(c=d("filter")(c,{contact_type:"!user"})),c=d("filter")(c,a.filterForGroups()),e.favoritesFilter&&(c=d("filter")(c,{favorite:!0})),b=a.searchText?a.searchBeginIndex+a.limit:a.beginIndex+a.limit,a.lastLength=c.length-b,c=a.searchText?c.slice(a.searchBeginIndex,b):c.slice(a.beginIndex,b),c=c.filter(n)}:a.filteredGroupContacts=function(b){var c;return b=d("orderBy")(b,"contact_name_given"),b=d("filter")(b,a.searchContacts),a.favoritesFilter&&(b=d("filter")(b,{favorite:!0})),c=a.searchText?a.searchBeginIndex+a.limit:a.beginIndex+a.limit,a.lastLength=b.length-c,b=a.searchText?b.slice(a.searchBeginIndex,c):b.slice(a.beginIndex,c),b=b.filter(n)}}}}]),proySymphony.directive("smsresize",["$window",function(a){function b(b,c,d){b.$watch(function(){b.smsstyle={height:a.innerHeight-165-c[0].offsetHeight+"px"}})}return{restrict:"AE",link:b}}]).directive("smsEnter",["$rootScope",function(a){return function(a,b,c){b.bind("keydown",function(b){13===b.which&&(b.stopPropagation(),b.preventDefault(),a.$apply(function(){a.$eval(c.smsEnter,{e:b})}))})}}]).directive("smsMessage",["__env","symphonyConfig","usefulTools","smsService","$rootScope","$filter",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"views/sms/sms-message.html",scope:{message:"<",copyText:"<",scrollToBottom:"&",removeMessage:"&"},link:function(c,g,h){c.thumbDimensions=e.thumbDimensions,c.isEmulatedUser=e.isEmulatedUser,c.showModalWithData=e.showModalWithData,c.currentThread=d.smsData.currentThread,c.currentUser=d.currentUser,c.imageBaseUrl=(a.apiUrl&&""!==a.apiUrl?a.apiUrl:b.onescreenUrl)+"/imported/freeswitch/storage/avatars/",c.mediaUrl=a.apiUrl&&""!==a.apiUrl?a.apiUrl:b.onescreenUrl,c.getFileName=function(a){var b=a.url.split("/"),c=b.pop();return c.length>30&&(c=c.substr(0,15)+"..."+c.substr(c.length-15)),c},c.showMediaType=function(a){var b=a.url.split("/").pop(),c=b.split(".").pop();return c?f("uppercase")(c):f("uppercase")(a.mime_type)}}}}]).directive("smsContact",["$uibModalStack","__env","symphonyConfig","usefulTools","smsService","userContactService","$rootScope","$filter",function(a,b,c,d,e,f,g,h){return{restrict:"E",templateUrl:"views/sms/sms-contact.html",scope:{contact:"<"},link:function(a,d,f){a.currentThread=e.smsData.currentThread,a.pathImgProfile=g.pathImgProfile,a.imageBaseUrl=(b.apiUrl&&""!==b.apiUrl?b.apiUrl:c.onescreenUrl)+"/imported/freeswitch/storage/avatars/",a.showAddContactForm=g.showAddContactForm,a.showEditContactForm=g.showEditContactForm}}}]).directive("smsSearchMessageDisplay",["$rootScope","smsService","$timeout",function(a,b,c){return{restrict:"E",templateUrl:"views/sms/sms-search-message-display.html",scope:{search:"=",sendSearch:"&",closeDisplay:"&"},link:function(a,c,d){console.log(a.search),a.showMessageInThread=function(c){console.log(c),a.search.highlightMessage=c.message_uuid,b.goToSearchResult(c).then(function(){})}}}}]).directive("smsSearchResult",["smsService","userContactService","$rootScope",function(a,b,c){return{restrict:"E",templateUrl:"views/sms/sms-search-result.html",scope:{message:"<",showMessageInThread:"&"},link:function(a,b,c){console.log(a.message),a.setTextClass=function(a){return"in"==a.message_direction?"textmessage talk-bubble tri-right round border left-in incoming clearfix pull-left":"textmessage talk-bubble tri-right round border right-in outgoing clearfix pull-right"}}}}]).directive("smsMessageUploadPreview",["$rootScope","smsService","fileService",function(a,b,c){return{restrict:"E",templateUrl:"views/sms/sms-message-upload-preview.html",scope:{uploader:"<",totalSize:"<",deliverSmsMessage:"&"},link:function(a,b,d){a.uploadIsImage=function(a){return c.uploadIsImage(a)},a.max=100,a.$watch("uploader.progress",function(b,c){b!==c&&b>1&&(a.progressBarPercentage=b)})}}}]).directive("blacklistTable",["$timeout","$rootScope","$uibModalStack","$filter","smsService","smsApi",function(a,b,c,d,e,f){return{restrict:"E",templateUrl:"views/sms/blacklist-table.html",scope:{input:"<"},link:function(a,c,g){a.showBlTable=!1,a.closeModal=a.input.closeModal,a.tips=b.tips,a.blacklist={reach:"domain",numberToAdd:null},a.userUuid=b.selectEmulateUser?b.selectEmulateUser:b.user.id,f.getBlacklistedNumbers(a.userUuid).then(function(b){return b.data.success?(__env.enableDebug&&console.log(b.data.success.data),a.showBlTable=!0,a.blacklistedNumbers=b.data.success.data,void 0):(__env.enableDebug&&console.log(b.data.error.message),[])}),a.cancelAdd=function(){a.blacklist={reach:"domain",numberToAdd:null},a.showAddForm=!a.showAddForm},a.removeBlacklist=function(c){f.getRemoveBlacklist(c.sms_blacklist_uuid).then(function(f){if(__env.enableDebug&&console.log(f.data),f.data.success){var g=d("getByUUID")(a.blacklistedNumbers,c.sms_blacklist_uuid,"sms_blacklist");null!==g&&a.blacklistedNumbers.splice(g,1),e.getSmsThreads(a.userUuid)}else __env.enableDebug&&console.log(f.data.error.message),b.showErrorAlert(f.data.error.message)})},a.searchBlNumbers=function(b){return a.blacklistSearch&&-1===b.number.indexOf(a.blacklistSearch.toLowerCase())?!1:!0},a.blacklistNumber=function(b){e.blacklistNumber(b.numberToAdd,b.reach).then(function(b){a.blacklistedNumbers.push(b.blacklist),a.showAddForm=!a.showAddForm}),a.blacklist.numberToAdd="",a.blacklist.reach="domain"}}}}]),proySymphony.filter("reverse",function(){return function(a){return a&&a.length>0?a.reverse():a}}).filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}).filter("getByName",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].name==b)return a[c];return null}}).filter("objLength",function(){return function(a){var b=0;for(var c in a)b++;return b}}).filter("getPrefIndexByCategoryandName",function(){return function(a,b,c){if(a){var d=0,e=a.length;for(d;e>d;d++)if(a[d].name==c&&a[d].category==b)return d}return null}}).filter("getPrefByCategoryandName",function(){return function(a,b,c){if(a){var d=0,e=a.length;for(d;e>d;d++)if(a[d].name==c&&a[d].category==b)return a[d]}return null}}).filter("getPrefValueByCategoryandName",function(){return function(a,b,c){if(a){var d=0,e=a.length;for(d;e>d;d++)if(a[d].name==c&&a[d].category==b)return a[d].value}return null}}).filter("getChannelByDmProfileId",["$rootScope",function(a){return function(b,c){if(b){var d=0,e=b.length;for(d;e>d;d++)if(-1!==b[d].name.indexOf(c)&&-1!=b[d].name.indexOf(a.mmProfile.id))return b[d]}return null}}]).filter("split",function(){return function(a,b,c){return a?a.split(b)[c]:a}}).filter("splittoarray",function(){return function(a,b){return a.split(b)}}).filter("emojis",["$rootScope",function(a){return function(b){return b||(b=""),a.emojisInitialized?wdtEmojiBundle.render(b):b}}]).filter("nl2br",["$sanitize",function(a){var b=/xhtml/i.test(document.doctype)?"<br />":"<br>";return function(c){return c=(c+"").replace(/(\r\n|\n\r|\r|\n|&#10;&#13;|&#13;&#10;|&#10;|&#13;)/g,b+"$1"),a(c)}}]).filter("callouts",["$rootScope","chatService","newChatService",function(a,b,c){return function(a){if(a){String.prototype.replaceAll=function(a,b){return this.split(a).join(b)},angular.forEach(c.teamMembers,function(b){var c="@"+b.username;a=a.replaceAll(c,'<a href="" ng-click="showMember($event, \''+b.id+"')\">"+c+"</a>")});var b,d;angular.copy(c.publicChannels,b),angular.copy(c.privateChannels,d);var e=_.merge(b,d);angular.forEach(e,function(b){var c="#"+b.name;a=a.replaceAll(c,'<a href="" ng-click="setChannel(\''+b.id+"')\">"+c+"</a>")});var f="@channel";a=a.replaceAll(f,"<strong>"+f+"</strong>");var f="@here";a=a.replaceAll(f,"<strong>"+f+"</strong>");var f="@everyone";return a=a.replaceAll(f,"<strong>"+f+"</strong>")}return void 0}}]).filter("extension",function(){return function(a){var b=a.split(".");return b[b.length-1]}}).filter("numKeys",function(){return function(a){if(a){var b=Object.keys(a);return b.length}return null}}).filter("getById",function(){return function(a,b){if(a){var c=0,d=a.length;for(c;d>c;c++)if(a[c].id==b)return a[c]}return null}}).filter("getIndexByUserId",function(){return function(a,b){if(a){var c=0,d=a.length;for(c;d>c;c++)if(a[c].user_id==b)return c}return null}}).filter("getByChannelId",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].channel_id==b)return a[c];return null}}).filter("getIndexByChannelId",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].channel_id==b)return c;return null}}).filter("getOutCallbyExt",["$filter",function(a){return function(b,c){var d=0,e=b.length;for(d;e>d;d++){var f=a("split")(b[d].ext[0],"@",0);if(f===c)return b[d]}return null}}]).filter("getInCallbyExt",function(){return function(a,b){if(!a)return null;var c=0,d=a.length;for(c;d>c;c++){var e=a[c].onCallWithNum[0];if(e===b)return a[c]}return null}}).filter("secondsToDateTime",[function(){return function(a){return new Date(1970,0,1).setSeconds(a)}}]).filter("getNonContact",function(){return function(a,b){if(!a)return null;var c=0,d=a.length;for(c;d>c;c++){if(null!==a[c].phone&&null!==b.phone&&a[c].phone==(b.phone.length>10?b.phone.substr(-10):b.phone))return a[c];if(a[c].email&&null!==b.email&&null!==a[c].email&&a[c].email.toLowerCase()==b.email.toLowerCase())return a[c]}return null}}).filter("getByUUID",function(){return function(a,b,c){if(!a)return null;var d=c+"_uuid",e=0,f=a.length;for(e;f>e;e++)if(a[e][d]===b)return e;return null}}).filter("getItemByUUID",function(){return function(a,b,c){if(!a)return null;var d=c+"_uuid",e=0,f=a.length;for(e;f>e;e++)if(a[e][d]===b)return a[e];return null}}).filter("getVoicemailByUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(-1!==a[c].indexOf(b))return a[c];return null}}).filter("getGroupIndexbyUUID",function(){return function(a,b,c){var d=0,e=a.length;for(d;e>d;d++)if(a[d][c+"group_uuid"]==b)return d;return null}}).filter("getHistoryIndexbyUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].uuid==b)return c;return null}}).filter("getVCInviteIndexbyUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].video_conference_invite_uuid==b)return c;return null}}).filter("getGroupbyUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].group_uuid==b)return a[c];return null}}).filter("getIndexbyUUID",function(){return function(a,b){
if(a){var c=0,d=a.length;for(c;d>c;c++)if(a[c].contact_uuid==b)return c}return null}}).filter("getAttendantbyUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].ivr_menu_uuid==b)return c;return null}}).filter("getContactbyUUID",function(){return function(a,b){if(a){var c=0,d=a.length;for(c;d>c;c++)if(a[c].contact_uuid==b)return a[c]}return null}}).filter("getContactbyMMID",function(){return function(a,b){if(a){var c=0,d=a.length;for(c;d>c;c++)if(a[c].chat_id&&a[c].chat_id&&a[c].chat_id===b)return a[c]}return null}}).filter("checkIfManager",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].user_uuid===b)return!0;return!1}}).filter("getContactbyUserUUID",function(){return function(a,b){if(a){var c=0,d=a.length;for(c;d>c;c++)if("user"===a[c].contact_type&&a[c].user_uuid==b)return a[c]}return null}}).filter("getContactbyExtension",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].user_ext&&a[c].user_ext==b)return a[c];return null}}).filter("getContactbyEmail",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].contact_email_address&&a[c].contact_email_address==b)return a[c];return null}}).filter("getThreadByPhone",function(){return function(a,b){var c=null;if(a&&b){var d=b&&b.length>4&&b.length<11?"1"+b:b;angular.forEach(a,function(a){c||a.contact_phone_number!=d||(c=a)})}return c}}).filter("getContactbyPhone",function(){return function(a,b){if(a){var c=0,d=a.length,e=b&&b.length>10?b.replace(/-/g,"").substr(-10):b?b.replace(/-/g,""):null;for(c;d>c;c++){if(a[c].user_ext===e)return a[c];var f=a[c].phones;if(!f)return null;var g=0,h=f.length;for(g;h>g;g++)if(f[g].phone_number===e)return a[c]}}return null}}).filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;b>c;c++)a.push(c);return a}}).filter("getContactsbyPhone",function(){return function(a,b){if(a){var c=0,d=a.length,e=b&&b.length>10?b.substr(-10):b,f=[];for(c;d>c;c++){a[c].user_ext==e&&f.push(a[c]);var g=a[c].phones,h=0,i=g?g.length:null;for(h;i>h;h++)g[h].phone_number==e&&f.push(a[c])}if(f.length>0)return f}return null}}).filter("getSettingValueByName",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].contact_setting_name==b)return a[c].contact_setting_value;return null}}).filter("getFilebyUUID",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].file_uuid==b)return a[c];return null}}).filter("getArrayFromObject",function(){return function(a){var b=0,c=a.length;for(b;c>b;b++)if(a[b].contact_setting_name==name)return a[b].contact_setting_value;return null}}).filter("getIndexById",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].id==b)return c;return null}}).filter("getPrefByName",function(){return function(a,b){var c=0,d=a.length;for(c;d>c;c++)if(a[c].name==b)return c;return null}}).filter("tel",function(){return function(a){if(!a)return"";var b=a.toString().trim().replace(/^\+/,"");if(b.match(/[^0-9]/))return a;var c,d,e;switch(b.length){case 10:c=1,d=b.slice(0,3),e=b.slice(3);break;case 11:c=b[0],d=b.slice(1,4),e=b.slice(4);break;case 12:c=b.slice(0,3),d=b.slice(3,5),e=b.slice(5);break;default:return a}return 1==c&&(c=""),e=e.slice(0,3)+"-"+e.slice(3),(c+" ("+d+") "+e).trim()}}).filter("callerId",["$filter",function(a){return function(b){if(b){var c=b.replace(/[^0-9]/g,"").length;return c>=10?a("tel")(b):b}return null}}]).filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}).filter("tel2",function(){return function(a){if(!a)return"";var b=a.toString().trim().replace(/^\+/,"");if(b.match(/[^0-9]/))return a;var c,d;if(a.length>5){switch(b.length){case 1:case 2:case 3:c=b;break;default:c=b.slice(0,3),d=b.slice(3)}return d?(d=d.slice(0,3)+"-"+d.slice(3,7),("("+c+") "+d).trim()):c}return a}}).filter("stringDateToDate",["$filter",function(a){return function(b){var c=new Date(b.replace(/-/g,"/"));return a("date")(c,"MMM dd, yyyy h:mm a")}}]).filter("tzFormatted",["$filter",function(a){return function(b){var c=a("amTimezone")(b,"NewYork");return a("amDateFormat")(c,"MMM DD, YYYY H:MM A")}}]).filter("groupIsHidden",["$filter",function(a){return function(a){return a.filter(function(a){return!a.hidden})}}]).filter("timestamp",["$filter",function(a){return function(a){return new Date(a).getTime()}}]).filter("toLocalTime",["$filter","$rootScope",function(a,b){return function(a){if(a){var c=moment.tz(a,"America/New_York");b.user.settings.timezone&&(c=c.clone().tz(b.user.settings.timezone))}return c}}]).filter("toEasternTime",["$filter","$rootScope",function(a,b){return function(a){var c=moment.tz(a.toString(),b.user.settings.timezone);return c=c.clone().tz("America/New_York")}}]).filter("getTimezone",["$filter","$rootScope",function(a,b){return function(a){var c=null;return angular.forEach(b.timeZones,function(b){b.display===a&&(c=b.timezone)}),c}}]).filter("arrayDiff",function(){return function(a,b){var c,d,e=[],f=Array.prototype.slice.call(arguments,2);for(c=0;c<a.length;c++)d=a[c],(b.indexOf(d)<0||f.indexOf(d)>=0)&&e.push(d);return e}}),proySymphony.service("tooltipsService",["$rootScope",function(a){var b={tips:{}};return b.tips.autoattendant={holidaysavechanges:"Save Changes to Holiday",holidayremoverecord:"Remove Holiday",holidayeditrecord:"Edit Holiday",holidaycancelediting:"Cancel Editing Holiday",editattendant:"Edit This Attendant",cloneattendant:"Clone This Attendant",deleteattendant:"Delete This Attendant",schedulestatus:"Has the schedule been populated?",menuoptionsstatus:"Have the menu options been created?",greetingstatus:"Has the attendant greeting been set?",voicemailstatus:"Has the voicemail been configured for the number?",changerespondsto:"Change the Responds To number for the attendant",editringgroup:"Edit This Ring Group",cloneringgroup:"Clone This Ring Group",deleteringgroup:"Delete This Ring Group",restartringgroup:"Restart This Ring Group",ordernewsecondary:"Order a new number",savenewsecondary:"Save new secondary number",cancelnewsecondary:"Cancel new secondary number",deletesecondary:"Delete secondary number"},b.tips.numberporting={deletedid:"Delete Did",cancelport:"Cancel Number Porting",porting:"Click to set porting to completed",sortbyactiveusers:"Sort by number of active users",sortbycode:"Sort by Group Code",sortbydomain:"Sort by domain name",sortbycompany:"Sort by company name",sortbydate:"Sort by creation date",sortbycodestatus:"Sort by code status",sortbycodetype:"Sort by code type",sortbynumber:"Sort by number",sortbynumbertype:"Sort by number type",sortbyportstatus:"Sort by port status",sortbystatus:"Sort by number status",deleteringgroup:"Delete This Ring Group",restartringgroup:"Restart This Ring Group"},b.tips.contacts={contact_name_prefix:"Contact Name Prefix",contact_name_given:"Contact Given Name",contact_name_family:"Contact Family Name",contact_name_suffix:"Contact Name Suffix",contact_email_address:"Contact Email Address",contact_organization:"Contact Organization",contact_title:"Contact Job Title",contact_nickname:"Contact Nickname",contact_time_zone:"Choose a Time Zone",contact_type:"Specify a Contact Type",contact_category:"Specify if Contact is Flagged as a Favorite",phone_label:"Phone Label",phone_number:"Phone Number",phone_extension:"Phone Extension",phone_type_voice:"Use for Voice",phone_type_fax:"Use for Fax",phone_type_text:"Use for SMS Text",phone_type_video:"Use for Video",add_phone_line:"Add another Phone Line",contact_notes:"Submit notes about this contact ...",addcontact:"Add to Contacts",callcontact:"Call Contact"},b.tips.vfax={viewfax:"View Preview of Sent Fax",resend:"Resend Fax to Original Recipient"},b.tips.adv={conference:"Click to work with Conference Calls",callcenter:"Click to open the Call Center",screenshare:"Click to open Screen Sharing",videocalls:"Click to open Video Calling",fileshare:"Click to open File Sharing",fax:"Click to open Faxing",automated:"Click to open Automated Marketing",cloudstorage:"Click to open Cloud Storage",callrecording:"Click to open Call Recording"},b.tips.chat={leave_direct_message:"Hide this Direct Message channel",create_channel:"Create a new Channel",create_direct_message:"Open a Direct Message ..."},b.tips.requestfiles={editlink:"Edit link options",removelink:"Remove link",copylink:"Copy link to clipboard",emaillink:"Send link to an Email Address",accessexpiry:"Link will be active for this period of time"},b.tips.storeandshare={search:"Search you cloud files",sharefiles:"Share file(s) with your contact(s)",close_search:"Close Search Results",jump_to_result:"Go To Result",submit_search:"Search for a file or folder matching a string"},b.tips.automated={schedule_start_date:"Start Date for Campaign Message",schedule_description:"Descriptor for Campaign Message",schedule_start_time:"Start Time for Campaign Message",save_schedule:"Save changes to this Campaign Message",remove_schedule:"Remove this Message from the Campaign",add_schedule:"Add New Campaign Message",schedule_ready:"Required fields are complete for this message",schedule_notready:"Some required fields are missing for this message",show_details:"Show configuration details for this message",sortbyemailaddress:"Sort by Email Address",sortbyname:"Sort by Name",sortbyfirstname:"Sort by First Name",sortbylastname:"Sort by Last Name",sortbyphonenumber:"Sort by Phone Number",sortbydeliverystatus:"Sort by Delivery Status",sortbyinteraction:"Sort by Recipient Response",removecontact:"Remove this recipient from the campaign",editcontact:"Edit this recipient's information",canceleditcontact:"Cancel editing this recipient",savecontact:"Save changes to this recipient",importxlsx:"Import an xlsx, xls, or ods file",insertshortcodesms:"Insert shortcode into sms message",insertshortcodeemail:"Insert shortcode into email message",importcsv:"Import a .csv file with recipient information",message_not_ready:"Details are still needed for this message before the campaign can be started.",message_ready:"All required details are complete for this message."},b.tips.fileshare={resendfileshare:"Resend download link",sendanemail:"Send an email to ",downloadfile:"Download a copy of the file",share_expired:"This link has expired",select_months:"Choose the Month to Display",select_years:"Choose the Year to Display",show_specified_month:"Display File Shares for the Specified Month & Year",selectyearandmonth:"Please select a month and year to View",sortbydownloaded:"Sort Results by Time Downloaded",sortbyrecipientemail:"Sort Results by Recipient Email Address",sortbydate:"Sort Results by Date Share Sent",sortbyfilename:"Sort Results by Filename",sortbyfrom:"Sort Results by Caller Name",sortbydate2:"Sort Results by Call Date / Time",sortbyduration:"Sort Results by Length of Call",sortbystatus:"Sort Results by Call Status",sortbyrecording:"Sort Results by Recording",clear_limit:"Show all dates",copytohawksoft:"Export File Share Record to HawkSoft Inbox",copytomanagement:"Export File Share Record to Management System Inbox"},b.tips.conversation={copytohawksoft:"Export communications to HawkSoft Inbox",copytomanagement:"Export communications to Management System Inbox"},b.tips.callcenter={sortbywith:"Sort Results by Caller Name",sortbyextension:"Sort Results by Staff Extension",sortbyduration:"Sort Results by Length of Call",sortbystatus:"Sort Results by Staff Status",sortbystaff:"Sort Results by Staff Name",sortbygroup:"Sort Results by Staff Group",sortbydirection:"Sort Results by Call Direction",listen:"Listen to Call",whisper:"Whisper on Call to Staff",barge:"Join the Call"},b.tips.sortby={sortbyextension:"Sort Results by Staff Extension",sortbyfirstname:"Sort Results by First Name",sortbylastname:"Sort Results by Last Name",sortbydid:"Sort Results by DID Number",sortbyemail:"Sort Results by Email Address"},b.tips.history={missed:"Missed Call",voicemail:"Voicemail Left - Play",outboundunanswered:"Outbound Unanswered Call",outboundanswered:"Outbound Answered Call",sent_to_voicemail:"Sent to voicemail - No message left",declined:"Inbound Declined Call",answered:"Inbound Answered Call",sortbyfrom:"Sort Results by Caller Name",sortbydate:"Sort Results by Call Date / Time",sortbyduration:"Sort Results by Length of Call",sortbystatus:"Sort Results by Call Status",sortbyrecording:"Sort Results by Recording",copytohawksoft:"Export call receipt to HawkSoft Inbox",copytomanagement:"Export call receipt to Management System Inbox"},b.tips.leftbar={manage_groups:"Manage contact groups",add_contact:"Add contact",import_contacts:"Import contacts",videocall_disabled:"You need to activate Video Calling",videocall_active:"start video call",recent_contacts:"Show recent contacts",show_all_contacts:"View all contacts",show_favorite_contacts:"Show only your favorite contacts",view_communications:"Search all communications with contact"},b.tips.calls={makecall:"Call ",dissolve_group:"Dissolve the Group",manage_members:"Manage Members",show_members:"Show all Members in Group",hide_members:"Hide Group Members",remove_member:"Remove Member From Group",manage_managers:"Manage Managers",show_managers:"Show all Managers in Group",hide_managers:"Hide Group Managers",remove_manager:"Remove Manager From Group",manage_viewers:"Manage Group Access",show_viewers:"Show all Group Access",hide_viewers:"Hide Group Access",remove_member2:"Remove From Group Access",edit_group:"Edit Group Information"},b.tips.groups={edit_group_name:"Edit Group Name",dissolve_group:"Dissolve the Group",manage_members:"Manage Members",show_members:"Show all Members in Group",hide_members:"Hide Group Members",remove_member:"Remove Member From Group",manage_managers:"Manage Managers",show_managers:"Show all Managers in Group",hide_managers:"Hide Group Managers",remove_manager:"Remove Manager From Group",manage_viewers:"Manage Group Access",show_viewers:"Show all Group Access",hide_viewers:"Hide Group Access",remove_member2:"Remove From Group Access",edit_group:"Edit Group Information"},b.tips.chatplus={close_search:"Close Search Results",jump_to_result:"Go To Result in Channel",submit_search:"Search for a word or phrase in Chat Messages",show_actions:"Show message actions ...",share_message:"Share message ...",manage_channel:"Manage Channel Preferences",remove_temp_upload:"Remove File from Upload List",upload_files_to_channel:"Upload Files to Channel",download_file:"Download File",toggle_hawksoft_copy:"Select Messages to Export to HawkSoft Inbox",toggle_generic_export:"Select Messages to Export to Management System Inbox",copy_to_management:"Send Messages to Management System Inbox",copy_to_hawksoft:"Send Messages to HawkSoft Inbox",adminsubscription:"You are the channel admin so you can not leave this channel. You need to transfer admin to another team member first or delete the channel."},b.tips.sms={delete_thread:"Remove this thread and all of its messages",delete_message:"Remove this message from the thread",toggle_hawksoft_copy:"Select Messages to Export to HawkSoft Inbox",copy_to_hawksoft:"Send Messages to HawkSoft Inbox",toggle_generic_copy:"Select Messages to Export to Management System Inbox",copy_to_management:"Send Messages to Management System Inbox",cancel_copy_sms:"Cancel Copy Mode",add_media:"Upload Image(s) to send MMS message",blacklist:"Blacklist sender phone number",save_blacklist:"Add number to sms blacklist",new_blacklist:"Add a new number to the sms blacklist",cancel_blacklist_add:"Cancel adding number to blacklist",remove_from_blacklist:"Remove number from blacklist",manage_blacklist:"Manage blacklisted numbers",sortbycontact:"Sort by Contact Name / Number",sortbyunread:"Sort by Unread Message Count",sortbymostrecent:"Sort by Most Recent Message Received",close_search:"Close Search Results",jump_to_result:"Go To Result in Conversation",submit_search:"Search for a word or phrase in SMS Texting"},b.tips.recording={copytohawksoft:"Export this recording to HawkSoft Inbox",copytomanagement:"Export this recording to Management System Inbox",playmanualrecording:"Play this recording",playautorecording:"Play this auto recording",downloadauto:"Download the auto recording",downloadmanual:"Download this recording",remove:"Remove this recording"},b.tips.voicemail={playvoicemail:"Play Voicemail Recording",stopvoicemail:"Stop Voicemail Recording",copytohawksoft:"Export Voicemail Recording to HawkSoft Inbox",copytomanagement:"Export Voicemail Recording to Management System Inbox",remove:"Remove voicemail recording"},b.tips.signup={groupcode:"Some affiliate groups distribute group codes. This is not required and can be added later by contacting support@kotter.net.",e911service:"This can be customized for more locations later.",copytohawksoft:"Export Voicemail Recording to HawkSoft Inbox",copytomanagement:"Export Voicemail Recording to Management System Inbox",remove:"Remove voicemail recording"},b.tips.videoconference={roomsuccess:"Room name saved",resetadminlink:"Reset Conference Administrator Link",sendanemail:"Send Email to",disableinvitation:"Rescind Invitation (Disables Invite Code)",resendinvitation:"Resend Invitation Link to ",joinconference:"Open New Window and Start the Conference",playrecording:"Play video conference recording",copytohawksoft:"Export video conference recording to HawkSoft Inbox",copytomanagement:"Export video conference recording to Management System Inbox",remove:"Remove video conference recording"},b.tips.screenshare={playrecording:"Play Screen Share recording",copytohawksoft:"Export Screen Share recording to HawkSoft Inbox",copytomanagement:"Export Screen Share recording to Management System Inbox",remove:"Remove Screen Share recording"},a.tips=b.tips,b}]),proySymphony.service("focusService",["$rootScope","$window",function(a,b){var c={inFocus:!0},d=function(){c.inFocus=!0,a.$apply()},e=function(){c.inFocus=!1,a.$apply()};return b.onfocus=d,b.onblur=e,c}]),proySymphony.factory("pusherService",["$websocket","smsApi","$rootScope","usefulTools","$location","$timeout","chatMessages","newChatService","$filter","$myModal","$window","$auth","__env","dataFactory","symphonyConfig","contactGroupsService","callService","userContactService","smsService","callHistoryService","cloudStorageService","audioLibraryService","notificationService","timeKeeperService","$pusher",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(l.isAuthenticated()){var z=[];Pusher.logToConsole=!0;var A=new Pusher("fde20bef5caef3cbe4a2"),B=y(A),C=(m.symphonyUrl&&""!==m.symphonyUrl?m.symphonyUrl:o.symphonyUrl,c.user.symphony_user_settings.sms_phone_number?c.user.symphony_user_settings.sms_phone_number:null,c.user.symphony_user_settings.mattermost_user_id?c.user.symphony_user_settings.mattermost_user_id:null),D=c.user.domain_uuid,E=c.user.id,F=c.user.extension.extension_uuid;B.subscribe("vminfo-"+F),B.subscribe("greenbox-"+D),B.subscribe("vcinvite-"+E),B.subscribe("missedcall-"+F),B.subscribe("newcall-"+F),B.subscribe("cloud-storage-"+E),B.subscribe("cloud-storage-usage-"+D),B.subscribe("domain-update-"+D),B.subscribe("extensionchange-"+D),B.subscribe("user-did-change-"+D),C?B.subscribe("chatnotice-"+C):null,C?B.subscribe("chatnotice-"+D):null,B.subscribe("greeboxstatus-"+E),B.subscribe("callresponse-"+E),B.subscribe("hscopy-"+E),B.subscribe("screeninvite-"+D),B.subscribe("ringtonechange-"+E),B.subscribe("amcampaignupdate-"+D),B.subscribe("sms-"+E),B.subscribe("contact_status_change-"+D),B.subscribe("contact-updates-"+D),B.subscribe("contactgroup-member-"+D),B.subscribe("tkgroups-updates-"+D),B.subscribe("tok_box_video_invite-"+E),B.subscribe("tok_box_video_cancel_invite-"+E);B.connection.bind("state_change",function(a){m.enableDebug&&console.log("Pusher state"),m.enableDebug&&console.log(a),m.enableDebug&&console.log(a.current)}),B.connection.bind_all(function(a,b){if(b&&b.channel){m.enableDebug&&m.enableDebug&&console.log("EVENT: "+b.event),m.enableDebug&&m.enableDebug&&console.log(b);var e=2;switch(b.channel){case"user-did-change-"+D:if("UserDidChangeEvent"==b.event.substring(11)){m.enableDebug&&console.log("UserDidChangeEvent Event"),m.enableDebug&&console.log(b.data);var g=b.data.event;m.enableDebug&&console.log(g),g.user_uuid===c.user.id&&(console.log("change sms"),c.user.symphony_user_settings.sms_phone_number="1"+g.did,m.enableVerto&&q.restartVerto()),console.log(c.user),r.setContacts().then(function(a){p.groups.length<1&&p.setGroups()})}break;case"extensionchange-"+D:if("UserExtensionChangeEvent"==b.event.substring(11)){m.enableDebug&&console.log("UserExtensionChangeEvent Event"),m.enableDebug&&console.log(b.data);var g=b.data.event;m.enableDebug&&console.log(g),g.contact_uuid===c.user.contact_uuid&&(c.user.user_ext=g.newext,c.user.extension.extension&&(c.user.extension.extension=g.newext),m.enableVerto&&q.restartVerto()),r.setContacts().then(function(a){p.groups.length<1&&p.setGroups()})}break;case"newcall-"+F:if("NewCallEvent"==b.event.substring(11)){m.enableDebug&&console.log("NewCallEvent Event"),m.enableDebug&&console.log(b.data);var j=b.data.call;if(m.enableDebug&&console.log(j),c.callHistoryData){var l=new Date(j.start_stamp.replace(/-/g,"/"));m.enableDebug&&console.log(l),m.enableDebug&&console.log(c.callHistory);var o=i("getByUUID")(c.callHistoryData,j.call_history_fs_uuid,"call_history_fs");null!==o?c.callHistoryData[o]=t.processCall(j):c.callHistory&&(!c.callHistory.fromDate&&!c.callHistory.toDate||c.callHistory.fromDate<l&&c.callHistory.toDate>l)&&(m.enableDebug&&console.log("pushing to array"),c.callHistoryData.push(t.processCall(j)),"answered"==j.call_status||"unanswered"==j.call_status||"declined"==j.call_status?j.callstat=j.call_direction+j.call_status:j.callstat=j.call_status,void 0==j.contact_name?j.from_to=j.contact_number:j.from_to=j.contact_name)}if("true"===j.missed_call){c.missedCalls=parseInt(c.missedCalls)+1,c.user.textRingtoneVolume?e=c.user.textRingtoneVolume/10:c.user.domain.textRingtoneVolume&&(e=c.user.domain.textRingtoneVolume/10);var u={message:"You have "+c.missedCalls+" missed call"+(c.missedCalls>1?"s":""),title:"New Missed Call",url:null,showOnPageHidden:!1,icon:"https://res.cloudinary.com/freebizads/image/upload/v1482455829/voicemail-icon_ye9zbm.png",audioVolume:e,duration:5};w.fullNotification(u)}}break;case"callresponse-"+E:if("CallRespondEvent"==b.event.substring(11)){m.enableDebug&&console.log("CallRespondEvent Event"),m.enableDebug&&console.log(b.data);var g=b.data.event;m.enableDebug&&console.log(g),"answer"===g.call_action?(m.enableDebug&&console.log("send to answer"),c.$broadcast("gb-answer-call",{call_uuid:g.call_uuid})):"decline"===g.call_action&&c.$broadcast("gb-decline-call",{call_uuid:g.call_uuid})}break;case"chatnotice-"+C:"ChatNoticeEvent"==b.event.substring(11)&&(m.enableDebug&&console.log("ChatNotice Event"),"new_role"===b.data.notice.noticeType?h.handleNewRole(b.data.notice):"new_channel_users"===b.data.notice.noticeType&&f(function(){h.handleNewChannel(b.data.notice)},5e3));break;case"chatnotice-"+D:"ChatNoticeEvent"==b.event.substring(11)&&(m.enableDebug&&console.log("ChatNotice Domain Event"),"new_channel_domain"===b.data.notice.noticeType&&f(function(){h.handleNewChannel(b.data.notice)},5e3));break;case"greeboxstatus-"+E:"SetGreenBoxStatusEvent"==b.event.substring(11)&&(m.enableDebug&&console.log("GreenboxStatus Event"),m.enableDebug&&console.log(b.data),b.data.message.greenbox_active&&(c.user.greenbox_active=b.data.message.greenbox_active),b.data.message.greenbox_status&&(c.user.greenbox_active=b.data.message.greenbox_status),c.user.greenbox_installed="true",k.localStorage.setItem("currentUser",JSON.stringify(c.user)));break;case"cloud-storage-"+E:"CloudStorageEvent"==b.event.substring(11)&&(m.enableDebug&&console.log("Cloud Event"),m.enableDebug&&console.log(b.data),c.$broadcast("updateCloudStorage",!0));break;case"cloud-storage-usage-"+D:"StorageUsageEvent"==b.event.substring(11)&&(m.enableDebug&&console.log(b.data),c.user.domainCloudStorageUsage=b.data.event.domainusage,k.localStorage.setItem("currentUser",JSON.stringify(c.user)),c.$broadcast("updateCloudStorage",!0));break;case"domain-update-"+D:if("DomainUpdateEvent"==b.event.substring(11)){m.enableDebug&&console.log(b.data);var g=b.data.event;g.exportType&&(c.user.exportType=angular.copy(g.exportType)),g.limit_storage_user&&(c.user.symphony_domain_settings.limit_storage_user=g.limit_storage_user),g.limit_storage_user&&(c.user.symphony_domain_settings.customer_group_code=g.customer_group_code),g=null,k.localStorage.setItem("currentUser",JSON.stringify(c.user))}break;case"contact-updates-"+D:if("UserContactUpdateEvent"==b.event.substring(11)){var v=b.data.contact;if(m.enableDebug&&console.log(v),"new"===v.action||"undelete"===v.action)r.contacts.push(v),v.user_uuid&&h.addUserToTeam(v.chat_id),c.$broadcast("company.setup.user.added");else if("update"===v.action){var o=i("getIndexbyUUID")(r.contacts,v.contact_uuid);null!==o&&(r.contacts[o]=v)}else if("delete"===v.action){var o=i("getIndexbyUUID")(r.contacts,v.contact_uuid);null!==o&&r.contacts.splice(o,1)}c.userContacts=r.contacts}break;case"contactgroup-member-"+D:if("ContactGroupUpdateEvent"==b.event.substring(11)){var y=b.data.group;if("new"===y.action){var z=p.getGroupByUuid(y.group_uuid);void 0!=z&&(z.contacts=p.getContactRetrievalFuncForGroup(y),z.members=y.members)}else if("delete"===y.action){var z=p.getGroupByUuid(y.group_uuid);if(void 0!=z){var A=-1;c.ind=0,angular.forEach(z.members,function(a){A++,a.contact_uuid==y.contact_uuid&&(c.ind=A)}),z.members.splice(c.ind,1)}}else if("newviewers"===y.action){var z=p.getGroupByUuid(y.group_uuid);void 0!=z&&(z.viewer_users=y.viewer_users)}else if("deleteviewers"===y.action){var z=p.getGroupByUuid(y.group_uuid);void 0!=z&&(z.viewer_users=y.viewer_users)}else if("manager"===y.action){var B=[y];p.attachManagersToGroups(B);var z=p.getGroupByUuid(y.group_uuid);void 0!=z&&(z.managers=y.managers)}}break;case"tkgroups-updates-"+D:if("TimeKeeperGroupsUpdateEvent"==b.event.substring(11)){var G=b.data.group;if("update"===G.action){x.getTkUsers();var H=x.tkUsers;console.log(H)}}break;case"vminfo-"+F:if("UserCallVMStatusEvent"==b.event.substring(11)){var I=b.data.vminfo;if(c.unreadVoicemails<I.log_value){c.user.textRingtoneVolume?e=c.user.textRingtoneVolume/10:c.user.domain.textRingtoneVolume&&(e=c.user.domain.textRingtoneVolume/10);var u={message:"You have "+I.log_value+" unread voicemail"+(I.log_value>1?"s":""),title:"New Voicemail",url:null,showOnPageHidden:!1,icon:"https://res.cloudinary.com/freebizads/image/upload/v1482455829/voicemail-icon_ye9zbm.png",audioVolume:e,duration:5};w.fullNotification(u)}c.unreadVoicemails=I.log_value}break;case"missedcall-"+F:if("UserMissedCallEvent"==b.event.substring(11)){var J=b.data.logEntry;if(c.missedCalls<J.log_value){c.user.textRingtoneVolume?e=c.user.textRingtoneVolume/10:c.user.domain.textRingtoneVolume&&(e=c.user.domain.textRingtoneVolume/10);var u={message:"You have "+J.log_value+" missed call"+(J.log_value>1?"s":""),title:"New Missed Call",url:null,showOnPageHidden:!1,icon:"https://res.cloudinary.com/freebizads/image/upload/v1482455829/voicemail-icon_ye9zbm.png",audioVolume:e,duration:5};w.fullNotification(u)}c.missedCalls=J.log_value}break;case"screeninvite-"+D:if("ScreenshareInviteEvent"==b.event.substring(11)){var K=b.data.invite[0];K.user_uuid===c.user.user_uuid&&n.getScreenshareInvite(K.screenshare_uuid).then(function(a){if(a.data.success){var b=a.data.success.invite;c.showModalWithData("/screensharing/incomingscreenshare.html",b)}})}break;case"amcampaignupdate-"+D:if("AmCampaignUpdateEvent"==b.event.substring(11)){var L=b.data.update;L&&(m.enableDebug&&console.log(L),c.$broadcast("am-campaign-update",L))}break;case"ringtonechange-"+E:if("RingtoneChangeEvent"==b.event.substring(11)){var g=b.data.event;m.enableDebug&&console.log(g),"defaultupdate"===g.action?(g.callRingtone&&(c.user.domain.callRingtone=g.callRingtone),g.chatRingtone&&(c.user.domain.chatRingtone=g.chatRingtone),g.textRingtone&&(c.user.domain.textRingtone=g.textRingtone),g.callRingtoneVolume&&(c.user.domain.callRingtoneVolume=g.callRingtoneVolume),g.textRingtoneVolume&&(c.user.domain.textRingtoneVolume=g.textRingtoneVolume),g.chatRingtoneVolume&&(c.user.domain.chatRingtoneVolume=g.chatRingtoneVolume),c.user.callRingtone||c.showInfoAlert("The default company ringtones have been updated by your administrator."),m.enableDebug&&console.log(c.user.domain)):"delete"===g.action&&(c.user.callRingtone===g.audio_library_uuid?(c.user.callRingtone=null,c.user.callRingtoneVolume=null,c.user.callRingtonePath=null,c.showInfoAlert("Your company administrator has removed the ringtone you were currently using so we have set your ringtone to the company default. If you would like to customize your ringtone please visit Settings -> Profile -> Notifications.")):c.user.domain.callRingtone&&c.user.domain.callRingtone.audio_library_uuid===g.audio_library_uuid&&(c.user.domain.callRingtone=null,c.user.domain.callRingtoneVolume=null,c.user.callRingtone||c.showInfoAlert("Your company administrator has removed the ringtone you were currently using so we have set your ringtone to the company default. If you would like to customize your ringtone please visit Settings -> Profile -> Notifications."))),k.localStorage.setItem("currentUser",JSON.stringify(c.user))}break;case"hscopy-"+E:if("HawksoftCopyEvent"==b.event.substring(11))var g=b.data.event;break;case"vcinvite-"+E:if("VideoConferenceInviteEvent"==b.event.substring(11)){var K=b.data.inviteevent;K.target_user_uuid===E&&n.getVideoConferenceInvite(K.video_conference_invite_uuid).then(function(a){if(a.data.success){var b=a.data.success;c.showModalWithData("/video/incomingvideochatmodal.html",b);var d={message:a.data.success.message,title:"Video Conference Invite: ",url:null,icon:"https://res.cloudinary.com/freebizads/image/upload/v1482344729/sms-icon_eu8epj.png"};w.fullNotification(d)}})}break;case"contact_status_change-"+D:if("UserStatusChangeEvent"==b.event.substring(11)&&b.data.message&&c.user)if(b.data.message.user_uuid===c.user.id)"Offline"!==c.user.user_status&&("Offline"===b.data.message.user_status?c.changeUserStatus(c.user.user_status):(c.user.user_status=b.data.message.user_status,c.userStatusIconClass=d.funcPutIcon(c.user.user_status,"userstatusicon"),k.localStorage.setItem("currentUser",JSON.stringify(c.user))));else{var M=b.data.message.contact_uuid,v=r.getContactByUuid(M);v&&(v.status=b.data.message.user_status,b.data.message.contact_uuid!=c.user.contact_uuid)}break;case"tok_box_video_invite-"+E:c.$broadcast("video.invite",b.data.sender_uuid,b.data.room_url);break;case"tok_box_video_cancel_invite-"+E:c.$broadcast("video.invite.cancel",b.data.sender_uuid);break;case"sms-"+E:if("SmsMessageReceivedEvent"==b.event.substring(11)){var N=b.data.message;m.enableDebug&&console.log(N),s.smsMessageNotFound(N)&&!N.tempUuid&&s.handleNewMessage(N)}}}});var G={collection:z,get:function(){dataStream.send(JSON.stringify({action:"get"}))}};return G}return[]}]),proySymphony.factory("notificationService",["usefulTools","focusService","$rootScope","$filter","$window","__env","symphonyConfig","webNotification","ngAudio","dataFactory","$location",function(a,b,c,d,e,f,g,h,i,j,k){var l={basicNotification:function(b){if(c.user.show_notifications){if(a.isPageHidden()){var d=new Audio(g.onescreenUrl+"/assets/sounds/served.mp3");d.play()}h.showNotification(b.title?b.title:"Symphony Notification",{body:b.message?b.message:"Notification Text...",icon:"https://res.cloudinary.com/freebizads/image/upload/v1487349933/Kotter-logoSN_rsjavn.png",onClick:function(){console.log("Notification clicked.")},autoClose:4e3},function(a,b){a?window.alert("Unable to show notification: "+a.message):(console.log("Notification Shown."),setTimeout(function(){console.log("Hiding notification...."),b()},5e3))})}},fullNotification:function(a){if(console.log(a),c.user.show_notifications){var b={title:a.title?a.title:"Bridge Notification",message:a.message,icon:a.icon?a.icon:"https://res.cloudinary.com/freebizads/image/upload/v1487349933/Kotter-logoSN_rsjavn.png",
audioFile:a.audioFile?a.audioFile:null==a.audioFile?null:"https://res.cloudinary.com/freebizads/video/upload/v1485314880/minion_text_message_gojyad.mp3",audioVolume:a.audioVolume?a.audioVolume:.1,clickUrl:a.url?a.url:null,duration:a.duration?a.duration:15};if(console.log(b),null!==b.audioFile){var d=new Audio(b.audioFile);b.audioVolume&&(d.volume=b.audioVolume),d.play()}var e=null;e=null!==b.clickUrl?function(a){window.open(b.clickUrl,"_self"),window.focus()}:function(a){window.focus()},h.showNotification(b.title,{body:b.message,icon:b.icon,onClick:e,autoClose:4e3},function(a,b){a?console.log("Unable to show notification: "+a.message):console.log("Notification Shown.")})}}};return l.handleIncomingCallNotification=function(a,b){var d="https://staging.onescreen.kotter.net/imported/sounds/echoed-ding.mp3",e="https://staging.onescreen.kotter.net/imported/sounds/ActiveRingtone.wav";if(c.user.show_notifications){c.user.callRingtonePath?a?(c.notification=new Audio(d),c.notification.loop=!0):c.notification=new Audio(g.audioUrl+c.user.callRingtonePath):c.user.domain.callRingtone?(console.log(c.user.domain.callRingtone),a?(c.notification=new Audio(d),c.notification.loop=!0):c.notification=new Audio(g.audioUrl+c.user.domain.callRingtone.filepath)):c.notification=new Audio(e),c.user.callRingtoneVolume?c.notification.volume=c.user.callRingtoneVolume/10:c.user.domain.callRingtoneVolume&&(c.notification.volume=c.user.domain.callRingtoneVolume/10),c.notification.play();var f={message:"From: "+b.name+" ("+b.phone_number+")",title:"Incoming Call",audioFile:null,url:null,icon:"https://staging.onescreen.kotter.net/images/incoming-icon.png"};l.fullNotification(f)}},l.showSmsNotification=function(a,e){var h=!0;if("/sms"===k.path()&&e&&e.thread_uuid===a.thread_uuid&&b.inFocus&&(h=!1),h){var i,j=f.symphonyUrl&&""!==f.symphonyUrl?f.symphonyUrl:g.symphonyUrl;i=c.user.textRingtonePath?g.audioUrl+c.user.textRingtonePath:c.user.domain.textRingtone?g.audioUrl+c.user.domain.textRingtone.filepath:"https://res.cloudinary.com/freebizads/video/upload/v1485314880/minion_text_message_gojyad.mp3";var m=.5;c.user.textRingtoneVolume?m=c.user.textRingtoneVolume/10:c.user.domain.textRingtoneVolume&&(m=c.user.domain.textRingtoneVolume/10);var n={message:a.message.length<80?a.message:a.message.substring(0,80),title:"SMS From: "+d("tel")(a.from_number),url:j+"/sms?thId="+a.thread_uuid,audioFile:i,audioVolume:m,duration:5,icon:"https://res.cloudinary.com/freebizads/image/upload/v1482344729/sms-icon_eu8epj.png"};l.fullNotification(n)}},l.chatNotification=function(a){var b,d;b=c.user.chatRingtonePath?g.audioUrl+c.user.chatRingtonePath:c.user.domain.chatRingtone?g.audioUrl+c.user.domain.chatRingtone.filepath:"https://res.cloudinary.com/freebizads/video/upload/v1485316626/msg_text_ogk1ty.mp3",c.user.chatRingtoneVolume?d=c.user.chatRingtoneVolume/10:c.user.domain.chatRingtoneVolume&&(d=c.user.domain.chatRingtoneVolume/10);var e={icon:"https://res.cloudinary.com/freebizads/image/upload/v1482344729/sms-icon_eu8epj.png",message:a.message,title:"New ChatPlus Mention",audioFile:b,audioVolume:d,duration:5,url:l.symphonyURL+"/chatplus?chId="+a.channel_id+"&poId="+a.id};l.fullNotification(e)},l.symphonyURL=f.symphonyUrl?f.symphonyUrl:g.symphonyUrl,l}]),proySymphony.service("newChatService",["_","mmApi","$rootScope","$sce","$filter","userService","Slug","$window","$cookies","usefulTools","metaService","dataFactory","userContactService","$timeout","notificationService","chatMessages","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(b,c,d){c||(c=L.findChannelById(b.channel_id)),d||(d={});var e=b.id,f=c.postInfo.posts[b.root_id];if(f.postInfo||(f.postInfo={order:[],posts:{}}),!f.postInfo.posts[b.id])if(f.postInfo.posts[b.id]=b,d.placeholderId){var g=a.indexOf(f.postInfo.order,d.placeholderId);f.postInfo.order[g]=e,f.postInfo.order.splice(g,1,b.id),delete f.postInfo.posts[d.placeholderId]}else f.postInfo.order.push(e);var h={postInfo:f.postInfo,isThreaded:!0};b.isThreadedConsecutive=z(b,h)}function s(a){var b,c=L.findChannelById(a);return E(c)&&(b=L.privateChannels),F(c)&&(b=L.publicChannels),G(c)&&(b=L.directChannels),b}function t(a){var c={channel_id:a.id,prev_channel_id:L.publicData.currentChannel.id},d=a.mention_count,e=a.msg_count;a.mention_count=0,a.msg_count=a.total_msg_count,b.postChannelView(L.userProfile.id,c).then(function(b){H(b)||(a.mention_count=d,a.msg_count=e)})}function u(a){if(a.user_id!==L.userProfile.id){var b=L.findChannelById(a.channel_id);if(!k.tabIsActive()||!v(b)||"/chatplus"!==q.path().substring(0,9)){var c=L.postCallsOutCurrentUser(a),d="D"===b.type;if(c||d)return!0}}return!1}function v(a){return a===L.publicData.currentChannel}function w(){var a=i.get(L.userProfile.id+"currentChannel"),b=L.findChannelById(a);return b||(b=L.publicChannels[Object.keys(L.publicChannels)[0]]),b}function x(a){return"town-square"===a.name}function y(a){return console.log(a),null}function z(a,b){var c=C(a,b);return c?c.user_id===a.user_id:null}function A(a,b){var c=B(a,b);return c?c.user_id===a.user_id:null}function B(b,c){c||(c={});var d,e=L.findChannelById(b.channel_id);d=c.searchInfo?c.searchInfo:e.searchInfo;var f=d.order,g=d.posts,h=function(a){return a===b.id},i=a.findIndex(f,h);return c.isThreaded&&0===i?e.searchInfo.posts[b.root_id]:i>-1?g[f[i-1]]:null}function C(b,c){c||(c={});var d=L.findChannelById(b.channel_id),e=c.postInfo?c.postInfo:d.postInfo;if(!e)return null;var f=e.order,g=e.posts,h=function(a){return a===b.id},i=a.findIndex(f,h);return c.isThreaded&&0===i?d.postInfo.posts[b.root_id]:i>-1?g[f[i-1]]:null}function D(b,c){c||(c={});var d=L.findChannelById(b.channel_id),e=c.postInfo?c.postInfo:d.postInfo,f=e.order,g=e.posts,h=function(a){return a===b.id},i=a.findIndex(f,h);return i>-1?g[f[i+1]]:null}function E(a){return"P"===a.type}function F(a){return"O"===a.type}function G(a){return"D"===a.type}function H(a){var b=a.status;return a&&(200===b||201===b)}function I(a){var b=L.serviceEvents[a];b.occurred+=1;var c=b.callbacks;k.performCallbackCollection(c)}function J(a){return j.find(L.favorites,"channel_id",a)}var K=function(){return{userProfile:{},teamMembers:{},availableChannels:{},privateChannels:{},publicChannels:{},directChannels:{},onChatInitCallbacks:[],chatInitialized:!1,favorites:[],serviceEvents:{chatInitialized:{occurred:0,callbacks:[]},successfulLogin:{occurred:0,callbacks:[]},teamMembersLoaded:{occurred:0,callbacks:[]},channelAdded:{occurred:0,callbacks:[]},channelRemoved:{occurred:0,callbacks:[]},memberAdded:{occurred:0,callbacks:[]}},publicData:{currentChannel:{}},postPlaceholderCount:0,inProgressMessages:{},postFiles:[],ownPostsProcessing:0,postHandlingQueue:[]}},L=K();return L.reset=function(){function b(b,c){return a.isObject(c)&&a.isEmpty(c)?c:void 0}var c=K();return a.mergeWith(L,c,b),!0},L.login=function(){var a=c.user.symphony_user_settings.email_address,d=c.user.symphony_user_settings.mattermost_user_pass,e={login_id:a,password:d};return b.doLogin(e).then(function(a){var b=a.headers().token;return b?(i.put("accessToken",b),I("successfulLogin"),b):null},y)},L.init=function(){c.user.symphony_user_settings.chat_access_token?(i.put("accessToken",c.user.symphony_user_settings.chat_access_token),L.loadInfo()):L.login().then(function(a){a&&L.loadInfo()})},L.setUserStatus=function(a,c){var d={status:a};b.updateUserStatus(c,d)},L.loadInfo=function(a){a||(a=c.user.symphony_user_settings.mattermost_user_id),L.getUser(a).then(function(b){b&&(c.chatMessages=p,L.setUserStatus("online",a),L.getUserPreferences().then(function(a){a&&L.getUserTeam().then(function(a){L.getUserTeamMembers().then(function(a){L.getUserChannels().then(function(a){L.registerCallbacks(),I("chatInitialized")}),L.getAvailableChannels()})})}))}),k.registerOnRootScopeUserLoadCallback(function(){L.getChatFavorites(c.user.id)})},L.setUserStatus=function(a,c){var d={status:a};b.updateUserStatus(c,d)},L.setInProgress=function(a,b){return L.inProgressMessages[a]=b},L.getInProgress=function(a){return L.inProgressMessages[a]},L.getUser=function(a){return b.getMe(a).then(function(a){return H(a)?(L.userProfile=a.data,L.userProfile):null})},L.getUserSessions=function(a){return b.getUserSessions(a).then(function(a){return a.data})},L.getUserAudits=function(a){return b.getUserAudits(a).then(function(a){return a.data})},L.getSessionByToken=function(a,b){var c=0;for(c;c<a.length;c++)if(a[c].token==b)return a[c];return null},L.getUserPreferences=function(){return b.getAllUserPreferences(L.userProfile.id).then(function(a){return H(a)?(L.userProfile.preferences=a.data,L.userProfile):null})},L.getUserTeam=function(){return b.getUsersTeams(L.userProfile.id).then(function(a){return H(a)?(L.userProfile.team=a.data[0],L.userProfile):null})},L.deleteMemberFromChannel=function(a,c){return b.deleteMemberFromChannel(a,c).then(function(b){H(b)&&L.handleUserRemoved(a)})},L.joinChannel=function(a,c){L.joiningChannel=a;var d={user_id:c,channel_id:a};return b.addMembertoChannel(a,d).then(function(b){if(H(b)){var c=L.availableChannels[a];return L.publicChannels[a]=c,L.processChannel(c).then(function(a){return a?(L.setCurrentChannel(c),L.joiningChannel=null,!0):null})}return!1})},L.goToNotificationChannel=function(a){var b=findChannelById(a);return b?(G(b)&&!b.showDirect&&(L.updateUserPreference("direct_channel_show",b.partner_id,"true"),b.showDirect=!0),L.setCurrentChannel(b),!0):!1},L.getAvailableChannels=function(){return b.getPublicChannels(L.userProfile.team.id).then(function(a){if(H(a)){var b=a.data;return L.userProfile.availchannels=b,L.availableChannels=j.arrayToObjectByProp(b,"id",L.availableChannels),L.availableChannels}return[]})},L.getUserChannels=function(){return b.getUsersChannels(L.userProfile.id,L.userProfile.team.id).then(function(b){if(console.log(b),H(b)){var c=b.data;L.userProfile.channels=c;var d=a.filter(c,E),e=a.filter(c,F),f=a.filter(c,G);return j.arrayToObjectByProp(d,"id",L.privateChannels),a.forEach(L.privateChannels,L.processChannel),j.arrayToObjectByProp(e,"id",L.publicChannels),a.forEach(L.publicChannels,L.processChannel),j.arrayToObjectByProp(f,"id",L.directChannels),a.forEach(L.directChannels,L.processChannel),L.userProfile}return null})},L.processChannel=function(a){return a.getUnreadCount=function(){return this.total_msg_count-this.msg_count},L.processMemberData(a)},L.processMemberData=function(a){return b.getChannelMember(a.id,L.userProfile.id).then(function(c){return a.mention_count=c.data.mention_count,a.last_viewed_at=c.data.last_viewed_at,a.roles=c.data.roles,a.msg_count=c.data.msg_count,a.isAdmin=!1,-1!==a.roles.indexOf("channel_admin")&&(a.isAdmin=!0),b.getUsersInChannel(a.id,100).then(function(b){return a.member_count=b.data.length,a.members=b.data,"D"===a.type&&(angular.forEach(a.members,function(b){if(b.user_id!==L.userProfile.id){a.partner_id=b.user_id;var c=L.teamMembers[b.user_id];c&&(a.display_name=c.first_name+" "+c.last_name)}}),a.showDirect=L.isActiveDirectChannel(a)),a})})},L.totalMentionCount=function(){var b={},c={},d={};angular.copy(L.publicChannels,b),angular.copy(L.privateChannels,c),angular.copy(L.directChannels,d);var e=a.merge(d,a.merge(b,c));e=j.convertObjectToArray(e);var f=a.reduce(e,function(b,c){return a.isObject(b)&&(b=b.mention_count),c.mention_count?b+c.mention_count:b});return f},L.isActiveDirectChannel=function(a){var b=!1;return console.log(L.userProfile.preferences),angular.forEach(L.userProfile.preferences,function(c){"direct_channel_show"===c.category&&a.partner_id===c.name&&"true"===c.value&&(b=!0)}),b},L.activateDirectChannel=function(a,b){L.updateUserPreference("direct_channel_show",b,"true"),L.directChannels[a.id].showDirect=!0,L.setCurrentChannel(L.directChannels[a.id])},L.createDirectChannel=function(a){var c=L.getDMChannelByUserId(a.id);if(c){L.updateUserPreference("direct_channel_show",a.id,"true"),c.showDirect=!0;var d={users:[a.id,L.userProfile.id],channelId:c.id,type:c.type,noticeType:"new_channel_users",sender:L.userProfile.id};return l.postSendChatNotice(d),L.restartWebsocket(),L.setCurrentChannel(c.id),!0}return b.postCreateDirectChannel(a.id,L.userProfile.id).then(function(b){return H(b)?(c=b.data,L.processMemberData(c).then(function(b){L.updateUserPreference("direct_channel_show",a.id,"true");var d={users:[a.id,L.userProfile.id],channelId:c.id,type:c.type,noticeType:"new_channel_users",sender:L.userProfile.id};return l.postSendChatNotice(d),L.restartWebsocket(),c.showDirect=!0,L.directChannels[c.id]=c,L.setCurrentChannel(c),c})):!1},function(a){return __env.enableDebug&&console.log(a),!1})},L.handleNewDirectChannelNotice=function(a,b){L.addNewChannelInfo(b).then(function(b){var c=b,d=c.name.split("__");angular.forEach(d,function(a){a!==L.userProfile.id&&L.updateUserPreference("direct_channel_show",a,"true")}),L.userProfile.preferences.push({user_id:L.userProfile.id,category:"direct_channel_show",name:a,value:"true"})})},L.handleTeamMemberUpdate=function(a){L.teamMembers[a.id]=a},L.handleNewRole=function(a){console.log(a);var b=L.findChannelById(a.channelId);if(b){var c=0;for(c;c<b.members.length;c++)if(b.members[c].user_id===a.memberId){b.members[c].roles=a.role,a.memberId===L.userProfile.id&&(-1!==a.role.indexOf("channel_admin")?b.isAdmin=!0:b.isAdmin=!1);break}}},L.handleNewChannel=function(a){var c=L.findChannelById(a.channelid);c?G(c)&&L.processChannel(c).then(function(a){L.updateUserPreference("direct_channel_show",c.partner_id,"true"),c.showDirect=!0,L.restartWebsocket()}):b.getChannel(a.channelid).then(function(b){H(b)&&(c=b.data,F(c)?L.availableChannels[a.channelid]=c:L.processChannel(c).then(function(b){a.memberId&&a.memberId===L.userProfile.id&&(L.privateChannels[a.channelid]=c),G(c)&&(L.directChannels[a.channelid]=c,L.updateUserPreference("direct_channel_show",c.partner_id,"true"),L.directChannels[c.id].showDirect=!0),L.restartWebsocket()}))})},L.restartWebsocket=function(){n(function(){c.$broadcast("websocket.restart.needed")},2e3)},L.handleUserAdded=function(a){var b=L.findChannelById(a.channelId);b||L.joiningChannel===a.channelId||L.addNewChannelInfo(a.channelId).then(function(c){b=L.findChannelById(a.channelId),t(b)})},L.handleUserRemoved=function(a){var b=L.findChannelById(a.channelId);if(b)if(a.userId===L.userProfile.id)if(a.channelId===L.publicData.currentChannel.id){var d=L.teamMembers[a.removerId],f=d?" by "+d.first_name+" "+d.last_name:"";c.showInfoAlert('Your access to "'+b.display_name+'" has been removed'+f+" and you have been redirected to Town Square."),n(function(){L.goToTownSquare(),E(b)&&delete L.privateChannels[a.channelId],F(b)&&delete L.publicChannels[a.channelId]},5e3)}else E(b)&&delete L.privateChannels[a.channelId],F(b)&&delete L.publicChannels[a.channelId];else if(b.members&&L.isChannelMember(b,a.user_id)){var g=e("getById")(b.members,a.user_id);null!==g&&b.members.splice(g,1)}},L.handleEditedPost=function(a,b){var c=s(b);c[b].postInfo&&c[b].postInfo.posts[a.id]&&(c[b].postInfo.posts[a.id]=a)},L.handleDeletedPost=function(a,b){var c=s(b);c[b].postInfo&&c[b].postInfo.posts[a.id]&&(c[b].postInfo.posts[a.id].delete_at=(new Date).getTime())},L.handleChannelViewed=function(a){var b=L.findChannelById(a);b&&(b.mention_count=0,b.msg_count=b.total_msg_count)},L.handleChannelUpdated=function(a){var b=L.findChannelById(a.id);b&&(b.display_name=a.display_name,b.header=a.header,b.purpose=a.purpose)},L.handleChannelDeleted=function(a){L.availableChannels[a]&&delete L.availableChannels[a];var b=L.findChannelById(a);if(b){if(b.id===L.publicData.currentChannel.id&&(L.goToTownSquare(),b.creator_id!==L.userProfile.id)){var d='The "'+b.display_name+'" channel has been deleted and you have been redirected to Town Square.';c.showInfoAlert(d)}E(b)&&delete L.privateChannels[a],F(b)&&delete L.publicChannels[a]}},L.addUserToTeam=function(a){if(!L.teamMembers[a]){var c=[a];b.getUsersByIds(c).then(function(b){H(b)&&(L.teamMembers[a]=b.data[0],I("memberAdded"))})}},L.getUserTeamMembers=function(){return b.getTeamMembers(L.userProfile.team.id).then(function(a){if(H(a)){var c=a.data,d=function(a){return a.user_id},e=c.map(d);return b.getUsersByIds(e).then(function(a){if(H(a)){var b=a.data;return j.arrayToObjectByProp(b,"id",L.teamMembers),I("teamMembersLoaded"),L.teamMembers}return null})}return null})},L.getChatFavorites=function(a){l.getUserChatFavorites(a).then(function(a){if(a.data.success){var b=a.data.success.data;return angular.copy(b,L.favorites),L.favorites}return!1})},L.isChannelMember=function(a,b){var c=a.members,d=0,e=c.length;for(d;e>d;d++)if(c[d].user_id==b)return!0;return!1},L.editPost=function(a,c){var d={message:c},e=s(a.channel_id),f=(e[a.channel_id].postInfo,a.message),g=a.edit_at;return a.message=c,a.edit_at=(new Date).getTime(),b.patchPost(d,a.id).then(function(b){return H(b)?!0:(a.message=f,a.edit_at=g,!1)})},L.deletePost=function(a){var c=s(a.channel_id),d=(c[a.channel_id].postInfo,a.delete_at);return a.delete_at=(new Date).getTime(),b.postDeleteChatPost(a.id).then(function(b){return H(b)?!0:(a.delete_at=d,!1)})},L.editChannel=function(a){console.log(a);var c=L.findChannelById(a.id),d={display_name:a.display_name,header:a.header,purpose:a.purpose};return b.patchChannel(d,c.id).then(function(b){return __env.enableDebug&&console.log(b),c.display_name=a.display_name,c.header=a.header,c.purpose=a.purpose,!0},function(a){return!1})},L.leaveChannel=function(a){return b.deleteMemberFromChannel(a.id,L.userProfile.id).then(function(b){return L.goToTownSquare(),L.removeChannelFromAvailableChannels(a)})},L.removeChannelMember=function(a,c){var d=L.findChannelById(a);return d&&d.members&&L.isChannelMember(d,c)?b.deleteMemberFromChannel(d.id,c).then(function(a){if(H(a)){var b=e("getIndexByUserId")(d.members,c);return null!==b&&d.members.splice(b,1),d.member_count--,!0}return!1}):!1},L.addChannelMember=function(a,c){var d={user_id:c,channel_id:a},e=L.findChannelById(a);return b.addMembertoChannel(a,d).then(function(a){return e.member_count++,e.members.push(a.data),!0},function(a){return __env.enableDebug&&console.log(a),!1})},L.goToTownSquare=function(){var b=a.filter(L.publicChannels,x);b&&L.setCurrentChannel(b[0])},L.removeChannelFromAvailableChannels=function(a){F(a)&&delete L.publicChannels[a.id],E(a)&&delete L.privateChannels[a.id],G(a)&&delete L.directChannels[a.id]},L.deleteChannel=function(a){return b.deleteChannel(a.id).then(function(b){return __env.enableDebug&&console.log(b),b.data?(L.goToTownSquare("town-square"),L.removeChannelFromAvailableChannels(a),I("channelRemoved"),!0):!1},function(a){return __env.enableDebug&&console.log(a),!1})},L.addChannelToFavorites=function(a){return l.createChatFavorite(c.user.id,a.id).then(function(a){if(a.data.success){var b=a.data.success.data;return L.favorites.push(b),b}return null})},L.removeChannelFromFavorites=function(a){var b=J(a.id).chat_favorite_uuid;return l.deleteChatFavorite(b).then(function(a){return a.data.success?j.remove(L.favorites,"chat_favorite_uuid",b):null})},L.sendPost=function(a,c,d){var e=L.extractFileIdsFromPostFiles();d||(d={});var f={channel_id:a.id,message:c,root_id:d.root_id?d.root_id:null,file_ids:e};console.log(a);var g=L.constructPostPlaceholder(a,c,d);return L.handleNewPost(g),L.ownPostsProcessing+=1,b.sendNewPost(f).then(function(a){if(H(a)){var b=a.data;return L.textIsGiphyInvocation(c)&&L.postGiphy(b),L.handleNewPost(b,{placeholderId:g.id,isOwnPost:!0}),b}return L.ownPostsProcessing-=1,null},function(a){return L.ownPostsProcessing-=1,null})},L.extractFileIdsFromPostFiles=function(){if(L.postFiles&&L.postFiles.length>0){var a=[];return angular.forEach(L.postFiles,function(b){a.push(b.id)}),L.postFiles=[],a}return[]},L.sendPostWithFiles=function(){var a=L.extractFileIdsFromPostFiles();L.sendPost(L.currentChannel,L.currentMessageToSend,a)},L.getDMChannelByUserId=function(b){var c=j.convertObjectToArray(L.directChannels),d=function(a){return a.partner_id===b};return a.find(c,d)},L.currentChannel=function(){return L.publicData.currentChannel},L.userOwnsPost=function(a){return a?a.user_id===L.userProfile.id:null},L.isThreadPost=function(a){return a?a.root_id:null},L.constructPostPlaceholder=function(a,b,c){c||(c={});var d=L.postPlaceholderCount+=1,e=Date.now();return{channel_id:a.id,create_at:e,delete_at:0,edit_at:0,hashtags:"",id:"placeholder-"+d,is_pinned:!1,message:b,original_id:"",parent_id:"",pending_post_id:"",props:{},root_id:c.root_id?c.root_id:null,type:"",update_at:e,user_id:L.userProfile.id}},L.postCallsOutCurrentUser=function(b){var c="@"+L.userProfile.username,d=b.message,e=L.publicChannels,f=(L.privateChannels,j.convertObjectToArray(e)),g=[c="@"+L.userProfile.username,"@channel","@here","@everyone"];a.forEach(f,function(a){g.push("#"+a.name)});for(var h,i=0;i<g.length;i++)if(h=g[i],d.indexOf(h)>-1)return!0;return!1},L.findChannelById=function(a){var b=L.publicChannels[a];if(b)return b;var c=L.directChannels[a];if(c)return c;var d=L.privateChannels[a];return d?d:null},L.handleNewPost=function(b,c){c||(c={});var d=L.findChannelById(b.channel_id);if(d&&d.postInfo){var e=b.id,f=d.postInfo;if(!f.posts[b.id]){if(f.posts[b.id]=b,c.placeholderId){var g=a.indexOf(f.order,c.placeholderId);f.order[g]=e,f.order.splice(g,1,b.id),delete f.posts[c.placeholderId]}else{if(f.order.length>19){var h=f.order.shift();h&&delete f.posts[h]}if(f.order.push(e),d.total_msg_count+=1,v(d))d.msg_count+=1;else{var i=L.postCallsOutCurrentUser(b),j="D"===d.type;(i||j)&&(d.mention_count+=1)}}var k=L.processPostConstructor(f);k(b.id)}b.root_id&&r(b,d,c)}d&&u(b)&&o.chatNotification(b),c.isOwnPost&&(L.ownPostsProcessing-=1,0===L.ownPostsProcessing&&(a.forEach(L.postHandlingQueue,L.handleNewPost),L.postHandlingQueue=[]))},L.processPostConstructor=function(a,b){return b||(b={}),function(c){var d=a.posts[c];(null===d.isConsecutive||void 0===d.isConsecutive)&&(b.search||(d.isConsecutive=!!z(d)),b.search&&(d.isConsecutive=!!A(d))),b.handleThreaded&&d.root_id&&r(d),a.count||(a.count=0),a.count++,L.getPostFileInfo(d)}},L.postGiphy=function(a){var b=L.getGiphySearchTextFromMessage(a.message);L.getGiphyUrlByText(b).then(function(b){if(b){console.log(b);var c=L.findChannelById(a.channel_id);L.sendPost(c,b)}})},L.isGiphyLink=function(a){return!!a.match(/(https:\/\/).+(.giphy.com).+(.gif)/)},L.textIsGiphyInvocation=function(a){var b=a.split(" ")[0];return"gif:"===b||"/gif"===b},L.getGiphyUrlByText=function(a){return l.getGiphyGifByText(a).then(function(a){if(console.log(a),"Missing necessary token in the post data"!==a.data.text){var b=a.data.text.split("\n")[1].replace(/\s/g,"");return b}return void 0})},L.getGiphySearchTextFromMessage=function(a){var b=a.split(" ");return b.shift(),b.join(" ")},L.getPostFileInfo=function(a){a.fileinfoposts=null,a.fileinfo=null,a.file_ids&&a.file_ids.length>0&&(b.getFileInfoPosts(a.id).then(function(c){H(c)&&(a.fileinfoposts=c.data,angular.forEach(a.fileinfoposts,function(a){b.getPublicLink(a.id).then(function(b){a.link=b.data.link,a.obj={obj:a.link}})}))}),a.fileinfo=[])},L.showFilesDisplayForPost=function(a){return a?a.fileinfoposts&&a.fileinfoposts.length>0:!1},L.processDirectChannel=function(a){var b=function(a){var b=new RegExp("_","g"),c=new RegExp(L.userProfile.id,"g"),d=a.name.replace(b,"").replace(c,"");return L.teamMembers[d]},c=b(a);c&&(a.display_name=c.first_name+" "+c.last_name,a.partner_id=c.id)},L.registerChatEventCallback=function(a,b){var c=L.serviceEvents[a];c.occurred>0?b():c.callbacks.push(b)},L.lastChannelId=function(){var b=function(a){return"last"===a.category&&"channel"===a.name},c=a.find(L.userProfile.preferences,b);return c?c.value:null},L.isFavoriteChannel=function(a){return a?!!j.find(L.favorites,"channel_id",a.id):!1},L.goToCurrentChannel=function(){L.setCurrentChannel(L.publicData.currentChannel,!0)},L.setCurrentChannel=function(a,b){if(a.searchInfo=null,b||a!==L.publicData.currentChannel){t(a);var c=!a.postInfo,d={};if(!c){var e=a.postInfo.posts,f=a.postInfo.order,g=e[f[f.length-1]],h=a.postInfo.order&&a.postInfo.order.length<20;h?(a.postInfo={},d.needsReload=!0):g&&(d.after=g.id)}d.firstPostLoad=c,L.publicData.currentChannel=a,i.put(L.userProfile.id+"currentChannel",a.id),L.getChannelPosts(a,d)}},L.isFirstDayPost=function(a){var b=C(a);if(b){var c=moment(b.create_at).startOf("day"),d=moment(a.create_at).startOf("day");return d.isAfter(c)}return null},L.hideDirectMessage=function(a){var b=L.findChannelById(a);console.log(b),b&&(L.updateUserPreference("direct_channel_show",b.partner_id,"false"),b.showDirect=!1,console.log(L.directChannels),L.publicData.currentChannel.id===b.id&&L.goToTownSquare("town-square"))},L.updateUserPreference=function(a,c,d){var e=[],f={user_id:L.userProfile.id,category:a,name:c,value:d};e.push(f),b.setUserPreferences(e,L.userProfile.id).then(function(a){L.getUserPreferences()})},L.createChannel=function(a){console.log(a);var b=g.slugify(a.display_name),c=b,d=1,e={};return e={team_id:L.userProfile.team.id,name:c,display_name:a.display_name,purpose:a.purpose,header:a.header,type:a.channel_type,channelmember:a.channelmember},__env.enableDebug&&console.log(e),L.doCreateChannel(e,d)},L.addNewChannelInfo=function(a){return b.getChannel(a).then(function(a){if(console.log(a.data),H(a)){var b=L.appendChannelToAvailable(a.data);return L.processChannel(b)}return null})},L.changeMemberRole=function(a,c,d){var e=L.findChannelById(c);if(e){var f={roles:d};return b.updateChannelRoles(c,a,f).then(function(b){if(H(b)){var f=0;for(f;f<e.members.length;f++)if(e.members[f].user_id===a){e.members[f].roles=d;var g={channelId:c,memberId:a,role:d,noticeType:"new_role",members:e.members};l.postSendChatNotice(g);break}return!0}return null})}return!1},L.isChannelAdmin=function(a,b){var c=L.findChannelById(a);if(c&&L.joiningChannel!==a){var d=0;for(d;d<c.members.length;d++)if(c.members[d].user_id===b&&-1!==c.members[d].roles.indexOf("channel_admin"))return!0}return!1},L.doCreateChannel=function(a,d){return b.createNewChannel(a).then(function(d){return __env.enableDebug&&console.log("NEWCHANNEL"),__env.enableDebug&&console.log(d.data),b.getChannel(d.data.id).then(function(e){var f=d.data;return E(f)&&(L.privateChannels[f.id]=f),F(f)&&(L.publicChannels[f.id]=f),b.getChannelMember(f.id,L.userProfile.id).then(function(e){f.mention_count=e.data.mention_count,f.last_viewed_at=e.data.last_viewed_at,f.roles=e.data.roles,f.msg_count=e.data.msg_count,f.postInfo={posts:{},order:[]};var g=[];-1!==f.roles.indexOf("channel_admin")&&(f.isAdmin=!0),angular.forEach(a.channelmember,function(a,b){a&&b!==L.userProfile.id&&L.addChannelMember(f.id,b)});var h={users:g?g:null,channelId:f.id,noticeType:"new_channel_domain",type:f.type,sender:L.userProfile.id};return l.postSendChatNotice(h),b.getChannelStats(d.data.id).then(function(a){return __env.enableDebug&&console.log(a.data),c.alerts.push({success:!0,message:d.data.display_name+" was created successfully."}),f.member_count=a.data.member_count,L.appendChannelToAvailable(f),L.processChannel(f).then(function(a){n(function(){I("channelAdded"),L.setCurrentChannel(f),L.restartWebsocket()})}),!0})})})},function(b){if(__env.enableDebug&&console.log(b),!(b.data.status_code>=400)||"A channel with that URL was previously created"!=b.data.message&&"A channel with that URL already exists"!=b.data.message)return null;var c=g.slugify(a.display_name)+"-"+d.toString();return d++,a.name=c,L.doCreateChannel(a,d),null})},L.appendChannelToAvailable=function(a){var b;return E(a)&&(b=L.privateChannels),F(a)&&(b=L.publicChannels),G(a)&&(b=L.directChannels),b[a.id]=a,L.processMemberData(b[a.id]),a},L.hasValidChatToken=function(){return i.get("accessToken")?!0:!1},L.getPreviousPost=function(a){return C(a)},L.getNextPost=function(a){return D(a)},L.channelIsCurrentChannel=function(a){v(a)},L.showMemberPhoto=function(a,b){var e="Offline",f=j.funcPutIcon(e),g='<span class="status-box"><i class="'+f+'" style="font-size: 18px;"></i></span>';return a?(e=a.status,f=j.funcPutIcon(e),g='<span class="status-box"><i class="'+f+'" style="font-size: 18px;"></i></span>',a.contact_profile_image&&""!==a.contact_profile_image?d.trustAsHtml('<img src="'+c.pathImgProfile+a.contact_profile_image+'" class="chat-profile-image'+b+'">'+g):d.trustAsHtml('<label class="chat-profile-image-null'+b+'" style="background-color: '+(a&&a.contact_profile_color?a.contact_profile_color:"")+'">'+a.contact_name_given.substring(0,1)+a.contact_name_family.substring(0,1)+"</label>"+g)):d.trustAsHtml('<label class="chat-profile-image-null'+b+'"><i class="fa fa-user"></i></label>'+g)},L.doChatSearch=function(a){var c={terms:a,is_or_search:!1};return console.log(c),b.postChatSearch(c).then(function(a){if(console.log(a),H(a)){var b={};return angular.forEach(a.data.order,function(b){a.data.posts[b].channel=L.findChannelById(a.data.posts[b].channel_id)}),b.order=a.data.order,b.posts=a.data.posts,b}return{}})},L.getChannelPosts=function(c,d){var e={channelId:c.id,page:d.page?d.page:0,limit:d.limit?d.limit:20};return d.after&&(e.after=d.after),d.before&&(e.before=d.before),b.getChannelPosts(e).then(function(b){if(H(b)){var e=b.data;e.order=e.order.reverse(),d.firstPostLoad||d.needsReload?c.postInfo={}:(e.order=e.order.concat(c.postInfo.order),e.posts=a.merge(e.posts,c.postInfo.posts)),angular.copy(e,c.postInfo);var f={handleThreaded:!0};return a.forEach(c.postInfo.order,L.processPostConstructor(c.postInfo,f)),c}return null})},L.getSearchPosts=function(a,c){console.log(a);var d={channelId:a.channel_id,page:0,limit:25};return c.after&&(d.after=c.after),c.before&&(d.before=c.before),console.log(d),b.getChannelPosts(d).then(function(a){return H(a)?a.data:null})},L.getSearchResults=function(b){var c=L.findChannelById(b.channel_id);c.searchInfo={};var d;angular.copy(c,d),console.log(d);var e={limit:25,before:b.id};return L.getSearchPosts(b,e).then(function(d){return console.log(d),d.order=d.order.reverse(),d.order.push(b.id),d.posts[b.id]=b,e.after=b.id,e.before=null,L.getSearchPosts(b,e).then(function(b){b.order=b.order.reverse(),c.searchInfo={},c.searchInfo.order=d.order.concat(b.order),c.searchInfo.posts=a.merge(d.posts,b.posts);var e={handleThreaded:!1,search:!0};return a.forEach(c.searchInfo.order,L.processPostConstructor(c.searchInfo,e)),console.log(c),c})})},L.goToSearchResult=function(a){return L.getSearchResults(a).then(function(a){i.put("currentChannel",a.id),L.publicData.currentChannel=a})},L.saveCopiedPosts=function(a){var b=[];angular.forEach(a,function(a,c){var d=L.publicData.currentChannel.postInfo.posts[c],f=L.teamMembers[d.user_id];d.created=e("date")(new Date(d.create_at),"yyyy-MM-dd HH:mm:ss"),d.name=f.first_name+" "+f.last_name;var g=L.publicData.currentChannel;if(d.channel_name=g.display_name,G(g)){var h=g.name.split("__");angular.forEach(h,function(a){if(a!==L.userProfile.id){var b=L.teamMembers[a];d.memberstring=b.first_name+" "+b.last_name}d.channel_name="Direct Message: "+d.memberstring})}b.push(d)});var d={messages:b,channel_name:L.publicData.currentChannel.display_name,domain_uuid:c.user.domain_uuid,user_uuid:c.user.id};return console.log(d),l.postHSCopyChatMessages(d).then(function(a){return __env.enableDebug&&console.log(a),!0},function(a){return __env.enableDebug&&console.log(a),!1})},L.clearInfo=function(){L.userProfile={},L.teamMembers={},L.availableChannels={},L.privateChannels={},L.publicChannels={},L.directChannels={},L.publicData={currentChannel:{}},i.remove("accessToken")},L.registerCallbacks=function(){L.registerChatEventCallback("chatInitialized",function(){L.getAvailableChannels(),L.setCurrentChannel(w())}),p.registerEventHandler("posted",function(a,c){var d=JSON.parse(c.post);if(L.joiningChannel!==d.channel_id){var e=L.findChannelById(d.channel_id);console.log(L.userProfile.preferences),console.log(L.teamMembers),e?(e.postInfo||(e.postInfo={order:[],posts:{}}),"D"!==e.type||e.showDirect||(L.updateUserPreference("direct_channel_show",e.partner_id,"true"),e.showDirect=!0),console.log(e),console.log(L.directChannels),e.postInfo&&!e.postInfo.posts[d.id]&&(d.user_id===L.userProfile.id&&L.ownPostsProcessing?L.postHandlingQueue.push(d):L.handleNewPost(d))):b.getChannel(d.channel_id).then(function(a){
H(a)&&(e=a.data,L.processChannel(e).then(function(a){F(e)&&(L.publicChannels[e.id]=e),E(e)&&(L.privateChannels[e.id]=e),G(e)&&(L.directChannels[e.id]=e),"D"!==e.type||e.showDirect||(L.updateUserPreference("direct_channel_show",e.partner_id,"true"),e.showDirect=!0),e.postInfo||(e.postInfo={order:[],posts:{}}),n(function(){e.postInfo&&!e.postInfo.posts[d.id]&&L.handleNewPost(d)},500)}))})}}),p.registerEventHandler("user_added",function(a,b){console.log(a),console.log(b);var c;a.user_id&&(c={userId:a.user_id,channelId:b.channel_id,removerId:b.remover_id}),a.channel_id&&(c={userId:b.user_id,channelId:b.channel_id,removerId:b.remover_id}),L.handleUserAdded(a.channel_id)}),p.registerEventHandler("user_removed",function(a,b){console.log(a),console.log(b);var c;a.user_id&&(c={userId:a.user_id,channelId:b.channel_id,removerId:b.remover_id}),a.channel_id&&(c={userId:b.user_id,channelId:b.channel_id,removerId:b.remover_id}),b.remover_id!==L.userProfile.id&&L.handleUserRemoved(c)}),p.registerEventHandler("new_user",function(a,b){L.addUserToTeam(b.user_id)}),p.registerEventHandler("user_updated",function(a,b){L.handleTeamMemberUpdate(b.user)}),p.registerEventHandler("channel_deleted",function(a,b){L.handleChannelDeleted(b.channel_id)}),p.registerEventHandler("channel_updated",function(a,b){console.log(b),console.log(a);var c=JSON.parse(b.channel);L.handleChannelUpdated(c)}),p.registerEventHandler("channel_viewed",function(a,b){console.log(b),console.log(a),L.joiningChannel!==b.channel_id&&L.handleChannelViewed(b.channel_id)}),p.registerEventHandler("preferences_changed",function(a,b){}),p.registerEventHandler("direct_added",function(a,b){L.handleNewDirectChannelNotice(b.teammate_id,a.channel_id)}),p.registerEventHandler("post_deleted",function(a,b){var c=JSON.parse(b.post);L.handleDeletedPost(c,a.channel_id)}),p.registerEventHandler("post_edited",function(a,b){var c=JSON.parse(b.post);L.handleEditedPost(c,a.channel_id)})},L}]),proySymphony.service("chatService",["$filter","$rootScope","$interval","__env","mmApi","$timeout","usefulTools","$location","symphonyConfig","notificationService","userContactService","$window","$sce","dataFactory","fileService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={threadPosts:{},inProgressMessages:{},favorites:[]};return p.init=function(){p.loadChatFavorites(b.user.id)},p.handleNewBatchOfPosts=function(a,b){a=g.convertObjectToArray(a),p.addThreadPostsFromPool(a),a=p.convertPostsArrayToObjectByPostId(a);var c=p.filterOrderArrByAvailablePosts(b,a);return{posts:a,sortorder:c}},p.addThreadPostsFromPool=function(a){p.initRootPostArraysByPool(a),a=a.filter(function(a){return p.isThreadPost(a)}),angular.forEach(a,function(a){p.addThreadPost(a)})},p.initRootPostArraysByPool=function(a){return angular.forEach(a,function(a){p.isThreadPost(a)||p.threadPosts[a.id]||(p.threadPosts[a.id]=[])}),!0},p.filterThreadPosts=function(a){return a.filter(function(a){return!p.isThreadPost(a)})},p.convertPostsArrayToObjectByPostId=function(a){var b={};return angular.forEach(a,function(a){b[a.id]=a}),b},p.filterOrderArrByAvailablePosts=function(a,b){return a.filter(function(a){return!!b[a]})},p.handleNewThreadPost=function(a){p.addThreadPost(a)},p.addNewRootPostId=function(a){p.threadPosts[a.id]=[]},p.addThreadPost=function(a){p.threadPosts[a.root_id]?p.threadPostExists(a)||p.threadPosts[a.root_id].push(a):p.threadPosts[a.root_id]=[a]},p.threadPostExists=function(a){var b,c=p.threadPosts[a.root_id];if(c)for(var d=0;d<c.length;d++)if(b=c[d],b.id===a.id)return!0;return!1},p.getThreadPostsByRootId=function(a){return p.threadPosts[a]},p.isGiphyLink=function(a){return!!a.match(/(https:\/\/).+(.giphy.com).+(.gif)/)},p.textIsGiphyInvocation=function(a){var b=a.split(" ")[0];return"gif:"===b||"/gif"===b},p.getGiphyUrlByText=function(a){return n.getGiphyGifByText(a).then(function(a){if("Missing necessary token in the post data"!==a.data.text){var b=a.data.text.split("\n")[1].replace(/\s/g,"");return b}return void 0})},p.getGiphySearchTextFromMessage=function(a){var b=a.split(" ");return b.shift(),b.join(" ")},p.getUnsubscribedChannels=function(){return e.getMoreTeamChannels(b.teamId,0,50).then(function(a){return b.unsubscribedChannels=a.data,d.enableDebug&&console.log("SUBSCRIBE TO CHANNELS"),d.enableDebug&&console.log(b.unsubscribedChannels),a.data},function(a){return d.enableDebug&&console.log(a),b.unsubscribedChannels=[],[]})},p.updateChannelMembers=function(){return e.getChannelMembers().then(function(c){return b.channelMembers=c.data,e.getUsersChannels(b.teamId).then(function(c){b.availableChannels=c.data;var d=0;return angular.forEach(b.availableChannels,function(c){c.isAdmin=!1;var e=a("getByChannelId")(b.channelMembers,c.id);null!==e&&(c.hasUnread=!1,e.last_viewed_at<c.last_post_at&&(c.hasUnread=!0),c.mention_count=e.mention_count,d+=c.mention_count,-1!==e.roles.indexOf("channel_admin")&&(c.isAdmin="true"))}),console.log(c.data),b.numNewChatMessages=d,l.localStorage.setItem("channelMembers",JSON.stringify(b.channelMembers)),l.localStorage.setItem("availableChannels",JSON.stringify(b.availableChannels)),c.data},function(a){return d.enableDebug&&console.log(a),[]})})},p.updateTeamUsers=function(){return e.getTeamMembers(b.teamId).then(function(c){var f=[];return angular.forEach(c.data,function(a){f.push(a.user_id)}),e.getUsersByIds(f).then(function(c){var d=[];angular.copy(c.data,d),b.teamUserKeys=[],angular.forEach(d,function(a){b.teamUsers[a.id]=a,b.teamUserKeys.push(a.id)}),console.log(b.teamUsers);var e=k.contacts;return angular.forEach(b.teamUsers,function(b){var c=a("getContactbyMMID")(e,b.id);null!==c&&(b.contact=c)}),l.localStorage.setItem("teamUsers",JSON.stringify(b.teamUsers)),b.teamUsers},function(a){return d.enableDebug&&console.log(a),b.teamUsers})})},p.showMemberPhoto=function(c,d){var e="Offline",f=g.funcPutIcon(e),h='<span class="status-box"><i class="'+f+'" style="font-size: 18px;"></i></span>',i=k.contacts;if(c){var j=a("getContactbyMMID")(i,c.id);if(null!==j)return e=j.status,f=g.funcPutIcon(e),h='<span class="status-box"><i class="'+f+'" style="font-size: 18px;"></i></span>',j.contact_profile_image&&""!==j.contact_profile_image?m.trustAsHtml('<img src="'+b.pathImgProfile+j.contact_profile_image+'" class="chat-profile-image'+d+'">'+h):m.trustAsHtml('<label class="chat-profile-image-null'+d+'" style="background-color: '+(j&&j.contact_profile_color?j.contact_profile_color:"")+'">'+j.contact_name_given.substring(0,1)+j.contact_name_family.substring(0,1)+"</label>"+h)}else if(c&&!c.roles)return m.trustAsHtml('<span class="suggest-icon"><i class="fa fa-users md-icon"></i></span>'+h);return m.trustAsHtml('<label class="chat-profile-image-null'+d+'"><i class="fa fa-user"></i></label>'+h)},p.handlePaste=function(a,b){var c,d,e,f,g;if(a.clipboardData&&a.clipboardData.items)for(var h=0;h<a.clipboardData.items.length;h++)c=a.clipboardData.items[h],c.getAsFile()&&(d=c.getAsFile(),e=moment().format("YYYY-M-D H-m"),f=o.getFileTypeByMimeType(d.type),g=new File([d],"Image Pasted at "+e+"."+f,{type:d.type}),b.addToQueue(g))},p.showFilesDisplayForPost=function(a){return a?a.fileinfoposts&&a.fileinfoposts.length>0:!1},p.favoriteTopicChannels=function(){return b.availableChannels?b.availableChannels.filter(function(a){return p.isFavoriteChannel(a)&&a.display_name}):null},p.initialize=function(a){b.uid=[],b.puid=[],b.u=[],b.created=[],b.pcreated=[],b.showProfileInfo=[],b.showDateSeparator=[];var c=0;console.log(b.teamUsers),angular.forEach(a,function(a){p.updatePostInfo(a,c),c++}),console.log("POST USERS"),console.log(b.u)},p.updatePostInfo=function(a,c){b.u[a]=b.teamUsers[b.posts[a].user_id];var d=0==c?null:b.posts[b.order[c-1]],e=b.posts[a];b.uid[a]=e.user_id,b.puid[a]=null==d?"":d.user_id,b.created[a]=e.create_at,b.pcreated[a]=null==d?"":d.create_at;var f=g.isNewDay(e.create_at,null==d?"":d.create_at),h=g.timeDifference(e.create_at,0==c?"":d.create_at,"minutes"),i=15>h?!0:!1,j=!0;0!=c&&e.user_id==d.user_id&&(j=!1);var k=!1;(f||j||!i&&!j)&&(k=!0),b.showProfileInfo[a]=k,b.showDateSeparator[a]=f},p.refreshChatInfo=function(){return e.getMe().then(function(c){return b.mmProfile=c.data,d.enableDebug&&console.log("CHAT USER PROFILE"),d.enableDebug&&console.log(b.mmProfile),e.getAllUserPreferences().then(function(c){if(d.enableDebug&&console.log("USER PREFERENCES"),d.enableDebug&&console.log(c.data),b.allPreferences=c.data,b.allPreferences){var f=a("getPrefValueByCategoryandName")(b.allPreferences,"last","channel");null!==f&&(b.mmProfile.lastChannel=f)}return l.localStorage.setItem("allPreferences",JSON.stringify(b.allPreferences)),l.localStorage.setItem("mmProfile",JSON.stringify(b.mmProfile)),e.getChannelMembers().then(function(c){return b.channelMembers=c.data,e.getUsersChannels(b.teamId).then(function(c){b.availableChannels=c.data;var d=0;return angular.forEach(b.availableChannels,function(c){c.isAdmin=!1;var e=a("getByChannelId")(b.channelMembers,c.id);null!==e&&(c.hasUnread=!1,e.last_viewed_at<c.last_post_at&&(c.hasUnread=!0),c.mention_count=e.mention_count,d+=c.mention_count,-1!==e.roles.indexOf("channel_admin")&&(c.isAdmin="true"))}),b.numNewChatMessages=d,l.localStorage.setItem("channelMembers",JSON.stringify(b.channelMembers)),l.localStorage.setItem("availableChannels",JSON.stringify(b.availableChannels)),e.getTeamMembers(b.teamId).then(function(c){var d=[];return angular.forEach(c.data,function(a){d.push(a.user_id)}),e.getUsersByIds(d).then(function(c){var d=[];console.log(c.data),angular.copy(c.data,d),console.log(d),b.teamUserKeys=[];var e=k.contacts;angular.forEach(d,function(c){b.teamUserKeys.push(c.id);var d=a("getContactbyMMID")(e,c.id);null!==d&&(c.contact=d)});var f={username:"everyone",first_name:"Notify everyone on your team",id:997};d.push(f);var f={username:"channel",first_name:"Notify everyone in this channel",id:998};d.push(f);var f={username:"here",first_name:"Notify every online member in this channel",id:999};return d.push(f),b.teamUsersArray=d,b.teamUsers=p.convertArrayToObject(d),console.log(b.teamUsers),l.localStorage.setItem("teamUsersArray",JSON.stringify(b.teamUsersArray)),l.localStorage.setItem("teamUserKeys",JSON.stringify(b.teamUserKeys)),l.localStorage.setItem("teamUsers",JSON.stringify(b.teamUsers)),b.mmProfile},function(a){return""})})},function(a){return d.enableDebug&&console.log(a),b.availableChannels={},""})})},function(a){return d.enableDebug&&console.log(a),""})},function(a){return b.mmProfile={},""})},p.convertArrayToObject=function(a){var b={};return angular.forEach(a,function(a){("997"!==a.id||"998"!==a.id||"999"!==a.id)&&(b[a.id]=a)}),console.log(b),b},p}]),proySymphony.service("recordingService",["$window",function(a){var b={audioChunks:[],recorder:null};return b.initializeRecorder=function(a){b.recorder=new MediaRecorder(a,{mimeType:"audio/webm"}),b.recorder.ondataavailable=function(a){if(angular.copy([],b.audioChunks),b.audioChunks.push(a.data),"inactive"===b.recorder.state)var c=new Blob(b.audioChunks,{type:"audio/webm"}),d=URL.createObjectURL(c);b.blob=c,b.url=d}},b.start=function(){b.recorder.start()},b.stop=function(){b.recorder.stop()},b.download=function(a,c){c||(c="recording"),a||(a="mp3");var d=document.createElement("a");d.href=b.url,d.download=c+"."+a,d.click()},b}]),proySymphony.service("metaService",["$rootScope",function(a){function b(a,b){var d=c.scopes[a.id]={};d.destroyFns=[b],a.$on("$destroy",function(){for(var a=0;a<d.destroyFns.length;a++)d.destroyFns[a]()})}var c={scopes:{},onRootScopeUserLoadCallbacks:[]};return c.registerOnRootScopeUserLoadCallback=function(b){a.userLoaded?c.performCallbackCollection([b]):c.onRootScopeUserLoadCallbacks.push(b)},c.multiRootScopeOn=function(a,b){for(var d,e,f,g=0;g<b.length;g++)f=b[g],d=f.name,e=f.fn,c.rootScopeOn(a,d,e)},c.rootScopeOn=function(d,e,f){var g=a.$on(e,f);c.scopes[d.id]?c.scopes[d.id].destroyFns.push(g):b(d,g)},c.multiLocalRootScopeFn=function(a,b){for(var d,e=0;e<b.length;e++)d=b[e],c.localRootScopeFn(a,d)},c.localRootScopeFn=function(b,c){b[c]=function(b,d,e,f){return a[c]?a[c](b,d,e,f):null}},c.performCallbackCollection=function(a,b){angular.forEach(a,function(a){a(b)})},c.tabIsActive=function(){return document.hasFocus()},c}]),proySymphony.service("e911Service",["dataFactory","$rootScope","usefulTools",function(a,b,c){var d={e911CandidateDIDsByDomain:{}};d.registerE911Phone=function(c,d){var e={destination_uuid:c,address_details:d};return a.postOrderE911(e).then(function(a){if(a.data.success){var c=a.data.success.data;return c}return b.showErrorAlert(a.data.error.message),!1})},d.orderE911Address=function(c,d){d["default"]===!0&&(d["default"]="true");var e={domain_uuid:c,address_details:d};return a.postOrderNewE911Address(e).then(function(a){if(console.log(a.data),a.data.success){var c=a.data.success.data;return c}return b.showErrorAlert(a.data.error.message),!1})},d.getValidDIDs=function(b){return a.getValidDIDs(b).then(function(a){if(a.data.success){var b=a.data.success.data;return b=c.createObjectCollByItemProperty(b,"destination_number")}return!1})},d.getE911CandidateDIDs=function(b){return a.getValidE911CandidateDIDs(b).then(function(a){if(a.data.success){var e=d.e911CandidateDIDsByDomain[b]=a.data.success.data;return e=c.createObjectCollByItemProperty(e,"destination_uuid")}return!1})},d.getE911Registrations=function(b){return a.getE911Registrations(b).then(function(a){if(a.data.success.data){var b=a.data.success.data;return b=c.createObjectCollByItemProperty(b,"destination_uuid")}return!1})},d.assignCallerIdNumber=function(b,c){return a.getAssignE911(b,c).then(function(a){if(console.log(a.data),a.data.success){var b=a.data.success.data,c=b.extension;return c}return!1})},d.setDefaultE911Address=function(b){return a.getSetDefaultE911Address(b.e911_registration_uuid).then(function(a){return a.data})};return d}]),proySymphony.service("userService",["dataFactory","$filter","$rootScope","recordingService","$window","userContactService","_","$q","metaService",function(a,b,c,d,e,f,g,h,i){var j={audioChunks:[],usersByDomain:{},retrievingUsers:!1};j.findUsers=function(a,b){return j.retrievingUsers=!1,console.log("there"),j.loadUsers(a,b)},j.loadUsers=function(a,b){return j.retrievingUsers=!0,j.getUsers(a).then(function(c){return c?(console.log(c),c=j.filterUsersOnPresentContacts(c),console.log(c),j.usersByDomain[a]||(j.usersByDomain[a]=[]),b&&angular.copy([],j.usersByDomain[a]),angular.copy(c,j.usersByDomain[a]),j.usersByDomain[a]):!1})};return j.getUsers=function(b){return a.getUserInfos(b).then(function(a){if(console.log(a.data),a.data.success){var b=a.data.success.data;return b}return!1})},j.clearInfo=function(){j.usersByDomain={}},j.getUserInfoByUuid=function(b){return a.getActiveUser(b).then(function(a){return a.data.data?a.data.data:!1})},j.performMediaCheck=function(){return navigator.mediaDevices.getUserMedia({audio:!0}).then(function(a){return d.initializeRecorder(a),a.active?!0:!1})},j.filterUsersOnPresentContacts=function(a){var b;return a.filter(function(a){return b=f.getContactByUserUuid(a.id,a.domain_uuid),b?!0:null})},j.performOnLoadMediaCheck=function(){function a(){var a="We cannot access your camera and microphone",b='This is probably because you have not allowed access to your microphone or you do not have one plugged in. You can allow access by selecting the camera icon in the top right corner of your browser (in the address bar) and choosing "always allow."';c.showAlert(a,b)}j.performMediaCheck().then(function(b){b||a()},function(b){a()})},j.mergeUserColWithContacts=function(a){var b;return a.map(function(a){return b=f.getContactByUserUuid(a.id,a.domain_uuid),b?g.merge(b,a):a})},c.loadDomainsStatus=function(){a.getDomainsStatus(c.user.domain_uuid).then(function(a){console.log(a),c.domainsStatus=a.data.data,e.localStorage.setItem("domainsStatus",JSON.stringify(a.data.data))},function(a){c.msgContacts+="Error from contacts user: "+JSON.stringify(a,null,4)+"\n"})},j.isAdminGroupOrGreater=function(){var a=c.user.accessgroup;return"admin"===a||"KotterTech"===a||"superadmin"===a},j.isKotterTechOrGreater=function(){var a=c.user.accessgroup;return"KotterTech"===a||"superadmin"===a},j.isKotterTech=function(){var a=c.user.accessgroup;return"KotterTech"===a},i.registerOnRootScopeUserLoadCallback(function(){j.isAdminGroupOrGreater()&&j.findUsers(c.user.domain.domain_uuid)}),j}]),proySymphony.factory("chatMessages",["$websocket","$rootScope","__env","symphonyConfig","$cookies","$interval","_","notificationService","metaService",function(a,b,c,d,e,f,g,h,i){function j(a,b){return function(c){c(a,b)}}function k(){var a={seq:p.chatSeq++,action:"authentication_challenge",data:{token:e.get("accessToken")}};p.dataStream.send(JSON.stringify(a))}function l(){var a={seq:p.chatSeq++,action:"get_statuses",data:null};p.dataStream.send(JSON.stringify(a))}function m(a){c.enableDebug&&console.log("WEBSOCKET HAS BEEN OPENED TO MATTERMOST SERVER "+JSON.stringify(a)),c.enableDebug&&console.log("CHAT WEBSOCKET READYSTATE"),c.enableDebug&&console.log(p.dataStream.readyState),k()}function n(a){c.enableDebug&&console.log("WEBSOCKET HAS BEEN CLOSED TO MATTERMOST SERVER "+JSON.stringify(a)),c.enableDebug&&console.log("WEBSOCKET READYSTATE"),c.enableDebug&&console.log(p.dataStream.readyState),b.user||p.closeSocket(!0)}function o(a){c.enableDebug&&console.log("WEBSOCKET HASEXPERIENCE AN ERROR WITH MATTERMOST SERVER "+JSON.stringify(a)),c.enableDebug&&console.log("CHAT WEBSOCKET READYSTATE"),c.enableDebug&&console.log(p.dataStream.readyState),k()}var p={chatSeq:1,eventHandlers:{},wsAddress:null,dataStream:null,responseCallbacks:{}};return p.wsAddress=c.chatWebsocket?c.chatWebsocket:d.chatWebsocket,p.dataStream=a(p.wsAddress,null,{reconnectIfNotNormalClose:!0}),p.init=function(){p.dataStream.onOpen(m),p.dataStream.onClose(n),p.dataStream.onError(o),p.dataStream.onMessage(p.onMessage),p.mmWebsocketAlive=f(function(){l()},3e4)},p.sendMessage=function(a,b,c){var d={action:a,seq:p.chatSeq++,data:b};c&&(p.responseCallbacks[d.seq]=c),p.dataStream.send(JSON.stringify(d))},p.registerEventHandler=function(a,b){p.eventHandlers[a]||(p.eventHandlers[a]={handlers:[]}),p.eventHandlers[a].handlers.push(b)},p.onMessage=function(a){var b=JSON.parse(a.data),d=b.event,e=p.eventHandlers[d];if(e){var f=e.handlers;g.forEach(f,j(b.broadcast,b.data))}c.enableDebug&&console.log("New Message from Server - "+moment().format()),c.enableDebug&&console.log(a.data),"FAIL"==a.data.status&&k()},p.openSocket=function(){p.dataStream=a(p.wsAddress,null,{reconnectIfNotNormalClose:!0})},p.closeSocket=function(a){c.enableDebug&&console.log("Closing socket"),console.log(p.dataStream),p.dataStream.close()},p.init(),p}]),proySymphony.factory("chatWebsocket",["$q","$rootScope","$cookies","$websocket","$http","usefulTools","$interval","$timeout","$filter","$myModal","$location","$window","$auth","notificationService","mmApi","__env","symphonyConfig","userService","chatService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t={responseCallbacks:[],currentTypingUsers:{}};return t}]),proySymphony.factory("$myModal",["$uibModal","$uibModalStack",function(a,b){var c={open:function(b,c,d,e){return a.open({controller:"ModalInstanceCtrl",controllerAs:"vm",templateUrl:c||"views/modals/basicModal.html",size:b,resolve:{items:function(){return{title:d,message:e}}}})},openTemplate:function(c,d,e,f,g,h){e&&console.log(e);var i=!0;if(e)var j=e;else var j="md";var k=h&&"false"===h?!1:!0;d||(d={}),d.close=function(){b.dismissAll()},g&&(i=g),e&&(j=e);var l=a.open({animation:!0,templateUrl:c,controller:"ModalInstanceCtrl",controllerAs:"vm",size:j,keyboard:k,backdrop:i,windowClass:f,modalWindow:!0,resolve:{items:function(){return{data:d}}}});return l.result.then(function(){d&&d.onClose&&d.onClose()},function(){d&&d.onClose&&d.onClose()})}};return c}]),proySymphony.factory("usefulTools",["$location","$cookies","Slug","$http","$window","dataFactory","$rootScope","$anchorScroll","$mdDialog",function(a,b,c,d,e,f,g,h,i){var j={goToId:function(b){a.hash(b),h(),a.hash("")},datesDifferent:function(a,b){if(""==b)return!0;var c=moment(a).startOf("day"),d=moment(b).startOf("day");return c.diff(d,"days")>0},isNewDay:function(a,b){var c=!1;return""==b&&(c=!0),j.datesDifferent(a,b)&&(c=!0),c},timeDifference:function(a,b,c){if(""==b)return 1;var d=moment(a),e=moment(b);return d.diff(e,c)},cleanPhoneNumber:function(a){var b=c.slugify(a);return b.toString().trim().replace(/-/g,"")},showChevron:function(a,b,c){var d="";return a===b?(d="chevron-circle-down activesort padd5left",c&&(d="chevron-circle-up activesort padd5left"),"fa fa-"+d+" padd5left"):"fa fa-chevron-down"},funcPutIcon:function(a,b){if("Available"===a)return"fa fa-check-circle "+b+" cls-color-green-tkg";if("Away"===a)return"fa fa-clock-o "+b+" cls-color-yellow-tkg";if("Do Not Disturb"===a)return"fa fa-minus-circle "+b+" cls-color-red-tkg";if("Busy on Call"===a)return"fa fa-volume-control-phone "+b+" cls-color-red-tkg";if("Offline"===a||"Logged Out"===a)return"fa fa-times-circle-o "+b+" cls-color-lt-grey-tkg";!g.domainsStatus&&e.localStorage.getItem("domainsStatus")&&(g.domainsStatus=JSON.parse(e.localStorage.getItem("domainsStatus")));var c="fa-times-question";return angular.forEach(g.domainsStatus,function(b){b.status_name==a&&(c=b.status_icon)}),"fa "+c+" "+b},isPageHidden:function(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden},convertObjectToArray:function(a){var b=[];return angular.forEach(a,function(a){b.push(a)}),b},convertObjectToKeyValueArray:function(a){var b=[];for(var c in a){var d={};d[c]=a[c],b.push(d)}return b},isPhoneNumber:function(a){if(a){var b=c.slugify(a),d=b.toString().trim().replace(/-/g,"");return console.log(d),!isNaN(d)&&(10===d.length||11==d.length&&"1"===d.substr(0,1))}return!1},isValidEmail:function(a){if(!a)return!1;var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},roundNumber:function(a,b){var c=Math.pow(10,b),d=a*c,e=Math.round(d);return e/c},updateUserStatus:function(a){if(g.user){g.user.user_status=a.status_name,e.localStorage.setItem("currentUser",JSON.stringify(g.user));var b={status:a.status_name,status_uuid:a.status_uuid?a.status_uuid:null};g.userStatusIconClass=j.funcPutIcon(a.status_name,"fa-2x"),f.updateStatus(b).then(function(b){return b.data.error||"Offline"!=a.status_name,"Finished"},function(a){return console.log(a),"Error"})}},doGetCaretPosition:function(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b},randomString:function(a,b){b||(b="ABCDEFGHIJKLMNOPQRSYUVWXYZ0123456789");for(var c="",d=0;a>d;d++)c+=b.charAt(Math.floor(Math.random()*b.length));return c},getManagerStatus:function(){return f.getManagerEmulationStatus().then(function(a){return a.data.error?(console.log(a.data.error.message),[]):(g.emulationStatus=a.data.success.data,e.localStorage.setItem("emulationStatus",JSON.stringify(g.emulationStatus)),console.log("MANAGER EMULATION STATUS - USEFUL"),console.log(g.emulationStatus),g.emulationStatus)},function(a){return console.log(a),[]})},isExternalPage:function(){var b=["/login","/logout","/cloud/"],c=!1;return angular.forEach(b,function(b){-1!==a.path().indexOf(b)&&(c=!0)}),c},isDST:function(){var a=new Date;return a.dst()}};return Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},j.promptForInfo=function(a,b){return i.show(i.prompt().clickOutsideToClose(!0).title(a).textContent(b).ok("Okay"))},j.createObjectCollByItemProperty=function(a,b){var c={};return angular.forEach(a,function(a,d){c[a[b]]=a}),c},j.showAlert=function(a,b){return i.show(i.alert().clickOutsideToClose(!0).title(a).textContent(b).ok("Got it!"))},j.showSuccessAlert=function(a){return a||(a="That's a bingo!"),j.showAlert("Congratulations!",a)},j.showErrorAlert=function(a){return a||(a="Something went wrong."),j.showAlert("Uh-Oh :(",a)},j.removeRecordFromCollByUuid=function(a,b,c){return b.filter(function(b){return b[c]!==a})},j.spreadArrayAndArg=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);return c.push(b),c},j.find=function(a,b,c){var d;if(a)for(var e=0;e<a.length;e++)if(d=a[e],d[b]===c)return d;return null},j.remove=function(a,b,c){var d;if(a)for(var e=0;e<a.length;e++)if(d=a[e],d[b]===c)return a.splice(e,1);return null},j.arrayToObjectByProp=function(a,b,c){return c||(c={}),angular.forEach(a,function(a){c[a[b]]=a}),c},j}]).factory("focus",["$timeout","$window",function(a,b){return function(c){a(function(){var a=b.document.getElementById(c);a&&a.focus()},1e3)}}]),proySymphony.service("fileService",["$rootScope","$window","dataFactory","userContactService","$filter",function(a,b,c,d,e){var f={};return f.getShares=function(d,e,g){var h={user_uuid:d,from_date:e?e:new Date(moment().subtract(30,"days")),to_date:g?g:new Date};return console.log(h),c.postGetMyFileShares(h).then(function(c){if(console.log(c),c.error)return __env.enableDebug&&console.log(c.error.message),[];a.fileSharingList=c.data.success.shares,angular.forEach(c.data.success.shares,function(c){!a.nonContacts&&b.localStorage.getItem("nonContacts")&&(a.nonContacts=JSON.parse(b.localStorage.getItem("nonContacts"))),f.populateContact(d,c),c.original_filename=c.uploadfile.original_filename,c.upload_type=c.uploadfile.upload_type}),a.showTable=!0;var e={shareList:a.fileSharingList};return console.log(e),e},function(b){return a.msgContacts+="Error from File Sharing... : "+JSON.stringify(b,null,4)+"\n",[]})},f.populateContact=function(b,c){var f=d.contacts,g=a.nonContacts;if(console.log(g),b!==a.user.id){f=a.emulatedUserContacts,g=a.emulatedNonContacts;var h=e("getContactbyUserUUID")(d.contacts,b);h.extension}var i=e("getContactbyUUID")(f,c.contact_uuid);if(i)c.contact=i;else{var i=e("getContactbyEmail")(f,c.recipient_email);if(i)c.contact=i;else{var j={email:c.recipient_email,phone:null,name:c.recipient_name,color:randomColor({luminosity:"dark"})};if(c.recipient_email){var k=e("getNonContact")(g,j);k||(a.storeNonContact(j),k=j),c.noncontact=k}else c.noncontact=j}}},f.getFileTypeByMimeType=function(a){a=a.slice(a.lastIndexOf("/")+1);var b={jpeg:"jpg",pdf:"pdf","vnd.openxmlformats-officedocument.wordprocessingml.document":"doc","vnd.openxmlformats-officedocument.presentationml.presentation":"ppt","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xls",msword:"doc","vnd.ms-excel":"xls",csv:"csv",plain:"txt",html:"html_filetype","x-rar":"rar",zip:"zip",mp3:"mp3",m4a:"m4a",odt:"odt",mpeg:"mp3",mpg:"mpg",gif:"gif",png:"png","x-wav":"wav"};return b[a]?b[a]:"file"},f.uploadIsImage=function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)},f.downloadFileByUrl=function(b){var c=a.userToken,d=angular.element("<a></a>");d.attr("href",b+"?token="+c),d.attr("target","_blank"),d.attr("title","file"),d[0].click()},f.removeFileExtensionFromFilename=function(a){var b=a.split(".");return b.pop(),b.join(".")},f.getFileExtensionFromFilename=function(a){var b=a.split(".");return b.pop()},f.allowedCloudStorageMimeTypes=["image/jpg","image/jpeg","pdf","application/pdf","doc","application/msword","text/csv","text/html","txt","image/tiff","image/x-tiff","image/tiff","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.ms-excel","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","application/x-rar","application/rtf","audio/mpeg3","audio/x-mpeg-3","video/mpeg","video/x-mpeg","audio/wav","audio/x-wav","audio/x-ms-wma","audio/mpeg","video/avi","video/msvideo","video/x-msvideo","application/x-troff-msvideo","gif","image/gif","mp4","application/pptvnd.ms-powerpoint","application/vnd.ms-powerpoint","application/octet-stream","image/png","audio/mpeg3","audio/mp3","video/mp4","audio/x-m4a","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/gzip","application/tar","image/vnd.adobe.photoshop","application/tar+gz","application/x-7z-compressed","tar.gz","text/plain","application/zip","application/x-zip-compressed"],f.convertObjectToFormData=function(a,b,c){var d,e=b||new FormData;for(var g in a)a.hasOwnProperty(g)&&(d=c?c+"["+g+"]":g,"object"!=typeof a[g]||a[g]instanceof File?e.append(d,a[g]):f.convertObjectToFormData(a[g],e,g));return e},f}]),proySymphony.service("smsService",["$window","$rootScope","$uibModalStack","$location","symphonyConfig","__env","$filter","$cookies","$timeout","smsApi","usefulTools","dataFactory","userContactService","notificationService","metaService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){return"user"===a.contact_type}var q={teamUsers:{},waitingForNewThread:!1,availThreads:{},smsData:{},messageInc:1e3,threadInc:1e3};return q.init=function(a){if(console.log(a),a===b.user.id)q.currentUser=b.user;else{var c=_.filter(m.contacts,p);console.log(c),k.arrayToObjectByProp(c,"user_uuid",q.teamUsers),console.log(q.teamUsers),q.currentUser=q.teamUsers[a]}return q.getSmsThreads(a).then(function(a){if(h.get("goToThread")){var b=h.get("goToThread");h.remove("goToThread"),q.setCurrentThread(b)}return a})},q.setEmulationUser=function(a){q.init(a).then(function(){q.smsData={}})},q.setCurrentThread=function(a){var c=q.availThreads[a],d=null;return c.messages&&(d=c.messages[c.messages.length-1].message_uuid),q.getMessagesbyThread(a,q.currentUser.user_uuid,d).then(function(d){console.log(d);var e=d;q.processMessageData(e),c.messages=e,q.currentUser.id===b.user.id&&(c.unread_count=0,q.updateThreadCount(a)),q.smsData.currentThread=c,i(function(){k.goToId("sms-bottom")},0,!1)})},q.unreadMessages=function(){var a=0;return angular.forEach(q.availThreads,function(b){a+=b.unread_count}),a},q.removeThread=function(a){return j.getRemoveSmsThread(a).then(function(b){return b.data.success&&(q.availThreads[a].deleted="true"),b})},q.deleteMessage=function(a){return j.getRemoveSmsMessage(a.message_uuid).then(function(b){if(b.data.success){var c=g("getByUUID")(q.smsData.currentThread.messages,a.message_uuid,"message");null!==c&&(c===q.smsData.currentThread.messages.length-1&&(q.smsData.currentThread.most_recent=q.smsData.currentThread.messages[c-1]),q.smsData.currentThread.messages.splice(c,1))}return b})},q.getThreadsByContact=function(a,c,d){var e=[];return m.setContacts().then(function(c){var f=b.userContacts,h=g("getItemByUUID")(f,a,"contact");return angular.forEach(h.phones,function(a){var b=g("getThreadByPhone")(d,a.phone_number);null!==b&&e.push(b)}),e})},q.loadNewThread=function(a){return j.getThreadInfo(a,q.currentUser.id).then(function(b){return b.data.success?(q.availThreads[a]=b.data.success.data,!0):void 0})},q.handleNewMessage=function(a){var b=!1;if(a.from_number===a.user_sms&&(b=!0),"true"!==a.new_thread&&q.availThreads[a.thread_uuid]){if(q.restoreThreadIfDeleted(a),q.smsData.currentThread&&q.smsData.currentThread.thread_uuid===a.thread_uuid){var c=q.smsData.currentThread.messages,d=c[c.length-1],e=k.isNewDay(a.created_at,d?d.created_at:"");a.newDay=e,c.push(a),j.getSetMessageRead(a.message_uuid),q.availThreads[a.thread_uuid].most_recent=a,i(function(){k.goToId("sms-"+a.message_uuid)},0,!1)}else b||(q.availThreads[a.thread_uuid].unread_count+=1),q.availThreads[a.thread_uuid].most_recent=a;b||n.showSmsNotification(a,q.smsData.currentThread)}else q.loadNewThread(a.thread_uuid).then(function(c){console.log(q.availThreads),b||n.showSmsNotification(a,q.smsData.currentThread)})},q.restoreThreadIfDeleted=function(a){(null!==q.availThreads[a.thread_uuid].deleted||null!==q.availThreads[a.thread_uuid].deleted_at)&&(q.availThreads[a.thread_uuid].deleted=null,q.availThreads[a.thread_uuid].deleted_at=null);
},q.searchSmsMessages=function(a){return console.log(a),j.postSearchMessages(a).then(function(a){console.log(a);var b=a.data.success.data,c=[];return angular.forEach(b,function(a){var b=q.availThreads[a.thread_uuid];a.thread=b,c.push(a)}),c})},q.getSearchResults=function(a){var b=q.availThreads[a.thread_uuid];return b.searchInfo={},j.postGetSearchResult(a).then(function(a){if(console.log(a.data),a.data.success){var c=a.data.success.data;return q.processMessageData(c),b.searchInfo.messages=c,b}})},q.goToSearchResult=function(a){return q.getSearchResults(a).then(function(b){h.put("currentThread",b.thread_uuid),q.smsData.currentThread=b,i(function(){k.goToId("sms-"+a.message_uuid)},500,!1)})},q.showCurrentMessages=function(){console.log(q.smsData.currentThread),q.smsData.currentThread.messages?(delete q.smsData.currentThread.searchInfo,console.log(q.smsData.currentThread),q.scrollToBottom()):(delete q.smsData.currentThread.searchInfo,q.setCurrentThread(q.smsData.currentThread.thread_uuid))},q.scrollToBottom=function(){i(function(){k.goToId("sms-bottom")},1e3,!1)},q.updateThreadCount=function(a){j.updateThreadCount(a)},q.processMessageData=function(a){var b=0;angular.forEach(a,function(c){var d=k.isNewDay(c.created_at,0==b?"":a[b-1].created_at);c.newDay=d,b++})},q.getMessagesbyThread=function(a,b,c){return j.getSmsTextsbyThread(a,b,c).then(function(a){return a.data.error?(console.log(a.data.error.message),[]):a.data.success.data},function(a){return[]})},q.showTheads=function(){q.smsData.currentThread=null,b.contactsSelected=[],b.selectedContacts={}},q.blacklistNumber=function(a,c){var d={number:a,reach:c,userUuid:q.currentUser.id,added_by:b.user.id};return console.log(d),j.postAddBlacklist(d).then(function(a){if(console.log(a),a.data.success){var c=a.data.success.threads;return angular.forEach(c,function(a){delete q.availThreads[a.thread_uuid]}),q.showTheads(),{threads:c,blacklist:a.data.success.blacklist}}return console.log(a.data.error.message),b.showErrorAlert(a.data.error.message),[]})},q.getSmsThreads=function(a){return j.getSmsThreads(a).then(function(a){return a.data.error?(f.enableDebug&&console.log(a.data.error.message),[]):(console.log(a.data.success.data),q.availThreads=a.data.success.data,f.enableDebug&&console.log("AVAIL THREADS"),f.enableDebug&&console.log(q.availThreads),a.data)},function(a){return f.enableDebug&&console.log(a),[]})},q.prepareSmsRecipients=function(a){var c="",d="",e={};return a?c=a.length<11?"1"+a:a:q.smsData.currentThread?c=q.smsData.currentThread.contact_phone_number:b.contactsSelected&&(console.log(b.contactsSelected),b.contactsSelected.forEach(function(a){if(a.contact_mobile_number&&""!==a.contact_mobile_number){var b=a.contact_mobile_number.replace(/[^\/\d]/g,"");c+=(""!==c?"<":"")+(b.length<11?"1"+b:b),d+=(""!==d?"<":"")+(a.contact_uuid?a.contact_uuid:null),e={destination:c,contact_uuid:d}}else if(!a.contact_uuid&&""!==a.contact_name_full){var b=a.contact_name_full.replace(/[^\/\d]/g,"");c+=(""!==c?"<":"")+(b.length<11?"1"+b:b),d+=(""!==d?"<":"")+(a.contact_uuid?a.contact_uuid:null),e={destination:c,contact_uuid:d}}})),e?e:void 0},q.sendSmsMessage=function(a,b,c){var d=q.prepareSmsRecipients(c),e={src:q.currentUser.symphony_user_settings.sms_phone_number,dst:d.destination,contact_uuid:d.contact_uuid,message:a?a:b&&!a?"":null,media:b,sent_at:moment().format("YYYY-MM-DD HH:mm:ss")};if(q.smsData.currentThread&&-1!==e.dst.indexOf(q.smsData.currentThread.contact_phone_number)){var f=q.createDummyText(e);q.smsData.currentThread.messages.push(f),e.tempUuid=f.message_uuid,i(function(){k.goToId("sms-bottom")},0,!1)}return j.sendSmsMessage(e).then(function(a){if(a.data.success){var b=a.data.success.data;console.log(b);var c=0;return angular.forEach(b,function(a){if(a.tempUuid&&0===c){var b=g("getByUUID")(q.smsData.currentThread.messages,a.tempUuid,"message");null!==b&&(q.smsData.currentThread.messages[b]=a)}c>0&&q.smsData.currentThread.messages.push(a)}),!0}return a.data.error.message},function(a){return"We were unable to deliver your message."})},q.createDummyText=function(a){var b={thread_uuid:q.smsData.currentThread.thread_uuid?q.smsData.currentThread.thread_uuid:"tempThread-"+q.threadInc,message_uuid:"tempMessage-"+q.messageInc,message_type:"sms",message_direction:"out",from_number:a.src,to_number:a.dst,sent_at:moment().format("YYYY-MM-DD HH:mm:ss"),message:a.message?a.message:" "};return q.threadInc+=1,q.messageInc+=1,b},q.smsMessageNotFound=function(a){console.log(q.availThreads);var b=q.availThreads[a.thread_uuid];if(b&&b.messages){var c=g("getByUUID")(b.messages,a.message_uuid,"message");if(null!==c)return!1}return!0},q.clearInfo=function(){},o.registerOnRootScopeUserLoadCallback(function(){console.log(b.user.id),console.log("DOING SMS")}),q}]),proySymphony.service("callHistoryService",["$window","$filter","$timeout","callService","usefulTools","dataFactory","userContactService","$rootScope",function(a,b,c,d,e,f,g,h){var i={};return i.retrieveCallHistoryByContact=function(){var b={user_uuid:h.callHistory.user_uuid,from_date:h.callHistory.fromDate?h.callHistory.fromDate:new Date(moment().subtract(30,"days")),to_date:h.callHistory.toDate?h.callHistory.toDate:new Date,contact_uuid:h.callHistory.contact_uuid?h.callHistory.contact_uuid:null};return console.log(b),f.postRetrieveCallsByContact(b).then(function(b){var c=[];return __env.enableDebug&&console.log("GET HISTORY BY CONTACT"),__env.enableDebug&&console.log(b.data),b.data.error?__env.enableDebug&&console.log(b.data.error.message):(__env.enableDebug&&console.log("HISTORY"),__env.enableDebug&&console.log(b.data.success.data),h.userContacts||(h.userContacts=JSON.parse(a.localStorage.getItem("userContacts"))),c=i.processHistory(b.data.success)),c})},i.processCall=function(a){var c=h.userContacts,d=h.nonContacts,e=h.user.user_ext;if(moment(a.start_stamp).isDST(),h.callHistory.user_uuid!==h.user.id){c=h.emulatedUserContacts,d=h.emulatedNonContacts;var g=b("getContactbyUserUUID")(h.userContacts,h.callHistory.user_uuid);e=g.extension}if(a.isContact=!1,a.contact_name=null,a.isUser=!1,a.contact=null,a.contact_uuid&&(a.contact=b("getItemByUUID")(c,a.contact_uuid,"contact"),a.contact&&(a.isContact=!0,a.contact_name=a.contact.contact_name_full,"outbound"===a.call_direction&&(a.contact_number=a.destination_number),"inbound"===a.call_direction&&(a.contact_number=a.caller_id_number))),a.description="",(1e4==a.destination_number||a.destination_number==="1"+a.caller_id_number)&&(a.description="(Conference Call)"),a.destination_number==="10"+a.caller_id_number&&(a.description="(Three-way Call)"),a.contact||"outbound"!==a.call_direction){if(!a.contact&&"inbound"===a.call_direction&&(a.contact_number=a.caller_id_number,a.contact=b("getContactbyPhone")(c,a.caller_id_number),a.contact||(a.contact=b("getContactbyExtension")(c,a.caller_id_number)),a.contact&&(a.isContact=!0,a.contact_name=a.contact.contact_name_full,f.getUpdateCallContact(a.call_history_fs_uuid,a.contact.contact_uuid)),!a.contact)){var j={user_uuid:h.callHistory.user_uuid,email:null,phone:a.caller_id_number,name:i.isPhoneNumber(a.caller_id_name)?null:a.caller_id_name,color:randomColor({luminosity:"dark"})},k=null!==d?b("getNonContact")(d,j):null;k?a.noncontact=k:(h.storeNonContact(j),a.noncontact=j)}}else if(a.contact_number=a.destination_number,a.contact=b("getContactbyPhone")(c,a.destination_number),a.contact||(a.contact=b("getContactbyExtension")(c,a.destination_number)),a.contact&&(a.isContact=!0,a.contact_name=a.contact.contact_name_full,f.getUpdateCallContact(a.call_history_fs_uuid,a.contact.contact_uuid)),!a.contact){var j={user_uuid:h.callHistory.user_uuid,email:null,phone:a.destination_number,name:null,color:randomColor({luminosity:"dark"})},k=null!==d?b("getNonContact")(d,j):null;k?a.noncontact=k:(h.storeNonContact(j),a.noncontact=j)}return a.isContact&&a.contact&&a.contact.contact_uuid==h.user.contact_uuid&&(a.isUser=!0),a},i.isPhoneNumber=function(a){return e.isPhoneNumber(a)},i.getCallHistory=function(){h.showTable=!1,h.loading=!0;var b=h.callHistory;h.user||(h.user=JSON.parse(a.localStorage.getItem("currentUser"))),b.user_uuid||(b.user_uuid=h.user.id);var c={user_uuid:b.user_uuid,from_date:b.fromDate?b.fromDate:new Date(moment().subtract(30,"days")),to_date:b.toDate?b.toDate:new Date};return console.log(c),h.loading=!0,f.postGetCallHistory(c).then(function(b){var c=[];return b.data.error?__env.enableDebug&&console.log(b.data.error.message):(__env.enableDebug&&console.log("HISTORY"),__env.enableDebug&&console.log(b.data.success.calls),c=b.data.success.calls,angular.forEach(c,function(a){"answered"==a.call_status||"unanswered"==a.call_status||"declined"==a.call_status?a.callstat=a.call_direction+a.call_status:a.callstat=a.call_status}),c&&(h.userContacts||(h.userContacts=JSON.parse(a.localStorage.getItem("userContacts"))),angular.forEach(c,function(a){a=i.processCall(a),void 0==a.contact_name?a.from_to=a.contact_number:a.from_to=a.contact_name}))),h.showTable=!0,h.loading=!1,c})},i.processHistory=function(a){var c=h.callHistory,d=h.userContacts,e=h.nonContacts,f=h.user.user_ext;if(a.voicemailfiles&&(i.voicemailFilenames=a.voicemailfiles),c.user_uuid!==h.user.id){d=h.emulatedUserContacts,e=h.emulatedNonContacts;var g=b("getContactbyUserUUID")(h.userContacts,c.user_uuid);f=g.extension}if(null!==a.calls){c.totalResults=a.totalcount,c.totalPages=Math.ceil(c.totalResults/c.perPage),c.maxPages&&(c.totalPages=Math.min(c.totalPages,c.maxPages)),console.log(a.calls);var j=a.data;j.forEach(function(a){if(a.duration=parseInt(a.duration),a.caller_id_number.length<12){a.voicemail_file=null;var c=b("getVoicemailByUUID")(i.voicemailFilenames,a.uuid);if(null!==c&&(a.voicemail_file=c),a.isContact=!1,a.isUser=!1,a.email="",a.status=null,a.destination_number&&-1!==a.destination_number.indexOf("*99")&&(a.destination_number=a.destination_number.substring(3),a.sent_to_voicemail=!0),a.caller_id_number.length>10&&(a.caller_id_number=a.caller_id_number.substring(1)),"outbound"===a.direction){a.contact_name="",a.contact_number=a.destination_number,a.status="Answered",a.icon=50,null==a.answer_stamp&&(a.status="Not Answered",a.icon=60,a.duration=0),("recv_cancel"===a.sip_hangup_disposition||"NO_ROUTE_DESTINATION"===a.hangup_cause||"INCOMPATIBLE_DESTINATION"===a.hangup_cause||"ORIGINATOR_CANCEL"===a.hangup_cause||"BEARERCAPABILITY_NOTAVAIL"===a.hangup_cause||"LOSE_RACE"===a.hangup_cause||"NO_ANSWER"===a.hangup_cause||"MANAGER_REQUEST"===a.hangup_cause||"RECOVERY_ON_TIMER_EXPIRE"===a.hangup_cause||"DESTINATION_OUT_OF_ORDER"===a.hangup_cause)&&(a.status="Not Answered",a.icon=60,a.duration=0);var e=b("getContactbyPhone")(d,a.destination_number);e||(e=b("getContactbyExtension")(d,a.destination_number)),null!==e&&(a.contact=e,a.contact_name=e.contact_name_given+" "+e.contact_name_family,a.email=e.contact_email_address?e.contact_email_address:"",a.isContact=!0)}else if("inbound"===a.direction){a.icon=80,null===a.answer_stamp&&(a.status="Not Answered",a.icon=20,a.duration=0),"send_bye"===a.sip_hangup_disposition&&a.billsec<3&&(a.status="User Hangup",a.icon=25,a.duration=0),a.sent_to_voicemail&&(a.status="Sent to Voicemail",a.icon=30),("recv_cancel"===a.sip_hangup_disposition||"NO_ROUTE_DESTINATION"===a.hangup_cause||"INCOMPATIBLE_DESTINATION"===a.hangup_cause||"ORIGINATOR_CANCEL"===a.hangup_cause||"BEARERCAPABILITY_NOTAVAIL"===a.hangup_cause||"LOSE_RACE"===a.hangup_cause||"NO_ANSWER"===a.hangup_cause||"MANAGER_REQUEST"===a.hangup_cause||"RECOVERY_ON_TIMER_EXPIRE"===a.hangup_cause||"DESTINATION_OUT_OF_ORDER"===a.hangup_cause)&&(a.status="Caller Cancel",a.icon=40,a.duration=0),null!==a.recording_file&&(a.status="Answered - Has Recording",a.icon=80),a.voicemail_file&&(a.status="Has Voicemail",a.icon=10),a.contact_name=a.caller_id_name,a.contact_number=a.caller_id_number;var e=b("getContactbyPhone")(d,a.caller_id_number);!e&&a.caller_id_number.length<9&&(e=b("getContactbyExtension")(d,a.caller_id_number)),null!==e&&(a.contact=e,a.contact_name=e.contact_name_given+" "+e.contact_name_family,a.email=e.contact_email_address?e.contact_email_address:"",a.isContact=!0)}else if("local"===a.direction||null===a.direction){if(a.destination_number===f){a.icon=80,a.contact_name=a.caller_id_name;var e=b("getContactbyExtension")(d,a.caller_id_number);null!==e&&(a.contact=e,a.contact_name=e.contact_name_given+" "+e.contact_name_family,a.email=e.contact_email_address?e.contact_email_address:"",a.isContact=!0),a.contact_number=a.caller_id_number}else{a.icon=50,a.contact_name="",a.contact_number=a.destination_number;var e=b("getContactbyPhone")(d,a.destination_number);null!==e&&(a.contact=e,a.contact_name=e.contact_name_given+" "+e.contact_name_family,a.email=e.contact_email_address?e.contact_email_address:"",a.isContact=!0)}a.voicemail_file&&(a.status="Has Voicemail",a.icon=10)}else null===a.direction&&(a.contact_number=a.caller_id_number,a.contact_name="");a.isContact&&a.contact&&a.contact.contact_uuid==h.user.contact_uuid&&(a.isUser=!0)}})}return h.callHistory=c,j},i}]),proySymphony.factory("mmApi",["$http","__env","symphonyConfig","$cookies","$window","$rootScope","dataFactory","$q","userService","$auth",function(a,b,c,d,e,f,g,h,i,j){function k(){return{headers:{Authorization:"Bearer "+d.get("accessToken")}}}function l(){return{headers:{"Content-Type":void 0,Authorization:"Bearer "+d.get("accessToken")},transformRequest:angular.identity}}var m=b.mmUrl&&""!=b.mmUrl?b.mmUrl:c.chatUrl,n={};return n.doLogin=function(b){return a.post(m+"/users/login",b)},n.getMe=function(b){return a.get(m+"/users/"+b,k())},n.updateUserStatus=function(b,c){return a.put(m+"/users/"+b+"/status",c,k())},n.getUserSessions=function(b){return a.get(m+"/users/"+b+"/sessions",k())},n.getUserAudits=function(b){return a.get(m+"/users/"+b+"/audits",k())},n.createToken=function(b,c){return a.post(m+"/users/"+b+"/tokens",c,k())},n.revokeSession=function(b,c){return a.post(m+"/users/"+b+"/sessions/revoke",c,k())},n.getUsersChannels=function(b,c){return b||(b=f.mmProfile.id),c||(c=f.teamId),a.get(m+"/users/"+b+"/teams/"+c+"/channels",k())},n.getUsersByIds=function(b){return a.post(m+"/users/ids",b,k())},n.getTeamMembers=function(b){return a.get(m+"/teams/"+b+"/members",k())},n.getTeamInfo=function(b){return a.get(m+"/teams/"+b,k())},n.getPublicChannels=function(b,c,d){return c||(c=0),d||(d=100),a.get(m+"/teams/"+b+"/channels?page="+c+"per_page="+d,k())},n.getChannelExtraInfo=function(b,c){return a.get(m+"/teams/"+f.teamId+"/channels/"+b+"/users/0/200",k())},n.getUsersInChannel=function(b,c,d){return c||(c=0),d||(d=100),a.get(m+"/channels/"+b+"/members?page="+c+"per_page="+d,k())},n.getChannelMembers=function(){return a.get(m+"/users/"+f.mmProfile.id+"/teams/"+f.teamId+"/channels/members",k())},n.getChannelMember=function(b,c){return a.get(m+"/channels/"+b+"/members/"+c,k())},n.postChannelView=function(b,c){return a.post(m+"/channels/members/"+b+"/view",c,k())},n.updateChannelRoles=function(b,c,d){return a.put(m+"/channels/"+b+"/members/"+c+"/roles",d,k())},n.addMembertoChannel=function(b,c){return a.post(m+"/channels/"+b+"/members",c,k())},n.deleteMemberFromChannel=function(b,c){return a["delete"](m+"/channels/"+b+"/members/"+c,k())},n.deleteChannel=function(b){return a["delete"](m+"/channels/"+b,k())},n.getChannelPosts=function(b){console.log(b);var c="";return b.before&&(c="&before="+b.before),b.after&&(c="&after="+b.after),b.since&&(c="&since="+b.since),a.get(m+"/channels/"+b.channelId+"/posts?page="+b.page+"&per_page="+b.limit+c,k())},n.getChannel=function(b){return a.get(m+"/channels/"+b,k())},n.getChannelStats=function(b){return a.get(m+"/channels/"+b+"/stats",k())},n.getMoreTeamChannels=function(b,c,d){return c||(c=0),d||(d=50),a.get(m+"/teams/"+b+"/channels/more/"+c+"/"+d,k())},n.createNewChannel=function(b){return a.post(m+"/channels",b,k())},n.updateChannel=function(b){return a.put(m+"/channels/"+b.id,b,k())},n.patchChannel=function(b,c){return a.put(m+"/channels/"+c+"/patch",b,k())},n.postCreateDirectChannel=function(b,c){var d=[b,c];return a.post(m+"/channels/direct",JSON.stringify(d),k())},n.postJoinChannel=function(b){var c={user_id:f.mmProfile.id,channel_id:b};return a.post(m+"/channels/"+b+"/members",c,k())},n.postLeaveChannel=function(b){return a["delete"](m+"/channels/"+b+"/members/"+f.mmProfile.id,k())},n.updateStatus=function(b,c){var d={active:b};return a.put(m+"/users/"+c+"/active",d,k())},n.getAllUserPreferences=function(b){return a.get(m+"/users/"+b+"/preferences",k())},n.getUserPreference=function(b,c){return a.get(m+"/users/"+f.mmProfile.id+"/preferences/"+b+"/name/"+c,k())},n.getUserPreferencesCategory=function(b){return a.get(m+"/users/"+f.mmProfile.id+"/preferences/"+b,k())},n.setUserPreferences=function(b,c){return a.put(m+"/users/"+c+"/preferences",b,k())},n.sendNewPost=function(b){return a.post(m+"/posts",b,k())},n.postDeleteChatPost=function(b){return a["delete"](m+"/posts/"+b,k())},n.updateChatPost=function(b){return a.put(m+"/posts/"+b.id,b,k())},n.getSinglePost=function(b){return a.get(m+"/posts/"+b,k())},n.getFileInfoPosts=function(b){return a.get(m+"/posts/"+b+"/files/info",k())},n.patchPost=function(b,c){return a.put(m+"/posts/"+c+"/patch",b,k())},n.sendFile=function(b){return a.post(m+"/files",b,l())},n.getPublicLink=function(b){return a.get(m+"/files/"+b+"/link",k())},n.getFile=function(b){return a.get(m+"/files/"+b,k())},n.getFileMetaData=function(b){return a.get(m+"/files/"+b+"/info",k())},n.getFileThumbnail=function(b){return a.get(m+"/files/"+b+"/thumbnail",k())},n.getFilePreview=function(b){return a.get(m+"/files/"+b+"/preview",k())},n.postChatSearch=function(b){return a.post(m+"/teams/"+f.teamId+"/posts/search",b,k())},n.getAllTeams=function(b,c){return b||(b=0),c||(c=60),a.get(m+"/teams?page="+b+"&per_page="+c,k())},n.getUserByUsername=function(b){return a.get(m+"/users/email/"+b,k())},n.getTeamMembers=function(b){return a.get(m+"/teams/"+b+"/members",k())},n.getUsersTeams=function(b){return a.get(m+"/users/"+b+"/teams",k())},n}]),proySymphony.factory("dataFactory",["$http","__env","symphonyConfig","$window","$rootScope","$location","$q",function(a,b,c,d,e,f,g){function h(){var a="";return e.userToken&&""!=e.userToken?a={headers:{Authorization:"Bearer "+e.userToken}}:d.localStorage.getItem("userToken")&&""!=d.localStorage.getItem("userToken")&&(e.userToken=d.localStorage.getItem("userToken"),a={headers:{Authorization:"Bearer "+e.userToken}}),a}function i(){var a="";return e.userToken&&""!=e.userToken?a={headers:{"Content-Type":void 0,Authorization:"Bearer "+e.userToken},transformRequest:angular.identity}:d.localStorage.getItem("userToken")&&""!=d.localStorage.getItem("userToken")&&(e.userToken=d.localStorage.getItem("userToken"),a={headers:{"Content-Type":void 0,Authorization:"Bearer "+e.userToken},transformRequest:angular.identity}),a}var j=b.apiUrl&&""!==b.apiUrl?b.apiUrl:c.onescreenUrl,k={};return k.getLanguages=function(){return a.get(j+"/info/languages")},k.getStates=function(){return a.get(j+"/info/states")},k.getTimezones=function(){return a.get(j+"/info/timezones")},k.getTaxesAndFees=function(){return a.get(j+"/info/taxesandfees")},k.postCheckForRefresh=function(b){return a.post(j+"/user/checkrefresh",b,h())},k.postSendRefresh=function(b){return a.post(j+"/user/sendrefresh",b)},k.postSubmitSignup=function(b,c){return a.post(j+"/user/signup/"+c,b)},k.getLead=function(b){return a.get(j+"/user/get/lead/"+b)},k.getActiveUser=function(b){return b?a.get(j+"/user/info/"+b,h()):a.get(j+"/user/info",h())},k.getUserInfos=function(b){return a.get(j+"/user/userinfos/"+b,h())},k.deleteBridgeUser=function(b){return a.post(j+"/admin/deleteuser",b,h())},k.deleteBridgeDomain=function(b){return a.post(j+"/admin/deleteagency",b,h())},k.suspendBridgeDomain=function(b){return a.post(j+"/admin/suspendagency",b,h())},k.postSendChatNotice=function(b){return a.post(j+"/user/sendchatnotice",b,h())},k.getRefreshToken=function(){return a.get(j+"/api/token",h())},k.changeUserAvatar=function(b){return a.post(j+"/user/change-picture",b,i())},k.getSymphonyProfilebyMattermostId=function(b){return a.get(j+"/user/chat/getprofilebymmid/"+b,h())},k.getMattermostUserIdByUserUUID=function(b){return a.get(j+"/user/chat/getmmidbyuuid/"+b,h())},k.updateStatus=function(b){return a.post(j+"/user/updatestatus",b,h())},k.putUpdateSetting=function(b){return a.put(j+"/user/updatesetting",b,h())},k.forgotPassword=function(b){return a.post(j+"/password/useemail",b)},k.getResetToken=function(b){return b||(b=e.user.id),a.get(j+"/user/getpasstoken/"+b)},k.getChatPass=function(){return a.get(j+"/user/chat/getpass",h())},k.createChatFavorite=function(b,c){return a.get(j+"/user/chat/createchatfavorite/"+b+"/"+c,h())},k.deleteChatFavorite=function(b){return a.get(j+"/user/chat/deletechatfavorite/"+b,h())},k.getUserChatFavorites=function(b){return a.get(j+"/user/chat/getuserfavorites/"+b,h())},k.resetPassword=function(b){return a.post(j+"/password/reset",b)},k.doUserCreation=function(b){return a.post(j+"/user/create",b,h())},k.addFmFm=function(b){return a.post(j+"/user/addfmfm",b,h())},k.getToggleGreenboxStatus=function(b){return a.get(j+"/user/greenboxstatus/"+b,h())},k.getToggleGreenboxStatus=function(b){return a.get(j+"/user/greenboxstatus/"+b,h())},k.getSetNotificationsStatus=function(b,c){return c||(c=e.user.id),a.get(j+"/user/setnotifications/"+b+"/"+c,h())},k.getSetOutOfOfficeStatus=function(b,c){return c||(c=e.user.id),a.get(j+"/user/setoutofoffice/"+b+"/"+c,h())},k.getSetOutOfOfficeResponse=function(b,c){return c||(c=e.user.id),a.get(j+"/user/setoooresponse/"+b+"/"+c,h())},k.getNotificationsStatus=function(b){return b||(b=e.user.id),a.get(j+"/user/getnotificationstatus/"+b,h())},k.transferCall=function(b,c,d){return console.log(b,c,d),a.get(j+"/rab/attxfer/"+b+"/"+c+"/"+d)},k.getAddCardStripe=function(b){return a.get(j+"/payment/addcard/"+b,h())},k.postAddStripePayment=function(b){return a.post(j+"/payment/addpayment",b,h())},k.generateInvoice=function(b){return a.get(j+"/payment/generateinvoice/"+b,h())},k.getUserContactsOnly=function(b,c){return b||(b=e.user.domain_uuid),c||(c=e.user.id),a.get(j+"/user/usercontacts/"+b+"/"+c,h())},k.postGetContacts=function(b){return a.post(j+"/user/contacts",b,h())},k.getToggleFavorite=function(b){return a.get(j+"/user/contact/favorite/"+b,h())},k.addContact=function(b){return a.post(j+"/user/contact/new",b,h())},k.postImportUserContacts=function(b){return a.post(j+"/user/contacts/import",b,h())},k.getDeleteUserContact=function(b){return a.get(j+"/user/contact/delete/"+b,h())},k.postUpdateContactInfo=function(b){return a.post(j+"/user/contact/update",b,h())},k.postUpdateContactPhone=function(b){return a.post(j+"/user/contact/update-phone",b,h())},k.deleteContactPhone=function(b){return a.get(j+"/user/contact/delete-phone/"+b,h())},k.updateContactSetting=function(b){return a.post(j+"/user/contact/setting",b,h())},k.postUpdateContactColor=function(b){return a.post(j+"/user/contact/update-color",b,h())},k.getSymphonyProfilebyMMID=function(b){return a.get(j+"/user/chat/getprofilebymmid/"+b,h())},k.postCheckIfContactHashExists=function(b){return a.post(j+"/user/contact/hashexists",b,h())},k.postCreateGroup=function(b){return a.post(j+"/contacts/groups/create",b,h())},k.postUpdateGroup=function(b){return a.post(j+"/contacts/groups/update",b,h())},k.postAddContactToGroup=function(b){return a.post(j+"/contacts/groups/addcontacttogroup",b,h())},k.getGroups=function(){return a.get(j+"/contacts/groups",h())},k.getViewableContactGroups=function(b){return a.get(j+"/contacts/viewablegroups/"+b,h())},k.postUpdateGroupContactList=function(b){return a.post(j+"/contacts/groups/updatecontactlist",b,h())},k.postUpdateGroupContactViewerList=function(b){return a.post(j+"/contacts/groups/updategroupviewerlist",b,h())},k.deleteGroup=function(b){return a.post(j+"/contacts/groups/delete",b,h())},k.deleteGroupContact=function(b){return a.post(j+"/contacts/groups/removecontact",b,h())},k.deleteGroupFromViewerGroup=function(b){return a.post(j+"/contacts/groups/removegroupviewgroup",b,h())},k.deleteUserFromViewerGroup=function(b){return a.post(j+"/contacts/groups/removegroupviewuser",b,h())},k.setManagersList=function(b){return a.post(j+"/contacts/groups/setmanagerslist",b,h())},k.postToggleGroupHide=function(b){return a.post(j+"/contacts/groups/togglehide",b,h())},k.getGmailAuthUrl=function(){return a.get(j+"/gmailauthurl",h())},k.postGetGmailContacts=function(b){return a.post(j+"/gmailcontacts",b,h())},k.getGiphyGifByText=function(b){return a.get(j+"/giphy/"+b,h())},k.postCreateChatMacro=function(b){return a.post(j+"/chatmacro/create",b,h())},k.getChatMacrosByDomain=function(b){return a.get(j+"/chatmacro/all/"+b,h())},k.getDeleteMacroByUuid=function(b){return a.get(j+"/chatmacro/delete/"+b,h())},k.postUpdateMacro=function(b){return a.post(j+"/chatmacro/update/",b,h())},k.fileUpload=function(b){return a.post(j+"/media/upload",b,h())},k.postResendFileNotice=function(b){return a.post(j+"/media/resendnotice",b,h())},k.getMyFiles=function(b){return a.get(j+"/media/my-files/"+b,h())},k.getMyFileShares=function(b){return a.get(j+"/media/my-fileshares/"+b,h())},k.postGetMyFileShares=function(b){return a.post(j+"/media/my-fileshares",b,h())},k.postGetCallHistory=function(b){return a.post(j+"/call/gethistory",b,h())},k.getUpdateCallContact=function(b,c){return a.get(j+"/call/updatecontact/"+b+"/"+c,h())},k.postRetrieveCallsByContact=function(b){return a.post(j+"/call/history/contact",b,h())},k.postSoftDeleteCallHistory=function(b){return a.post(j+"/call/history/softdelete",b,h())},k.getVoicemailFilenames=function(b){return a.get(j+"/call/getvoicemailfilenames/"+b,h())},k.getRecordingFilenames=function(b){return a.get(j+"/call/getrecordingfilenames/"+b,h())},k.postRetrieveVisualVoicemailList=function(b){return a.post(j+"/voicemail/visual",b,h())},k.removeVisualVoicemail=function(b){return a.get(j+"/voicemail/visual/remove/"+b,h())},k.getRetrieveRecordingslList=function(b){return a.get(j+"/call/recordings/retrieve/"+b,h())},k.removeRecording=function(b){return a.get(j+"/call/recordings/remove/"+b,h())},k.getUnreadCount=function(){return a.get(j+"/voicemail/unread",h())},k.getSaveVoicemail=function(b){return a.get(j+"/voicemail/visual/save/"+b,h())},k.getResetMissedCalls=function(b){return a.get(j+"/call/resetmissed/"+b,h())},k.getMissedCallCount=function(b){return a.get(j+"/call/missedcount/"+b,h())},k.getCurrentCalls=function(){return a.get(j+"/callcenter/getcalls",h())},k.getListenCall=function(b,c){return a.get(j+"/rab/listen/"+e.user.user_ext+"@"+e.user.domain.domain_name+"/"+c,h())},k.getWhisperCall=function(b,c){return a.get(j+"/rab/whisper/"+e.user.user_ext+"@"+e.user.domain.domain_name+"/"+c,h())},k.getBargeCall=function(b,c){return a.get(j+"/rab/barge/"+e.user.user_ext+"@"+e.user.domain.domain_name+"/"+c,h())},k.getStartRecordCall=function(b){return a.get(j+"/rab/recordcall/"+e.user.domain.domain_name+"/"+b+"/start",h())},k.getStopRecordCall=function(b){var c=j+"/rab/recordcall/"+e.user.domain.domain_name+"/"+b+"/stop";return a.get(c,h())},k.getCallState=function(b){return a.get(j+"/call/getstate/"+b+"/"+e.user.domain.domain_name,h())},k.getVideoSessionIds=function(b,c){return a.get(j+"/conference/sessions/check/"+b+"/"+e.user.domain_uuid+"/"+e.user.id+"/"+c,h())},k.getCheckRoom=function(b,c){return a.get(j+"/conference/roomcheck/"+e.user.id+"/"+e.user.domain_uuid+"/"+b+"/"+c,h())},k.getVideoArchives=function(b,c){return a.get(j+"/conference/archives/"+b+"/"+c,h())},k.getRemoveArchive=function(b){return a.get(j+"/conference/archive/remove/"+b+"/"+e.user.id,h())},k.sendTokboxInvite=function(b){return a.post(j+"/conference/sendinvite",b,h())},k.getVideoConference=function(b){return a.get(j+"/videoconference/get/"+b,h())},k.getResetVideoConferenceAdminLink=function(){return a.get(j+"/videoconference/resetadminlink",h())},k.getVideoConferenceInvite=function(b){return a.get(j+"/videoconference/getinvite/"+b,h())},k.getVideoConferenceByUuid=function(b){return a.get(j+"/videoconference/getbyuuid/"+b,h())},k.postSendVideoConferenceInvites=function(b){return a.post(j+"/videoconference/sendinvites",b,h())},k.postResendVideoConferenceInvite=function(b){return a.post(j+"/videoconference/resendinvite",b,h())},k.postDisableVideoConferenceInvite=function(b){return a.post(j+"/videoconference/disableinvite",b,h())},k.checkVideoSession=function(b){return a.get(j+"/videoconference/checksession/"+b)},k.getVideoConferenceSessions=function(b){return a.get(j+"/videoconference/sessions/"+b,h())},k.getNonContacts=function(b){return a.get(j+"/noncontact/"+b,h())},k.postNonContact=function(b){return a.post(j+"/noncontact/store",b,h())},k.updateNonContact=function(b){return a.post(j+"/noncontact/update",b,h())},k.getScreenRoom=function(b){return a.get(j+"/screenshare/get/hash/"+b)},k.getScreenshareInvite=function(b){return a.get(j+"/screenshare/get/uuid/"+b)},k.getCloseScreenRoom=function(b){return a.get(j+"/screenshare/close/"+b)},k.postLockScreenShareRoom=function(b){return a.post(j+"/screenshare/lock",b,h())},k.getCreateConference=function(b){return console.log(j+"/conference/create/"+b.domain+"/"+b.participants),a.get(j+"/conference/create/"+b.domain+"/"+b.participants,h())},k.postCreateConference=function(b){return a.post(j+"/conference/create",b,h())},k.getConferenceConfiguration=function(){return a.get(j+"/conference/getconfig/")},k.getEndConference=function(b){return a.get(j+"/conference/end/"+b)},k.getListConferences=function(b){return a.get(j+"/conference/list/"+b)},k.listConferenceUsers=function(b){return a.get(j+"/conference/listbyname/"+b)},k.getHangupUser=function(b,c){return console.log(b,c),a.get(j+"/conference/hangup/"+b+"/"+c)},k.getMuteUser=function(b,c){return a.get(j+"/conference/mute/"+b+"/"+c)},k.getUnmuteUser=function(b,c){return a.get(j+"/conference/unmute/"+b+"/"+c)},k.recodStartConference=function(b){return a.get(j+"/conference/record/start/"+b,h())},k.recordStopConference=function(b){return a.get(j+"/conference/record/stop/"+b,h())},k.muteAllConference=function(b){return a.get(j+"/conference/muteall/"+b,h())},k.unMuteAllConference=function(b){return a.get(j+"/conference/unmuteall/"+b,h())},k.lockConference=function(){return a.get(j+"/conference/lock/",h())},k.unLockConference=function(){return a.get(j+"/conference/unlock/",h())},k.conferenceHoldAll=function(b){return a.get(j+"/conference/holdall/"+b,h())},k.conferenceUnholdAll=function(b){return a.get(j+"/conference/unholdall/"+b,h())},k.postCreatePermissionGroup=function(b){return a.post(j+"/permissions/group/create",b,i())},k.postUpdatePermissionGroup=function(b){return a.post(j+"/permissions/group/update",b,h())},k.postRemovePermissionGroupMember=function(b){return a.post(j+"/permissions/group/removemember",b,h())},k.getPermissionCommunications=function(){return a.get(j+"/permissions/communications",h())},k.getPermissionGroups=function(b){return a.get(j+"/permissions/groups/"+b,h())},k.getRemovePermissionGroup=function(b){return a.get(j+"/permissions/group/remove/"+b,h())},k.getManagerEmulationStatus=function(){return a.get(j+"/permissions/emulationstatus",h())},k.postGetUserProdStats=function(b){return a.post(j+"/status/userproductivity/user",b,h())},k.postGetUserProdStatsDomain=function(b){return a.post(j+"/status/userproductivity/company",b,h())},k.postGetUserProdStats=function(b){return a.post(j+"/status/userproductivity/user",b,h())},k.postGetUserProdStatsDomain=function(b){return a.post(j+"/status/userproductivity/company",b,h())},k.getCallStats=function(b){return a.post(j+"/rab/stats",b,h())},k.postUpdateDashboard=function(b){return console.log(b),a.post(j+"/user/dashboard/update",b,h())},k.getSortedTiles=function(){return a.get(j+"/user/dashboard/alpha",h())},k.getResetTiles=function(){return a.get(j+"/user/dashboard/reset",h())},k.postOrderDid=function(b){return a.post(j+"/vfax/orderdid",b,h())},k.getFaxMessages=function(b){return a.get(j+"/vfax/messages/"+b,h())},k.getFaxMessagesByContact=function(b,c){return a.get(j+"/vfax/messages/contact/"+b+"/"+c,h())},
k.getResendFaxMessage=function(b){return a.get(j+"/vfax/resend/"+b,h())},k.getFaxListStates=function(){return a.get(j+"/vfax/liststates",h())},k.getFaxListRatecenters=function(b){return a.get(j+"/vfax/listratecenters/"+b,h())},k.postGetAvailableFaxDids=function(b){return a.post(j+"/vfax/getavailabledids",b,h())},k.postUpdateVfax=function(b){return a.post(j+"/vfax/update",b,h())},k.getDeleteFaxMessage=function(b){return a.get(j+"/vfax/removemessage/"+b,h())},k.getFaxImage=function(b){return a.get(j+"/vfax/faximage/"+b,h())},k.getFaxPdf=function(b){return a.get(j+"/vfax/getpdf/"+b,h())},k.postCloudMobileUpload=function(b){return a.post(j+"/cloud/mobileupload",b,h())},k.getUserRootFolder=function(b){return a.get(j+"/cloud/user/root/"+b,h())},k.getCreateFolder=function(b,c){return a.get(j+"/cloud/createfolder/"+b+"/"+c,h())},k.getDeleteFolder=function(b){return a.get(j+"/cloud/user/delete/folder/"+b,h())},k.getDeleteFile=function(b){return a.get(j+"/cloud/user/delete/"+b,h())},k.getRenameFile=function(b,c){return a.get(j+"/cloud/rename/"+b+"/"+c,h())},k.getRenameFolder=function(b,c){return a.get(j+"/cloud/rename/folder/"+b+"/"+c,h())},k.getDownloadFile=function(b,c){return a.get(j+"/cloud/downloadfile/"+b+"/"+c,h())},k.getMoveFile=function(b,c){return a.get(j+"/cloud/user/move/"+b+"/"+c,h())},k.getCopyFile=function(b,c){return a.get(j+"/cloud/user/copy/"+b+"/"+c,h())},k.getViewableFolders=function(b,c){return a.get(j+"/cloud/user/viewablefolders",h())},k.postUpdateFolderPermissions=function(b){return a.post(j+"/cloud/updatefolderpermissions",b,h())},k.getPublicLinks=function(){return a.get(j+"/cloud/user/publiclinks",h())},k.postSavePublicLink=function(b){return a.post(j+"/cloud/user/savepubliclink",b,h())},k.getDeletePublicLink=function(b){return a.get(j+"/cloud/user/deletelink/"+b,h())},k.postSendCloudShareLink=function(b){return a.post(j+"/cloud/user/sendsharelink",b,h())},k.getPublicLinkDetails=function(b){return a.get(j+"/cloud/public/getlink/"+b)},k.postSendPublicUploadNotification=function(b){return a.post(j+"/cloud/public/sendnotice",b)},k.getValidDIDs=function(b){return a.get(j+"/bandwidth/dids/"+b,h())},k.postUpdateUserCallerId=function(b){return a.post(j+"/user/updatecallerid",b)},k.getValidE911CandidateDIDs=function(b){return a.get(j+"/bandwidth/e911dids/"+b,h())},k.getSetDefaultE911Address=function(b){return a.get(j+"/bandwidth/setdefault/"+b,h())},k.getE911Registrations=function(b){return a.get(j+"/bandwidth/gete911registrations/"+b,h())},k.postOrderE911=function(b){return a.post(j+"/bandwidth/registere911",b)},k.postOrderNewE911Address=function(b){return a.post(j+"/bandwidth/order911",b)},k.getAssignE911=function(b,c){return a.get(j+"/bandwidth/assigne911/"+b+"/"+c)},k.postValidateE911Address=function(b){return a.post(j+"/bandwidth/e911/validate",b)},k.postSaveGroupCode=function(b){return a.post(j+"/admin/savegroupcode",b,h())},k.getManagementPartners=function(){return a.get(j+"/admin/getmanagementpartners",h())},k.getGroupCodes=function(){return a.get(j+"/admin/getgroupcodes",h())},k.getCheckGroupCode=function(b){return a.get(j+"/admin/checkgroupcode/"+b,h())},k.getToggleGroupCodeStatus=function(b){return a.get(j+"/admin/togglegroupcode/"+b,h())},k.getDomains=function(){return a.get(j+"/admin/getdomains",h())},k.getDomainDids=function(b){return a.get(j+"/admin/getdomaindids/"+b,h())},k.getActiveUsersByDomain=function(b){return a.get(j+"/admin/usersbydomain/"+b,h())},k.postUpdateDomain=function(b){return a.post(j+"/admin/updatedomain",b,h())},k.getDeletePortingNumber=function(b){return a.get(j+"/admin/deleteport/"+b,h())},k.getActivatePortingNumber=function(b){return a.get(j+"/admin/activateport/"+b,h())},k.postUpdateNumberPort=function(b){return a.post(j+"/admin/portnumber",b,h())},k.testloop=function(b){return a.post(j+"/call/callresponse",b,h())},k.postUpdateUser=function(b){return a.post(j+"/user/update",b,h())},k.getSetVoicemailStatus=function(b,c){return a.get(j+"/voicemail/setvoicemailstatus/"+b+"/"+c,h())},k.getVoicemailStatus=function(b,c){return a.get(j+"/voicemail/getvoicemailstatus",h())},k.setNoAnswerStatus=function(b){return a.post(j+"/user/setnoanswerstatus/",b,h())},k.setNotRegisteredStatus=function(b){return a.post(j+"/user/setnotregisteredstatus/",b,h())},k.postUpdateVoicemail=function(b){return a.post(j+"/voicemail/update",b,h())},k.postUploadGreeting=function(b){return a.post(j+"/voicemail/greeting",b,i())},k.getVoicemailGreetings=function(b){return a.get(j+"/voicemail/greetings/"+b,h())},k.getRemoveGreeting=function(b){return a.get(j+"/voicemail/greeting/remove/"+b,h())},k.postSetGreetingId=function(b){return a.post(j+"/voicemail/greeting/setid",b,h())},k.postUpdateRingtones=function(b){return a.post(j+"/user/ringtones",b,h())},k.getUserRingtoneSettings=function(b){return a.get(j+"/user/ringtones/"+b,h())},k.postUpdateDefaultRingtones=function(b){return a.post(j+"/user/defaultringtones",b,h())},k.postAdminResetPassword=function(b){return a.post(j+"/user/admin/resetpassword",b,h())},k.postCallRecord=function(b){return a.post(j+"/user/admin/recordcall",b,h())},k.postUserProfileDisable=function(b){return a.post(j+"/user/admin/userprofile",b,h())},k.postUserProfileDelete=function(b){return a.post(j+"/user/admin/delete/userprofile",b,h())},k.postChangeUserExtension=function(b){return a.post(j+"/user/admin/changeextension",b,h())},k.postChangeUserDid=function(b){return a.post(j+"/user/admin/changedid",b,h())},k.postUploadAudioFile=function(b){return a.post(j+"/audio/upload",b,i())},k.getAudioLibrary=function(b){return a.get(j+"/audiolibrary/get/"+b,h())},k.getAudioLibraryByUuid=function(b,c){return a.get(j+"/audio/getbyuuid/"+b+"/"+c,h())},k.getAudioLibrariesByDomain=function(b){return a.get(j+"/audio/getbydomain/"+b,h())},k.getDeleteAudioLibraryByUuid=function(b,c){return a.get(j+"/audio/getdelete/"+b+"/"+c,h())},k.getDownloadAudioFile=function(b){return a.get(j+"/audio/getfile/"+b,h())},k.getRenameAudioLibraryByUuid=function(b,c){return a.get(j+"/audio/getrename/"+b+"/"+c,h())},k.getRenameAudioLibraryByUuid=function(b,c){return a.get(j+"/audio/getrename/"+b+"/"+c,h())},k.getMusicOnHoldByDomain=function(b){return a.get(j+"/audio/musiconhold/getbydomain/"+b,h())},k.postCreateMusicOnHold=function(b){return a.post(j+"/audio/musiconhold/create",b,i())},k.postAddMusicToMusicOnHold=function(b){return a.post(j+"/audio/musiconhold/addmusic",b,i())},k.getDeleteMusicFileFromMusicOnHold=function(b,c){return a.get(j+"/audio/musiconhold/getdeletefile/"+b+"/"+c,h())},k.reloadModLocalStream=function(b){return a.get(j+"/audio/musiconhold/reload/"+b,h())},k.postRenameMusicFile=function(b){return a.post(j+"/audio/musiconhold/renamefile",b,h())},k.createDefaultMoh=function(b){return a.get(j+"/audio/musiconhold/default/"+b,h())},k.getAutoAttendants=function(){return a.get(j+"/autoAttendant/getall",h())},k.getBareAttendants=function(b){return a.get(j+"/autoAttendant/getbare/"+b,h())},k.sendAutoAttendant=function(b){return a.post(j+"/autoAttendant/save",b,h())},k.postSaveNewSecondaryNumber=function(b){return a.post(j+"/autoAttendant/addsecondarynumber",b,h())},k.getDeleteSecondaryNumber=function(b){return a.get(j+"/autoAttendant/deletesecondary/"+b,h())},k.postChangeAaNumber=function(b){return a.post(j+"/autoAttendant/changedid",b,h())},k.postToggleAttendant=function(b){return a.post(j+"/autoAttendant/toggleattendant",b,h())},k.postCreateEmptyIvr=function(b){return a.post(j+"/autoAttendant/createnew",b,h())},k.postSaveHoliday=function(b){return a.post(j+"/autoAttendant/saveholiday",b,h())},k.getDeleteHoliday=function(b){return a.get(j+"/autoAttendant/deleteholiday/"+b,h())},k.getPresetHolidays=function(b){return a.get(j+"/autoAttendant/getpresetholidays/"+b,h())},k.postTogglePresetHoliday=function(b){return a.post(j+"/autoAttendant/togglepresetholiday",b,h())},k.updateAutoAttendant=function(b){return a.post(j+"/autoAttendant/update/",b,h())},k.postCloneAutoAttendant=function(b){return a.post(j+"/autoAttendant/clone/",b,h())},k.postDeleteAttendant=function(b){return a.post(j+"/autoAttendant/delete",b,h())},k.postUploadAttendantGreeting=function(b){return a.post(j+"/autoAttendant/recording/upload",b,i())},k.postUploadAttendantVoicemailGreeting=function(b){return a.post(j+"/autoAttendant/voicemailgreeting/upload",b,i())},k.postUpdateAttendantVoicemail=function(b){return a.post(j+"/autoAttendant/voicemail/update",b,h())},k.updateGreetingTitle=function(b){return a.post(j+"/autoAttendant/updategreetingtitle",b,h())},k.postUpdateAaVoicemailGreetingRecord=function(b){return a.post(j+"/autoAttendant/updatevoicemailgreetingtitle",b,h())},k.deleteAaGreeting=function(b,c){return a.get(j+"/autoAttendant/deletegreeting/"+b+"/"+c,h())},k.deleteAaVoicemailGreeting=function(b){return a.get(j+"/autoAttendant/deletevoicemailgreeting/"+b,h())},k.getAvailableDidsForAa=function(){return a.get(j+"/autoAttendant/availabledids",h())},k.postSetGreeting=function(b){return a.post(j+"/autoAttendant/recording/set",b,i())},k.postSaveMenuOption=function(b){return a.post(j+"/autoAttendant/savemenuoption",b,h())},k.getOptionsList=function(b){return a.get(j+"/autoAttendant/getOptions/"+b,h())},k.postDeleteMenuOption=function(b){return a.post(j+"/autoAttendant/deletemenuoption",b,h())},k.postChangeAaGreeting=function(b){return a.post(j+"/autoAttendant/changegreeting",b,h())},k.getSchedule=function(b){return a.get(j+"/autoAttendant/getSchedule/"+b,h())},k.getUnavailableDid=function(){return a.get(j+"/autoAttendant/getUnavailableDid",h())},k.getNewNumber=function(b){return a.get(j+"/autoAttendant/getNewNumber/"+b,h())},k.getVoicemailGreetingsById=function(b){return a.get(j+"/autoAttendant/greetings/"+b,h())},k.postSetVoicemailGreetingId=function(b){return a.post(j+"/autoAttendant/voicemail/greeting/setid",b,h())},k.getRingGroups=function(b){return a.get(j+"/autoAttendant/ringgroups/"+b,h())},k.postSaveRingGroup=function(b){return a.post(j+"/autoAttendant/saveringgroup",b,h())},k.getRestartRinggroup=function(b){return a.get(j+"/autoAttendant/restartringgroup/"+b,h())},k.getDeleteRingGroup=function(b){return a.get(j+"/autoAttendant/deleteringgroup/"+b,h())},k.postRoboCall=function(b){return a.post(j+"/autocall/create",b,h())},k.getAvailableDidsforAm=function(){return a.get(j+"/autocall/getdids",h())},k.postAddCustomField=function(b){return a.post(j+"/autocall/custom/add",b,h())},k.postUpdateAmContact=function(b){return a.post(j+"/autocall/contact/update",b,h())},k.deleteAmRecording=function(b){return a.get(j+"/autocall/deleterecording/"+b,h())},k.postUpdateAmRecordingTitle=function(b){return a.post(j+"/autocall/editrecording",b,h())},k.updateRoboCall=function(b){return a.post(j+"/autocall/update/"+b.robocall_uuid,b,h())},k.getUpdateCampaignStatus=function(b,c){return a.get(j+"/autocall/status/"+b+"/"+c,h())},k.deleteRobocallCampaign=function(b){return a.get(j+"/autocall/delete/"+b,h())},k.postAddContact=function(b){return a.post(j+"/autocall/contacts/store",b,h())},k.postRoboCallContactArray=function(b){return a.post(j+"/autocall/contacts/upload",b,h())},k.deleteRoboCallContacts=function(b){return a.get(j+"/autocall/contacts/delete/"+b,h())},k.getDuplicateCampaign=function(b){return a.get(j+"/autocall/duplicate/"+b,h())},k.getRoboCallContacts=function(b){return a.get(j+"/autocall/contacts/retrieve/"+b,h())},k.getAllCampaigns=function(){return a.get(j+"/autocall/getall",h())},k.getArchivedCampaigns=function(){return a.get(j+"/autocall/getarchives",h())},k.getArchiveCampaign=function(b){return a.get(j+"/autocall/archive/"+b,h())},k.getRoboCallUUID=function(b){return a.get(j+"/autocall/show/"+b,h())},k.postUploadRecording=function(b){return a.post(j+"/autocall/recording/upload",b,i())},k.postCreateRoboCallSchedule=function(b){return a.post(j+"/autocall/schedule/create",b,h())},k.postUpdateRoboCallSchedule=function(b){return a.post(j+"/autocall/schedule/update",b,h())},k.postStartRoboCallCampaign=function(b){return a.post(j+"/autocall/queue",b,h())},k.getScheduleDeliveries=function(b){return a.get(j+"/autocall/schedule/deliveries/"+b,h())},k.getRemoveScheduleEntry=function(b){return a.get(j+"/autocall/schedule/remove/"+b,h())},k.postSendTestEmail=function(b){return a.post(j+"/autocall/sendtestemail",b,h())},k.postUpdateEmailTemplate=function(b){return a.post(j+"/company/emailtemplate/save",b,h())},k.getEmailTemplates=function(b){return a.get(j+"/company/getemailtemplates",h())},k.merge3WayCall=function(b){return a.post(j+"/conference/merge",b,h())},k.hangUp3Way=function(b){return console.log(b),a.get(j+"/conference/hangup/"+b.confName+"/"+b.callID,h())},k.mergeAfter3Way=function(b){return a.get(j+"/conference/endandmerge/"+b,h())},k.hold3Way=function(b){return a.get(j+"/conference/hold/"+b.confName+"/"+b.callID,h())},k.unhold3Way=function(b){return a.get(j+"/conference/unhold/"+b.confName+"/"+b.callID,h())},k.mute3Way=function(b){return a.get(j+"/conference/mute/"+b.confName+"/"+b.callID,h())},k.unmute3Way=function(b){return a.get(j+"/conference/unmute/"+b.confName+"/"+b.callID,h())},k.recodStart3Way=function(b){return a.get(j+"/conference/record/start/"+b,h())},k.recordStop3Way=function(b){return a.get(j+"/conference/record/stop/"+b,h())},k.sendDTMF3Way=function(b){return a.get(j+"/conference/senddtmf/"+b,h())},k.postCopyConversations=function(b){return a.post(j+"/hawksoft/conversation",b,h())},k.postHSCopySmsTexts=function(b){return a.post(j+"/hawksoft/sms",b,h())},k.postHSCopyVoicemail=function(b){return a.post(j+"/hawksoft/voicemail",b,h())},k.postHSCopyVoicemailInfo=function(b){return a.post(j+"/hawksoft/voicemailinfo",b,h())},k.postHSCopyRecording=function(b){return a.post(j+"/hawksoft/recording",b,h())},k.postHSCopyRecordingNew=function(b){return a.post(j+"/hawksoft/recordingnew",b,h())},k.postHSCopyFileshare=function(b){return a.post(j+"/hawksoft/fileshare",b,h())},k.postHSCopyCall=function(b){return a.post(j+"/hawksoft/call",b,h())},k.postHSCopyVoicemail=function(b){return a.post(j+"/hawksoft/voicemail",b,h())},k.postHSCopyVideoConference=function(b){return a.post(j+"/hawksoft/videoconference",b,h())},k.postHSCopyChatMessages=function(b){return a.post(j+"/hawksoft/chatmessages",b,h())},k.postCopyFaxToManagementSystem=function(b){return a.post(j+"/hawksoft/fax",b,h())},k.getDomainsStatus=function(b){return a.get(j+"/domain/status/"+b,h())},k.updDomainsStatus=function(b){return a.post(j+"/domain/status/"+b.status_uuid,b,h())},k.insDomainsStatus=function(b){return a.post(j+"/domain/status",b,h())},k.getDaysRemain=function(){return a.get(j+"/daysremain")},k.addTimeKeeperUser=function(b){return a.post(j+"/timeclockpro/adduser",b,h())},k.createTimeKeeperRole=function(b){return a.post(j+"/timeclockpro/createrole",b,h())},k.getTimeKeeperUsers=function(){return a.get(j+"/timeclockpro/getusers",h())},k.setPayRate=function(b){return a.post(j+"/timeclockpro/setpay",b,h())},k.postCreateTkGroup=function(b){return a.post(j+"/timeclockpro/creategroup",b,h())},k.postUpdateTkGroup=function(b){return a.post(j+"/timeclockpro/updategroup",b,h())},k.postRemoveTkGroupMember=function(b){return a.post(j+"/timeclockpro/removemember",b,h())},k.getRemoveTkGroup=function(b){return a.get(j+"/timeclockpro/removegroup/"+b,h())},k.getTkGroups=function(){return a.get(j+"/timeclockpro/getgroups",h())},k.createTkManager=function(b){return a.get(j+"/timeclockpro/createmanager/"+b,h())},k.openTkRecord=function(){return a.get(j+"/timeclockpro/openrecord",h())},k.closeTkRecord=function(){return a.get(j+"/timeclockpro/closerecord",h())},k.setFrequency=function(b){return a.post(j+"/timeclockpro/setfrequency",b,h())},k.addEditRecord=function(b){return a.post(j+"/timeclockpro/addeditrecord",b,h())},k.getRecords=function(b,c){return a.get(j+"/timeclockpro/getrecords/"+b+"/"+c,h())},k.getTodaysRec=function(b){return a.get(j+"/timeclockpro/gettodaysrec/"+b,h())},k.postDeleteScreenshot=function(b){return a.post(j+"/timeclockpro/screenshot/delete",b,h())},k.getUserRole=function(){return a.get(j+"/timeclockpro/getuserrole",h())},k}]),proySymphony.factory("callHistoryLoader",["$http","$rootScope","dataFactory","$q",function(a,b,c,d){function e(){}return e.prototype.init=function(a){return a=angular.extend({page:1},a),this.pagination={perPage:20,maxPages:50},this.posts=[],this.load(a.page)},e.prototype.load=function(a){a=parseInt(a,10),a=isNaN(a)?1:a;var b=this.pagination.lastPage&&a<this.pagination.lastPage?"unshift":"push";return this.pagination.totalPages&&(a=Math.min(Math.max(a,1),this.pagination.totalPages)),a>this.pagination.lastPage||!this.pagination.lastPage||a<this.pagination.firstPage||!this.pagination.firstPage?this.get(a).success(angular.bind(this,function(c){var d=c.response;return(!this.pagination.lastPage||a>this.pagination.lastPage)&&(this.pagination.lastPage=a),(!this.pagination.firstPage||a<this.pagination.firstPage)&&(this.pagination.firstPage=a),this.pagination.totalPages=Math.ceil(d.total_posts/this.pagination.perPage),this.pagination.maxPages&&(this.pagination.totalPages=Math.min(this.pagination.totalPages,this.pagination.maxPages)),this.posts[b].apply(this.posts,d.posts),d.posts})):d.reject()},e.prototype.next=function(){var a=this.pagination.lastPage?this.pagination.lastPage+1:1;return this.load(a)},e.prototype.previous=function(){var a=this.pagination.firstPage?this.pagination.firstPage-1:1;return this.load(a)},e.prototype.get=function(c){var d=(b.selectEmulateUser&&null!==b.selectEmulateUser?b.selectEmulateUser:b.user.id,"http://api.tumblr.com/v2/blog/fuckyeahcats.tumblr.com/posts/photo"),e={params:{api_key:"z46iUTiovIf3N5KdioKhU2vvTBMWRHA8KLeIBruDnEHTXpiK8n",jsonp:"JSON_CALLBACK",limit:this.pagination.perPage}};return e.params.offset=(c-1)*e.params.limit,a.jsonp(d,e)},{create:function(){return new e}}}]),proySymphony.service("callStatisticsApi",["$http","$rootScope","$window","_","dataFactory",function(a,b,c,d,e){var f={},g={callStats:[],queueStats:{}},h=function(a){var b={};return d.forEach(a,function(a){d.forEach(a,function(a,c){b[c]?b[c]=(b[c]+a)/2:b[c]=a})}),d.forEach(b,function(a,c){b[c]=Math.round(a)}),b.name="Average",b};return f.getCallStats=function(a){return e.getCallStats(a).then(function(a){return a.data.unshift(h(a.data)),angular.copy(a.data,g.callStats),g.callStats})},console.log(b.user.extension.extension_uuid),f}]),proySymphony.factory("smsApi",["$http","__env","symphonyConfig","$window","$rootScope","$location","$q",function(a,b,c,d,e,f,g){function h(){var a="";return e.userToken&&""!=e.userToken?a={headers:{Authorization:"Bearer "+e.userToken}}:d.localStorage.getItem("userToken")&&""!=d.localStorage.getItem("userToken")&&(e.userToken=d.localStorage.getItem("userToken"),a={headers:{Authorization:"Bearer "+e.userToken}}),a}var i=b.apiUrl&&""!==b.apiUrl?b.apiUrl:c.onescreenUrl,j={getSmsThreads:function(b){return a.get(i+"/sms/threads/"+b,h())},getSmsTextsbyThread:function(b,c,d){return a.get(i+"/sms/thread/"+b+"/messages/"+c+"/asc?last="+d,h()).then(function(a){return a})},getThreadInfo:function(b,c){return a.get(i+"/sms/thread/"+b+"/"+c,h())},getSmsTextsForThreadSince:function(b){return a.get(i+"/user/info",h()).then(function(a){return a})},createNewSmsNumber:function(b){return a.post(i+"/sms/createnumber",b,h())},createRandomSmsNumber:function(b){return a.post(i+"/sms/createrandomnumber",b,h())},sendSmsMessage:function(b){return a.post(i+"/sms/send",b,h())},getAvailNumbers:function(b){return a.post(i+"/sms/getavailnumbers",b,h()).then(function(a){return a})},postUpdateThread:function(b){return a.post(i+"/sms/thread/update",b,h())},postSearchMessages:function(b){return a.post(i+"/sms/search",b,h())},postGetSearchResult:function(b){return a.post(i+"/sms/getsearchrange",b,h())},postSearchMasterSmsMessages:function(b){return a.post(i+"/sms/search/master",b,h())},getRemoveSmsMessage:function(b){return a.get(i+"/sms/removemessage/"+b,h())},getSetMessageRead:function(b){return a.get(i+"/sms/read/"+b+"/"+e.user.id,h())},updateThreadCount:function(b){return a.get(i+"/sms/read/thread/"+b+"/"+e.user.id,h())},getRemoveSmsThread:function(b){return a.get(i+"/sms/removethread/"+b,h())},postAddBlacklist:function(b){return a.post(i+"/sms/blacklist/add",b,h())},getRemoveBlacklist:function(b){return a.get(i+"/sms/blacklist/remove/"+b,h())},getBlacklistedNumbers:function(b){return a.get(i+"/sms/blacklist/"+b,h())}};return j}]),proySymphony.service("domainService",["dataFactory","$rootScope",function(a,b){var c={domains:[]};return c.getDomains=function(){return c.domains.length<1?c.loadDomains():new Promise(function(a){a(c.domains)})},c.loadDomains=function(){return a.getDomains().then(function(a){return a.data.success?(angular.copy(a.data.success.data,c.domains),c.domains):!1})},c.loadDomainDids=function(c){return a.getDomainDids(c).then(function(a){return a.data.success?a.data.success:(console.log(a.data.error.message),b.showErrorAlert("Unable to retrieve DIDs"),[])})},c.postUpdateNumberPort=function(b){return a.postUpdateNumberPort(b).then(function(a){return a.data})},c.getUuidType=function(a){var b;return"did"===a.number_type&&(b="destination"),"sms"===a.number_type&&(b="phone_number"),"fax"===a.number_type&&(b="vfax"),b},c}]),proySymphony.service("cloudStorageService",["dataFactory","$rootScope","fileService",function(a,b,c){function d(a){return a.replace(/[^0-9]/,"").length>0}function e(a){for(var b,c=!1,e=0,f=a.split("").reverse(),g=0;g<f.length;g++){if(b=f[g],!d(b)){if("-"===b){e>0&&(c=!0);break}break}e+=1}return c}var f={userRootFolder:null,numFoldersUpdatingPerms:0};f.getUserRootFolder=function(b){return a.getUserRootFolder(b).then(function(a){if(__env.enableDebug&&console.log("CLOUD STORAGE USER ROOT FOLDER"),a.data.success){var b=angular.copy(a.data.success.root);angular.copy(a.data.success.root);return f.addParentToFolderChildren(b),f.applyTraverseFromRoot(f.applyFileAttachmentFunctions,void 0,b),__env.enableDebug&&console.log(b),b.folders||(b.folders=[]),b.files||(b.files=[]),f.userRootFolder=b,f.userRootFolder}return __env.enableDebug&&console.log("ERROR"),void(__env.enableDebug&&console.log(a.data.error.message))})},f.getTotalSpaceUsed=function(a){var b,c;if(a||(a=f.userRootFolder),a){var d=0;if(a.files)for(var e=0;e<a.files.length;e++)b=a.files[e],d+=b.file_size_in_b;if(a.folders)for(e=0;e<a.folders.length;e++)c=a.folders[e],d+=f.getTotalSpaceUsed(c);return d}return void 0},f.applyTraverseFromRoot=function(a,b,c){var d,e;if(c||(c=f.userRootFolder),a&&c.files)for(var g=0;g<c.files.length;g++)d=c.files[g],a(d);if(c.folders)for(var g=0;g<c.folders.length;g++)e=c.folders[g],b&&b(e),(a&&e.files.length>0||e.folders.length>0)&&f.applyTraverseFromRoot(a,b,e);return!0},f.applyFileAttachmentFunctions=function(a){f.attachFileSizeInBToFile(a),f.attachTrueFileSize(a)},f.attachFileSizeInBToFile=function(a){a.file_size_in_b=f.getFileSizeInB(a.file_size)},f.attachTrueFileSize=function(a){a.true_file_size=f.getFileSize(a.file_size)},f.addParentToFolderChildren=function(a){a.folders&&a.folders.length>0&&angular.forEach(a.folders,function(b){b.parent=a,f.addParentToFolderChildren(b)})},f.createFolder=function(c,d){return a.getCreateFolder(c,d).then(function(a){if(a.data.success){var c=a.data.success.folder;c.folder_size=f.getFolderSize(c);var d=f.getFolderByUuid(f.userRootFolder,c.parent_folder_uuid);return c.parent=d,c.folders=[],c.files=[],b.$broadcast("updateCloudStorage",!0),d.dummyFolders&&d.dummyFolders.pop(),c}return __env.enableDebug&&console.log("ERROR"),void(__env.enableDebug&&console.log(a.data.error.message))})},f.deleteFolder=function(b){return a.getDeleteFolder(b).then(function(a){if(a.data.success){a.data.success.folder;return!0}return __env.enableDebug&&console.log("ERROR"),__env.enableDebug&&console.log(a.data.error.message),!1})},f.deleteFile=function(b){return a.getDeleteFile(b).then(function(a){if(a.data.success){a.data.success.file;return a}return __env.enableDebug&&console.log("ERROR"),__env.enableDebug&&console.log(a.data.error.message),a})},f.renameFolder=function(b,c){return a.getRenameFolder(b,c).then(function(a){if(a.data.success){a.data.success.file;return a}return __env.enableDebug&&console.log("ERROR"),__env.enableDebug&&console.log(a.data.error.message),a})},f.renameFile=function(b,c){return a.getRenameFile(b,c).then(function(a){if(a.data.success){a.data.success.file;return a}return __env.enableDebug&&console.log("ERROR"),__env.enableDebug&&console.log(a.data.error.message),a})},f.downloadFile=function(b,c){return a.getDownloadFile(b,c).then(function(a){return a.data.success?a.data.success.file:void(a.data.error&&(__env.enableDebug&&console.log("DOWNLOAD FILE RETURNED ERROR: "),__env.enableDebug&&console.log(a.data.error.message)))})},f.moveFile=function(b,c){return a.getMoveFile(b,c).then(function(a){if(a.data.success){var b=a.data.success.file;return f.applyFileAttachmentFunctions(b),b}return void(a.data.error&&(__env.enableDebug&&console.log("MOVE FILE RETURNED ERROR: "),__env.enableDebug&&console.log(a.data.error.message)))})},f.copyFile=function(b,c){return a.getCopyFile(b,c).then(function(a){if(a.data.success){var b=a.data.success.file;return f.applyFileAttachmentFunctions(b),b}return void(a.data.error&&(__env.enableDebug&&console.log("COPY FILE RETURNED ERROR: "),__env.enableDebug&&console.log(a.data.error.message)))})},f.handleDuplicateFileRename=function(a,b){for(var d=c.removeFileExtensionFromFilename(a.original_filename),e=c.getFileExtensionFromFilename(a.original_filename);f.fileNameExistsInFolder(d+"."+e,b);)d=f.incrementFileName(d);var g=d+"."+e;g!==a.original_filename?f.renameFile(a.file_uuid,d+"."+e).then(function(c){c.data.success&&(a.original_filename=d+"."+e,b.files.push(a))}):b.files.push(a)},f.moveFileFromFolderToFolder=function(a,b,c){f.removeFileFromParentByUuid(b,a.file_uuid)&&f.handleDuplicateFileRename(a,c)},f.getFolderByUuid=function(a,b){var c;if(a.folder_uuid===b)return a;for(var d=0;d<a.folders.length;d++){if(c=a.folders[d],c.folder_uuid===b)return c;var e=f.getFolderByUuid(c,b);if(e)return e}return!1},f.getFileByUuid=function(a,b){for(var c,d=0;d<a.files.length;d++)if(c=a.files[d],c.file_uuid===b)return c;for(var d=0;d<a.folders.length;d++)c=a.folders[d],f.getFileByUuid(c);return!1},f.getFolderSize=function(a){var b=0;if(a.files)for(var c=0;c<a.files.length;c++)b+=f.getFileSizeInB(a.files[c].file_size);if(a.folders)for(c=0;c<a.folders.length;c++)b+=f.getFileSizeInB(f.getFolderSize(a.folders[c]));return f.getAppropriateFileSizeFromB(b,1)},f.getFileSize=function(a){return f.getAppropriateFileSizeFromB(f.getFileSizeInB(a),1)},f.getFileSizeInB=function(a){var b=a.slice(h(a),a.length).toLowerCase(),c=parseInt(a.slice(0,h(a)));switch(b){case"kb":c*=1e3;break;case"mb":c*=Math.pow(1e3,2);break;case"gb":c*=Math.pow(1e3,3);break;case"tb":c*=Math.pow(1e3,4);break;case"pb":c*=Math.pow(1e3,5)}return c},f.getAppropriateFileSizeFromB=function(a,b){return a/Math.pow(1e3,5)>=1?(a/Math.pow(1e3,5)).toFixed(b)+" PB":a/Math.pow(1e3,4)>=1?(a/Math.pow(1e3,4)).toFixed(b)+" TB":a/Math.pow(1e3,3)>=1?(a/Math.pow(1e3,3)).toFixed(b)+" GB":a/Math.pow(1e3,2)>=1?(a/Math.pow(1e3,2)).toFixed(b)+" MB":a/1e3>=1?(a/1e3).toFixed(b)+" KB":a?a+"B":""},f.removeFolderFromParentByUuid=function(a,b){for(var c,d=0;d<a.folders.length;d++)if(a.folders[d].folder_uuid===b&&(c=d),void 0!==c)return a.folders.splice(d,1),!0;return!1},f.removeDummyFolderFromParentByUuid=function(a,b){for(var c,d=0;d<a.folders.length;d++)if(a.dummyFolders[d].dummyId===b&&(c=d),void 0!==c)return a.dummyFolders.splice(d,1),!0;return!1},f.removeFileFromParentByUuid=function(a,b){for(var c,d=0;d<a.files.length;d++)if(a.files[d].file_uuid===b&&(c=d),void 0!==c)return a.files.splice(d,1),!0;return!1},f.handleSuccessfulUserFileUpload=function(a){var b=f.getFolderByUuid(f.userRootFolder,a.parent_folder_uuid);f.applyFileAttachmentFunctions(a),b.files.push(a)},f.handleCloudStorageBroadcastEvent=function(){f.getUserRootFolder(b.user.id).then(function(a){a&&(f.userRootFolder=a)})},f.fileNameExistsInFolder=function(a,b){var c=b.files.map(function(a){return a.original_filename});return c.indexOf(a)>-1},f.incrementFileName=function(a){var b=a.slice(a.length-2,a.length),c=e(a);if(c){var d=parseInt(b[1])+1;return a.slice(0,a.length-1)+d}return a+"-1"},f.getNumFoldersUpdatingPerms=function(){return f.numFoldersUpdatingPerms},f.clearInfo=function(){f.userRootFolder=null};var g=function(a){return/^\d+$/.test(a)},h=function(a){for(var b=0;b<a.length;b++)if(!g(a[b])&&"."!==a[b])return b;return void 0};return f}]),proySymphony.service("contactGroupsService",["$http","Slug","$mdDialog","$rootScope","$window","_","dataFactory","$filter","userContactService","$uibModalStack","$auth","$location","$routeParams","$timeout","usefulTools","symphonyConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var b,c,d,e=[];return angular.forEach(a,function(a){if(a.phone&&a.familyName&&a.givenName)b={},b.contact_profile_color=randomColor({luminosity:"dark"}),b.contact_name_family=a.familyName,b.contact_name_given=a.givenName,b.contact_email_address=a.email,c=i.buildDefaultPhoneObject(a.phone,"Mobile"),d={},d.input=b,d.phones=[c],e.push(d);else{var f=a.givenName?a.givenName:"",g=a.familyName?a.familyName:"",h=(f+" "+g).trim();h&&i.addToInvalidContactData(h)}}),e}function r(a){return a.contact_uuid}function s(a,b){return function(c){return!(c[a]==b)}}function t(a){return!a.hidden}function u(a){return a.filter(function(a){return a.domain_uuid===d.user.domain_uuid})}var v={};return v.groups=[],v.setGroups=function(){k.isAuthenticated()&&v.getContactGroups().then(function(a){a&&angular.copy(a,v.groups)})},v.userIsManagerOfGroup=function(a,b){var c=!!o.find(b.managers,"user_uuid",a);return c||b.owner_uuid===a},v.addContactToGroup=function(a,b){var c={contact_uuid:a,group_uuid:b};return g.postAddContactToGroup(c).then(function(a){if(a.data.success){var c=a.data.success.data,d=v.getGroupByUuid(b);d.contacts=v.getContactRetrievalFuncForGroup(d),d.members.push({contact_uuid:c.contact_uuid})}})},v.getContactGroups=function(){return g.getViewableContactGroups(d.user.domain.domain_uuid).then(function(a){if(a.data.error)return void console.log(a.data.error.message);console.log("CONTACT GROUPS RETRIEVED"),console.log(a.data.success.data);var b=a.data.success.data;return u(b),v.attachContactRetrievalFuncs(b),v.attachManagersToGroups(b),b},function(a){console.log("ERROR RETRIEVING CONTACT GROUPS"),console.log(a)})},v.attachContactRetrievalFuncs=function(a){for(var b,c=0;c<a.length;c++)b=a[c],b.contacts=v.getContactRetrievalFuncForGroup(b)},v.getContactRetrievalFuncForGroup=function(a){return function(){return a.members.map(function(a){return i.getContactByUuid(a.contact_uuid)}).filter(function(a){return!!a})}},v.createGroup=function(a){g.postCreateGroup(a).then(function(a){if(d.showalerts(a),a.data.success){var b=a.data.success.data;v.handleNewGroup(b)}},function(a){console.log(a)})},v.handleNewGroup=function(a){a.contacts=v.getContactRetrievalFuncForGroup(a),v.groups.push(a)},v.attachContactsToGroup=function(a){var b,c=[];console.log(a),angular.forEach(a.members,function(a){b=i.getContactByUuid(a.contact_uuid),console.log(b),b&&c.push(b)}),a.contacts=c},v.contactIsGroupManager=function(a,b){var c=!1;return angular.forEach(b.managers,function(b){b.contact_uuid===a.contact_uuid&&(c=!0)}),c},v.setGroupManagers=function(a,b){return b.managers=a},v.setManagersList=function(a,b,c,d){var e={group_uuid:a.group_uuid,manager_uuids:b};g.setManagersList(e).then(function(c){if(c.data.success){var e=b.map(function(a){return i.getContactByUuid(a)});return v.setGroupManagers(e,a),v.addGroupManagersToViewerList(a,d),a}return void 0})},v.getMemberListForGroup=function(a){var b={};return angular.forEach(a.members,function(a){b[a.contact_uuid]=!0}),b},v.addGroupManagersToViewerList=function(a,b){var c={},d={};angular.forEach(a.viewer_users,function(a){c[a.view_contact_uuid]=!0}),angular.forEach(a.managers,function(a){c[a.contact_uuid]=!0}),angular.forEach(a.viewer_groups,function(a){d[a.view_group_uuid]=!0}),b()(a.group_uuid,d,c)},v.revokeManagerStatus=function(a,b,c){var d=b.managers.map(r).filter(function(b){return b!==a.contact_uuid;
});v.setManagersList(b,d,null,c)},v.deleteGroup=function(a){var b={group_uuid:a.group_uuid};g.deleteGroup(b).then(function(b){if(d.showalerts(b),b.data.success){var c=h("getGroupIndexbyUUID")(v.groups,a.group_uuid,"");v.groups.splice(c,1),j.dismissAll()}},function(a){console.log(a)})},v.retrieveGroupMemberUuids=function(a){var b=[];return angular.forEach(a.members,function(a){b.push(a.contact_uuid)}),b},v.getGroupByUuid=function(a){var b;return angular.forEach(v.groups,function(c){c.group_uuid===a&&(b=c)}),b},v.hideGroup=function(a){var b={user_uuid:d.user.id,group_uuid:a.group_uuid};g.postToggleGroupHide(b).then(function(b){var c;b.data.success?(c=b.data.success.message,a.hidden=!a.hidden):c=b.data.error.message,console.log(c)})},v.filterHiddenGroups=function(a){return a.filter(t)},v.removeContactFromGroupsByUuid=function(a){angular.forEach(v.groups,function(b){b.managers&&(b.managers=b.managers.filter(s("contact_uuid",a))),b.members&&(b.members=b.members.filter(s("contact_uuid",a)))})},v.authGoogle=function(){e.localStorage.setItem("preAuthNavigationRoute",l.path()),g.getGmailAuthUrl().then(function(a){e.location.href=a.data})},v.handleGoogleAuthIfIsRedirect=function(){v.isLoadedAfterRedirect()&&v.handleGoogleAuthRedirect()},v.isLoadedAfterRedirect=function(){return!!e.localStorage.getItem("preAuthNavigationRoute")},v.handleGoogleAuthRedirect=function(){l.path(e.localStorage.getItem("preAuthNavigationRoute")),e.localStorage.removeItem("preAuthNavigationRoute"),n(function(){var a={access_token:m.access_token,token_type:m.token_type,expires_in:parseInt(m.expires_in),created:parseInt(m.created)};d.user.gmailAccessToken=a,v.resetRouteParams(),v.importGmailContacts()},2e3)},v.resetRouteParams=function(){l.url(l.path())},v.testmethod=function(){v.specifyContactGroup().then(function(a){v.data=a,console.log(v.data)},function(a){})},v.importGmailContacts=function(){var a,b=d.user.gmailAccessToken;b&&g.postGetGmailContacts(b).then(function(b){if(console.log("IMPORTED DATA"),console.log(b.data.success.data),b.data.success.data){var c=b.data.success.data;a=q(c);var d=e.localStorage.getItem("importGmailContactsTo")?e.localStorage.getItem("importGmailContactsTo"):null;console.log("TARGET GROUP"),console.log(d),i.batchCreateContacts(a).then(function(a){d&&v.addContactsToGroup(a,d)})}})},v.addContactsToGroup=function(a,b){angular.forEach(a,function(a){v.addContactToGroup(a.contact_uuid,b)})},v.specifyContactGroup=function(a){var b=angular.element(document.body);return v.failednames="",angular.forEach(v.failedImport,function(a){v.failednames+=(0!==v.failednames.length?", ":"")+a}),console.log(v.groups),c.show({templateUrl:"/views/company/googlecontacts.html",locals:{data:"Pass Any Variable"},parent:b,clickOutsideToClose:!0,controller:["$scope","contactGroupsService",function(a,b){a.contactTarget=void 0,a.groups=b.groups,a.validMessage="There are "+b.contactsImport.length+"contacts ready to be imported.",a.invalidMessage="The following contacts can not be imported: "+b.failednames+". Bridge can not import contacts missing one or more of the three required contact fields: first name, last name, phone number. ",console.log(a.groups),a.cancel=function(){c.cancel()},a.submit=function(){c.hide(a.contactTarget)}}]})},v.attachManagersToGroups=function(a){for(var b,c,d,e=0;e<a.length;e++)if(b=a[e],b.managers)for(var f=0;f<b.managers.length;f++)c=b.managers[f],c&&(d=i.getContactByUserUuid(c.user_uuid),d&&(b.managers[f]=d));else b.managers=[]},v.clearInfo=function(){v.groups=[]},v}]),proySymphony.service("permissionGroupService",["$http","$rootScope","$window","_","dataFactory","$filter","userContactService","$uibModalStack","$auth","$location","$routeParams","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b,c,d,e=[];return angular.forEach(a,function(a){a.phone&&a.familyName&&a.givenName&&(b={},b.contact_profile_color=randomColor({luminosity:"dark"}),b.contact_name_family=a.familyName,b.contact_name_given=a.givenName,b.contact_email_address=a.email,c=g.buildDefaultPhoneObject(a.phone,"Mobile"),d={},d.input=b,d.phones=[c],e.push(d))}),e}function n(a){return a.contact_uuid}function o(a,b){return function(c){return!(c[a]==b)}}function p(a){var c,d;return angular.forEach(a,function(a){c=[],a.members.forEach(function(a){b.userContacts&&b.userContacts.length>0&&(d=f("getContactbyUUID")(b.userContacts,a.contact_uuid),d&&console.log("FOUND CONTACT"),null!==d&&c.push(d))}),a.contacts=c}),a}function q(a){return!a.hidden}var r={};return r.groups=[],r.setGroups=function(){i.isAuthenticated()&&r.getPermissionGroups(domainUuid).then(function(a){return a.data.error?(__env.enableDebug&&console.log(a.data.error.message),b.permissionsGroups=[],[]):void(a.data.success&&(b.permissionsGroups=a.data.success.data,__env.enableDebug&&console.log("PERM GROUPS"),__env.enableDebug&&console.log(b.permissionsGroups),c.localStorage.setItem("permissionsGroups",JSON.stringify(b.permissionsGroups))))})},r.userIsManagerOfGroup=function(a,b){return!!b.managed||b.owner_uuid===a},r.addContactToGroup=function(a,b){var c={contact_uuid:a,group_uuid:b};return e.postAddContactToGroup(c).then(function(a){if(a.data.success){var c=a.data.success.data,d=r.getGroupByUuid(b);d.contacts.push(c),d.members.push({contact_uuid:c.contact_uuid})}})},r.getContactGroups=function(){return e.getViewableContactGroups(b.user.domain.domain_uuid).then(function(a){if(a.data.error)return void console.log(a.data.error.message);console.log("CONTACT GROUPS RETRIEVED"),console.log(a.data.success.data);var b=a.data.success.data;return p(b),b},function(a){console.log("ERROR RETRIEVING CONTACT GROUPS"),console.log(a)})},r.createGroup=function(a){e.postCreateGroup(a).then(function(a){if(b.showalerts(a),a.data.success){var c=a.data.success.data;r.attachContactsToGroup(c),r.groups.push(c)}},function(a){console.log(a)})},r.attachContactsToGroup=function(a){var b,c=[];console.log(a),angular.forEach(a.members,function(a){b=g.getContactByUuid(a.contact_uuid),console.log(b),b&&c.push(b)}),a.contacts=c},r.contactIsGroupManager=function(a,b){var c=!1;return angular.forEach(b.managers,function(b){b.contact_uuid===a.contact_uuid&&(c=!0)}),c},r.setGroupManagers=function(a,b){return b.managers=a},r.setManagersList=function(a,b,c){var d={group_uuid:a.group_uuid,manager_uuids:b};e.setManagersList(d).then(function(c){if(c.data.success){var d=b.map(function(a){return g.getContactByUuid(a)});return r.setGroupManagers(d,a)}return void 0})},r.revokeManagerStatus=function(a,b){var c=b.managers.map(n).filter(function(b){return b!==a.contact_uuid});r.setManagersList(b,c)},r.deleteGroup=function(a){var c={group_uuid:a.group_uuid};e.deleteGroup(c).then(function(c){if(b.showalerts(c),c.data.success){var d=f("getGroupIndexbyUUID")(r.groups,a.group_uuid,"");r.groups.splice(d,1),h.dismissAll()}},function(a){console.log(a)})},r.retrieveGroupMemberUuids=function(a){var b=[];return angular.forEach(a.members,function(a){b.push(a.contact_uuid)}),b},r.getGroupByUuid=function(a){var b;return angular.forEach(r.groups,function(c){c.group_uuid===a&&(b=c)}),b},r.hideGroup=function(a){var c={user_uuid:b.user.id,group_uuid:a.group_uuid};e.postToggleGroupHide(c).then(function(b){var c;b.data.success?(c=b.data.success.message,a.hidden=!a.hidden):c=b.data.error.message,console.log(c)})},r.filterHiddenGroups=function(a){return a.filter(q)},r.removeContactFromGroupsByUuid=function(a){angular.forEach(r.groups,function(b){b.contacts&&(b.contacts=b.contacts.filter(o("contact_uuid",a))),b.managers&&(b.managers=b.managers.filter(o("contact_uuid",a))),b.members&&(b.members=b.members.filter(o("contact_uuid",a)))})},r.authGoogle=function(){c.localStorage.setItem("preAuthNavigationRoute",j.path()),e.getGmailAuthUrl().then(function(a){c.location.href=a.data})},r.handleGoogleAuthIfIsRedirect=function(){r.isLoadedAfterRedirect()&&r.handleGoogleAuthRedirect()},r.isLoadedAfterRedirect=function(){return!!c.localStorage.getItem("preAuthNavigationRoute")},r.handleGoogleAuthRedirect=function(){j.path(c.localStorage.getItem("preAuthNavigationRoute")),c.localStorage.removeItem("preAuthNavigationRoute"),l(function(){var a={access_token:k.access_token,token_type:k.token_type,expires_in:parseInt(k.expires_in),created:parseInt(k.created)};b.user.gmailAccessToken=a,r.resetRouteParams(),r.importGmailContacts()},2e3)},r.resetRouteParams=function(){j.url(j.path())},r.importGmailContacts=function(){var a,c=b.user.gmailAccessToken;c&&e.postGetGmailContacts(c).then(function(b){if(b.data.success.data){var c=b.data.success.data;a=m(c),g.batchCreateContacts(a)}})},r}]),proySymphony.service("customerGroupCodeService",["$http","$auth","$rootScope","$window","dataFactory","$filter",function(a,b,c,d,e,f){var g={};return g.codes=[],console.log(c.user.accessgroup),b.isAuthenticated()&&"superadmin"==c.user.accessgroup&&(g.setCustomerGroupCodes=function(){g.getGroupCodes().then(function(a){a&&(angular.copy(a,g.codes),d.localStorage.setItem("customerGroupCodes",JSON.stringify(g.codes)))})},g.getGroupCodes=function(){return e.getGroupCodes().then(function(a){return console.log(a.data),a.data.success?a.data.success.data:[]})}),b.isAuthenticated()&&"superadmin"==c.user.accessgroup&&g.setCustomerGroupCodes(),g}]),proySymphony.service("userContactService",["$http","$auth","$rootScope","$window","_","dataFactory","$filter","$q","$timeout","usefulTools",function(a,b,c,d,e,f,g,h,i,j){function k(a,b,d,e,f){var g,h=e.data.success,i=h.data;console.log("CONTACTS RETRIEVED"),console.log(i),c.nonContacts=h.noncontacts,g=h.totalContacts;var j=l(f);return m(i,j),a=a.concat(i),a.length<g?(b+=1,v.contactLoadInfo.loading=!0,v.contactLoadInfo.totalContacts=g,n(a,g,b,d)):a}function l(a){return v.contactsByDomain[a]?v.contactsByDomain[a]:(a===c.user.domain_uuid?v.contactsByDomain[a]=v.contacts:v.contactsByDomain[a]=[],v.contactsByDomain[a])}function m(a,b,c){for(var d,e,f=0;f<a.length;f++)d=a[f],e=v.seenContacts[d.contact_uuid],(e&&c||!e)&&b.push(d),v.seenContacts[d.contact_uuid]=!0}function n(a,b,c,d){return v.getContacts(null,null,c,d,!0).then(function(e){var f=e.data;return m(f,v.contacts),b=e.totalContacts,f&&(a=a.concat(f),a.length<b)?n(a,b,c+1,d):a})}function o(a){for(var b,d=[],e=0;e<a.length;e++)b=a[e],b&&(d=d.concat(b));if(d.length>0){var f="You imported "+d.length+" of your contacts! Please be aware that some contacts might not have been imported. Bridge will not import contacts who were previously imported into Bridge or who are missing one or more of the three required contact fields: first name, last name, phone number.";c.showSuccessAlert(f)}else c.showErrorAlert("No contacts were imported. Either your contacts were previously imported into Bridge, they are missing one or more of the three required contact fields: first name, last name, phone number, or you have reached your maximum number of allowed contacts. ");return d}function p(a,b){angular.forEach(a,function(a){a(v,b)})}function q(a){var b=JSON.stringify(a);return b}function r(a){return a?a.replace(/[^0-9]/g,""):a}function s(a){return a.filter(function(a){return"user"===a.contact_type})}function t(a){return a.filter(function(a){return"user"!==a.contact_type})}function u(a){angular.forEach(a,function(a){!a.contact_mobile_number&&a.phones.length>0&&angular.forEach(a.phones,function(b){"DID"===b.phone_label&&(a.contact_mobile_number=b.phone_number)})})}var v={contacts:[],userContactsOnly:[],onContactLoadCallbacks:[],onProfileImageChangeCallbacks:[],data:{initialContactsLoaded:null},scrollContacts:[],contactsByDomain:{},seenContacts:{},contactLoadInfo:{}};return v.setContacts=function(){return v.contacts=l(c.user.domain_uuid),c.userContacts=v.contacts,v.setUserContactsOnly().then(function(a){return a?v.getContacts().then(function(a){return a?(v.contactLoadInfo.loading=!1,v.addColorsToContacts(a),u(a),angular.copy(s(a),v.userContactsOnly),p(v.onContactLoadCallbacks),v.data.initialContactsLoaded=!0,c.$broadcast("initial.contacts.loaded"),v.contacts=v.contactsByDomain[c.user.domain_uuid],v.contacts):!1}):!1})},v.setUserContactsOnly=function(){return v.getUserContactsOnly().then(function(a){return a?(v.addColorsToContacts(a),u(a),angular.copy(s(a),v.userContactsOnly),p(v.onContactLoadCallbacks),v.data.initialContactsLoaded=!0,c.$broadcast("initial.contacts.loaded"),v.contacts):!1})},v.getUserContactsOnly=function(a,b){return a||(a=c.user.domain.domain_uuid),b||(b=c.user.id),f.getUserContactsOnly(a,b).then(function(b){if(b.data.error)return void console.log(b.data.error.message);var c=b.data.success.data,d=l(a);return m(c,d),v.contacts},function(a){return console.log("ERROR RETRIEVING CONTACTS"),void console.log(a)})},v.importUserContacts=function(a){var b={contacts:a};return f.postImportUserContacts(b).then(function(a){if(a.data.success){for(var b,d=a.data.success.data,e=0;e<d.length;e++)b=d[e],c.$broadcast("new.contact.added",b),c.contactsAvailable&&c.contactsAvailable.push(b),v.contacts.push(b);return d}return[]})},v.findContacts=function(a,b){return v.contactsByDomain[a]?new Promise(function(b){b(v.contactsByDomain[a])}):v.getContacts(a,b)},v.getContactsReference=function(a){l(a)},v.getContacts=function(a,b,d,e,g){var h=[];a||(a=c.user.domain.domain_uuid),b||(b=c.user.id),d||(d=1),e||(e=50);var i={domain_uuid:a,user_uuid:b,page:d,perPage:e};return f.postGetContacts(i).then(function(b){return b.data.error?void console.log(b.data.error.message):g?b.data.success:k(h,d,e,b,a)},function(a){return console.log("ERROR RETRIEVING CONTACTS"),void console.log(a)})},v.getContactByUuid=function(a,b){var c,d=b?v.contactsByDomain[b]:v.contacts;return angular.forEach(d,function(b){a===b.contact_uuid&&(c=b)}),c},v.getContactByUserUuid=function(a,b){var c=b?v.contactsByDomain[b]:v.contacts;return j.find(c,"user_uuid",a)},v.phoneNumberBelongsToContact=function(a,b){for(var c,d=0;d<a.phones.length;d++)if(c=a.phones[d],c.phone_number===b)return c;return!1},v.addContact=function(a){void 0===a.input.favorite&&(a.input.favorite=!1);var b={input:q(a.input),phones:q(a.phones)};return f.addContact(b).then(function(a){if(a.data.success){var b=a.data.success.data;return c.$broadcast("new.contact.added",b),c.contactsAvailable&&c.contactsAvailable.push(b),v.contacts.push(b),c.contactaddition={},{status:!0,data:b.contact_uuid}}return{status:!1,reason:a.data.error.reason}})},v.buildDefaultPhoneObject=function(a,b){return a=r(a),{contact_phone_uuid:null,contact_uuid:null,phone_label:b,phone_number:a,phone_extension:null,phone_primary:!0}},v.batchCreateContacts=function(a,b){console.log("PACKAGED CONTACTS IN BATCH CREATE"),console.log(a);var c=[],d=250,e=250,f=a.slice(0,d);a=a.slice(d,a.length);for(var g=0;g<f.length;g+=e)c.push(v.importUserContacts(f.slice(g,g+e)));return h.all(c).then(function(c){return a.length>0?v.batchCreateContacts(a,!0).then(function(a){return c=c.concat(a),b?c:o(c)}):b?c:o(c)})},v.addToInvalidContactData=function(a){if(a){var b=d.localStorage.getItem("importedInvalidContacts");b||(b=""),b+=(0!==b.length?", ":"")+a,d.localStorage.setItem("importedInvalidContacts",b)}},v.addColorsToContacts=function(a){angular.forEach(a,function(a){v.addColorToContact(a)})},v.addColorToContact=function(a){if(!a.contact_profile_color||""==a.contact_profile_color){var b=randomColor({luminosity:"light"}),c={category:"profile",name:"color",value:b,contact_uuid:a.contact_uuid};f.updateContactSetting(c).then(function(c){c.error?__env.enableDebug&&console.log(c.error.message):a.contact_profile_color=b},function(a){__env.enableDebug&&console.log("ERROR DOING COLOR"+JSON.stringify(a))})}},v.updateContactByUuid=function(a,b,c){var d=v.getContactByUuid(b),f=e.merge(d,c);angular.copy(f,d)},v.getContactByPhoneNumber=function(a){for(var b,c,d=0;d<v.contacts.length;d++)if(b=v.contacts[d],b.phones){c=v.contacts[d].phones;for(var e=0;e<c.length;e++)if(c[e].phone_number===a)return b}return null},v.getContactByExtension=function(a){for(var b,c=0;c<v.contacts.length;c++)if(b=v.contacts[c],b.extension===a)return b;return null},v.countUsers=function(){var a=0;return angular.forEach(v.contacts,function(b){"user"===b.contact_type&&b.profile_status&&(a+=1)}),a},v.selectContact=function(a){console.log(a),void 0===c.selectedContacts[a.contact_uuid]?c.selectedContacts[a.contact_uuid]=!0:c.selectedContacts[a.contact_uuid]=!c.selectedContacts[a.contact_uuid];var b=g("getByUUID")(c.contactsSelected,a.contact_uuid,"contact");null!==b?c.selectedContacts[a.contact_uuid]||c.contactsSelected.splice(b,1):c.selectedContacts[a.contact_uuid]&&c.contactsSelected.push(a),console.log(c.selectedContacts),console.log(c.contactsSelected)},v.registerOnContactLoadCallback=function(a){v.data.initialContactsLoaded?p([a]):v.onContactLoadCallbacks.push(a)},v.registerOnProfileImageChange=function(a){v.onProfileImageChangeCallbacks.push(a)},v.setContactProfileImage=function(a,b){a.contact_profile_image=b,p(v.onProfileImageChangeCallbacks,a)},v.performUserProfileImageChangeCallbacks=function(a,b){p(v.onProfileImageChangeCallbacks,{user_uuid:a,contact_profile_image:b})},v.userContactTotalMaxedOut=function(){var a=t(v.contacts);return a.length>=300},v.removeContactFromCollectionByUuid=function(a,b){var c=g("getIndexbyUUID")(a,b);return a.splice(c,1),a},v.deleteContact=function(a){return f.getDeleteUserContact(a).then(function(b){if(b.data.success){if(v.removeContactFromCollectionByUuid(v.contacts,a),v.removeContactFromCollectionByUuid(v.userContactsOnly,a),c.contactsAvailable){var d=g("getIndexbyUUID")(c.contactsAvailable,a);null!==d&&c.contactsAvailable.splice(d,1)}return c.$broadcast("contact.deleted",a),b}return!1})},v.getContactbyMMId=function(a){var b=function(b){return b.chat_id===a};return e.find(v.contacts,b)},v.clearInfo=function(){v.contacts=[]},v}]),proySymphony.service("chatMacroService",["dataFactory","$rootScope",function(a,b){var c={chatMacros:[],showMainChannelSuggestionList:!1,currentMessage:""};return b.chatMacroobj={},c.addMacroToCollection=function(a,b){var c={},d=!1;0==b.length?(c[a.hot_key_text]||(c[a.hot_key_text]=[]),c[a.hot_key_text].push(a)):(angular.forEach(b,function(b){Object.keys(b)[0]==a.hot_key_text&&(b[a.hot_key_text].push(a),d=!0)}),d||(c[a.hot_key_text]=[],c[a.hot_key_text].push(a))),0!=Object.keys(c).length&&b.unshift(c)},c.getChatMacros=function(){return c.getMacroHotKeys().length>0?new Promise(function(a){a(c.chatMacros)}):c.loadChatMacros()},c.loadChatMacros=function(d,e){return d||(d=b.user.domain_uuid),void 0===e&&(e=!0),a.getChatMacrosByDomain(d).then(function(a){if(a.data.success){var d=a.data.success.data;return e?(c.chatMacros=[],angular.forEach(d,function(a){c.addMacroToCollection(a,c.chatMacros)}),angular.forEach(c.chatMacros,function(a){b.chatMacroobj[Object.keys(a)[0]]=Object.values(a)[0]}),c.chatMacros):d}return void 0})},c.updateMacro=function(b){return a.postUpdateMacro(b).then(function(a){return a})},c.createMacro=function(d,e,f,g){void 0===f&&(f=c.chatMacros),void 0===g&&(g=b.user.domain_uuid);var h={domain_uuid:g,hot_key_text:d,text_choice_text:e};a.postCreateChatMacro(h).then(function(a){if(a.data.success){var b=a.data.success.data;c.addMacroToCollection(b,f)}})},c.removeMacroFromCollectionByUuid=function(a,d){var e={};return angular.forEach(d,function(a){e[Object.keys(a)[0]]=Object.values(a)[0]}),angular.forEach(e,function(d,e){var f=d.filter(function(b){return!(b.chat_macro_uuid===a)});0===f.length?(angular.forEach(c.chatMacros,function(a){Object.keys(a)[0]==e&&(b.index=c.chatMacros.indexOf(a))}),b.index>-1&&c.chatMacros.splice(b.index,1)):angular.copy(f,d)}),!0},c.deleteMacro=function(b,d){void 0===d&&(d=c.chatMacros),a.getDeleteMacroByUuid(b.chat_macro_uuid).then(function(a){a.data.success&&c.removeMacroFromCollectionByUuid(b.chat_macro_uuid,d)})},c.getMacroHotKeys=function(){return angular.forEach(c.chatMacros,function(a){b.chatMacroobj[Object.keys(a)[0]]=Object.values(a)[0]}),Object.keys(b.chatMacroobj)},c.getSuggestionsByHotKey=function(a){return b.chatMacroobj[a].map(function(a){return a.text_choice_text})},c.textContainsMacroHotKey=function(a){var b=(a.split(" ").pop(),c.getMacroHotKeys()),d=!1;return angular.forEach(words,function(a){b.includes(a)&&(d=a)}),d},c.getSearchTextFromMessageByHotKey=function(a,b){var c=b.split(" ").reverse(),d=c.indexOf(a);return c.slice(0,d).reverse().join(" ")},c.findMatchingSuggestions=function(a,b){var d=c.getSuggestionsByHotKey(a),e=[],f=c.getSearchTextFromMessageByHotKey(a,b);return angular.forEach(d,function(a){a.indexOf(f)>=0&&e.push(a)}),e.length>0?e:null},c.getMainChatCurMessageValue=function(){var a=angular.element(".chat-post-create-body").find("textarea");return a[0].value},c.containsMatchingSuggestions=function(a,b){return!!c.findMatchingSuggestions(a,b)},c.chatMacroTyped=function(a){var b=c.getMacroHotKeys();return b.includes(a)?!0:!1},c.insertTextIntoMessage=function(a,b,c){var d=b.split(" ").reverse(),e=d.indexOf(a);return b=d.slice(e+1,d.length).reverse().join(" "),b+=b.trim().length>0?" "+c:c},c}]),proySymphony.service("audioLibraryService",["dataFactory","$filter","$rootScope","$window","userService",function(a,b,c,d,e){function f(a){angular.forEach(a,function(a){a.access_level||(a.access_level="personal")})}var g={audioLibraries:[],audioChunks:[]};return g.getAudioLibraries=function(a){return g.loadAudioLibraries(a)},g.loadAudioLibraries=function(b,d){return b||(b=c.user.domain_uuid),void 0===d&&(d=!0),a.getAudioLibrariesByDomain(b).then(function(a){return console.log(a),a.data.success?(f(a.data.success.data),d?(angular.copy(a.data.success.data,g.audioLibraries),g.audioLibraries):a.data.success.data):!1})},g.deleteAudioLibraryByUuid=function(b,d){return a.getDeleteAudioLibraryByUuid(b,d).then(function(a){return a.data.success?(c.libraryDeleted=b,g.audioLibraries):(console.log("FAILED DELETING AUDIO LIBRARY"),console.log(a),!1)})},g.renameAudioLibraryByUuid=function(b,c){return a.getRenameAudioLibraryByUuid(b,c).then(function(a){if(a.data.success){var b=a.data.success.data;return b.file_title}return null})},g.createLibrary=function(b,d,e,f,h){f||(f=c.user.domain_uuid);var i=new FormData;return i.append("recording",b),i.append("user_uuid",c.user.id),i.append("category",d),i.append("access_level",e),i.append("domain_uuid",f),a.postUploadAudioFile(i).then(function(a){return a.data.success&&(h?h.push(a.data.success.data):g.audioLibraries.push(a.data.success.data)),a},function(a){console.log(a)})},g.createMusicOnHold=function(b,c){var d=new FormData;return d.append("music",b),d.append("name",c),d.append("fileName",b.name),a.postCreateMusicOnHold(d).then(function(a){return a},function(a){console.log(a)})},g.addMusicToMusicOnHold=function(b,c){var d=new FormData;return d.append("music",b),d.append("music_on_hold_uuid",c),d.append("fileName",b.name),a.postAddMusicToMusicOnHold(d).then(function(a){return a},function(a){console.log(a)})},g.filterAudioLibrariesByField=function(a,b,c){return a&&b&&c?a.filter(function(a){return c.indexOf(a[b])>-1}):null},g.filterAudioLibrariesByCategories=function(a,b){return a&&b?g.filterAudioLibrariesByField(a,"category",b):null},g.getAudioLibraryFromCollectionByUuid=function(a,b){var c;if(console.log(b),b)for(var d=0;d<b.length;d++)if(c=b[d],c.audio_library_uuid===a)return c;return void 0},g.updateRingtoneSettings=function(){c.user.callRingtone&&a.getAudioLibraryByUuid("ringtones",c.user.callRingtone).then(function(a){a.data.success&&(c.user.callRingtonePath=a.data.success.data.filepath,d.localStorage.setItem("currentUser",JSON.stringify(c.user)))}),c.user.textRingtone&&a.getAudioLibraryByUuid("ringtones",c.user.textRingtone).then(function(a){a.data.success&&(c.user.textRingtonePath=a.data.success.data.filepath,d.localStorage.setItem("currentUser",JSON.stringify(c.user)))}),c.user.chatRingtone&&a.getAudioLibraryByUuid("ringtones",c.user.chatRingtone).then(function(a){a.data.success&&(c.user.chatRingtonePath=a.data.success.data.filepath,d.localStorage.setItem("currentUser",JSON.stringify(c.user)))}),c.user.videoInviteRingtone&&a.getAudioLibraryByUuid("ringtones",c.user.videoInviteRingtone).then(function(a){a.data.success&&(c.user.videoInviteRingtonePath=a.data.success.data.filepath,c.$broadcast("sync.audio.libraries"),d.localStorage.setItem("currentUser",JSON.stringify(c.user)))})},g}]),proySymphony.service("callService",["$rootScope","$window","$interval","$timeout","dataFactory","usefulTools","userContactService","notificationService","symphonyConfig","ngAudio","userService",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){a=z.formatPhoneNumber(a),z.savePreCallStatus(),z.setOutgoingCallInfo(a),makeCallBase(a),p(z.onCallDialedCallbacks)}function m(a){var b;angular.forEach(a,function(a){var c=a.params.remote_caller_id_number;12===c.length&&(a.params.remote_caller_id_number=c.slice(2,c.length)),a.contact||(b=g.getContactByPhoneNumber(a.params.remote_caller_id_number),b||(b=g.getContactByExtension(a.params.remote_caller_id_number)),b&&(a.contact=b))})}function n(a){angular.forEach(a,function(a){a.startTime||(a.startTime=new Date)})}function o(a){return a&&"string"==typeof a&&a.indexOf("Success")>-1?!0:null}function p(a){angular.forEach(a,function(a){a()})}function q(a){return 5==a.length}function r(a){return!!callListBase[a].startTime}function s(a){return!!callListBase[a].onHold}function t(a,b){return b.startTime-a.startTime}function u(a){return a=a.sort(t),a=a.filter(function(a){return!a.whisper&&!a.listen&&!a.barge}),a[0]}function v(a){return a=a.sort(t).reverse(),a=a.filter(function(a){return!a.whisper&&!a.listen&&!a.barge}),a[0]}function w(a){for(var b,c=0;c<a.length;c++)if(b=a[c],b.declined)return b.hangup(),!0;return null}function x(){a.notification&&a.notification.pause()}function y(){if("Do Not Disturb"===a.user.user_status||"Away"===a.user.user_status)return!0;if(a.domainsStatus)for(var b=0;b<a.domainsStatus.length;b++)if(a.user.user_status==a.domainsStatus[b].status_name&&!a.domainsStatus[b].receive_calls)return!0;return!1}var z={calling:!1,onCallEndCallbacks:[],onCallAddedCallbacks:[],onCallDialedCallbacks:[],scheduledLWBCalls:[],data:{}};return z.initialize=function(){if(__env.enableVerto){__env.enableDebug&&console.log("Verto init in app.js");var b=1;try{b=2,loginExtensionBase=a.user.user_ext,b=3,pwBase=a.user.extension.password,b=4,fsDomainBase=a.user.extension.dial_domain,wssServerBase=a.user.extension.dial_domain,b=6}catch(c){__env.enableDebug&&console.log("ctrlLogin exception: "+b),__env.enableDebug&&console.log("ctrlLogin exception: "+c)}vertoInit(z,a.user.domain.verto_port),z.setPreCallStatus(),__env.enableDebug&&console.log("Verto init complete.")}},z.setOutgoingCallInfo=function(a){var b=g.getContactByPhoneNumber(a);b||(b=g.getContactByExtension(a)),b?z.calling={number:a,contact:b,params:{remote_caller_id_name:a}}:z.calling={number:a,params:{remote_caller_id_name:a}},q(a)&&(z.calling={number:a,isConferenceCall:!0,params:{remote_caller_id_name:a}})},z.makeCall=function(a){b.localStorage.setItem("number",a),k.performMediaCheck().then(function(b){d(function(){b?l(a):z.handleBadMediaRequest()})},function(a){z.handleBadMediaRequest()})},z.handleBadMediaRequest=function(){var b="We could not start your call",c='This is probably because you have not allowed access to your microphone or you do not have one plugged in. You can allow access by selecting the camera icon in the top right corner of your browser, in the address bar and choosing "always allow".';a.showAlert(b,c)},z.addCall=function(a){d(function(){a=z.formatPhoneNumber(a),z.setOutgoingCallInfo(a);var b=z.currentCalls(),c=v(b);z.holdCallById(c.callID),makeCallBase(a)})},z.outgoingThreeWayCall=function(){return z.calling&&z.onCall()?z.calling:null},z.outgoingCall=function(){return z.calling},z.hangUpCall=function(){d(function(){var b=!1;angular.forEach(z.currentCalls(),function(c){b=!0,c.isConferenceCall&&a.onConferenceCall?a.$broadcast("end.conference.call"):c.hangup()}),b&&(z.calling=!1)})},z.hangUpCallById=function(a){var b=callListBase[a];b&&b.hangup()},z.onCall=function(){var a=z.currentCalls().filter(function(a){return!!a.startTime});return z.totalLWBCalls()>0||z.scheduledLWBCalls.length>0?!1:a.length>0},z.onThreeWayCall=function(){return z.currentCalls().length>1},z.incomingCalls=function(){var a=z.currentCalls(),b=[];return angular.forEach(a,function(a){r(a.callID)||b.push(a)}),b},z.updateIncomingCallTotal=function(){d(function(){z.totalIncomingCalls=z.incomingCalls().length-z.totalLWBCalls()})},z.handleIncomingCall=function(a){if(z.scheduledLWBCalls.length>0){var b=z.scheduledLWBCalls[0];b.declined?z.declineCall(a.id):answerCallBase()}else y()?z.sendToVoicemail(a.id):(z.updateIncomingCallTotal(),h.handleIncomingCallNotification(z.onCall(),a))},z.setPreCallStatus=function(){if(0==z.currentCalls().length&&!z.merging){var c=b.localStorage.getItem("preCallStatus");c&&(a.changeUserStatus(c),b.localStorage.removeItem("preCallStatus"))}},z.savePreCallStatus=function(){"Busy on Call"!==a.user.user_status&&(b.localStorage.setItem("preCallStatus",a.user.user_status),a.changeUserStatus("Busy on Call",!0))},z.declineCall=function(a){d(function(){z.declined=!0,callListBase[a].declined=!0,x(),z.updateIncomingCallTotal(),answerCallBase()})},z.sendToVoicemail=function(a){d(function(){sendtovoicemail()})},z.answerCall=function(a){d(function(){var a=z.currentCalls();x(),n(a),z.updateIncomingCallTotal(),answerCallBase()})},z.onCallAdded=function(){d(function(){z.calling=!1,z.merging=!1,x();var b=z.currentCalls();n(b);var c=u(b);if(z.declined&&(w(f.convertObjectToArray(callListBase)),z.declined=!1),z.updateIncomingCallTotal(),z.scheduledLWBCalls.length>0){var d=z.scheduledLWBCalls.shift(),e=d.type;c&&(c[e]=d),d.declined&&z.hangUpLWB(d.type,d.uuid),z.updateIncomingCallTotal()}else c&&(z.savePreCallStatus(),z.stopRecording([c]),"Outbound Call"===c.params.remote_caller_id_name&&(c.params.remote_caller_id_name=c.params.remote_caller_id_number),q(c.params.remote_caller_id_number)&&(c.isConferenceCall=!0,a.conferenceCallID=c.callID),p(z.onCallAddedCallbacks))})},z.callDismissed=function(){d(function(){z.calling=!1,x(),z.updateIncomingCallTotal(),z.setPreCallStatus(),p(z.onCallEndCallbacks)})},z.currentCalls=function(){if(callListBase){var a=f.convertObjectToArray(callListBase);return m(a),a=a.filter(function(a){return!a.declined})}return[]},z.muteAllCalls=function(){angular.forEach(z.currentCalls(),function(a){a.setMute("off")}),z.muteOn=!0},z.unMuteAllCalls=function(){angular.forEach(z.currentCalls(),function(a){a.setMute("on")}),z.muteOn=!1},z.muteActive=function(){return z.muteOn},z.recordCall=function(){var a=z.callsNotOnHold();angular.forEach(a,function(a){e.getStartRecordCall(a.callID).then(function(b){return o(b.data)?(a.recording=!0,!0):null})})},z.stopRecording=function(a){a||(a=z.callsBeingRecorded()),angular.forEach(a,function(a){e.getStopRecordCall(a.callID).then(function(b){return o(b.data)?(a.recording=!1,!0):null})})},z.callsBeingRecorded=function(){var a=z.currentCalls();return a.filter(function(a){return a.recording})},z.recordingActive=function(){return z.callsBeingRecorded().length>0},z.holdCall=function(){angular.forEach(z.currentCalls(),function(a){z.holdCallById(a.callID)})},z.unHoldCall=function(){angular.forEach(z.currentCalls(),function(a){z.unHoldCallById(a.callID)})},z.holdCallById=function(a){var b=callListBase[a];b.recording&&z.stopRecording([b]),b.onHold=!0,b.hold()},z.unHoldCallById=function(a){var b=callListBase[a];b.onHold=!1,b.unhold()},z.callsOnHold=function(){var a=z.currentCalls();return a.filter(function(a){return a.onHold})},z.callsNotOnHold=function(){var a=z.currentCalls();return a.filter(function(a){return!a.onHold})},z.onHold=function(){var a=z.currentCalls();return z.callsOnHold().length==a.length},z.swap=function(){angular.forEach(z.currentCalls(),function(a){a.onHold?z.unHoldCallById(a.callID):z.holdCallById(a.callID)})},z.mergeThreeWayCall=function(a,b){var c={uuid1:a,uuid2:b};r(a)&&r(b)&&(z.merging=!0,e.merge3WayCall(c).then(function(a){a.data?z.makeCall(a.data[0].modExtension):z.merging=!1}))},z.formatPhoneNumber=function(a){return a.replace(/\(/g,"").replace(/\)/g,"").replace(/ /g,"").replace(/-/g,"");
},z.registerOnCallEndCallback=function(a){z.onCallEndCallbacks.push(a)},z.registerOnCallAddedCallback=function(a){z.onCallAddedCallbacks.push(a)},z.registerOnCallDialedCallback=function(a){z.onCallDialedCallbacks.push(a)},z.initiateSupervisedTransfer=function(a){z.data.transferringCall=!0,z.addCall(a)},z.confirmSupervisedTransfer=function(){var a=z.currentCalls().sort(t),b=a[0],c=a[1],d=c.callID,e={action:"replace",replaceCallID:d};b.sendMethod("verto.modify",e),z.hangUpCall(),z.data.transferringCall=!1},z.getSupervisedTransferRecipientCallId=function(){var a=z.currentCalls().sort(t).reverse();return a[0]},z.blindTransfer=function(a){transferCallBase(a)},z.onConferenceCall=function(){return z.currentCalls().some(function(a){return!!a.isConferenceCall})},z.getFirstAnsweredCallNotOnHold=function(){for(var a,b=z.currentCalls(),c=0;c<b.length;c++)if(a=b[c],!s(a.callID)&&r(a.callID))return a;return null},z.listenCall=function(a){z.scheduledLWBCalls.length>0||(z.LWBInProgress("barge")&&z.hangUpLWB(),z.onCall()||z.LWBInProgress("barge")||(a.type="listen",z.scheduledLWBCalls.push(a),e.getListenCall(a.ext,a.uuid)))},z.whisperCall=function(a){if(!(z.scheduledLWBCalls.length>0||(z.LWBInProgress("barge")&&z.hangUpLWB(),z.onCall()||z.LWBInProgress("barge")))){var b="Outbound"===a.direction?a.uuid:a.b_uuid;a.type="whisper",z.scheduledLWBCalls.push(a),e.getWhisperCall(a.ext,b)}},z.bargeCall=function(a){z.scheduledLWBCalls.length>0||z.onCall()||(z.hangUpLWB(),a.type="barge",z.scheduledLWBCalls.push(a),e.getBargeCall(a.ext,a.uuid))},z.LWBInProgress=function(a,b){var c=!1;return angular.forEach(z.currentCalls(),function(d){!b&&d[a]?c=!0:!d[a]||d[a].type!==a||d[a].uuid!==b&&d[a].b_uuid!==b||(c=!0)}),angular.forEach(z.scheduledLWBCalls,function(d){b||d.type!==a||d.declined?d.type!==a||d.uuid!==b&&d.b_uuid!==b||d.declined||(c=!0):c=!0}),c},z.activeLWBCall=function(){for(var a,b,c=["listen","whisper","barge"],d=z.currentCalls(),e=0;e<d.length;e++){a=d[e];for(var f=0;f<c.length;f++)if(b=c[f],a[b])return a[b]}return z.scheduledLWBCalls.length>0?z.scheduledLWBCalls[0]:null},z.hangUpLWB=function(a,b){if(!a)var c=!0;angular.forEach(z.currentCalls(),function(d){c&&(d.listen||d.whisper||d.barge)?d.hangup():!d[a]||d[a].type!==a||d[a].uuid!==b&&d[a].b_uuid!==b||d.hangup()}),angular.forEach(z.scheduledLWBCalls,function(c){c.type!==a||c.uuid!==b&&c.b_uuid!==b||(c.declined=!0)})},z.totalLWBCalls=function(){var a=z.currentCalls();return a=a.filter(function(a){return a.listen||a.whisper||a.barge}),a.length},z.restartVerto=function(){var a=c(function(){z.calling||z.onCall()||(c.cancel(a),vertoHandleBase.logout(),z.initialize())},1e3)},z}]),proySymphony.service("emailService",["callService","$window","$rootScope","$timeout",function(a,b,c,d){var e={};return e.startEmailClient=function(a,d,e){var f="?to="+a;(d||e)&&(f+="&",d&&(f+="subject=",angular.forEach(d.split(),function(a){f+=a+"%20"})),e&&(d&&(f+="&"),f+="body=",angular.forEach(e.split(),function(a){f+=a+"%20"}))),b.localStorage.setItem("openEmail",f),b.open(c.onescreenBaseUrl+"/sendemail.html"+f,"_blank")},e.validEmailAddress=function(a){if(!a)return!1;var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},e}]),proySymphony.service("musicOnHoldService",["dataFactory","$rootScope",function(a,b){function c(a,b){a.files=a.files.filter(function(a){return a!==b})}function d(a,b){for(var c=0;c<b.length;c++)if(b[c].music_on_hold_uuid===a)return b[c];return void 0}var e={musicOnHoldRecords:[],data:{}};return e.init=function(){e.loadMusicOnHoldRecords()},e.getMusicOnHoldRecords=function(){return e.musicOnHoldRecords.length<1?e.loadMusicOnHoldRecords():new Promise(function(a){a(e.musicOnHoldRecords)})},e.loadMusicOnHoldRecords=function(){return a.getMusicOnHoldByDomain(b.user.domain_uuid).then(function(a){var b,c;return a.data.success&&(b=a.data.success.data,c=b.libraries,e.data.defaultMOHName=b.defaultName),c&&c.length>0?(angular.copy(c,e.musicOnHoldRecords),e.musicOnHoldRecords):!1})},e.createMusicOnHold=function(c,d,f){var g=new FormData;return f||(f=b.user.domain_uuid),g.append("music",c),g.append("groupName",d),g.append("fileName",c.name),g.append("domain_uuid",f),a.postCreateMusicOnHold(g).then(function(a){return console.log(a),a.data.success?(e.musicOnHoldRecords.push(a.data.success.data),a.data.success.data):!1})},e.deleteMusicFile=function(f,g){console.log(f,g),g!==e.data.defaultMOHName&&b.confirmDialog("Are you sure you want to delete this music? ").then(function(b){b&&a.getDeleteMusicFileFromMusicOnHold(f,g).then(function(a){if(console.log(a),a.data.success){var b=d(f,e.musicOnHoldRecords);return c(b,g),a}return!1})})},e.addMusicToMusicOnHold=function(b,c){var d=new FormData;return d.append("file",c),d.append("music_on_hold_uuid",b.music_on_hold_uuid),d.append("fileName",c.name),a.postAddMusicToMusicOnHold(d).then(function(a){if(a.data.success){var c=a.data.success.data;return b.files.push(c),a}return!1})},e.renameMusicFile=function(b,c,d){var f={fileName:b,newFileName:c,musicUuid:d.music_on_hold_uuid};return b!==e.data.defaultMOHName&&c!==e.data.defaultMOHName?a.postRenameMusicFile(f).then(function(a){if(a.data.success){var e=d.files.indexOf(b);return e>-1&&(d.files[e]=c),a}return!1}):!1},e}]),proySymphony.service("emulationService",["userContactService","$rootScope",function(a,b){var c={emulatedCompany:null,emulatedUser:null};return c.setEmulatedCompany=function(a){var b=a.domain_uuid;c.emulatedCompany=a,c.assignEmulatedDomainContacts(b)},c.setEmulatedUser=function(a){},c.assignEmulatedDomainContacts=function(c){a.findContacts(c).then(function(a){a&&(c!==b.user.domain.domain_uuid&&(a=a.filter(function(a){return a.contact_uuid!==b.user.contact_uuid&&a.domain_uuid===c})),b.userContacts=a)})},c}]),proySymphony.service("videoConfService",["__env","$rootScope","$auth","$cookies","$window","_","dataFactory","symphonyConfig","metaService",function(a,b,c,d,e,f,g,h,i){function j(){return a.vcUrl&&"http://localhost:9000"===a.vcUrl||a.testingVideoInvite}var k={audioLibraries:[],videoConference:{},shareConference:{},videoBeingRetrieved:!1,shareBeingRetrieved:!1,videoConferenceInitial:{},shareConferenceInitial:{}};return k.init=function(){k.getCurrentRoom("share"),k.getCurrentRoom("video")},k.openConference=function(c,g){var h={user_uuid:b.user.id,domain_uuid:b.user.domain_uuid};g&&(h=f.merge(h,g));var i=a.environment+"BridgeInfo";if(h.BridgeToken=b.userToken,j())d.putObject(i,h);else{var k={path:"/",domain:".kotter.net"};d.putObject(i,h,k)}var l;l&&(c=c+"?userToken="+b.userToken+"&domainUuid="+h.domain_uuid+"&userUuid="+h.user_uuid),e.open(c)},k.getCurrentRoom=function(a){return k[a+"BeingRetrieved"]=!0,g.getVideoSessionIds(b.user.id,a).then(function(b){if(k[a+"BeingRetrieved"]=!1,b.data.success){var c=b.data.success.conference[0],d=k[a+"Conference"],e=k[a+"ConferenceInitial"];return angular.copy(c,d),angular.copy(c,e),d.room=d.name,e.room=e.name,{status:!0,data:d}}return{status:!1,message:b.data.error.message}})},k.isRoomAvailable=function(a,b){return g.getCheckRoom(a,b).then(function(a){if(a.data.success){var c=a.data.success.conference,d=k[b+"Conference"];return angular.copy(c,d),d.room=d.name,{status:!0,data:d}}return{status:!1,message:a.data.error.message}})},k.resetInitial=function(a){var b=k[a+"Conference"],c=k[a+"ConferenceInitial"];angular.copy(b,c)},k.roomBeingRetrieved=function(a){return!k[a+"BeingRetrieved"]},k.currentVideoUrl=function(){var b=a.vcUrl&&""!==a.vcUrl?a.vcUrl:h.vcUrl;return b+"/"+k.videoConference.name},k.sendVideoInvite=function(a){var c={invite:{recipient_uuid:a.user_uuid,sender_uuid:b.user.id,room_url:k.currentVideoUrl()},user_uuid:b.user.id,domain_uuid:b.user.domain_uuid};j()&&(c.invite.recipient_uuid=b.user.id),g.sendTokboxInvite(c),k.openConference(c.invite.room_url,c)},i.registerOnRootScopeUserLoadCallback(function(){k.init()}),k}]),proySymphony.service("permissionService",["emulationService","$rootScope","__env","dataFactory","$window","$uibModalStack","fileService",function(a,b,c,d,e,f,g){function h(){var c;return c=a.emulatedCompany?a.emulatedCompany.domain_uuid:b.user.domain.domain_uuid}function i(){d.getManagerEmulationStatus().then(function(a){a.data.error?c.enableDebug&&console.log(a.data.error.message):(b.emulationStatus=a.data.success.data,e.localStorage.setItem("emulationStatus",JSON.stringify(b.emulationStatus)),c.enableDebug&&console.log("MANAGER EMULATION STATUS"),c.enableDebug&&console.log(b.emulationStatus))},function(a){c.enableDebug&&console.log(a)})}var j={};return j.createNewPermissionsGroup=function(a){var h=j.preparePermGroupData(a,null);h.file=a.file;var k=g.convertObjectToFormData(h);if(0===h.errors.length)d.postCreatePermissionGroup(k).then(function(a){if(b.showalerts(a),a.data.success){b.permissionsGroups||(b.permissionsGroups=[]);var c=a.data.success.data;c.communications=JSON.stringify(c.communications),b.permissionsGroups.push(c),e.localStorage.setItem("permissionsGroups",JSON.stringify(b.permissionsGroups)),i(),f.dismissAll()}},function(a){c.enableDebug&&console.log(a)});else{var l="";angular.forEach(h.errors,function(a){l+=(0!==l.length?", ":"")+a}),b.alerts.push({error:!0,message:"Error: "+l})}},j.preparePermGroupData=function(a,d){c.enableDebug&&console.log(a);var e=[],f=[];angular.forEach(a.communication_options,function(a,b){a===!0&&f.push(b)});var g=[];angular.forEach(a.member,function(a,b){a===!0&&g.push(b)});var i=[];angular.forEach(a.manager,function(a,b){a===!0&&i.push(b)}),0===f.length&&e.push("At least one Communication Channel must be selected."),0===g.length&&e.push("At least one Member must be specified."),0===i.length&&e.push("At lease one Manager must be specified.");var j={permissions_group_uuid:null!==d?b.permissionsGroups[d].permissions_group_uuid:null,group_name:a.group_name,group_color:a.group_color?a.group_color:null,group_communications:f,group_members:g,group_managers:i,errors:e};return j.domain_uuid||(j.domain_uuid=h()),j},j}]),proySymphony.service("timeKeeperService",["$http","Slug","$mdDialog","$rootScope","$window","_","dataFactory","$filter","userContactService","$uibModalStack","$auth","$location","$routeParams","$timeout","usefulTools","symphonyConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q={tkUsers:[],activeTkUsers:[]};return q.setTkUsers=function(){q.getTkUsers().then(function(a){a?angular.copy(a,q.tkUsers):e.localStorage.removeItem("tkUsers")})},q.getTkUsers=function(){return g.getTimeKeeperUsers().then(function(a){if(a.data.success){e.localStorage.removeItem("tkUsers");var b=a.data.success.data;return b.length>0&&e.localStorage.setItem("tkUsers",JSON.stringify(b)),b}})},q.setActiveTkUsers=function(){q.getActiveTkUsers().then(function(a){a&&angular.copy(a,q.activeTkUsers)})},q.getActiveTkUsers=function(){return g.getTimeKeeperUsers().then(function(a){return a.data.success?(d.activeTkUsers=[],angular.forEach(a.data.success.data,function(a){a.enabled&&d.activeTkUsers.push(a)}),e.localStorage.setItem("activetkUsers",JSON.stringify(d.activeTkUsers)),d.activeTkUsers):void 0})},q}]),function(a){function b(){function b(a){for(var b in a)d.hasOwnProperty(b)&&void 0!=a[b]&&(d[b]=a[b])}function c(b,c,e){function f(){return!("undefined"==typeof m)}function g(){return(m||{}).permission}function h(){function a(a){e.GRANTED===a?c.resolve(a):c.reject(a)}if(!f())return b.reject("Notification API not supported");var c=b.defer();return m.requestPermission().then(a),c.promise}function i(a,b){if(b=b||{},f()&&j(a,b)&&!k(b.showOnPageHidden)&&g()===e.GRANTED){var c=new m(a,b),h=void 0===b.autoClose?d.autoClose:b.autoClose,i=b.duration||d.duration;return c.onclick=b.onClick,h&&l(c,i),c}}function j(a,b){var c=angular.isString(a),d=!b.onClick||angular.isFunction(b.onClick);return c&&d}function k(b){return b||d.showOnPageHidden?!(a.document.hidden||a.document.mozHidden||a.document.webkitHidden):void 0}function l(a,b){var d=1e3*b;c(a.close.bind(a),d,!1)}var m=a.Notification||a.mozNotification||a.webkitNotification,n={isSupported:f,currentPermission:g,requestPermission:h,show:i,permissions:{"default":e.DEFAULT,granted:e.GRANTED,denied:e.DENIED}};return n}var d={autoClose:!0,duration:15,showOnPageHidden:!1};return{config:b,$get:["$q","$timeout","PERMISSIONS",c]}}a.angular.module("ngDesktopNotification",[]).provider("desktopNotification",b).constant("PERMISSIONS",{DEFAULT:"default",GRANTED:"granted",DENIED:"denied"})}(window),function(){window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,angular.module("kotterAudioRecorder",["kotterAudioRecorder.config","kotterAudioRecorder.services","kotterAudioRecorder.controllers","kotterAudioRecorder.directives"]),angular.module("kotterAudioRecorder.config",[]).constant("recorderScriptUrl",function(){var a=document.getElementsByTagName("script"),b=a[a.length-1].getAttribute("src"),c=b.substr(0,b.lastIndexOf("/")+1),d=document.createElement("a");return d.href=c,d.href}()).constant("recorderPlaybackStatus",{STOPPED:0,PLAYING:1,PAUSED:2}),angular.module("kotterAudioRecorder.controllers",["kotterAudioRecorder.config","kotterAudioRecorder.services"]);var a=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&Object.defineProperty(b,c,{get:function(b){var c=b;return function(){return a[c]}}(c),enumerable:!0,configurable:!0});return b},b=function(a,b){var c=new FileReader;c.onload=function(a){b(a.target.result)},c.readAsDataURL(a)},c=function(c,d,e,f,g,h,i,j){var k=function(a){var b=f.$root.$$phase;return"$apply"!==b&&"$digest"!==b?f.$apply(a):void 0},l=this,m={recorder:null,url:null,player:null},n=null,o="recorded-audio-"+l.id,p={isRecording:!1,playback:j.STOPPED,isDenied:null,isSwfLoaded:null,isConverting:!1,get isPlaying(){return p.playback===j.PLAYING},get isStopped(){return p.playback===j.STOPPED},get isPaused(){return p.playback===j.PAUSED}},q=angular.isDefined(l.convertMp3)?!!l.convertMp3:d.shouldConvertToMp3(),r=q?new MP3Converter(d.getMp3Config()):null;l.savetoServer=function(a,b){console.log(a),g.saveToServer(a,b)},l.scheduleIndex=g.scheduleIndex,console.log("scheduleIndex - "+g.scheduleIndex),l.timeLimit=l.timeLimit||0,l.status=a(p),l.isAvailable=d.isAvailable(),l.elapsedTime=0,l.id||(l.id=e.generateUuid(),c.attr("id",l.id)),d.isHtml5||d.isCordova||(p.isSwfLoaded=d.swfIsLoaded(),f.$watch(function(){return d.swfIsLoaded()},function(a){p.isSwfLoaded=a})),d.setController(l.id,this);var s=function(){p.playback=j.STOPPED,l.onPlaybackComplete(),k()},t=function(){p.playback=j.PAUSED,l.onPlaybackPause()},u=function(){p.playback=j.PLAYING,l.onPlaybackStart()},v=function(){p.playback=j.PLAYING,l.onPlaybackResume()},w=function(a){if(null==document.getElementById(o)){c.append('<audio type="audio/mp3" id="'+o+'"></audio>');var d=document.getElementById(o);l.showPlayer&&d.setAttribute("controls",""),d.addEventListener("ended",s),d.addEventListener("pause",function(a){this.duration!==this.currentTime&&(t(),k())}),d.addEventListener("playing",function(a){p.isPaused?v():u(),k()})}a?b(a,function(a){g.blob=a,g.audioModel=a,document.getElementById(o).src=a}):document.getElementById(o).removeAttribute("src")},x=function(a,b){r&&(p.isConverting=!0,r.convert(a,function(a){p.isConverting=!1,b&&b(a),k(l.onConversionComplete)},function(){p.isConverting=!1}),l.onConversionStart())};l.getAudioPlayer=function(){return d.isCordova?m.player:document.getElementById(o)},l.startRecord=function(){if(d.isAvailable()){l.kotterStart()&&l.kotterStart()(),p.isPlaying&&(l.playbackPause(),p.playback=j.STOPPED),l.audioModel=null;var a=l.id,b=d.getHandler(),c=function(){if(d.isCordova)m.url=e.cordovaAudioUrl(l.id),m.recorder=new Media(m.url,function(){console.log("Media successfully played")},function(a){console.log("Media could not be launched"+a.code,a)}),console.log("CordovaRecording"),m.recorder.startRecord();else if(d.isHtml5){if(!b)return;console.log("HTML5Recording"),b.clear(),b.record()}else{if(!d.isReady)return;console.log("FlashRecording"),b.record(a,"audio.wav")}p.isRecording=!0,l.onRecordStart(),l.elapsedTime=0,n=i(function(){++l.elapsedTime,l.timeLimit&&l.timeLimit>0&&l.elapsedTime>=l.timeLimit&&l.stopRecord()},1e3)};d.isCordova||b?c():p.isDenied||d.showPermission({onDenied:function(){p.isDenied=!0,f.$apply()},onAllowed:function(){p.isDenied=!1,b=d.getHandler(),c(),k()}})}},l.stopRecord=function(){var a=l.id;if(!d.isAvailable()||!p.isRecording)return!1;l.kotterStop()&&l.kotterStop()();var b=d.getHandler(),c=function(a){i.cancel(n),p.isRecording=!1;var b=function(a){l.audioModel=a,g.getaudioModel=a,w(a)};q?x(a,b):b(a),w(null),l.onRecordComplete()};d.isCordova?(m.recorder.stopRecord(),window.resolveLocalFileSystemURL(m.url,function(a){a.file(function(a){c(a)})},function(a){console.log("Could not retrieve file, error code:",a.code)})):d.isHtml5?(b.stop(),b.getBuffer(function(){b.exportWAV(function(a){c(a),k()})})):(b.stopRecording(a),c(b.getBlob(a)))},l.playbackRecording=function(){return p.isPlaying||!d.isAvailable()||p.isRecording||!l.audioModel?!1:void(d.isCordova?(m.player=new Media(m.url,s,function(){console.log("Playback failed")}),m.player.play(),u()):l.getAudioPlayer().play())},l.playbackPause=function(){return p.isPlaying&&d.isAvailable()&&!p.isRecording&&l.audioModel?(l.getAudioPlayer().pause(),void(d.isCordova&&t())):!1},l.playbackResume=function(){return p.isPlaying||!d.isAvailable()||p.isRecording||!l.audioModel?!1:void(p.isPaused?(l.getAudioPlayer().play(),d.isCordova&&v()):l.playbackRecording())},l.save=function(a){if(!d.isAvailable()||p.isRecording||!l.audioModel)return!1;a||(a="audio_recording_"+l.id+(l.audioModel.type.indexOf("mp3")>-1?"mp3":"wav"));var b=window.URL.createObjectURL(l.audioModel),c=document.createElement("a");c.href=b,c.target="_blank",c.download=a;var e=document.createEvent("Event");e.initEvent("click",!0,!0),c.dispatchEvent(e)},l.isHtml5=function(){return d.isHtml5},l.autoStart&&h(function(){l.startRecord()},1e3),c.on("$destroy",function(){i.cancel(n)}),g.control=l};c.$inject=["$element","recorderService","recorderUtils","$scope","$rootScope","$timeout","$interval","recorderPlaybackStatus"],angular.module("kotterAudioRecorder.controllers").controller("recorderController",c),angular.module("kotterAudioRecorder.directives",["kotterAudioRecorder.config","kotterAudioRecorder.services","kotterAudioRecorder.controllers"]),angular.module("kotterAudioRecorder.directives").directive("ngAudioRecorderAnalyzer",["recorderService","recorderUtils",function(a,b){var c=function(c,d,e,f){function g(a){if(!l){var b=d.find("canvas")[0];e.width&&!isNaN(e.width)&&(b.width=e.width),e.height&&!isNaN(e.height)&&(b.height=parseInt(e.height)),i=b.width,j=b.height,l=b.getContext("2d")}var c=3,f=1,h=Math.round(i/c),n=new Uint8Array(m.analyserNode.frequencyBinCount);m.analyserNode.getByteFrequencyData(n),l.clearRect(0,0,i,j),l.lineCap="round";for(var o=m.analyserNode.frequencyBinCount/h,p=0;h>p;++p){for(var q=0,r=Math.floor(p*o),s=0;o>s;s++)q+=n[r+s];q/=o;n[p*o];e.waveColor?l.fillStyle=e.waveColor:l.fillStyle="hsl( "+Math.round(360*p/h)+", 100%, 50%)",l.fillRect(p*c,j,f,-q)}k=window.requestAnimationFrame(g)}function h(){window.cancelAnimationFrame(k),k=null}if(!a.isHtml5)return void(c.hide=!0);var i,j,k,l,m=a.$html5AudioProps;d.on("$destroy",function(){h()}),f.onRecordStart=function(a){return function(){a.apply(),g()}}(f.onRecordStart),b.appendActionToCallback(f,"onRecordStart",g,"analyzer"),b.appendActionToCallback(f,"onRecordComplete",h,"analyzer")};return{restrict:"E",require:"^ngAudioRecorder",template:'<div ng-if="!hide" class="audioRecorder-analyzer"><canvas class="analyzer" width="1200" height="400" style="max-width: 100%;"></canvas></div>',link:c}}]),angular.module("kotterAudioRecorder.directives").directive("ngAudioRecorderWaveView",["recorderService","recorderUtils","$log",function(a,b,c){return{restrict:"E",require:"^ngAudioRecorder",link:function(a,d,e,f){if(!window.WaveSurfer)return void c.warn("WaveSurfer was found.");var g;d.html('<div class="waveSurfer"></div>');var h=angular.extend({container:d.find("div")[0]},e),i=WaveSurfer.create(h);i.setVolume(0),b.appendActionToCallback(f,"onPlaybackStart|onPlaybackResume",function(){i.play()},"waveView"),b.appendActionToCallback(f,"onPlaybackComplete|onPlaybackPause",function(){i.pause()},"waveView"),b.appendActionToCallback(f,"onRecordComplete",function(){g||(g=f.getAudioPlayer(),g.addEventListener("seeking",function(a){var b=g.currentTime/g.duration;i.seekTo(b)}))},"waveView"),a.$watch(function(){return f.audioModel},function(a){a instanceof Blob&&i.loadBlob(a)})}}}]),angular.module("kotterAudioRecorder.directives").directive("ngAudioRecorder",["recorderService","$timeout",function(a,b){return{restrict:"EA",scope:{audioModel:"=",myIndex:"=",id:"@",onRecordStart:"&",onRecordComplete:"&",onPlaybackComplete:"&",onPlaybackStart:"&",onPlaybackPause:"&",onPlaybackResume:"&",onConversionStart:"&",onConversionComplete:"&",showPlayer:"=?",autoStart:"=?",convertMp3:"=?",timeLimit:"=?",kotterStart:"&",kotterStop:"&"},controllerAs:"recorder",bindToController:!0,template:function(a,b){return'<div class="audioRecorder"><div style="width: 250px; margin: 0 auto;"><div id="audioRecorder-fwrecorder"></div></div>'+a.html()+"</div>"},controller:"recorderController",link:function(c,d,e){b(function(){if(a.isAvailable&&!a.isHtml5&&!a.isCordova){var b={allowscriptaccess:"always"},c={id:"recorder-app",name:"recorder-app"},d={save_text:""};swfobject.embedSWF(a.getSwfUrl(),"audioRecorder-fwrecorder","0","0","11.0.0","",d,b,c)}},100)}}}]),angular.module("kotterAudioRecorder.services",["kotterAudioRecorder.config"]),angular.module("kotterAudioRecorder.services").provider("recorderService",["recorderScriptUrl",function(a){console.log("scriptPath "+a);var b,c=null,d={isHtml5:!1,isReady:!1},e={onDenied:null,onClosed:null,onAllow:null},f=!1,g="lib/recorder.swf",h=!1,i={bitRate:42,lameJsUrl:a+"lib/lame.min.js"},j={isAvailable:!1,loaded:!1,configureMic:function(){FWRecorder.isReady&&(FWRecorder.configure(44,100,0,2e3),FWRecorder.setUseEchoSuppression(!1),FWRecorder.setLoopBack(!1))},allowed:!1,externalEvents:function(a){arguments[1];switch(arguments[0]){case"ready":parseInt(arguments[1]),parseInt(arguments[2]);FWRecorder.connect("recorder-app",0),FWRecorder.recorderOriginalWidth=1,FWRecorder.recorderOriginalHeight=1,j.loaded=!0;break;case"microphone_user_request":FWRecorder.showPermissionWindow({permanent:!0});break;case"microphone_connected":console.log("Permission to use MIC granted"),j.allowed=!0;break;case"microphone_not_connected":console.log("Permission to use MIC denied"),j.allowed=!1;break;case"permission_panel_closed":j.allowed?j.setAllowed():j.setDeclined(),FWRecorder.defaultSize(),angular.isFunction(e.onClosed)&&e.onClosed();break;case"recording":FWRecorder.hide();break;case"recording_stopped":FWRecorder.hide();break;case"playing":break;case"playback_started":arguments[2];break;case"save_pressed":FWRecorder.updateForm();break;case"saving":break;case"saved":var b=$.parseJSON(arguments[2]);b.saved;break;case"save_failed":arguments[2];break;case"save_progress":arguments[2],arguments[3];break;case"stopped":case"playing_paused":case"no_microphone_found":case"observing_level":case"microphone_level":case"microphone_activity":case"observing_level_stopped":}},isInstalled:function(){return swfobject.getFlashPlayerVersion().major>0},init:function(){return d.isHtml5=!1,j.isInstalled()?(j.isAvailable=!0,window.fwr_event_handler=j.externalEvents,void(window.configureMicrophone=j.configureMic)):void console.log("Flash is not installed, application cannot be initialized")},setAllowed:function(){d.isReady=!0,c=FWRecorder,angular.isFunction(e.onAllowed)&&e.onAllowed()},setDeclined:function(){d.isReady=!1,c=null,angular.isFunction(e.onDenied)&&e.onDenied()},getPermission:function(){j.isAvailable&&(FWRecorder.isMicrophoneAccessible()?(j.allowed=!0,setTimeout(function(){j.setAllowed()},100)):FWRecorder.showPermissionWindow({permanent:!0}))}},k={audioContext:null,inputPoint:null,audioInput:null,audioRecorder:null,analyserNode:null},l={gotStream:function(a){var b=k.audioContext;k.audioInput=b.createMediaStreamSource(a),k.audioInput.connect(k.inputPoint=b.createGain()),k.analyserNode=b.createAnalyser(),k.analyserNode.fftSize=2048,k.inputPoint.connect(k.analyserNode),k.audioRecorder=new Recorder(k.audioInput);var f=b.createGain();f.gain.value=0,k.inputPoint.connect(f),f.connect(b.destination),d.isReady=!0,c=k.audioRecorder,angular.isFunction(e.onAllowed)&&("https:"==window.location.protocol&&localStorage.setItem("permission","given"),e.onAllowed())},failStream:function(a){angular.isDefined(e.onDenied)&&e.onDenied()},getPermission:function(){navigator.getUserMedia({audio:!0},l.gotStream,l.failStream)},init:function(){d.isHtml5=!0;var a=window.AudioContext||window.webkitAudioContext;a&&!k.audioContext&&(k.audioContext=new a),null!==localStorage.getItem("permission")&&l.getPermission()}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,d.isCordova=!1;var m=function(){"cordova"in window?d.isCordova=!0:!f&&navigator.getUserMedia?l.init():j.init()},n={};d.controller=function(a){return n[a]},d.getSwfUrl=function(){return g},d.setController=function(a,b){n[a]=b},d.isAvailable=function(){if(d.isCordova){if(!("Media"in window))throw new Error('The Media plugin for cordova is required for this library, add plugin using "cordova plugin add cordova-plugin-media"');return!0}return d.isHtml5||j.isInstalled()},d.getHandler=function(){return c},d.showPermission=function(a){return d.isAvailable()?(a&&angular.extend(e,a),void(d.isHtml5?l.getPermission():j.getPermission())):void console.warn("Neither HTML5 nor SWF is supported.")},d.swfIsLoaded=function(){return j.loaded},d.shouldConvertToMp3=function(){return h},d.getMp3Config=function(){return i},d.$html5AudioProps=k;var o={$get:["recorderUtils",function(a){return b=a,m(),d}],forceSwf:function(a){return f=a,o},setSwfUrl:function(a){return g=a,o},withMp3Conversion:function(a,b){return h=!!a,i=angular.extend(i,b||{}),o}};return o}]),angular.module("kotterAudioRecorder.services").factory("recorderUtils",[function(){var a={generateUuid:function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()},cordovaAudioUrl:function(a){if(!window.cordova)return"record-audio"+a+".wav";var b=cordova.file.tempDirectory||cordova.file.externalApplicationStorageDirectory||cordova.file.sharedDirectory;switch(b+=Date.now()+"_recordedAudio_"+a.replace("/[^A-Za-z0-9_-]+/gi","-"),window.cordova.platformId){case"ios":b+=".wav";break;case"android":b+=".amr";break;case"wp":b+=".wma";break;default:b+=".mp3"}return b}};return a.appendActionToCallback=function(a,b,c,d){b.split(/\|/).forEach(function(b){if(!(angular.isObject(a)&&angular.isFunction(c)&&b in a&&angular.isFunction(a[b])))throw new Error("One or more parameter supplied is not valid");"$$appendTrackers"in a||(a.$$appendTrackers=[]);var e=b+"|"+d;return a.$$appendTrackers.indexOf(e)>-1?void console.log("Already appended: ",e):(a[b]=function(b){return function(){b.apply(a,arguments),c.apply(a,arguments)}}(a[b]),void a.$$appendTrackers.push(e))})},a}])}(),function(a){function b(a,b,c){b=b||"",c=c||512;for(var d=atob(a),e=[],f=0;f<d.length;f+=c){for(var g=d.slice(f,f+c),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);var j=new Uint8Array(h);e.push(j)}return new Blob(e,{type:b})}var c,d="audio/wav";c={recorder:null,recorderOriginalWidth:0,recorderOriginalHeight:0,uploadFormId:null,uploadFieldName:null,isReady:!1,connect:function(a,b){if(-1!=navigator.appName.indexOf("Microsoft")?c.recorder=window[a]:c.recorder=document[a],!(b>=40))if(c.recorder&&c.recorder.init){if(c.recorderOriginalWidth=c.recorder.width,c.recorderOriginalHeight=c.recorder.height,c.uploadFormId&&$){var d=$(c.uploadFormId);c.recorder.init(d.attr("action").toString(),c.uploadFieldName,d.serializeArray())}}else setTimeout(function(){c.connect(a,b+1)},100)},playBack:function(a){c.recorder.playBack(a)},pausePlayBack:function(a){c.recorder.pausePlayBack(a)},playBackFrom:function(a,b){c.recorder.playBackFrom(a,b)},record:function(a,b){c.recorder.record(a,b)},stopRecording:function(){c.recorder.stopRecording()},stopPlayBack:function(){c.recorder.stopPlayBack()},observeLevel:function(){c.recorder.observeLevel()},stopObservingLevel:function(){c.recorder.stopObservingLevel()},observeSamples:function(){c.recorder.observeSamples()},stopObservingSamples:function(){c.recorder.stopObservingSamples()},resize:function(a,b){c.recorder.width=a+"px",c.recorder.height=b+"px"},defaultSize:function(){c.resize(c.recorderOriginalWidth,c.recorderOriginalHeight)},show:function(){c.recorder.show()},hide:function(){c.recorder.hide()},duration:function(a){return c.recorder.duration(a||c.uploadFieldName)},getBase64:function(a){var b=c.recorder.getBase64(a);return"data:"+d+";base64,"+b},getBlob:function(a){var e=c.getBase64(a).split(",")[1];return b(e,d)},getCurrentTime:function(a){return c.recorder.getCurrentTime(a)},isMicrophoneAccessible:function(){return c.recorder.isMicrophoneAccessible()},updateForm:function(){var a=$(c.uploadFormId);c.recorder.update(a.serializeArray())},showPermissionWindow:function(a){c.resize(240,160);var b=function(){a&&a.permanent?c.recorder.permitPermanently():c.recorder.permit()};setTimeout(b,1)},configure:function(a,b,d,e){switch(a=parseInt(a||22),b=parseInt(b||100),d=parseInt(d||0),e=parseInt(e||4e3),a){case 44:case 22:case 11:case 8:case 5:break;default:throw"invalid rate "+a}if(0>b||b>100)throw"invalid gain "+b;if(0>d||d>100)throw"invalid silenceLevel "+d;if(-1>e)throw"invalid silenceTimeout "+e;c.recorder.configure(a,b,d,e)},setUseEchoSuppression:function(a){if("boolean"!=typeof a)throw"invalid value for setting echo suppression, val: "+a;c.recorder.setUseEchoSuppression(a)},setLoopBack:function(a){if("boolean"!=typeof a)throw"invalid value for setting loop back, val: "+a;c.recorder.setLoopBack(a)}},a.FWRecorder=c}(window),function(){var a=function(a,b){if("function"!=typeof a)throw"The specified parameter must be a valid function";var c=a.toString();if(c.match(/\[native\s*code\]/i))throw"You cannot bind a native function to a worker";b=b||{},"object"!=typeof b&&console.warn("Params must be an object that is serializable with JSON.stringify, specified is: "+typeof b);var d=window.URL.createObjectURL(new Blob(["(",c,")(this,",JSON.stringify(b),")"],{type:"application/javascript"}));return d};Function.prototype.toWorker=function(b){var c=a(this,b);return new Worker(c)}}(),function(a){var b=function(a){function b(a){k=a.sampleRate}function c(a){m.push(a[0]),l+=a[0].length}function d(b){var c=g(m,l),d=j(c),e=new Blob([d],{type:b});a.postMessage(e)}function e(){var b=[];b.push(g(m,l)),b.push(g(n,l)),a.postMessage(b)}function f(){l=0,m=[],n=[]}function g(a,b){for(var c=new Float32Array(b),d=0,e=0;e<a.length;e++)c.set(a[e],d),d+=a[e].length;return c}function h(a,b,c){for(var d=0;d<c.length;d++,b+=2){var e=Math.max(-1,Math.min(1,c[d]));a.setInt16(b,0>e?32768*e:32767*e,!0)}}function i(a,b,c){for(var d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}function j(a){var b=new ArrayBuffer(44+2*a.length),c=new DataView(b);return i(c,0,"RIFF"),c.setUint32(4,32+2*a.length,!0),i(c,8,"WAVE"),i(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,1,!0),c.setUint32(24,k,!0),c.setUint32(28,2*k,!0),c.setUint16(32,2,!0),c.setUint16(34,16,!0),i(c,36,"data"),c.setUint32(40,2*a.length,!0),h(c,44,a),c}var k,l=0,m=[],n=[];a.onmessage=function(a){switch(a.data.command){case"init":b(a.data.config);break;case"record":c(a.data.buffer);break;case"exportWAV":d(a.data.type);break;case"getBuffer":e();break;case"clear":f()}}},c=function(a,c){var d=c||{},e=d.bufferLen||4096;this.context=a.context,
this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,e,2,2);var f=b.toWorker();f.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var g,h=!1;this.node.onaudioprocess=function(a){h&&f.postMessage({command:"record",buffer:[a.inputBuffer.getChannelData(0)]})},this.configure=function(a){for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b])},this.record=function(){h=!0},this.stop=function(){h=!1},this.clear=function(){f.postMessage({command:"clear"})},this.getBuffer=function(a){g=a||d.callback,f.postMessage({command:"getBuffer"})},this.exportWAV=function(a,b){if(g=a||d.callback,b=b||d.type||"audio/wav",!g)throw new Error("Callback not set");f.postMessage({command:"exportWAV",type:b})},f.onmessage=function(a){var b=a.data;g(b)},a.connect(this.node),this.node.connect(this.context.destination)};a.Recorder=c}(window),function(a){var b=function(a,b){console.log("MP3 conversion worker started."),"undefined"==typeof lamejs&&importScripts(b.lameJsUrl);var c,d,e,f,g,h,i=1152,j=function(){h=[]},k=function(a){h.push(new Int8Array(a))},l=function(a){g=a||{},f=new lamejs,j()},m=function(a){d=f.WavHeader.readHeader(new DataView(a)),console.log("wave:",d),e=new Int16Array(a,d.dataOffset,d.dataLen/2),c=new f.Mp3Encoder(d.channels,d.sampleRate,g.bitRate||128);for(var b=e.length,h=0;b>=i;h+=i){var j=e.subarray(h,h+i),l=c.encodeBuffer(j);k(l),b-=i}},n=function(){var a=c.flush();k(a),self.postMessage({cmd:"end",buf:h}),console.log("done encoding"),j()};a.onmessage=function(a){switch(a.data.cmd){case"init":l(a.data.config);break;case"encode":m(a.data.rawInput);break;case"finish":n()}}},c=function(){var a=document.getElementsByTagName("script"),b=a[a.length-1].getAttribute("src"),c=b.substr(0,b.lastIndexOf("/")+1);if(c&&!c.match(/:\/\//)){var d=document.createElement("a");return d.href=c,d.href}return c}(),d=function(a){console.log(a),a=a||{},a.lameJsUrl=a.lameJsUrl||c+"/lame.min.js";var d=!1,e=b.toWorker(a);this.isBusy=function(){return d},this.convert=function(a){var b="conversion_"+Date.now(),c=b+":";console.log(c,"Starting conversion");var f,g,h={};switch(typeof arguments[1]){case"object":h=arguments[1];break;case"function":f=arguments[1];break;default:throw"parameter 2 is expected to be an object (config) or function (success callback)"}if("function"==typeof arguments[2]&&(f?g=arguments[2]:f=arguments[2]),"function"!=typeof arguments[3]||g||(g=arguments[3]),d)throw"Another conversion is in progress";var i=a.size,j=new FileReader,k=Date.now();j.onload=function(a){console.log(c,"Passed to BG process"),e.postMessage({cmd:"init",config:h}),e.postMessage({cmd:"encode",rawInput:a.target.result}),e.postMessage({cmd:"finish"}),e.onmessage=function(a){if("end"==a.data.cmd){console.log(c,"Done converting to Mp3");var b=new Blob(a.data.buf,{type:"audio/mp3"});console.log(c,"Conversion completed in: "+(Date.now()-k)/1e3+"s");var e=b.size;console.log(c+"Initial size: = "+i+", Final size = "+e+", Reduction: "+Number(100*(i-e)/i).toPrecision(4)+"%"),d=!1,f&&"function"==typeof f&&f(b)}}},d=!0,j.readAsArrayBuffer(a)}};a.MP3Converter=d}(window),function(a){a.swfobject=function(){function a(){"complete"==u.readyState&&(u.parentNode.removeChild(u),b())}function b(){if(!L){if(N.ie&&N.win){var a=o("span");try{var b=C.getElementsByTagName("body")[0].appendChild(a);b.parentNode.removeChild(b)}catch(c){return}}L=!0,I&&(clearInterval(I),I=null);for(var d=E.length,e=0;d>e;e++)E[e]()}}function c(a){L?a():E[E.length]=a}function d(a){if(typeof B.addEventListener!=v)B.addEventListener("load",a,!1);else if(typeof C.addEventListener!=v)C.addEventListener("load",a,!1);else if(typeof B.attachEvent!=v)p(B,"onload",a);else if("function"==typeof B.onload){var b=B.onload;B.onload=function(){b(),a()}}else B.onload=a}function e(){for(var a=F.length,b=0;a>b;b++){var c=F[b].id;if(N.pv[0]>0){var d=n(c);d&&(F[b].width=d.getAttribute("width")?d.getAttribute("width"):"0",F[b].height=d.getAttribute("height")?d.getAttribute("height"):"0",q(F[b].swfVersion)?(N.webkit&&N.webkit<312&&f(d),s(c,!0)):F[b].expressInstall&&!M&&q("6.0.65")&&(N.win||N.mac)?g(F[b]):h(d))}else s(c,!0)}}function f(a){var b=a.getElementsByTagName(w)[0];if(b){var c=o("embed"),d=b.attributes;if(d)for(var e=d.length,f=0;e>f;f++)"DATA"==d[f].nodeName?c.setAttribute("src",d[f].nodeValue):c.setAttribute(d[f].nodeName,d[f].nodeValue);var g=b.childNodes;if(g)for(var h=g.length,i=0;h>i;i++)1==g[i].nodeType&&"PARAM"==g[i].nodeName&&c.setAttribute(g[i].getAttribute("name"),g[i].getAttribute("value"));a.parentNode.replaceChild(c,a)}}function g(a){M=!0;var b=n(a.id);if(b){if(a.altContentId){var c=n(a.altContentId);c&&(J=c,K=a.altContentId)}else J=i(b);!/%$/.test(a.width)&&parseInt(a.width,10)<310&&(a.width="310"),!/%$/.test(a.height)&&parseInt(a.height,10)<137&&(a.height="137"),C.title=C.title.slice(0,47)+" - Flash Player Installation";var d=N.ie&&N.win?"ActiveX":"PlugIn",e=C.title,f="MMredirectURL="+B.location+"&MMplayerType="+d+"&MMdoctitle="+e,g=a.id;if(N.ie&&N.win&&4!=b.readyState){var h=o("div");g+="SWFObjectNew",h.setAttribute("id",g),b.parentNode.insertBefore(h,b),b.style.display="none";var k=function(){b.parentNode.removeChild(b)};p(B,"onload",k)}j({data:a.expressInstall,id:A,width:a.width,height:a.height},{flashvars:f},g)}}function h(a){if(N.ie&&N.win&&4!=a.readyState){var b=o("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(i(a),b),a.style.display="none";var c=function(){a.parentNode.removeChild(a)};p(B,"onload",c)}else a.parentNode.replaceChild(i(a),a)}function i(a){var b=o("div");if(N.win&&N.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(w)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function j(a,b,c){var d,e=n(c);if(e)if(typeof a.id==v&&(a.id=c),N.ie&&N.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",G[G.length]=a.id,d=n(a.id)}else if(N.webkit&&N.webkit<312){var j=o("embed");j.setAttribute("type",z);for(var l in a)a[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?j.setAttribute("src",a[l]):"styleclass"==l.toLowerCase()?j.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&j.setAttribute(l,a[l]));for(var m in b)b[m]!=Object.prototype[m]&&"movie"!=m.toLowerCase()&&j.setAttribute(m,b[m]);e.parentNode.replaceChild(j,e),d=j}else{var p=o(w);p.setAttribute("type",z);for(var q in a)a[q]!=Object.prototype[q]&&("styleclass"==q.toLowerCase()?p.setAttribute("class",a[q]):"classid"!=q.toLowerCase()&&p.setAttribute(q,a[q]));for(var r in b)b[r]!=Object.prototype[r]&&"movie"!=r.toLowerCase()&&k(p,r,b[r]);e.parentNode.replaceChild(p,e),d=p}return d}function k(a,b,c){var d=o("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function l(a){var b=n(a);!b||"OBJECT"!=b.nodeName&&"EMBED"!=b.nodeName||(N.ie&&N.win?4==b.readyState?m(a):B.attachEvent("onload",function(){m(a)}):b.parentNode.removeChild(b))}function m(a){var b=n(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function n(a){var b=null;try{b=C.getElementById(a)}catch(c){}return b}function o(a){return C.createElement(a)}function p(a,b,c){a.attachEvent(b,c),H[H.length]=[a,b,c]}function q(a){var b=N.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function r(a,b){if(!N.ie||!N.mac){var c=C.getElementsByTagName("head")[0],d=o("style");if(d.setAttribute("type","text/css"),d.setAttribute("media","screen"),N.ie&&N.win||typeof C.createTextNode==v||d.appendChild(C.createTextNode(a+" {"+b+"}")),c.appendChild(d),N.ie&&N.win&&typeof C.styleSheets!=v&&C.styleSheets.length>0){var e=C.styleSheets[C.styleSheets.length-1];typeof e.addRule==w&&e.addRule(a,b)}}}function s(a,b){var c=b?"visible":"hidden";L&&n(a)?n(a).style.visibility=c:r("#"+a,"visibility:"+c)}function t(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c?encodeURIComponent(a):a}var u,v="undefined",w="object",x="Shockwave Flash",y="ShockwaveFlash.ShockwaveFlash",z="application/x-shockwave-flash",A="SWFObjectExprInst",B=window,C=document,D=navigator,E=[],F=[],G=[],H=[],I=null,J=null,K=null,L=!1,M=!1,N=function(){var a=typeof C.getElementById!=v&&typeof C.getElementsByTagName!=v&&typeof C.createElement!=v,b=[0,0,0],c=null;if(typeof D.plugins!=v&&typeof D.plugins[x]==w)c=D.plugins[x].description,!c||typeof D.mimeTypes!=v&&D.mimeTypes[z]&&!D.mimeTypes[z].enabledPlugin||(c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),b[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),b[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),b[2]=/r/.test(c)?parseInt(c.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof B.ActiveXObject!=v){var d=null,e=!1;try{d=new ActiveXObject(y+".7")}catch(f){try{d=new ActiveXObject(y+".6"),b=[6,0,21],d.AllowScriptAccess="always"}catch(f){6==b[0]&&(e=!0)}if(!e)try{d=new ActiveXObject(y)}catch(f){}}if(!e&&d)try{c=d.GetVariable("$version"),c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(f){}}var g=D.userAgent.toLowerCase(),h=D.platform.toLowerCase(),i=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,j=!1,k=h?/win/.test(h):/win/.test(g),l=h?/mac/.test(h):/mac/.test(g);return{w3cdom:a,pv:b,webkit:i,ie:j,win:k,mac:l}}();(function(){if(N.w3cdom){if(c(e),N.ie&&N.win)try{C.write("<script id=__ie_ondomload defer=true src=//:></script>"),u=n("__ie_ondomload"),u&&p(u,"onreadystatechange",a)}catch(f){}N.webkit&&typeof C.readyState!=v&&(I=setInterval(function(){/loaded|complete/.test(C.readyState)&&b()},10)),typeof C.addEventListener!=v&&C.addEventListener("DOMContentLoaded",b,null),d(b)}})(),function(){N.ie&&N.win&&window.attachEvent("onunload",function(){for(var a=H.length,b=0;a>b;b++)H[b][0].detachEvent(H[b][1],H[b][2]);for(var c=G.length,d=0;c>d;d++)l(G[d]);for(var e in N)N[e]=null;N=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c){if(N.w3cdom&&a&&b){var d={};d.id=a,d.swfVersion=b,d.expressInstall=c?c:!1,F[F.length]=d,s(a,!1)}},getObjectById:function(a){var b=null;if(N.w3cdom){var c=n(a);if(c){var d=c.getElementsByTagName(w)[0];!d||d&&typeof c.SetVariable!=v?b=c:typeof d.SetVariable!=v&&(b=d)}}return b},embedSWF:function(a,b,d,e,f,h,i,k,l){if(N.w3cdom&&a&&b&&d&&e&&f)if(d+="",e+="",q(f)){s(b,!1);var m={};if(l&&typeof l===w)for(var n in l)l[n]!=Object.prototype[n]&&(m[n]=l[n]);m.data=a,m.width=d,m.height=e;var o={};if(k&&typeof k===w)for(var p in k)k[p]!=Object.prototype[p]&&(o[p]=k[p]);if(i&&typeof i===w)for(var r in i)i[r]!=Object.prototype[r]&&(typeof o.flashvars!=v?o.flashvars+="&"+r+"="+i[r]:o.flashvars=r+"="+i[r]);c(function(){j(m,o,b),m.id==b&&s(b,!0)})}else h&&!M&&q("6.0.65")&&(N.win||N.mac)&&(M=!0,s(b,!1),c(function(){var a={};a.id=a.altContentId=b,a.width=d,a.height=e,a.expressInstall=h,g(a)}))},getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:q,createSWF:function(a,b,c){return N.w3cdom?j(a,b,c):void 0},removeSWF:function(a){N.w3cdom&&l(a)},createCSS:function(a,b){N.w3cdom&&r(a,b)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=C.location.search||C.location.hash;if(null==a)return t(b);if(b)for(var c=b.substring(1).split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return t(c[d].substring(c[d].indexOf("=")+1));return""},expressInstallCallback:function(){if(M&&J){var a=n(A);a&&(a.parentNode.replaceChild(J,a),K&&(s(K,!0),N.ie&&N.win&&(J.style.display="block")),J=null,K=null,M=!1)}}}}()}(window),angular.module("ngAudio",[]).directive("ngAudio",["$compile","$q","ngAudio",function(a,b,c){return{restrict:"AEC",scope:{volume:"=",start:"=",currentTime:"=",loop:"=",clickPlay:"=",disablePreload:"="},controller:["$scope","$attrs","$element","$timeout",function(a,b,d,e){function f(){g=c.load(b.ngAudio),a.$audio=g,g.unbind()}var g;a.disablePreload||f(),d.on("click",function(){a.clickPlay!==!1&&(a.disablePreload&&f(),g.audio.play(),g.volume=a.volume||g.volume,g.loop=a.loop,g.currentTime=a.start||0,e(function(){g.play()},5))})}]}}]).directive("ngAudioHover",["$compile","$q","ngAudio",function(a,b,c){return{restrict:"AEC",controller:["$scope","$attrs","$element","$timeout",function(a,b,d,e){var f=c.load(b.ngAudioHover);d.on("mouseover rollover hover",function(){f.audio.play(),f.volume=b.volumeHover||f.volume,f.loop=b.loop,f.currentTime=b.startHover||0})}]}}]).service("localAudioFindingService",["$q",function(a){this.find=function(b){var c=a.defer(),d=document.getElementById(b);return d?c.resolve(d):c.reject(b),c.promise}}]).service("remoteAudioFindingService",["$q",function(a){this.find=function(b){var c=a.defer(),d=new Audio;return d.addEventListener("error",function(){c.reject()}),d.addEventListener("loadstart",function(){c.resolve(d)}),setTimeout(function(){d.src=b},1),c.promise}}]).service("cleverAudioFindingService",["$q","localAudioFindingService","remoteAudioFindingService",function(a,b,c){this.find=function(d){var e=a.defer();return d=d.replace("|","/"),b.find(d).then(e.resolve,function(){return c.find(d)}).then(e.resolve,e.reject),e.promise}}]).value("ngAudioGlobals",{muting:!1,songmuting:!1,performance:25,unlock:!1}).factory("NgAudioObject",["cleverAudioFindingService","$rootScope","$interval","$timeout","ngAudioGlobals",function(a,b,c,d,e){return function(d){function f(){h=b.$watch(function(){return{volume:s.volume,currentTime:s.currentTime,progress:s.progress,muting:s.muting,loop:s.loop,playbackRate:s.playbackRate}},function(a,b){a.currentTime!==b.currentTime&&s.setCurrentTime(a.currentTime),a.progress!==b.progress&&s.setProgress(a.progress),a.volume!==b.volume&&s.setVolume(a.volume),a.playbackRate!==b.playbackRate&&s.setPlaybackRate(a.playbackRate),j=a.loop,a.muting!==b.muting&&s.setMuting(a.muting)},!0)}function g(){h&&h(),k&&(q||e.isMuting?k.volume=0:k.volume=void 0!==s.volume?s.volume:1,l&&(k.play(),l=!1),n&&(k.pause(),k.currentTime=0,n=!1),m&&(k.pause(),m=!1),o&&(k.playbackRate=p,o=!1),i&&(k.volume=i,i=void 0),r&&(s.currentTime=k.currentTime,s.duration=k.duration,s.remaining=k.duration-k.currentTime,s.progress=k.currentTime/k.duration,s.paused=k.paused,s.src=k.src,s.currentTime>=s.duration&&t.forEach(function(a){a(s)}),j&&s.currentTime>=s.duration&&(j!==!0&&(j--,s.loop--),s.setCurrentTime(0),s.play())),q||e.isMuting||(s.volume=k.volume),s.audio=k),f()}e.unlock&&window.addEventListener("click",function v(){k.play(),k.pause(),window.removeEventListener("click",v)});var h,i,j,k,l=!1,m=!1,n=!1,o=!1,p=!1,q=!1,r=!0,s=this;this.id=d,this.safeId=d.replace("/","|"),this.loop=0,this.unbind=function(){r=!1},this.play=function(){return l=!0,this};var t=[];this.complete=function(a){t.push(a)},this.pause=function(){m=!0},this.restart=function(){n=!0},this.stop=function(){this.restart()},this.setVolume=function(a){i=a},this.setPlaybackRate=function(a){p=a,o=!0},this.setMuting=function(a){q=a},this.setProgress=function(a){k&&k.duration&&isFinite(a)&&(k.currentTime=k.duration*a)},this.setCurrentTime=function(a){k&&k.duration&&(k.currentTime=a)},a.find(d).then(function(a){k=a,k.addEventListener("canplay",function(){s.canPlay=!0})},function(a){s.error=!0,console.warn(a)});var u=c(g,e.performance);b.$watch(function(){return e.performance},function(){c.cancel(u),u=c(g,e.performance)})}}]).service("ngAudio",["NgAudioObject","ngAudioGlobals",function(a,b){this.play=function(b){console.log(b);var c=new a(b);return c.play(),c},this.load=function(b){return new a(b)},this.mute=function(){b.muting=!0},this.unmute=function(){b.muting=!1},this.toggleMute=function(){b.muting=!b.muting},this.setUnlock=function(a){b.unlock=a}}]).filter("trackTime",function(){return function(a){var b=Math.floor(0|a),c="",d=0,e=0,f=0;return b>3599?(d=Math.floor(b/3600),e=Math.floor((b-3600*d)/60),f=b-(60*e+3600*d),1==d.toString().length&&(d="0"+Math.floor(b/3600).toString()),1==e.toString().length&&(e="0"+Math.floor((b-3600*d)/60).toString()),1==f.toString().length&&(f="0"+(b-(60*e+3600*d)).toString()),c=d+":"+e+":"+f):b>59?(e=Math.floor(b/60),f=b-60*e,1==e.toString().length&&(e="0"+Math.floor(b/60).toString()),1==f.toString().length&&(f="0"+(b-60*e).toString()),c=e+":"+f):(f=b,1==f.toString().length&&(f="0"+b.toString()),c=b+"s"),Number.isNaN(c),c}}),function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame}();var Tone=function(){var a=function(a){this.ctx=new AudioContext,this.wave=a||"sine",this.stream=this.ctx.destination};return a.prototype.start=function(a,b,c){var d=this.ctx.createOscillator();return d.type=this.wave,d.connect(this.stream),c=(c||0)+this.ctx.currentTime,d.frequency.value=a,d.start(c),b&&d.stop(c+b),d},a}(),Band=function(){var a=function(a,b){this.min=a-b/2,this.max=a+2*b,this.freq=a,this.width=b};return a.prototype.contains=function(a){return a>=this.min&&a<=this.max},a}(),Ear=function(){var a=function(a){this.ctx=new AudioContext,this.threshold=a.threshold||-50,this.decay=a.decay||10,this.last="";var b,c=this.ctx.sampleRate;b=a.samples?1<<Math.ceil(Math.log(a.samples)/Math.log(2)):2048,navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},function(d){if(this.mediaStreamSource=this.ctx.createMediaStreamSource(d),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=b,this.bufSize=this.analyser.frequencyBinCount,this.buffer=new Float32Array(this.bufSize),this.mediaStreamSource.connect(this.analyser),this.indices=_.chain(a.bands).map(function(a){var d=Math.round(a.freq/c*b),e=Math.round(d*c/b);return Math.round(2*e*this.bufSize/this.ctx.sampleRate)},this).uniq().zip(_.pluck(a.bands,"freq")).object().value(),_.keys(this.indices).length!==a.bands.length)throw new Error("Not enough samples");this.analyse()}.bind(this),function(a){switch(a.name){case"PermissionDeniedError":console.error("User denied permssion");break;default:console.error(a)}})};a.prototype.getPeaks=function(a,b){for(var c=-1e3,d={},e=0;e<a.length;++e)a[e]>c&&(c=a[e]),a[e]>this.threshold&&(d[e]=a[e]);return d=_.pick(d,function(a){return 1>c-a})},a.prototype.getPeak=function(a,b){for(var c=-1e3,d=-1,e=0;e<a.length;++e)a[e]>c&&(c=a[e],d=e);return c>this.threshold?b.sampleRate/2/a.length*d:null};a.prototype.getBand=function(a){if(a)for(var b in this.bands)if(this.bands.hasOwnProperty(b)&&this.bands[b].contains(a)){var c=String.prototype.toUpperCase.call(b);if(c in Band)return Band[c]}return 0},a.prototype.start=function(a){this.onstart=a},a.prototype.end=function(a){this.onend=a};return a.prototype.handler=function(a,b,c){var d=this.getPeak(a,c);this.getBand(d)},a.prototype.analyse=function(){this.analyser.getFloatFrequencyData(this.buffer);var a=this.threshold;this.buffer[0]>a&&(a=this.buffer[0]+10);var b=_.filter(this.buffer,function(a,b){return b in this.indices},this),c=_.object(_.zip(_.keys(this.indices),b)),d=_.max(b),e=_.omit(c,function(b){return a>b});e=_.pick(e,function(a){return 5>d-a});var f=_.map(e,function(a,b){return[this.indices[b],this.buffer[b]]},this);f.length>=2?this.callback&&(d<a+this.decay?this.callback(null):this.callback(_.object(f))):0==f.length&&this.callback&&this.callback(null),this.animationFrameCallback=requestAnimationFrame(this.analyse.bind(this))},a.prototype.teardown=function(){this.animationFrameCallback&&cancelAnimationFrame(this.animationFrameCallback)},a}();proySymphony.factory("OperatorSvc",["$rootScope","DialerSvc",function(a,b){var c=[].concat(b.rows,b.cols),d=_.map(c,function(a){return new Band(a,50)}),e=new Ear({bands:d,samples:2048,threshold:-60,decay:5}),f="",g="",h=!1;return e.callback=function(c){if(null===c)return void(f="");var d={},e={};_.forEach(c,function(a,c){c=parseInt(c);var f=b.rows.indexOf(c),g=b.cols.indexOf(c);-1!==f?d[f]=a:-1!==g&&(e[g]=a)});var i=function(a){return a},j=_(d).pairs().sortBy(i).pluck(0);e=j.plant(e).value(),d=j.value();var k=parseInt(d[0]),l=parseInt(e[0]);g=b.pad[k][l],f!==g&&(h&&g&&a.$broadcast("received",g),f=g)},{setListening:function(a){h=a},getListening:function(){return h}}}]).controller("OperatorCtrl",["$rootScope","$scope","OperatorSvc",function(a,b,c){b.received="",c.setListening(!0),a.$on("received",function(a,c){b.$apply(function(){b.received+=c})}),a.$on("reset",function(a,c){b.received=""})}]),proySymphony.factory("DialerSvc",["$rootScope",function(a){for(var b="",c=[["1","2","3"],["4","5","6"],["7","8","9"],["*","0","#"]],d={},e=0;e<c.length;++e)for(var f=0;f<c[e].length;++f)d[c[e][f]]={row:e,col:f};var g=new Tone,h={},i=[73,82,89],j=[127,141,156],k=function(a,b){a=Math.round(a);for(var c=[a],d=0;d<b.length;++d)c[d+1]=c[d]+b[d];return c};return{pad:c,rows:k(697,i),cols:k(1209,j),stop:function(a){a in h&&(h[a].forEach(function(a){a.stop()}),delete h[a])},play:function(a,b,c){c=c||0,b=b||void 0,h[a]=[g.start(this.resolve(a)[0],b,c),g.start(this.resolve(a)[1],b,c)]},press:function(c){b+=c,a.$broadcast("dial"),this.stop(c),this.play(c)},release:function(a){this.stop(a)},dial:function(){for(var a=0,c=.1,d=.04,e=0;e<b.length;++e)this.play(b[e],d,a),a+=c+d},reset:function(){b="",a.$broadcast("dial")},getNumber:function(){return b},resolve:function(a){var b=d[a].row,c=d[a].col;return[this.rows[b],this.cols[c]]},getFrequencies:function(){for(var a=[],c=0;c<b.length;++c)a.push(this.resolve(b.charAt(c)));return a}}}]),function(){function a(a,d){function j(a){t.deletePeer(a)}function l(a){if(t.socketAutoReConnect=!0,t.socket)return void(a&&a(t.socket));if("undefined"==typeof b)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else{if("undefined"==typeof PubNubConnection)throw"SocketConnection.js seems missed.";window.SocketConnection=PubNubConnection}new b(t,function(b){a&&a(t.socket)})}function m(a,b){if(t.dontCaptureUserMedia||a.isDataOnly)return void b();var c={};a.localPeerSdpConstraints.OfferToReceiveAudio&&(c.audio=t.mediaConstraints.audio),a.localPeerSdpConstraints.OfferToReceiveVideo&&(c.video=t.mediaConstraints.video);var d=a.session||t.session;return d.oneway&&"two-way"!==d.audio&&"two-way"!==d.video&&"two-way"!==d.screen?void b():(d.oneway&&d.audio&&"two-way"===d.audio&&(d={audio:!0}),void((d.audio||d.video||d.screen)&&(d.screen?t.getScreenConstraints(function(a,c){t.invokeGetUserMedia({audio:n(t)?o(c):!1,video:c,isScreen:!0},!d.audio&&!d.video||n(t)?b:t.invokeGetUserMedia(null,b))}):(d.audio||d.video)&&t.invokeGetUserMedia(null,b,d))))}function p(a,b){t.closeBeforeUnload&&(t.isInitiator===!0&&t.dontMakeMeModerator(),t.peers.getAllParticipants().forEach(function(a){u.onNegotiationNeeded({userLeft:!0},a),t.peers[a]&&t.peers[a].peer&&t.peers[a].peer.close(),delete t.peers[a]}),b||t.closeSocket(),t.broadcasters=[],t.isInitiator=!1)}function q(a,b){return a?(b.audio&&a.getAudioTracks().forEach(function(a){a.applyConstraints(b.audio)}),void(b.video&&a.getVideoTracks().forEach(function(a){a.applyConstraints(b.video)}))):void(t.enableLogs&&console.error("No stream to applyConstraints."))}function r(a,b,c){return b?void u.replaceTrack(a,b,c):void t.peers.getAllParticipants().forEach(function(b){u.replaceTrack(a,b,c)})}function s(){if(t.isInitiator&&!t.session.oneway&&!t.session.broadcast&&"many-to-many"===t.direction){var a=t.broadcasters[0],b=[];t.broadcasters.forEach(function(c){c!==a&&b.push(c)}),t.autoCloseEntireSession||t.shiftModerationControl(a,b,!0)}}d=d||{useDefaultDevices:!0};var t=this;t.channel=t.sessionid=(a||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,"").split("\n").join("").split("\r").join(""))+"";var u=new c(t);u.onGettingLocalMedia=function(a){a.type="local",t.setStreamEndHandler(a),h(a,function(b){b.id=a.streamid,b.muted=!0,b.volume=0,-1===t.attachStreams.indexOf(a)&&t.attachStreams.push(a),"undefined"!=typeof Z&&Z.setHandlers(a,!0,t),t.streamEvents[a.streamid]={stream:a,type:"local",mediaElement:b,userid:t.userid,extra:t.extra,streamid:a.streamid,blobURL:b.src||URL.createObjectURL(a),isAudioMuted:!0},e(t,t.streamEvents[a.streamid]),f(t,t.streamEvents[a.streamid]),t.onstream(t.streamEvents[a.streamid])},t)},u.onGettingRemoteMedia=function(a,b){a.type="remote",t.setStreamEndHandler(a,"remote-stream"),h(a,function(c){c.id=a.streamid,"undefined"!=typeof Z&&Z.setHandlers(a,!1,t),t.streamEvents[a.streamid]={stream:a,type:"remote",userid:b,extra:t.peers[b]?t.peers[b].extra:{},mediaElement:c,streamid:a.streamid,blobURL:c.src||URL.createObjectURL(a)},f(t,t.streamEvents[a.streamid]),t.onstream(t.streamEvents[a.streamid])},t)},u.onRemovingRemoteMedia=function(a,b){var c=t.streamEvents[a.streamid];c||(c={stream:a,type:"remote",userid:b,extra:t.peers[b]?t.peers[b].extra:{},streamid:a.streamid,mediaElement:t.streamEvents[a.streamid]?t.streamEvents[a.streamid].mediaElement:null}),t.onstreamended(c),delete t.streamEvents[a.streamid]},u.onNegotiationNeeded=function(a,b,c){l(function(){t.socket.emit(t.socketMessageEvent,"password"in a?a:{remoteUserId:a.remoteUserId||b,message:a,sender:t.userid},c||function(){})})},u.onUserLeft=j,u.disconnectWith=function(a,b){t.socket&&t.socket.emit("disconnect-with",a,b||function(){}),t.deletePeer(a)},t.broadcasters=[],t.socketOptions={transport:"polling"},t.openOrJoin=function(a,b){t.checkPresence(a,function(c,d){if("function"==typeof b&&(b(c,d),b=null),c){t.sessionid=d;var e=!1,f=!1,g=!!t.session.oneway,h=k(t.session);f={OfferToReceiveAudio:t.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:t.sdpConstraints.mandatory.OfferToReceiveVideo},e={OfferToReceiveAudio:g?!!t.session.audio:t.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:g?!!t.session.video||!!t.session.screen:t.sdpConstraints.mandatory.OfferToReceiveVideo};var i={remoteUserId:t.sessionid,message:{newParticipationRequest:!0,isOneWay:g,isDataOnly:h,localPeerSdpConstraints:e,remotePeerSdpConstraints:f},sender:t.userid,password:b||!1};return void m(i.message,function(){u.onNegotiationNeeded(i)})}t.userid;t.userid=t.sessionid=a||t.sessionid,t.userid+="",t.socket.emit("changed-uuid",t.userid),b&&t.socket.emit("set-password",b),t.isInitiator=!0,k(t.session)||t.captureUserMedia()})},t.open=function(a,b){t.userid;return t.userid=t.sessionid=a||t.sessionid,t.userid+="",t.isInitiator=!0,l(function(){t.socket.emit("changed-uuid",t.userid),1==b&&t.becomePublicModerator()}),k(t.session)?void("function"==typeof b&&b()):void t.captureUserMedia("function"==typeof b?b:null)},t.becomePublicModerator=function(){t.isInitiator&&t.socket.emit("become-a-public-moderator")},t.dontMakeMeModerator=function(){t.socket.emit("dont-make-me-moderator")},t.deletePeer=function(a){if(a){if(t.onleave({userid:a,extra:t.peers[a]?t.peers[a].extra:{}}),t.peers[a]){t.peers[a].streams.forEach(function(a){a.stop()});var b=t.peers[a].peer;if(b&&"closed"!==b.iceConnectionState)try{b.close()}catch(c){}t.peers[a]&&(t.peers[a].peer=null,delete t.peers[a])}if(-1!==t.broadcasters.indexOf(a)){var d=[];t.broadcasters.forEach(function(b){b!==a&&d.push(b)}),t.broadcasters=d,s()}}},t.rejoin=function(a){if(!t.isInitiator&&a&&Object.keys(a).length){var b={};t.peers[a.remoteUserId]&&(b=t.peers[a.remoteUserId].extra,t.deletePeer(a.remoteUserId)),a&&a.remoteUserId&&(t.join(a.remoteUserId),t.onReConnecting({userid:a.remoteUserId,extra:b}))}},t.join=t.connect=function(a,b){t.sessionid=(a?a.sessionid||a.remoteUserId||a:!1)||t.sessionid,t.sessionid+="";var c=!1,d=!1,e=!1,f=!1;if(a&&a.session||!a||"string"==typeof a){var g=a?a.session||t.session:t.session;e=!!g.oneway,f=k(g),d={OfferToReceiveAudio:t.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:t.sdpConstraints.mandatory.OfferToReceiveVideo},c={OfferToReceiveAudio:e?!!t.session.audio:t.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e?!!t.session.video||!!t.session.screen:t.sdpConstraints.mandatory.OfferToReceiveVideo}}b=b||{};var h=function(){};"function"==typeof b&&(h=b,b={}),"undefined"!=typeof b.localPeerSdpConstraints&&(c=b.localPeerSdpConstraints),"undefined"!=typeof b.remotePeerSdpConstraints&&(d=b.remotePeerSdpConstraints),"undefined"!=typeof b.isOneWay&&(e=b.isOneWay),"undefined"!=typeof b.isDataOnly&&(f=b.isDataOnly);var i={remoteUserId:t.sessionid,message:{newParticipationRequest:!0,isOneWay:e,isDataOnly:f,localPeerSdpConstraints:c,remotePeerSdpConstraints:d},sender:t.userid,password:!1};return m(i.message,function(){l(function(){t.peers[t.sessionid]||(u.onNegotiationNeeded(i),h())})}),i},t.connectWithAllParticipants=function(a){u.onNegotiationNeeded("connectWithAllParticipants",a||t.sessionid)},t.removeFromBroadcastersList=function(a){u.onNegotiationNeeded("removeFromBroadcastersList",a||t.sessionid),t.peers.getAllParticipants(a||t.sessionid).forEach(function(a){u.onNegotiationNeeded("dropPeerConnection",a),t.deletePeer(a)}),t.attachStreams.forEach(function(a){a.stop()})},t.getUserMedia=t.captureUserMedia=function(a,b){a=a||function(){};var c=b||t.session;return t.dontCaptureUserMedia||k(c)?void a():void((c.audio||c.video||c.screen)&&(c.screen?t.getScreenConstraints(function(d,e){if(d)throw d;t.invokeGetUserMedia({audio:n(t)?o(e):!1,video:e,isScreen:!0},function(d){if((c.audio||c.video)&&!n(t)){var e={};for(var f in c)"screen"!==f&&(e[f]=c[f]);return void t.invokeGetUserMedia(b,a,e)}a(d)})}):(c.audio||c.video)&&t.invokeGetUserMedia(b,a,c)))},t.closeBeforeUnload=!0,window.addEventListener("beforeunload",p,!1),t.userid=g(),t.changeUserId=function(a,b){t.userid=a||g(),t.socket.emit("changed-uuid",t.userid,b||function(){})},t.extra={},t.attachStreams=[],t.session={audio:!0,video:!0},t.enableFileSharing=!1,t.bandwidth={screen:512,audio:128,video:512},t.codecs={audio:"opus",video:"VP9"},t.processSdp=function(a){return K||G?a:(a=V.setApplicationSpecificBandwidth(a,t.bandwidth,!!t.session.screen),a=V.setVideoBitrates(a,{min:8*t.bandwidth.video*1024,max:8*t.bandwidth.video*1024}),a=V.setOpusAttributes(a,{maxaveragebitrate:8*t.bandwidth.audio*1024,maxplaybackrate:8*t.bandwidth.audio*1024,stereo:1,maxptime:3}),"VP9"===t.codecs.video&&(a=V.preferVP9(a)),"H264"===t.codecs.video&&(a=V.removeVPX(a)),"G722"===t.codecs.audio&&(a=V.removeNonG722(a)),a)},"undefined"!=typeof V&&(t.BandwidthHandler=t.CodecsHandler=V),t.mediaConstraints={audio:{mandatory:{},optional:[{bandwidth:8*t.bandwidth.audio*1024||1048576}]},video:{mandatory:{},optional:[{bandwidth:8*t.bandwidth.video*1024||1048576},{facingMode:"user"}]}},G&&(t.mediaConstraints={audio:!0,video:!0}),d.useDefaultDevices||K||DetectRTC.load(function(){var a,b;if(DetectRTC.MediaDevices.forEach(function(c){"audioinput"===c.kind&&t.mediaConstraints.audio!==!1&&(a=c),"videoinput"===c.kind&&t.mediaConstraints.video!==!1&&(b=c)}),a){if(G)return void(t.mediaConstraints.audio!==!0?t.mediaConstraints.audio.deviceId=a.id:t.mediaConstraints.audio={deviceId:a.id});1==t.mediaConstraints.audio&&(t.mediaConstraints.audio={mandatory:{},optional:[]}),t.mediaConstraints.audio.optional||(t.mediaConstraints.audio.optional=[]);var c=[{sourceId:a.id}];t.mediaConstraints.audio.optional=c.concat(t.mediaConstraints.audio.optional)}if(b){if(G)return void(t.mediaConstraints.video!==!0?t.mediaConstraints.video.deviceId=b.id:t.mediaConstraints.video={deviceId:b.id});1==t.mediaConstraints.video&&(t.mediaConstraints.video={mandatory:{},optional:[]}),t.mediaConstraints.video.optional||(t.mediaConstraints.video.optional=[]);
var c=[{sourceId:b.id}];t.mediaConstraints.video.optional=c.concat(t.mediaConstraints.video.optional)}}),t.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},t.rtcpMuxPolicy="negotiate",t.iceTransportPolicy=null,t.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},t.iceServers=Y.getIceServers(t),t.candidates={host:!0,stun:!0,turn:!0},t.iceProtocols={tcp:!0,udp:!0},t.onopen=function(a){t.enableLogs&&console.info("Data connection has been opened between you & ",a.userid)},t.onclose=function(a){t.enableLogs&&console.warn("Data connection has been closed between you & ",a.userid)},t.onerror=function(a){t.enableLogs&&console.error(a.userid,"data-error",a)},t.onmessage=function(a){t.enableLogs&&console.debug("data-message",a.userid,a.data)},t.send=function(a,b){t.peers.send(a,b)},t.close=t.disconnect=t.leave=function(){p(!1,!0)},t.closeEntireSession=function(a){a=a||function(){},t.socket.emit("close-entire-session",function b(){return t.getAllParticipants().length?void setTimeout(b,100):(t.onEntireSessionClosed({sessionid:t.sessionid,userid:t.userid,extra:t.extra}),void t.changeUserId(null,function(){t.close(),a()}))})},t.onEntireSessionClosed=function(a){t.enableLogs&&console.info("Entire session is closed: ",a.sessionid,a.extra)},t.onstream=function(a){var b=t.videosContainer;b.insertBefore(a.mediaElement,b.firstChild),a.mediaElement.play(),setTimeout(function(){a.mediaElement.play()},5e3)},t.onstreamended=function(a){a.mediaElement||(a.mediaElement=document.getElementById(a.streamid)),a.mediaElement&&a.mediaElement.parentNode&&a.mediaElement.parentNode.removeChild(a.mediaElement)},t.direction="many-to-many",t.removeStream=function(a){var b;return t.attachStreams.forEach(function(c){c.id===a&&(b=c)}),b?(t.peers.getAllParticipants().forEach(function(a){var c=t.peers[a];try{c.peer.removeStream(b)}catch(d){}}),void t.renegotiate()):void console.warn("No such stream exists.",a)},t.addStream=function(a,b){function c(c){a.streamCallback&&a.streamCallback(c),t.renegotiate(b)}return a.getAudioTracks?(-1===t.attachStreams.indexOf(a)&&(a.streamid||(a.streamid=a.id),t.attachStreams.push(a)),void t.renegotiate(b)):k(a)?void t.renegotiate(b):void((a.audio||a.video||a.screen)&&(a.screen?t.getScreenConstraints(function(b,d){return b?"PermissionDeniedError"===b?(a.streamCallback&&a.streamCallback(null),void(t.enableLogs&&console.error("User rejected to share his screen."))):alert(b):void t.invokeGetUserMedia({audio:n(t)?o(d):!1,video:d,isScreen:!0},!a.audio&&!a.video||n(t)?c:t.invokeGetUserMedia(null,c))}):(a.audio||a.video)&&t.invokeGetUserMedia(null,c)))},t.invokeGetUserMedia=function(a,b,c){c||(c=t.session),a||(a=t.mediaConstraints),x({onGettingLocalMedia:function(c){var d=a.video;d&&(d.mediaSource||d.mozMediaSource?c.isScreen=!0:d.mandatory&&d.mandatory.chromeMediaSource&&(c.isScreen=!0)),c.isScreen||(c.isVideo=c.getVideoTracks().length,c.isAudio=!c.isVideo&&c.getAudioTracks().length),u.onGettingLocalMedia(c),b&&b(c)},onLocalMediaError:function(a,b){u.onLocalMediaError(a,b)},localMediaConstraints:a||{audio:c.audio?a.audio:!1,video:c.video?a.video:!1}})},t.applyConstraints=function(a,b){if(!U||!U.prototype.applyConstraints)return void alert("track.applyConstraints is NOT supported in your browser.");if(b){var c;return t.streamEvents[b]&&(c=t.streamEvents[b].stream),void q(c,a)}t.attachStreams.forEach(function(b){q(b,a)})},t.replaceTrack=function(a,b,c){function d(d){t.replaceTrack(d,b,c||a.video||a.screen)}if(a=a||{},!Q.prototype.getSenders)return void t.addStream(a);if(a instanceof U)return void r(a,b,c);if(a instanceof P)return a.getVideoTracks().length&&r(a.getVideoTracks()[0],b,!0),void(a.getAudioTracks().length&&r(a.getAudioTracks()[0],b,!1));if(k(a))throw"connection.replaceTrack requires audio and/or video and/or screen.";(a.audio||a.video||a.screen)&&(a.screen?t.getScreenConstraints(function(b,c){return b?alert(b):void t.invokeGetUserMedia({audio:n(t)?o(c):!1,video:c,isScreen:!0},!a.audio&&!a.video||n(t)?d:t.invokeGetUserMedia(null,d))}):(a.audio||a.video)&&t.invokeGetUserMedia(null,d))},t.resetTrack=function(a,b){a||(a=t.getAllParticipants()),"string"==typeof a&&(a=[a]),a.forEach(function(a){var c=t.peers[a].peer;"undefined"!=typeof b&&b!==!0||!c.lastVideoTrack||t.replaceTrack(c.lastVideoTrack,a,!0),"undefined"!=typeof b&&b!==!1||!c.lastAudioTrack||t.replaceTrack(c.lastAudioTrack,a,!1)})},t.renegotiate=function(a){return a?void u.renegotiatePeer(a):void t.peers.getAllParticipants().forEach(function(a){u.renegotiatePeer(a)})},t.setStreamEndHandler=function(a,b){if(a&&a.addEventListener&&(b=!!b,!a.alreadySetEndHandler)){a.alreadySetEndHandler=!0;var c="ended";"oninactive"in a&&(c="inactive"),a.addEventListener(c,function(){if(a.idInstance&&currentUserMediaRequest.remove(a.idInstance),!b){var c=[];t.attachStreams.forEach(function(b){b.id!=a.id&&c.push(b)}),t.attachStreams=c}var d=t.streamEvents[a.streamid];if(d||(d={stream:a,streamid:a.streamid,type:b?"remote":"local",userid:t.userid,extra:t.extra,mediaElement:t.streamEvents[a.streamid]?t.streamEvents[a.streamid].mediaElement:null}),b&&t.peers[d.userid]){var e=t.peers[d.userid].peer,c=[];e.getRemoteStreams().forEach(function(b){b.id!=a.id&&c.push(b)}),t.peers[d.userid].streams=c}(d.userid!==t.userid||"remote"!==d.type)&&(t.onstreamended(d),delete t.streamEvents[a.streamid])},!1)}},t.onMediaError=function(a,b){t.enableLogs&&console.error(a,b)},t.addNewBroadcaster=function(a,b){t.socket.isIO||(t.broadcasters.length&&setTimeout(function(){u.connectNewParticipantWithAllBroadcasters(a,b,t.broadcasters.join("|-,-|"))},1e4),t.session.oneway||t.session.broadcast||"many-to-many"!==t.direction||-1!==t.broadcasters.indexOf(a)||(t.broadcasters.push(a),s()))},t.autoCloseEntireSession=!1,t.filesContainer=t.videosContainer=document.body||document.documentElement,t.isInitiator=!1,t.shareFile=u.shareFile,"undefined"!=typeof da&&da.handle(t),"undefined"!=typeof ea&&ea.handle(t),t.token=g,t.onNewParticipant=function(a,b){t.acceptParticipationRequest(a,b)},t.acceptParticipationRequest=function(a,b){b.successCallback&&(b.successCallback(),delete b.successCallback),u.createNewPeer(a,b)},t.onShiftedModerationControl=function(a,b){t.acceptModerationControl(a,b)},t.acceptModerationControl=function(a,b){t.isInitiator=!0,t.broadcasters=b,t.peers.getAllParticipants().forEach(function(b){u.onNegotiationNeeded({changedUUID:a,oldUUID:t.userid,newUUID:a},b)}),t.userid=a,t.socket.emit("changed-uuid",t.userid)},t.shiftModerationControl=function(a,b,c){u.onNegotiationNeeded({shiftedModerationControl:!0,broadcasters:b,firedOnLeave:!!c},a)},"undefined"!=typeof Z&&(t.StreamsHandler=Z),t.onleave=function(a){},t.invokeSelectFileDialog=function(a){var b=new FileSelector;b.accept="*.*",b.selectSingleFile(a)},t.getPublicModerators=function(a,b){"function"==typeof a&&(b=a),l(function(){t.socket.emit("get-public-moderators","string"==typeof a?a:"",b)})},t.onmute=function(a){a&&a.mediaElement&&("both"===a.muteType||"video"===a.muteType?(a.mediaElement.src=null,a.mediaElement.pause(),a.mediaElement.poster=a.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"):"audio"===a.muteType&&(a.mediaElement.muted=!0))},t.onunmute=function(a){a&&a.mediaElement&&a.stream&&("both"===a.unmuteType||"video"===a.unmuteType?(a.mediaElement.poster=null,a.mediaElement.src=URL.createObjectURL(a.stream),a.mediaElement.play()):"audio"===a.unmuteType&&(a.mediaElement.muted=!1))},t.onExtraDataUpdated=function(a){a.status="online",t.onUserStatusChanged(a,!0)},t.onJoinWithPassword=function(a){console.warn(a,"is password protected. Please join with password.")},t.onInvalidPassword=function(a,b){console.warn(a,"is password protected. Please join with valid password. Your old password",b,"is wrong.")},t.onPasswordMaxTriesOver=function(a){console.warn(a,"is password protected. Your max password tries exceeded the limit.")},t.getAllParticipants=function(a){return t.peers.getAllParticipants(a)},"undefined"!=typeof Z&&(Z.onSyncNeeded=function(a,b,c){t.peers.getAllParticipants().forEach(function(d){u.onNegotiationNeeded({streamid:a,action:b,streamSyncNeeded:!0,type:c||"both"},d)})}),t.connectSocket=function(a){l(a)},t.closeSocket=function(){try{io.sockets={}}catch(a){}t.socket&&("function"==typeof t.socket.disconnect&&t.socket.disconnect(),"function"==typeof t.socket.resetProps&&t.socket.resetProps(),t.socket=null)},t.getSocket=function(a){return t.socket?a&&a(t.socket):l(a),t.socket},t.getRemoteStreams=u.getRemoteStreams;var v=["selectFirst","selectAll","forEach"];if(t.streamEvents={selectFirst:function(a){if(!a){var b;for(var c in t.streamEvents)-1!==v.indexOf(c)||b||(b=t.streamEvents[c]);return b}},selectAll:function(){}},t.socketURL="/",t.socketMessageEvent="RTCMultiConnection-Message",t.socketCustomEvent="RTCMultiConnection-Custom-Message",t.DetectRTC=DetectRTC,t.setCustomSocketEvent=function(a){a&&(t.socketCustomEvent=a),t.socket&&t.socket.emit("set-custom-socket-event-listener",t.socketCustomEvent)},t.getNumberOfBroadcastViewers=function(a,b){t.socket&&a&&b&&t.socket.emit("get-number-of-users-in-specific-broadcast",a,b)},t.onNumberOfBroadcastViewersUpdated=function(a){t.enableLogs&&t.isInitiator&&console.info("Number of broadcast (",a.broadcastId,") viewers",a.numberOfBroadcastViewers)},t.onUserStatusChanged=function(a,b){t.enableLogs&&!b&&console.info(a.userid,a.status)},t.getUserMediaHandler=x,t.multiPeersHandler=u,t.enableLogs=!0,t.setCustomSocketHandler=function(a){"undefined"!=typeof b&&(b=a)},t.chunkSize=65e3,t.maxParticipantsAllowed=1e3,t.disconnectWith=u.disconnectWith,t.checkPresence=function(a,b){return t.socket?void t.socket.emit("check-presence",(a||t.sessionid)+"",b):void t.connectSocket(function(){t.checkPresence(a,b)})},t.onReadyForOffer=function(a,b){t.multiPeersHandler.createNewPeer(a,b)},t.setUserPreferences=function(a){return t.dontAttachStream&&(a.dontAttachLocalStream=!0),t.dontGetRemoteStream&&(a.dontGetRemoteStream=!0),a},t.updateExtraData=function(){t.socket.emit("extra-data-updated",t.extra)},t.enableScalableBroadcast=!1,t.maxRelayLimitPerUser=3,t.dontCaptureUserMedia=!1,t.dontAttachStream=!1,t.dontGetRemoteStream=!1,t.onReConnecting=function(a){t.enableLogs&&console.info("ReConnecting with",a.userid,"...")},t.beforeAddingStream=function(a){return a},t.beforeRemovingStream=function(a){return a},"undefined"!=typeof z&&(t.checkIfChromeExtensionAvailable=z),"undefined"!=typeof A&&(t.checkIfChromeExtensionAvailable=A),"undefined"!=typeof C&&(t.getChromeExtensionStatus=C),t.getScreenConstraints=function(a,b){n(t,b)&&(b=!0),D(function(b,c){b||(c=t.modifyScreenConstraints(c),a(b,c))},b)},t.modifyScreenConstraints=function(a){return a},t.onPeerStateChanged=function(a){t.enableLogs&&-1!==a.iceConnectionState.search(/closed|failed/gi)&&console.error("Peer connection is closed between you & ",a.userid,a.extra,"state:",a.iceConnectionState)},t.isOnline=!0,i("online",function(){t.isOnline=!0}),i("offline",function(){t.isOnline=!1}),t.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(t.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),t.isLowBandwidth)){if(t.bandwidth={audio:30,video:30,screen:30},t.mediaConstraints.audio&&t.mediaConstraints.audio.optional&&t.mediaConstraints.audio.optional.length){var w=[];t.mediaConstraints.audio.optional.forEach(function(a){"undefined"==typeof a.bandwidth&&w.push(a)}),t.mediaConstraints.audio.optional=w}if(t.mediaConstraints.video&&t.mediaConstraints.video.optional&&t.mediaConstraints.video.optional.length){var w=[];t.mediaConstraints.video.optional.forEach(function(a){"undefined"==typeof a.bandwidth&&w.push(a)}),t.mediaConstraints.video.optional=w}}t.getExtraData=function(a){if(!a)throw"remoteUserId is required.";return t.peers[a]?t.peers[a].extra:{}},d.autoOpenOrJoin&&t.openOrJoin(t.sessionid),t.onUserIdAlreadyTaken=function(a,b){t.enableLogs&&console.warn("Userid already taken.",a,"Your new userid:",b),t.join(a)},t.onRoomFull=function(a){t.enableLogs&&console.warn(a,"is full.")},t.trickleIce=!0,t.version="3.4.2",t.onSettingLocalDescription=function(a){t.enableLogs&&console.info("Set local description for remote user",a.userid)}}function b(a,b){var c="";c+="?userid="+a.userid,c+="&msgEvent="+a.socketMessageEvent,c+="&socketCustomEvent="+a.socketCustomEvent,c+="&maxParticipantsAllowed="+a.maxParticipantsAllowed,a.enableScalableBroadcast&&(c+="&enableScalableBroadcast=true",c+="&maxRelayLimitPerUser="+(a.maxRelayLimitPerUser||2)),a.socketCustomParameters&&(c+=a.socketCustomParameters);try{io.sockets={}}catch(d){}if(a.socketURL||(a.socketURL="/"),"/"!=a.socketURL.substr(a.socketURL.length-1,1))throw'"socketURL" MUST end with a slash.';a.enableLogs&&("/"==a.socketURL?console.info("socket.io is connected at: ",location.origin+"/"):console.info("socket.io is connected at: ",a.socketURL));try{a.socket=io(a.socketURL+c)}catch(d){a.socket=io.connect(a.socketURL+c,a.socketOptions)}a.socket.isIO=!0;var e=a.multiPeersHandler;a.socket.on("extra-data-updated",function(b,c){a.peers[b]&&(a.peers[b].extra=c,a.onExtraDataUpdated({userid:b,extra:c}))}),a.socket.on(a.socketMessageEvent,function(b){if(b.remoteUserId==a.userid){if(a.peers[b.sender]&&a.peers[b.sender].extra!=b.message.extra&&(a.peers[b.sender].extra=b.extra,a.onExtraDataUpdated({userid:b.sender,extra:b.extra})),b.message.streamSyncNeeded&&a.peers[b.sender]){var c=a.streamEvents[b.message.streamid];if(!c||!c.stream)return;var d=b.message.action;if("ended"===d||"inactive"===d||"stream-removed"===d)return void a.onstreamended(c);var f="both"!=b.message.type?b.message.type:null;return void("function"==typeof c.stream[d]&&c.stream[d](f))}if("connectWithAllParticipants"===b.message)return-1===a.broadcasters.indexOf(b.sender)&&a.broadcasters.push(b.sender),void e.onNegotiationNeeded({allParticipants:a.getAllParticipants(b.sender)},b.sender);if("removeFromBroadcastersList"===b.message)return void(-1!==a.broadcasters.indexOf(b.sender)&&(delete a.broadcasters[a.broadcasters.indexOf(b.sender)],a.broadcasters=j(a.broadcasters)));if("dropPeerConnection"===b.message)return void a.deletePeer(b.sender);if(b.message.allParticipants)return-1===b.message.allParticipants.indexOf(b.sender)&&b.message.allParticipants.push(b.sender),void b.message.allParticipants.forEach(function(b){e[a.peers[b]?"renegotiatePeer":"createNewPeer"](b,{localPeerSdpConstraints:{OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:a.session.oneway?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.session.oneway?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!a.session.oneway||"one-way"===a.direction,isDataOnly:k(a.session)})});if(b.message.newParticipant){if(b.message.newParticipant==a.userid)return;if(a.peers[b.message.newParticipant])return;return void e.createNewPeer(b.message.newParticipant,b.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:a.session.oneway?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.session.oneway?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!a.session.oneway||"one-way"===a.direction,isDataOnly:k(a.session)})}if((b.message.readyForOffer||b.message.addMeAsBroadcaster)&&a.addNewBroadcaster(b.sender),b.message.newParticipationRequest&&b.sender!==a.userid){a.peers[b.sender]&&a.deletePeer(b.sender);var g={extra:b.extra||{},localPeerSdpConstraints:b.message.remotePeerSdpConstraints||{OfferToReceiveAudio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:b.message.localPeerSdpConstraints||{OfferToReceiveAudio:a.session.oneway?!!a.session.audio:a.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:a.session.oneway?!!a.session.video||!!a.session.screen:a.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:"undefined"!=typeof b.message.isOneWay?b.message.isOneWay:!!a.session.oneway||"one-way"===a.direction,isDataOnly:"undefined"!=typeof b.message.isDataOnly?b.message.isDataOnly:k(a.session),dontGetRemoteStream:"undefined"!=typeof b.message.isOneWay?b.message.isOneWay:!!a.session.oneway||"one-way"===a.direction,dontAttachLocalStream:!!b.message.dontGetRemoteStream,connectionDescription:b,successCallback:function(){("undefined"!=typeof b.message.isOneWay?b.message.isOneWay:!!a.session.oneway||"one-way"===a.direction)&&a.addNewBroadcaster(b.sender,g),(a.session.oneway||"one-way"===a.direction||k(a.session))&&a.addNewBroadcaster(b.sender,g)}};return void a.onNewParticipant(b.sender,g)}return b.message.shiftedModerationControl?void a.onShiftedModerationControl(b.sender,b.message.broadcasters):(b.message.changedUUID&&a.peers[b.message.oldUUID]&&(a.peers[b.message.newUUID]=a.peers[b.message.oldUUID],delete a.peers[b.message.oldUUID]),b.message.userLeft?(e.onUserLeft(b.sender),void(b.message.autoCloseEntireSession&&a.leave())):void e.addNegotiatedMessage(b.message,b.sender))}}),a.socket.on("user-left",function(b){onUserLeft(b),a.onUserStatusChanged({userid:b,status:"offline",extra:a.peers[b]?a.peers[b].extra||{}:{}}),a.onleave({userid:b,extra:{}})});var f=!1;a.socket.resetProps=function(){f=!1},a.socket.on("connect",function(){f||(f=!0,a.enableLogs&&console.info("socket.io connection is opened."),setTimeout(function(){a.socket.emit("extra-data-updated",a.extra),b&&b(a.socket)},1e3))}),a.socket.on("disconnect",function(){a.enableLogs&&console.warn("socket.io connection is closed")}),a.socket.on("join-with-password",function(b){a.onJoinWithPassword(b)}),a.socket.on("invalid-password",function(b,c){a.onInvalidPassword(b,c)}),a.socket.on("password-max-tries-over",function(b){a.onPasswordMaxTriesOver(b)}),a.socket.on("user-disconnected",function(b){b!==a.userid&&(a.onUserStatusChanged({userid:b,status:"offline",extra:a.peers[b]?a.peers[b].extra||{}:{}}),a.deletePeer(b))}),a.socket.on("user-connected",function(b){b!==a.userid&&a.onUserStatusChanged({userid:b,status:"online",extra:a.peers[b]?a.peers[b].extra||{}:{}})}),a.socket.on("closed-entire-session",function(b,c){a.leave(),a.onEntireSessionClosed({sessionid:b,userid:b,extra:c})}),a.socket.on("userid-already-taken",function(b,c){a.isInitiator=!1,a.userid=c,a.onUserIdAlreadyTaken(b,c)}),a.socket.on("logs",function(b){a.enableLogs&&console.debug("server-logs",b)}),a.socket.on("number-of-broadcast-viewers-updated",function(b){a.onNumberOfBroadcastViewersUpdated(b)}),a.socket.on("room-full",function(b){a.onRoomFull(b)})}function c(a){function b(){a.fbr=new FileBufferReader,a.fbr.onProgress=function(b){a.onFileProgress(b)},a.fbr.onBegin=function(b){a.onFileStart(b)},a.fbr.onEnd=function(b){a.onFileEnd(b)}}var c=this,d=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];a.peers={getLength:function(){var a=0;for(var b in this)-1==d.indexOf(b)&&a++;return a},selectFirst:function(){var a;for(var b in this)-1==d.indexOf(b)&&(a=this[b]);return a},getAllParticipants:function(a){var b=[];for(var c in this)-1==d.indexOf(c)&&c!=a&&b.push(c);return b},forEach:function(b){this.getAllParticipants().forEach(function(c){b(a.peers[c])})},send:function(b,d){var e=this;if(!l(b.size)&&!l(b.type))return void c.shareFile(b,d);if(!("text"===b.type||b instanceof ArrayBuffer||b instanceof DataView))return void ca.send({text:b,channel:this,connection:a,remoteUserId:d});if("text"===b.type&&(b=JSON.stringify(b)),d){var f=a.peers[d];if(f)return f.channels.length?void f.channels.forEach(function(a){a.send(b)}):(a.peers[d].createDataChannel(),a.renegotiate(d),void setTimeout(function(){e.send(b,d)},3e3))}this.getAllParticipants().forEach(function(c){return e[c].channels.length?void e[c].channels.forEach(function(a){a.send(b)}):(a.peers[c].createDataChannel(),a.renegotiate(c),void setTimeout(function(){e[c].channels.forEach(function(a){a.send(b)})},3e3))})}},this.uuid=a.userid,this.getLocalConfig=function(d,e,f){return f||(f={}),{streamsToShare:f.streamsToShare||{},rtcMultiConnection:a,connectionDescription:f.connectionDescription,userid:e,localPeerSdpConstraints:f.localPeerSdpConstraints,remotePeerSdpConstraints:f.remotePeerSdpConstraints,dontGetRemoteStream:!!f.dontGetRemoteStream,dontAttachLocalStream:!!f.dontAttachLocalStream,renegotiatingPeer:!!f.renegotiatingPeer,peerRef:f.peerRef,channels:f.channels||[],onLocalSdp:function(a){c.onNegotiationNeeded(a,e)},onLocalCandidate:function(b){b=X.processCandidates(a,b),b&&c.onNegotiationNeeded(b,e)},remoteSdp:d,onDataChannelMessage:function(d){if(!a.fbr&&a.enableFileSharing&&b(),"string"==typeof d||!a.enableFileSharing)return void c.onDataChannelMessage(d,e);var f=this;return d instanceof ArrayBuffer||d instanceof DataView?void a.fbr.convertToObject(d,function(a){f.onDataChannelMessage(a)}):d.readyForNextChunk?void a.fbr.getNextChunk(d,function(b,c){a.peers[e].channels.forEach(function(a){a.send(b)})},e):d.chunkMissing?void a.fbr.chunkMissing(d):void a.fbr.addChunk(d,function(b){a.peers[e].peer.channel.send(b)})},onDataChannelError:function(a){c.onDataChannelError(a,e)},onDataChannelOpened:function(a){c.onDataChannelOpened(a,e)},onDataChannelClosed:function(a){c.onDataChannelClosed(a,e)},onRemoteStream:function(b){if(a.peers[e]&&a.peers[e].streams.push(b),L&&window.PluginRTC){var d=document.createElement("video"),f=a.videosContainer;return f.insertBefore(d,f.firstChild),void setTimeout(function(){window.PluginRTC.attachMediaStream(d,b)},3e3)}c.onGettingRemoteMedia(b,e)},onRemoteStreamRemoved:function(a){c.onRemovingRemoteMedia(a,e)},onPeerStateChanged:function(a){c.onPeerStateChanged(a),"new"===a.iceConnectionState&&c.onNegotiationStarted(e,a),"connected"===a.iceConnectionState&&c.onNegotiationCompleted(e,a),-1!==a.iceConnectionState.search(/closed|failed/gi)&&(c.onUserLeft(e),c.disconnectWith(e))}}},this.createNewPeer=function(b,c){if(!(a.maxParticipantsAllowed<=a.getAllParticipants().length)){if(c=c||{},a.isInitiator&&a.session.audio&&"two-way"===a.session.audio&&!c.streamsToShare&&(c.isOneWay=!1,c.isDataOnly=!1,c.session=a.session),!c.isOneWay&&!c.isDataOnly)return c.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:c},b);c=a.setUserPreferences(c,b);var d=this.getLocalConfig(null,b,c);a.peers[b]=new r(d)}},this.createAnsweringPeer=function(b,c,d){d=a.setUserPreferences(d||{},c);var e=this.getLocalConfig(b,c,d);a.peers[c]=new r(e)},this.renegotiatePeer=function(b,c,d){if(!a.peers[b])return void(a.enableLogs&&console.error("This peer ("+b+") does not exists. Renegotiation skipped."));c||(c={}),c.renegotiatingPeer=!0,c.peerRef=a.peers[b].peer,c.channels=a.peers[b].channels;var e=this.getLocalConfig(d,b,c);a.peers[b]=new r(e)},this.replaceTrack=function(b,c,d){if(!a.peers[c])throw"This peer ("+c+") does not exists.";var e=a.peers[c].peer;return e.getSenders&&"function"==typeof e.getSenders&&e.getSenders().length?void e.getSenders().forEach(function(e){d&&e.track instanceof VideoStreamTrack&&(a.peers[c].peer.lastVideoTrack=e.track,e.replaceTrack(b)),!d&&e.track instanceof AudioStreamTrack&&(a.peers[c].peer.lastAudioTrack=e.track,e.replaceTrack(b))}):(console.warn("RTPSender.replaceTrack is NOT supported."),void this.renegotiatePeer(c))},this.onNegotiationNeeded=function(a,b){},this.addNegotiatedMessage=function(b,d){if(b.type&&b.sdp)return"answer"==b.type&&a.peers[d]&&a.peers[d].addRemoteSdp(b),"offer"==b.type&&(b.renegotiatingPeer?this.renegotiatePeer(d,null,b):this.createAnsweringPeer(b,d)),void(a.enableLogs&&console.log("Remote peer's sdp:",b.sdp));if(b.candidate)return a.peers[d]&&a.peers[d].addRemoteCandidate(b),void(a.enableLogs&&console.log("Remote peer's candidate pairs:",b.candidate));if(b.enableMedia){a.session=b.userPreferences.session||a.session,a.session.oneway&&a.attachStreams.length&&(a.attachStreams=[]),b.userPreferences.isDataOnly&&a.attachStreams.length&&(a.attachStreams.length=[]);var e={};a.attachStreams.forEach(function(a){e[a.streamid]={isAudio:!!a.isAudio,isVideo:!!a.isVideo,isScreen:!!a.isScreen}}),b.userPreferences.streamsToShare=e,c.onNegotiationNeeded({readyForOffer:!0,userPreferences:b.userPreferences},d)}b.readyForOffer&&a.onReadyForOffer(d,b.userPreferences)},this.connectNewParticipantWithAllBroadcasters=function(b,d,e){if(!a.socket.isIO&&(e=(e||"").split("|-,-|"),e.length)){var f,g=[];e.forEach(function(a){a=(a||"").replace(/ /g,""),a.length&&(f?g.push(a):f=a)}),f&&(c.onNegotiationNeeded({newParticipant:b,userPreferences:d||!1},f),g.length&&setTimeout(function(){c.connectNewParticipantWithAllBroadcasters(b,d,g.join("|-,-|"))},3e3))}},this.onGettingRemoteMedia=function(a,b){},this.onRemovingRemoteMedia=function(a,b){},this.onGettingLocalMedia=function(a){},this.onLocalMediaError=function(b,c){a.onMediaError(b,c)},this.shareFile=function(c,d){if(!a.enableFileSharing)throw'"connection.enableFileSharing" is false.';b(),a.fbr.readAsArrayBuffer(c,function(b){var c=a.getAllParticipants();d&&(c=[d]),c.forEach(function(c){a.fbr.getNextChunk(b,function(b){a.peers[c].channels.forEach(function(a){a.send(b)})},c)})},{userid:a.userid,chunkSize:G?15e3:a.chunkSize||0})};var e=new E(a);this.onDataChannelMessage=function(b,c){e.receive(JSON.parse(b),c,a.peers[c]?a.peers[c].extra:{})},this.onDataChannelClosed=function(b,c){b.userid=c,b.extra=a.peers[c]?a.peers[c].extra:{},a.onclose(b)},this.onDataChannelError=function(b,c){b.userid=c,event.extra=a.peers[c]?a.peers[c].extra:{},a.onerror(b)},this.onDataChannelOpened=function(b,c){return a.peers[c].channels.length?void(a.peers[c].channels=[b]):(a.peers[c].channels.push(b),void a.onopen({userid:c,extra:a.peers[c]?a.peers[c].extra:{},channel:b}))},this.onPeerStateChanged=function(b){a.onPeerStateChanged(b)},this.onNegotiationStarted=function(a,b){},this.onNegotiationCompleted=function(a,b){},this.getRemoteStreams=function(b){return b=b||a.peers.getAllParticipants()[0],a.peers[b]?a.peers[b].streams:[]},this.isPluginRTC=a.isPluginRTC=L}function d(a,b,c){if("undefined"!=typeof CustomEvent){var d={arguments:c,__exposedProps__:c},e=new CustomEvent(b,d);a.dispatchEvent(e)}}function e(a,b){if(!a||!b)throw"Both arguments are required.";if(a.onspeaking&&a.onsilence){if("undefined"==typeof hark)throw"hark.js not found.";hark(b.stream,{onspeaking:function(){a.onspeaking(b)},onsilence:function(){a.onsilence(b)},onvolumechange:function(c,d){a.onvolumechange&&a.onvolumechange(merge({volume:c,threshold:d},b))}})}}function f(a,b){b.stream&&b.stream&&b.stream.addEventListener&&(b.stream.addEventListener("mute",function(c){c=a.streamEvents[b.streamid],c.session={audio:"audio"===c.muteType,video:"video"===c.muteType},a.onmute(c)},!1),b.stream.addEventListener("unmute",function(c){c=a.streamEvents[b.streamid],c.session={audio:"audio"===c.unmuteType,video:"video"===c.unmuteType},a.onunmute(c)},!1))}function g(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var a=window.crypto.getRandomValues(new Uint32Array(3)),b="",c=0,d=a.length;d>c;c++)b+=a[c].toString(36);return b}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,"")}function h(a,b,c){var d=!1;a.getVideoTracks&&!a.getVideoTracks().length&&(d=!0);var e=document.createElement(d?"audio":"video");if(L&&window.PluginRTC)return c.videosContainer.insertBefore(e,c.videosContainer.firstChild),void setTimeout(function(){window.PluginRTC.attachMediaStream(e,a),b(e)},1e3);if(e[G?"mozSrcObject":"src"]=G?a:window.URL.createObjectURL(a),e.controls=!0,G){var f="ended";"oninactive"in a&&(f="inactive"),e.addEventListener(f,function(){if(currentUserMediaRequest.remove(a.idInstance),"local"===a.type){Z.onSyncNeeded(a.streamid,f),c.attachStreams.forEach(function(b,d){a.streamid===b.streamid&&delete c.attachStreams[d]});var b=[];c.attachStreams.forEach(function(a){a&&b.push(a)}),c.attachStreams=b;var d=c.streamEvents[a.streamid];if(d)return void c.onstreamended(d);this.parentNode&&this.parentNode.removeChild(this)}},!1)}e.play(),b(e)}function i(a,b){window.removeEventListener(a,b),window.addEventListener(a,b,!1)}function j(a){var b=[];return a.forEach(function(a){a&&b.push(a)}),b}function k(a){return!a.audio&&!a.video&&!a.screen&&a.data}function l(a){return"undefined"==typeof a}function m(a){return"string"==typeof a}function n(a,b){return a.session.audio&&"two-way"===a.session.audio?!1:G&&b!==!1?!0:!I||50>M?!1:typeof b===!0?!0:"undefined"==typeof b&&a.session.audio&&a.session.screen&&!a.session.video?(b=!0,!0):!1}function o(a){return G?!0:I?{mandatory:{chromeMediaSource:a.mandatory.chromeMediaSource,chromeMediaSourceId:a.mandatory.chromeMediaSourceId}}:!1}function p(){if("iOS"===DetectRTC.osName&&"undefined"!=typeof cordova&&"undefined"!=typeof cordova.plugins&&"undefined"!=typeof cordova.plugins.iosrtc){var a=cordova.plugins.iosrtc;window.webkitRTCPeerConnection=a.RTCPeerConnection,window.RTCSessionDescription=a.RTCSessionDescription,window.RTCIceCandidate=a.RTCIceCandidate,window.MediaStream=a.MediaStream,window.MediaStreamTrack=a.MediaStreamTrack,navigator.getUserMedia=navigator.webkitGetUserMedia=a.getUserMedia,a.debug.enable("iosrtc*"),a.registerGlobals()}}function q(a){var b,c={OfferToReceiveAudio:!!a.OfferToReceiveAudio,OfferToReceiveVideo:!!a.OfferToReceiveVideo};return b={mandatory:c,optional:[{VoiceActivityDetection:!1}]},navigator.mozGetUserMedia&&O>34&&(b={OfferToReceiveAudio:!!a.OfferToReceiveAudio,OfferToReceiveVideo:!!a.OfferToReceiveVideo}),b}function r(a){function b(){return i.getLocalStreams()}function c(b){b.binaryType="arraybuffer",b.onmessage=function(b){a.onDataChannelMessage(b.data)},b.onopen=function(){a.onDataChannelOpened(b)},b.onerror=function(b){a.onDataChannelError(b)},b.onclose=function(b){a.onDataChannelClosed(b)},b.internalSend=b.send,b.send=function(a){"open"===b.readyState&&b.internalSend(a)},i.channel=b}function e(b){i[b](function(b){b.sdp=f.processSdp(b.sdp),i.setLocalDescription(b,function(){f.trickleIce&&(a.onLocalSdp({type:b.type,sdp:b.sdp,remotePeerSdpConstraints:a.remotePeerSdpConstraints||!1,renegotiatingPeer:!!a.renegotiatingPeer||!1,connectionDescription:g.connectionDescription,dontGetRemoteStream:!!a.dontGetRemoteStream,extra:f?f.extra:{},streamsToShare:s,isFirefoxOffered:G}),f.onSettingLocalDescription(g))},function(a){f.enableLogs&&console.error("setLocalDescription error",a)})},function(a){f.enableLogs&&console.error("sdp-error",a)},R.sdpConstraints)}if(!Q)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";var f=a.rtcMultiConnection;this.extra=a.remoteSdp?a.remoteSdp.extra:f.extra,this.userid=a.userid,this.streams=[],this.channels=a.channels||[],this.connectionDescription=a.connectionDescription;var g=this;a.remoteSdp&&(this.connectionDescription=a.remoteSdp.connectionDescription);var h={};R.sdpConstraints=q({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0});var i,j=!!a.renegotiatingPeer;a.remoteSdp&&(j=!!a.remoteSdp.renegotiatingPeer);var k=[];if(f.attachStreams.forEach(function(a){a&&k.push(a)}),j)i=a.peerRef;else{var l="all";(f.candidates.turn||f.candidates.relay)&&(f.candidates.stun||f.candidates.reflexive||f.candidates.host||(l="relay")),i=new Q(navigator.onLine?{iceServers:f.iceServers,iceTransportPolicy:f.iceTransportPolicy||l,rtcpMuxPolicy:f.rtcpMuxPolicy||"negotiate"}:null,window.PluginRTC?null:f.optionalArgument),f.iceServers.length||(i=new Q(null,null))}i.onicecandidate=function(b){if(b.candidate)f.trickleIce&&a.onLocalCandidate({candidate:b.candidate.candidate,sdpMid:b.candidate.sdpMid,sdpMLineIndex:b.candidate.sdpMLineIndex
});else if(!f.trickleIce){var c=i.localDescription;a.onLocalSdp({type:c.type,sdp:c.sdp,remotePeerSdpConstraints:a.remotePeerSdpConstraints||!1,renegotiatingPeer:!!a.renegotiatingPeer||!1,connectionDescription:g.connectionDescription,dontGetRemoteStream:!!a.dontGetRemoteStream,extra:f?f.extra:{},streamsToShare:s,isFirefoxOffered:G})}};var m=!G;a.remoteSdp&&a.remoteSdp.remotePeerSdpConstraints&&a.remoteSdp.remotePeerSdpConstraints.isFirefoxOffered&&(m=!0),k.forEach(function(c){a.remoteSdp&&a.remoteSdp.remotePeerSdpConstraints&&a.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream||a.dontAttachLocalStream||(c=f.beforeAddingStream(c),c&&(b().forEach&&b().forEach(function(a){c&&a.id==c.id&&(c=null)}),c&&i.addStream(c)))}),i.oniceconnectionstatechange=i.onsignalingstatechange=function(){var b=g.extra;f.peers[g.userid]&&(b=f.peers[g.userid].extra||b),i&&a.onPeerStateChanged({iceConnectionState:i.iceConnectionState,iceGatheringState:i.iceGatheringState,signalingState:i.signalingState,extra:b,userid:g.userid})};var n={OfferToReceiveAudio:!!k.length,OfferToReceiveVideo:!!k.length};a.localPeerSdpConstraints&&(n=a.localPeerSdpConstraints),R.sdpConstraints=q(n);var o,p="addstream";i.addEventListener(p,function(b){if(b){if(b.streams&&b.streams.length&&!b.stream){if(!o)return void(o=new P);if(b.streams.forEach(function(a){a.getVideoTracks().length&&o.addTrack(a.getVideoTracks()[0]),a.getAudioTracks().length&&o.addTrack(a.getAudioTracks()[0])}),b.stream=o,f.session.audio&&f.session.video&&(!o.getVideoTracks().length||!o.getAudioTracks().length))return;o=null}var c={};a.remoteSdp&&a.remoteSdp.streamsToShare?c=a.remoteSdp.streamsToShare:a.streamsToShare&&(c=a.streamsToShare);var e=c[b.stream.id];e&&(b.stream.isAudio=e.isAudio,b.stream.isVideo=e.isVideo,b.stream.isScreen=e.isScreen),b.stream.streamid=b.stream.id,b.stream.stop||(b.stream.stop=function(){if(G){var a="ended";"oninactive"in b.stream&&(a="inactive"),d(b.stream,a)}}),h[b.stream.id]=b.stream,a.onRemoteStream(b.stream)}},!1),i.onremovestream=function(b){b.stream.streamid=b.stream.id,h[b.stream.id]&&delete h[b.stream.id],a.onRemoteStreamRemoved(b.stream)},this.addRemoteCandidate=function(a){i.addIceCandidate(new T(a))},this.addRemoteSdp=function(a,b){a.sdp=f.processSdp(a.sdp),i.setRemoteDescription(new S(a),b||function(){},function(b){f.enableLogs&&console.error(JSON.stringify(b,null,"	"),"\n",a.type,a.sdp)})};var r=!0;a.remoteSdp&&(r=!1),this.createDataChannel=function(){var a=i.createDataChannel("sctp",{});c(a)},f.session.data!==!0||j||(r?this.createDataChannel():i.ondatachannel=function(a){var b=a.channel;c(b)}),a.remoteSdp&&(a.remoteSdp.remotePeerSdpConstraints&&(n=a.remoteSdp.remotePeerSdpConstraints),R.sdpConstraints=q(n),this.addRemoteSdp(a.remoteSdp,function(){e("createAnswer")})),("two-way"==f.session.audio||"two-way"==f.session.video||"two-way"==f.session.screen)&&(R.sdpConstraints=q({OfferToReceiveAudio:"two-way"==f.session.audio||a.remoteSdp&&a.remoteSdp.remotePeerSdpConstraints&&a.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==f.session.video||"two-way"==f.session.screen||a.remoteSdp&&a.remoteSdp.remotePeerSdpConstraints&&a.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio}));var s={};b().forEach&&b().forEach(function(a){s[a.streamid]={isAudio:!!a.isAudio,isVideo:!!a.isVideo,isScreen:!!a.isScreen}}),r&&e("createOffer"),i.nativeClose=i.close,i.close=function(){if(i){try{-1===i.iceConnectionState.search(/closed|failed/gi)&&i.getRemoteStreams().forEach(function(a){a.stop()}),i.nativeClose()}catch(a){}i=null,g.peer=null}},this.peer=i}function s(a,b){if(!W){if(!b)return s(a,!0);W=!0;var c=document.createElement("iframe");c.onload=function(){function b(c){c.data&&c.data.iceServers&&(a(c.data.iceServers),window.removeEventListener("message",b))}c.isLoaded=!0,i("message",b),c.contentWindow.postMessage("get-ice-servers","*")},c.src="https://cdn.webrtc-experiment.com/getIceServers/",c.style.display="none",(document.body||document.documentElement).appendChild(c)}}function t(a){var b="urls";L&&(b="url");var c={};return c[b]=a,c}function u(a,b,c){var d="urls";L&&(d="url");var e={username:b,credential:c};return e[d]=a,e}function v(){var a=[];return window.RMCExternalIceServers.forEach(function(b){b.urls||(b.urls=b.url),-1!==b.urls.search("stun|stuns")&&a.push(t(b.urls)),-1!==b.urls.search("turn|turns")&&a.push(u(b.urls,b.username,b.credential))}),a}function w(a,b){a.mandatory&&a.mandatory.chromeMediaSource?b.isScreen=!0:a.mozMediaSource||a.mediaSource?b.isScreen=!0:a.video?b.isVideo=!0:a.audio&&(b.isAudio=!0)}function x(a){function b(b,d){w(a.localMediaConstraints,b),a.onGettingLocalMedia(b,d);var e="ended";"oninactive"in b&&(e="inactive"),b.addEventListener(e,function(){delete currentUserMediaRequest.streams[c],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(a)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(a)],currentUserMediaRequest.queueRequests=j(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[c]={stream:b},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&x(currentUserMediaRequest.queueRequests.shift())}if(currentUserMediaRequest.mutex===!0)return void currentUserMediaRequest.queueRequests.push(a);currentUserMediaRequest.mutex=!0;var c=JSON.stringify(a.localMediaConstraints);if(currentUserMediaRequest.streams[c])b(currentUserMediaRequest.streams[c].stream,!0);else{if(L&&window.PluginRTC){document.createElement("video");return void window.PluginRTC.getUserMedia({audio:!0,video:!0},function(a){a.streamid=a.id||g(),b(a)},function(a){})}var d=!!/BB10|BlackBerry/i.test(navigator.userAgent||"");if(d||"undefined"==typeof navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(a.localMediaConstraints,function(a){a.streamid=a.streamid||a.id||g(),a.idInstance=c,b(a)},function(b){a.onLocalMediaError(b,a.localMediaConstraints)});navigator.mediaDevices.getUserMedia(a.localMediaConstraints).then(function(a){a.streamid=a.streamid||a.id||g(),a.idInstance=c,b(a)})["catch"](function(b){a.onLocalMediaError(b,a.localMediaConstraints)})}}function y(a){if("PermissionDeniedError"==a){if(ba="PermissionDeniedError",aa)return aa("PermissionDeniedError");throw new Error("PermissionDeniedError: User rejected to share his screen.")}"rtcmulticonnection-extension-loaded"==a&&(ba="desktop"),a.sourceId&&aa&&(_=a.sourceId,aa(_))}function z(a){if(a){if(G)return A(a);if(window.IsAndroidChrome)return ba="screen",void a(!0);if("desktop"==ba)return void a(!0);window.postMessage("are-you-there","*"),setTimeout(function(){a("screen"==ba?!1:!0)},2e3)}}function A(a){function b(d){var e=d.data;e&&"undefined"!=typeof e.isScreenCapturingEnabled&&(c=!0,a(e.isScreenCapturingEnabled===!0?!0:!1),window.removeEventListener("message",b,!1))}if(a){if(!G)return z(a);var c=!1;window.addEventListener("message",b,!1),window.postMessage({checkIfScreenCapturingEnabled:!0,domains:[document.domain]},"*"),setTimeout(function(){c||a(!0)},2e3)}}function B(a,b){if(!a)throw'"callback" parameter is mandatory.';return _?(a(_),void(_=null)):(aa=a,b?void window.postMessage("audio-plus-tab","*"):void window.postMessage("get-sourceId","*"))}function C(a,b){if(window.IsAndroidChrome)return ba="screen",void b("installed-enabled");if(2!=arguments.length&&(b=a,a=window.RMCExtensionID||"ajhifddimkapgcifgcodmmfdlknahffk"),G)return b("not-chrome");var c=document.createElement("img");c.src="chrome-extension://"+a+"/icon.png",c.onload=function(){_=null,ba="screen",window.postMessage("are-you-there","*"),setTimeout(function(){b("screen"==ba?a==a?"installed-enabled":"installed-disabled":"installed-enabled")},2e3)},c.onerror=function(){b("not-installed")}}function D(a,b){var c={mozMediaSource:"window",mediaSource:"window",width:29999,height:8640};return G?a(null,c):(_=null,void z(function(c){var d={mandatory:{chromeMediaSource:ba,maxWidth:29999,maxHeight:8640,minFrameRate:30,maxFrameRate:128,minAspectRatio:1.77},optional:[]};return window.IsAndroidChrome?void a(null,d):"desktop"!=ba||_?("desktop"==ba&&(d.mandatory.chromeMediaSourceId=_),_=null,ba="screen",aa=null,void a(null,d)):void B(function(){d.mandatory.chromeMediaSourceId=_,a("PermissionDeniedError"==_?_:null,d),_=null},b)}))}function E(a){function b(b,d,e){var f=b.uuid;if(c[f]||(c[f]=[]),c[f].push(b.message),b.last){var g=c[f].join("");b.isobject&&(g=JSON.parse(g));var h=(new Date).getTime(),i=h-b.sendingTime,j={data:g,userid:d,extra:e,latency:i};a.autoTranslateText?(j.original=j.data,a.Translator.TranslateText(j.data,function(b){j.data=b,a.onmessage(j)})):a.onmessage(j),delete c[f]}}var c={};return{receive:b}}var F=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,G="undefined"!=typeof window.InstallTrigger,H=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,I=!!window.chrome&&!F,J=!!document.documentMode,K=!!navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);"undefined"!=typeof cordova&&(K=!0,I=!0),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(K=!0,I=!0);var L=!K&&(H||J);L&&"undefined"!=typeof URL&&(URL.createObjectURL=function(){});var M=(!!(window.process&&"object"==typeof window.process&&window.process.versions&&window.process.versions["node-webkit"]),50),N=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);I&&N&&N[2]&&(M=parseInt(N[2],10));var O=50;N=navigator.userAgent.match(/Firefox\/(.*)/),G&&N&&N[1]&&(O=parseInt(N[1],10)),window.addEventListener||(window.addEventListener=function(a,b,c){a.attachEvent&&a.attachEvent("on"+b,c)}),window.attachEventListener=function(a,b,c,d){a.addEventListener(b,c,d)};var P=window.MediaStream;"undefined"==typeof P&&"undefined"!=typeof webkitMediaStream&&(P=webkitMediaStream),"undefined"!=typeof P&&("getVideoTracks"in P.prototype||(P.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var a=[];return this.getTracks.forEach(function(b){-1!==b.kind.toString().indexOf("video")&&a.push(b)}),a},P.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var a=[];return this.getTracks.forEach(function(b){-1!==b.kind.toString().indexOf("audio")&&a.push(b)}),a}),"stop"in P.prototype||(P.prototype.stop=function(){this.getAudioTracks().forEach(function(a){a.stop&&a.stop()}),this.getVideoTracks().forEach(function(a){a.stop&&a.stop()})})),function(){function a(){var a,b,c,d=(j.appVersion,j.userAgent),e=j.appName,f=""+parseFloat(j.appVersion),g=parseInt(j.appVersion,10);if(m){e="Opera";try{f=j.userAgent.split("OPR/")[1].split(" ")[0],g=f.split(".")[0]}catch(h){f="0.0.0.0",g=0}}else q?(b=d.indexOf("MSIE"),e="IE",f=d.substring(b+5)):p?(b=d.indexOf("Chrome"),e="Chrome",f=d.substring(b+7)):o?(b=d.indexOf("Safari"),e="Safari",f=d.substring(b+7),-1!==(b=d.indexOf("Version"))&&(f=d.substring(b+8))):n?(b=d.indexOf("Firefox"),e="Firefox",f=d.substring(b+8)):(a=d.lastIndexOf(" ")+1)<(b=d.lastIndexOf("/"))&&(e=d.substring(a,b),f=d.substring(b+1),e.toLowerCase()===e.toUpperCase()&&(e=j.appName));return l&&(e="Edge",f=parseInt(j.userAgent.match(/Edge\/(\d+).(\d+)$/)[2],10).toString()),-1!==(c=f.indexOf(";"))&&(f=f.substring(0,c)),-1!==(c=f.indexOf(" "))&&(f=f.substring(0,c)),g=parseInt(""+f,10),isNaN(g)&&(f=""+parseFloat(j.appVersion),g=parseInt(j.appVersion,10)),{fullVersion:f,version:g,name:e,isPrivateBrowsing:!1}}function b(a,b){var c=0,d=50,e=!1,f=window.setInterval(function(){a()&&(window.clearInterval(f),b(e)),c++>d&&(window.clearInterval(f),e=!0,b(e))},10)}function c(a){var b=a.toLowerCase();if(0===b.indexOf("msie")&&0===b.indexOf("trident"))return!1;var c=/(?:msie|rv:)\s?([\d\.]+)/.exec(b);return c&&parseInt(c[1],10)>=10?!0:!1}function d(a){var d;if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){d=!1},function(a){d=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var e;try{e=window.indexedDB.open("test"),e.onerror=function(){return!0}}catch(f){d=!0}"undefined"==typeof d&&b(function(){return"done"===e.readyState?!0:!1},function(a){a||(d=e.result?!1:!0)})}else if(c(window.navigator.userAgent)){d=!1;try{window.indexedDB||(d=!0)}catch(f){d=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(f){d=!0}"undefined"==typeof d&&(d=!1,window.localStorage.removeItem("test"))}b(function(){return"undefined"!=typeof d?!0:!1},function(b){a(d)})}function e(){var a="-",b=j.appVersion,c=j.userAgent,d=a,e=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in e){var g=e[f];if(g.r.test(c)){d=g.s;break}}var h=a;switch(/Windows/.test(d)&&(/Windows (.*)/.test(d)&&(h=/Windows (.*)/.exec(d)[1]),d="Windows"),d){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(c)&&(h=/Mac OS X (10[\.\_\d]+)/.exec(c)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(c)&&(h=/Android ([\.\_\d]+)/.exec(c)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(c)&&(h=/OS (\d+)_(\d+)_?(\d+)?/.exec(b),h=h[1]+"."+h[2]+"."+(0|h[3]))}return{osName:d,osVersion:h}}function f(a){H.isWebRTCSupported&&(H.isORTCSupported||g(function(b){a(b.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?"Local: "+b:"Public: "+b)}))}function g(a){function b(b){var d=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,e=d.exec(b);if(!e)return void console.warn("Could not match IP address in",b);var f=e[1];void 0===c[f]&&a(f),c[f]=!0}var c={},d=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,e=!!window.webkitRTCPeerConnection;if(!d){var f=document.getElementById("iframe");if(!f)throw"NOTE: you need to have an iframe in the page right above the script tag.";var g=f.contentWindow;d=g.RTCPeerConnection||g.mozRTCPeerConnection||g.webkitRTCPeerConnection,e=!!g.webkitRTCPeerConnection}if(d){var h,i={optional:[{RtpDataChannels:!0}]};e&&(h={iceServers:[{urls:"stun:stun.services.mozilla.com"}]},"undefined"!=typeof H&&H.browser.isFirefox&&H.browser.version<=38&&(h[0]={url:h[0].urls}));var j=new d(h,i);j.onicecandidate=function(a){a.candidate&&b(a.candidate.candidate)},j.createDataChannel(""),j.createOffer(function(a){j.setLocalDescription(a,function(){},function(){})},function(){}),setTimeout(function(){var a=j.localDescription.sdp.split("\n");a.forEach(function(a){0===a.indexOf("a=candidate:")&&b(a)})},1e3)}}function h(a){if(!B)return void(a&&a());if(!j.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(j.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!j.enumerateDevices&&j.enumerateDevices&&(j.enumerateDevices=j.enumerateDevices.bind(j)),!j.enumerateDevices)return void(a&&a());x=[],y=[],z=[],A=[];var b={};j.enumerateDevices(function(c){c.forEach(function(a){var c={};for(var d in a)try{"function"!=typeof a[d]&&(c[d]=a[d])}catch(e){}b[c.deviceId]||("audio"===c.kind&&(c.kind="audioinput"),"video"===c.kind&&(c.kind="videoinput"),c.deviceId||(c.deviceId=c.id),c.id||(c.id=c.deviceId),c.label?("videoinput"!==c.kind||G||(G=!0),"audioinput"!==c.kind||F||(F=!0)):(c.label="Please invoke getUserMedia once.","https:"!==location.protocol&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(c.label="HTTPs is required to get label of this "+c.kind+" device.")),"audioinput"===c.kind&&(C=!0,-1===y.indexOf(c)&&y.push(c)),"audiooutput"===c.kind&&(D=!0,-1===z.indexOf(c)&&z.push(c)),"videoinput"===c.kind&&(E=!0,-1===A.indexOf(c)&&A.push(c)),x.push(c),b[c.deviceId]=c)}),"undefined"!=typeof H&&(H.MediaDevices=x,H.hasMicrophone=C,H.hasSpeakers=D,H.hasWebcam=E,H.isWebsiteHasWebcamPermissions=G,H.isWebsiteHasMicrophonePermissions=F,H.audioInputDevices=y,H.audioOutputDevices=z,H.videoInputDevices=A),a&&a()})}var i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";!function(a){"undefined"==typeof window&&("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:i,getUserMedia:function(){}},a.window=global):"undefined"==typeof window,"undefined"==typeof document&&(a.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),"undefined"==typeof location&&(a.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(a.screen={width:0,height:0}))}("undefined"!=typeof global?global:window);var j=window.navigator;"undefined"!=typeof j?("undefined"!=typeof j.webkitGetUserMedia&&(j.getUserMedia=j.webkitGetUserMedia),"undefined"!=typeof j.mozGetUserMedia&&(j.getUserMedia=j.mozGetUserMedia)):j={getUserMedia:function(){},userAgent:i};var k=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(j.userAgent||""),l=!(-1===j.userAgent.indexOf("Edge")||!j.msSaveOrOpenBlob&&!j.msSaveBlob),m=!!window.opera||j.userAgent.indexOf(" OPR/")>=0,n="undefined"!=typeof window.InstallTrigger,o=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,p=!!window.chrome&&!m,q=!!document.documentMode&&!l,r={Android:function(){return j.userAgent.match(/Android/i)},BlackBerry:function(){return j.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return j.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return j.userAgent.match(/Opera Mini/i)},Windows:function(){return j.userAgent.match(/IEMobile/i)},any:function(){return r.Android()||r.BlackBerry()||r.iOS()||r.Opera()||r.Windows()},getOsName:function(){var a="Unknown OS";return r.Android()&&(a="Android"),r.BlackBerry()&&(a="BlackBerry"),r.iOS()&&(a="iOS"),r.Opera()&&(a="Opera Mini"),r.Windows()&&(a="Windows"),a}},s="Unknown OS",t="Unknown OS Version";if(r.any())s=r.getOsName();else{var u=e();s=u.osName,t=u.osVersion}var v=!1,w=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(a){!v&&a in document.createElement("canvas")&&(v=!0),!w&&a in document.createElement("video")&&(w=!0)});var x=[],y=[],z=[],A=[];j.mediaDevices&&j.mediaDevices.enumerateDevices&&(j.enumerateDevices=function(a){j.mediaDevices.enumerateDevices().then(a)["catch"](function(){a([])})});var B=!1;"undefined"!=typeof U&&"getSources"in U?B=!0:j.mediaDevices&&j.mediaDevices.enumerateDevices&&(B=!0);var C=!1,D=!1,E=!1,F=!1,G=!1;h();var H=window.DetectRTC||{};H.browser=a(),d(function(a){H.browser.isPrivateBrowsing=!!a}),H.browser["is"+H.browser.name]=!0;var I=(!!(window.process&&"object"==typeof window.process&&window.process.versions&&window.process.versions["node-webkit"]),!1);["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(a){I||a in window&&(I=!0)}),H.isWebRTCSupported=I,H.isORTCSupported="undefined"!=typeof RTCIceGatherer;var J=!1;H.browser.isChrome&&H.browser.version>=35?J=!0:H.browser.isFirefox&&H.browser.version>=34&&(J=!0),"https:"!==location.protocol&&(J=!1),H.isScreenCapturingSupported=J;var K={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(a){K.isSupported||a in window&&(K.isSupported=!0,window[a]&&"createMediaStreamSource"in window[a].prototype&&(K.isCreateMediaStreamSourceSupported=!0))}),H.isAudioContextSupported=K.isSupported,H.isCreateMediaStreamSourceSupported=K.isCreateMediaStreamSourceSupported;var L=!1;H.browser.isChrome&&H.browser.version>31&&(L=!0),H.isRtpDataChannelsSupported=L;var M=!1;H.browser.isFirefox&&H.browser.version>28?M=!0:H.browser.isChrome&&H.browser.version>25?M=!0:H.browser.isOpera&&H.browser.version>=11&&(M=!0),H.isSctpDataChannelsSupported=M,H.isMobileDevice=k;var N=!1;j.getUserMedia?N=!0:j.mediaDevices&&j.mediaDevices.getUserMedia&&(N=!0),H.browser.isChrome&&H.browser.version>=46&&"https:"!==location.protocol&&(H.isGetUserMediaSupported="Requires HTTPs"),H.isGetUserMediaSupported=N,H.osName=s,H.osVersion=t;var O="";if(screen.width){var P=screen.width?screen.width:"",Q=screen.height?screen.height:"";O+=""+P+" x "+Q}H.displayResolution=O,H.isCanvasSupportsStreamCapturing=v,H.isVideoSupportsStreamCapturing=w,"Chrome"==H.browser.name&&H.browser.version>=53&&(H.isCanvasSupportsStreamCapturing||(H.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),H.isVideoSupportsStreamCapturing||(H.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),H.DetectLocalIPAddress=f,H.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,H.isWebSocketsBlocked=!H.isWebSocketsSupported,H.checkWebSocketsSupport=function(a){a=a||function(){};try{var b=new WebSocket("wss://echo.websocket.org:443/");b.onopen=function(){H.isWebSocketsBlocked=!1,a(),b.close(),b=null},b.onerror=function(){H.isWebSocketsBlocked=!0,a()}}catch(c){H.isWebSocketsBlocked=!0,a()}},H.load=function(a){a=a||function(){},h(a)},H.MediaDevices=x,H.hasMicrophone=C,H.hasSpeakers=D,H.hasWebcam=E,H.isWebsiteHasWebcamPermissions=G,H.isWebsiteHasMicrophonePermissions=F,H.audioInputDevices=y,H.audioOutputDevices=z,H.videoInputDevices=A;var R=!1;"setSinkId"in document.createElement("video")&&(R=!0),H.isSetSinkIdSupported=R;var S=!1;H.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(S=!0):H.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(S=!0),H.isRTPSenderReplaceTracksSupported=S;var T=!1;H.browser.isFirefox&&H.browser.version>38&&(T=!0),H.isRemoteStreamProcessingSupported=T;var V=!1;"undefined"!=typeof U&&"applyConstraints"in U.prototype&&(V=!0),H.isApplyConstraintsSupported=V;var W=!1;H.browser.isFirefox&&H.browser.version>=43&&(W=!0),H.isMultiMonitorScreenCapturingSupported=W,H.isPromisesSupported=!!("Promise"in window),"undefined"==typeof H&&(window.DetectRTC={});var X=window.MediaStream;"undefined"==typeof X&&"undefined"!=typeof webkitMediaStream&&(X=webkitMediaStream),"undefined"!=typeof X?H.MediaStream=Object.keys(X.prototype):H.MediaStream=!1,"undefined"!=typeof U?H.MediaStreamTrack=Object.keys(U.prototype):H.MediaStreamTrack=!1;var Y=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;"undefined"!=typeof Y?H.RTCPeerConnection=Object.keys(Y.prototype):H.RTCPeerConnection=!1,window.DetectRTC=H,"undefined"!=typeof module&&(module.exports=H),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return H})}(),document.addEventListener("deviceready",p,!1),p();var Q,R={};"undefined"!=typeof window.RTCPeerConnection?Q=window.RTCPeerConnection:"undefined"!=typeof mozRTCPeerConnection?Q=mozRTCPeerConnection:"undefined"!=typeof webkitRTCPeerConnection&&(Q=webkitRTCPeerConnection);var S=window.RTCSessionDescription||window.mozRTCSessionDescription,T=window.RTCIceCandidate||window.mozRTCIceCandidate,U=window.MediaStreamTrack;window.onPluginRTCInitialized=function(){U=window.PluginRTC.MediaStreamTrack,Q=window.PluginRTC.RTCPeerConnection,T=window.PluginRTC.RTCIceCandidate,S=window.PluginRTC.RTCSessionDescription},"undefined"!=typeof window.PluginRTC&&window.onPluginRTCInitialized();var V=function(){function a(a){if(!a||"string"!=typeof a)throw"Invalid arguments.";return a=a.replace("a=rtpmap:100 VP8/90000\r\n",""),a=a.replace("a=rtpmap:101 VP9/90000\r\n",""),a=a.replace(/m=video ([0-9]+) RTP\/SAVPF ([0-9 ]*) 100/g,"m=video $1 RTP/SAVPF $2"),a=a.replace(/m=video ([0-9]+) RTP\/SAVPF ([0-9 ]*) 101/g,"m=video $1 RTP/SAVPF $2"),a=a.replace(/m=video ([0-9]+) RTP\/SAVPF 100([0-9 ]*)/g,"m=video $1 RTP/SAVPF$2"),a=a.replace(/m=video ([0-9]+) RTP\/SAVPF 101([0-9 ]*)/g,"m=video $1 RTP/SAVPF$2"),a=a.replace("a=rtcp-fb:120 nack\r\n",""),a=a.replace("a=rtcp-fb:120 nack pli\r\n",""),a=a.replace("a=rtcp-fb:120 ccm fir\r\n",""),a=a.replace("a=rtcp-fb:101 nack\r\n",""),a=a.replace("a=rtcp-fb:101 nack pli\r\n",""),a=a.replace("a=rtcp-fb:101 ccm fir\r\n","")}function b(a){if(!a||"string"!=typeof a)throw"Invalid arguments.";return a=a.replace("a=rtcp-fb:126 nack\r\n",""),a=a.replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n"),a=a.replace("a=rtcp-fb:97 nack\r\n",""),a=a.replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n")}function c(a,b){if(b&&b.getSenders&&b.getSenders().length){if(!a||"string"!=typeof a)throw"Invalid arguments.";b.getSenders().forEach(function(b){for(var c=b.getParameters(),d=0;d<c.codecs.length;d++)if(c.codecs[d].mimeType==a){c.codecs.unshift(c.codecs.splice(d,1));break}b.setParameters(c)})}}function d(a){return a.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")}function e(a,b,c){return b?"undefined"!=typeof G&&G?a:m?a:(c&&(b.screen?b.screen<300&&console.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):console.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),b.screen&&c&&(a=a.replace(/b=AS([^\r\n]+\r\n)/g,""),a=a.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+b.screen+"\r\n")),(b.audio||b.video||b.data)&&(a=a.replace(/b=AS([^\r\n]+\r\n)/g,"")),b.audio&&(a=a.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+b.audio+"\r\n")),b.video&&(a=a.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+(c?b.screen:b.video)+"\r\n")),a):a}function f(a,b,c){return g(a,0,-1,b,c)}function g(a,b,c,d,e){for(var f=-1!==c?c:a.length,g=b;f>g;++g)if(0===a[g].indexOf(d)&&(!e||-1!==a[g].toLowerCase().indexOf(e.toLowerCase())))return g;return null}function h(a){var b=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),c=a.match(b);return c&&2===c.length?c[1]:null}function i(a,b){if(m)return a;b=b||{};var c,d=b.min,e=b.max,g=a.split("\r\n"),i=f(g,"a=rtpmap","VP8/90000");if(i&&(c=h(g[i])),!c)return a;var j,k=f(g,"a=rtpmap","rtx/90000");if(k&&(j=h(g[k])),!k)return a;var l=f(g,"a=fmtp:"+j.toString());if(null!==l){var n="\r\n";n+="a=fmtp:"+c+" x-google-min-bitrate="+(d||"228")+"; x-google-max-bitrate="+(e||"228"),g[l]=g[l].concat(n),a=g.join("\r\n")}return a}function j(a,b){if(m)return a;b=b||{};var c,d=a.split("\r\n"),e=f(d,"a=rtpmap","opus/48000");if(e&&(c=h(d[e])),!c)return a;var g=f(d,"a=fmtp:"+c.toString());if(null===g)return a;var i="";return i+="; stereo="+("undefined"!=typeof b.stereo?b.stereo:"1"),i+="; sprop-stereo="+("undefined"!=typeof b["sprop-stereo"]?b["sprop-stereo"]:"1"),"undefined"!=typeof b.maxaveragebitrate&&(i+="; maxaveragebitrate="+(b.maxaveragebitrate||1048576)),"undefined"!=typeof b.maxplaybackrate&&(i+="; maxplaybackrate="+(b.maxplaybackrate||1048576)),"undefined"!=typeof b.cbr&&(i+="; cbr="+("undefined"!=typeof b.cbr?b.cbr:"1")),"undefined"!=typeof b.useinbandfec&&(i+="; useinbandfec="+b.useinbandfec),"undefined"!=typeof b.usedtx&&(i+="; usedtx="+b.usedtx),"undefined"!=typeof b.maxptime&&(i+="\r\na=maxptime:"+b.maxptime),d[g]=d[g].concat(i),a=d.join("\r\n")}function k(a){return-1===a.indexOf("SAVPF 100 101")||-1===a.indexOf("VP9/90000")?a:a.replace("SAVPF 100 101","SAVPF 101 100")}function l(a){for(var b=a.split("\r\n"),c=null,d=0;d<b.length;d++)if(-1!==b[d].search("opus/48000")){var e=extractSdp(b[d],/:(\d+) opus\/48000/i);break}for(var d=0;d<b.length;d++)if(-1!==b[d].search("a=fmtp")){var f=extractSdp(b[d],/a=fmtp:(\d+)/);if(f===e){c=d;break}}return null===c?a:(b[c]=b[c].concat("; stereo=1; sprop-stereo=1"),a=b.join("\r\n"))}var m=!!navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);return"undefined"!=typeof cordova&&(m=!0),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(m=!0),{removeVPX:a,disableNACK:b,prioritize:c,removeNonG722:d,setApplicationSpecificBandwidth:function(a,b,c){return e(a,b,c)},setVideoBitrates:function(a,b){return i(a,b)},setOpusAttributes:function(a,b){return j(a,b)},preferVP9:k,forceStereoAudio:l}}();window.BandwidthHandler=V;var W,X=function(){function a(a,b){var c=b.candidate,d=a.candidates,e=d.stun,f=d.turn;if(l(d.reflexive)||(e=d.reflexive),l(d.relay)||(f=d.relay),(d.host||!c.match(/typ host/g))&&(f||!c.match(/typ relay/g))&&(e||!c.match(/typ srflx/g))){var g=a.iceProtocols;if((g.udp||!c.match(/ udp /g))&&(g.tcp||!c.match(/ tcp /g)))return a.enableLogs&&console.debug("Your candidate pairs:",c),{candidate:c,sdpMid:b.sdpMid,sdpMLineIndex:b.sdpMLineIndex}}}return{processCandidates:a}}();"undefined"!=typeof window.getExternalIceServers&&1==window.getExternalIceServers&&s(function(a){a&&a.length&&(window.RMCExternalIceServers=a,window.iceServersLoadCallback&&"function"==typeof window.iceServersLoadCallback&&window.iceServersLoadCallback(a))});var Y=function(){function a(a){var b=[];return b.push(t("stun:stun.l.google.com:19302")),b.push(u("stun:webrtcweb.com:7788","muazkh","muazkh")),b.push(u("turn:webrtcweb.com:7788","muazkh","muazkh")),b.push(u("turn:webrtcweb.com:8877","muazkh","muazkh")),b.push(u("turns:webrtcweb.com:7788","muazkh","muazkh")),b.push(u("turns:webrtcweb.com:8877","muazkh","muazkh")),b.push(u("stun:webrtcweb.com:4455","muazkh","muazkh")),b.push(u("turn:webrtcweb.com:4455","muazkh","muazkh")),b.push(u("turn:webrtcweb.com:5544?transport=tcp","muazkh","muazkh")),window.RMCExternalIceServers?b=b.concat(v()):"undefined"!=typeof window.getExternalIceServers&&1==window.getExternalIceServers&&(a.iceServers=b,window.iceServersLoadCallback=function(){a.iceServers=a.iceServers.concat(v())}),b}return{getIceServers:a}}();window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(a){this.mutex=!1;var b=this.streams[a];if(b){b=b.stream;var c=b.currentUserMediaRequestOptions;this.queueRequests.indexOf(c)&&(delete this.queueRequests[this.queueRequests.indexOf(c)],this.queueRequests=j(this.queueRequests)),this.streams[a].stream=null,delete this.streams[a]}}};var Z=function(){function a(a){return a?"string"==typeof a||"undefined"==typeof a?a:a.audio&&a.video?null:a.audio?"audio":a.video?"video":void 0:void 0}function b(b,e,f){function g(){if(f.streamEvents[b.streamid].mediaElement){var a=f.streamEvents[b.streamid].mediaElement;a.volume=0,c(200,5,function(){try{a.volume+=.2}catch(b){a.volume=1}})}}if(b&&b.addEventListener){if("undefined"==typeof e||1==e){var h="ended";"oninactive"in b&&(h="inactive"),b.addEventListener(h,function(){Z.onSyncNeeded(this.streamid,h)},!1)}b.mute=function(c,g){c=a(c),"undefined"!=typeof g&&(e=g),("undefined"==typeof c||"audio"==c)&&b.getAudioTracks().forEach(function(a){a.enabled=!1,f.streamEvents[b.streamid].isAudioMuted=!0}),("undefined"==typeof c||"video"==c)&&b.getVideoTracks().forEach(function(a){a.enabled=!1}),("undefined"==typeof e||1==e)&&Z.onSyncNeeded(b.streamid,"mute",c),f.streamEvents[b.streamid].muteType=c||"both",d(b,"mute",c)},b.unmute=function(c,h){c=a(c),"undefined"!=typeof h&&(e=h),g(),("undefined"==typeof c||"audio"==c)&&b.getAudioTracks().forEach(function(a){a.enabled=!0,f.streamEvents[b.streamid].isAudioMuted=!1}),("undefined"==typeof c||"video"==c)&&(b.getVideoTracks().forEach(function(a){a.enabled=!0}),"undefined"!=typeof c&&"video"==c&&f.streamEvents[b.streamid].isAudioMuted&&!function i(a){a||(a=0),a++,100>a&&f.streamEvents[b.streamid].isAudioMuted&&(b.mute("audio"),
setTimeout(function(){i(a)},50))}()),("undefined"==typeof e||1==e)&&Z.onSyncNeeded(b.streamid,"unmute",c),f.streamEvents[b.streamid].unmuteType=c||"both",d(b,"unmute",c)}}}function c(a,b,d,e){e=(e||0)+1,e>=b||setTimeout(function(){d(),c(a,b,d,e)},a)}return{setHandlers:b,onSyncNeeded:function(a,b,c){}}}();window.addEventListener("message",function(a){a.origin==window.location.origin&&y(a.data)}),window.IsAndroidChrome=!1;try{navigator.userAgent.toLowerCase().indexOf("android")>-1&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&(window.IsAndroidChrome=!0)}catch($){}var _,aa,ba="screen",ca={send:function(a){function b(a,f){var g={type:"text",uuid:k,sendingTime:l};a&&(f=a,g.packets=parseInt(f.length/h)),f.length>h?g.message=f.slice(0,h):(g.message=f,g.last=!0,g.isobject=j),d.send(g,e),i=f.slice(g.message.length),i.length&&setTimeout(function(){b(null,i)},c.chunkInterval||100)}var c=a.connection,d=a.channel,e=a.remoteUserId,f=a.text,h=c.chunkSize||1e3,i="",j=!1;m(f)||(j=!0,f=JSON.stringify(f));var k=g(),l=(new Date).getTime();b(f)}},da=function(){function a(a){function b(a,b){if(-1!==a.position){var c=+a.position.toFixed(2).split(".")[1]||100;b.innerHTML=c+"%"}}var c={};a.onFileStart=function(b){var d=document.createElement("div");return d.title=b.name,d.innerHTML="<label>0%</label> <progress></progress>",b.remoteUserId&&(d.innerHTML+=" (Sharing with:"+b.remoteUserId+")"),a.filesContainer||(a.filesContainer=document.body||document.documentElement),a.filesContainer.insertBefore(d,a.filesContainer.firstChild),b.remoteUserId?(c[b.uuid]||(c[b.uuid]={}),c[b.uuid][b.remoteUserId]={div:d,progress:d.querySelector("progress"),label:d.querySelector("label")},void(c[b.uuid][b.remoteUserId].progress.max=b.maxChunks)):(c[b.uuid]={div:d,progress:d.querySelector("progress"),label:d.querySelector("label")},void(c[b.uuid].progress.max=b.maxChunks))},a.onFileProgress=function(a){var d=c[a.uuid];d&&(!a.remoteUserId||(d=c[a.uuid][a.remoteUserId]))&&(d.progress.value=a.currentPosition||a.maxChunks||d.progress.max,b(d.progress,d.label))},a.onFileEnd=function(a){var b=c[a.uuid];if(!b)return void console.error("No such progress-helper element exists.",a);if(!a.remoteUserId||(b=c[a.uuid][a.remoteUserId])){var d=b.div;-1!=a.type.indexOf("image")?d.innerHTML='<a href="'+a.url+'" download="'+a.name+'">Download <strong style="color:red;">'+a.name+'</strong> </a><br /><img src="'+a.url+'" title="'+a.name+'" style="max-width: 80%;">':d.innerHTML='<a href="'+a.url+'" download="'+a.name+'">Download <strong style="color:red;">'+a.name+'</strong> </a><br /><iframe src="'+a.url+'" title="'+a.name+'" style="width: 80%;border: 0;height: inherit;margin-top:1em;"></iframe>'}}}return{handle:a}}(),ea=function(){function a(a){a.autoTranslateText=!1,a.language="en",a.googKey="AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE",a.Translator={TranslateText:function(b,c){var d=document.createElement("script");d.type="text/javascript";var e=encodeURIComponent(b),f="method"+a.token();window[f]=function(a){a.data&&a.data.translations[0]&&c&&c(a.data.translations[0].translatedText),a.error&&"Daily Limit Exceeded"===a.error.message&&(warn('Text translation failed. Error message: "Daily Limit Exceeded."'),c(b))};var g="https://www.googleapis.com/language/translate/v2?key="+a.googKey+"&target="+(a.language||"en-US")+"&callback=window."+f+"&q="+e;d.src=g,document.getElementsByTagName("head")[0].appendChild(d)}}}return{handle:a}}();window.RTCMultiConnection=a}(),function(a){if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=500,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var l,o,p,q=this,r=b.type,s=!1,t=function(){n(q,"writestart progress write writeend".split(" "))},u=function(){if((s||!l)&&(l=c().createObjectURL(b)),o)o.location.href=l;else{var d=a.open(l,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=l)}q.readyState=q.DONE,t(),m(l)},v=function(a){return function(){return q.readyState!==q.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};return q.readyState=q.INIT,i||(i="download"),e?(l=c().createObjectURL(b),d.href=l,d.download=i,f(d),q.readyState=q.DONE,t(),void m(l)):(/^\s*(?:text\/(?:plain|xml)|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)&&(b=new Blob(["\ufeff",b],{type:b.type})),a.chrome&&r&&r!==j&&(p=b.slice||b.webkitSlice,b=p.call(b,0,b.size,j),s=!0),g&&"download"!==i&&(i+=".download"),(r===j||g)&&(o=a),h?(k+=b.size,void h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){o.location.href=a.toURL(),q.readyState=q.DONE,n(q,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=q["on"+a]}),c.write(b),q.abort=function(){c.abort(),q.readyState=q.DONE},q.readyState=q.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(){var a=this,b=a.EmojiConvertor,c=function(){var a=this;return a.img_set="apple",a.img_sets={apple:{path:"/emoji-data/img-apple-64/",sheet:"/emoji-data/sheet_apple_64.png",mask:1},google:{path:"/emoji-data/img-google-64/",sheet:"/emoji-data/sheet_google_64.png",mask:2},twitter:{path:"/emoji-data/img-twitter-64/",sheet:"/emoji-data/sheet_twitter_64.png",mask:4},emojione:{path:"/emoji-data/img-emojione-64/",sheet:"/emoji-data/sheet_emojione_64.png",mask:8},facebook:{path:"/emoji-data/img-facebook-64/",sheet:"/emoji-data/sheet_facebook_64.png",mask:16},messenger:{path:"/emoji-data/img-messenger-64/",sheet:"/emoji-data/sheet_messenger_64.png",mask:32}},a.use_css_imgs=!1,a.colons_mode=!1,a.text_mode=!1,a.include_title=!1,a.include_text=!1,a.allow_native=!0,a.use_sheet=!1,a.avoid_ms_emoji=!0,a.allow_caps=!1,a.img_suffix="",a.inits={},a.map={},a.init_env(),a};c.prototype.noConflict=function(){return a.EmojiConvertor=b,c},c.prototype.replace_emoticons=function(a){var b=this,c=b.replace_emoticons_with_colons(a);return b.replace_colons(c)},c.prototype.replace_emoticons_with_colons=function(a){var b=this;b.init_emoticons();var c=0,d=[],e=a.replace(b.rx_emoticons,function(e,f,g,h){var i=c;c=h+e.length;var j=-1!==g.indexOf("("),k=-1!==g.indexOf(")");if((j||k)&&-1==d.indexOf(g)&&d.push(g),k&&!j){var l=a.substring(i,h);if(-1!==l.indexOf("(")&&-1===l.indexOf(")"))return e}if("\n8)"===e){var m=a.substring(0,h);if(/\n?(6\)|7\))/.test(m))return e}var n=b.data[b.map.emoticons[g]][3][0];return n?f+":"+n+":":e});if(d.length){var f=d.map(b.escape_rx),g=new RegExp("(\\(.+)("+f.join("|")+")(.+\\))","g");e=e.replace(g,function(a,c,d,e){var f=b.data[b.map.emoticons[d]][3][0];return f?c+":"+f+":"+e:a})}return e},c.prototype.replace_colons=function(a){var b=this;return b.init_colons(),a.replace(b.rx_colons,function(a){var c=a.substr(1,a.length-2);if(b.allow_caps&&(c=c.toLowerCase()),c.indexOf("::skin-tone-")>-1){var d=c.substr(-1,1),e="skin-tone-"+d,f=b.map.colons[e];c=c.substr(0,c.length-13);var g=b.map.colons[c];return g?b.replacement(g,c,":",{idx:f,actual:e,wrapper:":"}):":"+c+":"+b.replacement(f,e,":")}var g=b.map.colons[c];return g?b.replacement(g,c,":"):a})},c.prototype.replace_unified=function(a){var b=this;return b.init_unified(),a.replace(b.rx_unified,function(a,c,d){var e=b.map.unified[c];if(!e)return a;var f=null;return""==d&&(f="1f3fb"),""==d&&(f="1f3fc"),""==d&&(f="1f3fd"),""==d&&(f="1f3fe"),""==d&&(f="1f3ff"),f?b.replacement(e,null,null,{idx:f,actual:d,wrapper:""}):b.replacement(e)})},c.prototype.addAliases=function(a){var b=this;b.init_colons();for(var c in a)b.map.colons[c]=a[c]},c.prototype.removeAliases=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c];delete b.map.colons[d];a:for(var e in b.data)for(var f=0;f<b.data[e][3].length;f++)if(d==b.data[e][3][f]){b.map.colons[d]=e;break a}}},c.prototype.replacement=function(a,b,c,d){var e=this,f=a,g="",h=0;"object"==typeof d&&(g=e.replacement(d.idx,d.actual,d.wrapper),h=a+"-"+d.idx);var i=e.img_set;if(e.use_sheet&&e.supports_css||e.data[a][6]&e.img_sets[e.img_set].mask||(i="apple"),c=c||"",e.colons_mode)return":"+e.data[a][3][0]+":"+g;var j=b?c+b+c:e.data[a][8]||c+e.data[a][3][0]+c;if(e.text_mode)return j+g;if(e.init_env(),"unified"==e.replace_mode&&e.allow_native&&e.data[a][0][0])return e.data[a][0][0]+g;if("softbank"==e.replace_mode&&e.allow_native&&e.data[a][1])return e.data[a][1]+g;if("google"==e.replace_mode&&e.allow_native&&e.data[a][2])return e.data[a][2]+g;var k=e.data[a][7]||e.img_sets[i].path+a+".png"+e.img_suffix,l=e.include_title?' title="'+(b||e.data[a][3][0])+'"':"",m=e.include_text?c+(b||e.data[a][3][0])+c:"",n=e.data[a][4],o=e.data[a][5];if(h&&e.variations_data[h]&&e.variations_data[h][2]&&!e.data[a][7]&&e.variations_data[h][2]&e.img_sets[e.img_set].mask&&(k=e.img_sets[e.img_set].path+h+".png",n=e.variations_data[h][0],o=e.variations_data[h][1],g="",f=h,e.include_text&&d&&d.actual&&d.wrapper&&(m+=d.wrapper+d.actual+d.wrapper)),e.supports_css){if(e.use_sheet&&null!=n&&null!=o){var p=100/(e.sheet_size-1),q="background: url("+e.img_sets[i].sheet+");background-position:"+p*n+"% "+p*o+"%;background-size:"+e.sheet_size+"00%";return'<span class="emoji-outer emoji-sizer"><span class="emoji-inner" style="'+q+'"'+l+' data-codepoints="'+f+'">'+m+"</span></span>"+g}return e.use_css_imgs?'<span class="emoji emoji-'+a+'"'+l+' data-codepoints="'+f+'">'+m+"</span>"+g:'<span class="emoji emoji-sizer" style="background-image:url('+k+')"'+l+' data-codepoints="'+f+'">'+m+"</span>"+g}return'<img src="'+k+'" class="emoji" data-codepoints="'+f+'" '+l+"/>"+g},c.prototype.init_emoticons=function(){var a=this;if(!a.inits.emoticons){a.init_colons(),a.inits.emoticons=1;var b=[];a.map.emoticons={};for(var c in a.emoticons_data){var d=c.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;");a.map.colons[a.emoticons_data[c]]&&(a.map.emoticons[d]=a.map.colons[a.emoticons_data[c]],b.push(a.escape_rx(d)))}a.rx_emoticons=new RegExp("(^|\\s)("+b.join("|")+")(?=$|[\\s|\\?\\.,!])","g")}},c.prototype.init_colons=function(){var a=this;if(!a.inits.colons){a.inits.colons=1,a.rx_colons=new RegExp(":[a-zA-Z0-9-_+]+:(:skin-tone-[2-6]:)?","g"),a.map.colons={};for(var b in a.data)for(var c=0;c<a.data[b][3].length;c++)a.map.colons[a.data[b][3][c]]=b}},c.prototype.init_unified=function(){var a=this;if(!a.inits.unified){a.inits.unified=1;var b=[];a.map.unified={};for(var c in a.data)for(var d=0;d<a.data[c][0].length;d++)b.push(a.data[c][0][d].replace("*","\\*")),a.map.unified[a.data[c][0][d]]=c;b=b.sort(function(a,b){return b.length-a.length}),a.rx_unified=new RegExp("("+b.join("|")+")([-])?","g")}},c.prototype.init_env=function(){var a=this;if(!a.inits.env){if(a.inits.env=1,a.replace_mode="img",a.supports_css=!1,"undefined"!=typeof navigator){var b=navigator.userAgent;if(window.getComputedStyle)try{var c=window.getComputedStyle(document.body);(c["background-size"]||c.backgroundSize)&&(a.supports_css=!0)}catch(d){b.match(/Firefox/i)&&(a.supports_css=!0)}if(b.match(/(iPhone|iPod|iPad|iPhone\s+Simulator)/i)){if(b.match(/OS\s+[12345]/i))return void(a.replace_mode="softbank");if(b.match(/OS\s+[6789]/i))return void(a.replace_mode="unified")}if(b.match(/Mac OS X 10[._ ](?:[789]|1\d)/i))return void(a.replace_mode="unified");if(!a.avoid_ms_emoji&&(b.match(/Windows NT 6.[1-9]/i)||b.match(/Windows NT 10.[0-9]/i))&&!b.match(/Chrome/i)&&!b.match(/MSIE 8/i))return void(a.replace_mode="unified")}a.supports_css&&(a.replace_mode="css")}},c.prototype.escape_rx=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},c.prototype.sheet_size=41,c.prototype.data={"00a9":[["",""],"","",["copyright"],0,0,11,0],"00ae":[["",""],"","",["registered"],0,1,11,0],"203c":[["",""],"","",["bangbang"],0,2,15,0],2049:[["",""],"","",["interrobang"],0,3,15,0],2122:[["",""],"","",["tm"],0,4,11,0],2139:[["",""],"","",["information_source"],0,5,15,0],2194:[["",""],"","",["left_right_arrow"],0,6,15,0],2195:[["",""],"","",["arrow_up_down"],0,7,15,0],2196:[["",""],"","",["arrow_upper_left"],0,8,15,0],2197:[["",""],"","",["arrow_upper_right"],0,9,15,0],2198:[["",""],"","",["arrow_lower_right"],0,10,15,0],2199:[["",""],"","",["arrow_lower_left"],0,11,15,0],"21a9":[["",""],"","",["leftwards_arrow_with_hook"],0,12,15,0],"21aa":[["",""],"","",["arrow_right_hook"],0,13,15,0],"231a":[["",""],"","",["watch"],0,14,15,0],"231b":[["",""],"","",["hourglass"],0,15,15,0],2328:[["",""],"","",["keyboard"],0,16,15,0],"23cf":[[""],"","",["eject"],0,17,2,0],"23e9":[[""],"","",["fast_forward"],0,18,15,0],"23ea":[[""],"","",["rewind"],0,19,15,0],"23eb":[[""],"","",["arrow_double_up"],0,20,15,0],"23ec":[[""],"","",["arrow_double_down"],0,21,15,0],"23ed":[[""],"","",["black_right_pointing_double_triangle_with_vertical_bar"],0,22,15,0],"23ee":[[""],"","",["black_left_pointing_double_triangle_with_vertical_bar"],0,23,15,0],"23ef":[[""],"","",["black_right_pointing_triangle_with_double_vertical_bar"],0,24,15,0],"23f0":[[""],"","",["alarm_clock"],0,25,15,0],"23f1":[[""],"","",["stopwatch"],0,26,15,0],"23f2":[[""],"","",["timer_clock"],0,27,15,0],"23f3":[[""],"","",["hourglass_flowing_sand"],0,28,15,0],"23f8":[[""],"","",["double_vertical_bar"],0,29,15,0],"23f9":[[""],"","",["black_square_for_stop"],0,30,15,0],"23fa":[[""],"","",["black_circle_for_record"],0,31,15,0],"24c2":[["",""],"","",["m"],0,32,15,0],"25aa":[["",""],"","",["black_small_square"],0,33,15,0],"25ab":[["",""],"","",["white_small_square"],0,34,15,0],"25b6":[["",""],"","",["arrow_forward"],0,35,15,0],"25c0":[["",""],"","",["arrow_backward"],0,36,15,0],"25fb":[["",""],"","",["white_medium_square"],0,37,15,0],"25fc":[["",""],"","",["black_medium_square"],0,38,15,0],"25fd":[["",""],"","",["white_medium_small_square"],0,39,15,0],"25fe":[["",""],"","",["black_medium_small_square"],0,40,15,0],2600:[["",""],"","",["sunny"],1,0,15,0],2601:[["",""],"","",["cloud"],1,1,15,0],2602:[["",""],"","",["umbrella"],1,2,15,0],2603:[["",""],"","",["snowman"],1,3,15,0],2604:[["",""],"","",["comet"],1,4,15,0],"260e":[["",""],"","",["phone","telephone"],1,5,15,0],2611:[["",""],"","",["ballot_box_with_check"],1,6,15,0],2614:[["",""],"","",["umbrella_with_rain_drops"],1,7,15,0],2615:[["",""],"","",["coffee"],1,8,15,0],2618:[[""],"","",["shamrock"],1,9,15,0],"261d":[["",""],"","",["point_up"],1,10,15,0],2620:[["",""],"","",["skull_and_crossbones"],1,16,15,0],2622:[["",""],"","",["radioactive_sign"],1,17,15,0],2623:[["",""],"","",["biohazard_sign"],1,18,15,0],2626:[["",""],"","",["orthodox_cross"],1,19,15,0],"262a":[["",""],"","",["star_and_crescent"],1,20,15,0],"262e":[["",""],"","",["peace_symbol"],1,21,15,0],"262f":[["",""],"","",["yin_yang"],1,22,15,0],2638:[["",""],"","",["wheel_of_dharma"],1,23,15,0],2639:[["",""],"","",["white_frowning_face"],1,24,15,0],"263a":[["",""],"","",["relaxed"],1,25,15,0],2648:[["",""],"","",["aries"],1,26,15,0],2649:[["",""],"","",["taurus"],1,27,15,0],"264a":[["",""],"","",["gemini"],1,28,15,0],"264b":[["",""],"","",["cancer"],1,29,15,0],"264c":[["",""],"","",["leo"],1,30,15,0],"264d":[["",""],"","",["virgo"],1,31,15,0],"264e":[["",""],"","",["libra"],1,32,15,0],"264f":[["",""],"","",["scorpius"],1,33,15,0],2650:[["",""],"","",["sagittarius"],1,34,15,0],2651:[["",""],"","",["capricorn"],1,35,15,0],2652:[["",""],"","",["aquarius"],1,36,15,0],2653:[["",""],"","",["pisces"],1,37,15,0],2660:[["",""],"","",["spades"],1,38,15,0],2663:[["",""],"","",["clubs"],1,39,15,0],2665:[["",""],"","",["hearts"],1,40,15,0],2666:[["",""],"","",["diamonds"],2,0,15,0],2668:[["",""],"","",["hotsprings"],2,1,15,0],"267b":[["",""],"","",["recycle"],2,2,15,0],"267f":[["",""],"","",["wheelchair"],2,3,15,0],2692:[[""],"","",["hammer_and_pick"],2,4,15,0],2693:[["",""],"","",["anchor"],2,5,15,0],2694:[[""],"","",["crossed_swords"],2,6,15,0],2696:[[""],"","",["scales"],2,7,15,0],2697:[[""],"","",["alembic"],2,8,15,0],2699:[[""],"","",["gear"],2,9,15,0],"269b":[[""],"","",["atom_symbol"],2,10,15,0],"269c":[[""],"","",["fleur_de_lis"],2,11,15,0],"26a0":[["",""],"","",["warning"],2,12,15,0],"26a1":[["",""],"","",["zap"],2,13,15,0],"26aa":[["",""],"","",["white_circle"],2,14,15,0],"26ab":[["",""],"","",["black_circle"],2,15,15,0],"26b0":[[""],"","",["coffin"],2,16,15,0],"26b1":[[""],"","",["funeral_urn"],2,17,15,0],"26bd":[["",""],"","",["soccer"],2,18,15,0],"26be":[["",""],"","",["baseball"],2,19,15,0],"26c4":[["",""],"","",["snowman_without_snow"],2,20,15,0],"26c5":[["",""],"","",["partly_sunny"],2,21,15,0],"26c8":[[""],"","",["thunder_cloud_and_rain"],2,22,15,0],"26ce":[[""],"","",["ophiuchus"],2,23,15,0],"26cf":[[""],"","",["pick"],2,24,15,0],"26d1":[[""],"","",["helmet_with_white_cross"],2,25,15,0],"26d3":[[""],"","",["chains"],2,26,15,0],"26d4":[["",""],"","",["no_entry"],2,27,15,0],"26e9":[[""],"","",["shinto_shrine"],2,28,15,0],"26ea":[["",""],"","",["church"],2,29,15,0],"26f0":[[""],"","",["mountain"],2,30,15,0],"26f1":[[""],"","",["umbrella_on_ground"],2,31,15,0],"26f2":[["",""],"","",["fountain"],2,32,15,0],"26f3":[["",""],"","",["golf"],2,33,15,0],"26f4":[[""],"","",["ferry"],2,34,15,0],"26f5":[["",""],"","",["boat","sailboat"],2,35,15,0],"26f7":[[""],"","",["skier"],2,36,15,0],"26f8":[[""],"","",["ice_skate"],2,37,15,0],"26f9":[[""],"","",["person_with_ball"],2,38,15,0],"26fa":[["",""],"","",["tent"],3,3,15,0],"26fd":[["",""],"","",["fuelpump"],3,4,15,0],2702:[["",""],"","",["scissors"],3,5,15,0],2705:[[""],"","",["white_check_mark"],3,6,15,0],2708:[["",""],"","",["airplane"],3,7,15,0],2709:[["",""],"","",["email","envelope"],3,8,15,0],"270a":[[""],"","",["fist"],3,9,15,0],"270b":[[""],"","",["hand","raised_hand"],3,15,15,0],"270c":[["",""],"","",["v"],3,21,15,0],"270d":[["",""],"","",["writing_hand"],3,27,15,0],"270f":[["",""],"","",["pencil2"],3,33,15,0],2712:[["",""],"","",["black_nib"],3,34,15,0],2714:[["",""],"","",["heavy_check_mark"],3,35,15,0],2716:[["",""],"","",["heavy_multiplication_x"],3,36,15,0],"271d":[["",""],"","",["latin_cross"],3,37,15,0],2721:[["",""],"","",["star_of_david"],3,38,15,0],2728:[[""],"","",["sparkles"],3,39,15,0],2733:[["",""],"","",["eight_spoked_asterisk"],3,40,15,0],2734:[["",""],"","",["eight_pointed_black_star"],4,0,15,0],2744:[["",""],"","",["snowflake"],4,1,15,0],2747:[["",""],"","",["sparkle"],4,2,15,0],"274c":[[""],"","",["x"],4,3,15,0],"274e":[[""],"","",["negative_squared_cross_mark"],4,4,15,0],2753:[[""],"","",["question"],4,5,15,0],2754:[[""],"","",["grey_question"],4,6,15,0],2755:[[""],"","",["grey_exclamation"],4,7,15,0],2757:[["",""],"","",["exclamation","heavy_exclamation_mark"],4,8,15,0],2763:[["",""],"","",["heavy_heart_exclamation_mark_ornament"],4,9,15,0],2764:[["",""],"","",["heart"],4,10,15,0,"<3"],2795:[[""],"","",["heavy_plus_sign"],4,11,15,0],2796:[[""],"","",["heavy_minus_sign"],4,12,15,0],2797:[[""],"","",["heavy_division_sign"],4,13,15,0],"27a1":[["",""],"","",["arrow_right"],4,14,15,0],"27b0":[[""],"","",["curly_loop"],4,15,15,0],"27bf":[[""],"","",["loop"],4,16,15,0],2934:[["",""],"","",["arrow_heading_up"],4,17,15,0],2935:[["",""],"","",["arrow_heading_down"],4,18,15,0],"2b05":[["",""],"","",["arrow_left"],4,19,15,0],"2b06":[["",""],"","",["arrow_up"],4,20,15,0],"2b07":[["",""],"","",["arrow_down"],4,21,15,0],"2b1b":[["",""],"","",["black_large_square"],4,22,15,0],"2b1c":[["",""],"","",["white_large_square"],4,23,15,0],"2b50":[["",""],"","",["star"],4,24,15,0],"2b55":[["",""],"","",["o"],4,25,15,0],3030:[["",""],"","",["wavy_dash"],4,26,15,0],"303d":[["",""],"","",["part_alternation_mark"],4,27,15,0],3297:[["",""],"","",["congratulations"],4,28,15,0],3299:[["",""],"","",["secret"],4,29,15,0],"1f004":[["",""],"","",["mahjong"],4,30,15,0],"1f0cf":[[""],"","",["black_joker"],4,31,15,0],"1f170":[["",""],"","",["a"],4,32,15,0],"1f171":[["",""],"","",["b"],4,33,15,0],"1f17e":[["",""],"","",["o2"],4,34,15,0],"1f17f":[["",""],"","",["parking"],4,35,15,0],"1f18e":[[""],"","",["ab"],4,36,15,0],"1f191":[[""],"","",["cl"],4,37,15,0],"1f192":[[""],"","",["cool"],4,38,15,0],"1f193":[[""],"","",["free"],4,39,15,0],"1f194":[[""],"","",["id"],4,40,15,0],"1f195":[[""],"","",["new"],5,0,15,0],"1f196":[[""],"","",["ng"],5,1,15,0],"1f197":[[""],"","",["ok"],5,2,15,0],"1f198":[[""],"","",["sos"],5,3,15,0],"1f199":[[""],"","",["up"],5,4,15,0],"1f19a":[[""],"","",["vs"],5,5,15,0],"1f201":[[""],"","",["koko"],5,6,15,0],"1f202":[["",""],"","",["sa"],5,7,15,0],"1f21a":[["",""],"","",["u7121"],5,8,15,0],"1f22f":[["",""],"","",["u6307"],5,9,15,0],"1f232":[[""],"","",["u7981"],5,10,15,0],"1f233":[[""],"","",["u7a7a"],5,11,15,0],"1f234":[[""],"","",["u5408"],5,12,15,0],"1f235":[[""],"","",["u6e80"],5,13,15,0],"1f236":[[""],"","",["u6709"],5,14,15,0],"1f237":[["",""],"","",["u6708"],5,15,15,0],"1f238":[[""],"","",["u7533"],5,16,15,0],"1f239":[[""],"","",["u5272"],5,17,15,0],"1f23a":[[""],"","",["u55b6"],5,18,15,0],"1f250":[[""],"","",["ideograph_advantage"],5,19,15,0],"1f251":[[""],"","",["accept"],5,20,15,0],"1f300":[[""],"","",["cyclone"],5,21,15,0],"1f301":[[""],"","",["foggy"],5,22,15,0],"1f302":[[""],"","",["closed_umbrella"],5,23,15,0],"1f303":[[""],"","",["night_with_stars"],5,24,15,0],"1f304":[[""],"","",["sunrise_over_mountains"],5,25,15,0],"1f305":[[""],"","",["sunrise"],5,26,15,0],"1f306":[[""],"","",["city_sunset"],5,27,15,0],"1f307":[[""],"","",["city_sunrise"],5,28,15,0],"1f308":[[""],"","",["rainbow"],5,29,15,0],"1f309":[[""],"","",["bridge_at_night"],5,30,15,0],"1f30a":[[""],"","",["ocean"],5,31,15,0],"1f30b":[[""],"","",["volcano"],5,32,15,0],"1f30c":[[""],"","",["milky_way"],5,33,15,0],"1f30d":[[""],"","",["earth_africa"],5,34,15,0],"1f30e":[[""],"","",["earth_americas"],5,35,15,0],"1f30f":[[""],"","",["earth_asia"],5,36,15,0],"1f310":[[""],"","",["globe_with_meridians"],5,37,15,0],"1f311":[[""],"","",["new_moon"],5,38,15,0],"1f312":[[""],"","",["waxing_crescent_moon"],5,39,15,0],"1f313":[[""],"","",["first_quarter_moon"],5,40,15,0],"1f314":[[""],"","",["moon","waxing_gibbous_moon"],6,0,15,0],"1f315":[[""],"","",["full_moon"],6,1,15,0],"1f316":[[""],"","",["waning_gibbous_moon"],6,2,15,0],"1f317":[[""],"","",["last_quarter_moon"],6,3,15,0],"1f318":[[""],"","",["waning_crescent_moon"],6,4,15,0],"1f319":[[""],"","",["crescent_moon"],6,5,15,0],"1f31a":[[""],"","",["new_moon_with_face"],6,6,15,0],"1f31b":[[""],"","",["first_quarter_moon_with_face"],6,7,15,0],"1f31c":[[""],"","",["last_quarter_moon_with_face"],6,8,15,0],"1f31d":[[""],"","",["full_moon_with_face"],6,9,15,0],"1f31e":[[""],"","",["sun_with_face"],6,10,15,0],"1f31f":[[""],"","",["star2"],6,11,15,0],"1f320":[[""],"","",["stars"],6,12,15,0],"1f321":[[""],"","",["thermometer"],6,13,15,0],"1f324":[[""],"","",["mostly_sunny","sun_small_cloud"],6,14,15,0],"1f325":[[""],"","",["barely_sunny","sun_behind_cloud"],6,15,15,0],"1f326":[[""],"","",["partly_sunny_rain","sun_behind_rain_cloud"],6,16,15,0],"1f327":[[""],"","",["rain_cloud"],6,17,15,0],"1f328":[[""],"","",["snow_cloud"],6,18,15,0],"1f329":[[""],"","",["lightning","lightning_cloud"],6,19,15,0],"1f32a":[[""],"","",["tornado","tornado_cloud"],6,20,15,0],"1f32b":[[""],"","",["fog"],6,21,15,0],"1f32c":[[""],"","",["wind_blowing_face"],6,22,15,0],"1f32d":[[""],"","",["hotdog"],6,23,15,0],"1f32e":[[""],"","",["taco"],6,24,15,0],"1f32f":[[""],"","",["burrito"],6,25,15,0],"1f330":[[""],"","",["chestnut"],6,26,15,0],"1f331":[[""],"","",["seedling"],6,27,15,0],"1f332":[[""],"","",["evergreen_tree"],6,28,15,0],"1f333":[[""],"","",["deciduous_tree"],6,29,15,0],"1f334":[[""],"","",["palm_tree"],6,30,15,0],"1f335":[[""],"","",["cactus"],6,31,15,0],"1f336":[[""],"","",["hot_pepper"],6,32,15,0],"1f337":[[""],"","",["tulip"],6,33,15,0],"1f338":[[""],"","",["cherry_blossom"],6,34,15,0],"1f339":[[""],"","",["rose"],6,35,15,0],"1f33a":[[""],"","",["hibiscus"],6,36,15,0],"1f33b":[[""],"","",["sunflower"],6,37,15,0],"1f33c":[[""],"","",["blossom"],6,38,15,0],"1f33d":[[""],"","",["corn"],6,39,15,0],"1f33e":[[""],"","",["ear_of_rice"],6,40,15,0],"1f33f":[[""],"","",["herb"],7,0,15,0],"1f340":[[""],"","",["four_leaf_clover"],7,1,15,0],"1f341":[[""],"","",["maple_leaf"],7,2,15,0],"1f342":[[""],"","",["fallen_leaf"],7,3,15,0],"1f343":[[""],"","",["leaves"],7,4,15,0],"1f344":[[""],"","",["mushroom"],7,5,15,0],"1f345":[[""],"","",["tomato"],7,6,15,0],"1f346":[[""],"","",["eggplant"],7,7,15,0],"1f347":[[""],"","",["grapes"],7,8,15,0],"1f348":[[""],"","",["melon"],7,9,15,0],"1f349":[[""],"","",["watermelon"],7,10,15,0],"1f34a":[[""],"","",["tangerine"],7,11,15,0],"1f34b":[[""],"","",["lemon"],7,12,15,0],"1f34c":[[""],"","",["banana"],7,13,15,0],"1f34d":[[""],"","",["pineapple"],7,14,15,0],"1f34e":[[""],"","",["apple"],7,15,15,0],"1f34f":[[""],"","",["green_apple"],7,16,15,0],"1f350":[[""],"","",["pear"],7,17,15,0],"1f351":[[""],"","",["peach"],7,18,15,0],"1f352":[[""],"","",["cherries"],7,19,15,0],"1f353":[[""],"","",["strawberry"],7,20,15,0],"1f354":[[""],"","",["hamburger"],7,21,15,0],"1f355":[[""],"","",["pizza"],7,22,15,0],"1f356":[[""],"","",["meat_on_bone"],7,23,15,0],"1f357":[[""],"","",["poultry_leg"],7,24,15,0],"1f358":[[""],"","",["rice_cracker"],7,25,15,0],"1f359":[[""],"","",["rice_ball"],7,26,15,0],"1f35a":[[""],"","",["rice"],7,27,15,0],"1f35b":[[""],"","",["curry"],7,28,15,0],"1f35c":[[""],"","",["ramen"],7,29,15,0],"1f35d":[[""],"","",["spaghetti"],7,30,15,0],"1f35e":[[""],"","",["bread"],7,31,15,0],"1f35f":[[""],"","",["fries"],7,32,15,0],"1f360":[[""],"","",["sweet_potato"],7,33,15,0],"1f361":[[""],"","",["dango"],7,34,15,0],"1f362":[[""],"","",["oden"],7,35,15,0],"1f363":[[""],"","",["sushi"],7,36,15,0],"1f364":[[""],"","",["fried_shrimp"],7,37,15,0],"1f365":[[""],"","",["fish_cake"],7,38,15,0],"1f366":[[""],"","",["icecream"],7,39,15,0],"1f367":[[""],"","",["shaved_ice"],7,40,15,0],"1f368":[[""],"","",["ice_cream"],8,0,15,0],"1f369":[[""],"","",["doughnut"],8,1,15,0],"1f36a":[[""],"","",["cookie"],8,2,15,0],"1f36b":[[""],"","",["chocolate_bar"],8,3,15,0],"1f36c":[[""],"","",["candy"],8,4,15,0],"1f36d":[[""],"","",["lollipop"],8,5,15,0],"1f36e":[[""],"","",["custard"],8,6,15,0],"1f36f":[[""],"","",["honey_pot"],8,7,15,0],"1f370":[[""],"","",["cake"],8,8,15,0],"1f371":[[""],"","",["bento"],8,9,15,0],"1f372":[[""],"","",["stew"],8,10,15,0],"1f373":[[""],"","",["egg"],8,11,15,0],"1f374":[[""],"","",["fork_and_knife"],8,12,15,0],"1f375":[[""],"","",["tea"],8,13,15,0],"1f376":[[""],"","",["sake"],8,14,15,0],"1f377":[[""],"","",["wine_glass"],8,15,15,0],"1f378":[[""],"","",["cocktail"],8,16,15,0],"1f379":[[""],"","",["tropical_drink"],8,17,15,0],"1f37a":[[""],"","",["beer"],8,18,15,0],"1f37b":[[""],"","",["beers"],8,19,15,0],"1f37c":[[""],"","",["baby_bottle"],8,20,15,0],"1f37d":[[""],"","",["knife_fork_plate"],8,21,15,0],"1f37e":[[""],"","",["champagne"],8,22,15,0],"1f37f":[[""],"","",["popcorn"],8,23,15,0],"1f380":[[""],"","",["ribbon"],8,24,15,0],
"1f381":[[""],"","",["gift"],8,25,15,0],"1f382":[[""],"","",["birthday"],8,26,15,0],"1f383":[[""],"","",["jack_o_lantern"],8,27,15,0],"1f384":[[""],"","",["christmas_tree"],8,28,15,0],"1f385":[[""],"","",["santa"],8,29,15,0],"1f386":[[""],"","",["fireworks"],8,35,15,0],"1f387":[[""],"","",["sparkler"],8,36,15,0],"1f388":[[""],"","",["balloon"],8,37,15,0],"1f389":[[""],"","",["tada"],8,38,15,0],"1f38a":[[""],"","",["confetti_ball"],8,39,15,0],"1f38b":[[""],"","",["tanabata_tree"],8,40,15,0],"1f38c":[[""],"","",["crossed_flags"],9,0,15,0],"1f38d":[[""],"","",["bamboo"],9,1,15,0],"1f38e":[[""],"","",["dolls"],9,2,15,0],"1f38f":[[""],"","",["flags"],9,3,15,0],"1f390":[[""],"","",["wind_chime"],9,4,15,0],"1f391":[[""],"","",["rice_scene"],9,5,15,0],"1f392":[[""],"","",["school_satchel"],9,6,15,0],"1f393":[[""],"","",["mortar_board"],9,7,15,0],"1f396":[[""],"","",["medal"],9,8,15,0],"1f397":[[""],"","",["reminder_ribbon"],9,9,15,0],"1f399":[[""],"","",["studio_microphone"],9,10,15,0],"1f39a":[[""],"","",["level_slider"],9,11,15,0],"1f39b":[[""],"","",["control_knobs"],9,12,15,0],"1f39e":[[""],"","",["film_frames"],9,13,15,0],"1f39f":[[""],"","",["admission_tickets"],9,14,15,0],"1f3a0":[[""],"","",["carousel_horse"],9,15,15,0],"1f3a1":[[""],"","",["ferris_wheel"],9,16,15,0],"1f3a2":[[""],"","",["roller_coaster"],9,17,15,0],"1f3a3":[[""],"","",["fishing_pole_and_fish"],9,18,15,0],"1f3a4":[[""],"","",["microphone"],9,19,15,0],"1f3a5":[[""],"","",["movie_camera"],9,20,15,0],"1f3a6":[[""],"","",["cinema"],9,21,15,0],"1f3a7":[[""],"","",["headphones"],9,22,15,0],"1f3a8":[[""],"","",["art"],9,23,15,0],"1f3a9":[[""],"","",["tophat"],9,24,15,0],"1f3aa":[[""],"","",["circus_tent"],9,25,15,0],"1f3ab":[[""],"","",["ticket"],9,26,15,0],"1f3ac":[[""],"","",["clapper"],9,27,15,0],"1f3ad":[[""],"","",["performing_arts"],9,28,15,0],"1f3ae":[[""],"","",["video_game"],9,29,15,0],"1f3af":[[""],"","",["dart"],9,30,15,0],"1f3b0":[[""],"","",["slot_machine"],9,31,15,0],"1f3b1":[[""],"","",["8ball"],9,32,15,0],"1f3b2":[[""],"","",["game_die"],9,33,15,0],"1f3b3":[[""],"","",["bowling"],9,34,15,0],"1f3b4":[[""],"","",["flower_playing_cards"],9,35,15,0],"1f3b5":[[""],"","",["musical_note"],9,36,15,0],"1f3b6":[[""],"","",["notes"],9,37,15,0],"1f3b7":[[""],"","",["saxophone"],9,38,15,0],"1f3b8":[[""],"","",["guitar"],9,39,15,0],"1f3b9":[[""],"","",["musical_keyboard"],9,40,15,0],"1f3ba":[[""],"","",["trumpet"],10,0,15,0],"1f3bb":[[""],"","",["violin"],10,1,15,0],"1f3bc":[[""],"","",["musical_score"],10,2,15,0],"1f3bd":[[""],"","",["running_shirt_with_sash"],10,3,15,0],"1f3be":[[""],"","",["tennis"],10,4,15,0],"1f3bf":[[""],"","",["ski"],10,5,15,0],"1f3c0":[[""],"","",["basketball"],10,6,15,0],"1f3c1":[[""],"","",["checkered_flag"],10,7,15,0],"1f3c2":[[""],"","",["snowboarder"],10,8,15,0],"1f3c3":[[""],"","",["runner","running"],10,9,15,0],"1f3c4":[[""],"","",["surfer"],10,15,15,0],"1f3c5":[[""],"","",["sports_medal"],10,21,15,0],"1f3c6":[[""],"","",["trophy"],10,22,15,0],"1f3c7":[[""],"","",["horse_racing"],10,23,15,0],"1f3c8":[[""],"","",["football"],10,24,15,0],"1f3c9":[[""],"","",["rugby_football"],10,25,15,0],"1f3ca":[[""],"","",["swimmer"],10,26,15,0],"1f3cb":[[""],"","",["weight_lifter"],10,32,15,0],"1f3cc":[[""],"","",["golfer"],10,38,15,0],"1f3cd":[[""],"","",["racing_motorcycle"],10,39,15,0],"1f3ce":[[""],"","",["racing_car"],10,40,15,0],"1f3cf":[[""],"","",["cricket_bat_and_ball"],11,0,15,0],"1f3d0":[[""],"","",["volleyball"],11,1,15,0],"1f3d1":[[""],"","",["field_hockey_stick_and_ball"],11,2,15,0],"1f3d2":[[""],"","",["ice_hockey_stick_and_puck"],11,3,15,0],"1f3d3":[[""],"","",["table_tennis_paddle_and_ball"],11,4,15,0],"1f3d4":[[""],"","",["snow_capped_mountain"],11,5,15,0],"1f3d5":[[""],"","",["camping"],11,6,15,0],"1f3d6":[[""],"","",["beach_with_umbrella"],11,7,15,0],"1f3d7":[[""],"","",["building_construction"],11,8,15,0],"1f3d8":[[""],"","",["house_buildings"],11,9,15,0],"1f3d9":[[""],"","",["cityscape"],11,10,15,0],"1f3da":[[""],"","",["derelict_house_building"],11,11,15,0],"1f3db":[[""],"","",["classical_building"],11,12,15,0],"1f3dc":[[""],"","",["desert"],11,13,15,0],"1f3dd":[[""],"","",["desert_island"],11,14,15,0],"1f3de":[[""],"","",["national_park"],11,15,15,0],"1f3df":[[""],"","",["stadium"],11,16,15,0],"1f3e0":[[""],"","",["house"],11,17,15,0],"1f3e1":[[""],"","",["house_with_garden"],11,18,15,0],"1f3e2":[[""],"","",["office"],11,19,15,0],"1f3e3":[[""],"","",["post_office"],11,20,15,0],"1f3e4":[[""],"","",["european_post_office"],11,21,15,0],"1f3e5":[[""],"","",["hospital"],11,22,15,0],"1f3e6":[[""],"","",["bank"],11,23,15,0],"1f3e7":[[""],"","",["atm"],11,24,15,0],"1f3e8":[[""],"","",["hotel"],11,25,15,0],"1f3e9":[[""],"","",["love_hotel"],11,26,15,0],"1f3ea":[[""],"","",["convenience_store"],11,27,15,0],"1f3eb":[[""],"","",["school"],11,28,15,0],"1f3ec":[[""],"","",["department_store"],11,29,15,0],"1f3ed":[[""],"","",["factory"],11,30,15,0],"1f3ee":[[""],"","",["izakaya_lantern","lantern"],11,31,15,0],"1f3ef":[[""],"","",["japanese_castle"],11,32,15,0],"1f3f0":[[""],"","",["european_castle"],11,33,15,0],"1f3f3":[[""],"","",["waving_white_flag"],11,34,15,0],"1f3f4":[[""],"","",["waving_black_flag"],11,35,15,0],"1f3f5":[[""],"","",["rosette"],11,36,15,0],"1f3f7":[[""],"","",["label"],11,37,15,0],"1f3f8":[[""],"","",["badminton_racquet_and_shuttlecock"],11,38,15,0],"1f3f9":[[""],"","",["bow_and_arrow"],11,39,15,0],"1f3fa":[[""],"","",["amphora"],11,40,15,0],"1f3fb":[[""],"","",["skin-tone-2"],12,0,15,0],"1f3fc":[[""],"","",["skin-tone-3"],12,1,15,0],"1f3fd":[[""],"","",["skin-tone-4"],12,2,15,0],"1f3fe":[[""],"","",["skin-tone-5"],12,3,15,0],"1f3ff":[[""],"","",["skin-tone-6"],12,4,15,0],"1f400":[[""],"","",["rat"],12,5,15,0],"1f401":[[""],"","",["mouse2"],12,6,15,0],"1f402":[[""],"","",["ox"],12,7,15,0],"1f403":[[""],"","",["water_buffalo"],12,8,15,0],"1f404":[[""],"","",["cow2"],12,9,15,0],"1f405":[[""],"","",["tiger2"],12,10,15,0],"1f406":[[""],"","",["leopard"],12,11,15,0],"1f407":[[""],"","",["rabbit2"],12,12,15,0],"1f408":[[""],"","",["cat2"],12,13,15,0],"1f409":[[""],"","",["dragon"],12,14,15,0],"1f40a":[[""],"","",["crocodile"],12,15,15,0],"1f40b":[[""],"","",["whale2"],12,16,15,0],"1f40c":[[""],"","",["snail"],12,17,15,0],"1f40d":[[""],"","",["snake"],12,18,15,0],"1f40e":[[""],"","",["racehorse"],12,19,15,0],"1f40f":[[""],"","",["ram"],12,20,15,0],"1f410":[[""],"","",["goat"],12,21,15,0],"1f411":[[""],"","",["sheep"],12,22,15,0],"1f412":[[""],"","",["monkey"],12,23,15,0],"1f413":[[""],"","",["rooster"],12,24,15,0],"1f414":[[""],"","",["chicken"],12,25,15,0],"1f415":[[""],"","",["dog2"],12,26,15,0],"1f416":[[""],"","",["pig2"],12,27,15,0],"1f417":[[""],"","",["boar"],12,28,15,0],"1f418":[[""],"","",["elephant"],12,29,15,0],"1f419":[[""],"","",["octopus"],12,30,15,0],"1f41a":[[""],"","",["shell"],12,31,15,0],"1f41b":[[""],"","",["bug"],12,32,15,0],"1f41c":[[""],"","",["ant"],12,33,15,0],"1f41d":[[""],"","",["bee","honeybee"],12,34,15,0],"1f41e":[[""],"","",["beetle"],12,35,15,0],"1f41f":[[""],"","",["fish"],12,36,15,0],"1f420":[[""],"","",["tropical_fish"],12,37,15,0],"1f421":[[""],"","",["blowfish"],12,38,15,0],"1f422":[[""],"","",["turtle"],12,39,15,0],"1f423":[[""],"","",["hatching_chick"],12,40,15,0],"1f424":[[""],"","",["baby_chick"],13,0,15,0],"1f425":[[""],"","",["hatched_chick"],13,1,15,0],"1f426":[[""],"","",["bird"],13,2,15,0],"1f427":[[""],"","",["penguin"],13,3,15,0],"1f428":[[""],"","",["koala"],13,4,15,0],"1f429":[[""],"","",["poodle"],13,5,15,0],"1f42a":[[""],"","",["dromedary_camel"],13,6,15,0],"1f42b":[[""],"","",["camel"],13,7,15,0],"1f42c":[[""],"","",["dolphin","flipper"],13,8,15,0],"1f42d":[[""],"","",["mouse"],13,9,15,0],"1f42e":[[""],"","",["cow"],13,10,15,0],"1f42f":[[""],"","",["tiger"],13,11,15,0],"1f430":[[""],"","",["rabbit"],13,12,15,0],"1f431":[[""],"","",["cat"],13,13,15,0],"1f432":[[""],"","",["dragon_face"],13,14,15,0],"1f433":[[""],"","",["whale"],13,15,15,0],"1f434":[[""],"","",["horse"],13,16,15,0],"1f435":[[""],"","",["monkey_face"],13,17,15,0],"1f436":[[""],"","",["dog"],13,18,15,0],"1f437":[[""],"","",["pig"],13,19,15,0],"1f438":[[""],"","",["frog"],13,20,15,0],"1f439":[[""],"","",["hamster"],13,21,15,0],"1f43a":[[""],"","",["wolf"],13,22,15,0],"1f43b":[[""],"","",["bear"],13,23,15,0],"1f43c":[[""],"","",["panda_face"],13,24,15,0],"1f43d":[[""],"","",["pig_nose"],13,25,15,0],"1f43e":[[""],"","",["feet","paw_prints"],13,26,15,0],"1f43f":[[""],"","",["chipmunk"],13,27,15,0],"1f440":[[""],"","",["eyes"],13,28,15,0],"1f441":[[""],"","",["eye"],13,29,15,0],"1f442":[[""],"","",["ear"],13,30,15,0],"1f443":[[""],"","",["nose"],13,36,15,0],"1f444":[[""],"","",["lips"],14,1,15,0],"1f445":[[""],"","",["tongue"],14,2,15,0],"1f446":[[""],"","",["point_up_2"],14,3,15,0],"1f447":[[""],"","",["point_down"],14,9,15,0],"1f448":[[""],"","",["point_left"],14,15,15,0],"1f449":[[""],"","",["point_right"],14,21,15,0],"1f44a":[[""],"","",["facepunch","punch"],14,27,15,0],"1f44b":[[""],"","",["wave"],14,33,15,0],"1f44c":[[""],"","",["ok_hand"],14,39,15,0],"1f44d":[[""],"","",["+1","thumbsup"],15,4,15,0],"1f44e":[[""],"","",["-1","thumbsdown"],15,10,15,0],"1f44f":[[""],"","",["clap"],15,16,15,0],"1f450":[[""],"","",["open_hands"],15,22,15,0],"1f451":[[""],"","",["crown"],15,28,15,0],"1f452":[[""],"","",["womans_hat"],15,29,15,0],"1f453":[[""],"","",["eyeglasses"],15,30,15,0],"1f454":[[""],"","",["necktie"],15,31,15,0],"1f455":[[""],"","",["shirt","tshirt"],15,32,15,0],"1f456":[[""],"","",["jeans"],15,33,15,0],"1f457":[[""],"","",["dress"],15,34,15,0],"1f458":[[""],"","",["kimono"],15,35,15,0],"1f459":[[""],"","",["bikini"],15,36,15,0],"1f45a":[[""],"","",["womans_clothes"],15,37,15,0],"1f45b":[[""],"","",["purse"],15,38,15,0],"1f45c":[[""],"","",["handbag"],15,39,15,0],"1f45d":[[""],"","",["pouch"],15,40,15,0],"1f45e":[[""],"","",["mans_shoe","shoe"],16,0,15,0],"1f45f":[[""],"","",["athletic_shoe"],16,1,15,0],"1f460":[[""],"","",["high_heel"],16,2,15,0],"1f461":[[""],"","",["sandal"],16,3,15,0],"1f462":[[""],"","",["boot"],16,4,15,0],"1f463":[[""],"","",["footprints"],16,5,15,0],"1f464":[[""],"","",["bust_in_silhouette"],16,6,15,0],"1f465":[[""],"","",["busts_in_silhouette"],16,7,15,0],"1f466":[[""],"","",["boy"],16,8,15,0],"1f467":[[""],"","",["girl"],16,14,15,0],"1f468":[[""],"","",["man"],16,20,15,0],"1f469":[[""],"","",["woman"],16,26,15,0],"1f46a":[["",""],"","",["family","man-woman-boy"],16,32,15,0],"1f46b":[[""],"","",["couple","man_and_woman_holding_hands"],16,33,15,0],"1f46c":[[""],"","",["two_men_holding_hands"],16,34,15,0],"1f46d":[[""],"","",["two_women_holding_hands"],16,35,15,0],"1f46e":[[""],"","",["cop"],16,36,15,0],"1f46f":[[""],"","",["dancers"],17,1,15,0],"1f470":[[""],"","",["bride_with_veil"],17,2,15,0],"1f471":[[""],"","",["person_with_blond_hair"],17,8,15,0],"1f472":[[""],"","",["man_with_gua_pi_mao"],17,14,15,0],"1f473":[[""],"","",["man_with_turban"],17,20,15,0],"1f474":[[""],"","",["older_man"],17,26,15,0],"1f475":[[""],"","",["older_woman"],17,32,15,0],"1f476":[[""],"","",["baby"],17,38,15,0],"1f477":[[""],"","",["construction_worker"],18,3,15,0],"1f478":[[""],"","",["princess"],18,9,15,0],"1f479":[[""],"","",["japanese_ogre"],18,15,15,0],"1f47a":[[""],"","",["japanese_goblin"],18,16,15,0],"1f47b":[[""],"","",["ghost"],18,17,15,0],"1f47c":[[""],"","",["angel"],18,18,15,0],"1f47d":[[""],"","",["alien"],18,24,15,0],"1f47e":[[""],"","",["space_invader"],18,25,15,0],"1f47f":[[""],"","",["imp"],18,26,15,0],"1f480":[[""],"","",["skull"],18,27,15,0],"1f481":[[""],"","",["information_desk_person"],18,28,15,0],"1f482":[[""],"","",["guardsman"],18,34,15,0],"1f483":[[""],"","",["dancer"],18,40,15,0],"1f484":[[""],"","",["lipstick"],19,5,15,0],"1f485":[[""],"","",["nail_care"],19,6,15,0],"1f486":[[""],"","",["massage"],19,12,15,0],"1f487":[[""],"","",["haircut"],19,18,15,0],"1f488":[[""],"","",["barber"],19,24,15,0],"1f489":[[""],"","",["syringe"],19,25,15,0],"1f48a":[[""],"","",["pill"],19,26,15,0],"1f48b":[[""],"","",["kiss"],19,27,15,0],"1f48c":[[""],"","",["love_letter"],19,28,15,0],"1f48d":[[""],"","",["ring"],19,29,15,0],"1f48e":[[""],"","",["gem"],19,30,15,0],"1f48f":[[""],"","",["couplekiss"],19,31,15,0],"1f490":[[""],"","",["bouquet"],19,32,15,0],"1f491":[[""],"","",["couple_with_heart"],19,33,15,0],"1f492":[[""],"","",["wedding"],19,34,15,0],"1f493":[[""],"","",["heartbeat"],19,35,15,0],"1f494":[[""],"","",["broken_heart"],19,36,15,0,"</3"],"1f495":[[""],"","",["two_hearts"],19,37,15,0],"1f496":[[""],"","",["sparkling_heart"],19,38,15,0],"1f497":[[""],"","",["heartpulse"],19,39,15,0],"1f498":[[""],"","",["cupid"],19,40,15,0],"1f499":[[""],"","",["blue_heart"],20,0,15,0,"<3"],"1f49a":[[""],"","",["green_heart"],20,1,15,0,"<3"],"1f49b":[[""],"","",["yellow_heart"],20,2,15,0,"<3"],"1f49c":[[""],"","",["purple_heart"],20,3,15,0,"<3"],"1f49d":[[""],"","",["gift_heart"],20,4,15,0],"1f49e":[[""],"","",["revolving_hearts"],20,5,15,0],"1f49f":[[""],"","",["heart_decoration"],20,6,15,0],"1f4a0":[[""],"","",["diamond_shape_with_a_dot_inside"],20,7,15,0],"1f4a1":[[""],"","",["bulb"],20,8,15,0],"1f4a2":[[""],"","",["anger"],20,9,15,0],"1f4a3":[[""],"","",["bomb"],20,10,15,0],"1f4a4":[[""],"","",["zzz"],20,11,15,0],"1f4a5":[[""],"","",["boom","collision"],20,12,15,0],"1f4a6":[[""],"","",["sweat_drops"],20,13,15,0],"1f4a7":[[""],"","",["droplet"],20,14,15,0],"1f4a8":[[""],"","",["dash"],20,15,15,0],"1f4a9":[[""],"","",["hankey","poop","shit"],20,16,15,0],"1f4aa":[[""],"","",["muscle"],20,17,15,0],"1f4ab":[[""],"","",["dizzy"],20,23,15,0],"1f4ac":[[""],"","",["speech_balloon"],20,24,15,0],"1f4ad":[[""],"","",["thought_balloon"],20,25,15,0],"1f4ae":[[""],"","",["white_flower"],20,26,15,0],"1f4af":[[""],"","",["100"],20,27,15,0],"1f4b0":[[""],"","",["moneybag"],20,28,15,0],"1f4b1":[[""],"","",["currency_exchange"],20,29,15,0],"1f4b2":[[""],"","",["heavy_dollar_sign"],20,30,15,0],"1f4b3":[[""],"","",["credit_card"],20,31,15,0],"1f4b4":[[""],"","",["yen"],20,32,15,0],"1f4b5":[[""],"","",["dollar"],20,33,15,0],"1f4b6":[[""],"","",["euro"],20,34,15,0],"1f4b7":[[""],"","",["pound"],20,35,15,0],"1f4b8":[[""],"","",["money_with_wings"],20,36,15,0],"1f4b9":[[""],"","",["chart"],20,37,15,0],"1f4ba":[[""],"","",["seat"],20,38,15,0],"1f4bb":[[""],"","",["computer"],20,39,15,0],"1f4bc":[[""],"","",["briefcase"],20,40,15,0],"1f4bd":[[""],"","",["minidisc"],21,0,15,0],"1f4be":[[""],"","",["floppy_disk"],21,1,15,0],"1f4bf":[[""],"","",["cd"],21,2,15,0],"1f4c0":[[""],"","",["dvd"],21,3,15,0],"1f4c1":[[""],"","",["file_folder"],21,4,15,0],"1f4c2":[[""],"","",["open_file_folder"],21,5,15,0],"1f4c3":[[""],"","",["page_with_curl"],21,6,15,0],"1f4c4":[[""],"","",["page_facing_up"],21,7,15,0],"1f4c5":[[""],"","",["date"],21,8,15,0],"1f4c6":[[""],"","",["calendar"],21,9,15,0],"1f4c7":[[""],"","",["card_index"],21,10,15,0],"1f4c8":[[""],"","",["chart_with_upwards_trend"],21,11,15,0],"1f4c9":[[""],"","",["chart_with_downwards_trend"],21,12,15,0],"1f4ca":[[""],"","",["bar_chart"],21,13,15,0],"1f4cb":[[""],"","",["clipboard"],21,14,15,0],"1f4cc":[[""],"","",["pushpin"],21,15,15,0],"1f4cd":[[""],"","",["round_pushpin"],21,16,15,0],"1f4ce":[[""],"","",["paperclip"],21,17,15,0],"1f4cf":[[""],"","",["straight_ruler"],21,18,15,0],"1f4d0":[[""],"","",["triangular_ruler"],21,19,15,0],"1f4d1":[[""],"","",["bookmark_tabs"],21,20,15,0],"1f4d2":[[""],"","",["ledger"],21,21,15,0],"1f4d3":[[""],"","",["notebook"],21,22,15,0],"1f4d4":[[""],"","",["notebook_with_decorative_cover"],21,23,15,0],"1f4d5":[[""],"","",["closed_book"],21,24,15,0],"1f4d6":[[""],"","",["book","open_book"],21,25,15,0],"1f4d7":[[""],"","",["green_book"],21,26,15,0],"1f4d8":[[""],"","",["blue_book"],21,27,15,0],"1f4d9":[[""],"","",["orange_book"],21,28,15,0],"1f4da":[[""],"","",["books"],21,29,15,0],"1f4db":[[""],"","",["name_badge"],21,30,15,0],"1f4dc":[[""],"","",["scroll"],21,31,15,0],"1f4dd":[[""],"","",["memo","pencil"],21,32,15,0],"1f4de":[[""],"","",["telephone_receiver"],21,33,15,0],"1f4df":[[""],"","",["pager"],21,34,15,0],"1f4e0":[[""],"","",["fax"],21,35,15,0],"1f4e1":[[""],"","",["satellite_antenna"],21,36,15,0],"1f4e2":[[""],"","",["loudspeaker"],21,37,15,0],"1f4e3":[[""],"","",["mega"],21,38,15,0],"1f4e4":[[""],"","",["outbox_tray"],21,39,15,0],"1f4e5":[[""],"","",["inbox_tray"],21,40,15,0],"1f4e6":[[""],"","",["package"],22,0,15,0],"1f4e7":[[""],"","",["e-mail"],22,1,15,0],"1f4e8":[[""],"","",["incoming_envelope"],22,2,15,0],"1f4e9":[[""],"","",["envelope_with_arrow"],22,3,15,0],"1f4ea":[[""],"","",["mailbox_closed"],22,4,15,0],"1f4eb":[[""],"","",["mailbox"],22,5,15,0],"1f4ec":[[""],"","",["mailbox_with_mail"],22,6,15,0],"1f4ed":[[""],"","",["mailbox_with_no_mail"],22,7,15,0],"1f4ee":[[""],"","",["postbox"],22,8,15,0],"1f4ef":[[""],"","",["postal_horn"],22,9,15,0],"1f4f0":[[""],"","",["newspaper"],22,10,15,0],"1f4f1":[[""],"","",["iphone"],22,11,15,0],"1f4f2":[[""],"","",["calling"],22,12,15,0],"1f4f3":[[""],"","",["vibration_mode"],22,13,15,0],"1f4f4":[[""],"","",["mobile_phone_off"],22,14,15,0],"1f4f5":[[""],"","",["no_mobile_phones"],22,15,15,0],"1f4f6":[[""],"","",["signal_strength"],22,16,15,0],"1f4f7":[[""],"","",["camera"],22,17,15,0],"1f4f8":[[""],"","",["camera_with_flash"],22,18,15,0],"1f4f9":[[""],"","",["video_camera"],22,19,15,0],"1f4fa":[[""],"","",["tv"],22,20,15,0],"1f4fb":[[""],"","",["radio"],22,21,15,0],"1f4fc":[[""],"","",["vhs"],22,22,15,0],"1f4fd":[[""],"","",["film_projector"],22,23,15,0],"1f4ff":[[""],"","",["prayer_beads"],22,24,15,0],"1f500":[[""],"","",["twisted_rightwards_arrows"],22,25,15,0],"1f501":[[""],"","",["repeat"],22,26,15,0],"1f502":[[""],"","",["repeat_one"],22,27,15,0],"1f503":[[""],"","",["arrows_clockwise"],22,28,15,0],"1f504":[[""],"","",["arrows_counterclockwise"],22,29,15,0],"1f505":[[""],"","",["low_brightness"],22,30,15,0],"1f506":[[""],"","",["high_brightness"],22,31,15,0],"1f507":[[""],"","",["mute"],22,32,15,0],"1f508":[[""],"","",["speaker"],22,33,15,0],"1f509":[[""],"","",["sound"],22,34,15,0],"1f50a":[[""],"","",["loud_sound"],22,35,15,0],"1f50b":[[""],"","",["battery"],22,36,15,0],"1f50c":[[""],"","",["electric_plug"],22,37,15,0],"1f50d":[[""],"","",["mag"],22,38,15,0],"1f50e":[[""],"","",["mag_right"],22,39,15,0],"1f50f":[[""],"","",["lock_with_ink_pen"],22,40,15,0],"1f510":[[""],"","",["closed_lock_with_key"],23,0,15,0],"1f511":[[""],"","",["key"],23,1,15,0],"1f512":[[""],"","",["lock"],23,2,15,0],"1f513":[[""],"","",["unlock"],23,3,15,0],"1f514":[[""],"","",["bell"],23,4,15,0],"1f515":[[""],"","",["no_bell"],23,5,15,0],"1f516":[[""],"","",["bookmark"],23,6,15,0],"1f517":[[""],"","",["link"],23,7,15,0],"1f518":[[""],"","",["radio_button"],23,8,15,0],"1f519":[[""],"","",["back"],23,9,15,0],"1f51a":[[""],"","",["end"],23,10,15,0],"1f51b":[[""],"","",["on"],23,11,15,0],"1f51c":[[""],"","",["soon"],23,12,15,0],"1f51d":[[""],"","",["top"],23,13,15,0],"1f51e":[[""],"","",["underage"],23,14,15,0],"1f51f":[[""],"","",["keycap_ten"],23,15,15,0],"1f520":[[""],"","",["capital_abcd"],23,16,15,0],"1f521":[[""],"","",["abcd"],23,17,15,0],"1f522":[[""],"","",["1234"],23,18,15,0],"1f523":[[""],"","",["symbols"],23,19,15,0],"1f524":[[""],"","",["abc"],23,20,15,0],"1f525":[[""],"","",["fire"],23,21,15,0],"1f526":[[""],"","",["flashlight"],23,22,15,0],"1f527":[[""],"","",["wrench"],23,23,15,0],"1f528":[[""],"","",["hammer"],23,24,15,0],"1f529":[[""],"","",["nut_and_bolt"],23,25,15,0],"1f52a":[[""],"","",["hocho","knife"],23,26,15,0],"1f52b":[[""],"","",["gun"],23,27,15,0],"1f52c":[[""],"","",["microscope"],23,28,15,0],"1f52d":[[""],"","",["telescope"],23,29,15,0],"1f52e":[[""],"","",["crystal_ball"],23,30,15,0],"1f52f":[[""],"","",["six_pointed_star"],23,31,15,0],"1f530":[[""],"","",["beginner"],23,32,15,0],"1f531":[[""],"","",["trident"],23,33,15,0],"1f532":[[""],"","",["black_square_button"],23,34,15,0],"1f533":[[""],"","",["white_square_button"],23,35,15,0],"1f534":[[""],"","",["red_circle"],23,36,15,0],"1f535":[[""],"","",["large_blue_circle"],23,37,15,0],"1f536":[[""],"","",["large_orange_diamond"],23,38,15,0],"1f537":[[""],"","",["large_blue_diamond"],23,39,15,0],"1f538":[[""],"","",["small_orange_diamond"],23,40,15,0],"1f539":[[""],"","",["small_blue_diamond"],24,0,15,0],"1f53a":[[""],"","",["small_red_triangle"],24,1,15,0],"1f53b":[[""],"","",["small_red_triangle_down"],24,2,15,0],"1f53c":[[""],"","",["arrow_up_small"],24,3,15,0],"1f53d":[[""],"","",["arrow_down_small"],24,4,15,0],"1f549":[[""],"","",["om_symbol"],24,5,15,0],"1f54a":[[""],"","",["dove_of_peace"],24,6,15,0],"1f54b":[[""],"","",["kaaba"],24,7,15,0],"1f54c":[[""],"","",["mosque"],24,8,15,0],"1f54d":[[""],"","",["synagogue"],24,9,15,0],"1f54e":[[""],"","",["menorah_with_nine_branches"],24,10,15,0],"1f550":[[""],"","",["clock1"],24,11,15,0],"1f551":[[""],"","",["clock2"],24,12,15,0],"1f552":[[""],"","",["clock3"],24,13,15,0],"1f553":[[""],"","",["clock4"],24,14,15,0],"1f554":[[""],"","",["clock5"],24,15,15,0],"1f555":[[""],"","",["clock6"],24,16,15,0],"1f556":[[""],"","",["clock7"],24,17,15,0],"1f557":[[""],"","",["clock8"],24,18,15,0],"1f558":[[""],"","",["clock9"],24,19,15,0],"1f559":[[""],"","",["clock10"],24,20,15,0],"1f55a":[[""],"","",["clock11"],24,21,15,0],"1f55b":[[""],"","",["clock12"],24,22,15,0],"1f55c":[[""],"","",["clock130"],24,23,15,0],"1f55d":[[""],"","",["clock230"],24,24,15,0],"1f55e":[[""],"","",["clock330"],24,25,15,0],"1f55f":[[""],"","",["clock430"],24,26,15,0],"1f560":[[""],"","",["clock530"],24,27,15,0],"1f561":[[""],"","",["clock630"],24,28,15,0],"1f562":[[""],"","",["clock730"],24,29,15,0],"1f563":[[""],"","",["clock830"],24,30,15,0],"1f564":[[""],"","",["clock930"],24,31,15,0],"1f565":[[""],"","",["clock1030"],24,32,15,0],"1f566":[[""],"","",["clock1130"],24,33,15,0],"1f567":[[""],"","",["clock1230"],24,34,15,0],"1f56f":[[""],"","",["candle"],24,35,15,0],"1f570":[[""],"","",["mantelpiece_clock"],24,36,15,0],"1f573":[[""],"","",["hole"],24,37,15,0],"1f574":[[""],"","",["man_in_business_suit_levitating"],24,38,15,0],"1f575":[[""],"","",["sleuth_or_spy"],24,39,15,0],"1f576":[[""],"","",["dark_sunglasses"],25,4,15,0],"1f577":[[""],"","",["spider"],25,5,15,0],"1f578":[[""],"","",["spider_web"],25,6,15,0],"1f579":[[""],"","",["joystick"],25,7,15,0],"1f587":[[""],"","",["linked_paperclips"],25,8,15,0],"1f58a":[[""],"","",["lower_left_ballpoint_pen"],25,9,15,0],"1f58b":[[""],"","",["lower_left_fountain_pen"],25,10,15,0],"1f58c":[[""],"","",["lower_left_paintbrush"],25,11,15,0],"1f58d":[[""],"","",["lower_left_crayon"],25,12,15,0],"1f590":[[""],"","",["raised_hand_with_fingers_splayed"],25,13,15,0],"1f595":[[""],"","",["middle_finger","reversed_hand_with_middle_finger_extended"],25,19,15,0],"1f596":[[""],"","",["spock-hand"],25,25,15,0],"1f5a5":[[""],"","",["desktop_computer"],25,31,15,0],"1f5a8":[[""],"","",["printer"],25,32,15,0],"1f5b1":[[""],"","",["three_button_mouse"],25,33,15,0],"1f5b2":[[""],"","",["trackball"],25,34,15,0],"1f5bc":[[""],"","",["frame_with_picture"],25,35,15,0],"1f5c2":[[""],"","",["card_index_dividers"],25,36,15,0],"1f5c3":[[""],"","",["card_file_box"],25,37,15,0],"1f5c4":[[""],"","",["file_cabinet"],25,38,15,0],"1f5d1":[[""],"","",["wastebasket"],25,39,15,0],"1f5d2":[[""],"","",["spiral_note_pad"],25,40,15,0],"1f5d3":[[""],"","",["spiral_calendar_pad"],26,0,15,0],"1f5dc":[[""],"","",["compression"],26,1,15,0],"1f5dd":[[""],"","",["old_key"],26,2,15,0],"1f5de":[[""],"","",["rolled_up_newspaper"],26,3,15,0],"1f5e1":[[""],"","",["dagger_knife"],26,4,15,0],"1f5e3":[[""],"","",["speaking_head_in_silhouette"],26,5,15,0],"1f5e8":[[""],"","",["left_speech_bubble"],26,6,7,0],"1f5ef":[[""],"","",["right_anger_bubble"],26,7,15,0],"1f5f3":[[""],"","",["ballot_box_with_ballot"],26,8,15,0],"1f5fa":[[""],"","",["world_map"],26,9,15,0],"1f5fb":[[""],"","",["mount_fuji"],26,10,15,0],"1f5fc":[[""],"","",["tokyo_tower"],26,11,15,0],"1f5fd":[[""],"","",["statue_of_liberty"],26,12,15,0],"1f5fe":[[""],"","",["japan"],26,13,15,0],"1f5ff":[[""],"","",["moyai"],26,14,15,0],"1f600":[[""],"","",["grinning"],26,15,15,0,":D"],"1f601":[[""],"","",["grin"],26,16,15,0],"1f602":[[""],"","",["joy"],26,17,15,0],"1f603":[[""],"","",["smiley"],26,18,15,0,":)"],"1f604":[[""],"","",["smile"],26,19,15,0,":)"],"1f605":[[""],"","",["sweat_smile"],26,20,15,0],"1f606":[[""],"","",["laughing","satisfied"],26,21,15,0],"1f607":[[""],"","",["innocent"],26,22,15,0],"1f608":[[""],"","",["smiling_imp"],26,23,15,0],"1f609":[[""],"","",["wink"],26,24,15,0,";)"],"1f60a":[[""],"","",["blush"],26,25,15,0,":)"],"1f60b":[[""],"","",["yum"],26,26,15,0],"1f60c":[[""],"","",["relieved"],26,27,15,0],"1f60d":[[""],"","",["heart_eyes"],26,28,15,0],"1f60e":[[""],"","",["sunglasses"],26,29,15,0],"1f60f":[[""],"","",["smirk"],26,30,15,0],"1f610":[[""],"","",["neutral_face"],26,31,15,0],"1f611":[[""],"","",["expressionless"],26,32,15,0],"1f612":[[""],"","",["unamused"],26,33,15,0,":("],"1f613":[[""],"","",["sweat"],26,34,15,0],"1f614":[[""],"","",["pensive"],26,35,15,0],"1f615":[[""],"","",["confused"],26,36,15,0],"1f616":[[""],"","",["confounded"],26,37,15,0],"1f617":[[""],"","",["kissing"],26,38,15,0],"1f618":[[""],"","",["kissing_heart"],26,39,15,0],"1f619":[[""],"","",["kissing_smiling_eyes"],26,40,15,0],"1f61a":[[""],"","",["kissing_closed_eyes"],27,0,15,0],"1f61b":[[""],"","",["stuck_out_tongue"],27,1,15,0,":p"],"1f61c":[[""],"","",["stuck_out_tongue_winking_eye"],27,2,15,0,";p"],"1f61d":[[""],"","",["stuck_out_tongue_closed_eyes"],27,3,15,0],"1f61e":[[""],"","",["disappointed"],27,4,15,0,":("],"1f61f":[[""],"","",["worried"],27,5,15,0],"1f620":[[""],"","",["angry"],27,6,15,0],"1f621":[[""],"","",["rage"],27,7,15,0],"1f622":[[""],"","",["cry"],27,8,15,0,":'("],"1f623":[[""],"","",["persevere"],27,9,15,0],"1f624":[[""],"","",["triumph"],27,10,15,0],"1f625":[[""],"","",["disappointed_relieved"],27,11,15,0],"1f626":[[""],"","",["frowning"],27,12,15,0],"1f627":[[""],"","",["anguished"],27,13,15,0],"1f628":[[""],"","",["fearful"],27,14,15,0],"1f629":[[""],"","",["weary"],27,15,15,0],"1f62a":[[""],"","",["sleepy"],27,16,15,0],"1f62b":[[""],"","",["tired_face"],27,17,15,0],"1f62c":[[""],"","",["grimacing"],27,18,15,0],"1f62d":[[""],"","",["sob"],27,19,15,0,":'("],"1f62e":[[""],"","",["open_mouth"],27,20,15,0],"1f62f":[[""],"","",["hushed"],27,21,15,0],"1f630":[[""],"","",["cold_sweat"],27,22,15,0],"1f631":[[""],"","",["scream"],27,23,15,0],"1f632":[[""],"","",["astonished"],27,24,15,0],"1f633":[[""],"","",["flushed"],27,25,15,0],"1f634":[[""],"","",["sleeping"],27,26,15,0],"1f635":[[""],"","",["dizzy_face"],27,27,15,0],"1f636":[[""],"","",["no_mouth"],27,28,15,0],"1f637":[[""],"","",["mask"],27,29,15,0],"1f638":[[""],"","",["smile_cat"],27,30,15,0],"1f639":[[""],"","",["joy_cat"],27,31,15,0],"1f63a":[[""],"","",["smiley_cat"],27,32,15,0],"1f63b":[[""],"","",["heart_eyes_cat"],27,33,15,0],"1f63c":[[""],"","",["smirk_cat"],27,34,15,0],"1f63d":[[""],"","",["kissing_cat"],27,35,15,0],"1f63e":[[""],"","",["pouting_cat"],27,36,15,0],"1f63f":[[""],"","",["crying_cat_face"],27,37,15,0],"1f640":[[""],"","",["scream_cat"],27,38,15,0],"1f641":[[""],"","",["slightly_frowning_face"],27,39,15,0],"1f642":[[""],"","",["slightly_smiling_face"],27,40,15,0],"1f643":[[""],"","",["upside_down_face"],28,0,15,0],"1f644":[[""],"","",["face_with_rolling_eyes"],28,1,15,0],"1f645":[[""],"","",["no_good"],28,2,15,0],"1f646":[[""],"","",["ok_woman"],28,8,15,0],"1f647":[[""],"","",["bow"],28,14,15,0],"1f648":[[""],"","",["see_no_evil"],28,20,15,0],"1f649":[[""],"","",["hear_no_evil"],28,21,15,0],"1f64a":[[""],"","",["speak_no_evil"],28,22,15,0],"1f64b":[[""],"","",["raising_hand"],28,23,15,0],"1f64c":[[""],"","",["raised_hands"],28,29,15,0],"1f64d":[[""],"","",["person_frowning"],28,35,15,0],"1f64e":[[""],"","",["person_with_pouting_face"],29,0,15,0],"1f64f":[[""],"","",["pray"],29,6,15,0],"1f680":[[""],"","",["rocket"],29,12,15,0],"1f681":[[""],"","",["helicopter"],29,13,15,0],"1f682":[[""],"","",["steam_locomotive"],29,14,15,0],"1f683":[[""],"","",["railway_car"],29,15,15,0],"1f684":[[""],"","",["bullettrain_side"],29,16,15,0],"1f685":[[""],"","",["bullettrain_front"],29,17,15,0],"1f686":[[""],"","",["train2"],29,18,15,0],"1f687":[[""],"","",["metro"],29,19,15,0],"1f688":[[""],"","",["light_rail"],29,20,15,0],"1f689":[[""],"","",["station"],29,21,15,0],"1f68a":[[""],"","",["tram"],29,22,15,0],"1f68b":[[""],"","",["train"],29,23,15,0],"1f68c":[[""],"","",["bus"],29,24,15,0],"1f68d":[[""],"","",["oncoming_bus"],29,25,15,0],"1f68e":[[""],"","",["trolleybus"],29,26,15,0],"1f68f":[[""],"","",["busstop"],29,27,15,0],"1f690":[[""],"","",["minibus"],29,28,15,0],"1f691":[[""],"","",["ambulance"],29,29,15,0],"1f692":[[""],"","",["fire_engine"],29,30,15,0],"1f693":[[""],"","",["police_car"],29,31,15,0],"1f694":[[""],"","",["oncoming_police_car"],29,32,15,0],"1f695":[[""],"","",["taxi"],29,33,15,0],"1f696":[[""],"","",["oncoming_taxi"],29,34,15,0],"1f697":[[""],"","",["car","red_car"],29,35,15,0],"1f698":[[""],"","",["oncoming_automobile"],29,36,15,0],"1f699":[[""],"","",["blue_car"],29,37,15,0],"1f69a":[[""],"","",["truck"],29,38,15,0],"1f69b":[[""],"","",["articulated_lorry"],29,39,15,0],"1f69c":[[""],"","",["tractor"],29,40,15,0],"1f69d":[[""],"","",["monorail"],30,0,15,0],"1f69e":[[""],"","",["mountain_railway"],30,1,15,0],"1f69f":[[""],"","",["suspension_railway"],30,2,15,0],"1f6a0":[[""],"","",["mountain_cableway"],30,3,15,0],"1f6a1":[[""],"","",["aerial_tramway"],30,4,15,0],"1f6a2":[[""],"","",["ship"],30,5,15,0],"1f6a3":[[""],"","",["rowboat"],30,6,15,0],"1f6a4":[[""],"","",["speedboat"],30,12,15,0],"1f6a5":[[""],"","",["traffic_light"],30,13,15,0],
"1f6a6":[[""],"","",["vertical_traffic_light"],30,14,15,0],"1f6a7":[[""],"","",["construction"],30,15,15,0],"1f6a8":[[""],"","",["rotating_light"],30,16,15,0],"1f6a9":[[""],"","",["triangular_flag_on_post"],30,17,15,0],"1f6aa":[[""],"","",["door"],30,18,15,0],"1f6ab":[[""],"","",["no_entry_sign"],30,19,15,0],"1f6ac":[[""],"","",["smoking"],30,20,15,0],"1f6ad":[[""],"","",["no_smoking"],30,21,15,0],"1f6ae":[[""],"","",["put_litter_in_its_place"],30,22,15,0],"1f6af":[[""],"","",["do_not_litter"],30,23,15,0],"1f6b0":[[""],"","",["potable_water"],30,24,15,0],"1f6b1":[[""],"","",["non-potable_water"],30,25,15,0],"1f6b2":[[""],"","",["bike"],30,26,15,0],"1f6b3":[[""],"","",["no_bicycles"],30,27,15,0],"1f6b4":[[""],"","",["bicyclist"],30,28,15,0],"1f6b5":[[""],"","",["mountain_bicyclist"],30,34,15,0],"1f6b6":[[""],"","",["walking"],30,40,15,0],"1f6b7":[[""],"","",["no_pedestrians"],31,5,15,0],"1f6b8":[[""],"","",["children_crossing"],31,6,15,0],"1f6b9":[[""],"","",["mens"],31,7,15,0],"1f6ba":[[""],"","",["womens"],31,8,15,0],"1f6bb":[[""],"","",["restroom"],31,9,15,0],"1f6bc":[[""],"","",["baby_symbol"],31,10,15,0],"1f6bd":[[""],"","",["toilet"],31,11,15,0],"1f6be":[[""],"","",["wc"],31,12,15,0],"1f6bf":[[""],"","",["shower"],31,13,15,0],"1f6c0":[[""],"","",["bath"],31,14,15,0],"1f6c1":[[""],"","",["bathtub"],31,20,15,0],"1f6c2":[[""],"","",["passport_control"],31,21,15,0],"1f6c3":[[""],"","",["customs"],31,22,15,0],"1f6c4":[[""],"","",["baggage_claim"],31,23,15,0],"1f6c5":[[""],"","",["left_luggage"],31,24,15,0],"1f6cb":[[""],"","",["couch_and_lamp"],31,25,15,0],"1f6cc":[[""],"","",["sleeping_accommodation"],31,26,15,0],"1f6cd":[[""],"","",["shopping_bags"],31,27,15,0],"1f6ce":[[""],"","",["bellhop_bell"],31,28,15,0],"1f6cf":[[""],"","",["bed"],31,29,15,0],"1f6d0":[[""],"","",["place_of_worship"],31,30,15,0],"1f6e0":[[""],"","",["hammer_and_wrench"],31,31,15,0],"1f6e1":[[""],"","",["shield"],31,32,15,0],"1f6e2":[[""],"","",["oil_drum"],31,33,15,0],"1f6e3":[[""],"","",["motorway"],31,34,15,0],"1f6e4":[[""],"","",["railway_track"],31,35,15,0],"1f6e5":[[""],"","",["motor_boat"],31,36,15,0],"1f6e9":[[""],"","",["small_airplane"],31,37,15,0],"1f6eb":[[""],"","",["airplane_departure"],31,38,15,0],"1f6ec":[[""],"","",["airplane_arriving"],31,39,15,0],"1f6f0":[[""],"","",["satellite"],31,40,15,0],"1f6f3":[[""],"","",["passenger_ship"],32,0,15,0],"1f910":[[""],"","",["zipper_mouth_face"],32,1,15,0],"1f911":[[""],"","",["money_mouth_face"],32,2,15,0],"1f912":[[""],"","",["face_with_thermometer"],32,3,15,0],"1f913":[[""],"","",["nerd_face"],32,4,15,0],"1f914":[[""],"","",["thinking_face"],32,5,15,0],"1f915":[[""],"","",["face_with_head_bandage"],32,6,15,0],"1f916":[[""],"","",["robot_face"],32,7,15,0],"1f917":[[""],"","",["hugging_face"],32,8,15,0],"1f918":[[""],"","",["the_horns","sign_of_the_horns"],32,9,15,0],"1f980":[[""],"","",["crab"],32,15,15,0],"1f981":[[""],"","",["lion_face"],32,16,15,0],"1f982":[[""],"","",["scorpion"],32,17,15,0],"1f983":[[""],"","",["turkey"],32,18,15,0],"1f984":[[""],"","",["unicorn_face"],32,19,15,0],"1f9c0":[[""],"","",["cheese_wedge"],32,20,15,0],"0023-20e3":[["#","#"],"","",["hash"],32,21,15,0],"002a-20e3":[["*"],"","",["keycap_star"],32,22,15,0],"0030-20e3":[["0","0"],"","",["zero"],32,23,15,0],"0031-20e3":[["1","1"],"","",["one"],32,24,15,0],"0032-20e3":[["2","2"],"","",["two"],32,25,15,0],"0033-20e3":[["3","3"],"","",["three"],32,26,15,0],"0034-20e3":[["4","4"],"","",["four"],32,27,15,0],"0035-20e3":[["5","5"],"","",["five"],32,28,15,0],"0036-20e3":[["6","6"],"","",["six"],32,29,15,0],"0037-20e3":[["7","7"],"","",["seven"],32,30,15,0],"0038-20e3":[["8","8"],"","",["eight"],32,31,15,0],"0039-20e3":[["9","9"],"","",["nine"],32,32,15,0],"1f1e6-1f1e8":[[""],"","",["flag-ac"],32,33,15,0],"1f1e6-1f1e9":[[""],"","",["flag-ad"],32,34,15,0],"1f1e6-1f1ea":[[""],"","",["flag-ae"],32,35,15,0],"1f1e6-1f1eb":[[""],"","",["flag-af"],32,36,15,0],"1f1e6-1f1ec":[[""],"","",["flag-ag"],32,37,15,0],"1f1e6-1f1ee":[[""],"","",["flag-ai"],32,38,15,0],"1f1e6-1f1f1":[[""],"","",["flag-al"],32,39,15,0],"1f1e6-1f1f2":[[""],"","",["flag-am"],32,40,15,0],"1f1e6-1f1f4":[[""],"","",["flag-ao"],33,0,15,0],"1f1e6-1f1f6":[[""],"","",["flag-aq"],33,1,15,0],"1f1e6-1f1f7":[[""],"","",["flag-ar"],33,2,15,0],"1f1e6-1f1f8":[[""],"","",["flag-as"],33,3,15,0],"1f1e6-1f1f9":[[""],"","",["flag-at"],33,4,15,0],"1f1e6-1f1fa":[[""],"","",["flag-au"],33,5,15,0],"1f1e6-1f1fc":[[""],"","",["flag-aw"],33,6,15,0],"1f1e6-1f1fd":[[""],"","",["flag-ax"],33,7,15,0],"1f1e6-1f1ff":[[""],"","",["flag-az"],33,8,15,0],"1f1e7-1f1e6":[[""],"","",["flag-ba"],33,9,15,0],"1f1e7-1f1e7":[[""],"","",["flag-bb"],33,10,15,0],"1f1e7-1f1e9":[[""],"","",["flag-bd"],33,11,15,0],"1f1e7-1f1ea":[[""],"","",["flag-be"],33,12,15,0],"1f1e7-1f1eb":[[""],"","",["flag-bf"],33,13,15,0],"1f1e7-1f1ec":[[""],"","",["flag-bg"],33,14,15,0],"1f1e7-1f1ed":[[""],"","",["flag-bh"],33,15,15,0],"1f1e7-1f1ee":[[""],"","",["flag-bi"],33,16,15,0],"1f1e7-1f1ef":[[""],"","",["flag-bj"],33,17,15,0],"1f1e7-1f1f1":[[""],"","",["flag-bl"],33,18,13,0],"1f1e7-1f1f2":[[""],"","",["flag-bm"],33,19,15,0],"1f1e7-1f1f3":[[""],"","",["flag-bn"],33,20,15,0],"1f1e7-1f1f4":[[""],"","",["flag-bo"],33,21,15,0],"1f1e7-1f1f6":[[""],"","",["flag-bq"],33,22,13,0],"1f1e7-1f1f7":[[""],"","",["flag-br"],33,23,15,0],"1f1e7-1f1f8":[[""],"","",["flag-bs"],33,24,15,0],"1f1e7-1f1f9":[[""],"","",["flag-bt"],33,25,15,0],"1f1e7-1f1fb":[[""],"","",["flag-bv"],33,26,13,0],"1f1e7-1f1fc":[[""],"","",["flag-bw"],33,27,15,0],"1f1e7-1f1fe":[[""],"","",["flag-by"],33,28,15,0],"1f1e7-1f1ff":[[""],"","",["flag-bz"],33,29,15,0],"1f1e8-1f1e6":[[""],"","",["flag-ca"],33,30,15,0],"1f1e8-1f1e8":[[""],"","",["flag-cc"],33,31,15,0],"1f1e8-1f1e9":[[""],"","",["flag-cd"],33,32,15,0],"1f1e8-1f1eb":[[""],"","",["flag-cf"],33,33,15,0],"1f1e8-1f1ec":[[""],"","",["flag-cg"],33,34,15,0],"1f1e8-1f1ed":[[""],"","",["flag-ch"],33,35,15,0],"1f1e8-1f1ee":[[""],"","",["flag-ci"],33,36,15,0],"1f1e8-1f1f0":[[""],"","",["flag-ck"],33,37,15,0],"1f1e8-1f1f1":[[""],"","",["flag-cl"],33,38,15,0],"1f1e8-1f1f2":[[""],"","",["flag-cm"],33,39,15,0],"1f1e8-1f1f3":[[""],"","",["flag-cn","cn"],33,40,15,0],"1f1e8-1f1f4":[[""],"","",["flag-co"],34,0,15,0],"1f1e8-1f1f5":[[""],"","",["flag-cp"],34,1,13,0],"1f1e8-1f1f7":[[""],"","",["flag-cr"],34,2,15,0],"1f1e8-1f1fa":[[""],"","",["flag-cu"],34,3,15,0],"1f1e8-1f1fb":[[""],"","",["flag-cv"],34,4,15,0],"1f1e8-1f1fc":[[""],"","",["flag-cw"],34,5,15,0],"1f1e8-1f1fd":[[""],"","",["flag-cx"],34,6,15,0],"1f1e8-1f1fe":[[""],"","",["flag-cy"],34,7,15,0],"1f1e8-1f1ff":[[""],"","",["flag-cz"],34,8,15,0],"1f1e9-1f1ea":[[""],"","",["flag-de","de"],34,9,15,0],"1f1e9-1f1ec":[[""],"","",["flag-dg"],34,10,13,0],"1f1e9-1f1ef":[[""],"","",["flag-dj"],34,11,15,0],"1f1e9-1f1f0":[[""],"","",["flag-dk"],34,12,15,0],"1f1e9-1f1f2":[[""],"","",["flag-dm"],34,13,15,0],"1f1e9-1f1f4":[[""],"","",["flag-do"],34,14,15,0],"1f1e9-1f1ff":[[""],"","",["flag-dz"],34,15,15,0],"1f1ea-1f1e6":[[""],"","",["flag-ea"],34,16,13,0],"1f1ea-1f1e8":[[""],"","",["flag-ec"],34,17,15,0],"1f1ea-1f1ea":[[""],"","",["flag-ee"],34,18,15,0],"1f1ea-1f1ec":[[""],"","",["flag-eg"],34,19,15,0],"1f1ea-1f1ed":[[""],"","",["flag-eh"],34,20,13,0],"1f1ea-1f1f7":[[""],"","",["flag-er"],34,21,15,0],"1f1ea-1f1f8":[[""],"","",["flag-es","es"],34,22,15,0],"1f1ea-1f1f9":[[""],"","",["flag-et"],34,23,15,0],"1f1ea-1f1fa":[[""],"","",["flag-eu"],34,24,15,0],"1f1eb-1f1ee":[[""],"","",["flag-fi"],34,25,15,0],"1f1eb-1f1ef":[[""],"","",["flag-fj"],34,26,15,0],"1f1eb-1f1f0":[[""],"","",["flag-fk"],34,27,13,0],"1f1eb-1f1f2":[[""],"","",["flag-fm"],34,28,15,0],"1f1eb-1f1f4":[[""],"","",["flag-fo"],34,29,15,0],"1f1eb-1f1f7":[[""],"","",["flag-fr","fr"],34,30,15,0],"1f1ec-1f1e6":[[""],"","",["flag-ga"],34,31,15,0],"1f1ec-1f1e7":[[""],"","",["flag-gb","gb","uk"],34,32,15,0],"1f1ec-1f1e9":[[""],"","",["flag-gd"],34,33,15,0],"1f1ec-1f1ea":[[""],"","",["flag-ge"],34,34,15,0],"1f1ec-1f1eb":[[""],"","",["flag-gf"],34,35,13,0],"1f1ec-1f1ec":[[""],"","",["flag-gg"],34,36,15,0],"1f1ec-1f1ed":[[""],"","",["flag-gh"],34,37,15,0],"1f1ec-1f1ee":[[""],"","",["flag-gi"],34,38,15,0],"1f1ec-1f1f1":[[""],"","",["flag-gl"],34,39,15,0],"1f1ec-1f1f2":[[""],"","",["flag-gm"],34,40,15,0],"1f1ec-1f1f3":[[""],"","",["flag-gn"],35,0,15,0],"1f1ec-1f1f5":[[""],"","",["flag-gp"],35,1,13,0],"1f1ec-1f1f6":[[""],"","",["flag-gq"],35,2,15,0],"1f1ec-1f1f7":[[""],"","",["flag-gr"],35,3,15,0],"1f1ec-1f1f8":[[""],"","",["flag-gs"],35,4,13,0],"1f1ec-1f1f9":[[""],"","",["flag-gt"],35,5,15,0],"1f1ec-1f1fa":[[""],"","",["flag-gu"],35,6,15,0],"1f1ec-1f1fc":[[""],"","",["flag-gw"],35,7,15,0],"1f1ec-1f1fe":[[""],"","",["flag-gy"],35,8,15,0],"1f1ed-1f1f0":[[""],"","",["flag-hk"],35,9,15,0],"1f1ed-1f1f2":[[""],"","",["flag-hm"],35,10,13,0],"1f1ed-1f1f3":[[""],"","",["flag-hn"],35,11,15,0],"1f1ed-1f1f7":[[""],"","",["flag-hr"],35,12,15,0],"1f1ed-1f1f9":[[""],"","",["flag-ht"],35,13,15,0],"1f1ed-1f1fa":[[""],"","",["flag-hu"],35,14,15,0],"1f1ee-1f1e8":[[""],"","",["flag-ic"],35,15,15,0],"1f1ee-1f1e9":[[""],"","",["flag-id"],35,16,15,0],"1f1ee-1f1ea":[[""],"","",["flag-ie"],35,17,15,0],"1f1ee-1f1f1":[[""],"","",["flag-il"],35,18,15,0],"1f1ee-1f1f2":[[""],"","",["flag-im"],35,19,15,0],"1f1ee-1f1f3":[[""],"","",["flag-in"],35,20,15,0],"1f1ee-1f1f4":[[""],"","",["flag-io"],35,21,15,0],"1f1ee-1f1f6":[[""],"","",["flag-iq"],35,22,15,0],"1f1ee-1f1f7":[[""],"","",["flag-ir"],35,23,15,0],"1f1ee-1f1f8":[[""],"","",["flag-is"],35,24,15,0],"1f1ee-1f1f9":[[""],"","",["flag-it","it"],35,25,15,0],"1f1ef-1f1ea":[[""],"","",["flag-je"],35,26,15,0],"1f1ef-1f1f2":[[""],"","",["flag-jm"],35,27,15,0],"1f1ef-1f1f4":[[""],"","",["flag-jo"],35,28,15,0],"1f1ef-1f1f5":[[""],"","",["flag-jp","jp"],35,29,15,0],"1f1f0-1f1ea":[[""],"","",["flag-ke"],35,30,15,0],"1f1f0-1f1ec":[[""],"","",["flag-kg"],35,31,15,0],"1f1f0-1f1ed":[[""],"","",["flag-kh"],35,32,15,0],"1f1f0-1f1ee":[[""],"","",["flag-ki"],35,33,15,0],"1f1f0-1f1f2":[[""],"","",["flag-km"],35,34,15,0],"1f1f0-1f1f3":[[""],"","",["flag-kn"],35,35,15,0],"1f1f0-1f1f5":[[""],"","",["flag-kp"],35,36,15,0],"1f1f0-1f1f7":[[""],"","",["flag-kr","kr"],35,37,15,0],"1f1f0-1f1fc":[[""],"","",["flag-kw"],35,38,15,0],"1f1f0-1f1fe":[[""],"","",["flag-ky"],35,39,15,0],"1f1f0-1f1ff":[[""],"","",["flag-kz"],35,40,15,0],"1f1f1-1f1e6":[[""],"","",["flag-la"],36,0,15,0],"1f1f1-1f1e7":[[""],"","",["flag-lb"],36,1,15,0],"1f1f1-1f1e8":[[""],"","",["flag-lc"],36,2,15,0],"1f1f1-1f1ee":[[""],"","",["flag-li"],36,3,15,0],"1f1f1-1f1f0":[[""],"","",["flag-lk"],36,4,15,0],"1f1f1-1f1f7":[[""],"","",["flag-lr"],36,5,15,0],"1f1f1-1f1f8":[[""],"","",["flag-ls"],36,6,15,0],"1f1f1-1f1f9":[[""],"","",["flag-lt"],36,7,15,0],"1f1f1-1f1fa":[[""],"","",["flag-lu"],36,8,15,0],"1f1f1-1f1fb":[[""],"","",["flag-lv"],36,9,15,0],"1f1f1-1f1fe":[[""],"","",["flag-ly"],36,10,15,0],"1f1f2-1f1e6":[[""],"","",["flag-ma"],36,11,15,0],"1f1f2-1f1e8":[[""],"","",["flag-mc"],36,12,15,0],"1f1f2-1f1e9":[[""],"","",["flag-md"],36,13,15,0],"1f1f2-1f1ea":[[""],"","",["flag-me"],36,14,15,0],"1f1f2-1f1eb":[[""],"","",["flag-mf"],36,15,13,0],"1f1f2-1f1ec":[[""],"","",["flag-mg"],36,16,15,0],"1f1f2-1f1ed":[[""],"","",["flag-mh"],36,17,15,0],"1f1f2-1f1f0":[[""],"","",["flag-mk"],36,18,15,0],"1f1f2-1f1f1":[[""],"","",["flag-ml"],36,19,15,0],"1f1f2-1f1f2":[[""],"","",["flag-mm"],36,20,15,0],"1f1f2-1f1f3":[[""],"","",["flag-mn"],36,21,15,0],"1f1f2-1f1f4":[[""],"","",["flag-mo"],36,22,15,0],"1f1f2-1f1f5":[[""],"","",["flag-mp"],36,23,15,0],"1f1f2-1f1f6":[[""],"","",["flag-mq"],36,24,13,0],"1f1f2-1f1f7":[[""],"","",["flag-mr"],36,25,15,0],"1f1f2-1f1f8":[[""],"","",["flag-ms"],36,26,15,0],"1f1f2-1f1f9":[[""],"","",["flag-mt"],36,27,15,0],"1f1f2-1f1fa":[[""],"","",["flag-mu"],36,28,15,0],"1f1f2-1f1fb":[[""],"","",["flag-mv"],36,29,15,0],"1f1f2-1f1fc":[[""],"","",["flag-mw"],36,30,15,0],"1f1f2-1f1fd":[[""],"","",["flag-mx"],36,31,15,0],"1f1f2-1f1fe":[[""],"","",["flag-my"],36,32,15,0],"1f1f2-1f1ff":[[""],"","",["flag-mz"],36,33,15,0],"1f1f3-1f1e6":[[""],"","",["flag-na"],36,34,15,0],"1f1f3-1f1e8":[[""],"","",["flag-nc"],36,35,13,0],"1f1f3-1f1ea":[[""],"","",["flag-ne"],36,36,15,0],"1f1f3-1f1eb":[[""],"","",["flag-nf"],36,37,15,0],"1f1f3-1f1ec":[[""],"","",["flag-ng"],36,38,15,0],"1f1f3-1f1ee":[[""],"","",["flag-ni"],36,39,15,0],"1f1f3-1f1f1":[[""],"","",["flag-nl"],36,40,15,0],"1f1f3-1f1f4":[[""],"","",["flag-no"],37,0,15,0],"1f1f3-1f1f5":[[""],"","",["flag-np"],37,1,15,0],"1f1f3-1f1f7":[[""],"","",["flag-nr"],37,2,15,0],"1f1f3-1f1fa":[[""],"","",["flag-nu"],37,3,15,0],"1f1f3-1f1ff":[[""],"","",["flag-nz"],37,4,15,0],"1f1f4-1f1f2":[[""],"","",["flag-om"],37,5,15,0],"1f1f5-1f1e6":[[""],"","",["flag-pa"],37,6,15,0],"1f1f5-1f1ea":[[""],"","",["flag-pe"],37,7,15,0],"1f1f5-1f1eb":[[""],"","",["flag-pf"],37,8,15,0],"1f1f5-1f1ec":[[""],"","",["flag-pg"],37,9,15,0],"1f1f5-1f1ed":[[""],"","",["flag-ph"],37,10,15,0],"1f1f5-1f1f0":[[""],"","",["flag-pk"],37,11,15,0],"1f1f5-1f1f1":[[""],"","",["flag-pl"],37,12,15,0],"1f1f5-1f1f2":[[""],"","",["flag-pm"],37,13,13,0],"1f1f5-1f1f3":[[""],"","",["flag-pn"],37,14,15,0],"1f1f5-1f1f7":[[""],"","",["flag-pr"],37,15,15,0],"1f1f5-1f1f8":[[""],"","",["flag-ps"],37,16,15,0],"1f1f5-1f1f9":[[""],"","",["flag-pt"],37,17,15,0],"1f1f5-1f1fc":[[""],"","",["flag-pw"],37,18,15,0],"1f1f5-1f1fe":[[""],"","",["flag-py"],37,19,15,0],"1f1f6-1f1e6":[[""],"","",["flag-qa"],37,20,15,0],"1f1f7-1f1ea":[[""],"","",["flag-re"],37,21,13,0],"1f1f7-1f1f4":[[""],"","",["flag-ro"],37,22,15,0],"1f1f7-1f1f8":[[""],"","",["flag-rs"],37,23,15,0],"1f1f7-1f1fa":[[""],"","",["flag-ru","ru"],37,24,15,0],"1f1f7-1f1fc":[[""],"","",["flag-rw"],37,25,15,0],"1f1f8-1f1e6":[[""],"","",["flag-sa"],37,26,15,0],"1f1f8-1f1e7":[[""],"","",["flag-sb"],37,27,15,0],"1f1f8-1f1e8":[[""],"","",["flag-sc"],37,28,15,0],"1f1f8-1f1e9":[[""],"","",["flag-sd"],37,29,15,0],"1f1f8-1f1ea":[[""],"","",["flag-se"],37,30,15,0],"1f1f8-1f1ec":[[""],"","",["flag-sg"],37,31,15,0],"1f1f8-1f1ed":[[""],"","",["flag-sh"],37,32,15,0],"1f1f8-1f1ee":[[""],"","",["flag-si"],37,33,15,0],"1f1f8-1f1ef":[[""],"","",["flag-sj"],37,34,13,0],"1f1f8-1f1f0":[[""],"","",["flag-sk"],37,35,15,0],"1f1f8-1f1f1":[[""],"","",["flag-sl"],37,36,15,0],"1f1f8-1f1f2":[[""],"","",["flag-sm"],37,37,15,0],"1f1f8-1f1f3":[[""],"","",["flag-sn"],37,38,15,0],"1f1f8-1f1f4":[[""],"","",["flag-so"],37,39,15,0],"1f1f8-1f1f7":[[""],"","",["flag-sr"],37,40,15,0],"1f1f8-1f1f8":[[""],"","",["flag-ss"],38,0,15,0],"1f1f8-1f1f9":[[""],"","",["flag-st"],38,1,15,0],"1f1f8-1f1fb":[[""],"","",["flag-sv"],38,2,15,0],"1f1f8-1f1fd":[[""],"","",["flag-sx"],38,3,15,0],"1f1f8-1f1fe":[[""],"","",["flag-sy"],38,4,15,0],"1f1f8-1f1ff":[[""],"","",["flag-sz"],38,5,15,0],"1f1f9-1f1e6":[[""],"","",["flag-ta"],38,6,15,0],"1f1f9-1f1e8":[[""],"","",["flag-tc"],38,7,15,0],"1f1f9-1f1e9":[[""],"","",["flag-td"],38,8,15,0],"1f1f9-1f1eb":[[""],"","",["flag-tf"],38,9,13,0],"1f1f9-1f1ec":[[""],"","",["flag-tg"],38,10,15,0],"1f1f9-1f1ed":[[""],"","",["flag-th"],38,11,15,0],"1f1f9-1f1ef":[[""],"","",["flag-tj"],38,12,15,0],"1f1f9-1f1f0":[[""],"","",["flag-tk"],38,13,15,0],"1f1f9-1f1f1":[[""],"","",["flag-tl"],38,14,15,0],"1f1f9-1f1f2":[[""],"","",["flag-tm"],38,15,15,0],"1f1f9-1f1f3":[[""],"","",["flag-tn"],38,16,15,0],"1f1f9-1f1f4":[[""],"","",["flag-to"],38,17,15,0],"1f1f9-1f1f7":[[""],"","",["flag-tr"],38,18,15,0],"1f1f9-1f1f9":[[""],"","",["flag-tt"],38,19,15,0],"1f1f9-1f1fb":[[""],"","",["flag-tv"],38,20,15,0],"1f1f9-1f1fc":[[""],"","",["flag-tw"],38,21,15,0],"1f1f9-1f1ff":[[""],"","",["flag-tz"],38,22,15,0],"1f1fa-1f1e6":[[""],"","",["flag-ua"],38,23,15,0],"1f1fa-1f1ec":[[""],"","",["flag-ug"],38,24,15,0],"1f1fa-1f1f2":[[""],"","",["flag-um"],38,25,13,0],"1f1fa-1f1f8":[[""],"","",["flag-us","us"],38,26,15,0],"1f1fa-1f1fe":[[""],"","",["flag-uy"],38,27,15,0],"1f1fa-1f1ff":[[""],"","",["flag-uz"],38,28,15,0],"1f1fb-1f1e6":[[""],"","",["flag-va"],38,29,15,0],"1f1fb-1f1e8":[[""],"","",["flag-vc"],38,30,15,0],"1f1fb-1f1ea":[[""],"","",["flag-ve"],38,31,15,0],"1f1fb-1f1ec":[[""],"","",["flag-vg"],38,32,15,0],"1f1fb-1f1ee":[[""],"","",["flag-vi"],38,33,15,0],"1f1fb-1f1f3":[[""],"","",["flag-vn"],38,34,15,0],"1f1fb-1f1fa":[[""],"","",["flag-vu"],38,35,15,0],"1f1fc-1f1eb":[[""],"","",["flag-wf"],38,36,13,0],"1f1fc-1f1f8":[[""],"","",["flag-ws"],38,37,15,0],"1f1fd-1f1f0":[[""],"","",["flag-xk"],38,38,13,0],"1f1fe-1f1ea":[[""],"","",["flag-ye"],38,39,15,0],"1f1fe-1f1f9":[[""],"","",["flag-yt"],38,40,13,0],"1f1ff-1f1e6":[[""],"","",["flag-za"],39,0,15,0],"1f1ff-1f1f2":[[""],"","",["flag-zm"],39,1,15,0],"1f1ff-1f1fc":[[""],"","",["flag-zw"],39,2,15,0],"1f468-200d-1f468-200d-1f466":[[""],"","",["man-man-boy"],39,3,15,0],"1f468-200d-1f468-200d-1f466-200d-1f466":[[""],"","",["man-man-boy-boy"],39,4,15,0],"1f468-200d-1f468-200d-1f467":[[""],"","",["man-man-girl"],39,5,15,0],"1f468-200d-1f468-200d-1f467-200d-1f466":[[""],"","",["man-man-girl-boy"],39,6,15,0],"1f468-200d-1f468-200d-1f467-200d-1f467":[[""],"","",["man-man-girl-girl"],39,7,15,0],"1f468-200d-1f469-200d-1f466-200d-1f466":[[""],"","",["man-woman-boy-boy"],39,8,15,0],"1f468-200d-1f469-200d-1f467":[[""],"","",["man-woman-girl"],39,9,15,0],"1f468-200d-1f469-200d-1f467-200d-1f466":[[""],"","",["man-woman-girl-boy"],39,10,15,0],"1f468-200d-1f469-200d-1f467-200d-1f467":[[""],"","",["man-woman-girl-girl"],39,11,15,0],"1f468-200d-2764-fe0f-200d-1f468":[[""],"","",["man-heart-man"],39,12,7,0],"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468":[[""],"","",["man-kiss-man"],39,13,7,0],"1f469-200d-1f469-200d-1f466":[[""],"","",["woman-woman-boy"],39,14,15,0],"1f469-200d-1f469-200d-1f466-200d-1f466":[[""],"","",["woman-woman-boy-boy"],39,15,15,0],"1f469-200d-1f469-200d-1f467":[[""],"","",["woman-woman-girl"],39,16,15,0],"1f469-200d-1f469-200d-1f467-200d-1f466":[[""],"","",["woman-woman-girl-boy"],39,17,15,0],"1f469-200d-1f469-200d-1f467-200d-1f467":[[""],"","",["woman-woman-girl-girl"],39,18,15,0],"1f469-200d-2764-fe0f-200d-1f469":[[""],"","",["woman-heart-woman"],39,19,7,0],"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469":[[""],"","",["woman-kiss-woman"],39,20,7,0]},c.prototype.emoticons_data={"<3":"heart",":o)":"monkey_face",":*":"kiss",":-*":"kiss","</3":"broken_heart","=)":"smiley","=-)":"smiley","C:":"smile","c:":"smile",":D":"smile",":-D":"smile",":>":"laughing",":->":"laughing",";)":"wink",";-)":"wink","8)":"sunglasses",":|":"neutral_face",":-|":"neutral_face",":\\":"confused",":-\\":"confused",":/":"confused",":-/":"confused",":p":"stuck_out_tongue",":-p":"stuck_out_tongue",":P":"stuck_out_tongue",":-P":"stuck_out_tongue",":b":"stuck_out_tongue",":-b":"stuck_out_tongue",";p":"stuck_out_tongue_winking_eye",";-p":"stuck_out_tongue_winking_eye",";b":"stuck_out_tongue_winking_eye",";-b":"stuck_out_tongue_winking_eye",";P":"stuck_out_tongue_winking_eye",";-P":"stuck_out_tongue_winking_eye","):":"disappointed",":(":"disappointed",":-(":"disappointed",">:(":"angry",">:-(":"angry",":'(":"cry","D:":"anguished",":o":"open_mouth",":-o":"open_mouth",":O":"open_mouth",":-O":"open_mouth",":)":"slightly_smiling_face","(:":"slightly_smiling_face",":-)":"slightly_smiling_face"},c.prototype.variations_data={"261d-1f3fb":[1,11,15],"261d-1f3fc":[1,12,15],"261d-1f3fd":[1,13,15],"261d-1f3fe":[1,14,15],"261d-1f3ff":[1,15,15],"26f9-1f3fb":[2,39,15],"26f9-1f3fc":[2,40,15],"26f9-1f3fd":[3,0,15],"26f9-1f3fe":[3,1,15],"26f9-1f3ff":[3,2,15],"270a-1f3fb":[3,10,15],"270a-1f3fc":[3,11,15],"270a-1f3fd":[3,12,15],"270a-1f3fe":[3,13,15],"270a-1f3ff":[3,14,15],"270b-1f3fb":[3,16,15],"270b-1f3fc":[3,17,15],"270b-1f3fd":[3,18,15],"270b-1f3fe":[3,19,15],"270b-1f3ff":[3,20,15],"270c-1f3fb":[3,22,15],"270c-1f3fc":[3,23,15],"270c-1f3fd":[3,24,15],"270c-1f3fe":[3,25,15],"270c-1f3ff":[3,26,15],"270d-1f3fb":[3,28,15],"270d-1f3fc":[3,29,15],"270d-1f3fd":[3,30,15],"270d-1f3fe":[3,31,15],"270d-1f3ff":[3,32,15],"1f385-1f3fb":[8,30,15],"1f385-1f3fc":[8,31,15],"1f385-1f3fd":[8,32,15],"1f385-1f3fe":[8,33,15],"1f385-1f3ff":[8,34,15],"1f3c3-1f3fb":[10,10,15],"1f3c3-1f3fc":[10,11,15],"1f3c3-1f3fd":[10,12,15],"1f3c3-1f3fe":[10,13,15],"1f3c3-1f3ff":[10,14,15],"1f3c4-1f3fb":[10,16,15],"1f3c4-1f3fc":[10,17,15],"1f3c4-1f3fd":[10,18,15],"1f3c4-1f3fe":[10,19,15],"1f3c4-1f3ff":[10,20,15],"1f3ca-1f3fb":[10,27,15],"1f3ca-1f3fc":[10,28,15],"1f3ca-1f3fd":[10,29,15],"1f3ca-1f3fe":[10,30,15],"1f3ca-1f3ff":[10,31,15],"1f3cb-1f3fb":[10,33,15],"1f3cb-1f3fc":[10,34,15],"1f3cb-1f3fd":[10,35,15],"1f3cb-1f3fe":[10,36,15],"1f3cb-1f3ff":[10,37,15],"1f442-1f3fb":[13,31,15],"1f442-1f3fc":[13,32,15],"1f442-1f3fd":[13,33,15],"1f442-1f3fe":[13,34,15],"1f442-1f3ff":[13,35,15],"1f443-1f3fb":[13,37,15],"1f443-1f3fc":[13,38,15],"1f443-1f3fd":[13,39,15],"1f443-1f3fe":[13,40,15],"1f443-1f3ff":[14,0,15],"1f446-1f3fb":[14,4,15],"1f446-1f3fc":[14,5,15],"1f446-1f3fd":[14,6,15],"1f446-1f3fe":[14,7,15],"1f446-1f3ff":[14,8,15],"1f447-1f3fb":[14,10,15],"1f447-1f3fc":[14,11,15],"1f447-1f3fd":[14,12,15],"1f447-1f3fe":[14,13,15],"1f447-1f3ff":[14,14,15],"1f448-1f3fb":[14,16,15],"1f448-1f3fc":[14,17,15],"1f448-1f3fd":[14,18,15],"1f448-1f3fe":[14,19,15],"1f448-1f3ff":[14,20,15],"1f449-1f3fb":[14,22,15],"1f449-1f3fc":[14,23,15],"1f449-1f3fd":[14,24,15],"1f449-1f3fe":[14,25,15],"1f449-1f3ff":[14,26,15],"1f44a-1f3fb":[14,28,15],"1f44a-1f3fc":[14,29,15],"1f44a-1f3fd":[14,30,15],"1f44a-1f3fe":[14,31,15],"1f44a-1f3ff":[14,32,15],"1f44b-1f3fb":[14,34,15],"1f44b-1f3fc":[14,35,15],"1f44b-1f3fd":[14,36,15],"1f44b-1f3fe":[14,37,15],"1f44b-1f3ff":[14,38,15],"1f44c-1f3fb":[14,40,15],"1f44c-1f3fc":[15,0,15],"1f44c-1f3fd":[15,1,15],"1f44c-1f3fe":[15,2,15],"1f44c-1f3ff":[15,3,15],"1f44d-1f3fb":[15,5,15],"1f44d-1f3fc":[15,6,15],"1f44d-1f3fd":[15,7,15],"1f44d-1f3fe":[15,8,15],"1f44d-1f3ff":[15,9,15],"1f44e-1f3fb":[15,11,15],"1f44e-1f3fc":[15,12,15],"1f44e-1f3fd":[15,13,15],"1f44e-1f3fe":[15,14,15],"1f44e-1f3ff":[15,15,15],"1f44f-1f3fb":[15,17,15],"1f44f-1f3fc":[15,18,15],"1f44f-1f3fd":[15,19,15],"1f44f-1f3fe":[15,20,15],"1f44f-1f3ff":[15,21,15],"1f450-1f3fb":[15,23,15],"1f450-1f3fc":[15,24,15],"1f450-1f3fd":[15,25,15],"1f450-1f3fe":[15,26,15],"1f450-1f3ff":[15,27,15],"1f466-1f3fb":[16,9,15],"1f466-1f3fc":[16,10,15],"1f466-1f3fd":[16,11,15],"1f466-1f3fe":[16,12,15],"1f466-1f3ff":[16,13,15],"1f467-1f3fb":[16,15,15],"1f467-1f3fc":[16,16,15],"1f467-1f3fd":[16,17,15],"1f467-1f3fe":[16,18,15],"1f467-1f3ff":[16,19,15],"1f468-1f3fb":[16,21,15],"1f468-1f3fc":[16,22,15],"1f468-1f3fd":[16,23,15],"1f468-1f3fe":[16,24,15],"1f468-1f3ff":[16,25,15],"1f469-1f3fb":[16,27,15],"1f469-1f3fc":[16,28,15],"1f469-1f3fd":[16,29,15],"1f469-1f3fe":[16,30,15],"1f469-1f3ff":[16,31,15],"1f46e-1f3fb":[16,37,15],"1f46e-1f3fc":[16,38,15],"1f46e-1f3fd":[16,39,15],"1f46e-1f3fe":[16,40,15],"1f46e-1f3ff":[17,0,15],"1f470-1f3fb":[17,3,15],"1f470-1f3fc":[17,4,15],"1f470-1f3fd":[17,5,15],"1f470-1f3fe":[17,6,15],"1f470-1f3ff":[17,7,15],"1f471-1f3fb":[17,9,15],"1f471-1f3fc":[17,10,15],"1f471-1f3fd":[17,11,15],"1f471-1f3fe":[17,12,15],"1f471-1f3ff":[17,13,15],"1f472-1f3fb":[17,15,15],"1f472-1f3fc":[17,16,15],"1f472-1f3fd":[17,17,15],"1f472-1f3fe":[17,18,15],"1f472-1f3ff":[17,19,15],"1f473-1f3fb":[17,21,15],"1f473-1f3fc":[17,22,15],"1f473-1f3fd":[17,23,15],"1f473-1f3fe":[17,24,15],"1f473-1f3ff":[17,25,15],"1f474-1f3fb":[17,27,15],"1f474-1f3fc":[17,28,15],"1f474-1f3fd":[17,29,15],"1f474-1f3fe":[17,30,15],"1f474-1f3ff":[17,31,15],"1f475-1f3fb":[17,33,15],"1f475-1f3fc":[17,34,15],"1f475-1f3fd":[17,35,15],"1f475-1f3fe":[17,36,15],"1f475-1f3ff":[17,37,15],"1f476-1f3fb":[17,39,15],"1f476-1f3fc":[17,40,15],"1f476-1f3fd":[18,0,15],"1f476-1f3fe":[18,1,15],"1f476-1f3ff":[18,2,15],"1f477-1f3fb":[18,4,15],"1f477-1f3fc":[18,5,15],"1f477-1f3fd":[18,6,15],"1f477-1f3fe":[18,7,15],"1f477-1f3ff":[18,8,15],"1f478-1f3fb":[18,10,15],"1f478-1f3fc":[18,11,15],"1f478-1f3fd":[18,12,15],"1f478-1f3fe":[18,13,15],"1f478-1f3ff":[18,14,15],"1f47c-1f3fb":[18,19,15],"1f47c-1f3fc":[18,20,15],"1f47c-1f3fd":[18,21,15],"1f47c-1f3fe":[18,22,15],"1f47c-1f3ff":[18,23,15],"1f481-1f3fb":[18,29,15],"1f481-1f3fc":[18,30,15],"1f481-1f3fd":[18,31,15],"1f481-1f3fe":[18,32,15],"1f481-1f3ff":[18,33,15],"1f482-1f3fb":[18,35,15],"1f482-1f3fc":[18,36,15],"1f482-1f3fd":[18,37,15],"1f482-1f3fe":[18,38,15],"1f482-1f3ff":[18,39,15],"1f483-1f3fb":[19,0,15],"1f483-1f3fc":[19,1,15],"1f483-1f3fd":[19,2,15],"1f483-1f3fe":[19,3,15],"1f483-1f3ff":[19,4,15],"1f485-1f3fb":[19,7,15],"1f485-1f3fc":[19,8,15],"1f485-1f3fd":[19,9,15],"1f485-1f3fe":[19,10,15],"1f485-1f3ff":[19,11,15],"1f486-1f3fb":[19,13,15],"1f486-1f3fc":[19,14,15],"1f486-1f3fd":[19,15,15],"1f486-1f3fe":[19,16,15],"1f486-1f3ff":[19,17,15],"1f487-1f3fb":[19,19,15],"1f487-1f3fc":[19,20,15],"1f487-1f3fd":[19,21,15],"1f487-1f3fe":[19,22,15],"1f487-1f3ff":[19,23,15],"1f4aa-1f3fb":[20,18,15],"1f4aa-1f3fc":[20,19,15],"1f4aa-1f3fd":[20,20,15],"1f4aa-1f3fe":[20,21,15],"1f4aa-1f3ff":[20,22,15],"1f575-1f3fb":[24,40,11],"1f575-1f3fc":[25,0,11],"1f575-1f3fd":[25,1,11],"1f575-1f3fe":[25,2,11],"1f575-1f3ff":[25,3,11],"1f590-1f3fb":[25,14,15],"1f590-1f3fc":[25,15,15],"1f590-1f3fd":[25,16,15],"1f590-1f3fe":[25,17,15],"1f590-1f3ff":[25,18,15],"1f595-1f3fb":[25,20,15],"1f595-1f3fc":[25,21,15],"1f595-1f3fd":[25,22,15],"1f595-1f3fe":[25,23,15],"1f595-1f3ff":[25,24,15],"1f596-1f3fb":[25,26,15],"1f596-1f3fc":[25,27,15],"1f596-1f3fd":[25,28,15],"1f596-1f3fe":[25,29,15],"1f596-1f3ff":[25,30,15],"1f645-1f3fb":[28,3,15],"1f645-1f3fc":[28,4,15],"1f645-1f3fd":[28,5,15],"1f645-1f3fe":[28,6,15],"1f645-1f3ff":[28,7,15],"1f646-1f3fb":[28,9,15],"1f646-1f3fc":[28,10,15],"1f646-1f3fd":[28,11,15],"1f646-1f3fe":[28,12,15],"1f646-1f3ff":[28,13,15],"1f647-1f3fb":[28,15,15],"1f647-1f3fc":[28,16,15],"1f647-1f3fd":[28,17,15],"1f647-1f3fe":[28,18,15],"1f647-1f3ff":[28,19,15],"1f64b-1f3fb":[28,24,15],"1f64b-1f3fc":[28,25,15],"1f64b-1f3fd":[28,26,15],"1f64b-1f3fe":[28,27,15],"1f64b-1f3ff":[28,28,15],"1f64c-1f3fb":[28,30,15],"1f64c-1f3fc":[28,31,15],"1f64c-1f3fd":[28,32,15],"1f64c-1f3fe":[28,33,15],"1f64c-1f3ff":[28,34,15],"1f64d-1f3fb":[28,36,15],"1f64d-1f3fc":[28,37,15],"1f64d-1f3fd":[28,38,15],"1f64d-1f3fe":[28,39,15],"1f64d-1f3ff":[28,40,15],"1f64e-1f3fb":[29,1,15],"1f64e-1f3fc":[29,2,15],"1f64e-1f3fd":[29,3,15],"1f64e-1f3fe":[29,4,15],"1f64e-1f3ff":[29,5,15],"1f64f-1f3fb":[29,7,15],"1f64f-1f3fc":[29,8,15],"1f64f-1f3fd":[29,9,15],"1f64f-1f3fe":[29,10,15],"1f64f-1f3ff":[29,11,15],"1f6a3-1f3fb":[30,7,15],"1f6a3-1f3fc":[30,8,15],"1f6a3-1f3fd":[30,9,15],"1f6a3-1f3fe":[30,10,15],"1f6a3-1f3ff":[30,11,15],"1f6b4-1f3fb":[30,29,15],"1f6b4-1f3fc":[30,30,15],"1f6b4-1f3fd":[30,31,15],"1f6b4-1f3fe":[30,32,15],"1f6b4-1f3ff":[30,33,15],"1f6b5-1f3fb":[30,35,15],"1f6b5-1f3fc":[30,36,15],"1f6b5-1f3fd":[30,37,15],"1f6b5-1f3fe":[30,38,15],"1f6b5-1f3ff":[30,39,15],"1f6b6-1f3fb":[31,0,15],"1f6b6-1f3fc":[31,1,15],"1f6b6-1f3fd":[31,2,15],"1f6b6-1f3fe":[31,3,15],"1f6b6-1f3ff":[31,4,15],"1f6c0-1f3fb":[31,15,15],"1f6c0-1f3fc":[31,16,15],"1f6c0-1f3fd":[31,17,15],"1f6c0-1f3fe":[31,18,15],"1f6c0-1f3ff":[31,19,15],"1f918-1f3fb":[32,10,15],"1f918-1f3fc":[32,11,15],"1f918-1f3fd":[32,12,15],"1f918-1f3fe":[32,13,15],"1f918-1f3ff":[32,14,15]},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.EmojiConvertor=c):"function"==typeof define&&define.amd?define(function(){return c}):a.EmojiConvertor=c}.call(function(){return this||("undefined"!=typeof window?window:global)}()),function(a,b){"function"==typeof define&&define.amd?define(["js-emoji"],b):"object"==typeof exports?module.exports=b(require("js-emoji")):a.wdtEmojiBundle=b(a.EmojiConvertor)}(this,function(a){function b(a,b){var c="string"==typeof a?a:h(a);return c.indexOf(" "+b+" ")>=0}function c(a,c){var d=h(a),e=d+c;b(d,c)||(a.className=e.substring(1))}function d(a,c){for(var d=document.querySelectorAll(a),e=0;e<d.length;e++){var f=d[e],g=h(f),i=g+c;if(b(g,c))return;f.className=i.substring(1)}}function e(a,c){var d,e=h(a);b(a,c)&&(d=e.replace(" "+c+" "," "),a.className=d.substring(1,d.length-1))}function f(a,c){for(var d=document.querySelectorAll(a),e=0;e<d.length;e++){var f,g=d[e],i=h(g);if(!b(g,c))return;f=i.replace(" "+c+" "," "),g.className=f.substring(1,f.length-1)}}function g(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d]==a)return!0;return!1}function h(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}var i={};i.defaults={pickerColors:["green","pink","yellow","blue","gray"],textMode:!0,disabledCategories:["Skin Tones"],sectionOrders:{Recent:10,Custom:9,People:8,Nature:7,Foods:6,Activity:5,Places:4,Objects:3,Symbols:2,Flags:1},skinColor:"skin-1",allowNative:!1,emojiType:"apple",emojiSheets:{apple:"/sheets/sheet_apple_64_indexed_128.png",google:"/sheets/sheet_google_64_indexed_128.png",twitter:"/sheets/sheet_twitter_64_indexed_128.png",emojione:"/sheets/sheet_emojione_64_indexed_128.png",facebook:"/sheets/sheet_facebook_64_indexed_128.png",messenger:"/sheets/sheet_messenger_64_indexed_128.png"},emojiData:{Symbols:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY BLACK HEART",short_name:"heart",short_names:["heart"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"YELLOW HEART",short_name:"yellow_heart",short_names:["yellow_heart"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GREEN HEART",short_name:"green_heart",short_names:["green_heart"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLUE HEART",short_name:"blue_heart",short_names:["blue_heart"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PURPLE HEART",short_name:"purple_heart",short_names:["purple_heart"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BROKEN HEART",short_name:"broken_heart",short_names:["broken_heart"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HEAVY HEART EXCLAMATION MARK ORNAMENT",short_name:"heavy_heart_exclamation_mark_ornament",short_names:["heavy_heart_exclamation_mark_ornament"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TWO HEARTS",short_name:"two_hearts",short_names:["two_hearts"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,
has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REVOLVING HEARTS",short_name:"revolving_hearts",short_names:["revolving_hearts"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BEATING HEART",short_name:"heartbeat",short_names:["heartbeat"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GROWING HEART",short_name:"heartpulse",short_names:["heartpulse"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPARKLING HEART",short_name:"sparkling_heart",short_names:["sparkling_heart"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEART WITH ARROW",short_name:"cupid",short_names:["cupid"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEART WITH RIBBON",short_name:"gift_heart",short_names:["gift_heart"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEART DECORATION",short_name:"heart_decoration",short_names:["heart_decoration"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PEACE SYMBOL",short_name:"peace_symbol",short_names:["peace_symbol"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LATIN CROSS",short_name:"latin_cross",short_names:["latin_cross"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"STAR AND CRESCENT",short_name:"star_and_crescent",short_names:["star_and_crescent"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"OM SYMBOL",short_name:"om_symbol",short_names:["om_symbol"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WHEEL OF DHARMA",short_name:"wheel_of_dharma",short_names:["wheel_of_dharma"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"STAR OF DAVID",short_name:"star_of_david",short_names:["star_of_david"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SIX POINTED STAR WITH MIDDLE DOT",short_name:"six_pointed_star",short_names:["six_pointed_star"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MENORAH WITH NINE BRANCHES",short_name:"menorah_with_nine_branches",short_names:["menorah_with_nine_branches"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"YIN YANG",short_name:"yin_yang",short_names:["yin_yang"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ORTHODOX CROSS",short_name:"orthodox_cross",short_names:["orthodox_cross"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PLACE OF WORSHIP",short_name:"place_of_worship",short_names:["place_of_worship"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPHIUCHUS",short_name:"ophiuchus",short_names:["ophiuchus"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ARIES",short_name:"aries",short_names:["aries"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TAURUS",short_name:"taurus",short_names:["taurus"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GEMINI",short_name:"gemini",short_names:["gemini"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CANCER",short_name:"cancer",short_names:["cancer"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEO",short_name:"leo",short_names:["leo"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIRGO",short_name:"virgo",short_names:["virgo"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LIBRA",short_name:"libra",short_names:["libra"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SCORPIUS",short_name:"scorpius",short_names:["scorpius"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SAGITTARIUS",short_name:"sagittarius",short_names:["sagittarius"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAPRICORN",short_name:"capricorn",short_names:["capricorn"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AQUARIUS",short_name:"aquarius",short_names:["aquarius"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PISCES",short_name:"pisces",short_names:["pisces"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED ID",short_name:"id",short_names:["id"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ATOM SYMBOL",short_name:"atom_symbol",short_names:["atom_symbol"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-7A7A",short_name:"u7a7a",short_names:["u7a7a"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-5272",short_name:"u5272",short_names:["u5272"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RADIOACTIVE SIGN",short_name:"radioactive_sign",short_names:["radioactive_sign"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BIOHAZARD SIGN",short_name:"biohazard_sign",short_names:["biohazard_sign"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOBILE PHONE OFF",short_name:"mobile_phone_off",short_names:["mobile_phone_off"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIBRATION MODE",short_name:"vibration_mode",short_names:["vibration_mode"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-6709",short_name:"u6709",short_names:["u6709"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-7121",short_name:"u7121",short_names:["u7121"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-7533",short_name:"u7533",short_names:["u7533"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-55B6",short_name:"u55b6",short_names:["u55b6"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-6708",short_name:"u6708",short_names:["u6708"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EIGHT POINTED BLACK STAR",short_name:"eight_pointed_black_star",short_names:["eight_pointed_black_star"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED VS",short_name:"vs",short_names:["vs"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCLED IDEOGRAPH ACCEPT",short_name:"accept",short_names:["accept"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE FLOWER",short_name:"white_flower",short_names:["white_flower"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCLED IDEOGRAPH ADVANTAGE",short_name:"ideograph_advantage",short_names:["ideograph_advantage"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCLED IDEOGRAPH SECRET",short_name:"secret",short_names:["secret"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCLED IDEOGRAPH CONGRATULATION",short_name:"congratulations",short_names:["congratulations"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-5408",short_name:"u5408",short_names:["u5408"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-6E80",short_name:"u6e80",short_names:["u6e80"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-7981",short_name:"u7981",short_names:["u7981"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED LATIN CAPITAL LETTER A",short_name:"a",short_names:["a"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED LATIN CAPITAL LETTER B",short_name:"b",short_names:["b"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED AB",short_name:"ab",short_names:["ab"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CL",short_name:"cl",short_names:["cl"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED LATIN CAPITAL LETTER O",short_name:"o2",short_names:["o2"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED SOS",short_name:"sos",short_names:["sos"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO ENTRY",short_name:"no_entry",short_names:["no_entry"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NAME BADGE",short_name:"name_badge",short_names:["name_badge"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO ENTRY SIGN",short_name:"no_entry_sign",short_names:["no_entry_sign"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CROSS MARK",short_name:"x",short_names:["x"],sort_order:72},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY LARGE CIRCLE",short_name:"o",short_names:["o"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANGER SYMBOL",short_name:"anger",short_names:["anger"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOT SPRINGS",short_name:"hotsprings",short_names:["hotsprings"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO PEDESTRIANS",short_name:"no_pedestrians",short_names:["no_pedestrians"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DO NOT LITTER SYMBOL",short_name:"do_not_litter",short_names:["do_not_litter"],sort_order:77},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO BICYCLES",short_name:"no_bicycles",short_names:["no_bicycles"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NON-POTABLE WATER SYMBOL",short_name:"non-potable_water",short_names:["non-potable_water"],sort_order:79},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO ONE UNDER EIGHTEEN SYMBOL",short_name:"underage",short_names:["underage"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO MOBILE PHONES",short_name:"no_mobile_phones",short_names:["no_mobile_phones"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY EXCLAMATION MARK SYMBOL",short_name:"exclamation",short_names:["exclamation","heavy_exclamation_mark"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE EXCLAMATION MARK ORNAMENT",short_name:"grey_exclamation",short_names:["grey_exclamation"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK QUESTION MARK ORNAMENT",short_name:"question",short_names:["question"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE QUESTION MARK ORNAMENT",short_name:"grey_question",short_names:["grey_question"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOUBLE EXCLAMATION MARK",short_name:"bangbang",short_names:["bangbang"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EXCLAMATION QUESTION MARK",short_name:"interrobang",short_names:["interrobang"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HUNDRED POINTS SYMBOL",short_name:"100",short_names:["100"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOW BRIGHTNESS SYMBOL",short_name:"low_brightness",short_names:["low_brightness"],sort_order:89},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIGH BRIGHTNESS SYMBOL",short_name:"high_brightness",short_names:["high_brightness"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRIDENT EMBLEM",short_name:"trident",short_names:["trident"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FLEUR-DE-LIS",short_name:"fleur_de_lis",short_names:["fleur_de_lis"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PART ALTERNATION MARK",short_name:"part_alternation_mark",short_names:["part_alternation_mark"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WARNING SIGN",short_name:"warning",short_names:["warning"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHILDREN CROSSING",short_name:"children_crossing",short_names:["children_crossing"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE SYMBOL FOR BEGINNER",short_name:"beginner",short_names:["beginner"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK UNIVERSAL RECYCLING SYMBOL",short_name:"recycle",short_names:["recycle"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED CJK UNIFIED IDEOGRAPH-6307",short_name:"u6307",short_names:["u6307"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHART WITH UPWARDS TREND AND YEN SIGN",short_name:"chart",short_names:["chart"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPARKLE",short_name:"sparkle",short_names:["sparkle"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EIGHT SPOKED ASTERISK",short_name:"eight_spoked_asterisk",short_names:["eight_spoked_asterisk"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED CROSS MARK",short_name:"negative_squared_cross_mark",short_names:["negative_squared_cross_mark"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE HEAVY CHECK MARK",short_name:"white_check_mark",short_names:["white_check_mark"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DIAMOND SHAPE WITH A DOT INSIDE",short_name:"diamond_shape_with_a_dot_inside",short_names:["diamond_shape_with_a_dot_inside"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CYCLONE",short_name:"cyclone",short_names:["cyclone"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOUBLE CURLY LOOP",short_name:"loop",short_names:["loop"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GLOBE WITH MERIDIANS",short_name:"globe_with_meridians",short_names:["globe_with_meridians"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCLED LATIN CAPITAL LETTER M",short_name:"m",short_names:["m"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AUTOMATED TELLER MACHINE",short_name:"atm",short_names:["atm"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED KATAKANA SA",short_name:"sa",short_names:["sa"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PASSPORT CONTROL",short_name:"passport_control",short_names:["passport_control"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CUSTOMS",short_name:"customs",short_names:["customs"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BAGGAGE CLAIM",short_name:"baggage_claim",short_names:["baggage_claim"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEFT LUGGAGE",short_name:"left_luggage",short_names:["left_luggage"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHEELCHAIR SYMBOL",short_name:"wheelchair",short_names:["wheelchair"],sort_order:115},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NO SMOKING SYMBOL",short_name:"no_smoking",short_names:["no_smoking"],sort_order:116},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WATER CLOSET",short_name:"wc",short_names:["wc"],sort_order:117},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEGATIVE SQUARED LATIN CAPITAL LETTER P",short_name:"parking",short_names:["parking"],sort_order:118},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POTABLE WATER SYMBOL",short_name:"potable_water",short_names:["potable_water"],sort_order:119},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MENS SYMBOL",short_name:"mens",short_names:["mens"],sort_order:120},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMENS SYMBOL",short_name:"womens",short_names:["womens"],sort_order:121},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BABY SYMBOL",short_name:"baby_symbol",short_names:["baby_symbol"],sort_order:122},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RESTROOM",short_name:"restroom",short_names:["restroom"],sort_order:123},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PUT LITTER IN ITS PLACE SYMBOL",short_name:"put_litter_in_its_place",short_names:["put_litter_in_its_place"],sort_order:124},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CINEMA",short_name:"cinema",short_names:["cinema"],sort_order:125},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANTENNA WITH BARS",short_name:"signal_strength",short_names:["signal_strength"],sort_order:126},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED KATAKANA KOKO",short_name:"koko",short_names:["koko"],sort_order:127},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED NG",short_name:"ng",short_names:["ng"],sort_order:128},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED OK",short_name:"ok",short_names:["ok"],sort_order:129},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED UP WITH EXCLAMATION MARK",short_name:"up",short_names:["up"],sort_order:130},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED COOL",short_name:"cool",short_names:["cool"],sort_order:131},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED NEW",short_name:"new",short_names:["new"],sort_order:132},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SQUARED FREE",short_name:"free",short_names:["free"],sort_order:133},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 0",short_name:"zero",short_names:["zero"],sort_order:134},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 1",short_name:"one",short_names:["one"],sort_order:135},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 2",short_name:"two",short_names:["two"],sort_order:136},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 3",short_name:"three",short_names:["three"],sort_order:137},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 4",short_name:"four",short_names:["four"],sort_order:138},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 5",short_name:"five",short_names:["five"],sort_order:139},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 6",short_name:"six",short_names:["six"],sort_order:140},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 7",short_name:"seven",short_names:["seven"],sort_order:141},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 8",short_name:"eight",short_names:["eight"],sort_order:142},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"KEYCAP 9",short_name:"nine",short_names:["nine"],sort_order:143},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KEYCAP TEN",short_name:"keycap_ten",short_names:["keycap_ten"],sort_order:144},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:null,short_name:"keycap_star",short_names:["keycap_star"],sort_order:145},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INPUT SYMBOL FOR NUMBERS",short_name:"1234",short_names:["1234"],sort_order:146},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK RIGHT-POINTING TRIANGLE",short_name:"arrow_forward",short_names:["arrow_forward"],sort_order:147},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DOUBLE VERTICAL BAR",short_name:"double_vertical_bar",short_names:["double_vertical_bar"],sort_order:148},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BLACK RIGHT-POINTING TRIANGLE WITH DOUBLE VERTICAL BAR",short_name:"black_right_pointing_triangle_with_double_vertical_bar",short_names:["black_right_pointing_triangle_with_double_vertical_bar"],sort_order:149},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BLACK SQUARE FOR STOP",short_name:"black_square_for_stop",short_names:["black_square_for_stop"],sort_order:150},{has_img_apple:!1,has_img_google:!0,has_img_twitter:!1,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!1,name:"EJECT SYMBOL",short_name:"eject",short_names:["eject"],sort_order:151},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BLACK CIRCLE FOR RECORD",short_name:"black_circle_for_record",short_names:["black_circle_for_record"],sort_order:152},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BLACK RIGHT-POINTING DOUBLE TRIANGLE WITH VERTICAL BAR",short_name:"black_right_pointing_double_triangle_with_vertical_bar",short_names:["black_right_pointing_double_triangle_with_vertical_bar"],sort_order:153},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BLACK LEFT-POINTING DOUBLE TRIANGLE WITH VERTICAL BAR",short_name:"black_left_pointing_double_triangle_with_vertical_bar",short_names:["black_left_pointing_double_triangle_with_vertical_bar"],sort_order:154},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK RIGHT-POINTING DOUBLE TRIANGLE",short_name:"fast_forward",short_names:["fast_forward"],sort_order:155},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK LEFT-POINTING DOUBLE TRIANGLE",short_name:"rewind",short_names:["rewind"],sort_order:156},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TWISTED RIGHTWARDS ARROWS",short_name:"twisted_rightwards_arrows",short_names:["twisted_rightwards_arrows"],sort_order:157},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCKWISE RIGHTWARDS AND LEFTWARDS OPEN CIRCLE ARROWS",short_name:"repeat",short_names:["repeat"],sort_order:158},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCKWISE RIGHTWARDS AND LEFTWARDS OPEN CIRCLE ARROWS WITH CIRCLED ONE OVERLAY",short_name:"repeat_one",short_names:["repeat_one"],sort_order:159},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK LEFT-POINTING TRIANGLE",short_name:"arrow_backward",short_names:["arrow_backward"],sort_order:160},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,
has_img_facebook:!0,has_img_messenger:!0,name:"UP-POINTING SMALL RED TRIANGLE",short_name:"arrow_up_small",short_names:["arrow_up_small"],sort_order:161},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOWN-POINTING SMALL RED TRIANGLE",short_name:"arrow_down_small",short_names:["arrow_down_small"],sort_order:162},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK UP-POINTING DOUBLE TRIANGLE",short_name:"arrow_double_up",short_names:["arrow_double_up"],sort_order:163},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK DOWN-POINTING DOUBLE TRIANGLE",short_name:"arrow_double_down",short_names:["arrow_double_down"],sort_order:164},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK RIGHTWARDS ARROW",short_name:"arrow_right",short_names:["arrow_right"],sort_order:165},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEFTWARDS BLACK ARROW",short_name:"arrow_left",short_names:["arrow_left"],sort_order:166},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"UPWARDS BLACK ARROW",short_name:"arrow_up",short_names:["arrow_up"],sort_order:167},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOWNWARDS BLACK ARROW",short_name:"arrow_down",short_names:["arrow_down"],sort_order:168},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NORTH EAST ARROW",short_name:"arrow_upper_right",short_names:["arrow_upper_right"],sort_order:169},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SOUTH EAST ARROW",short_name:"arrow_lower_right",short_names:["arrow_lower_right"],sort_order:170},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SOUTH WEST ARROW",short_name:"arrow_lower_left",short_names:["arrow_lower_left"],sort_order:171},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NORTH WEST ARROW",short_name:"arrow_upper_left",short_names:["arrow_upper_left"],sort_order:172},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"UP DOWN ARROW",short_name:"arrow_up_down",short_names:["arrow_up_down"],sort_order:173},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEFT RIGHT ARROW",short_name:"left_right_arrow",short_names:["left_right_arrow"],sort_order:174},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANTICLOCKWISE DOWNWARDS AND UPWARDS OPEN CIRCLE ARROWS",short_name:"arrows_counterclockwise",short_names:["arrows_counterclockwise"],sort_order:175},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RIGHTWARDS ARROW WITH HOOK",short_name:"arrow_right_hook",short_names:["arrow_right_hook"],sort_order:176},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEFTWARDS ARROW WITH HOOK",short_name:"leftwards_arrow_with_hook",short_names:["leftwards_arrow_with_hook"],sort_order:177},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ARROW POINTING RIGHTWARDS THEN CURVING UPWARDS",short_name:"arrow_heading_up",short_names:["arrow_heading_up"],sort_order:178},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ARROW POINTING RIGHTWARDS THEN CURVING DOWNWARDS",short_name:"arrow_heading_down",short_names:["arrow_heading_down"],sort_order:179},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"HASH KEY",short_name:"hash",short_names:["hash"],sort_order:180},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INFORMATION SOURCE",short_name:"information_source",short_names:["information_source"],sort_order:181},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INPUT SYMBOL FOR LATIN LETTERS",short_name:"abc",short_names:["abc"],sort_order:182},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INPUT SYMBOL FOR LATIN SMALL LETTERS",short_name:"abcd",short_names:["abcd"],sort_order:183},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INPUT SYMBOL FOR LATIN CAPITAL LETTERS",short_name:"capital_abcd",short_names:["capital_abcd"],sort_order:184},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INPUT SYMBOL FOR SYMBOLS",short_name:"symbols",short_names:["symbols"],sort_order:185},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MUSICAL NOTE",short_name:"musical_note",short_names:["musical_note"],sort_order:186},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MULTIPLE MUSICAL NOTES",short_name:"notes",short_names:["notes"],sort_order:187},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WAVY DASH",short_name:"wavy_dash",short_names:["wavy_dash"],sort_order:188},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CURLY LOOP",short_name:"curly_loop",short_names:["curly_loop"],sort_order:189},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY CHECK MARK",short_name:"heavy_check_mark",short_names:["heavy_check_mark"],sort_order:190},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCKWISE DOWNWARDS AND UPWARDS OPEN CIRCLE ARROWS",short_name:"arrows_clockwise",short_names:["arrows_clockwise"],sort_order:191},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY PLUS SIGN",short_name:"heavy_plus_sign",short_names:["heavy_plus_sign"],sort_order:192},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY MINUS SIGN",short_name:"heavy_minus_sign",short_names:["heavy_minus_sign"],sort_order:193},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY DIVISION SIGN",short_name:"heavy_division_sign",short_names:["heavy_division_sign"],sort_order:194},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY MULTIPLICATION X",short_name:"heavy_multiplication_x",short_names:["heavy_multiplication_x"],sort_order:195},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAVY DOLLAR SIGN",short_name:"heavy_dollar_sign",short_names:["heavy_dollar_sign"],sort_order:196},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CURRENCY EXCHANGE",short_name:"currency_exchange",short_names:["currency_exchange"],sort_order:197},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!1,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"COPYRIGHT SIGN",short_name:"copyright",short_names:["copyright"],sort_order:198},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!1,has_img_emojione:!0,has_img_facebook:!1,has_img_messenger:!1,name:"REGISTERED SIGN",short_name:"registered",short_names:["registered"],sort_order:199},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!1,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRADE MARK SIGN",short_name:"tm",short_names:["tm"],sort_order:200},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"END WITH LEFTWARDS ARROW ABOVE",short_name:"end",short_names:["end"],sort_order:201},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BACK WITH LEFTWARDS ARROW ABOVE",short_name:"back",short_names:["back"],sort_order:202},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ON WITH EXCLAMATION MARK WITH LEFT RIGHT ARROW ABOVE",short_name:"on",short_names:["on"],sort_order:203},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TOP WITH UPWARDS ARROW ABOVE",short_name:"top",short_names:["top"],sort_order:204},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SOON WITH RIGHTWARDS ARROW ABOVE",short_name:"soon",short_names:["soon"],sort_order:205},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BALLOT BOX WITH CHECK",short_name:"ballot_box_with_check",short_names:["ballot_box_with_check"],sort_order:206},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RADIO BUTTON",short_name:"radio_button",short_names:["radio_button"],sort_order:207},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MEDIUM WHITE CIRCLE",short_name:"white_circle",short_names:["white_circle"],sort_order:208},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MEDIUM BLACK CIRCLE",short_name:"black_circle",short_names:["black_circle"],sort_order:209},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LARGE RED CIRCLE",short_name:"red_circle",short_names:["red_circle"],sort_order:210},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LARGE BLUE CIRCLE",short_name:"large_blue_circle",short_names:["large_blue_circle"],sort_order:211},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMALL ORANGE DIAMOND",short_name:"small_orange_diamond",short_names:["small_orange_diamond"],sort_order:212},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMALL BLUE DIAMOND",short_name:"small_blue_diamond",short_names:["small_blue_diamond"],sort_order:213},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LARGE ORANGE DIAMOND",short_name:"large_orange_diamond",short_names:["large_orange_diamond"],sort_order:214},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LARGE BLUE DIAMOND",short_name:"large_blue_diamond",short_names:["large_blue_diamond"],sort_order:215},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"UP-POINTING RED TRIANGLE",short_name:"small_red_triangle",short_names:["small_red_triangle"],sort_order:216},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK SMALL SQUARE",short_name:"black_small_square",short_names:["black_small_square"],sort_order:217},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE SMALL SQUARE",short_name:"white_small_square",short_names:["white_small_square"],sort_order:218},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK LARGE SQUARE",short_name:"black_large_square",short_names:["black_large_square"],sort_order:219},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE LARGE SQUARE",short_name:"white_large_square",short_names:["white_large_square"],sort_order:220},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOWN-POINTING RED TRIANGLE",short_name:"small_red_triangle_down",short_names:["small_red_triangle_down"],sort_order:221},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK MEDIUM SQUARE",short_name:"black_medium_square",short_names:["black_medium_square"],sort_order:222},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE MEDIUM SQUARE",short_name:"white_medium_square",short_names:["white_medium_square"],sort_order:223},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK MEDIUM SMALL SQUARE",short_name:"black_medium_small_square",short_names:["black_medium_small_square"],sort_order:224},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE MEDIUM SMALL SQUARE",short_name:"white_medium_small_square",short_names:["white_medium_small_square"],sort_order:225},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK SQUARE BUTTON",short_name:"black_square_button",short_names:["black_square_button"],sort_order:226},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE SQUARE BUTTON",short_name:"white_square_button",short_names:["white_square_button"],sort_order:227},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEAKER",short_name:"speaker",short_names:["speaker"],sort_order:228},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEAKER WITH ONE SOUND WAVE",short_name:"sound",short_names:["sound"],sort_order:229},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEAKER WITH THREE SOUND WAVES",short_name:"loud_sound",short_names:["loud_sound"],sort_order:230},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEAKER WITH CANCELLATION STROKE",short_name:"mute",short_names:["mute"],sort_order:231},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHEERING MEGAPHONE",short_name:"mega",short_names:["mega"],sort_order:232},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PUBLIC ADDRESS LOUDSPEAKER",short_name:"loudspeaker",short_names:["loudspeaker"],sort_order:233},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BELL",short_name:"bell",short_names:["bell"],sort_order:234},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BELL WITH CANCELLATION STROKE",short_name:"no_bell",short_names:["no_bell"],sort_order:235},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PLAYING CARD BLACK JOKER",short_name:"black_joker",short_names:["black_joker"],sort_order:236},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAHJONG TILE RED DRAGON",short_name:"mahjong",short_names:["mahjong"],sort_order:237},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK SPADE SUIT",short_name:"spades",short_names:["spades"],sort_order:238},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK CLUB SUIT",short_name:"clubs",short_names:["clubs"],sort_order:239},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK HEART SUIT",short_name:"hearts",short_names:["hearts"],sort_order:240},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK DIAMOND SUIT",short_name:"diamonds",short_names:["diamonds"],sort_order:241},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FLOWER PLAYING CARDS",short_name:"flower_playing_cards",short_names:["flower_playing_cards"],sort_order:242},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"THOUGHT BALLOON",short_name:"thought_balloon",short_names:["thought_balloon"],sort_order:243},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RIGHT ANGER BUBBLE",short_name:"right_anger_bubble",short_names:["right_anger_bubble"],sort_order:244},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEECH BALLOON",short_name:"speech_balloon",short_names:["speech_balloon"],sort_order:245},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!1,name:"LEFT SPEECH BUBBLE",short_name:"left_speech_bubble",short_names:["left_speech_bubble"],sort_order:246},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE ONE OCLOCK",short_name:"clock1",short_names:["clock1"],sort_order:247},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TWO OCLOCK",short_name:"clock2",short_names:["clock2"],sort_order:248},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE THREE OCLOCK",short_name:"clock3",short_names:["clock3"],sort_order:249},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE FOUR OCLOCK",short_name:"clock4",short_names:["clock4"],sort_order:250},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE FIVE OCLOCK",short_name:"clock5",short_names:["clock5"],sort_order:251},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE SIX OCLOCK",short_name:"clock6",short_names:["clock6"],sort_order:252},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE SEVEN OCLOCK",short_name:"clock7",short_names:["clock7"],sort_order:253},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE EIGHT OCLOCK",short_name:"clock8",short_names:["clock8"],sort_order:254},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE NINE OCLOCK",short_name:"clock9",short_names:["clock9"],sort_order:255},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TEN OCLOCK",short_name:"clock10",short_names:["clock10"],sort_order:256},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE ELEVEN OCLOCK",short_name:"clock11",short_names:["clock11"],sort_order:257},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TWELVE OCLOCK",short_name:"clock12",short_names:["clock12"],sort_order:258},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE ONE-THIRTY",short_name:"clock130",short_names:["clock130"],sort_order:259},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TWO-THIRTY",short_name:"clock230",short_names:["clock230"],sort_order:260},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE THREE-THIRTY",short_name:"clock330",short_names:["clock330"],sort_order:261},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE FOUR-THIRTY",short_name:"clock430",short_names:["clock430"],sort_order:262},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE FIVE-THIRTY",short_name:"clock530",short_names:["clock530"],sort_order:263},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE SIX-THIRTY",short_name:"clock630",short_names:["clock630"],sort_order:264},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE SEVEN-THIRTY",short_name:"clock730",short_names:["clock730"],sort_order:265},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE EIGHT-THIRTY",short_name:"clock830",short_names:["clock830"],sort_order:266},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE NINE-THIRTY",short_name:"clock930",short_names:["clock930"],sort_order:267},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TEN-THIRTY",short_name:"clock1030",short_names:["clock1030"],sort_order:268},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE ELEVEN-THIRTY",short_name:"clock1130",short_names:["clock1130"],sort_order:269},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOCK FACE TWELVE-THIRTY",short_name:"clock1230",short_names:["clock1230"],sort_order:270}],Objects:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WATCH",short_name:"watch",short_names:["watch"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOBILE PHONE",short_name:"iphone",short_names:["iphone"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOBILE PHONE WITH RIGHTWARDS ARROW AT LEFT",short_name:"calling",short_names:["calling"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSONAL COMPUTER",short_name:"computer",short_names:["computer"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"KEYBOARD",short_name:"keyboard",short_names:["keyboard"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DESKTOP COMPUTER",short_name:"desktop_computer",short_names:["desktop_computer"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PRINTER",short_name:"printer",short_names:["printer"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"THREE BUTTON MOUSE",short_name:"three_button_mouse",short_names:["three_button_mouse"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"TRACKBALL",short_name:"trackball",short_names:["trackball"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"JOYSTICK",short_name:"joystick",short_names:["joystick"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"COMPRESSION",short_name:"compression",short_names:["compression"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MINIDISC",short_name:"minidisc",short_names:["minidisc"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FLOPPY DISK",short_name:"floppy_disk",short_names:["floppy_disk"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPTICAL DISC",short_name:"cd",short_names:["cd"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DVD",short_name:"dvd",short_names:["dvd"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIDEOCASSETTE",short_name:"vhs",short_names:["vhs"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAMERA",short_name:"camera",short_names:["camera"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CAMERA WITH FLASH",short_name:"camera_with_flash",short_names:["camera_with_flash"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIDEO CAMERA",short_name:"video_camera",short_names:["video_camera"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOVIE CAMERA",short_name:"movie_camera",short_names:["movie_camera"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FILM PROJECTOR",short_name:"film_projector",short_names:["film_projector"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FILM FRAMES",short_name:"film_frames",short_names:["film_frames"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TELEPHONE RECEIVER",short_name:"telephone_receiver",short_names:["telephone_receiver"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK TELEPHONE",short_name:"phone",short_names:["phone","telephone"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PAGER",short_name:"pager",short_names:["pager"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FAX MACHINE",short_name:"fax",short_names:["fax"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TELEVISION",short_name:"tv",short_names:["tv"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RADIO",short_name:"radio",short_names:["radio"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"STUDIO MICROPHONE",short_name:"studio_microphone",short_names:["studio_microphone"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LEVEL SLIDER",short_name:"level_slider",short_names:["level_slider"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CONTROL KNOBS",short_name:"control_knobs",short_names:["control_knobs"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"STOPWATCH",short_name:"stopwatch",short_names:["stopwatch"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"TIMER CLOCK",short_name:"timer_clock",short_names:["timer_clock"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ALARM CLOCK",short_name:"alarm_clock",short_names:["alarm_clock"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MANTELPIECE CLOCK",short_name:"mantelpiece_clock",short_names:["mantelpiece_clock"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOURGLASS WITH FLOWING SAND",short_name:"hourglass_flowing_sand",short_names:["hourglass_flowing_sand"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOURGLASS",short_name:"hourglass",short_names:["hourglass"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SATELLITE ANTENNA",short_name:"satellite_antenna",short_names:["satellite_antenna"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BATTERY",short_name:"battery",short_names:["battery"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ELECTRIC PLUG",short_name:"electric_plug",short_names:["electric_plug"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,
name:"ELECTRIC LIGHT BULB",short_name:"bulb",short_names:["bulb"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ELECTRIC TORCH",short_name:"flashlight",short_names:["flashlight"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CANDLE",short_name:"candle",short_names:["candle"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WASTEBASKET",short_name:"wastebasket",short_names:["wastebasket"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"OIL DRUM",short_name:"oil_drum",short_names:["oil_drum"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MONEY WITH WINGS",short_name:"money_with_wings",short_names:["money_with_wings"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANKNOTE WITH DOLLAR SIGN",short_name:"dollar",short_names:["dollar"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANKNOTE WITH YEN SIGN",short_name:"yen",short_names:["yen"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANKNOTE WITH EURO SIGN",short_name:"euro",short_names:["euro"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANKNOTE WITH POUND SIGN",short_name:"pound",short_names:["pound"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MONEY BAG",short_name:"moneybag",short_names:["moneybag"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CREDIT CARD",short_name:"credit_card",short_names:["credit_card"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GEM STONE",short_name:"gem",short_names:["gem"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SCALES",short_name:"scales",short_names:["scales"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WRENCH",short_name:"wrench",short_names:["wrench"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HAMMER",short_name:"hammer",short_names:["hammer"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HAMMER AND PICK",short_name:"hammer_and_pick",short_names:["hammer_and_pick"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HAMMER AND WRENCH",short_name:"hammer_and_wrench",short_names:["hammer_and_wrench"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PICK",short_name:"pick",short_names:["pick"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NUT AND BOLT",short_name:"nut_and_bolt",short_names:["nut_and_bolt"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"GEAR",short_name:"gear",short_names:["gear"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CHAINS",short_name:"chains",short_names:["chains"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PISTOL",short_name:"gun",short_names:["gun"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOMB",short_name:"bomb",short_names:["bomb"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOCHO",short_name:"hocho",short_names:["hocho","knife"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DAGGER KNIFE",short_name:"dagger_knife",short_names:["dagger_knife"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CROSSED SWORDS",short_name:"crossed_swords",short_names:["crossed_swords"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SHIELD",short_name:"shield",short_names:["shield"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMOKING SYMBOL",short_name:"smoking",short_names:["smoking"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SKULL AND CROSSBONES",short_name:"skull_and_crossbones",short_names:["skull_and_crossbones"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"COFFIN",short_name:"coffin",short_names:["coffin"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FUNERAL URN",short_name:"funeral_urn",short_names:["funeral_urn"],sort_order:72},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"AMPHORA",short_name:"amphora",short_names:["amphora"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CRYSTAL BALL",short_name:"crystal_ball",short_names:["crystal_ball"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PRAYER BEADS",short_name:"prayer_beads",short_names:["prayer_beads"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BARBER POLE",short_name:"barber",short_names:["barber"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ALEMBIC",short_name:"alembic",short_names:["alembic"],sort_order:77},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TELESCOPE",short_name:"telescope",short_names:["telescope"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MICROSCOPE",short_name:"microscope",short_names:["microscope"],sort_order:79},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HOLE",short_name:"hole",short_names:["hole"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PILL",short_name:"pill",short_names:["pill"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SYRINGE",short_name:"syringe",short_names:["syringe"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"THERMOMETER",short_name:"thermometer",short_names:["thermometer"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LABEL",short_name:"label",short_names:["label"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOOKMARK",short_name:"bookmark",short_names:["bookmark"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TOILET",short_name:"toilet",short_names:["toilet"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHOWER",short_name:"shower",short_names:["shower"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BATHTUB",short_name:"bathtub",short_names:["bathtub"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KEY",short_name:"key",short_names:["key"],sort_order:89},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"OLD KEY",short_name:"old_key",short_names:["old_key"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"COUCH AND LAMP",short_name:"couch_and_lamp",short_names:["couch_and_lamp"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SLEEPING ACCOMMODATION",short_name:"sleeping_accommodation",short_names:["sleeping_accommodation"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BED",short_name:"bed",short_names:["bed"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOOR",short_name:"door",short_names:["door"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BELLHOP BELL",short_name:"bellhop_bell",short_names:["bellhop_bell"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FRAME WITH PICTURE",short_name:"frame_with_picture",short_names:["frame_with_picture"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WORLD MAP",short_name:"world_map",short_names:["world_map"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"UMBRELLA ON GROUND",short_name:"umbrella_on_ground",short_names:["umbrella_on_ground"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOYAI",short_name:"moyai",short_names:["moyai"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SHOPPING BAGS",short_name:"shopping_bags",short_names:["shopping_bags"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BALLOON",short_name:"balloon",short_names:["balloon"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CARP STREAMER",short_name:"flags",short_names:["flags"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RIBBON",short_name:"ribbon",short_names:["ribbon"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WRAPPED PRESENT",short_name:"gift",short_names:["gift"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONFETTI BALL",short_name:"confetti_ball",short_names:["confetti_ball"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PARTY POPPER",short_name:"tada",short_names:["tada"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE DOLLS",short_name:"dolls",short_names:["dolls"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WIND CHIME",short_name:"wind_chime",short_names:["wind_chime"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CROSSED FLAGS",short_name:"crossed_flags",short_names:["crossed_flags"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"IZAKAYA LANTERN",short_name:"izakaya_lantern",short_names:["izakaya_lantern","lantern"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ENVELOPE",short_name:"email",short_names:["email","envelope"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ENVELOPE WITH DOWNWARDS ARROW ABOVE",short_name:"envelope_with_arrow",short_names:["envelope_with_arrow"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INCOMING ENVELOPE",short_name:"incoming_envelope",short_names:["incoming_envelope"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"E-MAIL SYMBOL",short_name:"e-mail",short_names:["e-mail"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOVE LETTER",short_name:"love_letter",short_names:["love_letter"],sort_order:115},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POSTBOX",short_name:"postbox",short_names:["postbox"],sort_order:116},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOSED MAILBOX WITH LOWERED FLAG",short_name:"mailbox_closed",short_names:["mailbox_closed"],sort_order:117},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOSED MAILBOX WITH RAISED FLAG",short_name:"mailbox",short_names:["mailbox"],sort_order:118},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN MAILBOX WITH RAISED FLAG",short_name:"mailbox_with_mail",short_names:["mailbox_with_mail"],sort_order:119},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN MAILBOX WITH LOWERED FLAG",short_name:"mailbox_with_no_mail",short_names:["mailbox_with_no_mail"],sort_order:120},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PACKAGE",short_name:"package",short_names:["package"],sort_order:121},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POSTAL HORN",short_name:"postal_horn",short_names:["postal_horn"],sort_order:122},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INBOX TRAY",short_name:"inbox_tray",short_names:["inbox_tray"],sort_order:123},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OUTBOX TRAY",short_name:"outbox_tray",short_names:["outbox_tray"],sort_order:124},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SCROLL",short_name:"scroll",short_names:["scroll"],sort_order:125},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PAGE WITH CURL",short_name:"page_with_curl",short_names:["page_with_curl"],sort_order:126},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOOKMARK TABS",short_name:"bookmark_tabs",short_names:["bookmark_tabs"],sort_order:127},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BAR CHART",short_name:"bar_chart",short_names:["bar_chart"],sort_order:128},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHART WITH UPWARDS TREND",short_name:"chart_with_upwards_trend",short_names:["chart_with_upwards_trend"],sort_order:129},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHART WITH DOWNWARDS TREND",short_name:"chart_with_downwards_trend",short_names:["chart_with_downwards_trend"],sort_order:130},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PAGE FACING UP",short_name:"page_facing_up",short_names:["page_facing_up"],sort_order:131},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CALENDAR",short_name:"date",short_names:["date"],sort_order:132},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TEAR-OFF CALENDAR",short_name:"calendar",short_names:["calendar"],sort_order:133},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPIRAL CALENDAR PAD",short_name:"spiral_calendar_pad",short_names:["spiral_calendar_pad"],sort_order:134},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CARD INDEX",short_name:"card_index",short_names:["card_index"],sort_order:135},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CARD FILE BOX",short_name:"card_file_box",short_names:["card_file_box"],sort_order:136},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BALLOT BOX WITH BALLOT",short_name:"ballot_box_with_ballot",short_names:["ballot_box_with_ballot"],sort_order:137},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FILE CABINET",short_name:"file_cabinet",short_names:["file_cabinet"],sort_order:138},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLIPBOARD",short_name:"clipboard",short_names:["clipboard"],sort_order:139},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPIRAL NOTE PAD",short_name:"spiral_note_pad",short_names:["spiral_note_pad"],sort_order:140},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FILE FOLDER",short_name:"file_folder",short_names:["file_folder"],sort_order:141},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN FILE FOLDER",short_name:"open_file_folder",short_names:["open_file_folder"],sort_order:142},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CARD INDEX DIVIDERS",short_name:"card_index_dividers",short_names:["card_index_dividers"],sort_order:143},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ROLLED-UP NEWSPAPER",short_name:"rolled_up_newspaper",short_names:["rolled_up_newspaper"],sort_order:144},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEWSPAPER",short_name:"newspaper",short_names:["newspaper"],sort_order:145},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NOTEBOOK",short_name:"notebook",short_names:["notebook"],sort_order:146},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOSED BOOK",short_name:"closed_book",short_names:["closed_book"],sort_order:147},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GREEN BOOK",short_name:"green_book",short_names:["green_book"],sort_order:148},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLUE BOOK",short_name:"blue_book",short_names:["blue_book"],sort_order:149},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ORANGE BOOK",short_name:"orange_book",short_names:["orange_book"],sort_order:150},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NOTEBOOK WITH DECORATIVE COVER",short_name:"notebook_with_decorative_cover",short_names:["notebook_with_decorative_cover"],sort_order:151},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEDGER",short_name:"ledger",short_names:["ledger"],sort_order:152},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOOKS",short_name:"books",short_names:["books"],sort_order:153},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN BOOK",short_name:"book",short_names:["book","open_book"],sort_order:154},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LINK SYMBOL",short_name:"link",short_names:["link"],sort_order:155},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PAPERCLIP",short_name:"paperclip",short_names:["paperclip"],sort_order:156},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LINKED PAPERCLIPS",short_name:"linked_paperclips",short_names:["linked_paperclips"],sort_order:157},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK SCISSORS",short_name:"scissors",short_names:["scissors"],sort_order:158},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRIANGULAR RULER",short_name:"triangular_ruler",short_names:["triangular_ruler"],sort_order:159},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STRAIGHT RULER",short_name:"straight_ruler",short_names:["straight_ruler"],sort_order:160},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PUSHPIN",short_name:"pushpin",short_names:["pushpin"],sort_order:161},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROUND PUSHPIN",short_name:"round_pushpin",short_names:["round_pushpin"],sort_order:162},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRIANGULAR FLAG ON POST",short_name:"triangular_flag_on_post",short_names:["triangular_flag_on_post"],sort_order:163},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WAVING WHITE FLAG",short_name:"waving_white_flag",short_names:["waving_white_flag"],sort_order:164},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WAVING BLACK FLAG",short_name:"waving_black_flag",short_names:["waving_black_flag"],sort_order:165},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOSED LOCK WITH KEY",short_name:"closed_lock_with_key",short_names:["closed_lock_with_key"],sort_order:166},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOCK",short_name:"lock",short_names:["lock"],sort_order:167},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN LOCK",short_name:"unlock",short_names:["unlock"],sort_order:168},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOCK WITH INK PEN",short_name:"lock_with_ink_pen",short_names:["lock_with_ink_pen"],sort_order:169},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LOWER LEFT BALLPOINT PEN",short_name:"lower_left_ballpoint_pen",short_names:["lower_left_ballpoint_pen"],sort_order:170},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LOWER LEFT FOUNTAIN PEN",short_name:"lower_left_fountain_pen",short_names:["lower_left_fountain_pen"],sort_order:171},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK NIB",short_name:"black_nib",short_names:["black_nib"],sort_order:172},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MEMO",short_name:"memo",short_names:["memo","pencil"],sort_order:173},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PENCIL",short_name:"pencil2",short_names:["pencil2"],sort_order:174},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LOWER LEFT CRAYON",short_name:"lower_left_crayon",short_names:["lower_left_crayon"],sort_order:175},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LOWER LEFT PAINTBRUSH",short_name:"lower_left_paintbrush",short_names:["lower_left_paintbrush"],sort_order:176},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEFT-POINTING MAGNIFYING GLASS",short_name:"mag",short_names:["mag"],sort_order:177},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RIGHT-POINTING MAGNIFYING GLASS",short_name:"mag_right",short_names:["mag_right"],sort_order:178}],Nature:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOG FACE",short_name:"dog",short_names:["dog"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAT FACE",short_name:"cat",short_names:["cat"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUSE FACE",short_name:"mouse",short_names:["mouse"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HAMSTER FACE",short_name:"hamster",short_names:["hamster"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RABBIT FACE",short_name:"rabbit",short_names:["rabbit"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BEAR FACE",short_name:"bear",short_names:["bear"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PANDA FACE",short_name:"panda_face",short_names:["panda_face"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KOALA",short_name:"koala",short_names:["koala"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TIGER FACE",short_name:"tiger",short_names:["tiger"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"LION FACE",short_name:"lion_face",short_names:["lion_face"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COW FACE",short_name:"cow",short_names:["cow"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PIG FACE",short_name:"pig",short_names:["pig"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PIG NOSE",short_name:"pig_nose",short_names:["pig_nose"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FROG FACE",short_name:"frog",short_names:["frog"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OCTOPUS",short_name:"octopus",short_names:["octopus"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MONKEY FACE",short_name:"monkey_face",short_names:["monkey_face"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SEE-NO-EVIL MONKEY",short_name:"see_no_evil",short_names:["see_no_evil"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEAR-NO-EVIL MONKEY",short_name:"hear_no_evil",short_names:["hear_no_evil"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEAK-NO-EVIL MONKEY",short_name:"speak_no_evil",short_names:["speak_no_evil"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MONKEY",short_name:"monkey",short_names:["monkey"],sort_order:20
},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHICKEN",short_name:"chicken",short_names:["chicken"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PENGUIN",short_name:"penguin",short_names:["penguin"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BIRD",short_name:"bird",short_names:["bird"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BABY CHICK",short_name:"baby_chick",short_names:["baby_chick"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HATCHING CHICK",short_name:"hatching_chick",short_names:["hatching_chick"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FRONT-FACING BABY CHICK",short_name:"hatched_chick",short_names:["hatched_chick"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOLF FACE",short_name:"wolf",short_names:["wolf"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOAR",short_name:"boar",short_names:["boar"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HORSE FACE",short_name:"horse",short_names:["horse"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"UNICORN FACE",short_name:"unicorn_face",short_names:["unicorn_face"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HONEYBEE",short_name:"bee",short_names:["bee","honeybee"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BUG",short_name:"bug",short_names:["bug"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SNAIL",short_name:"snail",short_names:["snail"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LADY BEETLE",short_name:"beetle",short_names:["beetle"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANT",short_name:"ant",short_names:["ant"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPIDER",short_name:"spider",short_names:["spider"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SCORPION",short_name:"scorpion",short_names:["scorpion"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CRAB",short_name:"crab",short_names:["crab"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SNAKE",short_name:"snake",short_names:["snake"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TURTLE",short_name:"turtle",short_names:["turtle"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TROPICAL FISH",short_name:"tropical_fish",short_names:["tropical_fish"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FISH",short_name:"fish",short_names:["fish"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLOWFISH",short_name:"blowfish",short_names:["blowfish"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOLPHIN",short_name:"dolphin",short_names:["dolphin","flipper"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPOUTING WHALE",short_name:"whale",short_names:["whale"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHALE",short_name:"whale2",short_names:["whale2"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CROCODILE",short_name:"crocodile",short_names:["crocodile"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEOPARD",short_name:"leopard",short_names:["leopard"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TIGER",short_name:"tiger2",short_names:["tiger2"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WATER BUFFALO",short_name:"water_buffalo",short_names:["water_buffalo"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OX",short_name:"ox",short_names:["ox"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COW",short_name:"cow2",short_names:["cow2"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DROMEDARY CAMEL",short_name:"dromedary_camel",short_names:["dromedary_camel"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BACTRIAN CAMEL",short_name:"camel",short_names:["camel"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ELEPHANT",short_name:"elephant",short_names:["elephant"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GOAT",short_name:"goat",short_names:["goat"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAM",short_name:"ram",short_names:["ram"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHEEP",short_name:"sheep",short_names:["sheep"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HORSE",short_name:"racehorse",short_names:["racehorse"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PIG",short_name:"pig2",short_names:["pig2"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAT",short_name:"rat",short_names:["rat"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUSE",short_name:"mouse2",short_names:["mouse2"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROOSTER",short_name:"rooster",short_names:["rooster"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"TURKEY",short_name:"turkey",short_names:["turkey"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DOVE OF PEACE",short_name:"dove_of_peace",short_names:["dove_of_peace"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOG",short_name:"dog2",short_names:["dog2"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POODLE",short_name:"poodle",short_names:["poodle"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAT",short_name:"cat2",short_names:["cat2"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RABBIT",short_name:"rabbit2",short_names:["rabbit2"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CHIPMUNK",short_name:"chipmunk",short_names:["chipmunk"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PAW PRINTS",short_name:"feet",short_names:["feet","paw_prints"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DRAGON",short_name:"dragon",short_names:["dragon"],sort_order:72},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DRAGON FACE",short_name:"dragon_face",short_names:["dragon_face"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CACTUS",short_name:"cactus",short_names:["cactus"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHRISTMAS TREE",short_name:"christmas_tree",short_names:["christmas_tree"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EVERGREEN TREE",short_name:"evergreen_tree",short_names:["evergreen_tree"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DECIDUOUS TREE",short_name:"deciduous_tree",short_names:["deciduous_tree"],sort_order:77},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PALM TREE",short_name:"palm_tree",short_names:["palm_tree"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SEEDLING",short_name:"seedling",short_names:["seedling"],sort_order:79},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HERB",short_name:"herb",short_names:["herb"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SHAMROCK",short_name:"shamrock",short_names:["shamrock"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FOUR LEAF CLOVER",short_name:"four_leaf_clover",short_names:["four_leaf_clover"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PINE DECORATION",short_name:"bamboo",short_names:["bamboo"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TANABATA TREE",short_name:"tanabata_tree",short_names:["tanabata_tree"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEAF FLUTTERING IN WIND",short_name:"leaves",short_names:["leaves"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FALLEN LEAF",short_name:"fallen_leaf",short_names:["fallen_leaf"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAPLE LEAF",short_name:"maple_leaf",short_names:["maple_leaf"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EAR OF RICE",short_name:"ear_of_rice",short_names:["ear_of_rice"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIBISCUS",short_name:"hibiscus",short_names:["hibiscus"],sort_order:89},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUNFLOWER",short_name:"sunflower",short_names:["sunflower"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROSE",short_name:"rose",short_names:["rose"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TULIP",short_name:"tulip",short_names:["tulip"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLOSSOM",short_name:"blossom",short_names:["blossom"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHERRY BLOSSOM",short_name:"cherry_blossom",short_names:["cherry_blossom"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOUQUET",short_name:"bouquet",short_names:["bouquet"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MUSHROOM",short_name:"mushroom",short_names:["mushroom"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHESTNUT",short_name:"chestnut",short_names:["chestnut"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JACK-O-LANTERN",short_name:"jack_o_lantern",short_names:["jack_o_lantern"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPIRAL SHELL",short_name:"shell",short_names:["shell"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPIDER WEB",short_name:"spider_web",short_names:["spider_web"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EARTH GLOBE AMERICAS",short_name:"earth_americas",short_names:["earth_americas"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EARTH GLOBE EUROPE-AFRICA",short_name:"earth_africa",short_names:["earth_africa"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EARTH GLOBE ASIA-AUSTRALIA",short_name:"earth_asia",short_names:["earth_asia"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FULL MOON SYMBOL",short_name:"full_moon",short_names:["full_moon"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WANING GIBBOUS MOON SYMBOL",short_name:"waning_gibbous_moon",short_names:["waning_gibbous_moon"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LAST QUARTER MOON SYMBOL",short_name:"last_quarter_moon",short_names:["last_quarter_moon"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WANING CRESCENT MOON SYMBOL",short_name:"waning_crescent_moon",short_names:["waning_crescent_moon"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEW MOON SYMBOL",short_name:"new_moon",short_names:["new_moon"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WAXING CRESCENT MOON SYMBOL",short_name:"waxing_crescent_moon",short_names:["waxing_crescent_moon"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIRST QUARTER MOON SYMBOL",short_name:"first_quarter_moon",short_names:["first_quarter_moon"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WAXING GIBBOUS MOON SYMBOL",short_name:"moon",short_names:["moon","waxing_gibbous_moon"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEW MOON WITH FACE",short_name:"new_moon_with_face",short_names:["new_moon_with_face"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FULL MOON WITH FACE",short_name:"full_moon_with_face",short_names:["full_moon_with_face"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIRST QUARTER MOON WITH FACE",short_name:"first_quarter_moon_with_face",short_names:["first_quarter_moon_with_face"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LAST QUARTER MOON WITH FACE",short_name:"last_quarter_moon_with_face",short_names:["last_quarter_moon_with_face"],sort_order:115},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUN WITH FACE",short_name:"sun_with_face",short_names:["sun_with_face"],sort_order:116},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CRESCENT MOON",short_name:"crescent_moon",short_names:["crescent_moon"],sort_order:117},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE MEDIUM STAR",short_name:"star",short_names:["star"],sort_order:118},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GLOWING STAR",short_name:"star2",short_names:["star2"],sort_order:119},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DIZZY SYMBOL",short_name:"dizzy",short_names:["dizzy"],sort_order:120},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPARKLES",short_name:"sparkles",short_names:["sparkles"],sort_order:121},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"COMET",short_name:"comet",short_names:["comet"],sort_order:122},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BLACK SUN WITH RAYS",short_name:"sunny",short_names:["sunny"],sort_order:123},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WHITE SUN WITH SMALL CLOUD",short_name:"mostly_sunny",short_names:["mostly_sunny","sun_small_cloud"],sort_order:124},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUN BEHIND CLOUD",short_name:"partly_sunny",short_names:["partly_sunny"],sort_order:125},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WHITE SUN BEHIND CLOUD",short_name:"barely_sunny",short_names:["barely_sunny","sun_behind_cloud"],sort_order:126},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WHITE SUN BEHIND CLOUD WITH RAIN",short_name:"partly_sunny_rain",short_names:["partly_sunny_rain","sun_behind_rain_cloud"],sort_order:127},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOUD",short_name:"cloud",short_names:["cloud"],sort_order:128},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CLOUD WITH RAIN",short_name:"rain_cloud",short_names:["rain_cloud"],sort_order:129},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"THUNDER CLOUD AND RAIN",short_name:"thunder_cloud_and_rain",short_names:["thunder_cloud_and_rain"],sort_order:130},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CLOUD WITH LIGHTNING",short_name:"lightning",short_names:["lightning","lightning_cloud"],sort_order:131},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIGH VOLTAGE SIGN",short_name:"zap",short_names:["zap"],sort_order:132},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIRE",short_name:"fire",short_names:["fire"],sort_order:133},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COLLISION SYMBOL",short_name:"boom",short_names:["boom","collision"],sort_order:134},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SNOWFLAKE",short_name:"snowflake",short_names:["snowflake"],sort_order:135},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CLOUD WITH SNOW",short_name:"snow_cloud",short_names:["snow_cloud"],sort_order:136},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SNOWMAN",short_name:"snowman",short_names:["snowman"],sort_order:137},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SNOWMAN WITHOUT SNOW",short_name:"snowman_without_snow",short_names:["snowman_without_snow"],sort_order:138},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WIND BLOWING FACE",short_name:"wind_blowing_face",short_names:["wind_blowing_face"],sort_order:139},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DASH SYMBOL",short_name:"dash",short_names:["dash"],sort_order:140},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CLOUD WITH TORNADO",short_name:"tornado",short_names:["tornado","tornado_cloud"],sort_order:141},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FOG",short_name:"fog",short_names:["fog"],sort_order:142},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"UMBRELLA",short_name:"umbrella",short_names:["umbrella"],sort_order:143},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"UMBRELLA WITH RAIN DROPS",short_name:"umbrella_with_rain_drops",short_names:["umbrella_with_rain_drops"],sort_order:144},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DROPLET",short_name:"droplet",short_names:["droplet"],sort_order:145},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPLASHING SWEAT SYMBOL",short_name:"sweat_drops",short_names:["sweat_drops"],sort_order:146},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WATER WAVE",short_name:"ocean",short_names:["ocean"],sort_order:147}],Foods:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GREEN APPLE",short_name:"green_apple",short_names:["green_apple"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RED APPLE",short_name:"apple",short_names:["apple"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PEAR",short_name:"pear",short_names:["pear"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TANGERINE",short_name:"tangerine",short_names:["tangerine"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LEMON",short_name:"lemon",short_names:["lemon"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANANA",short_name:"banana",short_names:["banana"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WATERMELON",short_name:"watermelon",short_names:["watermelon"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRAPES",short_name:"grapes",short_names:["grapes"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STRAWBERRY",short_name:"strawberry",short_names:["strawberry"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MELON",short_name:"melon",short_names:["melon"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHERRIES",short_name:"cherries",short_names:["cherries"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PEACH",short_name:"peach",short_names:["peach"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PINEAPPLE",short_name:"pineapple",short_names:["pineapple"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TOMATO",short_name:"tomato",short_names:["tomato"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AUBERGINE",short_name:"eggplant",short_names:["eggplant"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HOT PEPPER",short_name:"hot_pepper",short_names:["hot_pepper"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EAR OF MAIZE",short_name:"corn",short_names:["corn"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROASTED SWEET POTATO",short_name:"sweet_potato",short_names:["sweet_potato"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HONEY POT",short_name:"honey_pot",short_names:["honey_pot"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BREAD",short_name:"bread",short_names:["bread"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CHEESE WEDGE",short_name:"cheese_wedge",short_names:["cheese_wedge"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POULTRY LEG",short_name:"poultry_leg",short_names:["poultry_leg"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MEAT ON BONE",short_name:"meat_on_bone",short_names:["meat_on_bone"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FRIED SHRIMP",short_name:"fried_shrimp",short_names:["fried_shrimp"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COOKING",short_name:"egg",short_names:["egg"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HAMBURGER",short_name:"hamburger",short_names:["hamburger"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FRENCH FRIES",short_name:"fries",short_names:["fries"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HOT DOG",short_name:"hotdog",short_names:["hotdog"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLICE OF PIZZA",short_name:"pizza",short_names:["pizza"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPAGHETTI",short_name:"spaghetti",short_names:["spaghetti"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"TACO",short_name:"taco",short_names:["taco"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BURRITO",short_name:"burrito",short_names:["burrito"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STEAMING BOWL",short_name:"ramen",short_names:["ramen"],sort_order:33},{has_img_apple:!0,has_img_google:!0,
has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POT OF FOOD",short_name:"stew",short_names:["stew"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FISH CAKE WITH SWIRL DESIGN",short_name:"fish_cake",short_names:["fish_cake"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUSHI",short_name:"sushi",short_names:["sushi"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BENTO BOX",short_name:"bento",short_names:["bento"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CURRY AND RICE",short_name:"curry",short_names:["curry"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RICE BALL",short_name:"rice_ball",short_names:["rice_ball"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COOKED RICE",short_name:"rice",short_names:["rice"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RICE CRACKER",short_name:"rice_cracker",short_names:["rice_cracker"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ODEN",short_name:"oden",short_names:["oden"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DANGO",short_name:"dango",short_names:["dango"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHAVED ICE",short_name:"shaved_ice",short_names:["shaved_ice"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ICE CREAM",short_name:"ice_cream",short_names:["ice_cream"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SOFT ICE CREAM",short_name:"icecream",short_names:["icecream"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHORTCAKE",short_name:"cake",short_names:["cake"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BIRTHDAY CAKE",short_name:"birthday",short_names:["birthday"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CUSTARD",short_name:"custard",short_names:["custard"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CANDY",short_name:"candy",short_names:["candy"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOLLIPOP",short_name:"lollipop",short_names:["lollipop"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHOCOLATE BAR",short_name:"chocolate_bar",short_names:["chocolate_bar"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"POPCORN",short_name:"popcorn",short_names:["popcorn"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DOUGHNUT",short_name:"doughnut",short_names:["doughnut"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COOKIE",short_name:"cookie",short_names:["cookie"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BEER MUG",short_name:"beer",short_names:["beer"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLINKING BEER MUGS",short_name:"beers",short_names:["beers"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WINE GLASS",short_name:"wine_glass",short_names:["wine_glass"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COCKTAIL GLASS",short_name:"cocktail",short_names:["cocktail"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TROPICAL DRINK",short_name:"tropical_drink",short_names:["tropical_drink"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BOTTLE WITH POPPING CORK",short_name:"champagne",short_names:["champagne"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SAKE BOTTLE AND CUP",short_name:"sake",short_names:["sake"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TEACUP WITHOUT HANDLE",short_name:"tea",short_names:["tea"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOT BEVERAGE",short_name:"coffee",short_names:["coffee"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BABY BOTTLE",short_name:"baby_bottle",short_names:["baby_bottle"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FORK AND KNIFE",short_name:"fork_and_knife",short_names:["fork_and_knife"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FORK AND KNIFE WITH PLATE",short_name:"knife_fork_plate",short_names:["knife_fork_plate"],sort_order:67}],People:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRINNING FACE",short_name:"grinning",short_names:["grinning"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRIMACING FACE",short_name:"grimacing",short_names:["grimacing"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRINNING FACE WITH SMILING EYES",short_name:"grin",short_names:["grin"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH TEARS OF JOY",short_name:"joy",short_names:["joy"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH OPEN MOUTH",short_name:"smiley",short_names:["smiley"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH OPEN MOUTH AND SMILING EYES",short_name:"smile",short_names:["smile"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH OPEN MOUTH AND COLD SWEAT",short_name:"sweat_smile",short_names:["sweat_smile"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH OPEN MOUTH AND TIGHTLY-CLOSED EYES",short_name:"laughing",short_names:["laughing","satisfied"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH HALO",short_name:"innocent",short_names:["innocent"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WINKING FACE",short_name:"wink",short_names:["wink"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH SMILING EYES",short_name:"blush",short_names:["blush"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLIGHTLY SMILING FACE",short_name:"slightly_smiling_face",short_names:["slightly_smiling_face"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"UPSIDE-DOWN FACE",short_name:"upside_down_face",short_names:["upside_down_face"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE SMILING FACE",short_name:"relaxed",short_names:["relaxed"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE SAVOURING DELICIOUS FOOD",short_name:"yum",short_names:["yum"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RELIEVED FACE",short_name:"relieved",short_names:["relieved"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH HEART-SHAPED EYES",short_name:"heart_eyes",short_names:["heart_eyes"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE THROWING A KISS",short_name:"kissing_heart",short_names:["kissing_heart"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISSING FACE",short_name:"kissing",short_names:["kissing"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISSING FACE WITH SMILING EYES",short_name:"kissing_smiling_eyes",short_names:["kissing_smiling_eyes"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISSING FACE WITH CLOSED EYES",short_name:"kissing_closed_eyes",short_names:["kissing_closed_eyes"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH STUCK-OUT TONGUE AND WINKING EYE",short_name:"stuck_out_tongue_winking_eye",short_names:["stuck_out_tongue_winking_eye"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH STUCK-OUT TONGUE AND TIGHTLY-CLOSED EYES",short_name:"stuck_out_tongue_closed_eyes",short_names:["stuck_out_tongue_closed_eyes"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH STUCK-OUT TONGUE",short_name:"stuck_out_tongue",short_names:["stuck_out_tongue"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MONEY-MOUTH FACE",short_name:"money_mouth_face",short_names:["money_mouth_face"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"NERD FACE",short_name:"nerd_face",short_names:["nerd_face"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH SUNGLASSES",short_name:"sunglasses",short_names:["sunglasses"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HUGGING FACE",short_name:"hugging_face",short_names:["hugging_face"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMIRKING FACE",short_name:"smirk",short_names:["smirk"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITHOUT MOUTH",short_name:"no_mouth",short_names:["no_mouth"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NEUTRAL FACE",short_name:"neutral_face",short_names:["neutral_face"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EXPRESSIONLESS FACE",short_name:"expressionless",short_names:["expressionless"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"UNAMUSED FACE",short_name:"unamused",short_names:["unamused"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FACE WITH ROLLING EYES",short_name:"face_with_rolling_eyes",short_names:["face_with_rolling_eyes"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"THINKING FACE",short_name:"thinking_face",short_names:["thinking_face"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FLUSHED FACE",short_name:"flushed",short_names:["flushed"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DISAPPOINTED FACE",short_name:"disappointed",short_names:["disappointed"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WORRIED FACE",short_name:"worried",short_names:["worried"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANGRY FACE",short_name:"angry",short_names:["angry"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POUTING FACE",short_name:"rage",short_names:["rage"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PENSIVE FACE",short_name:"pensive",short_names:["pensive"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONFUSED FACE",short_name:"confused",short_names:["confused"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SLIGHTLY FROWNING FACE",short_name:"slightly_frowning_face",short_names:["slightly_frowning_face"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WHITE FROWNING FACE",short_name:"white_frowning_face",short_names:["white_frowning_face"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSEVERING FACE",short_name:"persevere",short_names:["persevere"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONFOUNDED FACE",short_name:"confounded",short_names:["confounded"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TIRED FACE",short_name:"tired_face",short_names:["tired_face"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WEARY FACE",short_name:"weary",short_names:["weary"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH LOOK OF TRIUMPH",short_name:"triumph",short_names:["triumph"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH OPEN MOUTH",short_name:"open_mouth",short_names:["open_mouth"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE SCREAMING IN FEAR",short_name:"scream",short_names:["scream"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FEARFUL FACE",short_name:"fearful",short_names:["fearful"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH OPEN MOUTH AND COLD SWEAT",short_name:"cold_sweat",short_names:["cold_sweat"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HUSHED FACE",short_name:"hushed",short_names:["hushed"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FROWNING FACE WITH OPEN MOUTH",short_name:"frowning",short_names:["frowning"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANGUISHED FACE",short_name:"anguished",short_names:["anguished"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CRYING FACE",short_name:"cry",short_names:["cry"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DISAPPOINTED BUT RELIEVED FACE",short_name:"disappointed_relieved",short_names:["disappointed_relieved"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLEEPY FACE",short_name:"sleepy",short_names:["sleepy"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH COLD SWEAT",short_name:"sweat",short_names:["sweat"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOUDLY CRYING FACE",short_name:"sob",short_names:["sob"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DIZZY FACE",short_name:"dizzy_face",short_names:["dizzy_face"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ASTONISHED FACE",short_name:"astonished",short_names:["astonished"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ZIPPER-MOUTH FACE",short_name:"zipper_mouth_face",short_names:["zipper_mouth_face"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH MEDICAL MASK",short_name:"mask",short_names:["mask"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FACE WITH THERMOMETER",short_name:"face_with_thermometer",short_names:["face_with_thermometer"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FACE WITH HEAD-BANDAGE",short_name:"face_with_head_bandage",short_names:["face_with_head_bandage"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLEEPING FACE",short_name:"sleeping",short_names:["sleeping"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLEEPING SYMBOL",short_name:"zzz",short_names:["zzz"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PILE OF POO",short_name:"hankey",short_names:["hankey","poop","shit"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING FACE WITH HORNS",short_name:"smiling_imp",short_names:["smiling_imp"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"IMP",short_name:"imp",short_names:["imp"],sort_order:72},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE OGRE",short_name:"japanese_ogre",short_names:["japanese_ogre"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE GOBLIN",short_name:"japanese_goblin",short_names:["japanese_goblin"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SKULL",short_name:"skull",short_names:["skull"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GHOST",short_name:"ghost",short_names:["ghost"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EXTRATERRESTRIAL ALIEN",short_name:"alien",short_names:["alien"],sort_order:77},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ROBOT FACE",short_name:"robot_face",short_names:["robot_face"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING CAT FACE WITH OPEN MOUTH",short_name:"smiley_cat",short_names:["smiley_cat"],sort_order:79},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRINNING CAT FACE WITH SMILING EYES",short_name:"smile_cat",short_names:["smile_cat"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAT FACE WITH TEARS OF JOY",short_name:"joy_cat",short_names:["joy_cat"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SMILING CAT FACE WITH HEART-SHAPED EYES",short_name:"heart_eyes_cat",short_names:["heart_eyes_cat"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAT FACE WITH WRY SMILE",short_name:"smirk_cat",short_names:["smirk_cat"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISSING CAT FACE WITH CLOSED EYES",short_name:"kissing_cat",short_names:["kissing_cat"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WEARY CAT FACE",short_name:"scream_cat",short_names:["scream_cat"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CRYING CAT FACE",short_name:"crying_cat_face",short_names:["crying_cat_face"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POUTING CAT FACE",short_name:"pouting_cat",short_names:["pouting_cat"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON RAISING BOTH HANDS IN CELEBRATION",short_name:"raised_hands",short_names:["raised_hands"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLAPPING HANDS SIGN",short_name:"clap",short_names:["clap"],sort_order:89},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WAVING HAND SIGN",short_name:"wave",short_names:["wave"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"THUMBS UP SIGN",short_name:"+1",short_names:["+1","thumbsup"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"THUMBS DOWN SIGN",short_name:"-1",short_names:["-1","thumbsdown"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FISTED HAND SIGN",short_name:"facepunch",short_names:["facepunch","punch"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAISED FIST",short_name:"fist",short_names:["fist"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VICTORY HAND",short_name:"v",short_names:["v"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OK HAND SIGN",short_name:"ok_hand",short_names:["ok_hand"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAISED HAND",short_name:"hand",short_names:["hand","raised_hand"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OPEN HANDS SIGN",short_name:"open_hands",short_names:["open_hands"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FLEXED BICEPS",short_name:"muscle",short_names:["muscle"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON WITH FOLDED HANDS",short_name:"pray",short_names:["pray"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE UP POINTING INDEX",short_name:"point_up",short_names:["point_up"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE UP POINTING BACKHAND INDEX",short_name:"point_up_2",short_names:["point_up_2"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE DOWN POINTING BACKHAND INDEX",short_name:"point_down",short_names:["point_down"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE LEFT POINTING BACKHAND INDEX",short_name:"point_left",short_names:["point_left"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WHITE RIGHT POINTING BACKHAND INDEX",short_name:"point_right",short_names:["point_right"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"REVERSED HAND WITH MIDDLE FINGER EXTENDED",short_name:"middle_finger",short_names:["middle_finger","reversed_hand_with_middle_finger_extended"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RAISED HAND WITH FINGERS SPLAYED",short_name:"raised_hand_with_fingers_splayed",short_names:["raised_hand_with_fingers_splayed"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SIGN OF THE HORNS",short_name:"the_horns",short_names:["the_horns","sign_of_the_horns"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RAISED HAND WITH PART BETWEEN MIDDLE AND RING FINGERS",short_name:"spock-hand",short_names:["spock-hand"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WRITING HAND",short_name:"writing_hand",short_names:["writing_hand"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NAIL POLISH",short_name:"nail_care",short_names:["nail_care"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUTH",short_name:"lips",short_names:["lips"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TONGUE",short_name:"tongue",short_names:["tongue"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EAR",short_name:"ear",short_names:["ear"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NOSE",short_name:"nose",short_names:["nose"],sort_order:115},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EYE",short_name:"eye",short_names:["eye"],sort_order:116},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EYES",short_name:"eyes",short_names:["eyes"],sort_order:117},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BUST IN SILHOUETTE",short_name:"bust_in_silhouette",short_names:["bust_in_silhouette"],sort_order:118},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BUSTS IN SILHOUETTE",short_name:"busts_in_silhouette",short_names:["busts_in_silhouette"],sort_order:119},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPEAKING HEAD IN SILHOUETTE",short_name:"speaking_head_in_silhouette",short_names:["speaking_head_in_silhouette"],sort_order:120},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,
has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BABY",short_name:"baby",short_names:["baby"],sort_order:121},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOY",short_name:"boy",short_names:["boy"],sort_order:122},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GIRL",short_name:"girl",short_names:["girl"],sort_order:123},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAN",short_name:"man",short_names:["man"],sort_order:124},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMAN",short_name:"woman",short_names:["woman"],sort_order:125},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON WITH BLOND HAIR",short_name:"person_with_blond_hair",short_names:["person_with_blond_hair"],sort_order:126},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OLDER MAN",short_name:"older_man",short_names:["older_man"],sort_order:127},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OLDER WOMAN",short_name:"older_woman",short_names:["older_woman"],sort_order:128},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAN WITH GUA PI MAO",short_name:"man_with_gua_pi_mao",short_names:["man_with_gua_pi_mao"],sort_order:129},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAN WITH TURBAN",short_name:"man_with_turban",short_names:["man_with_turban"],sort_order:130},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POLICE OFFICER",short_name:"cop",short_names:["cop"],sort_order:131},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONSTRUCTION WORKER",short_name:"construction_worker",short_names:["construction_worker"],sort_order:132},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GUARDSMAN",short_name:"guardsman",short_names:["guardsman"],sort_order:133},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SLEUTH OR SPY",short_name:"sleuth_or_spy",short_names:["sleuth_or_spy"],sort_order:134},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FATHER CHRISTMAS",short_name:"santa",short_names:["santa"],sort_order:135},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BABY ANGEL",short_name:"angel",short_names:["angel"],sort_order:136},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PRINCESS",short_name:"princess",short_names:["princess"],sort_order:137},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BRIDE WITH VEIL",short_name:"bride_with_veil",short_names:["bride_with_veil"],sort_order:138},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PEDESTRIAN",short_name:"walking",short_names:["walking"],sort_order:139},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RUNNER",short_name:"runner",short_names:["runner","running"],sort_order:140},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DANCER",short_name:"dancer",short_names:["dancer"],sort_order:141},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMAN WITH BUNNY EARS",short_name:"dancers",short_names:["dancers"],sort_order:142},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MAN AND WOMAN HOLDING HANDS",short_name:"couple",short_names:["couple","man_and_woman_holding_hands"],sort_order:143},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TWO MEN HOLDING HANDS",short_name:"two_men_holding_hands",short_names:["two_men_holding_hands"],sort_order:144},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TWO WOMEN HOLDING HANDS",short_name:"two_women_holding_hands",short_names:["two_women_holding_hands"],sort_order:145},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON BOWING DEEPLY",short_name:"bow",short_names:["bow"],sort_order:146},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"INFORMATION DESK PERSON",short_name:"information_desk_person",short_names:["information_desk_person"],sort_order:147},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH NO GOOD GESTURE",short_name:"no_good",short_names:["no_good"],sort_order:148},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE WITH OK GESTURE",short_name:"ok_woman",short_names:["ok_woman"],sort_order:149},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HAPPY PERSON RAISING ONE HAND",short_name:"raising_hand",short_names:["raising_hand"],sort_order:150},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON WITH POUTING FACE",short_name:"person_with_pouting_face",short_names:["person_with_pouting_face"],sort_order:151},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERSON FROWNING",short_name:"person_frowning",short_names:["person_frowning"],sort_order:152},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HAIRCUT",short_name:"haircut",short_names:["haircut"],sort_order:153},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACE MASSAGE",short_name:"massage",short_names:["massage"],sort_order:154},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"COUPLE WITH HEART",short_name:"couple_with_heart",short_names:["couple_with_heart"],sort_order:155},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-heart-woman",short_names:["woman-heart-woman"],sort_order:156},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-heart-man",short_names:["man-heart-man"],sort_order:157},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISS",short_name:"couplekiss",short_names:["couplekiss"],sort_order:158},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-kiss-woman",short_names:["woman-kiss-woman"],sort_order:159},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!1,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-kiss-man",short_names:["man-kiss-man"],sort_order:160},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FAMILY",short_name:"family",short_names:["family","man-woman-boy"],sort_order:161},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-woman-girl",short_names:["man-woman-girl"],sort_order:162},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-woman-girl-boy",short_names:["man-woman-girl-boy"],sort_order:163},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-woman-boy-boy",short_names:["man-woman-boy-boy"],sort_order:164},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-woman-girl-girl",short_names:["man-woman-girl-girl"],sort_order:165},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-woman-boy",short_names:["woman-woman-boy"],sort_order:166},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-woman-girl",short_names:["woman-woman-girl"],sort_order:167},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-woman-girl-boy",short_names:["woman-woman-girl-boy"],sort_order:168},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-woman-boy-boy",short_names:["woman-woman-boy-boy"],sort_order:169},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"woman-woman-girl-girl",short_names:["woman-woman-girl-girl"],sort_order:170},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-man-boy",short_names:["man-man-boy"],sort_order:171},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-man-girl",short_names:["man-man-girl"],sort_order:172},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-man-girl-boy",short_names:["man-man-girl-boy"],sort_order:173},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-man-boy-boy",short_names:["man-man-boy-boy"],sort_order:174},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:null,short_name:"man-man-girl-girl",short_names:["man-man-girl-girl"],sort_order:175},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMANS CLOTHES",short_name:"womans_clothes",short_names:["womans_clothes"],sort_order:176},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"T-SHIRT",short_name:"shirt",short_names:["shirt","tshirt"],sort_order:177},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JEANS",short_name:"jeans",short_names:["jeans"],sort_order:178},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NECKTIE",short_name:"necktie",short_names:["necktie"],sort_order:179},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DRESS",short_name:"dress",short_names:["dress"],sort_order:180},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BIKINI",short_name:"bikini",short_names:["bikini"],sort_order:181},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KIMONO",short_name:"kimono",short_names:["kimono"],sort_order:182},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LIPSTICK",short_name:"lipstick",short_names:["lipstick"],sort_order:183},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"KISS MARK",short_name:"kiss",short_names:["kiss"],sort_order:184},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FOOTPRINTS",short_name:"footprints",short_names:["footprints"],sort_order:185},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIGH-HEELED SHOE",short_name:"high_heel",short_names:["high_heel"],sort_order:186},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMANS SANDAL",short_name:"sandal",short_names:["sandal"],sort_order:187},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMANS BOOTS",short_name:"boot",short_names:["boot"],sort_order:188},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MANS SHOE",short_name:"mans_shoe",short_names:["mans_shoe","shoe"],sort_order:189},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ATHLETIC SHOE",short_name:"athletic_shoe",short_names:["athletic_shoe"],sort_order:190},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WOMANS HAT",short_name:"womans_hat",short_names:["womans_hat"],sort_order:191},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TOP HAT",short_name:"tophat",short_names:["tophat"],sort_order:192},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HELMET WITH WHITE CROSS",short_name:"helmet_with_white_cross",short_names:["helmet_with_white_cross"],sort_order:193},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GRADUATION CAP",short_name:"mortar_board",short_names:["mortar_board"],sort_order:194},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CROWN",short_name:"crown",short_names:["crown"],sort_order:195},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SCHOOL SATCHEL",short_name:"school_satchel",short_names:["school_satchel"],sort_order:196},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POUCH",short_name:"pouch",short_names:["pouch"],sort_order:197},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PURSE",short_name:"purse",short_names:["purse"],sort_order:198},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HANDBAG",short_name:"handbag",short_names:["handbag"],sort_order:199},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BRIEFCASE",short_name:"briefcase",short_names:["briefcase"],sort_order:200},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EYEGLASSES",short_name:"eyeglasses",short_names:["eyeglasses"],sort_order:201},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DARK SUNGLASSES",short_name:"dark_sunglasses",short_names:["dark_sunglasses"],sort_order:202},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RING",short_name:"ring",short_names:["ring"],sort_order:203},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLOSED UMBRELLA",short_name:"closed_umbrella",short_names:["closed_umbrella"],sort_order:204}],Places:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AUTOMOBILE",short_name:"car",short_names:["car","red_car"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TAXI",short_name:"taxi",short_names:["taxi"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RECREATIONAL VEHICLE",short_name:"blue_car",short_names:["blue_car"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BUS",short_name:"bus",short_names:["bus"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TROLLEYBUS",short_name:"trolleybus",short_names:["trolleybus"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RACING CAR",short_name:"racing_car",short_names:["racing_car"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POLICE CAR",short_name:"police_car",short_names:["police_car"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AMBULANCE",short_name:"ambulance",short_names:["ambulance"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIRE ENGINE",short_name:"fire_engine",short_names:["fire_engine"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MINIBUS",short_name:"minibus",short_names:["minibus"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DELIVERY TRUCK",short_name:"truck",short_names:["truck"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ARTICULATED LORRY",short_name:"articulated_lorry",short_names:["articulated_lorry"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRACTOR",short_name:"tractor",short_names:["tractor"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RACING MOTORCYCLE",short_name:"racing_motorcycle",short_names:["racing_motorcycle"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BICYCLE",short_name:"bike",short_names:["bike"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"POLICE CARS REVOLVING LIGHT",short_name:"rotating_light",short_names:["rotating_light"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ONCOMING POLICE CAR",short_name:"oncoming_police_car",short_names:["oncoming_police_car"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ONCOMING BUS",short_name:"oncoming_bus",short_names:["oncoming_bus"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ONCOMING AUTOMOBILE",short_name:"oncoming_automobile",short_names:["oncoming_automobile"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ONCOMING TAXI",short_name:"oncoming_taxi",short_names:["oncoming_taxi"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AERIAL TRAMWAY",short_name:"aerial_tramway",short_names:["aerial_tramway"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUNTAIN CABLEWAY",short_name:"mountain_cableway",short_names:["mountain_cableway"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUSPENSION RAILWAY",short_name:"suspension_railway",short_names:["suspension_railway"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAILWAY CAR",short_name:"railway_car",short_names:["railway_car"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRAM CAR",short_name:"train",short_names:["train"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MONORAIL",short_name:"monorail",short_names:["monorail"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIGH-SPEED TRAIN",short_name:"bullettrain_side",short_names:["bullettrain_side"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HIGH-SPEED TRAIN WITH BULLET NOSE",short_name:"bullettrain_front",short_names:["bullettrain_front"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LIGHT RAIL",short_name:"light_rail",short_names:["light_rail"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUNTAIN RAILWAY",short_name:"mountain_railway",short_names:["mountain_railway"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STEAM LOCOMOTIVE",short_name:"steam_locomotive",short_names:["steam_locomotive"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRAIN",short_name:"train2",short_names:["train2"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"METRO",short_name:"metro",short_names:["metro"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRAM",short_name:"tram",short_names:["tram"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STATION",short_name:"station",short_names:["station"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HELICOPTER",short_name:"helicopter",short_names:["helicopter"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SMALL AIRPLANE",short_name:"small_airplane",short_names:["small_airplane"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AIRPLANE",short_name:"airplane",short_names:["airplane"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"AIRPLANE DEPARTURE",short_name:"airplane_departure",short_names:["airplane_departure"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"AIRPLANE ARRIVING",short_name:"airplane_arriving",short_names:["airplane_arriving"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SAILBOAT",short_name:"boat",short_names:["boat","sailboat"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MOTOR BOAT",short_name:"motor_boat",short_names:["motor_boat"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SPEEDBOAT",short_name:"speedboat",short_names:["speedboat"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FERRY",short_name:"ferry",short_names:["ferry"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PASSENGER SHIP",short_name:"passenger_ship",short_names:["passenger_ship"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROCKET",short_name:"rocket",short_names:["rocket"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SATELLITE",short_name:"satellite",short_names:["satellite"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SEAT",short_name:"seat",short_names:["seat"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ANCHOR",short_name:"anchor",short_names:["anchor"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONSTRUCTION SIGN",short_name:"construction",short_names:["construction"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FUEL PUMP",short_name:"fuelpump",short_names:["fuelpump"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BUS STOP",short_name:"busstop",short_names:["busstop"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VERTICAL TRAFFIC LIGHT",short_name:"vertical_traffic_light",short_names:["vertical_traffic_light"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HORIZONTAL TRAFFIC LIGHT",short_name:"traffic_light",short_names:["traffic_light"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHEQUERED FLAG",short_name:"checkered_flag",short_names:["checkered_flag"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHIP",short_name:"ship",short_names:["ship"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FERRIS WHEEL",short_name:"ferris_wheel",short_names:["ferris_wheel"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROLLER COASTER",short_name:"roller_coaster",short_names:["roller_coaster"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CAROUSEL HORSE",short_name:"carousel_horse",short_names:["carousel_horse"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BUILDING CONSTRUCTION",short_name:"building_construction",short_names:["building_construction"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FOGGY",short_name:"foggy",short_names:["foggy"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TOKYO TOWER",short_name:"tokyo_tower",short_names:["tokyo_tower"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FACTORY",short_name:"factory",short_names:["factory"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FOUNTAIN",short_name:"fountain",short_names:["fountain"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOON VIEWING CEREMONY",short_name:"rice_scene",short_names:["rice_scene"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MOUNTAIN",short_name:"mountain",short_names:["mountain"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SNOW CAPPED MOUNTAIN",short_name:"snow_capped_mountain",short_names:["snow_capped_mountain"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUNT FUJI",short_name:"mount_fuji",short_names:["mount_fuji"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VOLCANO",short_name:"volcano",short_names:["volcano"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SILHOUETTE OF JAPAN",short_name:"japan",short_names:["japan"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CAMPING",short_name:"camping",short_names:["camping"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TENT",short_name:"tent",short_names:["tent"],sort_order:72},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"NATIONAL PARK",short_name:"national_park",short_names:["national_park"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,
name:"MOTORWAY",short_name:"motorway",short_names:["motorway"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"RAILWAY TRACK",short_name:"railway_track",short_names:["railway_track"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUNRISE",short_name:"sunrise",short_names:["sunrise"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUNRISE OVER MOUNTAINS",short_name:"sunrise_over_mountains",short_names:["sunrise_over_mountains"],sort_order:77},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DESERT",short_name:"desert",short_names:["desert"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BEACH WITH UMBRELLA",short_name:"beach_with_umbrella",short_names:["beach_with_umbrella"],sort_order:79},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DESERT ISLAND",short_name:"desert_island",short_names:["desert_island"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SUNSET OVER BUILDINGS",short_name:"city_sunrise",short_names:["city_sunrise"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CITYSCAPE AT DUSK",short_name:"city_sunset",short_names:["city_sunset"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CITYSCAPE",short_name:"cityscape",short_names:["cityscape"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"NIGHT WITH STARS",short_name:"night_with_stars",short_names:["night_with_stars"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BRIDGE AT NIGHT",short_name:"bridge_at_night",short_names:["bridge_at_night"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MILKY WAY",short_name:"milky_way",short_names:["milky_way"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SHOOTING STAR",short_name:"stars",short_names:["stars"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIREWORK SPARKLER",short_name:"sparkler",short_names:["sparkler"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FIREWORKS",short_name:"fireworks",short_names:["fireworks"],sort_order:89},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RAINBOW",short_name:"rainbow",short_names:["rainbow"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"HOUSE BUILDINGS",short_name:"house_buildings",short_names:["house_buildings"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EUROPEAN CASTLE",short_name:"european_castle",short_names:["european_castle"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE CASTLE",short_name:"japanese_castle",short_names:["japanese_castle"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"STADIUM",short_name:"stadium",short_names:["stadium"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"STATUE OF LIBERTY",short_name:"statue_of_liberty",short_names:["statue_of_liberty"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOUSE BUILDING",short_name:"house",short_names:["house"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOUSE WITH GARDEN",short_name:"house_with_garden",short_names:["house_with_garden"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"DERELICT HOUSE BUILDING",short_name:"derelict_house_building",short_names:["derelict_house_building"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"OFFICE BUILDING",short_name:"office",short_names:["office"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DEPARTMENT STORE",short_name:"department_store",short_names:["department_store"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"JAPANESE POST OFFICE",short_name:"post_office",short_names:["post_office"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"EUROPEAN POST OFFICE",short_name:"european_post_office",short_names:["european_post_office"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOSPITAL",short_name:"hospital",short_names:["hospital"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BANK",short_name:"bank",short_names:["bank"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HOTEL",short_name:"hotel",short_names:["hotel"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CONVENIENCE STORE",short_name:"convenience_store",short_names:["convenience_store"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SCHOOL",short_name:"school",short_names:["school"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"LOVE HOTEL",short_name:"love_hotel",short_names:["love_hotel"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"WEDDING",short_name:"wedding",short_names:["wedding"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CLASSICAL BUILDING",short_name:"classical_building",short_names:["classical_building"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CHURCH",short_name:"church",short_names:["church"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MOSQUE",short_name:"mosque",short_names:["mosque"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SYNAGOGUE",short_name:"synagogue",short_names:["synagogue"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"KAABA",short_name:"kaaba",short_names:["kaaba"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SHINTO SHRINE",short_name:"shinto_shrine",short_names:["shinto_shrine"],sort_order:115}],Activity:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SOCCER BALL",short_name:"soccer",short_names:["soccer"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BASKETBALL AND HOOP",short_name:"basketball",short_names:["basketball"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"AMERICAN FOOTBALL",short_name:"football",short_names:["football"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BASEBALL",short_name:"baseball",short_names:["baseball"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TENNIS RACQUET AND BALL",short_name:"tennis",short_names:["tennis"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"VOLLEYBALL",short_name:"volleyball",short_names:["volleyball"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RUGBY FOOTBALL",short_name:"rugby_football",short_names:["rugby_football"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BILLIARDS",short_name:"8ball",short_names:["8ball"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FLAG IN HOLE",short_name:"golf",short_names:["golf"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"GOLFER",short_name:"golfer",short_names:["golfer"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"TABLE TENNIS PADDLE AND BALL",short_name:"table_tennis_paddle_and_ball",short_names:["table_tennis_paddle_and_ball"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BADMINTON RACQUET AND SHUTTLECOCK",short_name:"badminton_racquet_and_shuttlecock",short_names:["badminton_racquet_and_shuttlecock"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ICE HOCKEY STICK AND PUCK",short_name:"ice_hockey_stick_and_puck",short_names:["ice_hockey_stick_and_puck"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"FIELD HOCKEY STICK AND BALL",short_name:"field_hockey_stick_and_ball",short_names:["field_hockey_stick_and_ball"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"CRICKET BAT AND BALL",short_name:"cricket_bat_and_ball",short_names:["cricket_bat_and_ball"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SKI AND SKI BOOT",short_name:"ski",short_names:["ski"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SKIER",short_name:"skier",short_names:["skier"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SNOWBOARDER",short_name:"snowboarder",short_names:["snowboarder"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ICE SKATE",short_name:"ice_skate",short_names:["ice_skate"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"BOW AND ARROW",short_name:"bow_and_arrow",short_names:["bow_and_arrow"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"FISHING POLE AND FISH",short_name:"fishing_pole_and_fish",short_names:["fishing_pole_and_fish"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ROWBOAT",short_name:"rowboat",short_names:["rowboat"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SWIMMER",short_name:"swimmer",short_names:["swimmer"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SURFER",short_name:"surfer",short_names:["surfer"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BATH",short_name:"bath",short_names:["bath"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"PERSON WITH BALL",short_name:"person_with_ball",short_names:["person_with_ball"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"WEIGHT LIFTER",short_name:"weight_lifter",short_names:["weight_lifter"],sort_order:27},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BICYCLIST",short_name:"bicyclist",short_names:["bicyclist"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MOUNTAIN BICYCLIST",short_name:"mountain_bicyclist",short_names:["mountain_bicyclist"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HORSE RACING",short_name:"horse_racing",short_names:["horse_racing"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MAN IN BUSINESS SUIT LEVITATING",short_name:"man_in_business_suit_levitating",short_names:["man_in_business_suit_levitating"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TROPHY",short_name:"trophy",short_names:["trophy"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"RUNNING SHIRT WITH SASH",short_name:"running_shirt_with_sash",short_names:["running_shirt_with_sash"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"SPORTS MEDAL",short_name:"sports_medal",short_names:["sports_medal"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"MILITARY MEDAL",short_name:"medal",short_names:["medal"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"REMINDER RIBBON",short_name:"reminder_ribbon",short_names:["reminder_ribbon"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ROSETTE",short_name:"rosette",short_names:["rosette"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TICKET",short_name:"ticket",short_names:["ticket"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"ADMISSION TICKETS",short_name:"admission_tickets",short_names:["admission_tickets"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"PERFORMING ARTS",short_name:"performing_arts",short_names:["performing_arts"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ARTIST PALETTE",short_name:"art",short_names:["art"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CIRCUS TENT",short_name:"circus_tent",short_names:["circus_tent"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MICROPHONE",short_name:"microphone",short_names:["microphone"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"HEADPHONE",short_name:"headphones",short_names:["headphones"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MUSICAL SCORE",short_name:"musical_score",short_names:["musical_score"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"MUSICAL KEYBOARD",short_name:"musical_keyboard",short_names:["musical_keyboard"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SAXOPHONE",short_name:"saxophone",short_names:["saxophone"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"TRUMPET",short_name:"trumpet",short_names:["trumpet"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GUITAR",short_name:"guitar",short_names:["guitar"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIOLIN",short_name:"violin",short_names:["violin"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"CLAPPER BOARD",short_name:"clapper",short_names:["clapper"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"VIDEO GAME",short_name:"video_game",short_names:["video_game"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"ALIEN MONSTER",short_name:"space_invader",short_names:["space_invader"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"DIRECT HIT",short_name:"dart",short_names:["dart"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"GAME DIE",short_name:"game_die",short_names:["game_die"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"SLOT MACHINE",short_name:"slot_machine",short_names:["slot_machine"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"BOWLING",short_name:"bowling",short_names:["bowling"],sort_order:57}],"Skin Tones":[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EMOJI MODIFIER FITZPATRICK TYPE-1-2",short_name:"skin-tone-2",short_names:["skin-tone-2"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EMOJI MODIFIER FITZPATRICK TYPE-3",short_name:"skin-tone-3",short_names:["skin-tone-3"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EMOJI MODIFIER FITZPATRICK TYPE-4",short_name:"skin-tone-4",short_names:["skin-tone-4"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EMOJI MODIFIER FITZPATRICK TYPE-5",short_name:"skin-tone-5",short_names:["skin-tone-5"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"EMOJI MODIFIER FITZPATRICK TYPE-6",short_name:"skin-tone-6",short_names:["skin-tone-6"],sort_order:5}],Flags:[{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AF",short_name:"flag-af",short_names:["flag-af"],sort_order:1},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AX",short_name:"flag-ax",short_names:["flag-ax"],sort_order:2},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AL",short_name:"flag-al",short_names:["flag-al"],sort_order:3},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DZ",short_name:"flag-dz",short_names:["flag-dz"],sort_order:4},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AS",short_name:"flag-as",short_names:["flag-as"],sort_order:5},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AD",short_name:"flag-ad",short_names:["flag-ad"],sort_order:6},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AO",short_name:"flag-ao",short_names:["flag-ao"],sort_order:7},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AI",short_name:"flag-ai",short_names:["flag-ai"],sort_order:8},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AQ",short_name:"flag-aq",short_names:["flag-aq"],sort_order:9},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AG",short_name:"flag-ag",short_names:["flag-ag"],sort_order:10},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AR",short_name:"flag-ar",short_names:["flag-ar"],sort_order:11},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AM",short_name:"flag-am",short_names:["flag-am"],sort_order:12},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AW",short_name:"flag-aw",short_names:["flag-aw"],sort_order:13},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AU",short_name:"flag-au",short_names:["flag-au"],sort_order:14},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AT",short_name:"flag-at",short_names:["flag-at"],sort_order:15},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AZ",short_name:"flag-az",short_names:["flag-az"],sort_order:16},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BS",short_name:"flag-bs",short_names:["flag-bs"],sort_order:17},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BH",short_name:"flag-bh",short_names:["flag-bh"],sort_order:18},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BD",short_name:"flag-bd",short_names:["flag-bd"],sort_order:19},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BB",short_name:"flag-bb",short_names:["flag-bb"],sort_order:20},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BY",short_name:"flag-by",short_names:["flag-by"],sort_order:21},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BE",short_name:"flag-be",short_names:["flag-be"],sort_order:22},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BZ",short_name:"flag-bz",short_names:["flag-bz"],sort_order:23},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BJ",short_name:"flag-bj",short_names:["flag-bj"],sort_order:24},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BM",short_name:"flag-bm",short_names:["flag-bm"],sort_order:25},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BT",short_name:"flag-bt",short_names:["flag-bt"],sort_order:26},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BO",short_name:"flag-bo",short_names:["flag-bo"],sort_order:27},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BQ",short_name:"flag-bq",short_names:["flag-bq"],sort_order:28},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"REGIONAL INDICATOR SYMBOL LETTERS BA",short_name:"flag-ba",short_names:["flag-ba"],sort_order:29},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BW",short_name:"flag-bw",short_names:["flag-bw"],sort_order:30},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BR",short_name:"flag-br",short_names:["flag-br"],sort_order:31},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IO",short_name:"flag-io",short_names:["flag-io"],sort_order:32},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VG",short_name:"flag-vg",short_names:["flag-vg"],sort_order:33},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"REGIONAL INDICATOR SYMBOL LETTERS BN",short_name:"flag-bn",short_names:["flag-bn"],sort_order:34},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BG",short_name:"flag-bg",short_names:["flag-bg"],sort_order:35},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BF",short_name:"flag-bf",short_names:["flag-bf"],sort_order:36},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BI",short_name:"flag-bi",short_names:["flag-bi"],sort_order:37},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CV",short_name:"flag-cv",short_names:["flag-cv"],sort_order:38},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KH",short_name:"flag-kh",short_names:["flag-kh"],sort_order:39},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CM",short_name:"flag-cm",short_names:["flag-cm"],sort_order:40},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CA",short_name:"flag-ca",short_names:["flag-ca"],sort_order:41},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IC",short_name:"flag-ic",short_names:["flag-ic"],sort_order:42},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KY",short_name:"flag-ky",short_names:["flag-ky"],sort_order:43},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CF",short_name:"flag-cf",short_names:["flag-cf"],sort_order:44},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TD",short_name:"flag-td",short_names:["flag-td"],sort_order:45},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CL",short_name:"flag-cl",short_names:["flag-cl"],sort_order:46},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CN",short_name:"flag-cn",short_names:["flag-cn","cn"],sort_order:47},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CX",short_name:"flag-cx",short_names:["flag-cx"],sort_order:48},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,
has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CC",short_name:"flag-cc",short_names:["flag-cc"],sort_order:49},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CO",short_name:"flag-co",short_names:["flag-co"],sort_order:50},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KM",short_name:"flag-km",short_names:["flag-km"],sort_order:51},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CG",short_name:"flag-cg",short_names:["flag-cg"],sort_order:52},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CD",short_name:"flag-cd",short_names:["flag-cd"],sort_order:53},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CK",short_name:"flag-ck",short_names:["flag-ck"],sort_order:54},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CR",short_name:"flag-cr",short_names:["flag-cr"],sort_order:55},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HR",short_name:"flag-hr",short_names:["flag-hr"],sort_order:56},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CU",short_name:"flag-cu",short_names:["flag-cu"],sort_order:57},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CW",short_name:"flag-cw",short_names:["flag-cw"],sort_order:58},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CY",short_name:"flag-cy",short_names:["flag-cy"],sort_order:59},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CZ",short_name:"flag-cz",short_names:["flag-cz"],sort_order:60},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DK",short_name:"flag-dk",short_names:["flag-dk"],sort_order:61},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DJ",short_name:"flag-dj",short_names:["flag-dj"],sort_order:62},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DM",short_name:"flag-dm",short_names:["flag-dm"],sort_order:63},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DO",short_name:"flag-do",short_names:["flag-do"],sort_order:64},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EC",short_name:"flag-ec",short_names:["flag-ec"],sort_order:65},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EG",short_name:"flag-eg",short_names:["flag-eg"],sort_order:66},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SV",short_name:"flag-sv",short_names:["flag-sv"],sort_order:67},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GQ",short_name:"flag-gq",short_names:["flag-gq"],sort_order:68},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ER",short_name:"flag-er",short_names:["flag-er"],sort_order:69},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EE",short_name:"flag-ee",short_names:["flag-ee"],sort_order:70},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ET",short_name:"flag-et",short_names:["flag-et"],sort_order:71},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EU",short_name:"flag-eu",short_names:["flag-eu"],sort_order:72},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FK",short_name:"flag-fk",short_names:["flag-fk"],sort_order:73},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FO",short_name:"flag-fo",short_names:["flag-fo"],sort_order:74},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FJ",short_name:"flag-fj",short_names:["flag-fj"],sort_order:75},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FI",short_name:"flag-fi",short_names:["flag-fi"],sort_order:76},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FR",short_name:"flag-fr",short_names:["flag-fr","fr"],sort_order:77},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GF",short_name:"flag-gf",short_names:["flag-gf"],sort_order:78},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PF",short_name:"flag-pf",short_names:["flag-pf"],sort_order:79},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TF",short_name:"flag-tf",short_names:["flag-tf"],sort_order:80},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GA",short_name:"flag-ga",short_names:["flag-ga"],sort_order:81},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GM",short_name:"flag-gm",short_names:["flag-gm"],sort_order:82},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GE",short_name:"flag-ge",short_names:["flag-ge"],sort_order:83},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DE",short_name:"flag-de",short_names:["flag-de","de"],sort_order:84},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GH",short_name:"flag-gh",short_names:["flag-gh"],sort_order:85},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GI",short_name:"flag-gi",short_names:["flag-gi"],sort_order:86},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GR",short_name:"flag-gr",short_names:["flag-gr"],sort_order:87},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GL",short_name:"flag-gl",short_names:["flag-gl"],sort_order:88},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GD",short_name:"flag-gd",short_names:["flag-gd"],sort_order:89},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GP",short_name:"flag-gp",short_names:["flag-gp"],sort_order:90},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GU",short_name:"flag-gu",short_names:["flag-gu"],sort_order:91},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GT",short_name:"flag-gt",short_names:["flag-gt"],sort_order:92},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GG",short_name:"flag-gg",short_names:["flag-gg"],sort_order:93},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GN",short_name:"flag-gn",short_names:["flag-gn"],sort_order:94},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GW",short_name:"flag-gw",short_names:["flag-gw"],sort_order:95},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GY",short_name:"flag-gy",short_names:["flag-gy"],sort_order:96},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HT",short_name:"flag-ht",short_names:["flag-ht"],sort_order:97},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HN",short_name:"flag-hn",short_names:["flag-hn"],sort_order:98},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HK",short_name:"flag-hk",short_names:["flag-hk"],sort_order:99},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HU",short_name:"flag-hu",short_names:["flag-hu"],sort_order:100},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IS",short_name:"flag-is",short_names:["flag-is"],sort_order:101},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IN",short_name:"flag-in",short_names:["flag-in"],sort_order:102},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ID",short_name:"flag-id",short_names:["flag-id"],sort_order:103},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IR",short_name:"flag-ir",short_names:["flag-ir"],sort_order:104},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IQ",short_name:"flag-iq",short_names:["flag-iq"],sort_order:105},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IE",short_name:"flag-ie",short_names:["flag-ie"],sort_order:106},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IM",short_name:"flag-im",short_names:["flag-im"],sort_order:107},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IL",short_name:"flag-il",short_names:["flag-il"],sort_order:108},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS IT",short_name:"flag-it",short_names:["flag-it","it"],sort_order:109},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CI",short_name:"flag-ci",short_names:["flag-ci"],sort_order:110},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS JM",short_name:"flag-jm",short_names:["flag-jm"],sort_order:111},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS JP",short_name:"flag-jp",short_names:["flag-jp","jp"],sort_order:112},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS JE",short_name:"flag-je",short_names:["flag-je"],sort_order:113},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS JO",short_name:"flag-jo",short_names:["flag-jo"],sort_order:114},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KZ",short_name:"flag-kz",short_names:["flag-kz"],sort_order:115},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KE",short_name:"flag-ke",short_names:["flag-ke"],sort_order:116},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KI",short_name:"flag-ki",short_names:["flag-ki"],sort_order:117},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS XK",short_name:"flag-xk",short_names:["flag-xk"],sort_order:118},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KW",short_name:"flag-kw",short_names:["flag-kw"],sort_order:119},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KG",short_name:"flag-kg",short_names:["flag-kg"],sort_order:120},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LA",short_name:"flag-la",short_names:["flag-la"],sort_order:121},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LV",short_name:"flag-lv",short_names:["flag-lv"],sort_order:122},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LB",short_name:"flag-lb",short_names:["flag-lb"],sort_order:123},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LS",short_name:"flag-ls",short_names:["flag-ls"],sort_order:124},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LR",short_name:"flag-lr",short_names:["flag-lr"],sort_order:125},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LY",short_name:"flag-ly",short_names:["flag-ly"],sort_order:126},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LI",short_name:"flag-li",short_names:["flag-li"],sort_order:127},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LT",short_name:"flag-lt",short_names:["flag-lt"],sort_order:128},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LU",short_name:"flag-lu",short_names:["flag-lu"],sort_order:129},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MO",short_name:"flag-mo",short_names:["flag-mo"],sort_order:130},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MK",short_name:"flag-mk",short_names:["flag-mk"],sort_order:131},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MG",short_name:"flag-mg",short_names:["flag-mg"],sort_order:132},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MW",short_name:"flag-mw",short_names:["flag-mw"],sort_order:133},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MY",short_name:"flag-my",short_names:["flag-my"],sort_order:134},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MV",short_name:"flag-mv",short_names:["flag-mv"],sort_order:135},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ML",short_name:"flag-ml",short_names:["flag-ml"],sort_order:136},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MT",short_name:"flag-mt",short_names:["flag-mt"],sort_order:137},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MH",short_name:"flag-mh",short_names:["flag-mh"],sort_order:138},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MQ",short_name:"flag-mq",short_names:["flag-mq"],sort_order:139},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MR",short_name:"flag-mr",short_names:["flag-mr"],sort_order:140},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MU",short_name:"flag-mu",short_names:["flag-mu"],sort_order:141},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS YT",short_name:"flag-yt",short_names:["flag-yt"],sort_order:142},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MX",short_name:"flag-mx",short_names:["flag-mx"],sort_order:143},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS FM",short_name:"flag-fm",short_names:["flag-fm"],sort_order:144},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MD",short_name:"flag-md",short_names:["flag-md"],sort_order:145},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MC",short_name:"flag-mc",short_names:["flag-mc"],sort_order:146},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MN",short_name:"flag-mn",short_names:["flag-mn"],sort_order:147},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ME",short_name:"flag-me",short_names:["flag-me"],sort_order:148},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MS",short_name:"flag-ms",short_names:["flag-ms"],sort_order:149},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MA",short_name:"flag-ma",short_names:["flag-ma"],sort_order:150},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MZ",short_name:"flag-mz",short_names:["flag-mz"],sort_order:151},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MM",short_name:"flag-mm",short_names:["flag-mm"],sort_order:152},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NA",short_name:"flag-na",short_names:["flag-na"],sort_order:153},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NR",short_name:"flag-nr",short_names:["flag-nr"],sort_order:154},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NP",short_name:"flag-np",short_names:["flag-np"],sort_order:155},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NL",short_name:"flag-nl",short_names:["flag-nl"],sort_order:156},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NC",short_name:"flag-nc",short_names:["flag-nc"],sort_order:157},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NZ",short_name:"flag-nz",short_names:["flag-nz"],sort_order:158},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NI",short_name:"flag-ni",short_names:["flag-ni"],sort_order:159},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NE",short_name:"flag-ne",short_names:["flag-ne"],sort_order:160},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NG",short_name:"flag-ng",short_names:["flag-ng"],sort_order:161},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NU",short_name:"flag-nu",short_names:["flag-nu"],sort_order:162},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NF",short_name:"flag-nf",short_names:["flag-nf"],sort_order:163},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MP",short_name:"flag-mp",short_names:["flag-mp"],sort_order:164},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KP",short_name:"flag-kp",short_names:["flag-kp"],sort_order:165},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS NO",short_name:"flag-no",short_names:["flag-no"],sort_order:166},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS OM",short_name:"flag-om",short_names:["flag-om"],sort_order:167},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PK",short_name:"flag-pk",short_names:["flag-pk"],sort_order:168},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PW",short_name:"flag-pw",short_names:["flag-pw"],sort_order:169},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PS",short_name:"flag-ps",short_names:["flag-ps"],sort_order:170},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PA",short_name:"flag-pa",short_names:["flag-pa"],sort_order:171},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PG",short_name:"flag-pg",short_names:["flag-pg"],sort_order:172},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PY",short_name:"flag-py",short_names:["flag-py"],sort_order:173},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PE",short_name:"flag-pe",short_names:["flag-pe"],sort_order:174},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PH",short_name:"flag-ph",short_names:["flag-ph"],sort_order:175},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PN",short_name:"flag-pn",short_names:["flag-pn"],sort_order:176},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PL",short_name:"flag-pl",short_names:["flag-pl"],sort_order:177},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PT",short_name:"flag-pt",short_names:["flag-pt"],sort_order:178},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PR",short_name:"flag-pr",short_names:["flag-pr"],sort_order:179},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS QA",short_name:"flag-qa",short_names:["flag-qa"],sort_order:180},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS RE",short_name:"flag-re",short_names:["flag-re"],sort_order:181},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS RO",short_name:"flag-ro",short_names:["flag-ro"],sort_order:182},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS RU",short_name:"flag-ru",short_names:["flag-ru","ru"],sort_order:183},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS RW",short_name:"flag-rw",short_names:["flag-rw"],sort_order:184},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BL",short_name:"flag-bl",short_names:["flag-bl"],sort_order:185},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SH",short_name:"flag-sh",short_names:["flag-sh"],sort_order:186},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KN",short_name:"flag-kn",short_names:["flag-kn"],sort_order:187},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LC",short_name:"flag-lc",short_names:["flag-lc"],sort_order:188},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS PM",short_name:"flag-pm",short_names:["flag-pm"],sort_order:189},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VC",short_name:"flag-vc",short_names:["flag-vc"],sort_order:190},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS WS",short_name:"flag-ws",short_names:["flag-ws"],sort_order:191},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SM",short_name:"flag-sm",short_names:["flag-sm"],sort_order:192},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ST",short_name:"flag-st",short_names:["flag-st"],sort_order:193},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,
has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SA",short_name:"flag-sa",short_names:["flag-sa"],sort_order:194},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SN",short_name:"flag-sn",short_names:["flag-sn"],sort_order:195},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS RS",short_name:"flag-rs",short_names:["flag-rs"],sort_order:196},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SC",short_name:"flag-sc",short_names:["flag-sc"],sort_order:197},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SL",short_name:"flag-sl",short_names:["flag-sl"],sort_order:198},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SG",short_name:"flag-sg",short_names:["flag-sg"],sort_order:199},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SX",short_name:"flag-sx",short_names:["flag-sx"],sort_order:200},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SK",short_name:"flag-sk",short_names:["flag-sk"],sort_order:201},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SI",short_name:"flag-si",short_names:["flag-si"],sort_order:202},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SB",short_name:"flag-sb",short_names:["flag-sb"],sort_order:203},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SO",short_name:"flag-so",short_names:["flag-so"],sort_order:204},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ZA",short_name:"flag-za",short_names:["flag-za"],sort_order:205},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GS",short_name:"flag-gs",short_names:["flag-gs"],sort_order:206},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS KR",short_name:"flag-kr",short_names:["flag-kr","kr"],sort_order:207},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SS",short_name:"flag-ss",short_names:["flag-ss"],sort_order:208},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ES",short_name:"flag-es",short_names:["flag-es","es"],sort_order:209},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS LK",short_name:"flag-lk",short_names:["flag-lk"],sort_order:210},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SD",short_name:"flag-sd",short_names:["flag-sd"],sort_order:211},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SR",short_name:"flag-sr",short_names:["flag-sr"],sort_order:212},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SZ",short_name:"flag-sz",short_names:["flag-sz"],sort_order:213},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SE",short_name:"flag-se",short_names:["flag-se"],sort_order:214},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS CH",short_name:"flag-ch",short_names:["flag-ch"],sort_order:215},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SY",short_name:"flag-sy",short_names:["flag-sy"],sort_order:216},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TW",short_name:"flag-tw",short_names:["flag-tw"],sort_order:217},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TJ",short_name:"flag-tj",short_names:["flag-tj"],sort_order:218},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TZ",short_name:"flag-tz",short_names:["flag-tz"],sort_order:219},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TH",short_name:"flag-th",short_names:["flag-th"],sort_order:220},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TL",short_name:"flag-tl",short_names:["flag-tl"],sort_order:221},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TG",short_name:"flag-tg",short_names:["flag-tg"],sort_order:222},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TK",short_name:"flag-tk",short_names:["flag-tk"],sort_order:223},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TO",short_name:"flag-to",short_names:["flag-to"],sort_order:224},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TT",short_name:"flag-tt",short_names:["flag-tt"],sort_order:225},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TN",short_name:"flag-tn",short_names:["flag-tn"],sort_order:226},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TR",short_name:"flag-tr",short_names:["flag-tr"],sort_order:227},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TM",short_name:"flag-tm",short_names:["flag-tm"],sort_order:228},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TC",short_name:"flag-tc",short_names:["flag-tc"],sort_order:229},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TV",short_name:"flag-tv",short_names:["flag-tv"],sort_order:230},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS UG",short_name:"flag-ug",short_names:["flag-ug"],sort_order:231},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS UA",short_name:"flag-ua",short_names:["flag-ua"],sort_order:232},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AE",short_name:"flag-ae",short_names:["flag-ae"],sort_order:233},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS GB",short_name:"flag-gb",short_names:["flag-gb","gb","uk"],sort_order:234},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS US",short_name:"flag-us",short_names:["flag-us","us"],sort_order:235},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VI",short_name:"flag-vi",short_names:["flag-vi"],sort_order:236},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS UY",short_name:"flag-uy",short_names:["flag-uy"],sort_order:237},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS UZ",short_name:"flag-uz",short_names:["flag-uz"],sort_order:238},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VU",short_name:"flag-vu",short_names:["flag-vu"],sort_order:239},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VA",short_name:"flag-va",short_names:["flag-va"],sort_order:240},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VE",short_name:"flag-ve",short_names:["flag-ve"],sort_order:241},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS VN",short_name:"flag-vn",short_names:["flag-vn"],sort_order:242},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS WF",short_name:"flag-wf",short_names:["flag-wf"],sort_order:243},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EH",short_name:"flag-eh",short_names:["flag-eh"],sort_order:244},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS YE",short_name:"flag-ye",short_names:["flag-ye"],sort_order:245},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ZM",short_name:"flag-zm",short_names:["flag-zm"],sort_order:246},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS ZW",short_name:"flag-zw",short_names:["flag-zw"],sort_order:247},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS AC",short_name:"flag-ac",short_names:["flag-ac"],sort_order:248},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS BV",short_name:"flag-bv",short_names:["flag-bv"],sort_order:249},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!1,name:"REGIONAL INDICATOR SYMBOL LETTERS CP",short_name:"flag-cp",short_names:["flag-cp"],sort_order:250},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS DG",short_name:"flag-dg",short_names:["flag-dg"],sort_order:251},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS EA",short_name:"flag-ea",short_names:["flag-ea"],sort_order:252},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS HM",short_name:"flag-hm",short_names:["flag-hm"],sort_order:253},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS MF",short_name:"flag-mf",short_names:["flag-mf"],sort_order:254},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS SJ",short_name:"flag-sj",short_names:["flag-sj"],sort_order:255},{has_img_apple:!0,has_img_google:!0,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS TA",short_name:"flag-ta",short_names:["flag-ta"],sort_order:256},{has_img_apple:!0,has_img_google:!1,has_img_twitter:!0,has_img_emojione:!0,has_img_facebook:!0,has_img_messenger:!0,name:"REGIONAL INDICATOR SYMBOL LETTERS UM",short_name:"flag-um",short_names:["flag-um"],sort_order:257}]}};var j;i.init=function(b){var c=this;j=!0,c.emoji=new a,c.emoji.allow_native=this.defaults.allowNative,c.emoji.img_set=this.defaults.emojiType,c.emoji.use_sheet=!0,c.emoji.supports_css=!0,console.log(this.defaults.emojiSheets),c.emoji.img_sets.apple.sheet=this.defaults.emojiSheets.apple,c.emoji.img_sets.google.sheet=this.defaults.emojiSheets.google,c.emoji.img_sets.twitter.sheet=this.defaults.emojiSheets.twitter,c.emoji.img_sets.emojione.sheet=this.defaults.emojiSheets.emojione,c.selector=b,c.elements=document.querySelectorAll(b),c.popup=document.querySelector(".wdt-emoji-popup"),c.scroller=c.popup.querySelector(".wdt-emoji-scroll-wrapper"),c.searchInput=c.popup.querySelector("#wdt-emoji-search"),c.previewImg=c.popup.querySelector("#wdt-emoji-preview-img"),c.previewName=c.popup.querySelector("#wdt-emoji-preview-name"),c.previewAliases=c.popup.querySelector("#wdt-emoji-preview-aliases"),document.querySelector("body").dataset.wdtEmojiBundle=i.defaults.emojiType;var d=c.popup.querySelector('[data-group-name="Recent"]');d&&(d.innerHTML=c.emoji.replace_colons(":clock3:"));var e=c.popup.querySelector('[data-group-name="People"]');e&&(e.innerHTML=c.emoji.replace_colons(":sunglasses:"));var f=c.popup.querySelector('[data-group-name="Nature"]');f&&(f.innerHTML=c.emoji.replace_colons(":shamrock:"));var g=c.popup.querySelector('[data-group-name="Foods"]');g&&(g.innerHTML=c.emoji.replace_colons(":pizza:"));var h=c.popup.querySelector('[data-group-name="Activity"]');h&&(h.innerHTML=c.emoji.replace_colons(":football:"));var k=c.popup.querySelector('[data-group-name="Places"]');k&&(k.innerHTML=c.emoji.replace_colons(":airplane:"));var l=c.popup.querySelector('[data-group-name="Objects"]');l&&(l.innerHTML=c.emoji.replace_colons(":bulb:"));var m=c.popup.querySelector('[data-group-name="Symbols"]');m&&(m.innerHTML=c.emoji.replace_colons(":heart:"));var n=c.popup.querySelector('[data-group-name="Flags"]');n&&(n.innerHTML=c.emoji.replace_colons(":waving_white_flag:"));var o=c.popup.querySelector('[data-group-name="Custom"]');if(o&&(o.innerHTML=c.emoji.replace_colons(":dark_sunglasses:")),c.ranges={},this.elements.length)for(var p=0;p<c.elements.length;p++){var q=c.elements[p];q.getAttribute("contenteditable")&&(q.dataset.rangeIndex=p,i.addRangeStore(q)),c.addPicker(c.elements[p])}return c},i.addPicker=function(a){var d=this;if(!b(a,"wdt-emoji-picker-ready")){var e=document.createElement("div");c(e,"wdt-emoji-picker"),e.innerHTML=d.emoji.replace_colons(":smile:"),e.addEventListener("click",i.openPicker);var f=a.parentNode;c(f,"wdt-emoji-picker-parent"),f.appendChild(e),b(a,"wdt-emoji-open-on-colon")&&f.addEventListener("keyup",i.onKeyup),c(a,"wdt-emoji-picker-ready")}},i.onKeyup=function(a){var b=a.target,c=m(b,"wdt-emoji-picker-parent"),d=n(c,"wdt-emoji-picker"),e=b.value,f=o(b),g=e.substring(0,f.start),h=g.match(/(\s|^):(\S*)$/),j=h&&h[2];i.searchAfterColon(j,d)},i.searchAfterColon=function(a,c){return!a||a.length<2?void i.close():(b(c,"wdt-emoji-picker-open")||i.openPicker.call(c,{target:c}),void i.fillSearch(a))},i.openPicker=function(a){function d(a){var b=document.body.getBoundingClientRect(),d=a.getBoundingClientRect(),e=i.popup.getBoundingClientRect(),f={left:b.right-e.width-30,top:d.top-300-60};return f.left=f.left<0?0:f.left,f.left+="px",f.top+="px",b.width<415?(c(i.popup,"wdt-emoji-mobile"),{left:"0px",bottom:"0px",top:"auto",width:"100%",position:"fixed"}):f}var f=m(a.target,"wdt-emoji-picker-parent");return i.input=f.querySelector(i.selector),s(i.popup,d(a.target)),window.addEventListener("resize",function(b){s(i.popup,d(a.target))}),c(i.popup,"open"),i.fillPickerPopup(),b(this,"wdt-emoji-picker-open")?(i.closePicker(this),e(i.popup,"open"),!1):(i.closePickers(),c(this,"wdt-emoji-picker-open"),void(this.innerHTML=i.emoji.replace_colons(":sunglasses:")))},i.fillPickerPopup=function(){var a=this;if(b(this.popup,"ready"))return!1;var d=this.popup.querySelector(".wdt-emoji-sections"),e={Recent:[],Custom:[]},f=[];for(var h in i.defaults.emojiData)if(i.defaults.emojiData.hasOwnProperty(h)){if(g(h,i.defaults.disabledCategories))continue;m=i.defaults.emojiData[h],e[h]=m}for(var j=Object.keys(e).sort(function(a,b){return i.defaults.sectionOrders[a]<i.defaults.sectionOrders[b]?1:-1}),k=0;k<j.length;k++)f[j[k]]=e[j[k]];for(var l in f)if(f.hasOwnProperty(l)){var m=f[l];if(m.length){var n=document.createElement("div"),o=document.createElement("h3"),p=document.createElement("div");for(o.innerHTML=l,o.dataset.emojiGroup=l,p.dataset.emojiGroup=l,c(p,"wdt-emoji-list"),c(n,"wdt-emoji-section"),k=0;k<m.length;k++){var q=m[k];if(q.has_img_apple||q.has_img_emojione||q.has_img_google||q.has_img_twitter||q.has_img_facebook||q.has_img_messenger){var r=document.createElement("a");c(r,"wdt-emoji"),c(r,i.getRandomPickerColor()),r.dataset.hasImgApple=q.has_img_apple,r.dataset.hasImgEmojione=q.has_img_emojione,r.dataset.hasImgGoogle=q.has_img_google,r.dataset.hasImgTwitter=q.has_img_twitter,r.dataset.hasImgFacebook=q.has_img_facebook,r.dataset.hasImgMessenger=q.has_img_messenger,r.dataset.wdtEmojiName=q.name,r.dataset.wdtEmojiShortnames=":"+q.short_names.join(": :")+":",r.dataset.wdtEmojiShortname=q.short_name,r.dataset.wdtEmojiOrder=q.sort_order,r.innerHTML=a.emoji.replace_colons(":"+q.short_name+":"),p.appendChild(r)}}n.appendChild(o),n.appendChild(p),d.appendChild(n)}}c(this.popup,"ready"),i.bindEvents()},i.getRandomPickerColor=function(){return i.defaults.pickerColors[Math.floor(Math.random()*i.defaults.pickerColors.length)]},i.close=function(){e(i.popup,"open"),i.closePickers()},i.closePickers=function(){var a=document.querySelectorAll(".wdt-emoji-picker-open");if(a.length)for(var b=0;b<a.length;b++)i.closePicker(a[b])},i.closePicker=function(a){e(a,"wdt-emoji-picker-open"),a.innerHTML=this.emoji.replace_colons(":smile:");m(a,"wdt-emoji-picker-parent");i.searchInput&&(i.searchInput.value="",i.search(""))},i.bindEvents=function(){var a=this,b=document.querySelectorAll(".wdt-emoji-section h3");if(b.length)for(var d=0;d<b.length;d++)l(b[d]);r("click",".wdt-emoji-list a.wdt-emoji",function(a){var b=o(i.input);p(i.input,b,":"+this.dataset.wdtEmojiShortname+":"),q("select",{el:i.input,event:a,emoji:":"+this.dataset.wdtEmojiShortname+":"});var c=document.createEvent("Event");return c.initEvent("input",!0,!0),i.input.dispatchEvent(c),i.close(),q("afterSelect",{el:i.input,event:a,emoji:":"+this.dataset.wdtEmojiShortname+":"}),!1}),r("click",".wdt-emoji-popup-mobile-closer",function(a){return i.close(),!1}),r("mouseover",".wdt-emoji-list a.wdt-emoji",function(b){i.previewTimer&&clearTimeout(i.previewTimer),i.previewExitTimer&&clearTimeout(i.previewExitTimer);var d=this;return i.previewTimer=setTimeout(function(){c(i.popup,"preview-mode"),i.previewImg.innerHTML=a.emoji.replace_colons(":"+d.dataset.wdtEmojiShortname+":"),i.previewName.innerHTML=d.dataset.wdtEmojiShortname,i.previewAliases.innerHTML=d.dataset.wdtEmojiShortnames},100),!1}),r("mouseout",".wdt-emoji-list a.wdt-emoji",function(){return i.previewExitTimer&&clearTimeout(i.previewExitTimer),i.previewExitTimer=setTimeout(function(){e(i.popup,"preview-mode")},1e3),!1}),r("click",".wdt-emoji-tab",function(a){var b=this.dataset.groupName,c=i.popup.querySelector('.wdt-emoji-section h3[data-emoji-group="'+b+'"]');return c&&(i.setActiveTab(b),i.scroller.scrollTop=c.offsetTop-c.getBoundingClientRect().height-2),!1}),r("input","#wdt-emoji-search",function(a){var b=this;i.searchTimer&&clearTimeout(i.searchTimer),i.searchTimer=setTimeout(function(){i.search(b.value)},225)}),k(i.scroller,"mousewheel DOMMouseScroll",function(a){var b=a.wheelDelta||a.originalEvent&&a.originalEvent.wheelDelta||-a.detail,c=this.scrollTop+this.getBoundingClientRect().height-this.scrollHeight>=0,d=this.scrollTop<=0;(0>b&&c||b>0&&d)&&a.preventDefault()})},i.fillSearch=function(a){return i.searchInput?(i.searchInput.value=a,i.search(a)):!1},i.search=function(a){var b=i.popup.querySelector(".wdt-emoji-sections"),g=i.popup.querySelector("#wdt-emoji-search-result-title"),h=b.querySelectorAll(".wdt-emoji"),j=i.popup.querySelector("#wdt-emoji-no-result"),k=0;if(""==a)return e(g,"wdt-show"),e(j,"wdt-show"),f(".wdt-emoji.not-matched","not-matched"),f(".wdt-emoji-section","wdt-inline"),f(".wdt-emoji-list","wdt-inline"),f(".wdt-emoji-section h3","wdt-search-on"),!1;for(var l=0;l<h.length;l++){var m=h[l],n=m.dataset.wdtEmojiName+" "+m.dataset.wdtEmojiShortnames;e(m,"not-matched"),n.match(new RegExp(a,"gi"))?k++:c(m,"not-matched")}c(g,"wdt-show"),d(".wdt-emoji-section","wdt-inline"),d(".wdt-emoji-list","wdt-inline"),d(".wdt-emoji-section h3","wdt-search-on"),k?e(j,"wdt-show"):c(j,"wdt-show")},i.dispatchHandlers={select:[],afterSelect:[],afterPickerOpen:[]},i.on=function(a,b){switch(a){case"select":return i.dispatchHandlers.select.push(b);case"afterSelect":return i.dispatchHandlers.afterSelect.push(b);case"afterPickerOpen":return i.dispatchHandlers.afterPickerOpen.push(b);default:console.error("wdt-emoji-bundle - Not supported event type!",a)}},i.changeType=function(a){var b,c=i.defaults.emojiSheets[a],d=document.querySelectorAll(".emoji-inner");for(b=0;b<d.length;b++){var e=d[b];s(e,{"background-image":"url("+c+")"})}i.defaults.emojiType=a,document.querySelector("body").dataset.wdtEmojiBundle=a,this.emoji.img_set=a},i.changeSkinColor=function(a){},i.render=function(a){return this.emoji.replace_colons(this.emoji.replace_emoticons(this.emoji.replace_unified(a)))},i.addRangeStore=function(a){a.addEventListener("focus",function(){var a=window.getSelection();i.ranges[this.dataset.rangeIndex]?a.rangeCount>0&&(a.removeAllRanges(),a.addRange(i.ranges[this.dataset.rangeIndex])):i.ranges[this.dataset.rangeIndex]=new Range}),k(a,"mouseup keyup",function(){i.ranges[this.dataset.rangeIndex]=window.getSelection().getRangeAt(0)}),k(a,"mousedown click",function(a){document.activeElement!=this&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,this.focus())})};var k=function(a,b,c){b=b.split(" ");for(var d=0;d<b.length;d++)a.addEventListener(b[d],c,!1)},l=function(a){function d(){var d=i.scroller.scrollTop;if(b(a,"sticky")&&g>d)e(a,"sticky"),s(a,{top:null}),s(a.parentNode,{"padding-top":null});else if(d>g&&!b(a,"sticky")){var f=document.querySelectorAll(".wdt-emoji-section h3");if(f.length)for(var j=0;j<f.length;j++)e(f[j],"sticky"),s(f[j],{top:null}),s(f[j].parentNode,{"padding-top":null});c(a,"sticky"),s(a,{top:h+"px"}),s(a.parentNode,{"padding-top":a.getBoundingClientRect().height+"px"}),i.setActiveTab(a.dataset.emojiGroup)}}var f=i.scroller.getBoundingClientRect(),g=a.getBoundingClientRect().top-f.top,h=i.popup.querySelector("#wdt-emoji-menu-header").getBoundingClientRect().height;i.scroller.addEventListener("scroll",d)};i.setActiveTab=function(a){var b=document.querySelectorAll(".wdt-emoji-tab");if(b.length)for(var d=0;d<b.length;d++)e(b[d],"active");var f=i.popup.querySelector('.wdt-emoji-tab[data-group-name="'+a+'"]');c(f,"active")};var m=function(a,b){for(;(a=a.parentElement)&&!a.classList.contains(b););return a},n=function(a,b){for(var c=a.children,d=0;d<c.length;d++){var e=c[d];if(e.classList.contains(b))return e}},o=function(a){var b={};if(a.getAttribute("contenteditable"))return{el:a,ce:!0};if(window.getSelection){var c=a.value||a.innerHTML,d=c.length,e=a.selectionStart,f=a.selectionEnd,g=c.substring(e,f);b={el:a,start:e,end:f,len:d,sel:g}}else if(document.selection){var h=document.selection.createRange(),i=a.value||a.innerHTML,j=h.duplicate();j.moveToElementText(a),j.setEndPoint("EndToEnd",h),a.selectionStart=j.text.length-h.text.length,a.selectionEnd=a.selectionStart+h.text.length,b={el:a,start:a.selectionStart,end:a.selectionEnd,len:i.length,sel:h.text}}return b},p=function(a,b,c){var d=a.value||a.innerHTML||"";if(c+=" ",b.ce)a.focus(),document.execCommand("insertText",!1,c);else{var e=d.substring(0,b.start);e=e.replace(/:\S*$/,""),a.value=e+c+d.substring(b.end,b.len),a.selectionStart=a.selectionEnd=e.length+c.length,a.focus()}},q=function(a,b){var c,d,e,f;for(f=i.dispatchHandlers[a],d=0,e=f.length;e>d;d++)(c=f[d])(b)},r=function(a,b,c){document.addEventListener(a,function(a){var d=document.querySelectorAll(b);if(d){for(var e=a.target,f=-1;e&&-1===(f=Array.prototype.indexOf.call(d,e));)e=e.parentElement;f>-1&&c.call(e,a)}})},s=function(){function a(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})}function b(a){var b=document.body.style;if(a in b)return a;for(var c,d=e.length,f=a.charAt(0).toUpperCase()+a.slice(1);d--;)if(c=e[d]+f,c in b)return c;return a}function c(c){return c=a(c),f[c]||(f[c]=b(c))}function d(a,b,d){b=c(b),a.style[b]=d}var e=["Webkit","O","Moz","ms"],f={};return function(a,b){var c,e,f=arguments;if(2==f.length)for(c in b)e=b[c],void 0!==e&&b.hasOwnProperty(c)&&d(a,c,e);else d(a,f[1],f[2])}}();return i}),angular.module("templates-dist",["templates/emoji-button-bootstrap.html","templates/emoji-button-strap.html","templates/emoji-button.html","templates/emoji-popover-bootstrap.html","templates/emoji-popover-strap.html","templates/emoji-popover.html"]),angular.module("templates/emoji-button-bootstrap.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-button-bootstrap.html",'<i class="emoji-picker emoji-smile"\n   popover-template="templates/emoji-popover-bootstrap.html"\n   popover-placement="{{ !placement && \'left\' || placement }}"\n   popover-title="{{ title }}"></i>\n')}]),angular.module("templates/emoji-button-strap.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-button-strap.html",'<i class="emoji-picker emoji-smile"\n   bs-popover\n   template="templates/emoji-popover-strap.html"\n   placement="{{ !placement && \'left\' || placement }}"\n   title="{{ title }}"></i>\n')}]),angular.module("templates/emoji-button.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-button.html",'<i class="emoji-picker emoji-smile"\n   emoji-popover template="templates/emoji-popover.html"\n   placement="{{ ::placement }}"\n   title="{{ ::title }}"></i>\n')}]),angular.module("templates/emoji-popover-bootstrap.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-popover-bootstrap.html",'<div class="emoji-container">\n  <div class="emoji-groups">\n    <i class="emoji-group {{ ::group.icon.name }}"\n       ng-class="(group.icon.selected === selectedGroup.icon.selected) ? selectedGroup.icon.selected : \'\'"\n       ng-repeat="group in ::groups"\n       ng-click="changeGroup(group)">\n    </i>\n    <span class="btn-backspace" ng-click="remove()">&#x232B;</span>\n  </div>\n  <i class="emoji-picker emoji-{{ ::toClassName(emoji) }}"\n     ng-repeat="emoji in selectedGroup.emoji"\n     ng-click="append(emoji)">\n  </i>\n</div>\n')}]),angular.module("templates/emoji-popover-strap.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-popover-strap.html",'<div class="popover" tabindex="-1">\n  <div class="arrow"></div>\n  <div class="close-button-holder">\n    <i class="close-button" ng-click="$hide()">&times;</i>\n  </div>\n  <h3 class="popover-title" ng-bind-html="title" ng-show="title"></h3>\n  <div class="popover-content">\n    <div class="emoji-container">\n      <div class="emoji-groups">\n        <i class="emoji-group {{ ::group.icon.name }}"\n           ng-class="(group.icon.selected === selectedGroup.icon.selected) ? selectedGroup.icon.selected : \'\'"\n           ng-repeat="group in ::groups"\n           ng-click="changeGroup(group)">\n        </i>\n        <span class="btn-backspace" ng-click="remove()">&#x232B;</span>\n      </div>\n      <i class="emoji-picker emoji-{{ ::toClassName(emoji) }}"\n         ng-repeat="emoji in selectedGroup.emoji"\n         ng-click="append(emoji)">\n      </i>\n    </div>\n  </div>\n</div>\n')}]),angular.module("templates/emoji-popover.html",[]).run(["$templateCache",function(a){a.put("templates/emoji-popover.html",'<div class="emoji-popover" tabindex="-1">\n  <div class="close-button-holder">\n    <i class="close-button" ng-click="$hide()">&times;</i>\n  </div>\n  <h3 class="emoji-popover-title" ng-bind-html="title" ng-show="title"></h3>\n  <div class="emoji-popover-content">\n    <div class="emoji-container">\n      <div class="emoji-groups">\n        <i class="emoji-group {{ ::group.icon.name }}"\n           ng-class="(group.icon.selected === selectedGroup.icon.selected) ? selectedGroup.icon.selected : \'\'"\n           ng-repeat="group in ::groups"\n           title="{{ showCatName(group.name) | capitalize }} " ng-click="changeGroup(group)">\n        </i>\n        <span class="btn-backspace" title="Remove" ng-click="remove()">&#x232B;</span>\n      </div>\n      <i class="emoji-picker emoji-{{ ::toClassName(emoji) }}"\n         ng-repeat="emoji in selectedGroup.emoji"\n         title="{{ showEmojiName(emoji) | capitalize }}" ng-click="emojiClicked(emoji)">\n      </i>\n    </div>\n  </div>\n</div>\n')}]),angular.module("vkEmojiPicker",["ngSanitize","templates-dist"]).config(function(){String.fromCodePoint||!function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(d){}return c}(),b=String.fromCharCode,c=Math.floor,d=function(){var a,d,e=16384,f=[],g=-1,h=arguments.length;if(!h)return"";for(var i="";++g<h;){var j=Number(arguments[g]);if(!isFinite(j)||0>j||j>1114111||c(j)!=j)throw RangeError("Invalid code point: "+j);65535>=j?f.push(j):(j-=65536,a=(j>>10)+55296,d=j%1024+56320,f.push(a,d)),(g+1==h||f.length>e)&&(i+=b.apply(null,f),f.length=0)}return i};a?a(String,"fromCodePoint",{value:d,configurable:!0,writable:!0}):String.fromCodePoint=d}()}),angular.module("vkEmojiPicker").constant("EmojiGroups",function(){var a=["smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","winky_face","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","wow","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","thumbsup","thumbsdown","ok_hand","punch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon"],b=["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny"],c=["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"],d=["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","uk","de"],e=["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down"],f=a.concat(b,c,d,e);
return{groups:[{name:"recent",icon:{name:"icon-recent",selected:"icon-recent-selected"},emoji:[]},{name:"smiles",icon:{name:"icon-smile",selected:"icon-smile-selected"},emoji:a},{name:"nature",icon:{name:"icon-flower",selected:"icon-flower-selected"},emoji:b},{name:"items",icon:{name:"icon-bell",selected:"icon-bell-selected"},emoji:c},{name:"transportation",icon:{name:"icon-car",selected:"icon-car-selected"},emoji:d},{name:"icons",icon:{name:"icon-grid",selected:"icon-grid-selected"},emoji:e}],all:f}}()),angular.module("vkEmojiPicker").constant("EmojiHex",function(){var a={copyright:"00a9",registered:"00ae",bangbang:"203c",interrobang:"2049",tm:"2122",information_source:"2139",left_right_arrow:"2194",arrow_up_down:"2195",arrow_upper_left:"2196",arrow_upper_right:"2197",arrow_lower_right:"2198",arrow_lower_left:"2199",leftwards_arrow_with_hook:"21a9",arrow_right_hook:"21aa",watch:"231a",hourglass:"231b",fast_forward:"23e9",rewind:"23ea",arrow_double_up:"23eb",arrow_double_down:"23ec",alarm_clock:"23f0",hourglass_flowing_sand:"23f3",m:"24c2",black_small_square:"25aa",white_small_square:"25ab",arrow_forward:"25b6",arrow_backward:"25c0",white_medium_square:"25fb",black_medium_square:"25fc",white_medium_small_square:"25fd",black_medium_small_square:"25fe",sunny:"2600",cloud:"2601",phone:"260e",telephone:"260e",ballot_box_with_check:"2611",umbrella:"2614",coffee:"2615",point_up:"261d",relaxed:"263a",aries:"2648",taurus:"2649",gemini:"264a",cancer:"264b",leo:"264c",virgo:"264d",libra:"264e",scorpius:"264f",sagittarius:"2650",capricorn:"2651",aquarius:"2652",pisces:"2653",spades:"2660",clubs:"2663",hearts:"2665",diamonds:"2666",hotsprings:"2668",recycle:"267b",wheelchair:"267f",anchor:"2693",warning:"26a0",zap:"26a1",white_circle:"26aa",black_circle:"26ab",soccer:"26bd",baseball:"26be",snowman:"26c4",partly_sunny:"26c5",ophiuchus:"26ce",no_entry:"26d4",church:"26ea",fountain:"26f2",golf:"26f3",boat:"26f5",sailboat:"26f5",tent:"26fa",fuelpump:"26fd",scissors:"2702",white_check_mark:"2705",airplane:"2708",email:"2709",envelope:"2709",fist:"270a",hand:"270b",raised_hand:"270b",v:"270c",pencil2:"270f",black_nib:"2712",heavy_check_mark:"2714",heavy_multiplication_x:"2716",sparkles:"2728",eight_spoked_asterisk:"2733",eight_pointed_black_star:"2734",snowflake:"2744",sparkle:"2747",x:"274c",negative_squared_cross_mark:"274e",question:"2753",grey_question:"2754",grey_exclamation:"2755",exclamation:"2757",heavy_exclamation_mark:"2757",heart:"2764",heavy_plus_sign:"2795",heavy_minus_sign:"2796",heavy_division_sign:"2797",arrow_right:"27a1",curly_loop:"27b0",loop:"27bf",arrow_heading_up:"2934",arrow_heading_down:"2935",arrow_left:"2b05",arrow_up:"2b06",arrow_down:"2b07",black_large_square:"2b1b",white_large_square:"2b1c",star:"2b50",o:"2b55",wavy_dash:"3030",part_alternation_mark:"303d",congratulations:"3297",secret:"3299",mahjong:"1f004",black_joker:"1f0cf",a:"1f170",b:"1f171",o2:"1f17e",parking:"1f17f",ab:"1f18e",cl:"1f191",cool:"1f192",free:"1f193",id:"1f194","new":"1f195",ng:"1f196",ok:"1f197",sos:"1f198",up:"1f199",vs:"1f19a",koko:"1f201",sa:"1f202",u7121:"1f21a",u6307:"1f22f",u7981:"1f232",u7a7a:"1f233",u5408:"1f234",u6e80:"1f235",u6709:"1f236",u6708:"1f237",u7533:"1f238",u5272:"1f239",u55b6:"1f23a",ideograph_advantage:"1f250",accept:"1f251",cyclone:"1f300",foggy:"1f301",closed_umbrella:"1f302",night_with_stars:"1f303",sunrise_over_mountains:"1f304",sunrise:"1f305",city_sunset:"1f306",city_sunrise:"1f307",rainbow:"1f308",bridge_at_night:"1f309",ocean:"1f30a",volcano:"1f30b",milky_way:"1f30c",earth_africa:"1f30d",earth_americas:"1f30e",earth_asia:"1f30f",globe_with_meridians:"1f310",new_moon:"1f311",waxing_crescent_moon:"1f312",first_quarter_moon:"1f313",moon:"1f314",waxing_gibbous_moon:"1f314",full_moon:"1f315",waning_gibbous_moon:"1f316",last_quarter_moon:"1f317",waning_crescent_moon:"1f318",crescent_moon:"1f319",new_moon_with_face:"1f31a",first_quarter_moon_with_face:"1f31b",last_quarter_moon_with_face:"1f31c",full_moon_with_face:"1f31d",sun_with_face:"1f31e",star2:"1f31f",stars:"1f320",chestnut:"1f330",seedling:"1f331",evergreen_tree:"1f332",deciduous_tree:"1f333",palm_tree:"1f334",cactus:"1f335",tulip:"1f337",cherry_blossom:"1f338",rose:"1f339",hibiscus:"1f33a",sunflower:"1f33b",blossom:"1f33c",corn:"1f33d",ear_of_rice:"1f33e",herb:"1f33f",four_leaf_clover:"1f340",maple_leaf:"1f341",fallen_leaf:"1f342",leaves:"1f343",mushroom:"1f344",tomato:"1f345",eggplant:"1f346",grapes:"1f347",melon:"1f348",watermelon:"1f349",tangerine:"1f34a",lemon:"1f34b",banana:"1f34c",pineapple:"1f34d",apple:"1f34e",green_apple:"1f34f",pear:"1f350",peach:"1f351",cherries:"1f352",strawberry:"1f353",hamburger:"1f354",pizza:"1f355",meat_on_bone:"1f356",poultry_leg:"1f357",rice_cracker:"1f358",rice_ball:"1f359",rice:"1f35a",curry:"1f35b",ramen:"1f35c",spaghetti:"1f35d",bread:"1f35e",fries:"1f35f",sweet_potato:"1f360",dango:"1f361",oden:"1f362",sushi:"1f363",fried_shrimp:"1f364",fish_cake:"1f365",icecream:"1f366",shaved_ice:"1f367",ice_cream:"1f368",doughnut:"1f369",cookie:"1f36a",chocolate_bar:"1f36b",candy:"1f36c",lollipop:"1f36d",custard:"1f36e",honey_pot:"1f36f",cake:"1f370",bento:"1f371",stew:"1f372",egg:"1f373",fork_and_knife:"1f374",tea:"1f375",sake:"1f376",wine_glass:"1f377",cocktail:"1f378",tropical_drink:"1f379",beer:"1f37a",beers:"1f37b",baby_bottle:"1f37c",ribbon:"1f380",gift:"1f381",birthday:"1f382",jack_o_lantern:"1f383",christmas_tree:"1f384",santa:"1f385",fireworks:"1f386",sparkler:"1f387",balloon:"1f388",tada:"1f389",confetti_ball:"1f38a",tanabata_tree:"1f38b",crossed_flags:"1f38c",bamboo:"1f38d",dolls:"1f38e",flags:"1f38f",wind_chime:"1f390",rice_scene:"1f391",school_satchel:"1f392",mortar_board:"1f393",carousel_horse:"1f3a0",ferris_wheel:"1f3a1",roller_coaster:"1f3a2",fishing_pole_and_fish:"1f3a3",microphone:"1f3a4",movie_camera:"1f3a5",cinema:"1f3a6",headphones:"1f3a7",art:"1f3a8",tophat:"1f3a9",circus_tent:"1f3aa",ticket:"1f3ab",clapper:"1f3ac",performing_arts:"1f3ad",video_game:"1f3ae",dart:"1f3af",slot_machine:"1f3b0","8ball":"1f3b1",game_die:"1f3b2",bowling:"1f3b3",flower_playing_cards:"1f3b4",musical_note:"1f3b5",notes:"1f3b6",saxophone:"1f3b7",guitar:"1f3b8",musical_keyboard:"1f3b9",trumpet:"1f3ba",violin:"1f3bb",musical_score:"1f3bc",running_shirt_with_sash:"1f3bd",tennis:"1f3be",ski:"1f3bf",basketball:"1f3c0",checkered_flag:"1f3c1",snowboarder:"1f3c2",runner:"1f3c3",running:"1f3c3",surfer:"1f3c4",trophy:"1f3c6",horse_racing:"1f3c7",football:"1f3c8",rugby_football:"1f3c9",swimmer:"1f3ca",house:"1f3e0",house_with_garden:"1f3e1",office:"1f3e2",post_office:"1f3e3",european_post_office:"1f3e4",hospital:"1f3e5",bank:"1f3e6",atm:"1f3e7",hotel:"1f3e8",love_hotel:"1f3e9",convenience_store:"1f3ea",school:"1f3eb",department_store:"1f3ec",factory:"1f3ed",izakaya_lantern:"1f3ee",lantern:"1f3ee",japanese_castle:"1f3ef",european_castle:"1f3f0","skin-tone-2":"1f3fb","skin-tone-3":"1f3fc","skin-tone-4":"1f3fd","skin-tone-5":"1f3fe","skin-tone-6":"1f3ff",rat:"1f400",mouse2:"1f401",ox:"1f402",water_buffalo:"1f403",cow2:"1f404",tiger2:"1f405",leopard:"1f406",rabbit2:"1f407",cat2:"1f408",dragon:"1f409",crocodile:"1f40a",whale2:"1f40b",snail:"1f40c",snake:"1f40d",racehorse:"1f40e",ram:"1f40f",goat:"1f410",sheep:"1f411",monkey:"1f412",rooster:"1f413",chicken:"1f414",dog2:"1f415",pig2:"1f416",boar:"1f417",elephant:"1f418",octopus:"1f419",shell:"1f41a",bug:"1f41b",ant:"1f41c",bee:"1f41d",honeybee:"1f41d",beetle:"1f41e",fish:"1f41f",tropical_fish:"1f420",blowfish:"1f421",turtle:"1f422",hatching_chick:"1f423",baby_chick:"1f424",hatched_chick:"1f425",bird:"1f426",penguin:"1f427",koala:"1f428",poodle:"1f429",dromedary_camel:"1f42a",camel:"1f42b",dolphin:"1f42c",flipper:"1f42c",mouse:"1f42d",cow:"1f42e",tiger:"1f42f",rabbit:"1f430",cat:"1f431",dragon_face:"1f432",whale:"1f433",horse:"1f434",monkey_face:"1f435",dog:"1f436",pig:"1f437",frog:"1f438",hamster:"1f439",wolf:"1f43a",bear:"1f43b",panda_face:"1f43c",pig_nose:"1f43d",feet:"1f43e",paw_prints:"1f43e",eyes:"1f440",ear:"1f442",nose:"1f443",lips:"1f444",tongue:"1f445",point_up_2:"1f446",point_down:"1f447",point_left:"1f448",point_right:"1f449",facepunch:"1f44a",punch:"1f44a",wave:"1f44b",ok_hand:"1f44c","+1":"1f44d",thumbsup:"1f44d","-1":"1f44e",thumbsdown:"1f44e",clap:"1f44f",open_hands:"1f450",crown:"1f451",womans_hat:"1f452",eyeglasses:"1f453",necktie:"1f454",shirt:"1f455",tshirt:"1f455",jeans:"1f456",dress:"1f457",kimono:"1f458",bikini:"1f459",womans_clothes:"1f45a",purse:"1f45b",handbag:"1f45c",pouch:"1f45d",mans_shoe:"1f45e",shoe:"1f45e",athletic_shoe:"1f45f",high_heel:"1f460",sandal:"1f461",boot:"1f462",footprints:"1f463",bust_in_silhouette:"1f464",busts_in_silhouette:"1f465",boy:"1f466",girl:"1f467",man:"1f468",woman:"1f469",family:"1f46a",couple:"1f46b",two_men_holding_hands:"1f46c",two_women_holding_hands:"1f46d",cop:"1f46e",dancers:"1f46f",bride_with_veil:"1f470",person_with_blond_hair:"1f471",man_with_gua_pi_mao:"1f472",man_with_turban:"1f473",older_man:"1f474",older_woman:"1f475",baby:"1f476",construction_worker:"1f477",princess:"1f478",japanese_ogre:"1f479",japanese_goblin:"1f47a",ghost:"1f47b",angel:"1f47c",alien:"1f47d",space_invader:"1f47e",imp:"1f47f",skull:"1f480",information_desk_person:"1f481",guardsman:"1f482",dancer:"1f483",lipstick:"1f484",nail_care:"1f485",massage:"1f486",haircut:"1f487",barber:"1f488",syringe:"1f489",pill:"1f48a",kiss:"1f48b",love_letter:"1f48c",ring:"1f48d",gem:"1f48e",couplekiss:"1f48f",bouquet:"1f490",couple_with_heart:"1f491",wedding:"1f492",heartbeat:"1f493",broken_heart:"1f494",two_hearts:"1f495",sparkling_heart:"1f496",heartpulse:"1f497",cupid:"1f498",blue_heart:"1f499",green_heart:"1f49a",yellow_heart:"1f49b",purple_heart:"1f49c",gift_heart:"1f49d",revolving_hearts:"1f49e",heart_decoration:"1f49f",diamond_shape_with_a_dot_inside:"1f4a0",bulb:"1f4a1",anger:"1f4a2",bomb:"1f4a3",zzz:"1f4a4",boom:"1f4a5",collision:"1f4a5",sweat_drops:"1f4a6",droplet:"1f4a7",dash:"1f4a8",hankey:"1f4a9",poop:"1f4a9",shit:"1f4a9",muscle:"1f4aa",dizzy:"1f4ab",speech_balloon:"1f4ac",thought_balloon:"1f4ad",white_flower:"1f4ae",100:"1f4af",moneybag:"1f4b0",currency_exchange:"1f4b1",heavy_dollar_sign:"1f4b2",credit_card:"1f4b3",yen:"1f4b4",dollar:"1f4b5",euro:"1f4b6",pound:"1f4b7",money_with_wings:"1f4b8",chart:"1f4b9",seat:"1f4ba",computer:"1f4bb",briefcase:"1f4bc",minidisc:"1f4bd",floppy_disk:"1f4be",cd:"1f4bf",dvd:"1f4c0",file_folder:"1f4c1",open_file_folder:"1f4c2",page_with_curl:"1f4c3",page_facing_up:"1f4c4",date:"1f4c5",calendar:"1f4c6",card_index:"1f4c7",chart_with_upwards_trend:"1f4c8",chart_with_downwards_trend:"1f4c9",bar_chart:"1f4ca",clipboard:"1f4cb",pushpin:"1f4cc",round_pushpin:"1f4cd",paperclip:"1f4ce",straight_ruler:"1f4cf",triangular_ruler:"1f4d0",bookmark_tabs:"1f4d1",ledger:"1f4d2",notebook:"1f4d3",notebook_with_decorative_cover:"1f4d4",closed_book:"1f4d5",book:"1f4d6",open_book:"1f4d6",green_book:"1f4d7",blue_book:"1f4d8",orange_book:"1f4d9",books:"1f4da",name_badge:"1f4db",scroll:"1f4dc",memo:"1f4dd",pencil:"1f4dd",telephone_receiver:"1f4de",pager:"1f4df",fax:"1f4e0",satellite:"1f4e1",loudspeaker:"1f4e2",mega:"1f4e3",outbox_tray:"1f4e4",inbox_tray:"1f4e5","package":"1f4e6","e-mail":"1f4e7",incoming_envelope:"1f4e8",envelope_with_arrow:"1f4e9",mailbox_closed:"1f4ea",mailbox:"1f4eb",mailbox_with_mail:"1f4ec",mailbox_with_no_mail:"1f4ed",postbox:"1f4ee",postal_horn:"1f4ef",newspaper:"1f4f0",iphone:"1f4f1",calling:"1f4f2",vibration_mode:"1f4f3",mobile_phone_off:"1f4f4",no_mobile_phones:"1f4f5",signal_strength:"1f4f6",camera:"1f4f7",video_camera:"1f4f9",tv:"1f4fa",radio:"1f4fb",vhs:"1f4fc",twisted_rightwards_arrows:"1f500",repeat:"1f501",repeat_one:"1f502",arrows_clockwise:"1f503",arrows_counterclockwise:"1f504",low_brightness:"1f505",high_brightness:"1f506",mute:"1f507",speaker:"1f508",sound:"1f509",loud_sound:"1f50a",battery:"1f50b",electric_plug:"1f50c",mag:"1f50d",mag_right:"1f50e",lock_with_ink_pen:"1f50f",closed_lock_with_key:"1f510",key:"1f511",lock:"1f512",unlock:"1f513",bell:"1f514",no_bell:"1f515",bookmark:"1f516",link:"1f517",radio_button:"1f518",back:"1f519",end:"1f51a",on:"1f51b",soon:"1f51c",top:"1f51d",underage:"1f51e",keycap_ten:"1f51f",capital_abcd:"1f520",abcd:"1f521",1234:"1f522",symbols:"1f523",abc:"1f524",fire:"1f525",flashlight:"1f526",wrench:"1f527",hammer:"1f528",nut_and_bolt:"1f529",hocho:"1f52a",knife:"1f52a",gun:"1f52b",microscope:"1f52c",telescope:"1f52d",crystal_ball:"1f52e",six_pointed_star:"1f52f",beginner:"1f530",trident:"1f531",black_square_button:"1f532",white_square_button:"1f533",red_circle:"1f534",large_blue_circle:"1f535",large_orange_diamond:"1f536",large_blue_diamond:"1f537",small_orange_diamond:"1f538",small_blue_diamond:"1f539",small_red_triangle:"1f53a",small_red_triangle_down:"1f53b",arrow_up_small:"1f53c",arrow_down_small:"1f53d",clock1:"1f550",clock2:"1f551",clock3:"1f552",clock4:"1f553",clock5:"1f554",clock6:"1f555",clock7:"1f556",clock8:"1f557",clock9:"1f558",clock10:"1f559",clock11:"1f55a",clock12:"1f55b",clock130:"1f55c",clock230:"1f55d",clock330:"1f55e",clock430:"1f55f",clock530:"1f560",clock630:"1f561",clock730:"1f562",clock830:"1f563",clock930:"1f564",clock1030:"1f565",clock1130:"1f566",clock1230:"1f567",mount_fuji:"1f5fb",tokyo_tower:"1f5fc",statue_of_liberty:"1f5fd",japan:"1f5fe",moyai:"1f5ff",grinning:"1f600",grin:"1f601",joy:"1f602",smiley:"1f603",smile:"1f604",sweat_smile:"1f605",laughing:"1f606",satisfied:"1f606",innocent:"1f607",smiling_imp:"1f608",wink:"1f609",blush:"1f60a",yum:"1f60b",relieved:"1f60c",heart_eyes:"1f60d",sunglasses:"1f60e",smirk:"1f60f",neutral_face:"1f610",expressionless:"1f611",unamused:"1f612",sweat:"1f613",pensive:"1f614",confused:"1f615",confounded:"1f616",kissing:"1f617",kissing_heart:"1f618",kissing_smiling_eyes:"1f619",kissing_closed_eyes:"1f61a",stuck_out_tongue:"1f61b",stuck_out_tongue_winking_eye:"1f61c",stuck_out_tongue_closed_eyes:"1f61d",disappointed:"1f61e",worried:"1f61f",angry:"1f620",rage:"1f621",cry:"1f622",persevere:"1f623",triumph:"1f624",disappointed_relieved:"1f625",frowning:"1f626",anguished:"1f627",fearful:"1f628",weary:"1f629",sleepy:"1f62a",tired_face:"1f62b",grimacing:"1f62c",sob:"1f62d",open_mouth:"1f62e",hushed:"1f62f",cold_sweat:"1f630",scream:"1f631",astonished:"1f632",flushed:"1f633",sleeping:"1f634",dizzy_face:"1f635",no_mouth:"1f636",mask:"1f637",smile_cat:"1f638",joy_cat:"1f639",smiley_cat:"1f63a",heart_eyes_cat:"1f63b",smirk_cat:"1f63c",kissing_cat:"1f63d",pouting_cat:"1f63e",crying_cat_face:"1f63f",scream_cat:"1f640",no_good:"1f645",ok_woman:"1f646",bow:"1f647",see_no_evil:"1f648",hear_no_evil:"1f649",speak_no_evil:"1f64a",raising_hand:"1f64b",raised_hands:"1f64c",person_frowning:"1f64d",person_with_pouting_face:"1f64e",pray:"1f64f",rocket:"1f680",helicopter:"1f681",steam_locomotive:"1f682",railway_car:"1f683",bullettrain_side:"1f684",bullettrain_front:"1f685",train2:"1f686",metro:"1f687",light_rail:"1f688",station:"1f689",tram:"1f68a",train:"1f68b",bus:"1f68c",oncoming_bus:"1f68d",trolleybus:"1f68e",busstop:"1f68f",minibus:"1f690",ambulance:"1f691",fire_engine:"1f692",police_car:"1f693",oncoming_police_car:"1f694",taxi:"1f695",oncoming_taxi:"1f696",car:"1f697",red_car:"1f697",oncoming_automobile:"1f698",blue_car:"1f699",truck:"1f69a",articulated_lorry:"1f69b",tractor:"1f69c",monorail:"1f69d",mountain_railway:"1f69e",suspension_railway:"1f69f",mountain_cableway:"1f6a0",aerial_tramway:"1f6a1",ship:"1f6a2",rowboat:"1f6a3",speedboat:"1f6a4",traffic_light:"1f6a5",vertical_traffic_light:"1f6a6",construction:"1f6a7",rotating_light:"1f6a8",triangular_flag_on_post:"1f6a9",door:"1f6aa",no_entry_sign:"1f6ab",smoking:"1f6ac",no_smoking:"1f6ad",put_litter_in_its_place:"1f6ae",do_not_litter:"1f6af",potable_water:"1f6b0","non-potable_water":"1f6b1",bike:"1f6b2",no_bicycles:"1f6b3",bicyclist:"1f6b4",mountain_bicyclist:"1f6b5",walking:"1f6b6",no_pedestrians:"1f6b7",children_crossing:"1f6b8",mens:"1f6b9",womens:"1f6ba",restroom:"1f6bb",baby_symbol:"1f6bc",toilet:"1f6bd",wc:"1f6be",shower:"1f6bf",bath:"1f6c0",bathtub:"1f6c1",passport_control:"1f6c2",customs:"1f6c3",baggage_claim:"1f6c4",left_luggage:"1f6c5",hash:"0023-20e3",zero:"0030-20e3",one:"0031-20e3",two:"0032-20e3",three:"0033-20e3",four:"0034-20e3",five:"0035-20e3",six:"0036-20e3",seven:"0037-20e3",eight:"0038-20e3",nine:"0039-20e3",ae:"1f1e6-1f1ea",at:"1f1e6-1f1f9",au:"1f1e6-1f1fa",be:"1f1e7-1f1ea",br:"1f1e7-1f1f7",ca:"1f1e8-1f1e6",ch:"1f1e8-1f1ed",cn:"1f1e8-1f1f3",co:"1f1e8-1f1f4",de:"1f1e9-1f1ea",dk:"1f1e9-1f1f0",es:"1f1ea-1f1f8",fi:"1f1eb-1f1ee",fr:"1f1eb-1f1f7",gb:"1f1ec-1f1e7",uk:"1f1ec-1f1e7",hk:"1f1ed-1f1f0",ie:"1f1ee-1f1ea",il:"1f1ee-1f1f1","in":"1f1ee-1f1f3",it:"1f1ee-1f1f9",jp:"1f1ef-1f1f5",kr:"1f1f0-1f1f7",mo:"1f1f2-1f1f4",mx:"1f1f2-1f1fd",my:"1f1f2-1f1fe",nl:"1f1f3-1f1f1",no:"1f1f3-1f1f4",nz:"1f1f3-1f1ff",ph:"1f1f5-1f1ed",pl:"1f1f5-1f1f1",pr:"1f1f5-1f1f7",pt:"1f1f5-1f1f9",ru:"1f1f7-1f1fa",se:"1f1f8-1f1ea",sg:"1f1f8-1f1ec",tr:"1f1f9-1f1f7",us:"1f1fa-1f1f8",vn:"1f1fb-1f1f3",za:"1f1ff-1f1e6","man-man-boy":"1f468-1f468-1f466","man-man-boy-boy":"1f468-1f468-1f466-1f466","man-man-girl":"1f468-1f468-1f467","man-man-girl-boy":"1f468-1f468-1f467-1f466","man-man-girl-girl":"1f468-1f468-1f467-1f467","man-woman-boy":"1f468-1f469-1f466","man-woman-boy-boy":"1f468-1f469-1f466-1f466","man-woman-girl":"1f468-1f469-1f467","man-woman-girl-girl":"1f468-1f469-1f467-1f467","man-heart-man":"1f468-2764-fe0f-1f468","man-kiss-man":"1f468-2764-fe0f-1f48b-1f468","woman-woman-boy":"1f469-1f469-1f466","woman-woman-boy-boy":"1f469-1f469-1f466-1f466","woman-woman-girl":"1f469-1f469-1f467","woman-woman-girl-boy":"1f469-1f469-1f467-1f466","woman-woman-girl-girl":"1f469-1f469-1f467-1f467","woman-heart-woman":"1f469-2764-fe0f-1f469","woman-kiss-woman":"1f469-2764-fe0f-1f48b-1f469"};return{emoji:a}}()),angular.module("vkEmojiPicker").directive("emojiPicker",["EmojiGroups","vkEmojiStorage","vkEmojiTransforms",function(a,b,c){var d=54,e="",f="templates/emoji-button.html";try{angular.module("ui.bootstrap.popover")}catch(g){try{angular.module("mgcrea.ngStrap.popover"),f="templates/emoji-button-strap.html"}catch(g){f="templates/emoji-button.html"}}return{restrict:"A",templateUrl:f,scope:{model:"=emojiPicker",placement:"@",title:"@",onChangeFunc:"="},link:function(f,g,h){function i(a,b){return a=[" :",a,":"].join(""),"unicode"==b?c.emojify(a):a}function j(){f.onChangeFunc&&"function"==typeof f.onChangeFunc&&setTimeout(f.onChangeFunc)}var k=parseInt(h.recentLimit,10)||d,l=h.outputFormat||e;f.groups=a.groups,f.selectedGroup=a.groups[0],f.selectedGroup.emoji=b.getFirst(k),f.append=function(a){null==f.model&&(f.model=""),f.model+=i(a,l),f.model=f.model.trim(),b.store(a),j()},f.remove=function(){if(angular.isDefined(f.model)){var a=f.model.split(" ");a.pop(),f.model=a.join(" ").trim(),j()}},f.toClassName=function(a){return a.replace(/_/g,"-")},f.changeGroup=function(a){f.selectedGroup=a,console.log(a),"recent"===f.selectedGroup.name&&(f.selectedGroup.emoji=b.getFirst(k))},f.$on("$destroy",function(){g.remove()})}}}]),angular.module("vkEmojiPicker").directive("emojiPopover",["$emojiPopover",function(a){return{restrict:"A",link:function(b,c,d){var e={scope:b};e.title=d.title||"",e.placement=d.placement||"top",e.template=d.template||"templates/emoji-popover.html";var f=a(c,e);b.$on("$destroy",function(){f&&f.destroy(),e=null,f=null})}}}]),angular.module("vkEmojiPicker").directive("emojiRemovable",function(){return{restrict:"A",scope:{model:"=emojiRemovable"},link:function(a,b){var c=function(a,b){var c=[],d=0;return angular.forEach(b,function(b){for(var e=angular.element(b),f=new RegExp("^:?"+e.attr("alt")+":?$"),g=d;g<a.length;g++)if(f.test(a[g])){c.push(g),d=g+1;break}}),c},d=function(){if(null!=a.model){var d=a.model.split(/\s+/),e=b[0].querySelectorAll("i.emoji-picker"),f=c(d,e);angular.forEach(e,function(b,c){var e=angular.element(b);e.off(),e.on("click",function(){d.splice(f[c],1),a.model=d.join(" "),e.off(),e.remove(),a.$apply()})})}};a.$watch(function(){return b[0].querySelectorAll("i.emoji-picker").length},d),a.$on("$destroy",function(){b.off(),b.remove()})}}}),angular.module("vkEmojiPicker").filter("capitalize",function(){return function(a){function b(a){return a.substring(0,1).toUpperCase()+a.substring(1)}if(-1!==a.indexOf(" ")){var c,d;for(a=a.toLowerCase(),c=a.split(" "),console.log(c),d=0;d<c.length;d++)c[d]=b(c[d]);return c.toString().replace(/,/g," ")}return a=a.toLowerCase(),b(a)}}),angular.module("vkEmojiPicker").filter("emojify",["vkEmojiTransforms",function(a){return a.emojify}]),angular.module("vkEmojiPicker").filter("hexify",["vkEmojiTransforms",function(a){return a.hexify}]),angular.module("vkEmojiPicker").filter("imagify",["vkEmojiTransforms",function(a){return a.imagify}]),angular.module("vkEmojiPicker").filter("unicodify",["vkEmojiTransforms",function(a){return a.unicodify}]),angular.module("vkEmojiPicker").factory("vkEmojiLocalStorage",function(){var a={length:0},b={},c=function(a){var b=0;return angular.forEach(a,function(){b+=1}),b};return a.setItem=function(d,e){b[d]=e,a.length=c(b)},a.getItem=function(a){var c=b[a];return null==c?null:c},a.removeItem=function(d){var e=a.getItem(d);return delete b[d],a.length=c(b),e},a.clear=function(){b={}},a.key=function(){throw new Error("Realization required")},a}),angular.module("vkEmojiPicker").provider("$emojiPopover",function(){var a={title:"",placement:"top",template:"src/templates/emoji-popover.html"};this.$get=["$rootScope","$http","$sce","$templateCache","$compile",function(b,c,d,e,f){function g(g,h){var i,j,k,l,m={},n={},o=angular.extend({},a,h),p=m.$scope=o.scope&&o.scope.$new()||b.$new(),q=function(a){return n[a]?n[a]:(n[a]=c.get(a,{cache:e}),n[a].then(function(a){return a.data}))},r=function(a,b){var c=a[0],d=c.getBoundingClientRect(),e=b.prop("offsetWidth"),f=b.prop("offsetHeight"),g=s(o.placement,d,e,f);console.log("OFFSET"),console.log(g),b.css({top:g.top+"px",left:g.left+"px"})},s=function(a,b,c,d){var e;console.log("POSITION"),console.log(b),console.log(d);var f=document.body.getBoundingClientRect();switch(a){case"right":e={top:-240,left:b.right-c-50-.25*f.width};break;case"bottom":e={top:b.top-2*b.height,left:b.left};break;case"left":e={top:b.top-d/4,left:b.left-c};break;case"right-relative":e={top:12,left:24};break;case"left-relative":e={top:25,left:-215};break;case"top":default:e={top:b.top-d-3*b.height,left:b.left},console.log(e.top),console.log(e.left)}return e},t=function(a,b){a&&(a.$destroy(),a=null),b&&(b.remove(),b=null)};return o.title&&(p.title=d.trustAsHtml(o.title)),p.placement=o.placement,p.$hide=function(){m.hide()},p.showEmojiName=function(a){return a.replace(/_/g," ")},p.showCatName=function(a){return a.replace(/-/g," ")},p.emojiClicked=function(a){p.append(a),m.hide()},m.$isShown=!1,m.$promise=q(o.template),m.$promise.then(function(a){angular.isObject(a)&&(a=a.data),j=a,i=f(a),g.on("click",m.toggle)}),m.show=function(){m.$isShown||(l&&k&&t(l,k),l=m.$scope.$new(),k=i(l,function(a,b){}),g.after(k),m.$isShown=!0,p.$digest(),k.addClass(o.placement),r(g,k))},m.hide=function(){m.$isShown&&(t(l,k),m.$isShown=!1)},m.toggle=function(){m.$isShown?m.hide():m.show()},m.destroy=function(){g.off("click",m.toggle),t(l,k),p.$destroy()},m}return g}]}),angular.module("vkEmojiPicker").factory("vkEmojiStorage",["$window","vkEmojiLocalStorage",function(a,b){var c={},d=a.localStorage||b;return c.store=function(a){var b=d.getItem("emojiPicker");if(null==b)var c=[];else{var c=JSON.parse(b),e=c.indexOf(a);e>=0&&c.splice(e,1)}c.unshift(a),d.setItem("emojiPicker",JSON.stringify(c))},c.getFirst=function(a){var a=a||1,b=d.getItem("emojiPicker");if(null==b)return[];var c=JSON.parse(b);return c.slice(0,a)},c.clear=function(){d.clear()},c}]),angular.module("vkEmojiPicker").factory("vkEmojiTransforms",["EmojiHex","EmojiGroups",function(EmojiHex,EmojiGroups){function getUnicodes(){var a={},b=[];return angular.forEach(EmojiHex.emoji,function(c,d){a[c]=d,b.push(c)}),b.reverse()}function hexify(a){if(null==a)return"";var b=/\:([a-z0-9_+-]+)(?:\[((?:[^\]]|\][^:])*\]?)\])?\:/g,c=a.match(b);if(null===c)return a;for(var d=0;d<c.length;d++){var e=c[d],f=e.replace(/\:/g,"");EmojiHex.emoji.hasOwnProperty(f)&&(a=a.replace(e,EmojiHex.emoji[f]))}return a}function imagify(a){return null==a?"":a.replace(regex,function(a,b){var c=b.replace(/_/g,"-"),d=['<i class="emoji-picker emoji-',c,'" alt="',b,'" title=":',b,':"></i>'];return d.join("")})}function unicodify(text){if(null==text)return"";var matches=text.match(regexHex);if(null===matches)return text;for(var i=0,len=matches.length;len>i;i++){var hexString=matches[i];if(hexString.indexOf("-")>-1)var codePoints=hexString.split("-"),unicode=eval("String.fromCodePoint(0x"+codePoints.join(", 0x")+")");else var codePoint=["0x",hexString].join(""),unicode=String.fromCodePoint(codePoint);text=text.replace(hexString,unicode)}return text}function emojify(a){return unicodify(hexify(a))}var transforms={hexify:hexify,imagify:imagify,unicodify:unicodify,emojify:emojify},regex=new RegExp(":("+EmojiGroups.all.join("|")+"):","g"),regexHex=new RegExp("("+getUnicodes().join("|")+")","g");return transforms}]),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a,b){var c=null,d=angular.noop;return{restrict:"CA",link:function(b,e,f){b.$watch("$location.path",function(){d()}),e.parent().bind("click",function(){d()}),e.bind("click",function(b){var f=e===c;b.preventDefault(),b.stopPropagation(),c&&d(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),c=e,d=function(b){b&&(b.preventDefault(),b.stopPropagation()),a.unbind("click",d),e.parent().removeClass("open"),d=angular.noop,c=null},a.bind("click",d))})}}}]),angular.module("symphonyApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/advfeatures.html",'<div class="" ng-controller="MainCtrl"> <div class="row"> <div class="col-sm-12"><h3>Advanced Features </h3></div> </div> <!--  <button class="btn btn-success" ng-click="deleteUser()">Delete User</button>\n    <button class="btn btn-danger" ng-click="deleteDomain()">Delete Agency</button>\n    <button class="btn btn-warning" ng-click="suspendDomain()">Suspend Agency</button>\n    <button class="btn btn-primary" ng-click="enableDomain()">Enable Agency</button>--> <!-- <form name="login" action="http://vtiger.keithgallant.com/CustomerAuthenticate.php" method="post">\n        <input type="hidden" name="__cpftk" value="sid:3298a2a35e9cbfaf2dee107ba7a6cad4ddfd0930,1497451479">\n				<div class="body bg-gray">\n                	<div class="form-group">\n												<input type="text" id="username" name="username" class="form-control" placeholder="Email ID :">\n					</div>\n					<div class="form-group">\n						<input type="password" id="pw" name="pw" class="form-control" placeholder="Password:">\n					</div>\n				</div>\n				<div class="footer">\n					<button type="submit" class="btn bg-light-blue btn-block" onclick="return validateLoginDetails();" style="font-size: 16px; font=weight:500;">Login</button>  \n                    <p><a href="supportpage.php?param=forgot_password" style="font-size:16px;">Forgot Password?</a></p>\n                    <a href="#" class="text-center" style="font-size:16px;">Email ID and Password are case Insensitive.</a>\n            	</div>\n			</form>--> <div class="content-container" id="advfeatures"> <div class="row"> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <!--  showConferenceCalls()  --> <div class="thumbnail" ng-click="goToOption(\'conferencecall\')" uib-tooltip="{{tips.adv.conference}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Conference Calls </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" uib-tooltip="{{tips.adv.screenshare}}" ng-click="goToOption(\'/screenshare\');" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-clone fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Screen Share </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/filesharing\');" uib-tooltip="{{tips.adv.fileshare}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-files-o fa-stack-1x fa-inverse"></i> </span> <div class="caption"> File Sharing </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/fax\');" uib-tooltip="{{tips.adv.fax}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-fax fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Fax </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/videoconference\');" uib-tooltip="{{tips.adv.videocalls}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Video Calling </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/automatedmessaging\');" uib-tooltip="{{tips.adv.automated}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Automated Marketing </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/cloudstorage\');" uib-tooltip="{{tips.adv.cloudstorage}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-cloud fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Cloud Storage </div> </div> </div> <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/callrecording\');" uib-tooltip="{{tips.adv.callrecording}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-microphone fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Call Recording </div> </div> </div> <div ng-if="user.accessgroup == \'admin\' || user.accessgroup == \'superuser\' || (emulationStatus && emulationStatus[\'callcenter\'].manager === \'true\')" class="col-lg-3 col-md-6 col-sm-6 col-xs-12"> <div class="thumbnail" ng-click="goToOption(\'/callcenter\');" uib-tooltip="{{tips.adv.callcenter}}" tooltip-placement="top"> <span class="fa-stack fa-5x cls-color-gris2"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-connectdevelop fa-stack-1x fa-inverse"></i> </span> <div class="caption"> Call Center </div> </div> </div> </div> </div> </div>'),a.put("views/autodialing/automaticdialing.html",'<div style="width: 100%" ng-controller="AutoDialingCtrl"> <div ng-show="!showDelivering" class="cls-cont-wizard-RB"> <wizard> <input type="hidden" ng-model="broadcast.robocall_uuid" ng-value="roboCallUUID"> <button ng-click="returnToLanding()" class="btn btn-default pull-right"><i class="fa fa-mail-reply" style="margin-right: 10px"></i>Return to Landing Page</button> <wz-step wz-title="step 1: Setup"> <h3>Setup: Specify your campaign type</h3> <p></p> <div ng-include="\'views/autodialing/step1.html\'"></div> <!--<div ng-include="\'views/autodialing/step2.html\'"></div>--> <div class="center-text" style="margin-top: 20px"> <span ng-if="step1Disabled(broadcast)">Please complete all fields above before clicking Next.</span><br> <button class="btn btn-primary cls-btn-wzrd" style="margin-top: 5px !important" ng-disabled="step1Disabled(broadcast)" ng-click="saveStep1(broadcast)" wz-next> Next <i class="fa fa-angle-double-right"></i></button> </div> </wz-step> <wz-step wz-title="step 2: Recipients" canenter="canEnter" canexit="step2Validation"> <h4>Campaign: {{broadcast.robocall_name}}</h4> <h3>Recipients: Who should receive this message?</h3> <div ng-include="\'views/autodialing/step2.html\'"></div> <div class="center-text"> <button class="btn btn-primary cls-btn-wzrd" wz-previous><i class="fa fa-angle-double-left"></i> Back </button> <button class="btn btn-primary cls-btn-wzrd" ng-disabled="disableStep2" wz-next> Next <i class="fa fa-angle-double-right"></i></button> </div> </wz-step> <wz-step wz-title="step 3: Build"> <h4>Campaign: {{broadcast.robocall_name}}</h4> <h3>Build: Schedule and add content to your campaign</h3> <p></p> <div ng-include="\'views/autodialing/step3.html\'"></div> <center> <button class="btn btn-primary cls-btn-wzrd" type="submit" wz-previous><i class="fa fa-angle-double-left"></i> Back </button> <button class="btn btn-success cls-btn-wzrd" ng-disabled="step3Validation(broadcast)" ng-click="saveStep3(broadcast);" wz-next> Next <i class="fa fa-angle-double-right"></i></button> </center> </wz-step> <wz-step wz-title="step 4: Review & Send"> <h3>Review & Send</h3> <p></p> <div ng-include="\'views/autodialing/step5.html\'"></div> <center> <button class="btn btn-primary cls-btn-wzrd" type="submit" wz-previous><i class="fa fa-angle-double-left"></i> Back</button> <button class="btn btn-primary cls-btn-wzrd" ng-disabled="checkCampaignStatus(broadcast)" ng-click="startCampaign(broadcast)" wz-finish> Start Campaign <i class="fa fa-check"></i></button> </center> </wz-step> </wizard> </div> <div ng-show="showDelivering" class="delivering-queued" style=""> <div class="alert alert-info" role="alert" style="margin-top: 10px; display: block"> <h1>SUCCESS</h1> <h4>Your campaign has been queued and will be delivered as scheduled.</h4> <button ng-click="goToLanding()" class="btn btn-default btn-lg">Return to Landing Page</button> </div> </div> </div>'),
a.put("views/autodialing/choosetemplate.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Use a Different Template?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Select a new template to use for your email:</div> <div class="row"> <div class="col-sm-4" ng-repeat="template in availEmailTemplates"> <img src=""><br> {{template.title}} <div class="button-group"> <button class="btn btn-primary btn-xs" ng-click="">Preview</button> <button class="btn btn-success btn-xs" ng-click="">Use This Template</button> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> </div> </div>'),a.put("views/autodialing/confirmcloseeditor.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Please confirm you wish to close the editor. If you have unsaved changes, these will be lost. If you are unsure then please click Save in the editor first.<br></div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Close</button> </div> </div>'),a.put("views/autodialing/displaycontacts.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Showing Contacts for Campaign</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <!-- <td><input type="checkbox"/> </td>--> <td>First Name</td> <td>Last Name</td> <td>Phone</td> <td>Email</td> <td>Notes</td> </tr> </thead> <tbody> <tr ng-repeat="contact in broadcast.contacts"> <td>{{contact.firstname}}</td> <td>{{contact.lastname}}</td> <td>{{contact.contact_phone1 | tel}}</td> <td>{{contact.email_address}}</td> <td>{{contact.notes}}</td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> </div> </div>'),a.put("views/autodialing/emaileditor.html",'<div ng-controller="EmailEditorCtrl"> <div> <div class="modal-body" id="modal-body" style="height: {{editorContainerHeight}}px"> <div id="bee-plugin-container"></div> </div> <div class="modal-footer cls-incomingcall-buttons"> <div id="integrator-bottom-bar"> <div class="col-sm-3"> <!-- You can change the download function to get the JSON and use this input to load it --> <input id="choose-template" placeholder="Type in New Template" type="file"> <button class="btn btn-primary" ng-disabled="1==1" ng-click="showModalWithData(\'/autodialing/choosetemplate.html\', data)">Select Different Template</button> <!-- You need to provide a send function to use this input field --> <!--Send test e-mail to: <input id="integrator-test-emails" type="text"/>--> </div> <div class="col-sm-9"> <button class="btn btn-danger btn-md" ng-click="closeEditorModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <!--<button class="btn btn-default btn-md" ng-click=""><i class="fa fa-envelope" style="margin-right: 10px;"></i>Send Test Email</button>\n                    <button class="btn btn-default btn-md" ng-click=""><i class="fa fa-copy" style="margin-right: 10px;"></i>Save as Template</button>\n                    <button class="btn btn-success btn-md" ng-click="saveAndCloseEditor()"><i class="fa fa-floppy-o" style="margin-right: 10px;"></i>Save & Close</button>--> </div> </div> </div> </div> </div>'),a.put("views/autodialing/landingpage.html",'<div id="auto-marketing-landing-container" ng-controller="AutoDialingCtrl"> <div class="row top-row"> <div class="col-sm-6"> <h3>Automated Messaging <span ng-if="showTable && selectEmulateUser!==null && selectEmulateUser !== user.id"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> </div> <div class="col-sm-6 campaign-btn-container" ng-show="showTable" style="margin-top: 15px; text-align: right"> <button ng-show="!showAllCampaigns" ng-click="returnToLanding()" class="btn btn-default" style="margin-right: 10px"> <i class="fa fa-mail-reply" style="margin-right: 10px"></i> Return to Landing Page </button> <button ng-click="goToNewCampaign()" class="btn btn-success"> <i class="fa fa-magic" style="margin-right: 10px"></i> Create a new campaign </button> </div> </div> <div ng-if="!showTable" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i><br> Loading... </div> <!--\n    <uib-tabset active="activeTab" justified="false" ng-show="showTable">\n        <uib-tab index="0" heading="Campaigns">--> <div ng-show="showAllCampaigns || showArchivedCampaigns" id="campaign-display"> <h4 ng-if="showArchivedCampaigns">Archived Campaigns</h4> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading"> <div class="row"> <div class="col-lg-2"> <strong>Campaigns</strong> </div> <div class="col-lg-2"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-calendar"></i></span> <select class="selectpicker form-control" ng-model="prevCampMonth"> <option ng-value="0" style="font-weight: bold" selected> - Month - </option> <option ng-repeat="month in months" ng-value="month.number">{{month.name}}</option> </select> </div> </div> <div class="col-lg-2"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-calendar"></i></span> <select class="selectpicker form-control" ng-model="prevCampYear"> <option ng-value="0" style="font-weight: bold" selected> - Year - </option> <option ng-repeat="year in years" ng-value="year">{{year}}</option> </select> </div> </div> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="Filter Campaigns"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="landing.amCampaignSearch" placeholder="Filter Campaigns"> </div> </div> </div> </div> <div class="scroll-container-head" ng-show="showTable"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 28%">Campaign Name</th> <th style="width: 32%">Date</th> <th style="width: 16%">Details</th> <th style="width: 14%">Recipients</th> <th style="width: 10%">Status</th> </tr> </thead> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': automarketingTableHeight && automarketingTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-if="amCampaigns.length===0"><td colspan="5">There are no campaigns to display.</td></tr> <!--<tbody ng-init="getCampaigns(null)"> --> <!-- <span ng-bind="formatTime(campaign.start_date) |  date:\'MM/dd/yyyy h:m\'"></span>  --> <tr ng-click="getCampaignDetail(campaign.robocall_uuid)" ng-repeat="campaign in filterData = (amCampaigns | orderBy : predicate :reverse | filter:searchCampaigns | filter:filterByMonth) | limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 28%">{{ campaign.robocall_name.length > 35 ? campaign.robocall_name.substring(0, 17) + \' ... \' + campaign.robocall_name.substring(campaign.robocall_name.length-17) : campaign.robocall_name }}</td> <td style="width: 32%"> <div ng-if="campaign.schedules.length>0"> <strong>Delivery:</strong><br> <span ng-if="campaign.schedule_type===\'One\'">{{campaign.schedules[0].start_at | toLocalTime | amDateFormat:\'MMM D, YYYY h:mm a\'}}</span> <span ng-if="campaign.schedule_type===\'Series\'"><span ng-repeat="schedule in campaign.schedules">{{schedule.title}}<br>{{schedule.start_at | toLocalTime | amDateFormat:\'MMM D, YYYY h:mm a\'}} <br ng-if="$index !== campaign.schedules.length-1"></span></span> </div> <div ng-if="campaign.schedules.length==0"> <strong>Last Updated:</strong><br> <span>{{campaign.updated_at | toLocalTime | amDateFormat:\'MMM D, YYYY h:mm a\'}}</span> </div> </td> <td style="width: 16%">{{campaign.robocall_type}}<br> {{campaign.message_type}}<br> {{campaign.schedule_type===\'One\' ? \'One-Time\' : \'Series\'}}</td> <td style="width: 14%">{{campaign.contacts.length}} Recipient{{campaign.contacts.length > 1 ? \'s\' : \'\'}}</td> <td style="width: 10%">{{showCampaignStatus(campaign.status)}}</td> </tr> </tbody> </table> </div> </div> <button class="btn btn-default pull-right" ng-if="!showArchivedCampaigns" ng-click="loadArchivedCampaigns()">View Archived Campaigns</button> <button class="btn btn-default pull-right" ng-if="showArchivedCampaigns" ng-click="getCampaigns()">View Active Campaigns</button> <div ng-show="showTable && filterData.length > perPage" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> </div> </div> <!--\n        </uib-tab>\n        <uib-tab index="1" heading="{{currentCampaign.robocall_name}}">--> <div ng-show="!showAllCampaigns && !showArchivedCampaigns && activeCampaign"> <div class="container-fluid"> <div class="col-lg-12"> <div class="jumbotron"> <div class="btn-group" ng-if="1==2"> <button class="btn btn-default btn-sm" ng-click="callResult()"><i class="fa fa-caret-right" ng-show="opcCallResult" style="margin-right: 10px"></i> Call Result</button> <button class="btn btn-default btn-sm" ng-click="surveyResult()"><i class="fa fa-caret-right" ng-show="opcSurveyResult" style="margin-right: 10px"></i> Survey Result</button> </div> <div class="btn-group" ng-if="currentCampaign.status===\'draft\'"> <button class="btn btn-default btn-sm" ng-click="goToEditCampaign(currentCampaign.robocall_uuid)"><i class="fa fa-edit" style="margin-right: 10px"></i> Edit Campaign</button> </div> <div class="btn-group pull-right right-text" ng-if="currentCampaign.status!==\'draft\' && currentCampaign.status!==\'sent\' && currentCampaign.status!==\'failed\'"> <h3 ng-if="currentCampaign.status===\'paused\'">PAUSED</h3> <h3 ng-if="currentCampaign.status===\'stopped\'">STOPPED</h3> <h3 ng-if="currentCampaign.status===\'queue\'">QUEUED</h3> <button class="btn btn-alert btn-sm" ng-if="!currentCampaign.archived_at && (currentCampaign.status===\'queue\' || currentCampaign.status===\'sending\')" ng-click="changeCampaignStatus(currentCampaign, \'paused\')"> Pause Campaign</button> <button class="btn btn-primary btn-sm" ng-if="!currentCampaign.archived_at && currentCampaign.status.substring(0,6)===\'paused\'" ng-click="changeCampaignStatus(currentCampaign, \'resumed\')"> Resume Campaign</button> <button class="btn btn-danger btn-sm" ng-if="!currentCampaign.archived_at && currentCampaign.status.substring(0,6)===\'paused\' || currentCampaign.status===\'sending\' || currentCampaign.status===\'queue\'" ng-click="changeCampaignStatus(currentCampaign, \'stopped\')"> Stop Campaign</button> </div> <div class="row" style="margin-top: 10px"> <div class="col-lg-6 col-md-12"> <div class="panel cls-panels-header cls-robocall-detail"> <div class="panel-heading"><i class="fa fa-bullhorn" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">{{currentCampaign.robocall_name}}</strong></div> <ul class="list-group"> <li ng-if="currentCampaign.archived_at" class="list-group-item"><span> Archived At </span> <label>{{currentCampaign.archived_at | toLocalTime | amDateFormat: \'ddd, MMM D, h:mm a\' }}</label></li> <li class="list-group-item"><span> Delivery Method </span> <label>{{currentCampaign.message_type}}</label></li> <li class="list-group-item"><span> Broadcast Type </span> <label>{{currentCampaign.robocall_type}}</label></li> <li class="list-group-item"><span> Total Contacts </span> <label>{{currentCampaign.contacts.length}}</label></li> <li class="list-group-item"><span> Campaign Start </span> <label ng-if="currentCampaign.schedules[0]">{{currentCampaign.schedules[0].start_at | toLocalTime | amDateFormat: \'ddd, MMM D, h:mm a\'}}</label><label ng-if="!currentCampaign.schedules[0]">{{currentCampaign.created_at | toLocalTime | amDateFormat: \'ddd, MMM D, h:mm a\'}}</label></li> <li class="list-group-item"><span> Campaign Status </span> <label>{{showCampaignStatus(currentCampaign.status)}}</label></li> <li class="list-group-item"><span> Campaign Type </span> <label>{{currentCampaign.schedule_type === \'One\' ? \'One Time Message\' : \'Series of Messages\'}}</label></li> </ul> </div> </div> <div ng-if="currentCampaign.status===\'sent\'" class="col-lg-6 col-md-12"> <div class="thumbnail"> <center> <div google-chart chart="myChartObject" style="border:1px inset black;padding:0;width:400px"></div> </center> </div> </div> <div ng-if="currentCampaign.status===\'draft\'" class="col-lg-6 col-md-12"> <div class="thumbnail no-stats-box"> <center> <i class="fa fa-pie-chart mdgreyfont opacity50"></i> </center> </div> </div> </div> <!-- Table --> <table ng-if="currentCampaign===\'sent\'" class="table table-bordered table-hover table-striped cls-tab-call-history" ng-show="currentCampaign.contacts.length > 0"> <thead> <tr style="background-color: transparent !important"> <th colspan="6"> <div class="btn-group btn-group-justified" role="group" aria-label="..."> <div class="btn-group" role="group"> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuAct===\'1\'}" ng-click="buttonSelected(\'Total Contacts\')"> Total Contacts <br> <strong>{{currentCampaign.contacts.length}}</strong> </button> </div> <div class="btn-group" role="group" ng-if="item.key !==\'Delivered\'" ng-repeat="item in currentCampaign.schedules[0].results"> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuAct===item.key}" ng-click="buttonSelected(item.key)"> {{item.key}} <br> <strong>{{item.value}}</strong> </button> </div> </div> </th> </tr> </thead> <thead> <tr style="background-color: transparent !important"> <th colspan="6" style="padding: 0px !important"> <div class="input-group pull-right" style="margin: 0px 6px 0px 0px !important; padding: 0px !important"> <span class="input-group-addon" title="Filter Contacts"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="txtCampCnts" placeholder="Filter Contacts"> </div> </th> </tr> </thead> <thead> <tr> <th><a href ng-click="sortBy(\'contact.firstname\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyname}}">Name <i class="fa fa-{{!reverse2 && predicate2===\'contact.firstname\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th ng-if="currentCampaign.message_type!==\'Email\'"><a href ng-click="sortBy(\'contact.phone_number1\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyphonenumber}}">Phone Number <i class="fa fa-{{!reverse2 && predicate2===\'contact.phone_number1\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th ng-if="currentCampaign.message_type===\'Email\'"><a href ng-click="sortBy(\'contact.email_address\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyemailaddress}}">Email Address <i class="fa fa-{{!reverse2 && predicate2===\'contact.email_address\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'status\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbydeliverystatus}}">Delivery Status <i class="fa fa-{{!reverse2 && predicate2===\'status\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'reply\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyinteraction}}">Response <i class="fa fa-{{!reverse2 && predicate2===\'reply\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> </tr> </thead> <tbody> <tr ng-repeat="delivery in filterData2 = (currentCampaign.schedules[0].deliveries | orderBy : predicate2 :reverse2 | filter:filterDeliveries) | limitTo:perPage2:perPage2*(currentPage2-1)"> <!--<tr ng-repeat="contact in filtered = (campContactsRst | filter:txtCampCnts | orderBy : predicate :reverse) | startFrom:(currentPageCampCnts-1)*entryLimitCampCnts | limitTo:entryLimitCampCnts">--> <td>{{delivery.contact.firstname}} {{delivery.contact.lastname}}</td> <td ng-if="currentCampaign.message_type!==\'Email\'">{{delivery.contact.contact_phone1 | tel}}</td> <td ng-if="currentCampaign.message_type===\'Email\'">{{delivery.contact.email_address}}</td> <td>{{delivery.status}}</td> <td>{{delivery.reply}}</td> </tr> <tr ng-if="filterData.length===0"><td colspan="4">There are no {{btnMnuAct}} Contacts to Display</td></tr> </tbody> </table> <div style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData2.length" ng-model="currentPage2" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage2"></ul> </div> <div class="cls-notify" ng-show="currentCampaign.contacts.length === 0"> <i class="fa fa-bullhorn fa-3x cls-color-yellow-tkg" id="iconNotify"></i> <span id="productName"> Symphony</span> <spam>No contacts have been registered for this campaign</spam> <div> <center style="margin-top: 10px"> <button ng-click="addContactsToCampaign(currentCampaign.robocall_uuid)" class="btn btn-primary"><i class="fa fa-user-plus" style="margin-right: 10px"></i> Add Contacts</button> </center> </div> </div> <hr> <button class="btn btn-default" style="margin-right: 10px" ng-click="duplicateCampaign(currentCampaign.robocall_uuid)"><i class="fa fa-copy" style="margin-right: 10px"></i> Duplicate Campaign</button> <button class="btn btn-danger" style="margin-right: 10px" ng-if="currentCampaign.status === \'draft\' || user.accessgroup===\'superadmin\'" ng-click="deleteRobocallCampaign()"><i class="fa fa-times" style="margin-right: 10px"></i> Remove Campaign</button> <button class="btn btn-danger" style="margin-right: 10px" ng-if="currentCampaign.status === \'sent\' || currentCampaign.status === \'stopped\' || currentCampaign.status === \'failed\'" ng-click="archiveCampaign()"><i class="fa fa-calendar" style="margin-right: 10px"></i> Archive Campaign</button> </div> <div class="cleared"></div> </div> </div> </div> </div> <!--      </uib-tab>\n    </uib-tabset>--> '),a.put("views/autodialing/recordaudio.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Removal of Automated Marketing Schedule?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div ng-audio-recorder id="mainAudio" audio-model="recorded" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div ng-controller="AutoDialingCtrl"> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Start\'}} Recording </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="recorder.status.isRecording || !recorder.audioModel" ng-click="saveToServer(recordedBlob, recorder.blob)"> <i class="glyphicon glyphicon-download"></i> Save to Server </button> <!--<a class="btn btn-success" \n                               href="" download="recording.mp3" \n                               ng-disabled="recorder.status.isRecording || !recorder.audioModel" \n                               id="btnDownload"\n                               >\n                                <i class="glyphicon glyphicon-download"></i> Download\n                            </a>--> </div> <div class="clearfix"></div> </div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="removeAutomatedSchedule(vm.content.data)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Delete</button> </div> </div>'),a.put("views/autodialing/savetemplate.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Save Template?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Save Template to use in a future email:</div> <div class="row"> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-user"></i></span> <input class="form-control" type="text" placeholder="Title / Description" ng-model="vm.content.data.title"> </div> </div> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-search"></i></span> <input class="form-control" type="text" placeholder="Keywords (Comma Separated)" ng-model="vm.content.data.keywords"> </div> </div> <div class="col-sm-12"> <p>Template Availability</p> <md-radio-group ng-model="vm.content.data.public" class="md-primary"> <md-radio-button value="true"><strong>Public:</strong> Available for anyone in your company to use. </md-radio-button> <md-radio-button value="false"><strong>Private:</strong> Only you can see this template. </md-radio-button> <md-radio-button value="kotter"><strong>KOTTER:</strong> Available to all Kotter customers (WILL ONLY SHOWN IF USER IS KOTTER STAFF). </md-radio-button> </md-radio-group> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="saveAsTemplate(vm.content.data)"><i class="fa fa-floppy-o" style="margin-right: 10px"></i>Save Template</button> </div> </div>'),a.put("views/autodialing/sendtestemail.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Send Test Email?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Enter up to 6 Recipients to receive your test:</div> <div class="row"> <div class="col-sm-6" ng-repeat="n in [] | range:6"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-user"></i></span> <input class="form-control" type="text" placeholder="Recipient" ng-model="vm.content.data.recipients[$index]"> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="sendTestEmail(vm.content.data.html, vm.content.data.recipients)"><i class="fa fa-envelope-o" style="margin-right: 10px"></i>Send Test(s)</button> </div> </div>'),a.put("views/autodialing/step1.html",'<div class="row"> <div class="col-lg-12"> <div class="jumbotron" style="margin: 0px"> <form name="frmRobocall"> <div class="row"> <div class="col-lg-6"> <div class="panel" style="min-height: 180px"> <div class="panel-heading cls-panels-header"><i class="fa fa-check-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Campaign Name</strong></div> <div class="panel-body"> <md-input-container style="width: 100% !important"> <label>Campaign name</label> <input name="nameRC" ng-model="broadcast.robocall_name" required> <div ng-messages="frmRobocall.nameRC.$error"> <div ng-message="required">The name is required!</div> </div> </md-input-container> </div> </div> </div> <div class="col-lg-6"> <div class="panel" style="min-height: 180px"> <div class="panel-heading cls-panels-header"><i class="fa fa-check-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Delivery Method</strong></div> <div class="panel-body"> <md-radio-group ng-model="broadcast.message_type" class="md-primary"> <md-radio-button value="Voice"><i class="fa fa-phone" style="margin-right: 10px"></i>Voice </md-radio-button> <md-radio-button value="Text"><i class="fa fa-paper-plane" style="margin-right: 10px"></i> Text </md-radio-button> <md-radio-button value="Email"><i class="fa fa-envelope-o" style="margin-right: 10px"></i> Email </md-radio-button> </md-radio-group> </div> </div> </div> <div class="col-lg-6"> <div class="panel" style="min-height: 180px"> <div class="panel-heading cls-panels-header"><i class="fa fa-check-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Broadcast Type</strong></div> <div class="panel-body"> <md-radio-group ng-model="broadcast.robocall_type" class="md-primary"> <md-radio-button value="Announcement"><i class="fa fa-bullhorn" style="margin-right: 10px"></i>Announcement </md-radio-button> <md-radio-button value="Survey" ng-disabled="1==1"><i class="fa fa-edit" style="margin-right: 10px"></i> Survey (Coming soon) </md-radio-button> </md-radio-group> </div> </div> </div> <div class="col-lg-6"> <div class="panel" style="min-height: 180px"> <div class="panel-heading cls-panels-header"><i class="fa fa-check-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Campaign Type</strong></div> <ul class="list-group"> <li class="list-group-item"> <md-radio-group ng-model="broadcast.schedule_type" class="md-primary"> <md-radio-button value="One">One-Time Message</md-radio-button> <md-radio-button value="Series">Series of Messages</md-radio-button> </md-radio-group> </li></ul> </div> </div> </div> </form> </div> </div> <div class="col-lg-3" ng-if="1==2"> <div class="panel panel-warning"> <div class="panel-heading"><i class="fa fa-question-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Useful tips or Help</strong></div> <div class="panel-body"> Content... </div> </div> </div> </div>'),a.put("views/autodialing/step2.html",'<div class="row"> <div id="top" class="col-lg-12"> <!-- //////////********** TAB 0 CONTACT LIST  **********////////// --> <uib-tabset active="contact.activeTab" id="automarketing-contacts" justified="false"> <uib-tab index="0" heading="Recipient List"> <div ng-if="displayLineErrors.length>0" class="contact-import alert-warning"> <button type="button" class="close" ng-click="closeMessage()"> <span aria-hidden="true"></span> <span class="sr-only">Close</span> </button> <span ng-bind-html="displayLineErrors"></span> </div> <div class="jumbotron"> <div class="panel panel-default"> <div class="panel-heading"> <div class="row"> <div class="col-lg-6"> Use the Import Files tab and Add Individually tab to add recipients to this list. </div> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="Filter Contacts"> <i class="fa fa-filter"></i> </span> <input class="form-control" type="text" ng-model="contacts.amContactSearch" placeholder="Filter Recipients"> </div> </div> </div> </div> <!-- Table --> <table class="table table-bordered table-hover table-striped am-contact-header cls-tab-call-history" ng-init="contacts.predicate = \'lastname\'"> <thead> <tr> <!-- <td><input type="checkbox"/> </td>--> <th class="am-contact-firstname"> <a href ng-click="contactSortBy(\'firstname\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyfirstname}}" class="tableheader"> First Name <i class="fa fa-{{!contacts.reverse && contacts.predicate===\'firstname\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th class="am-contact-lastname"> <a href ng-click="contactSortBy(\'lastname\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbylastname}}" class="tableheader"> Last Name <i class="fa fa-{{!contacts.reverse && contacts.predicate===\'lastname\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th class="am-contact-phone"> <a href ng-click="contactSortBy(\'contact_phone1\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyphonenumber}}" class="tableheader"> Phone <i class="fa fa-{{!contacts.reverse && contacts.predicate===\'contact_phone1\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th> <a href ng-click="contactSortBy(\'email_address\')" tooltip-placement="top-left" uib-tooltip="{{tips.automated.sortbyemailaddress}}" class="tableheader"> Email <i class="fa fa-{{!contacts.reverse && contacts.predicate===\'email_address\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <!--<th class="am-contact-notes">\n                                        Notes\n                                    </th>--> <th class="am-contact-buttons"> <br> </th> </tr> </thead> <tbody> <tr ng-if="!broadcast.contacts || broadcast.contacts.length === 0"> <td colspan="6"> You have not imported any recipients yet. </td> </tr> <tr ng-repeat="contact in filterData = (broadcast.contacts | orderBy : contacts.predicate :contacts.reverse | filter:searchAmContacts) | limitTo:perPage:perPage*(currentPage-1)"> <td colspan="6" style="margin: 0; background: none; padding: 0"> <table class="table table-bordered am-contact masterdata"> <tr ng-if="showEdit!==contact.robocall_contact_uuid"> <td class="am-contact-firstname">{{contact.firstname}}</td> <td class="am-contact-lastname">{{contact.lastname}}</td> <td class="am-contact-phone">{{contact.contact_phone1 | tel}}</td> <td>{{contact.email_address}}</td> <!--<td class="am-contact-notes">{{contact.notes}}</td>--> <td class="am-contact-buttons"> <button class="btn btn-primary btn-xs editbtn" ng-click="editContact(contact.robocall_contact_uuid);" tooltip-placement="top" uib-tooltip="{{tips.automated.editcontact}}"> <i class="fa fa-edit"></i> </button> <button class="btn btn-danger btn-xs" ng-click="removeCampaignContact(contact.robocall_contact_uuid)" tooltip-placement="top" uib-tooltip="{{tips.automated.removecontact}}"> <i class="fa fa-times"></i> </button> </td> </tr> <tr ng-if="showEdit===contact.robocall_contact_uuid" style="background-color: #e0e0e0"> <td colspan="5"> <div class="contact-edit-field"> <md-input-container> <label>First Name</label> <input ng-model="tempContact.firstname"> </md-input-container> </div> <div class="contact-edit-field"> <md-input-container> <label>Last Name</label> <input ng-model="tempContact.lastname"> </md-input-container> </div> <div class="contact-edit-field"> <md-input-container> <label>Phone</label> <input phone-input ng-model="tempContact.contact_phone1"> </md-input-container> </div> <div class="contact-edit-field"> <md-input-container> <label>Email</label> <input ng-model="tempContact.email_address"> </md-input-container> </div> <div class="contact-edit-field-full"> <md-input-container style="width: 100%"> <label>Notes</label> <input ng-model="tempContact.notes"> </md-input-container> </div> <div ng-if="broadcast.customFields.length>0" class="contact-edit-field-full"> Custom Fields: </div> <div ng-if="broadcast.customFields.length>0" ng-repeat="field in broadcast.customFields" class="contact-edit-field"> <md-input-container> <label>{{field.field_name}}</label> <input ng-model="tempContact.custom_fields[field.field_key]"> </md-input-container> </div> </td> <td class="am-contact-buttons"> <button class="btn btn-success btn-xs" ng-click="saveContact(tempContact)" tooltip-placement="top" uib-tooltip="{{tips.automated.savecontact}}"> <i class="fa fa-floppy-o"></i> </button> <button class="btn btn-default btn-xs" ng-click="cancelEdit()" tooltip-placement="top" uib-tooltip="{{tips.automated.canceleditcontact}}"> <i class="fa fa-undo"></i> </button> </td> </tr> </table> </td> </tr> </tbody> </table> <div ng-show="filterData.length > perPage" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"> </ul> </div> </div> <div class="alert alert-success" role="alert" ng-show="listCntcRecMess.length > 1"> <i class="fa fa-check-circle-o fa-2x" style="margin-right: 15px"> </i> <strong> Click the Next button </strong> when you\'re done adding Recipients... </div> </div> </uib-tab> <!-- //////////********** TAB 2 UPLOAD FILES  **********////////// --> <uib-tab index="2" heading="Import Files"> <div ng-if="displayLineErrors.length>0" uib-alert ng-class="\'alert-warning\'" close="closeMessage()" ng-bind-html="displayLineErrors"> </div> <div class="row"> <div class="col-md-6"> <div class="jumbotron import" ng-show="!gridOptions.data.length && !csv.result"> <div class="row"> <div class="col-lg-12"> <label class="btn btn-default btn-file btn-block" style="border-top-left-radius: 5; border-bottom-left-radius: 5"> <span class="cls-color-blue-tkg"> <i class="fa fa-file-excel-o cls-color-blue-tkg" style="margin-right: 10px"></i> Import spreadsheet file </span> <input type="file" accept=".xls,.xlsx,.ods" fileread="" opts="gridOptions" multiple style="display: none"> </label> <span class="smfont"> NOTE: First row of file must contain the headers for the columns. </span> </div> </div> </div> </div> <div class="col-md-6"> <div class="jumbotron import" ng-show="!gridOptions.data.length && !csv.result"> <div class="row"> <div class="col-lg-12"> <ng-csv-import class="import" content="csv.content" separator="csv.separator" accept="csv.accept" separator-visible="csv.separatorVisible" result="csv.result" encoding="csv.encoding" callback="csv.callback"> </ng-csv-import> </div> </div> </div> </div> </div> <div class="cls-company-setup-mnu"> <div class="cls-cont-company-setup" ng-show="gridOptions.data.length"> <div ng-include="\'views/autofilesprocess/fileprocessxlsx.html\'"> </div> </div> <div class="cls-cont-company-setup" ng-show="csv.result"> <div ng-include="\'views/autofilesprocess/fileprocesscsv.html\'"> </div> </div> </div> </uib-tab> <!-- //////////********** TAB 3 ADD INDIVIDUALLY  **********////////// --> <uib-tab index="3" heading="Add Individually"> <div ng-if="displayLineErrors.length>0" uib-alert ng-class="\'alert-warning\'" close="closeMessage()" ng-bind-html="displayLineErrors"> </div> <div class="jumbotron"> <div ng-show="!procAddIndError"> <div class="row"> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="First Name"> <i class="fa fa-edit"></i> </span> <input class="form-control" type="text" placeholder="First Name" ng-model="list.name" required> </div> </div> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="Last Name"> <i class="fa fa-edit"></i> </span> <input class="form-control" type="text" placeholder="Last Name" ng-model="list.lastname" required> </div> </div> </div> <div class="row"> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="Phone Number"> <i class="fa fa-phone"></i> </span> <input class="form-control" type="text" placeholder="Phone Number" phone-input ng-model="list.phone" required> </div> </div> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="email"> <i class="fa fa-at"></i> </span> <input class="form-control" type="text" placeholder="email" ng-model="list.email" required> </div> </div> </div> <div class="input-group"> <span class="input-group-addon" title="Notes"> <i class="fa fa-edit"></i> </span> <input class="form-control" type="text" placeholder="Notes" ng-model="list.notes" required> </div> <button class="btn btn-default" style="margin-top: 15px; margin-right: 15px" ng-click="clearIndividually();"> <i class="fa fa-eraser"></i> Clear Entry </button> <button class="btn btn-default" style="margin-top: 15px" ng-click="addListIndividually(list);"> <i class="fa fa-bars"></i> Put on list </button> <!-- <button class="btn btn-default" style="margin-top: 20px;"><i class="fa fa-eraser"></i>  Cancel  </button> --> </div> <div class="alert alert-warning" role="alert" ng-show="procAddIndError"> <div class="row"> <div class="col-lg-1"> <i class="fa fa-times-circle-o fa-3x" style="margin-right: 15px"> </i> </div> <div class="col-lg-11"> <strong> This phone number is already being used. </strong> </div> </div><br> <div class="row"> <center> <button class="btn btn-default" ng-click="dropAlert()"> <i class="fa fa-file-o" style="margin-right: 10px"></i> Accept </button> </center> </div> </div> </div> </uib-tab></uib-tabset> </div> </div>'),
a.put("views/autodialing/step3.html",'<div class="row"> <div class="col-lg-12"> <div class="panel" style="border: #cfdef0 solid 1px"> <div class="panel-body"> <div ng-show="broadcast.schedule_type===\'One\'"> <h4>Schedule: </h4> <table ng-if="showOneSchedule" id="broadcast-schedules" class="table table-bordered table-striped"> <tr> <td class="start-immediately-box"> <label>Start Immediately?</label> <md-switch ng-model="broadcast.schedule_status" aria-label="Switch 2" ng-true-value="\'Yes\'" ng-false-value="\'No\'" class="md-warn"> {{ broadcast.schedule_status }} </md-switch> <!-- <div class="input-group">\n                                        <label>Start Immediately?</label> <br/>\n\n                                        <input bs-switch\n                                            ng-model="broadcast.schedule_status"\n                                            type="checkbox"\n                                            uib-tooltip="..." \n                                            tooltip-placement="top"\n                                            switch-active="{{ isActive }}"\n                                            switch-size="{{ \'small\' }}"\n                                            switch-animate="{{ animate }}"\n                                            switch-label="{{ \'\' }}"\n                                            switch-icon="{{ icon }}"\n                                            switch-on-text="Yes"\n                                            switch-off-text="No"\n                                            switch-on-color="{{ on }}"\n                                            switch-off-color="{{ off }}"\n\n                                            switch-label-width="{{ labelWidth }}"\n                                            switch-handle-width="{{ handleWidth }}"\n                                            ng-true-value="\'Yes\'"\n                                            ng-false-value="\'No\'">\n                                    </div> --> </td> <td ng-if="broadcast.schedule_status===\'Yes\'" colspan="2"><h4>Your campaign will start delivery once you click Start Campaign on Step 4</h4></td> <td ng-if="broadcast.schedule_status===\'No\'" style="padding-top: 30px"> <div class="input-group" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_start_date}}"> <span class="input-group-addon" ng-click="open3()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-disabled="broadcast.schedule_status===\'Yes\'" ng-click="open3()" uib-datepicker-popup ng-model="broadcast.schedules[0].start_at" placeholder="Date" is-open="popup3.opened" datepicker-options="broadcastDateOptions" ng-required="true" close-text="Close"> </div> </td> <td ng-if="broadcast.schedule_status===\'No\'"> <div uib-timepicker ng-model="broadcast.schedules[0].start_at" ng-change="checkForChars(broadcast.schedules[0].start_at)" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" ng-disabled="broadcast.schedule_status===\'Yes\'" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_start_time}}"></div> </td> </tr> </table> <h4>Message: </h4> <div ng-if="showOneSchedule"> <!--- EMAIL MESSAGE --> <div class="row broadcast-message-container" ng-show="broadcast.message_type===\'Email\'"> <div class="row"> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"> From Name </span> <input class="form-control" type="text" placeholder="From Name" ng-model="broadcast.schedules[0].email_from_name"> </div> </div> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"> From Email </span> <select class="selectpicker form-control" ng-model="broadcast.schedules[0].email_from_email"> <option value="{{user.email_address}}">{{user.email_address}}</option> </select> </div> </div> <div class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> Subject </span> <input class="form-control" type="text" placeholder="Subject Line" ng-model="broadcast.schedules[0].email_subject"> </div> </div> <div ng-if="1===2" class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> HTML Email Body </span> <button class="btn btn-success" ng-click="openEmailEditor(broadcast.schedules[0].robocall_schedule_uuid)">Show Editor</button> </div> </div> <div class="col-sm-12"> Email Body: <text-angular ng-model="broadcast.schedules[0].email_message_html"></text-angular> <!--<textarea class="form-control broadcast" ng-model="broadcast.schedules[0].email_message_text" ng-attr-placeholder="Type your message here" msd-elastic></textarea>--> </div> </div> <button class="btn btn-success pull-right" ng-disabled="!broadcast.schedules[0].start_at || !broadcast.schedules[0].email_subject || !broadcast.schedules[0].email_from_email || !broadcast.schedules[0].email_message_html" ng-click="saveEmailMessage(0, broadcast.schedules[0], true)"><i class="fa fa-floppy-o"></i> Save Message</button> </div> <!--- SMS MESSAGE --> <div class="row broadcast-message-container" ng-show="broadcast.message_type===\'Text\'"> <div class="row"> <div class="col-sm-7"> Please indicate where replies to your SMS Campaign should be delivered <div class="input-group"> <span class="input-group-addon"> SMS Number </span> <select class="selectpicker form-control" ng-model="broadcast.schedules[0].sms_reply_number"> <option value="{{user.symphony_user_settings.sms_phone_number}}">{{user.symphony_user_settings.sms_phone_number | tel}}</option> </select> </div> </div> </div> <div class="row"> <div class="col-sm-7"> Use dropdown below to insert auto text into sms message. <md-select ng-model="insert.shortcode" placeholder="- Insert Shortcode -" tooltip-placement="top" uib-tooltip="{{::tips.automated.insertshortcodesms}}" ng-change="insertShortcode(insert.shortcode, broadcast.schedules[0])"> <md-option ng-repeat="field in customFields" ng-value="field.key"> {{field.value}} </md-option> </md-select> </div> </div> <div class="row"> <div class="col-sm-12"> <div class="suggestion-list" ng-show="showShortcodeList"> <div class="suggestion-list-content"> <div class="suggestion-list-header">People <span class="pull-right light-font right-text"><span class="pad-right-15"><i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate</span><span class="pad-right-15">tab to select</span><span class="pad-right-15">esc to dismiss</span></span> </div> <div class="suggestion-list-items" ng-init="predicate=\'name\'; reverse=false;"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: filterPersonData[selectedIndex].id === member.id}" ng-repeat="field in filterFields = (customFields | orderBy : predicate :reverse  | filter:filterCallouts)" ng-click="insertShortcode(field.key, broadcast.schedules[0])"><span style="margin: 0 15px"><strong>{{field.value}}</strong> <span></span></span> </div> </div> </div> </div> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-paper-plane"></i> </span> <textarea id="am-sms-message" ng-keydown="checkforcode($event, broadcast.schedules[0])" class="form-control include-emojis broadcast" ng-model="broadcast.schedules[0].sms_message" ng-attr-placeholder="Type your message here" msd-elastic></textarea> </div> </div> </div> <button class="btn btn-success pull-right" ng-disabled="!broadcast.schedules[0].start_at || !broadcast.schedules[0].sms_message || !broadcast.schedules[0].sms_reply_number" ng-click="saveSmsMessage(0, broadcast.schedules[0], true)"><i class="fa fa-floppy-o"></i> Save Message</button> </div> <!--- VOICE CALL --> <div class="broadcast-message-container clearfix" ng-show="broadcast.message_type===\'Voice\'"> <div class="tableclass"> <div class="tablecell itemlabel"> Caller Id Number: </div> <div class="tablecell mdauto" ng-init="test.selectedNumber = getSelectedNumber(broadcast.schedules[0].call_from_did)"> <md-autocomplete class="am-callerid" ng-disabled="isDisabled" md-no-cache="noCache" md-selected-item="test.selectedNumber" md-search-text-change="searchTextChange(test.searchNumber)" md-search-text="test.searchNumber" md-selected-item-change="itemChange(broadcast.schedules[0], number)" md-items="number in getNumberBySearchText(test.searchNumber)" md-item-text="showItemText(number)" md-min-length="0" placeholder="- Select Caller Id Number -"> <md-item-template> <span md-highlight-text="searchText" md-highlight-flags="^i">{{showItemText(number)}}</span> </md-item-template> <md-not-found> No states matching "{{searchText}}" were found. </md-not-found> </md-autocomplete> </div> </div> <div class="row"> <div class="col-md-5"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-hand-o-up" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Click an Option Below</strong></div> <ul class="list-group"> <li class="list-group-item" ng-click="setOpcMessageBroadcast(1)"><i class="fa fa-microphone" style="margin-right: 10px"></i>Record a New Message <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(2)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload an Audio File <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(3)"><i class="fa fa-book" style="margin-right: 10px"></i> Select from Audio Library <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"></i></li> </ul> </div> </div> <div class="col-md-7"> <div ng-if="broadcast.schedules[0].recording_file && !opcBroadcast" class="center-text show-player"> {{broadcast.schedules[0].library.file_title}}<br> <button class="btn btn-default" ng-click="playRecording(broadcast.schedules[0].recording_file)"><i class="fa fa-play"></i> Play Current Recording</button> </div> <div class="panel" ng-if="opcBroadcast" style="border: #cfdef0 solid 1px"> <div class="panel-heading"><strong class="cls-color-blue-tkg">{{opcBroadcastTitle}}</strong> <button class="btn btn-default pull-right" ng-click="cancelAddAudio()"><i class="fa fa-undo"></i> Cancel</button></div> <div class="panel-body"> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron recording"> <div ng-audio-recorder id="singleAudio" myindex="0" keith="\'James\'" audio-model="recordedSingle" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div> <md-input-container style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="recording.title"> </md-input-container> </div> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-init="savingRecord = false;" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Record\'}} </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="savingRecord || recorder.status.isRecording || !recorder.audioModel" ng-click="recorder.savetoServer(0, recording.title)"> <i class="glyphicon glyphicon-download"></i> Save </button> <span ng-if="savingRecord"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> <button id="btnDownload" style="display: none"></button> <!--<a class="btn btn-success" \n                                                                                    href="" download="recording.mp3" \n                                                                                    ng-disabled="recorder.status.isRecording || !recorder.audioModel" \n                                                                                    id="btnDownload"\n                                                                                    >\n                                                                                    <i class="glyphicon glyphicon-download"></i> Download\n                                                                                </a>--> </div> <div class="clearfix"></div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> </div> <div ng-if="opcBroadcast===\'audiolibrary\'"> <div class="scroll-container-head"> <table class="table table-bordered table-hover table-striped data-table-top" style="width: 100%"> <thead> <tr> <th style="width: 45px">Play</th> <th>File</th> <th style="width: 100px">Choose</th> <th style="width: 90px"></th> <th ng-if="audioLibrary.length>5" style="width: 10px; padding: 0px; border-left: 0"></th> </tr> </thead> </table> </div> <div class="scroll-container" style="height: 225px"> <table class="table table-bordered table-hover table-striped" style="width: 100%"> <tbody> <tr ng-repeat="row in audioLibrary"> <td style="width: 45px"> <span ng-if="audioFilePlaying!==row.audio_library_uuid" ng-click="playAudioFile(row.filepath, row.audio_library_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"> <i class="fa fa-play-circle fa-2x"></i> </span> <span ng-if="audioFilePlaying===row.audio_library_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"> <i class="fa fa-stop-circle fa-2x"></i> </span> </td> <td><span ng-if="!recordingBeingEdited(row)">{{row.file_title}} <span ng-if="row.used==\'true\'"><i class="fa fa-check" aria-hidden="true" tooltip-placement="top" uib-tooltip="File is being used in a draft or queued campaign"></i></span></span> <md-input-container ng-if="recordingBeingEdited(row)" style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="row.file_title"> </md-input-container> </td> <td style="width: 100px"> <button class="btn btn-success btn-xs" ng-click="selectAudioLibraryFile(row, broadcast.schedules[0].robocall_schedule_uuid)"> <i class="fa fa-plus"></i> Select </button> </td> <td style="width: 90px"> <i ng-show="!recordingBeingEdited(row)" ng-if="isDomainAdmin()" class="fa fa-times-circle pull-right {{row.used==\'true\' ? \'ltredfont\' : \'redfont\'}} deleteopt" aria-hidden="true" ng-click="row.used==\'true\' || deleteRecording(row)" tooltip-placement="top-right" uib-tooltip="{{row.used==\'true\' ? \'File is in use and can not be deleted\' : \'Delete Audio File\'}}"></i> <i ng-show="recordingBeingEdited(row)" class="fa fa-undo pull-right cancelopt" aria-hidden="true" ng-click="cancelEditRecording()" tooltip-placement="top-right" uib-tooltip="Cancel Edit"></i> <i ng-show="recordingBeingEdited(row)" class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveEditRecording(row)" tooltip-placement="top-right" uib-tooltip="Save Changes"></i> <i ng-show="!recordingBeingEdited(row)" class="fa fa-pencil-square-o pull-right deleteopt" aria-hidden="true" ng-click="setEditRecording(row)" tooltip-placement="top-right" uib-tooltip="Edit Audio File"></i> </td> <!--<td style="width: 40px;"><span ng-if="audioFilePlaying!==row.audio_library_uuid" ng-click="playAudioFile(row.filepath, row.audio_library_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"><i class="fa fa-play-circle fa-2x"></i></span>\n                                                                        <span ng-if="audioFilePlaying===row.audio_library_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"><i class="fa fa-stop-circle fa-2x"></i></span></td>\n                                                                    <td> {{row.file_title}}</td>\n                                                                    <td style="width: 100px;"><button class="btn btn-success btn-xs" ng-click="selectAudioLibraryFile(row.filepath, broadcast.schedules[0].robocall_schedule_uuid)"><i class="fa fa-plus"></i> Select</button></td>--> </tr> </tbody> </table> </div> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron center-text"> <div> <md-input-container style="width: 100%; text-align: center"> <label>Audio File Title</label> <input ng-model="recording.title"> </md-input-container> </div> <span ng-if="audioRecording.name"><p><strong>{{audioRecording.name}}</strong></p></span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="audio/*" type="file" name="useravatar" style="display: none" file-model="audioRecording"> </label> <button class="btn btn-success" ng-disabled="uploadingLibrary || !audioRecording" ng-click="uploadAudioFile(audioRecording, broadcast.schedules[0].robocall_schedule_uuid, recording.title)">Upload File</button> <span ng-if="uploadingLibrary"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </div> </div> <div ng-if="successMessage && successMessage !== \'\'" uib-alert ng-class="\'alert-success\'" close="closeLogout()">{{successMessage}}</div> <div ng-if="errorMessage && errorMessage !== \'\'" uib-alert ng-class="\'alert-failure\'" close="closeLogout()">{{errorMessage}}</div> <div ng-show="showPlayer && broadcast.schedules[0].recording_file" class="center-text show-player"> <button class="btn btn-success" ng-if="!recordingPlaying" ng-click="playRecording(broadcast.schedules[0].recording_file)"><i class="fa fa-play fa-lg"></i> Play Recording</button> <button class="btn btn-danger" ng-if="recordingPlaying" ng-click="stopPlaying()"><i class="fa fa-stop fa-lg"></i> Stop Playing</button> </div> </div> </div> </div> </div> <button class="btn btn-success pull-right" ng-disabled="!broadcast.schedules[0].start_at || !broadcast.schedules[0].call_from_did" ng-click="saveVoiceMessage(0, broadcast.schedules[0], true)"><i class="fa fa-floppy-o"></i> Save Message</button> </div> </div> </div> <div ng-show="broadcast.schedule_type===\'Series\'"> <div class="row"> <div class="col-lg-8"> <h4>Sending a Series of Messages</h4> <p>Prepare your messages below.</p> </div> <div class="col-lg-4 right-text"> <button class="btn btn-default" ng-click="createEmptySchedule(broadcast.schedules.length)">{{showAddSchedule ? \'Cancel\' : \'Add New Entry\'}}</button> </div> </div> <table ng-show="showAddSchedule || !broadcast.schedules || broadcast.schedules.length===0" id="broadcast-schedules" class="table table-bordered table-hover table-striped"> <tr> <td style="padding-top: 30px"> <input type="text" class="form-control" ng-model="newschedule.title" placeholder="Title" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_description}}"> </td> <td style="padding-top: 30px"> <div class="input-group"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button> </span> <input type="text" class="form-control" ng-click="open2()" uib-datepicker-popup ng-model="newschedule.start_at" placeholder="Date" is-open="popup2.opened" datepicker-options="broadcastDateOptions" ng-required="true" close-text="Close"> </div> </td> <td> <div uib-timepicker ng-model="newschedule.start_at" ng-change="checkForChars(newschedule.start_at)" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_start_time}}"></div> </td> <td style="padding-top: 30px"> <button ng-click="addScheduleEntry(newschedule)" class="btn btn-primary btn-xs" tooltip-placement="bottom" uib-tooltip="{{tips.automated.add_schedule}}">Add</button> </td> </tr> </table> <uib-accordion close-others="oneAtATime"> <div uib-accordion-group ng-repeat="schedule in filterData = (broadcast.schedules | orderBy: sortByDate : false)" class="panel-default" ng-init="uuid=schedule.robocall_schedule_uuid; editSchedule[uuid]=false; editMessage[uuid]=false" is-open="status.open"> <uib-accordion-heading> <i class="fa fa-{{broadcast.message_type===\'Voice\' ? \'phone\' : (broadcast.message_type===\'Text\' ? \'paper-plane\' : \'envelope\')}} fa-2x" style="padding-right: 12px"></i> {{schedule.title}}: {{schedule.start_at | date: "EEEE, MMMM d, y h:mm a"}} <div class="series-status-box pull-right" ng-if="scheduleReady(schedule)"><i class="fa fa-check-circle" style="color: green; font-size: 20px" tooltip-placement="bottom" uib-tooltip="{{tips.automated.message_ready}}"></i></div> <div class="series-status-box pull-right" ng-if="!scheduleReady(schedule)"><i class="fa fa-times-circle" style="color: red; font-size: 20px" tooltip-placement="bottom" uib-tooltip="{{tips.automated.message_not_ready}}"></i></div> <div class="series-status-box edit pull-right"><i class="pull-right glyphicon" ng-click="dothis()" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}"></i> Edit</div> </uib-accordion-heading> <h4>Schedule: </h4> <div class="row broadcast-message-container"> <div class="col-sm-5" style="padding-top: 10px"> Description: <input type="text" class="form-control" ng-model="schedule.title" placeholder="Title" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_description}}"> </div> <div class="col-sm-4" style="padding-top: 10px"> Deliver Date / Time: <div class="input-group" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_start_date}}"> <span class="input-group-addon" ng-click="open1()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-click="open1()" uib-datepicker-popup ng-model="schedule.start_at" placeholder="Date" is-open="popup1.opened" datepicker-options="broadcastDateOptions" ng-required="true" close-text="Close"> </div> </div> <div class="col-sm-3" style="padding-top: 10px"> <div uib-timepicker ng-model="schedule.start_at" ng-change="checkForChars(schedule.start_at)" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian" tooltip-placement="bottom" uib-tooltip="{{tips.automated.schedule_start_time}}"></div> </div> <button class="btn btn-success pull-right" ng-if="broadcast.message_type===\'Voice\'" ng-disabled="!schedule.start_at" ng-click="updateSchedule(schedule, $index, true)" tooltip-placement="bottom" uib-tooltip="{{tips.automated.save_schedule}}"><i class="fa fa-floppy-o"></i> Update Schedule</button> </div> <!--- EMAIL MESSAGE --> <h4>Message to be Delivered: </h4> <div class="row broadcast-message-container" ng-if="broadcast.message_type===\'Email\'"> <div class="row"> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"> From Name </span> <input class="form-control" type="text" placeholder="From Name" ng-model="schedule.email_from_name"> </div> </div> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"> From Email </span> <select class="selectpicker form-control" ng-model="schedule.email_from_email"> <option value="{{user.email_address}}">{{user.email_address}}</option> </select> </div> </div> <div class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> Subject </span> <input class="form-control" type="text" placeholder="Subject Line" ng-model="schedule.email_subject"> </div> </div> <div ng-if="1===2" class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> HTML Email Body </span> <button class="btn btn-success" ng-click="openEmailEditor(schedule.robocall_schedule_uuid)">Show Editor</button> </div> </div> <div class="col-sm-12"> Email Body <text-angular ng-model="schedule.email_message_html"></text-angular> </div> </div> </div> <!--- SMS MESSAGE --> <div class="row broadcast-message-container" ng-if="broadcast.message_type===\'Text\'"> <div class="row"> <div class="col-sm-6"> <div class="input-group"> <span class="input-group-addon"> SMS Reply To Number </span> <select class="selectpicker form-control" ng-model="schedule.sms_reply_number"> <option value="{{user.symphony_user_settings.sms_phone_number}}">{{user.symphony_user_settings.sms_phone_number | tel}}</option> </select> </div> </div> </div> <div class="row"> <div class="col-sm-7"> Use dropdown below to insert auto text into sms message. <md-select ng-model="insert.shortcode" placeholder="- Insert Shortcode -" tooltip-placement="top" uib-tooltip="{{::tips.automated.insertshortcodesms}}" ng-change="insertShortcode(insert.shortcode, schedule)"> <md-option ng-repeat="field in customFields" ng-value="field.key"> {{field.value}} </md-option> </md-select> </div> </div> <div class="row"> <div class="col-sm-12"> <div class="suggestion-list" ng-show="showShortcodeList"> <div class="suggestion-list-content"> <div class="suggestion-list-header">People <span class="pull-right light-font right-text"><span class="pad-right-15"><i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate</span><span class="pad-right-15">tab to select</span><span class="pad-right-15">esc to dismiss</span></span> </div> <div class="suggestion-list-items" ng-init="predicate=\'name\'; reverse=false;"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: filterFields[selectedIndex] === field}" ng-repeat="field in filterFields = (customFields | orderBy : predicate :reverse  | filter:filterCallouts)" ng-click="insertShortcode(field.key, schedule)"><span style="margin: 0 15px"><strong>{{field.value}}</strong> <span></span></span> </div> </div> </div> </div> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-paper-plane"></i> </span> <textarea id="am-sms-message" ng-keydown="checkforcode($event, schedule)" class="form-control include-emojis broadcast" ng-model="schedule.sms_message" ng-attr-placeholder="Type your message here" msd-elastic></textarea> </div> </div> </div> </div> <!--- VOICE CALL --> <div class="broadcast-message-container" ng-if="broadcast.message_type===\'Voice\'"> <div class="row"> <div class="col-md-5"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-hand-o-up" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Click an Option Below</strong></div> <ul class="list-group"> <li class="list-group-item" ng-click="setOpcMessageBroadcast(1)"><i class="fa fa-microphone" style="margin-right: 10px"></i>Record a New Message <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(2)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload an Audio File <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(3)"><i class="fa fa-book" style="margin-right: 10px"></i> Select from Audio Library <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"></i></li> </ul> </div> </div> <div class="col-md-7"> <div class="tableclass"> <div class="tablecell itemlabel"> Caller Id Number: </div> <div class="tablecell mdauto" ng-init="test.selectedNumber = getSelectedNumber(schedule.call_from_did)"> <md-autocomplete class="am-callerid" ng-disabled="isDisabled" md-no-cache="noCache" md-selected-item="test.selectedNumber" md-search-text-change="searchTextChange(test.searchNumber)" md-search-text="test.searchNumber" md-selected-item-change="itemChange(schedule, number)" md-items="number in getNumberBySearchText(test.searchNumber)" md-item-text="showItemText(number)" md-min-length="0" placeholder="- Select Caller Id Number -"> <md-item-template> <span md-highlight-text="searchText" md-highlight-flags="^i">{{showItemText(number)}}</span> </md-item-template> <md-not-found> No states matching "{{searchText}}" were found. </md-not-found> </md-autocomplete> </div> </div> <div ng-if="schedule.recording_file" class="center-text show-player"> {{schedule.library.file_title}}<br> <button class="btn btn-default" ng-click="playRecording(schedule.recording_file)"><i class="fa fa-play"></i> Play Current Recording</button> </div> <div class="panel" ng-if="opcBroadcast" style="border: #cfdef0 solid 1px"> <div class="panel-heading"><strong class="cls-color-blue-tkg">{{opcBroadcastTitle}}</strong> <button class="btn btn-default pull-right" ng-click="cancelAddAudio()"><i class="fa fa-undo"></i> Cancel</button></div> <div class="panel-body"> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron recording"> <div ng-audio-recorder id="mainAudio{{$index}}" keith="\'HELLO\'" my-index="$index" audio-model="recorded[$index]" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div> <md-input-container style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="recording.title"> </md-input-container> </div> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-init="savingRecord = false;" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Record\'}} </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="savingRecord || recorder.status.isRecording || !recorder.audioModel" ng-click="recorder.savetoServer(recorder.myIndex, recording.title)"> <i class="glyphicon glyphicon-download"></i> Save </button> <span ng-if="savingRecord"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </div> <div class="clearfix"></div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> </div> <div ng-if="opcBroadcast===\'audiolibrary\'"> <div class="scroll-container-head"> <table class="table table-bordered table-hover table-striped data-table-top" style="width: 100%"> <thead> <tr> <th style="width: 45px">Play</th> <th>File</th> <th style="width: 100px">Choose</th> <th style="width: 90px"></th> <th ng-if="audioLibrary.length>5" style="width: 10px; padding: 0px; border-left: 0"></th> </tr> </thead> </table> </div> <div class="scroll-container" style="max-height: 225px"> <table class="table table-bordered table-hover table-striped" style="width: 100%"> <tbody> <tr ng-repeat="row in audioLibrary"> <td style="width: 45px"> <span ng-if="audioFilePlaying!==row.audio_library_uuid" ng-click="playAudioFile(row.filepath, row.audio_library_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"> <i class="fa fa-play-circle fa-2x"></i> </span> <span ng-if="audioFilePlaying===row.audio_library_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"> <i class="fa fa-stop-circle fa-2x"></i> </span> </td> <td><span ng-if="!recordingBeingEdited(row)">{{row.file_title}} <span ng-if="row.used==\'true\'"><i class="fa fa-check" aria-hidden="true" tooltip-placement="top" uib-tooltip="File is being used in a draft or queued campaign"></i></span></span> <md-input-container ng-if="recordingBeingEdited(row)" style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="row.file_title"> </md-input-container> </td> <td style="width: 100px"> <button class="btn btn-success btn-xs" ng-click="selectAudioLibraryFile(row, schedule.robocall_schedule_uuid)"> <i class="fa fa-plus"></i> Select </button> </td> <td style="width: 90px"> <i ng-show="!recordingBeingEdited(row)" ng-if="isDomainAdmin()" class="fa fa-times-circle pull-right {{row.used==\'true\' ? \'ltredfont\' : \'redfont\'}} deleteopt" aria-hidden="true" ng-click="row.used==\'true\' || deleteRecording(row)" tooltip-placement="top-right" uib-tooltip="{{row.used==\'true\' ? \'File is in use and can not be deleted\' : \'Delete Audio File\'}}"></i> <i ng-show="recordingBeingEdited(row)" class="fa fa-undo pull-right cancelopt" aria-hidden="true" ng-click="cancelEditRecording()" tooltip-placement="top" uib-tooltip="Cancel Edit"></i> <i ng-show="recordingBeingEdited(row)" class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveEditRecording(row)" tooltip-placement="top" uib-tooltip="Save Changes"></i> <i ng-show="!recordingBeingEdited(row)" class="fa fa-pencil-square-o pull-right deleteopt" aria-hidden="true" ng-click="setEditRecording(row)" tooltip-placement="top" uib-tooltip="Edit Audio File"></i> </td> </tr> </tbody> </table> </div> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron center-text"> <div> <md-input-container style="width: 100%; text-align: center"> <label>Audio File Title</label> <input ng-model="recording.title"> </md-input-container> </div> <span ng-if="audioRecording.name"><p><strong>{{audioRecording.name}}</strong></p></span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="audio/*" type="file" name="useravatar" style="display: none" file-model="audioRecording"> </label> <button class="btn btn-success" ng-disabled="uploadingLibrary" ng-click="uploadAudioFile(audioRecording, schedule.robocall_schedule_uuid, recording.title)">Upload File</button> <span ng-if="uploadingLibrary"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </div> </div> </div> </div> <div ng-if="successMessage && successMessage !== \'\'" uib-alert ng-class="\'alert-success\'" close="closeMessage()">{{successMessage}}</div> <div ng-if="errorMessage && errorMessage !== \'\'" uib-alert ng-class="\'alert-failure\'" close="closeMessage()">{{errorMessage}}</div> </div> </div> </div> <div class="row"> <div class="pull-right" style="padding: 15px"> <button class="btn btn-danger" ng-click="removeAutomatedScheduleEntry(schedule.robocall_schedule_uuid)" tooltip-placement="bottom" uib-tooltip="{{tips.automated.remove_schedule}}"><i class="fa fa-trash"></i> Remove</button> <button class="btn btn-success" ng-if="broadcast.message_type===\'Voice\'" ng-disabled="!schedule.start_at || !schedule.call_from_did" ng-click="saveSmsMessage($index, schedule, true)"><i class="fa fa-floppy-o"></i> Save Message</button> <button class="btn btn-success" ng-if="broadcast.message_type===\'Text\'" ng-disabled="!schedule.title || !schedule.start_at || !schedule.sms_message || !schedule.sms_reply_number" ng-click="saveSmsMessage($index, schedule, true)"><i class="fa fa-floppy-o"></i> Save Message</button> <button class="btn btn-success" ng-if="broadcast.message_type===\'Email\'" ng-disabled="!schedule.title || !schedule.start_at || !schedule.email_subject || !schedule.email_from_email || !schedule.email_message_html" ng-click="saveEmailMessage($index, schedule, true)"><i class="fa fa-floppy-o"></i> Save Message</button> </div> </div> </div> </uib-accordion> </div> </div> </div> </div> <div class="col-lg-3" ng-if="1==2"> <div class="panel panel-warning"> <div class="panel-heading"><i class="fa fa-question-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Useful tips or Help</strong></div> <div class="panel-body"> Content... </div> </div> </div> </div>'),
a.put("views/autodialing/step4.html",'<div class="container" ng-controller="AutoDialingCtrl"> <div class="row"> <div class="col-lg-3 col-md-3"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-hand-o-up" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Click an Option Below</strong></div> <ul class="list-group"> <li class="list-group-item"><a href="" ng-click="setOpcMessageBroadcast(1)"><i class="fa fa-microphone" style="margin-right: 10px"></i>Record a New Message</a> <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"></i></li> <li class="list-group-item"><a href="" ng-click="setOpcMessageBroadcast(2)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload an Audio File</a> <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"></i></li> <li class="list-group-item"><a href="" ng-click="setOpcMessageBroadcast(3)"><i class="fa fa-book" style="margin-right: 10px"></i> Select from Audio Library </a> <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"></i></li> <li class="list-group-item"><a href="" ng-click="setOpcMessageBroadcast(4)"><i class="fa fa-edit" style="margin-right: 10px"></i>Type Your Message</a> <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'messagetyped\'"></i></li> </ul> </div> </div> <div class="col-lg-6 col-md-5"> <div class="panel" style="border: #cfdef0 solid 1px"> <div class="panel-heading"><strong class="cls-color-blue-tkg">{{opcBroadcastTitle}}</strong></div> <div class="panel-body"> <div ng-if="opcBroadcast===\'audiolibrary\'"> <div class="jumbotron"> <label></label> <div> Audio Library... </div> <button class="btn btn-default" style="margin-top: 20px"><i class="fa fa-save"></i> Save </button> </div> </div> <div ng-if="opcBroadcast===\'messagetyped\'"> <div class="jumbotron"> <label>Type a message not more 120 characters</label> <div> <textarea cols="55" rows="5" style="resize: none"></textarea> </div> <button class="btn btn-default" style="margin-top: 20px"><i class="fa fa-save"></i> Save </button> </div> </div> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron"> <div ng-audio-recorder id="mainAudio" audio-model="yup" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div ng-controller="AutoDialingCtrl"> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Start\'}} Recording </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="recorder.status.isRecording || !recorder.audioModel" ng-click="oldsaveToServer(recordedBlob, recorder.blob)"> <i class="glyphicon glyphicon-download"></i> Save to Server </button> <!--<a class="btn btn-success" \n                               href="" download="recording.mp3" \n                               ng-disabled="recorder.status.isRecording || !recorder.audioModel" \n                               id="btnDownload"\n                               >\n                                <i class="glyphicon glyphicon-download"></i> Download\n                            </a>--> </div> <div class="clearfix"></div> </div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> <style>canvas {\n        display: inline-block;\n        background: #202020;\n        width: 100%;\n        /*height: 45%;*/\n        box-shadow: 0px 0px 10px blue;\n    }\n\n    .float-rt {\n        float: right;\n    }</style> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron"> <div ng-controller="AutoDialingCtrl"> <form name="frmFileShare"> <label class="btn btn-default btn-file btn-block" ng-show="!msgEmailSent" style="border-top-left-radius: 5; border-bottom-left-radius: 5"> <span ng-hide="uploader.queue.length >= 1" class="cls-color-blue-tkg">Click to select a file</span> <input type="file" class="form-control" ng-if="uploader.queue.length < 1" ng-click="chargerVal(contactsUsr, contentEmail)" accept="audio/*" nv-file-select="" uploader="uploader" style="display: none" ng-disabled="frmFileShare.$invalid"> <span ng-repeat="item in uploader.queue" ng-show="uploader.queue.length >= 1"> <strong>{{ item.file.name.length > 75 ? item.file.name.substring(0, 35) + \' ... \' + item.file.name.substring(item.file.name.length-35) : item.file.name }}</strong> <span class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </span> </span> </label> <div ng-repeat="item in uploader.queue" ng-show="uploader.queue.length >= 1" style="margin-top: 10px"> <button class="btn btn-danger btn-sm" ng-click="item.remove()" ng-show="uploader.queue.length >= 1" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><i class="fa fa-trash" style="margin-right: 10px"></i>Remove file selected</button> <button class="btn btn-primary btn-sm" ng-click="item.upload(); " ng-hide="msgFileUpload" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload file</button> <div class="alert alert-success" role="alert" ng-show="msgFileUpload"> <i class="fa fa-check-circle-o fa-2x" style="margin-right: 15px"></i> <strong>Your file has been uploaded succefull </strong> </div> </div> </form> </div> </div> </div> </div> </div> </div> <div class="col-lg-3 col-md-2"> <div class="panel panel-warning"> <div class="panel-heading"><i class="fa fa-question-circle-o" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Useful tips or Help</strong></div> <div class="panel-body"> Content... </div> </div> </div> </div> </div>'),a.put("views/autodialing/step5.html",'<div class="row"> <div class="col-sm-9"> <div class="jumbotron"> <ul class="list-group"> <li class="list-group-item"><div class="row"><div class="col-sm-3 confirmation-label">Campaign Name:</div><div class="col-sm-9">{{broadcast.robocall_name}}</div></div></li> <li class="list-group-item"><div class="row"><div class="col-sm-3 confirmation-label">Delivery Method</div><div class="col-sm-9">{{broadcast.message_type}}</div></div></li> <li class="list-group-item"><div class="row"><div class="col-sm-3 confirmation-label">Broadcast Type:</div><div class="col-sm-9">{{broadcast.robocall_type}}</div></div></li> <li class="list-group-item"><div class="row"><div class="col-sm-3 confirmation-label">Campaign Type:</div><div class="col-sm-9">{{broadcast.schedule_type === \'One\' ? \'One Time Message\' : \'Series of Messages\'}}</div></div></li> <li class="list-group-item"><div class="row"><div class="col-sm-3 confirmation-label">Send To:</div><div class="col-sm-9">{{broadcast.contacts.length}} Total Contact(s) <button class="btn btn-default btn-xs" ng-click="showModalWithData(\'/autodialing/displaycontacts.html\', broadcast.contacts)">View</button></div></div></li> <li class="list-group-item" ng-if="broadcast.schedule_type===\'One\'"> <div class="row"> <div class="col-sm-3 confirmation-label">Delivery Date/Time:</div> <div class="col-sm-9" ng-if="broadcast.schedule_status===\'Yes\'">Start Immediately</div> <div class="col-sm-9" ng-if="broadcast.schedule_status===\'No\'">{{broadcast.schedules[0].start_at | amDateFormat: \'ddd, MMM D, h:mm a\'}}</div> </div> </li> <li class="list-group-item" ng-if="broadcast.schedule_type===\'One\'"> <div class="row"> <div class="col-sm-3 confirmation-label">Message Details:</div> <div class="col-sm-9 message-details"> <div ng-if="broadcast.message_type===\'Text\'"> <p><strong>SMS Reply to Number:</strong> {{broadcast.schedules[0].sms_reply_number | tel}}</p> <p><strong>SMS Message: </strong> {{broadcast.schedules[0].sms_message}}</p> </div> <div ng-if="broadcast.message_type===\'Voice\'"> <p><strong>Caller Id Number:</strong> {{broadcast.schedules[0].call_from_did | tel}}</p> <p><strong>Audio Message: </strong> <button ng-click="showAudioModal(broadcast.schedules[0].recording_file, \'robocall-recording\')" class="btn btn-default">Click to Listen</button></p> </div> <div ng-if="broadcast.message_type===\'Email\'"> <p><strong>From:</strong> {{broadcast.schedules[0].email_from_name}} ({{broadcast.schedules[0].email_from_email}})</p> <p><strong>Subject: </strong> {{broadcast.schedules[0].email_subject}}</p> <p><strong>Message (Text): </strong></p> <!--<div>{{broadcast.schedules[0].email_message_text}}</div>--> <div class="email-preview" ng-bind-html="showHtml(broadcast.schedules[0].email_message_html)"></div> <!--<p><strong>Message (Html): </strong> <button ng-click="alert(\'Working on Preview\');" class="btn btn-default">Click to Preview</button></p>--> </div> </div> </div> </li> </ul> <div ng-if="broadcast.schedule_type===\'Series\'"> <h4>Your Scheduled Deliveries</h4> <uib-accordion close-others="oneAtATime"> <div uib-accordion-group ng-repeat="schedule in broadcast.schedules | orderBy: \'start_at\'" class="panel-default" ng-init="uuid=schedule.broadcast_schedule_uuid; editSchedule[uuid]=false; editMessage[uuid]=false" is-open="status.open"> <uib-accordion-heading> <div class="row"> <div class="col-lg-1"><i class="fa fa-{{broadcast.message_type===\'Voice\' ? \'phone\' : (broadcast.message_type===\'Text\' ? \'paper-plane\' : \'envelope\')}} fa-2x" style="padding-right: 12px"></i></div> <div class="col-lg-8 summary-header"><strong>Message Title: </strong>{{schedule.title}}<br> <strong>{{broadcast.message_type===\'Voice\' ? \'Calling\' : \'Sending\'}} At:</strong> {{schedule.start_at | amDateFormat: \'ddd, MMM D, h:mm a\'}}</div> <div class="col-lg-3 right-text"> <div class="col-sm-9">View <i class="pull-right glyphicon" style="margin-left: 10px" ng-click="dothis()" ng-class="{\'glyphicon-chevron-down\': status.open, \'glyphicon-chevron-right\': !status.open}" tooltip-placement="bottom-right" uib-tooltip="{{tips.automated.show_details}}"></i></div> <div class="col-sm-2" ng-if="scheduleReady(schedule)"><i class="fa fa-check-circle" style="color: green; font-size: 20px" tooltip-placement="bottom-right" uib-tooltip="{{tips.automated.schedule_ready}}"></i></div> <div class="col-sm-2" ng-if="!scheduleReady(schedule)"><i class="fa fa-times-circle" style="color: red; font-size: 20px" tooltip-placement="bottom-right" uib-tooltip="{{tips.automated.schedule_notready}}"></i>!</div> </div> </div> </uib-accordion-heading> <div class="row broadcast-message-container message-details"> <div ng-if="broadcast.message_type===\'Text\'"> <p><strong>SMS Reply to Number:</strong> {{schedule.sms_reply_number | tel}}</p> <p><strong>SMS Message: </strong> {{schedule.sms_message}}</p> </div> <div ng-if="broadcast.message_type===\'Voice\'"> <p><strong>Caller Id Number:</strong> {{schedule.call_from_did | tel}}</p> <p><strong>Audio Message: </strong> <button ng-click="showAudioModal(schedule.recording_file, \'robocall-recording\')" class="btn btn-default">Click to Listen</button></p> </div> <div ng-if="broadcast.message_type===\'Email\'"> <p><strong>From:</strong> {{schedule.email_from_name}} ({{schedule.email_from_email}})</p> <p><strong>Subject: </strong> {{schedule.email_subject}}</p> <p><strong>Message (Text): </strong></p> <span ng-bind-html="showHtml(schedule.email_message_html)"></span> <!--<p><strong>Message (Html): </strong> <button ng-click="alert(\'Working on Preview\')" class="btn btn-default">Click to Preview</button</p>--> </div> </div> </div> </uib-accordion> </div> </div> </div> </div> <div ng-if="campaignErrors.length>0 && 1==2" uib-alert ng-class="\'alert-danger\'" close="closeMessage()"> <ul> <li ng-repeat="error in campaignErrors">{{error}}</li> </ul> </div> <div ng-if="!campaignErrors || campaignErrors.length==0" class="alert alert-success" role="alert" style="margin-top: 10px; display: block"> If the information above is correct, click the Start Campaign button below. </div>'),a.put("views/autofilesprocess/fileprocesscsv.html",'<p ng-show="csv.result"> Match the columns to your data and then click Import Recipients to add them to your Recipient List. </p> <div class="jumbotron" ng-show="csv.result"> <md-checkbox ng-model="firstrow" aria-label="Include First Row"> Include First Row? {{firstrow}} </md-checkbox> <div class="csv-container" ng-if="csv.result"> <div ng-if="displayImportErrors.length>0" uib-alert ng-class="\'alert-warning\'" close="closeMessage()" ng-bind-html="displayImportErrors"> </div> <table ng-init="prepareContacts(csv.result)" class="csv-table table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-repeat="n in [] | range:colHeaders.length" ng-init="showNewField[n]=false"> <select ng-change="selectedItemChanged(n)" ng-model="colSelect[n]"> <option value="">Ignore</option> <!--<option ng-repeat="option in colOptions | arrayDiff:colSelect:colSelect[n]" ng-value="option">{{option.value}}</option>--> <option ng-repeat="option in customFields | arrayDiff:colSelect:colSelect[n]" ng-value="option">{{option.value}}</option> <option value="add_new">Add New Field</option> </select> <input ng-model="newField[n]" ng-show="showNewField[n]"><button ng-show="showNewField[n]" ng-click="saveNewField(n, newField[n])" class="btn btn-default btn-xs"><i class="fa fa-check"></i></button> </th> </tr> </thead> <tbody> <tr ng-repeat="row in contactRows"> <td ng-repeat="col in row"> {{col}} </td> </tr> </tbody> </table> </div> <div class="button-box right-text"> <button class="btn btn-default" ng-click="cancelCsvUpload()"> <i class="fa fa-times"></i> Cancel Import </button> <button class="btn btn-success" ng-click="importCsvContacts(colSelect, contactRows, firstrow)"> <i class="fa fa-upload"></i> Import Recipients </button> </div> </div>'),a.put("views/autofilesprocess/fileprocesstxt.html",'<!DOCTYPE html><!--\nTo change this license header, choose License Headers in Project Properties.\nTo change this template file, choose Tools | Templates\nand open the template in the editor.\n--> <html> <head> <title>TODO supply a title</title> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> </head> <body> <div>TODO write content</div> </body> </html>'),a.put("views/autofilesprocess/fileprocessxlsx.html",'<p ng-show="gridOptions.data.length"> Match the columns to your data and then click Import Recipients to add them to your Recipient List. </p> <div class="jumbotron" ng-show="gridOptions.data.length"> <div class="csv-container"> <div ng-if="displayImportErrors.length>0" uib-alert ng-class="\'alert-warning\'" close="closeMessage()" ng-bind-html="displayImportErrors"> </div> <table class="csv-table table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-repeat="n in [] |  range:gridOptions.columnDefs.length"> <select ng-model="colSelect[n]"> <option value="">Ignore</option> <option ng-repeat="item in colOptions | arrayDiff:colSelect:colSelect[n]" ng-value="item">{{item.value}}</option> </select> </th> </tr> </thead> <tbody> <tr ng-repeat="row in gridOptions.data"> <td ng-repeat="col in gridOptions.columnDefs"> {{row[col.field]}} </td> </tr> </tbody> </table> </div> <div class="button-box right-text"> <button class="btn btn-default" ng-click="cancelXlsxUpload()"> <i class="fa fa-times"></i> Cancel Import </button> <button class="btn btn-success" ng-show="gridOptions.data.length" ng-click="importXlsContacts(colSelect, gridOptions)"> <i class="fa fa-upload"></i> Import Recipients </button> </div> </div>'),a.put("views/billing/makeapayment.html",'<div class="jumbotron"> <button ng-click="generateInvoice()">Generate</button> <div class="row" ng-if="!paid"> <div class="col s12 m4 offset-m4"> <div class="card-panel"> <form stripe-form="handleStripe" name="myForm"> {{paid}} <div class="row"> <div class="input-field col s12"> <label for="name">Name on card </label> <input type="text" id="name"> </div></div> <div class="row"> <div class="input-field col s12"> <label for="cardn">Card number</label> <input type="text" name="number" id="cardn" ng-model="number" payments-validate="card" payments-format="card" payments-type-model="type" ng-class="myForm.number.$card.type"> </div> </div> <div class="row"> <div class="input-field col s6"> <label for="exp">Expiry</label> <input type="text" id="exp" ng-model="expiry" payments-validate="expiry" payments-format="expiry"> </div> <div class="input-field col s6"> <label for="cvc">CVC</label> <input type="text" id="cvc" ng-model="cvc" payments-validate="cvc" payments-format="cvc" payments-type-model="type"> </div> </div> <div class="row"> <div class="input-field col s12"> <button ng-if="paid==false" type="submit" class="btn btn-primary btn-large">Pay {{amount}}</button> </div> </div> </form> </div> </div> </div> <div class="row" ng-if="paid"> <div class="col s12 m4 offset-m4"> <div class="card-panel"> <h2><p>{{message}}</p></h2> </div> </div> </div> <div class="row"> <div class="col-lg-6"> <div> <div class="thumbnail"> <div class="caption"> <h4>Payment amount</h4> <div class="input-group"> <span class="input-group-addon" title="payment amount"><i class="fa fa-dollar"></i></span> <input class="form-control" type="text" placeholder="payment amount"> </div> </div> </div> </div> <div> <div class="thumbnail"> <div class="caption"> <h4>Payment method</h4> <md-input-container class="md-input-has-value md-block"> <label>Select Card</label> <md-radio-group ng-model="groupcode.copy_type" ng-required="true"> <md-radio-button ng-repeat="card in savedCards" value="card.id" class="md-primary">{{card.brand + \' \' + card.last4}}</md-radio-button> </md-radio-group> </md-input-container> </div> <button class="btn btn-primary btn-xs" ng-click="showNewCard=!showNewCard">Add New Card</button> {{savedCards.length}} <div class="caption" ng-if="showNewCard"> <form stripe-form="addCardStripe" name="addCard"> <div class="row"> <div class="input-field col s12"> <label for="name">Name on card </label> <input type="text" id="name"> </div></div> <div class="row"> <div class="input-field col s12"> <label for="cardn">Card number</label> <input type="text" name="number" id="cardn" ng-model="number" payments-validate="card" payments-format="card" payments-type-model="type" ng-class="myForm.number.$card.type"> </div> </div> <div class="row"> <div class="input-field col s6"> <label for="exp">Expiry</label> <input type="text" id="exp" ng-model="expiry" payments-validate="expiry" payments-format="expiry"> </div> <div class="input-field col s6"> <label for="cvc">CVC</label> <input type="text" id="cvc" ng-model="cvc" payments-validate="cvc" payments-format="cvc" payments-type-model="type"> </div> </div> <div class="row"> <div class="input-field col s12"> <button type="submit" class="btn btn-primary btn-large">Pay {{amount}}</button> </div> </div> </form> </div> </div> </div> </div> <!-- other colum --> <div class="col-lg-6"> <div> <div class="thumbnail"> <div class="caption"> <h4>Current payment and charges</h4> <ul class="list-group"> <li class="list-group-item">Last Payment received (02/20/2016) <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><strong>Total Amount Due (Payment Due 07/10/2016)</strong> <span class="pull-right"><strong>##.###,##</strong><i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> </ul> </div> </div> </div> <div> <div class="thumbnail"> <div class="caption"> <h4>Payment date</h4> <ul class="list-group"> <li class="list-group-item"><input type="radio"> Pay now</li> <li class="list-group-item"><input type="radio"> Schedule payment date <input class="pull-right" type="date"> </li> </ul> <button class="btn btn-success">acept</button> </div> </div> </div> </div> </div> </div>'),a.put("views/billing/summary.html",'<div class="row"> <div class="col-lg-12"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-dollar" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">current payment and charges</strong></div> <ul class="list-group"> <li class="list-group-item">Last Payment received (02/20/2016) <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><strong>Total Amount Due (Payment Due 07/10/2016)</strong> <span class="pull-right"><strong>##.###,##</strong><i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> </ul> </div> <!-- <button class="btn btn-success" style="margin: 10px 10px 10px 0px !important;">Make a payment</button>  --> </div> </div> <div class="row"> <div class="col-lg-6"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-reorder" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">bill sumary</strong></div> <ul class="list-group"> <li class="list-group-item">Previous balance <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item">Payment posted <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><strong>Balance</strong> <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item">Credits/Adjustments/Other charges <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li><span class="pull-right">-----------------------------</span></li> <li class="list-group-item">Goverment Fees and taxes <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><strong>Total current charges</strong> <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><strong>Total amount due</strong> <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> </ul> </div> </div> <div class="col-lg-6"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-book" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">bill history</strong></div> <ul class="list-group"> <li class="list-group-item"><i class="fa fa-calendar cls-color-blue-tkg" style="padding-right: 10px"></i>01/01/2016 - 01/31/2016 <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><i class="fa fa-calendar cls-color-blue-tkg" style="padding-right: 10px"></i>01/01/2016 - 01/31/2016 <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><i class="fa fa-calendar cls-color-blue-tkg" style="padding-right: 10px"></i>01/01/2016 - 01/31/2016 <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><i class="fa fa-calendar cls-color-blue-tkg" style="padding-right: 10px"></i>01/01/2016 - 01/31/2016 <span class="pull-right">##.###,##<i class="fa fa-dollar cls-color-blue-tkg" style="margin-left: 10px"></i></span></li> <li class="list-group-item"><a href="">older</a></li> </ul> </div> </div> </div>'),a.put("views/callcenter.html",'<div class="call-center-container" ng-controller="CallCenterCtrl"> <div class="row"> <div class="col-sm-12"> <h3>Call Centre</h3> </div> </div> <div ng-if="!allowed" uib-alert ng-class="\'alert-info\'"> You do not have permission to view this page. </div> <div ng-show="allowed"> <table class="table page-actions" ng-show="showTable"> <tr> <td> <div class="col-lg-6"> <label class="bluecolor" for="search"> Staff per page: </label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-model="perPage"> </select> </div> <div class="col-lg-6"> <div class="input-group"> <span class="input-group-addon" title="Filter Staff"> <i class="fa fa-filter"></i> </span> <input class="form-control" type="text" ng-model="staffSearch" placeholder="Filter by Staff Name / Extension"> </div> </div> </td> </tr> </table> <div class="scroll-container-head" ng-show="showTable"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 7%"> <a href ng-click="sort_by(\'contact.user_ext\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbyextension}}"> Ext. <i class="fa fa-{{!reverse && predicate===\'contact.user_ext\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 30%"> <a href ng-click="sort_by(\'contact.contact_name_given\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbyname}}"> Name <i class="fa fa-{{!reverse && predicate===\'contact_name_given\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th style="width: 9%"> <a href ng-click="sort_by(\'contact.status\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbystatus}}"> Status <i class="fa fa-{{!reverse && predicate===\'contact.status\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 16%"> <a href ng-click="sort_by(\'call.callerid\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbywith}}"> On Call With <i class="fa fa-{{!reverse && predicate===\'call.callerid\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 10%"> <a href ng-click="sort_by(\'call.direction\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbydirection}}"> In/Out <i class="fa fa-{{!reverse && predicate===\'call.direction\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 10%"> <a href ng-click="sort_by(\'call.duration\')" tooltip-placement="top-left" uib-tooltip="{{tips.callcenter.sortbyduration}}"> Duration <i class="fa fa-{{!reverse && predicate===\'call.duration\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th>L / W / B </th> </tr> </thead> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': callcenterTableHeight && callcenterTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-repeat="staff in filterData = (staffCallStatus | orderBy : predicate :reverse | filter:searchStaff) | limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 7%"> {{staff.contact.user_ext}} </td> <td style="width: 30%"> <ul class="profile-display"> <li class="profile_display_30"> <img ng-src="{{pathImgProfile + staff.contact.contact_profile_image}}" ng-if="staff.contact.contact_profile_image" class="profile_image" alt=""> <label class="profile_icon" ng-show="!staff.contact.contact_profile_image" style="{{ setProfileColor(staff.contact) }}"> {{staff.contact.contact_name_given.substring(0,1).toUpperCase() + staff.contact.contact_name_family.substring(0,1).toUpperCase()}} </label> </li> <li style="display: inline-block"> {{staff.contact.contact_name_given+\' \'+staff.contact.contact_name_family}} </li> </ul> </td> <td style="width: 9%; font-size: 24px; text-align: center; padding-top: 6px"> <i class="{{ showicon(staff.contact.status, \'\') }}" tooltip-placement="bottom" uib-tooltip="{{staff.contact.status}}"></i> </td> <td style="width: 16%"> {{staff.call.callerid}} <br ng-if="staff.call.callerid!=\'\'"> {{staff.call.number | tel}} </td> <td style="width: 10%; font-size: 24px; text-align: center; padding-top: 6px"> <span id="statusCall" tooltip-placement="top" uib-tooltip="{{staff.call.direction.toUpperCase()}}"> <img ng-src="images/icons/incoming-icon.242075af.png" class="cls-img-call-history" ng-if="staff.call.direction ===\'Inbound\'" alt=""> <img ng-src="images/icons/outgoing-icon.69f97b13.png" class="cls-img-call-history" ng-if="staff.call.direction === \'Outbound\'" alt=""> </span> </td> <td style="width: 10%"> <span ng-if="staff.contact.status==\'Busy on Call\'"> {{formatTime(staff.call.duration)}} </span> </td> <td> <i class="fa fa-headphones" style="color: grey; padding: 8px; font-size: 20px" tooltip-placement="top" ng-if="showDisabledIcon(staff, \'listen\')" uib-tooltip="Listen"> </i> <i ng-if="showNotInProgressIcon(staff, \'listen\')" ng-click="callListen(staff.call)" class="fa fa-headphones" style="color: green; padding: 8px; font-size: 20px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.listen}}"> </i> <i ng-if="showInProgressIcon(staff, \'listen\')" ng-click="hangUpLWB(\'listen\', staff.call)" class="fa fa-headphones" style="color: green; padding: 3px; font-size: 30px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.hangup}}"> </i> <i class="fa fa-assistive-listening-systems" style="color: grey; padding: 8px; font-size: 20px" tooltip-placement="top" ng-if="showDisabledIcon(staff, \'whisper\')" uib-tooltip="Whisper"> </i> <i ng-if="showNotInProgressIcon(staff, \'whisper\')" ng-click="callWhisper(staff.call)" class="fa fa-assistive-listening-systems" style="color: blue; padding: 8px; font-size: 20px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.whisper}}"> </i> <i ng-if="showInProgressIcon(staff, \'whisper\')" ng-click="hangUpLWB(\'whisper\', staff.call)" class="fa fa-assistive-listening-systems" style="color: blue; padding: 3px; font-size: 30px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.hangup}}"> </i> <i class="fa fa-bullhorn" style="color: grey; padding: 8px; font-size: 20px" tooltip-placement="top" ng-if="showDisabledIcon(staff, \'barge\')" uib-tooltip="Barge"> </i> <i ng-if="showNotInProgressIcon(staff, \'barge\')" ng-click="callBarge(staff.call)" class="fa fa-bullhorn" style="color: orange; padding: 8px; font-size: 20px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.barge}}"> </i> <i ng-if="showInProgressIcon(staff, \'barge\')" ng-click="hangUpLWB(\'barge\', staff.call)" class="fa fa-bullhorn" style="color: orange; padding: 3px; font-size: 30px" tooltip-placement="top" uib-tooltip="{{tips.callcenter.hangup}}"> </i> </td> </tr> </tbody> </table> </div> <div ng-show="showTable" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"> </ul> </div> </div> </div>'),
a.put("views/callhistory.html",'<div style="padding-bottom: 0 !important" ng-controller="CallHistoryCtrl"> <div class="row"> <div class="col-sm-8"> <h3>Call History <span ng-if="selectEmulateUser!==null && selectEmulateUser !== user.id">- Emulating: {{getNameByUUID(selectEmulateUser)}}</span></h3> </div> <div class="col-sm-4" ng-if="emulationStatus[\'callhistory\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{tips.callhistory.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'callhistory\')"> <md-option ng-value="user.id"><strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong></md-option> <md-option ng-repeat="emUser in emulationStatus[\'callhistory\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <table class="table page-actions"> <tr> <td class="entries-per-page"> <div ng-show="!showBtnDelCalls"> <label class="bluecolor" for="search">Calls per page:</label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-change="changePerPage()" ng-model="callHistory.perPage"></select> </div> <div ng-show="showBtnDelCalls"> <button ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" class="btn btn-default btn-sm" ng-click="deleteCallSelected(); "><i class="fa fa-trash" style="margin-right: 10px"></i> Delete</button> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="callHistory.fromDate" name="callHistory.fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(callHistory.fromDate)" placeholder="From"> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="callHistory.toDate" name="callHistory.toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" ng-change="processToDate(callHistory.toDate)" placeholder="To"> </div> </td> <td> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="historySearch" placeholder="Filter Displayed Results"> </div> </td> </tr> </table> <div ng-show="showTable" class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 6%">&nbsp;</th> <th style="width: 33%" id="cls-tab-from"><a href ng-click="sort_by(\'contact.contact_name_full\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyfrom}}">From / To <i class="fa fa-{{!reverse && predicate===\'contact.contact_name_full\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 20%" id="cls-tab-date"><a href ng-click="sort_by(\'start_stamp\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbydate}}">Date / Time <i class="fa fa-{{!reverse && predicate===\'start_stamp\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 11%" id="cls-tab-dura"><a href ng-click="sort_by(\'duration\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyduration}}">Duration <i class="fa fa-{{!reverse && predicate===\'duration\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="button-column-md" id="cls-tab-stat"><a href ng-click="sort_by(\'icon\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbystatus}}">Status <i class="fa fa-{{!reverse && predicate===\'icon\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="button-column-md" id="cls-tab-reco"><a href ng-click="sort_by(\'recording_file\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyrecording}}">Recording <i class="fa fa-{{!reverse && predicate===\'recording_file\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="button-column-md">Copy</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="dateSearched"> <td colspan="7"> Showing {{filterData.length}} of {{totalResults}} Call History Records for the period from <strong ng-if="callHistory.fromDate">{{callHistory.fromDate | date:\'EEE MMM d, y\'}}</strong><strong ng-if="!callHistory.fromDate">{{displayFromDate | date:\'EEE MMM d, y\'}}</strong> to <strong ng-if="callHistory.toDate">{{callHistory.toDate | date:\'EEE MMM d, y\'}}</strong><strong ng-if="!callHistory.toDate">{{displayToDate | date:\'EEE MMM d, y\'}}</strong>. <button ng-if="callHistory.fromDate && callHistory.toDate" class="btn btn-default btn-xs" ng-click="clearDateSearch()">Clear Custom Date Search</button> <span ng-if="showMissedField()"><br>Showing Missed Calls only <button class="btn btn-default btn-xs" ng-click="clearMissedFilter()">Clear Filter</button></span> </td> </tr> </tbody> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': historyTableHeight && historyTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="data-table-body"> <tr ng-if="filterData.length===0"> <td colspan="7">There are no calls that match your query.</td> </tr> <tr ng-if="!dateSearched"> <td colspan="7">Complete your date search above or <button class="btn btn-xs btn-default" ng-click="clearDateSearch()">Clear Search</button>. </td> </tr> <tr ng-if="dateSearched && call.contact_number!==\'0000000000\'" ng-repeat="call in filterData = (callHistoryRST | orderBy : predicate :reverse | filter: showMissed | filter : searchCallHistory) |  limitTo:callHistory.perPage:callHistory.perPage*(callHistory.currentPage-1)"> <td style="width: 6%" ng-init="showCallSelected[call.uuid]=false;"> <a href="" ng-click="(!selectEmulateUser || selectEmulateUser === user.id) && callSelected(call.uuid, showCallSelected[call.uuid]); "> <span class="cls-img-contact-call-history"> <!--  <img ng-if="call.contact.contact_profile_image" ng-src="{{pathImgProfile + call.contact.contact_profile_image}}" ng-show="!showCallSelected" class="cls-img-lst-contact" alt=""/>   --> <img ng-if="!showCallSelected[call.uuid] && call.contact && call.contact.contact_profile_image" ng-src="{{pathImgProfile + call.contact.contact_profile_image}}" ng-show="!showCallSelected[call.uuid]" class="cls-img-lst-contact" alt=""> <label ng-if="!showCallSelected[call.uuid] && call.contact && !call.contact.contact_profile_image" class="cls-img-lst-contact-null" style="{{ setProfileColor(call.contact.contact_profile_color) }}">{{call.contact.contact_name_given.substring(0,1).toUpperCase() + call.contact.contact_name_family.substring(0,1).toUpperCase()}}</label> <label ng-if="!showCallSelected[call.uuid] && !call.contact" class="cls-img-lst-contact-null"><i class="fa fa-user"></i></label> <label class="cls-call-history-selected" ng-if="showCallSelected[call.uuid]"><i class="fa fa-check"></i></label> <input type="checkbox" ng-model="call.uuid" ng-checked="showCallSelected[call.uuid]" ng-show="showNever"> </span> </a> </td> <td style="width: 33%"> <span class="cls-contact-btn-options pull-right"> <ul> <span ng-if="!call.isUser && call.contact && call.contact.contact_type==\'user\'"> <li tooltip-placement="top" uib-tooltip="Chat" ng-click="startDirectMessageFromContact(call.contact)"> <h4><span style="color: #f8a632"><i class="fa fa-comments fa-lg"></i></span></h4> </li> </span> <span ng-if="call.isUser || !call.contact || call.contact.contact_type!=\'user\'"> <li><h4><span style="color: grey"><i class="fa fa-comments fa-lg"></i></span></h4> </li> </span> <span ng-if="!call.isUser && call.contact.smsnumber"> <li tooltip-placement="top" uib-tooltip="Text" ng-click="showModalWithData(\'/sms/sendsmstop.html\',call.contact)"> <h4><span style="color: #f8a632"><i class="fa fa-paper-plane fa-lg"></i></span></h4> </li> </span> <span ng-if="call.isUser || !call.contact.smsnumber"> <li tooltip-placement="top" uib-tooltip="No Mobile Number Available"> <h4> <span style="color: grey"><i class="fa fa-paper-plane fa-lg"></i></span> </h4> </li> </span> <li ng-if="!call.isUser" tooltip-placement="top" uib-tooltip="Call to... {{call.direction ==\'local\' ? \'Ext: \' : \'\'}}{{call.contact_number | tel}}" ng-click="makeCall(call.contact_number)"> <span style="color: #8adbf6"><i class="fa fa-phone fa-lg"></i></span> </li> <li ng-if="call.isUser"> <span style="color: grey"><i class="fa fa-phone fa-lg"></i></span> </li> <!-- span ng-if="call.isContact && (call.email || call.contact.contact_type===\'user\')">\n                                    <li tooltip-placement="top" uib-tooltip="video call" ng-click="makeVideoCall(call.contact)">\n                                        <span style="color: #8adbf6;"><i class="fa fa-video-camera fa-lg"></i></span>\n                                    </li>\n                                </span --> <!-- span ng-if="!call.isContact">\n                                    <li ><span style="color: grey;"><i class="fa fa-video-camera fa-lg"></i></span></li>\n                                </span --> <span ng-if="!call.isUser && call.isContact && call.email!==\'\'"> <li tooltip-placement="top" uib-tooltip="{{call.email}}"> <a ng-click="startEmailClient(call.email)"><span style="color: #64d76c"><i class="fa fa-envelope fa-lg"></i></span></a> </li> </span> <span ng-if="!call.isContact || call.isUser || call.email==\'\'"><li><span style="color: grey"><i class="fa fa-envelope fa-lg"></i></span></li> </span> <span ng-if="!call.isUser && call.isContact && call.contact.contact_type !== \'user\'"><li tooltip-placement="top" uib-tooltip="view contact"><a href="" ng-click="showEditContactForm(call.contact)"><span style="color: #64d76c"><i class="fa fa-eye"></i></span></a> </li> </span> <span ng-if="!call.isContact"> <li tooltip-placement="top" uib-tooltip="add contact" ng-click="showAddContactForm(\'callhistory\', call)"> <span style="color: #64d76c"><i class="fa fa-user-plus"></i></span> </li> </span> </ul> </span> <span ng-if="call.contact && call.contact_name"><a href="" ng-click="showEditContactForm(call.contact)"><strong>{{call.contact_name}}</strong></a><br></span> <span ng-if="!call.contact && call.contact_name && !isPhoneNumber(call.contact_name)"><strong>{{call.contact_name}}</strong><br></span> <span ng-if="call.contact && call.contact_name" style="font-size: smaller">{{call.direction ==\'local\' ? \'Ext: \' : \'\'}}{{call.contact_number | tel}}</span><span ng-if="call.destination_number==10000 || call.destination_number==\'1\'+recording.caller_id_number"> (Conference Call)</span> <!--   <span ng-if="!call.contact_name"><strong>{{call.direction ==\'local\' ? \'Ext: \' : \'\'}}{{returnAvatarName(call.contact_number, \'nam\')}}</strong><br></span> --> <span ng-if="call.contact && !call.contact_name"><strong>{{call.direction ==\'local\' ? \'Ext: \' : \'\'}}{{call.contact_number | tel}}</strong><br></span> <span ng-if="!call.contact && (call.contact_name && isPhoneNumber(call.contact_name)) || !call.contact_name"><strong>{{call.direction ==\'local\' ? \'Ext: \' : \'\'}}{{call.contact_number | tel}}</strong><br></span> </td> <!--  --> <td style="width: 20%">{{call.start_stamp | timestamp | amUtc | amLocal | amDateFormat: \'MMM D, YYYY, h:mm a\'}}</td> <td style="width: 11%; text-align: center"> <span ng-bind="formatTime(call.duration) |  date:\'MM/dd/yyyy h:m\'"> </span> </td> <td class="button-column-md"> <span id="statusCall"> <span ng-if="call.icon===20 || call.icon===40" class="fa-stack redfont" tooltip-placement="top" uib-tooltip="{{tips.history.missed}}"> <i class="fa fa-phone fa-rotate-135 fa-stack-2x" style="margin-top: 5px"></i> <i class="fa fa-minus fa-rotate-135 fa-stack-1x" style="margin-top: -7px;padding-right: 5px"></i> <i class="fa fa-arrow-left fa-rotate-45 fa-stack-1x" style="margin-top: -9px; margin-left: -3px"></i> </span> <!--<img ng-src="images/icons/miscall-icon.3eaf2399.png" tooltip-placement="top" uib-tooltip="{{tips.history.missed}}" class="cls-img-call-history" alt="{{tips.history.missed}}"/>--> <span ng-if="call.icon===50" class="fa-stack bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundanswered}}" alt="{{tips.history.outboundanswered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-up fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="call.icon===60" class="fa fa-phone fa-2x bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundunanswered}}" alt="{{tips.history.outboundunanswered}}"></i> <span ng-if="call.icon===80" class="fa-stack greenfont" tooltip-placement="top" uib-tooltip="{{tips.history.answered}}" alt="{{tips.history.answered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-down fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="call.icon===30 || call.icon===25" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.declined}}" alt="{{tips.history.declined}}"></i> <!--<i ng-if="call.icon===80" class="fa fa-phone fa-2x greenfont" uib-tooltip="{{tips.history.answered}}" alt="{{tips.history.answered}}"></i>--> <a href ng-if="call.icon===10" ng-click="showAudioModal(call, \'history-voicemail\')"><img ng-src="images/icons/record-icon.068506d9.png" tooltip-placement="top" uib-tooltip="{{tips.history.voicemail}}" class="cls-img-call-history" alt="{{tips.history.voicemail}}"></a> <!--<span ng-if="call.voicemail_file && call.voicemail_file !==null && audioPlaying!==call.voicemail_file"  tooltip-placement="top" uib-tooltip="{{tips.history.voicemail}}"><i class="fa fa-play-circle fa-2x"></i></span>--> </span> </td> <td class="button-column-md"> <span ng-if="call.recording_file!==null && audioPlaying!==call.recording_file" ng-click="showAudioModal(call, \'history-recording\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="call.recording_file!==null && audioPlaying===call.recording_file" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> </td> <td class="button-column-md"> <span ng-click="copyCallToHawksoft(call)" tooltip-placement="top-right" uib-tooltip="{{::tips.history.copytohawksoft}}"><img src="images/icons/hawksoft-icon.f79da22f.png" style="width: 24px; height: 24px"></span> </td> </tr> </tbody> </table> </div> <button class="btn btn-default btn-sm" ng-click="deleteCallSelected();" ng-show="showBtnDelCalls"><i class="fa fa-trash" style="margin-right: 10px"></i> Delete</button> <div ng-show="showTable" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="callHistory.currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="callHistory.perPage" boundary-link-numbers="true" max-size="10"></ul> </div> </div>'),a.put("views/callhistorynew.html",'<div style="padding-bottom: 0 !important" ng-controller="CallHistoryCtrl"> <div class="row"> <div class="col-sm-8"> <h3>Call History <span ng-if="selectEmulateUser!==null && selectEmulateUser !== user.id">- Emulating: {{getNameByUUID(selectEmulateUser)}}</span></h3> </div> <div class="col-sm-4" ng-if="emulationStatus[\'callhistory\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{tips.callhistory.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'callhistory\')"> <md-option ng-value="user.id"><strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong></md-option> <md-option ng-repeat="emUser in emulationStatus[\'callhistory\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <table class="table page-actions"> <tr> <td class="entries-per-page"> <div ng-show="!showBtnDelCalls"> <label class="bluecolor" for="search">Calls per page:</label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-change="changePerPage()" ng-model="callHistory.perPage"></select> </div> <div ng-if="hasSelections()"> <button ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" class="btn btn-default btn-sm" ng-click="deleteCallSelected(); "><i class="fa fa-trash" style="margin-right: 10px"></i> Delete</button> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="callHistory.fromDate" name="callHistory.fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="processFromDate(callHistory.fromDate)" placeholder="From"> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="callHistory.toDate" name="callHistory.toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" ng-change="processToDate(callHistory.toDate)" placeholder="To"> </div> </td> <td> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="historySearch" placeholder="Filter Displayed Results"> </div> </td> </tr> </table> <div ng-show="showTable" class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 6%">&nbsp;</th> <th style="width: 33%" ng-click="sort_by(\'from_to\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyfrom}}"> From / To <i ng-class="showChevron(\'from_to\')"></i> </span> </th> <th style="width: 20%" ng-click="sort_by(\'start_stamp\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbydate}}"> Date / Time <i ng-class="showChevron(\'start_stamp\')"></i> </span> </th> <th style="width: 11%" ng-click="sort_by(\'duration\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyduration}}"> Duration <i ng-class="showChevron(\'duration\')"></i> </span> </th> <th class="button-column-md" ng-click="sort_by(\'callstat\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbystatus}}"> Status <i ng-class="showChevron(\'callstat\')"></i> </span> </th> <th class="button-column-md" ng-click="sort_by(\'manual_recording_filepath\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyrecording}}"> Recording <i ng-class="showChevron(\'manual_recording_filepath\')"></i> </span> </th> <th class="button-column-md">Copy</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="dateSearched"> <td colspan="7"> Showing {{filterData.length}} of {{callHistoryData.length}} Call History Records for the period from <strong ng-if="callHistory.fromDate">{{callHistory.fromDate | date:\'EEE MMM d, y\'}}</strong><strong ng-if="!callHistory.fromDate">{{displayFromDate | date:\'EEE MMM d, y\'}}</strong> to <strong ng-if="callHistory.toDate">{{callHistory.toDate | date:\'EEE MMM d, y\'}}</strong><strong ng-if="!callHistory.toDate">{{displayToDate | date:\'EEE MMM d, y\'}}</strong>. <span ng-if="showMissedField()"><br>Showing Missed Calls only <button class="btn btn-default btn-xs" ng-click="clearMissedFilter()">Clear Filter</button></span> </td> </tr> </tbody> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': historyTableHeight && historyTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="data-table-body"> <tr ng-if="filterData.length===0"> <td colspan="7">There are no calls that match your query.</td> </tr> <tr ng-repeat="call in filterData = (callHistoryData | orderBy : predicate :reverse | filter: showMissed | filter : searchCallHistory) |  limitTo:callHistory.perPage:callHistory.perPage*(callHistory.currentPage-1)"> <td style="width: 6%"> <!-- <a href="" ng-click="(!selectEmulateUser || selectEmulateUser === user.id) && callSelected(call.uuid, showCallSelected[call.uuid]); "> --> <a href="" ng-click="(!selectEmulateUser || selectEmulateUser === user.id) && callSelected(call.call_history_fs_uuid)"> <span class="cls-img-contact-call-history"> <img ng-if="!showCallSelected[call.call_history_fs_uuid] && call.contact && call.contact.contact_profile_image" ng-src="{{pathImgProfile + call.contact.contact_profile_image}}" class="cls-img-lst-contact" alt=""> <label ng-if="!showCallSelected[call.call_history_fs_uuid] && call.contact && !call.contact.contact_profile_image" class="cls-img-lst-contact-null" style="{{ setProfileColor(call.contact.contact_profile_color) }}">{{call.contact.contact_name_given.substring(0,1).toUpperCase() + call.contact.contact_name_family.substring(0,1).toUpperCase()}}</label> <label ng-if="!showCallSelected[call.call_history_fs_uuid] && call.noncontact" class="cls-icon-lst-contact-null" style="{{ setProfileColor(call.noncontact.color) }}"><i class="fa fa-user"></i></label> <label class="cls-call-history-selected" ng-if="showCallSelected[call.call_history_fs_uuid]"><i class="fa fa-check"></i></label> <input type="checkbox" ng-model="call.call_history_fs_uuid" ng-checked="showCallSelected[call.call_history_fs_uuid]" ng-show="showNever"> </span> </a> </td> <td style="width: 33%"> <span class="cls-contact-btn-options pull-right"> <ul> <li ng-if="!call.isUser && call.contact && call.contact.contact_type==\'user\'" tooltip-placement="top" uib-tooltip="Chat" ng-click="startDirectMessageFromContact(call.contact)"> <h4><span style="color: #f8a632"><i class="fa fa-comments fa-lg"></i></span></h4> </li> <li ng-if="call.isUser || !call.contact || call.contact.contact_type!=\'user\'"> <h4><span style="color: grey"><i class="fa fa-comments fa-lg"></i></span></h4> </li> <li ng-if="!call.isUser && call.contact.smsnumber" tooltip-placement="top" uib-tooltip="Text" ng-click="showModalWithData(\'/sms/sendsmstop.html\',call.contact)"> <h4><span style="color: #f8a632"><i class="fa fa-paper-plane fa-lg"></i></span></h4> </li> <li ng-if="call.isUser || !call.contact.smsnumber" tooltip-placement="top" uib-tooltip="No Mobile Number Available"> <h4><span style="color: grey"><i class="fa fa-paper-plane fa-lg"></i></span></h4> </li> <li tooltip-placement="top" uib-tooltip="Call to... {{call.contact_number.length<10 ? \'Ext: \' : \'\'}}{{call.contact_number | tel}}" ng-click="makeCall(call.contact_number)"> <span style="color: #8adbf6"><i class="fa fa-phone fa-lg"></i></span> </li> <li ng-if="!call.isUser && call.isContact && call.email!==\'\'" tooltip-placement="top" uib-tooltip="{{call.email}}"> <a ng-click="startEmailClient(call.email)"><span style="color: #64d76c"><i class="fa fa-envelope fa-lg"></i></span></a> </li> <li ng-if="!call.isContact || call.isUser || call.email==\'\'"> <span style="color: grey"><i class="fa fa-envelope fa-lg"></i></span> </li> <li ng-if="!call.isUser && call.isContact && call.contact.contact_type !== \'user\'" tooltip-placement="top" uib-tooltip="view contact"> <a href="" ng-click="showEditContactForm(call.contact)"><span style="color: #64d76c"><i class="fa fa-eye"></i></span></a> </li> <li ng-if="!call.isContact" tooltip-placement="top" uib-tooltip="add contact" ng-click="showAddContactForm(\'callhistory\', call)"> <span style="color: #64d76c"><i class="fa fa-user-plus"></i></span> </li> </ul> </span> <span ng-if="call.contact && call.contact_name"> <a href="" ng-click="showEditContactForm(call.contact)"> <strong> {{call.contact_name}} </strong> <span ng-if="1==2 && call.contact.contact_uuid === user.contact_uuid"> (You) </span> </a> <br> </span> <span ng-if="call.noncontact && call.contact_name && !isPhoneNumber(call.contact_name)"> <strong> {{call.contact_name}} </strong> <br> </span> <span ng-if="call.contact && call.contact_name" style="font-size: smaller"> <span ng-if="call.contact_number.length<10"> Ext: </span> {{call.contact_number | tel}} <span ng-if="call.description.length>0"> {{call.description}} </span> </span> <span ng-if="call.contact && !call.contact_name"> <strong> <span ng-if="call.contact_number.length<10"> Ext: </span> {{call.contact_number | tel}} </strong> <br> <span ng-if="call.description.length>0"> {{call.description}} </span> </span> <span ng-if="call.noncontact && (call.contact_name && isPhoneNumber(call.contact_name)) || !call.contact_name"> <strong> <span ng-if="call.contact_number.length<10"> Ext: </span> {{call.contact_number | tel}} </strong> <span ng-if="call.description.length>0"> <br> {{call.description}} </span> </span> </td> <td style="width: 20%">{{call.start_stamp | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\'}}</td> <td style="width: 11%; text-align: center"> <span ng-bind="formatTime(call.duration) |  date:\'MM/dd/yyyy h:m\'"> </span> </td> <td class="button-column-md"> <span id="statusCall"> <span ng-if="call.call_direction === \'outbound\'"> <span ng-if="call.call_status ===\'answered\'" class="fa-stack bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundanswered}}" alt="{{tips.history.outboundanswered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-up fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="call.call_status ===\'unanswered\'" class="fa fa-phone fa-2x bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundunanswered}}" alt="{{tips.history.outboundunanswered}}"></i> </span> <span ng-if="call.call_direction === \'inbound\'"> <span ng-if="call.call_status === \'missed\' || call.call_status === \'unanswered\'" class="fa-stack redfont" tooltip-placement="top" uib-tooltip="{{tips.history.missed}}"> <i class="fa fa-phone fa-rotate-135 fa-stack-2x" style="margin-top: 5px"></i> <i class="fa fa-minus fa-rotate-135 fa-stack-1x" style="margin-top: -7px;padding-right: 5px"></i> <i class="fa fa-arrow-left fa-rotate-45 fa-stack-1x" style="margin-top: -9px; margin-left: -3px"></i> </span> <span ng-if="call.call_status === \'answered\'" class="fa-stack greenfont" tooltip-placement="top" uib-tooltip="{{tips.history.answered}}" alt="{{tips.history.answered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-down fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="!call.voicemail_filepath && call.call_status === \'sent_to_voicemail\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.sent_to_voicemail}}" alt="{{tips.history.sent_to_voicemail}}"></i> <i ng-if="call.call_status === \'declined\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.declined}}" alt="{{tips.history.declined}}"></i> <a href ng-if="call.voicemail_filepath" ng-click="showAudioModal(call, \'history-voicemail\')"><img ng-src="images/icons/record-icon.068506d9.png" tooltip-placement="top" uib-tooltip="{{tips.history.voicemail}}" class="cls-img-call-history" alt="{{tips.history.voicemail}}"></a> </span> </span> </td> <td class="button-column-md"> <span ng-if="call.recording_filepath && audioPlaying!==call.recording_filepath" ng-click="showAudioModal(call, \'history-recording\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="call.recording_filepath && audioPlaying===call.recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> <span ng-if="call.manual_recording_filepath && audioPlaying!==call.manual_recording_filepath" ng-click="showAudioModal(call, \'history-recording-manual\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="call.manual_recording_filepath && audioPlaying===call.manual_recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> </td> <td class="button-column-md"> <span ng-show="user.exportType.partner_code == \'hawksoft\'" ng-click="copyCallToHawksoft(call)" tooltip-placement="top-right" uib-tooltip="{{::tips.history.copytohawksoft}}"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"></span> <span ng-show="user.exportType.partner_code == \'generic\'" ng-click="copyCallToHawksoft(call)" tooltip-placement="top-right" uib-tooltip="{{::tips.history.copytomanagement}}"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"></span> </td> </tr> </tbody> </table> </div> <button class="btn btn-default btn-sm" ng-click="deleteCallSelected();" ng-if="hasSelections()"><i class="fa fa-trash" style="margin-right: 10px"></i> Delete</button> <div ng-show="showTable" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="callHistory.currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="callHistory.perPage" boundary-link-numbers="true" max-size="10"></ul> </div> </div>'),a.put("views/callrecording/callrecording.html",'<div id="call-recording-container" ng-controller="CallRecordingCtrl"> <div class="row top-row"> <div class="col-sm-8"> <h3>Call Recordings <span ng-if="showTable && selectEmulateUser!==null && selectEmulateUser !== user.id"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> </div> </div> <table ng-show="showTable" class="table page-actions"> <tr> <td class="entries-per-page"> <div> <label class="bluecolor" for="search" style="width: 50%"> Recordings per page: </label> <select class="selectpicker form-control per-page" ng-options="page for page in ppOptions" ng-model="perPage" style="vertical-align: top"> </select> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" placeholder="To"> </div> </td> </tr> </table> <div class="results-filter"> <div class="input-group"> <span class="input-group-addon" title="Filter calls"> <i class="fa fa-filter"></i> </span> <input class="form-control" type="text" ng-model="filterSearch" placeholder="Filter Results"> </div> </div> <div ng-show="showTable" class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 24%" ng-click="sort_by(\'caller_name\')"> Caller <i ng-class="showChevron(\'caller_name\')"></i> </th> <th style="width: 12%" ng-click="sort_by(\'start_stamp\')"> Date/Time <i ng-class="showChevron(\'start_stamp\')"></i> </th> <th style="width: 11%" ng-click="sort_by(\'message_length\')"> Call Duration <i ng-class="showChevron(\'message_length\')"></i> </th> <th class="button-column">Play</th> <th class="button-column">Download</th> <th class="button-column">Copy</th> <th class="button-column">Remove</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="dateSearched"> <td colspan="6"> Showing {{totalResults}} Call Recording Records for the period from <strong>{{fromDate | date:\'EEE MMM d, y\'}}</strong> to <strong>{{toDate | date:\'EEE MMM d, y\'}}</strong>. <button ng-if="customSearch" class="btn btn-default btn-xs" ng-click="clearDateSearch()"> Clear Custom Date Search </button> </td> </tr> </tbody> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': vvmTableHeight && vvmTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-if="callRecordings.length==0"> <td colspan="6">You do not currently have any saved recordings.</td> </tr> <tr ng-class="{boldrow: recording.vm_status===\'unread\'}" ng-repeat="recording in filterData = (callRecordings | orderBy : predicate :reverse | filter : filterSearch | filter : dateFilter) |  limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 24%" ng-if="recording.contact"> <ul class="profile-display"> <li ng-if="recording.contact.contact_profile_image" class="profile_display_30"> <img src="{{pathImgProfile+recording.contact.contact_profile_image}}" class="profile_image"> </li> <li ng-if="!recording.contact.contact_profile_image" class="profile_display_30"> <label class="profile_icon" style="background-color: {{recording.contact.contact_profile_color}} !important"> <i class="fa fa-user"></i> </label> </li> <li style="display: inline-block"> <strong ng-if="recording.contact"> {{recording.contact_name}} </strong> <br> <span ng-click="makeCall(recording.caller_id_number)" tooltip-placement="bottom" uib-tooltip="{{tips.call.makecall}} {{recording.contact_number | tel}}"> <span ng-if="recording.contact_number.length<10"> Ext: </span> {{recording.contact_number | tel}} </span> <span ng-if=""> (Conference Call) </span> </li> </ul> </td> <td style="width: 24%" ng-if="recording.noncontact"> <ul class="profile-display"> <li class="profile_display_30"> <label class="profile_icon" style="background-color: {{recording.noncontact.color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="recording.contact_name" style="display: inline-block"> <strong>{{recording.contact_name}}</strong> <br> <span ng-click="makeCall(recording.contact_number)" tooltip-placement="bottom" uib-tooltip="{{tips.call.makecall}} {{recording.contact_number | tel}}"> <span ng-if="recording.contact_number.length<10"> Ext: </span>{{recording.contact_number | tel}}</span> </li> <li ng-if="!recording.contact_name" style="display: inline-block"> <span ng-click="makeCall(recording.contact_number)" tooltip-placement="bottom" uib-tooltip="{{tips.call.makecall}} {{recording.contact_number | tel}}"> <span ng-if="recording.contact_number.length<10"> Ext: </span> {{recording.contact_number | tel}} </span> </li> <li><span style="color: #64d76c" style="display: inline-block" ng-if="recording.contact_name!==\'Conference Call\'"> <i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'callrecording\', recording)" class="fa fa-user-plus"> </i> </span></li> </ul> </td> <td style="width: 12%"> {{recording.start_stamp | toLocalTime | amDateFormat:\'MMM D, YYYY, h:mm a\'}} </td> <td style="width: 11%"> {{formatTime(recording.duration)}} </td> <td class="button-column"> <span ng-if="recording.recording_filepath" ng-click="showAudioModal(recording, \'call-recording\')"> <i class="fa fa-play-circle fa-2x cls-color-green-tkg" tooltip-placement="top" uib-tooltip="{{::tips.recording.playautorecording}}"> </i> </span> <span ng-if="recording.manual_recording_filepath" ng-click="showAudioModal(recording, \'call-recording-manual\')"> <i class="fa fa-play-circle fa-2x cls-color-green-tkg" tooltip-placement="top" uib-tooltip="{{::tips.recording.playmanualrecording}}"> </i> </span> </td> <td class="button-column"> <a ng-if="recording.recording_filepath" href="{{audioUrl(recording.recording_filepath)}}" download> <i class="fa fa-download fa-2x" tooltip-placement="top" uib-tooltip="{{::tips.recording.downloadauto}}"> </i> </a> <a ng-if="recording.manual_recording_filepath" href="{{audioUrl(recording.manual_recording_filepath)}}" download> <i class="fa fa-download fa-2x" tooltip-placement="top" uib-tooltip="{{::tips.recording.downloadmanual}}"> </i> </a> </td> <td class="button-column"> <span ng-show="user.exportType.partner_code == \'hawksoft\'" ng-click="copyRecordingToHawksoft(recording)" tooltip-placement="top" uib-tooltip="{{::tips.recording.copytohawksoft}}"> <img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"> </span> <span ng-show="user.exportType.partner_code == \'generic\'" ng-click="copyRecordingToHawksoft(recording)" tooltip-placement="top" uib-tooltip="{{::tips.recording.copytomanagement}}"> <img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"> </span> </td> <td class="button-column"> <i ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeRecording(recording.call_history_fs_uuid)" class="fa fa-minus-circle fa-2x redfont" tooltip-placement="top" uib-tooltip="{{::tips.recording.remove}}"> </i> </td> </tr> </tbody> </table> </div> <div ng-show="showTable" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"> </ul> </div> </div>'),
a.put("views/calls/add-call-display.html",'<div class="add-call-container"> <div class="on-call-with-container" style="margin-top: -5px"> <span>On call with: </span> <strong class="contact-name cls-color-blue-tkg"> {{call.contact.contact_name_full}} </strong> <strong class="cls-color-blue-tkg" ng-show="!call.contact.contact_name_full"> {{call.params.remote_caller_id_name | callerId}} </strong> </div> <div class="add-call-input-box"> <form name="frmAddCall"> <md-input-container style="width: 100% !important"> <label>Enter phone number here</label> <input name="phoneNumber" add-call-phone-input ng-model="inputNumber" style="text-align: center" autocomplete="off" required> </md-input-container> <div class="add-call-btns-container" style="margin-top: -25px"> <button type="button" class="btn btn-default btn-sm cls-color-blue-tkg" ng-click="addCall() " ng-disabled="frmAddCall.$invalid" tooltip-placement="top" uib-tooltip="Make Call"> <i class="fa fa-phone cls-color-green-tkg" style="margin-right: 10px"></i> Make call </button> <button type="button" class="btn btn-default btn-sm cls-color-blue-tkg" ng-click="toggleAddCallDisplay()()" tooltip-placement="top" uib-tooltip="Cancel"> Cancel <i class="fa fa-times cls-color-red-tkg" style="margin-left: 10px"></i> </button> </div> </form> </div> </div>'),a.put("views/calls/call-box.html",'<call-input-box ng-show="showCallInputBox()" toggle-dial-pad="toggleDialPad" input-number="inputNumber"> </call-input-box> <dial-pad-box ng-show="showDialPad()" toggle-dial-pad="toggleDialPad" input-number="inputNumber"> </dial-pad-box> <on-call-dial-pad-box ng-show="showOnCallDialPad()" toggle-on-call-dial-pad="toggleOnCallDialPad"> </on-call-dial-pad-box> <outgoing-call-box ng-show="showOutgoingCallBox()" call="outgoingCall()"> </outgoing-call-box> <incoming-call-box ng-if="showIncomingCallBox()"> </incoming-call-box> <incoming-call-three-way ng-if="showIncomingCallThreeWay()" call="currentCall"> </incoming-call-three-way> <div id="onCallContainer" ng-if="showOnCallBox()"> <normal-on-call-display call="currentCall" start-time="startTime" ng-show="showNormalOnCallDisplay()"> </normal-on-call-display> <transfer-call-display ng-show="showTransferCallDisplay()" toggle-call-transfer="toggleCallTransfer" call="currentCall"> </transfer-call-display> <add-call-display ng-show="showAddCallDisplay()" toggle-add-call-display="toggleAddCallDisplay" call="currentCall"> </add-call-display> <three-way-call-display ng-if="showThreeWayCallDisplay()" call="currentCall" start-time="startTime"> </three-way-call-display> <queue-incoming-calls-display ng-if="showIncomingCallsQueue()" call="currentCall"> </queue-incoming-calls-display> </div> <on-call-buttons ng-show="showOnCallBox()" toggle-on-call-dial-pad="toggleOnCallDialPad" toggle-call-transfer="toggleCallTransfer" show-transfer-call-display="showTransferCallDisplay" show-three-way-call-display="showThreeWayCallDisplay" toggle-add-call-display="toggleAddCallDisplay" show-add-call-display="showAddCallDisplay"> </on-call-buttons> <video-invite ng-if="showVideoInvite()" end-invite="endVideoInvite()" sender-data="videoInviteSender"> </video-invite>'),a.put("views/calls/call-input-box.html",'<div class="call-input-box"> <form name="frmCall" class="call-input-form"> <md-input-container class="call-input-container"> <label> Enter phone number here </label> <input name="phoneNumber" ng-model="inputNumber" call-phone-input class="call-input"> </md-input-container> </form> <div class="call-buttons"> <button class="btn btn-default" ng-click="makeCall()" ng-show="inputNumber"> <i class="fa fa-phone cls-color-brown-tkg"></i> Call </button> <button class="btn btn-default" ng-click="redialNumber()" ng-show="!inputNumber"> <i class="fa fa-repeat cls-color-brown-tkg"></i> Redial </button> <button class="btn btn-default" ng-disabled="user.needSmsNumber" ng-click="showSmsModal()"> <i class="fa fa-paper-plane cls-color-brown-tkg"></i> Send Text </button> <button class="dial-pad-btn btn btn-default" ng-click="toggleDialPad()()"> <div class="dial-pad-icon-container"> <md-icon> dialpad </md-icon> </div> <div class="dial-pad-txt"> Dial Pad </div> </button> </div> </div>'),a.put("views/calls/confcallsmodal.html",'<html dir="ltr"><head></head><body contenteditable="true"><div class="cls-cont-wizard-RB"> <div class="modal-body" id="modal-body"> <!-- finishedWizardConfCall()  --> <wizard on-finish="none()"> <!--  **************************************************************************************************************************************************************************  --> <wz-step wz-title="Invite People"> <h3> Conference Calls: Invite people</h3> <p></p> <div class="cls-title-cont-modal">Enter names, emails or phone number to invite others to your conference call.</div> <div class="input-group cls-input-group-modal"> <span class="input-group-addon" style="height: 35px" title="Type names of existing contacts to invite via email and text message."><i class="fa fa-user-plus"></i></span> <tags-input ng-model="contactsUsr" display-property="contact_name_full" key-property="contact_uuid" placeholder="Type names" replace-spaces-with-dashes="false" style="margin-top: 0px !important"> <auto-complete source="loadTags($query)" min-length="0" load-on-focus="false" load-on-empty="false" max-results-to-show="10"></auto-complete> </tags-input> </div> <div class="input-group cls-input-group-modal"> <span class="input-group-addon" style="height: 35px" title="Input phone numbers to send invitations via text message."><i class="fa fa-phone"></i></span> <tags-input ng-model="contactsUsr.contact_mobile_number" display-property="contact_mobile_number" key-property="contact_uuid" placeholder="Input phone numbers" replace-spaces-with-dashes="false" style="margin-top: 0px !important"> <auto-complete source="loadTags($query)" min-length="0" load-on-focus="false" load-on-empty="false" max-results-to-show="10"></auto-complete> </tags-input> </div> <div class="input-group cls-input-group-modal"> <span class="input-group-addon" style="height: 35px" title="Enter email addresses to send invitations via email."><i class="fa fa-envelope"></i></span> <tags-input ng-model="contactsUsr.contact_email_address" display-property="contact_email_address" key-property="contact_uuid" placeholder="Enter email addresses" replace-spaces-with-dashes="false" style="margin-top: 0px !important"> <auto-complete source="loadTags($query)" min-length="0" load-on-focus="false" load-on-empty="false" max-results-to-show="10"></auto-complete> </tags-input> </div> <center> <button class="btn btn-primary cls-btn-wzrd" ng-click="regInvities(contactsUsr, contactsUsr.contact_mobile_number, contactsUsr.contact_email_address)" wz-next=""> Next </button> </center> </wz-step> <!--  **************************************************************************************************************************************************************************  --> <wz-step wz-title="Review List"> <h3>Your conference call is now live</h3> <p> Invitations have been sent to the following people:</p> <div> <div class="table-responsive"> <table class="table"> <thead> <tr style="font-weight: bold"> <td>Name/Phone/email</td> <td>Invite sent via</td> <td>Auto call now?</td> </tr> </thead> <tbody> <tr ng-repeat="invite in peopleInvite"> <td>{{invite.invName}}</td> <td> <span ng-show="invite.invUsReg===\'Y\' || invite.invOpc===\'3\'">email </span> <span ng-show="invite.invUsReg===\'Y\' || invite.invOpc===\'2\'"> Text</span> </td> <td> <span ng-if="invite.invUsReg===\'Y\' || invite.invOpc===\'2\'"> <label style="margin-right: 20px"><input type="radio" ng-model="invite" value="Y"> Yes</label> <label><input type="radio" ng-model="invite" value="N"> No</label> </span> <span ng-if="invite.invUsReg!==\'Y\' &amp;&amp; invite.invOpc!==\'2\'">No phone available</span> </td> </tr> </tbody> </table> </div> </div> <center> <button class="btn btn-primary cls-btn-wzrd" type="submit" ng-show="withOutInvit" wz-previous="">Back</button> <button class="btn btn-primary cls-btn-wzrd" type="submit" ng-show="!withOutInvit" wz-next="">Next</button> </center> </wz-step> <!--  **************************************************************************************************************************************************************************  --> <wz-step wz-title="Schedule"> <h3> Schedule this Conferences:</h3> <p></p> <div style="display:inline-block; min-height:290px"> <div uib-datepicker="" ng-model="schedule.date" class="well well-sm" showweeks="false"></div> </div> <div class="cls-inputs-conf-call"> <md-input-container> <label>Name this conference</label> <md-icon> <i class="fa fa-edit fa-2x cls-color-green-tkg"></i></md-icon> <input ng-model="schedule.name" style="width: 200px"> </md-input-container> <br> <md-input-container> <label>Set hour</label> <md-icon> <i class="fa fa-clock-o fa-2x cls-color-green-tkg"></i></md-icon> <input ng-model="schedule.hour" style="width: 200px" type="time"> </md-input-container> <br> <md-input-container> <label>Set time</label> <md-icon> <i class="fa fa-hourglass-half fa-2x cls-color-green-tkg"></i></md-icon> <md-select ng-model="schedule.time"> <md-option><em>10</em></md-option> <md-option>30</md-option><md-option>60</md-option><md-option>90</md-option><md-option>120</md-option> </md-select> </md-input-container> </div> <center> <button class="btn btn-success cls-btn-wzrd" type="submit" wz-next="makeConference(schedule, peopleInvite, 53)"> Call Now </button> </center> </wz-step> </wizard> </div> </div></body></html>'),a.put("views/calls/conference.html",'<style>.btnActive {\n        color: green;\n        background: #e1e1e1 !important;\n    }\n    .btnREC {\n        background: red;\n        color: white;\n        border: black solid 1px;\n    }</style> <div class="conference-call-container" ng-controller="ConferenceCallCtrl"> <!-- <div ng-if="loading" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px;"> --> <!-- <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i><br /> --> <!-- Loading... --> <!-- </div> --> <div class="row audio-conference-row"> <h3 class="audio-conference-header">Conference Calls</h3> <md-input-container style="margin-left:30px; margin-right: 30px"> <label>Conference Caller-ID</label> <md-select ng-model="didNumber"> <md-option ng-repeat="user in userContactsOnly" ng-value="user.phones[0].phone_number"> {{user.phones[0].phone_number | tel}} </md-option> </md-select> </md-input-container> <p class="cls-dial-number">Your dial-in number is {{dialInNumber | tel2}}</p> </div> <md-content md-theme="altTheme"> <md-subheader class="md-primary"> <div class="row"> <div class="col-lg-2" style="margin-top: 5px"> <button class="btn btn-primary btn-md startbtn" ng-click="startConference()" ng-disabled="onCallWith && !onConferenceCall" tooltip-placement="bottom-left" uib-tooltip="{{startStopConfToolTip}}"> <i class="fa {{iconStartConf}}"></i> <strong>{{startStopConfBtn}}</strong> </button> </div> <div class="col-lg-4"> <md-input-container style="width: 100% !important; margin-top: 5px"> <label>Enter phone numbers for all participants</label> <input id="participants" ng-model="participants" style="text-align: center" comma-tel> </md-input-container> </div> <div class="col-lg-4 cls-round-buttons"> <button class="btn btn-link {{shakingIcon}}" ng-class="{btnActive : clickBtn1}" ng-click="buttonsAction(1)" ng-disabled="!onConferenceCall || !participants" tooltip-placement="bottom" uib-tooltip="Dial participants"> </button> <button class="btn btn-link" ng-class="{btnActive : clickBtn2}" ng-click="buttonsAction(2)" ng-disabled="!onConferenceCall || confMembers.length<2" tooltip-placement="bottom" uib-tooltip="{{toolTipScreenS}}"> <i class="mdi mdi-vector-arrange-above mdi-24px"></i> </button> <button class="btn btn-link" ng-class="{btnREC : clickBtn3}" ng-click="buttonsAction(3)" ng-disabled="!onConferenceCall || confMembers.length<2" tooltip-placement="bottom" uib-tooltip="{{toolRecording}}" style="text-decoration: none; font-weight: bold"> REC </button> <button class="btn btn-link" ng-class="{btnActive : clickBtn4}" ng-click="buttonsAction(4)" ng-disabled="!onConferenceCall || confMembers.length<2" tooltip-placement="bottom" uib-tooltip="{{toolMute}}"> <i class="mdi {{iconMuteCC}}"></i> </button> <button class="btn btn-link" ng-class="{btnActive : clickBtn5}" ng-click="buttonsAction(5)" ng-disabled="!onConferenceCall || confMembers.length<2" tooltip-placement="bottom" uib-tooltip="{{toolLock}}"> <i class="mdi {{iconLock}}"></i> </button> </div> <div class="col-lg-1"> <center ng-show="showCounterTime"> <strong style="color: gray; font-size: 30px"> <timer interval="1000" start-time="eventTimer.startConf"> {{hhours}}:{{mminutes}}:{{sseconds}} </timer> </strong> </center> </div> </div> <div class="row" ng-show="showScreenShare"> <md-list-item class="md-3-line" ng-controller="ScreenShareCtrl"> <div class="row"> <div class="col-lg-8"> <div class="input-group"> <span class="input-group-addon" id="basic-addon3"> {{ssUrl}} </span> <input class="form-control" type="text" ng-keyup="isRoomAvailable(conference.room)" id="conferenceroom" ng-model="conference.room" ng-init="conference.room=videoConference.name" placeholder="Choose a custom conference room name" aria-describedby="basic-addon3"> <span class="input-group-addon" ng-if="urlNotAvailable"> {{availMessage}} </span> <span class="input-group-addon" ng-if="!urlNotAvailable"> <i class="fa fa-check" style="color: green" tooltip-placement="top" uib-tooltip="{{tips.video.roomsuccess}}"></i> </span> </div> </div> <div class="col-lg-4 cls-round-buttons"> <button class="btn btn-link" ng-disabled="urlNotAvailable" ng-click="clickHandler()" tooltip-placement="bottom" uib-tooltip="Copy link to Clipboard" style="margin-top: -10px"> <i class="mdi mdi-clipboard mdi-24px"></i> </button> <button class="btn btn-link" ng-disabled="urlNotAvailable" ng-click="joinConference()" tooltip-placement="bottom" uib-tooltip="Start screen share" style="margin-top: -10px"> <i class="mdi mdi-vector-difference-ba mdi-24px"></i> </button> </div> </div> </md-list-item> </div> </md-subheader> <md-list layout-padding> <md-list-item class="md-3-line"> <table class="table"> <thead> <tr style="font-weight: bold; font-size: 17px"> <th>Name</th> <th>Caller Id #</th> <th>Mute</th> <th>Hangup</th> </tr> </thead> <tbody> <tr ng-repeat="member in confMembers" style="font-size: 15px"> <td>{{searchContactInfo(member.cidNumber).name;}}</td> <td>{{member.cidNumber | tel}}</td> <td style="font-size: 22px !important"> <span class="fa-stack" ng-click="toggleUserMute(member)" style="margin-bottom: 15px"> <i class="fa fa-volume-off fa-stack-1x"></i> <i class="fa fa-ban fa-stack-2x text-danger" ng-show="userIsMuted(member)"> </i> </span> </td> <td> <i class="fa fa-2x fa-phone end-conf-call-ico" ng-if="member.cidNumber !== user.user_ext" ng-click="hangupUser(member.userNumber)"> </i> </td> </tr> </tbody> </table> </md-list-item> </md-list> </md-content> </div>'),a.put("views/calls/conferencecalls-Ver1.html",'<style>.opcVideoCallActivo a i {\n        color: #0073a5;\n    }</style> <div ng-include="\'header.html\'"></div> <div ng-include="\'leftbar.html\'"></div> <div style="background-color: #E7E9E3; padding-top: 0"> <div class="row cls-header-nav-bar-video-call"> <div class="col-lg-8 col-md-6 col-sm-5"> <div class="input-group cls-input-group-header-video-call" ng-show="textBoxNotify"> <input type="text" ng-model="participant.contact_name_given" uib-typeahead="contact.contact_name_given + \' \' + contact.contact_name_family for contact in userContacts | filter:$viewValue | limitTo:8" typeahead-on-select="confCallsNotify($item, $model, $label)" class="form-control" placeholder="Select an contact..."> <!--\n                <tags-input ng-model="userContacts.contact_user_uuid"placeholder="Whrite and select an contact">\n                    <auto-complete source="loadTags($query)"></auto-complete> \n                </tags-input>\n                 --> <span class="input-group-addon" tooltip-placement="bottom" uib-tooltip="Select an contact to add in the conference"><i class="fa fa-users"></i></span> </div> <div class="cls-mnu-functions-video-call" data-toggle="buttons" ng-hide="textBoxNotify"> <nav> <ul> <li ng-class="{opcVideoCallActivo : micActive}"><a href="" ng-click="opcActiveTools(\'mic\')"><i class="fa fa-microphone"></i></a></li> <li ng-class="{opcVideoCallActivo : cameraActive}"><a href="" ng-click="opcActiveTools(\'cam\')"><i class="fa fa-video-camera"></i></a></li> <!-- <li ng-class="{opcVideoCallActivo : arrActive}"><a href="" ng-click="opcActiveTools(\'arr\')"><i class="fa fa-arrows-alt"></i></a></li>\n                        <li ng-class="{opcVideoCallActivo : deskActive}"><a href="" ng-click="opcActiveTools(\'des\')"><i class="fa fa-desktop"></i></a></li>  --> <li ng-class="{opcVideoCallActivo : headActive}"><a href=""><i class="fa fa-headphones"></i></a></li> </ul> </nav> </div> </div> <div class="col-lg-4 col-md-6 col-sm-5 cls-header-video-call-mnu-opc"> <nav> <ul> <li ng-class="{opcVideoCallActivo : textBoxNotify}"><a href="" ng-click="opcActiveTools(\'tex\')"><i class="fa fa-user-plus"></i></a></li> <li ng-class="{opcVideoCallActivo : chatVidCall}"><a href="" ng-click="opcActiveTools(\'cha\')"><i class="fa fa-wechat"></i></a></li> <li ng-class="{opcVideoCallActivo : chkCualq}"><a href="" ng-click="opcActiveTools(\'chk\')"><i class="fa fa-dot-circle-o"></i></a></li> <li ng-class="{opcVideoCallActivo : settingVidCall}"><a href="" ng-click="opcActiveTools(\'set\')"><i class="fa fa-gears"></i></a></li> </ul> </nav> </div> </div> <div class="row container cls-cont-participants-video-call"> <!--********** CONFERENCE CALLS PARTICIPANTS  **********--> <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12"> <div class="thumbnail"> <div class="cls-settings-bg-profile-status cls-thumbnail-conf-calls"> <img src="{{pathImgProfile + user.profile_image}}" ng-show="user.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" ng-show="!user.profile_image">{{user.contact_name_given.substring(0,1) + user.contact_name_family.substring(0,1)}}</div> </div> <div class="caption"> <hr> <label>{{user.contact_name_given +\' \'+user.contact_name_family}}</label> <span class="pull-right cls-ctrls-conf-calls"> <a href="" ng-click=""><i class="fa fa-microphone"></i></a> <a href="" ng-click=""><i class="fa fa-video-camera"></i></a> <!-- <a href="" ng-click=""><i class="fa fa-user-times"></i></a> --> </span> </div> </div> </div> <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" ng-repeat="partici in confCallsPartic"> <div class="thumbnail"> <div class="cls-settings-bg-profile-status cls-thumbnail-conf-calls"> <img src="{{pathImgProfile + partici.profile_image}}" ng-show="partici.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" ng-show="!partici.profile_image">{{partici.contact_name_given.substring(0,1) + partici.contact_name_family.substring(0,1)}}</div> </div> <div class="caption"> <hr> <label>{{partici.contact_name_given +\' \'+ partici.contact_name_family}}</label> <span class="pull-right cls-ctrls-conf-calls"> <a href="" ng-click=""><i class="fa fa-microphone"></i></a> <a href="" ng-click=""><i class="fa fa-video-camera"></i></a> <a href="" ng-click="confCallsDropContact(partici.contact_user_uuid)"><i class="fa fa-user-times"></i></a> </span> </div> </div> </div> </div> <div class="row"> </div> </div> <!--******************** CONFERENCE CALLS CHAT  ********************--> <div class="cls-video-call-chat" ng-show="chatVidCall"> <div class="row"> <!--********** header chat  **********--> <uib-tabset active="active" justified="true"> <!--\n                <uib-tab index="0">\n                    <uib-tab-heading>\n                        <i class="fa fa-users cls-color-green-tkg" style="margin-right: 10px;"></i>\n                        Members\n                    </uib-tab-heading>\n                    <div class="cls-video-call-cont-chat">\n                        <span>Members List</span>\n                    </div>\n                </uib-tab>\n                --> <uib-tab index="1"> <uib-tab-heading> <i class="fa fa-commenting cls-color-green-tkg" style="margin-right: 10px"></i>Chat </uib-tab-heading> <div class="cls-video-call-cont-chat"> <span>Content Chat</span> </div> <div class="cls-video-call-chat-type-tex-div"> <div> <textarea class="form-control"></textarea> </div> </div> </uib-tab> </uib-tabset> </div> <div class="row"> <!--********** body participants  **********--> </div> <div class="row"> <!--********** body chat  **********--> </div> </div>'),a.put("views/calls/conferencecalls.html",'<style>.opcVideoCallActivo a i {\n        color: #0073a5;\n    }</style> <div style="background-color: #E7E9E3; padding-top: 0"> <div class="row cls-header-nav-bar-video-call"> <div class="col-lg-8 col-md-6 col-sm-5"> <div class="input-group cls-input-group-header-video-call" ng-show="textBoxNotify"> <input type="text" ng-model="participant.contact_name_given" uib-typeahead="contact.contact_name_given + \' \' + contact.contact_name_family for contact in userContacts | filter:$viewValue | limitTo:8" typeahead-on-select="confCallsNotify($item, $model, $label)" class="form-control" placeholder="Select an contact..."> <span class="input-group-addon" tooltip-placement="bottom" uib-tooltip="Select an contact to add in the conference"><i class="fa fa-users"></i></span> </div> <div class="cls-mnu-functions-video-call" data-toggle="buttons" ng-hide="textBoxNotify"> <nav id="nav-conf-call-left"> <ul> <li ng-class="{opcVideoCallActivo : micActive}" ng-mousemove=""><a href="" ng-click="opcActiveTools(\'mic\')"><i class="fa fa-desktop"></i></a></li> <!-- <li ng-class="{opcVideoCallActivo : cameraActive}"><a href="" ng-click="opcActiveTools(\'cam\')"><i class="fa fa-video-camera"></i></a></li> --> <!-- <li ng-class="{opcVideoCallActivo : arrActive}"><a href="" ng-click="opcActiveTools(\'arr\')"><i class="fa fa-arrows-alt"></i></a></li>  --> <!-- <li ng-class="{opcVideoCallActivo : deskActive}"><a href="" ng-click="opcActiveTools(\'des\')"><i class="fa fa-desktop"></i></a></li>  --> <!-- <li ng-class="{opcVideoCallActivo : headActive}"><a href=""><i class="fa fa-headphones"></i></a></li>  --> </ul> </nav> </div> </div> <div class="col-lg-4 col-md-6 col-sm-5 cls-header-video-call-mnu-opc"> <nav> <ul> <li ng-class="{opcVideoCallActivo : settingVidCall}"><a href="" ng-click="opcActiveTools(\'set\')"><i class="fa fa-gear"></i></a></li> <li ng-class="{opcVideoCallActivo : textBoxNotify}"><a href="" ng-click="opcActiveTools(\'tex\')"><i class="fa fa-user-plus"></i></a></li> <li ng-class="{opcVideoCallActivo : chkCualq}"><a href="" ng-click="opcActiveTools(\'chk\')"><i class="fa fa-dot-circle-o"></i></a></li> <li ng-class="{opcVideoCallActivo : muteAll}"><a href="" ng-click="opcActiveTools(\'mut\')"><i class="fa fa-microphone"></i></a></li> <li ng-class="{opcVideoCallActivo : chatVidCall}"><a href="" ng-click="opcActiveTools(\'cha\')"><i class="fa fa-comments"></i></a></li> </ul> </nav> </div> </div> <div class="row container cls-cont-participants-video-call"> <!--********** CONFERENCE CALLS PARTICIPANTS  **********--> <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12"> <div class="thumbnail"> <div class="cls-settings-bg-profile-status cls-thumbnail-conf-calls"> <img src="{{pathImgProfile + user.profile_image}}" ng-show="user.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" ng-show="!user.profile_image">{{user.contact_name_given.substring(0,1) + user.contact_name_family.substring(0,1)}}</div> </div> <div class="caption"> <hr> <label>{{user.contact_name_given +\' \'+user.contact_name_family}}</label> <div class="btn-group pull-right"> <button type="button" class="btn btn-default btn-sm"><i class="fa fa-microphone"></i></button> <button type="button" class="btn btn-default btn-sm"><i class="fa fa-video-camera"></i></button> </div> <!-- <span class="pull-right cls-ctrls-conf-calls">\n                    <a href="" ng-click=""><i class="fa fa-microphone"></i></a>\n                    <a href="" ng-click=""><i class="fa fa-video-camera"></i></a>\n                    <a href="" ng-click=""><i class="fa fa-user-times"></i></a>\n                </span>     --> </div> </div> </div> <!--\n        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" ng-repeat="partici in userContacts | limitTo: 6">\n            <div class="thumbnail">\n                <div class="cls-settings-bg-profile-status cls-thumbnail-conf-calls">\n                    <img src="{{pathImgProfile + partici.profile_image}}" ng-show="partici.profile_image" class="cls-settings-img-profile" alt=""/>\n                    <div class="cls-settings-img-profile-null" ng-show="!partici.profile_image" >{{partici.contact_name_given.substring(0,1) + partici.contact_name_family.substring(0,1)}}</div>\n                </div>\n                <div class="caption">\n                <hr />\n                <label>{{partici.contact_name_given +\' \'+ partici.contact_name_family.substr(0, 1) + \'.\'}}</label>\n                <div class="btn-group pull-right">\n                    <button type="button" class="btn btn-default btn-xs cls-btn-conf-call"><img ng-src="images/icons/decline-icon.9af38d04.png" class="cls-img-call-history" height="15" width="15"></button>\n                    <button type="button" class="btn btn-default btn-sm"><i class="fa fa-microphone"></i></button>\n                    <button type="button" class="btn btn-default btn-sm"><i class="fa fa-video-camera"></i></button>\n                  </div>\n                </div>\n            </div>\n        </div>\n        --> <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" ng-controller=""> <div class="thumbnail" ng-repeat="partici in peopleInvite"> <div class="cls-settings-bg-profile-status cls-thumbnail-conf-calls"> <img src="{{pathImgProfile + partici.profile_image}}" ng-show="partici.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" ng-show="!partici.profile_image">{{partici.contact_name_given.substring(0,1) + partici.contact_name_family.substring(0,1)}}</div> </div> <div class="caption"> <hr> <label>{{partici.invName}}</label> <div class="btn-group pull-right"> <button type="button" class="btn btn-default btn-xs cls-btn-conf-call"><img ng-src="images/icons/decline-icon.9af38d04.png" class="cls-img-call-history" height="15" width="15"></button> <button type="button" class="btn btn-default btn-sm"><i class="fa fa-microphone"></i></button> <button type="button" class="btn btn-default btn-sm"><i class="fa fa-video-camera"></i></button> </div> </div> </div> </div> </div> <div class="row"></div> </div> <!--******************** CONFERENCE CALLS CHAT  ********************--> <div class="cls-conference-call-chat" ng-show="chatVidCall"> <div class="row"> <!--********** header chat  **********--> </div> <div class="row"> <!--********** body participants  **********--> </div> <div class="cls-conference-call-chat-type-tex-div"> <textarea class="form-control"></textarea> </div> </div>'),a.put("views/calls/dial-pad-box.html",'<div class="dial-pad"> <md-input-container class="dial-pad-input"> <input name="phoneNumber" ng-model="inputNumber" phone-input ng-disabled="true"> </md-input-container> <div class="phone"> <table class="table"> <tr ng-repeat="row in pad"> <td ng-repeat="key in row"> <button class="btn btn-dial-pad" ng-mousedown="press(key)" ng-mouseleave="release(key)" ng-mouseup="release(key)" ng-click="addNumber(key)"> <span> {{key}} </span> <p ng-repeat="val in lttBtn" ng-if="key===val.id"> {{val.val}} </p> </button> </td> </tr> <tr> <td> <center> <button class="btn btn-success option-btn" ng-click="makeCall()" ng-disabled="!inputNumber" tooltip-placement="top" uib-tooltip="Call"> <i class="fa fa-phone"></i> </button> </center> </td> <td> <center> <button class="btn btn-warning option-btn" ng-click="redialNumber()" tooltip-placement="top" uib-tooltip="Redial"> <i class="fa fa-repeat"></i> </button> </center> </td> <td> <center> <button class="btn btn-primary" ng-click="removeNumber()" tooltip-placement="top" uib-tooltip="Erase the numbers "> <i class="fa fa-eraser"></i> </button> </center> </td> <td> <center> <button class="btn btn-default" ng-click="toggleDialPad()()" tooltip-placement="top" uib-tooltip="Hide dial pad"> <img src="images/icons/dial-pad.b411ed09.png" width="20" height="20" alt=""> </button> </center> </td> </tr> </table> </div> </div>'),a.put("views/calls/incoming-call-box.html",'<div id="incomingCall"> <div class="incoming-call-animations"> <i class="mdi mdi-phone-incoming mdi-48px faa-ring animated" ng-click="answerCall()" style="color: #2ECCFA; margin-top: 24px"> </i> <i class="fa fa-long-arrow-left faa-passing-reverse animated" style="color: #3ADF00; font-size: 50px"> </i> <i class="fa fa-user-circle-o" ng-show="!call.contact.contact_profile_image" style="color: #2E9AFE; font-size: 60px"> </i> <div class="cls-circle-arround-1" ng-if="call.contact.contact_profile_image"> <img ng-src="{{ pathImgProfile + call.contact.contact_profile_image }}" class="cls-img-incomingcall" alt=""> </div> </div> <div class="incoming-call-info"> <center> <strong> <p ng-if="call.contact.contact_name_full"> {{call.contact.contact_name_full}} </p> </strong> <label> {{call.params.remote_caller_id_name | callerId}} </label> </center> </div> <div class="incoming-call-buttons"> <button class="btn-link mdi mdi-phone-incoming cls-color-green-tkg" ng-click="answerCall(call)" tooltip-placement="top" uib-tooltip="Answer Call"> </button> <button class="btn-link mdi mdi-voicemail cls-color-blue-tkg" ng-click="sendToVoicemail(call)" tooltip-placement="top" uib-tooltip="Send to voicemail"> </button> <button class="btn-link mdi mdi-phone-missed cls-color-red-tkg" ng-click="declineCall(call)" tooltip-placement="top" uib-tooltip="Decline call"> </button> </div> </div>'),a.put("views/calls/incoming-call-three-way.html",'<div id="incomingCall"> <div style="padding: 5px 0px 5px 0px"> <center style="font-size: 20px"> <span> On call with: </span> <strong class="cls-color-blue-tkg"> {{call.contact.contact_name_full}} </strong> <strong class="cls-color-blue-tkg" ng-show="!call.contact.contact_name_full"> {{call.params.remote_caller_id_number | tel}} </strong> </center> </div> <div class="incoming-call-animations"> <i class="mdi mdi-phone-incoming mdi-36px faa-ring animated pull-right" style="color: #2ECCFA; font-size: 40px"> </i> <i class="fa fa-long-arrow-left faa-passing-reverse animated" style="color: #3ADF00; font-size: 40px"> </i> <i class="fa fa-user-circle-o pull-left" ng-show="!incomingCall.contact.contact_profile_image" style="color: #2E9AFE; font-size: 50px"> </i> <div class="cls-circle-arround-1-3way pull-left" ng-if="incomingCall.contact.contact_profile_image"> <img ng-src="{{ pathImgProfile + incomingCall.contact.contact_profile_image }}" class="cls-img-incomingcall-3way" alt=""> </div> </div> <div> <center> <strong> {{incomingCall.contact.contact_name_full}} </strong> <label> {{incomingCall.params.remote_caller_id_number | tel}} </label> </center> </div> <div class="incoming-call-buttons"> <button class="btn-link mdi mdi-phone-incoming cls-color-green-tkg" ng-click="answerCall(incomingCall)" ng-if="!onConferenceCall" tooltip-placement="top" uib-tooltip="Answer Call"> </button> <button class="btn-link mdi mdi-voicemail cls-color-blue-tkg" ng-click="sendToVoicemail(call)" tooltip-placement="top" uib-tooltip="Send to voicemail"> </button> <button class="btn-link mdi mdi-phone-missed cls-color-red-tkg" ng-click="declineCall(incomingCall)" tooltip-placement="top" uib-tooltip="Decline call"> </button> </div> </div>'),a.put("views/calls/normal-on-call-display.html",'<div class="on-call-avatar clearfix"> <div class="call-timer"> <timer interval="1000" start-time="call.startTime"> {{mminutes}}:{{sseconds}} </timer> </div> <div class="top-container"> <div class="conference-avatar" ng-show="call.isConferenceCall" style="margin-top: -15px"> <span class="fa-stack fa-3x cls-color-blue-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> </div> <div class="call-mate-container" ng-if="!call.isConferenceCall"> <div class="cls-circle-arround-2" ng-show="call.contact.contact_profile_image"> <div class="cls-circle-arround-1"> <img ng-src="{{ pathImgProfile + call.contact.contact_profile_image }}" class="cls-img-incomingcall"> </div> </div> <div class="anon-user-container" ng-show="!call.contact.contact_profile_image"> <i class="fa fa-user-circle-o"></i> </div> </div> </div> <div class="bottom-container"> <div class="cls-incomingcall-name"> <span ng-show="call.contact"> {{call.contact.contact_name_full}} </span> <span ng-show="!call.contact && !call.isConferenceCall"> Contact Unknown </span> <span ng-show="call.isConferenceCall" style="font-size: 20px !important"> Conference call </span> </div> <div class="cls-incomingcall-number"> {{call.params.remote_caller_id_name | callerId}} </div> </div> </div>'),
a.put("views/calls/on-call-box.html",""),a.put("views/calls/on-call-buttons.html",'<div class="cls-oncall-buttons-left-bar"> <!-- ***** HANG UP  ***** --> <button class="btn btn-link btn-sm mdi mdi-phone-hangup cls-color-red-tkg" ng-click="hangUp()" tooltip-placement="top" uib-tooltip="Hang up"> </button> <!-- *****  MUTE  ***** --> <button class="btn btn-link btn-sm mdi mdi-headset cls-color-teal-tkg" ng-click="muteAllCalls()" ng-show="!muteActive()" tooltip-placement="top" uib-tooltip="Mute" style="margin: 0px !important; padding: 0px !important"> </button> <button class="btn btn-link btn-sm mdi mdi-headset-off cls-color-teal-tkg" ng-click="unMuteAllCalls()" ng-show="muteActive()" tooltip-placement="top" uib-tooltip="Unmute" style="margin: 0px !important; padding: 0px !important"> </button> <!-- ***** RECORDING  ***** --> <button ng-show="!recordingActive()" class="btn btn-link btn-sm mdi mdi-record-rec cls-color-teal-tkg" ng-click="recordCall()" tooltip-placement="top" uib-tooltip="Start Recording" style="padding: 0 !important"> </button> <button ng-show="recordingActive()" class="btn btn-link btn-sm mdi mdi-record-rec cls-color-teal-tkg" ng-click="stopRecording()" tooltip-placement="top" uib-tooltip="Stop Recording" style="padding: 0 !important; color: red"> </button> <!-- ***** HOLD  ***** --> <button class="btn btn-link btn-sm mdi mdi-phone-paused cls-color-teal-tkg" ng-click="holdCall()" ng-hide="onHold() || showThreeWayCallDisplay()()" tooltip-placement="top" uib-tooltip="Hold"> </button> <button class="btn btn-link btn-sm mdi mdi-phone-paused cls-color-teal-tkg" ng-click="unHoldCall()" ng-hide="!onHold() || showThreeWayCallDisplay()()" tooltip-placement="top" uib-tooltip="Unhold" style="color: orange"> </button> <!-- ***** TRANSFER CALL  ***** --> <button class="btn btn-link btn-sm mdi mdi-phone-forward cls-color-teal-tkg" ng-click="toggleCallTransfer()()" ng-hide="showAddCallDisplay()() || showThreeWayCallDisplay()() || isConferenceCall()" ng-class="{\'cls-color-yellow-tkg\' : showTransferCallDisplay()()}" tooltip-placement="top" uib-tooltip="{{showTransferCallDisplay()() ? \'Cancel Transfer Call\' : \'Transfer Call\'}}"> </button> <!-- ***** NEW CALL  ***** --> <button class="btn btn-link btn-sm mdi mdi-phone-plus cls-color-teal-tkg" ng-click="toggleAddCallDisplay()()" ng-disabled="" ng-hide="showTransferCallDisplay()()|| showThreeWayCallDisplay()() || isConferenceCall()" ng-class="{\'cls-color-yellow-tkg\' : showAddCallDisplay()()}" tooltip-placement="" uib-tooltip="{{showAddCallDisplay()() ?\'Cancel Add Call\' :  \'Add Call\'}}"> </button> <!-- ***** MERGE CALL  ***** --> <button class="btn btn-link btn-sm mdi mdi-call-merge cls-color-teal-tkg" ng-click="mergeCalls()" ng-show="showThreeWayCallDisplay()() && !isConferenceCall()" tooltip-placement="top" uib-tooltip="Merge calls"> </button> <!-- ***** DIAL PAD  ***** --> <button class="btn btn-link btn-sm mdi mdi-dialpad cls-color-teal-tkg" ng-click="toggleOnCallDialPad()()" tooltip-placement="top" uib-tooltip="Show Dial Pad" style="margin: 0px !important; padding: 0px !important"> </button> <!-- ***** QUEUE INCOMING CALLS  *****   --> <button class="btn btn-link btn-sm pull-right" ng-click="calls.showListIncomingCalls()" ng-show="calls.queueIncomingCalls.length > 1" tooltip-placement="top" uib-tooltip="Show queue Incoming calls" style=""> <span class="badge cls-color-green-tkg" style="background-color: white !important"> {{calls.queueIncomingCalls.length}} <i class="fa fa-bell faa-ring animated" style="font-size: 18px; margin-left: 10px"></i> </span> </button> </div>'),a.put("views/calls/on-call-dial-pad-box.html",'<div class="on-call-dial-pad"> <md-input-container class="on-call-dial-pad-input"> <input name="numberDTMF" ng-model="calls.onCallDialPad" ng-disabled="true"> </md-input-container> <div class="phone"> <table class="table"> <tr ng-repeat="row in pad"> <td ng-repeat="key in row"> <center> <button class="btn btn-dial-pad" ng-mousedown="press(key)" ng-mouseleave="release(key)" ng-mouseup="release(key)" ng-click="pressKey(key)"> <span> {{key}} </span> <p ng-repeat="val in lttBtn" ng-if="key===val.id"> {{val.val}} </p> </button> </center> </td> </tr> <tfoot> <tr> <td></td> <td> <center> <button class="btn btn-default hide-dial-pad-btn" ng-click="toggleOnCallDialPad()()" tooltip-placement="top" uib-tooltip="Hide dial pad"> <img src="images/icons/dial-pad.b411ed09.png" width="20" height="20" alt=""> Hide Dial Pad </button> </center> </td> <td></td> </tr> </tfoot> </table> </div> </div>'),a.put("views/calls/oncall.html",'<!-- <div modaldraggable ng-controller="CallsCtrl" class="cls-modal-on-call">    --> <div class="cls-modal-on-call"> <div class="modal-header"> <div class="btn-group pull-right"> <button class="btn btn-link" title="Hide" ng-click="minWindow()" ng-show="!showDialPad" style="text-decoration: none">Hide</button> <button class="btn btn-link" title="Hide Dial Pad" ng-click="showDialPad=!showDialPad" ng-show="showDialPad" style="text-decoration: none">Dial Pad</button> </div> </div> <div class="modal-body" id="modal-body"> <!-- ******************** ADD A CALL ********************* --> <div class="cls-oncall-three-way" ng-show="showThreeWay && !ringProcess"> <div class="cls-input-transfer"> <form name="frmAddCall"> <input type="text" id="txtContactSel" uib-typeahead="contsUsr as contsUsr.contact_name_full for contsUsr in userContacts | filter:{contact_name_full:$viewValue} | limitTo:8" ng-model="contsUsr.contSel" ng-click="setFocus(\'addCall\')" class="form-control" required> <div class="btn-group pull-right" role="group" aria-label="..."> <button type="button" class="btn btn-link cls-btn-transfer" ng-click="addCallFunct(contsUsr.contSel, vm.content.data.id); " ng-disabled="frmAddCall.$invalid" tooltip-placement="top" uib-tooltip="Call"><i class="fa fa-phone cls-color-green-tkg" style="font-size: 22px"></i></button> <button type="button" class="btn btn-link cls-btn-transfer" ng-click="showThreeWay=!showThreeWay" tooltip-placement="bottom" uib-tooltip="Cancel"><i class="fa fa-times" style="font-size: 22px; margin-left: 5px"></i></button> </div> </form> </div> </div> <div ng-hide="add3Call || showDialPad"> <center> <strong class="cls-color-blue-tkg" style="font-size: 20px">On call with</strong> <div><sapan class="cls-incomingcall-name"><span ng-hide="vm.content.data.name"></span>{{vm.content.data.name}}</sapan> <span class="cls-incomingcall-company"></span> </div> <div class="cls-incomingcall-company">{{vm.content.data.phone_number}}</div> </center> </div> <!-- ng-show="" --> <div class="cls-cont-img-incomingcall"> <center> <div ng-show="!showDialPad && !add3Call"> <div class="cls-circle-arround-3"> <div class="cls-circle-arround-2"> <div class="cls-circle-arround-1"> <img ng-src="{{pathImgProfile + vm.content.data.avatar}}" ng-show="vm.content.data.avatar" class="cls-img-incomingcall" alt=""> <label class="cls-img-incomingcall-null" ng-hide="vm.content.data.avatar"><i class="fa fa-volume-control-phone"></i></label> </div> </div> </div> </div> <div ng-show="showDialPad"> <div ng-include="\'views/modals/dialpadmodalOnCall.html\'"></div> </div> </center> </div> <div class="cls-incomingcall-oncall" ng-show="add3Call"> <div ng-show="!showDialPad"> <ul class="list-group"> <li class="list-group-item list-group-item-info" ng-show="!threeWayCall"> <strong style="font-size: 20px">{{vm.content.data.name}}</strong> <div style="float: right !important"> <strong class="pull-left" id="vis2" style="margin-right: 10px">00:00:00</strong> <button class="btn btn-link btn-sm cls-color-red-tkg"><img src="images/icons/end-call-red-icon.26088626.png" class="cls-color-red-tkg" width="20" height="20" alt=""></button> </div> <div>{{vm.content.data.phone_number}}</div> </li> <li class="list-group-item list-group-item-success" ng-show="!threeWayCall" ng-repeat="contc in contactSel"> <strong style="font-size: 20px">{{contc.name}}</strong> <i class="fa fa-spinner fa-pulse fa-2x fa-fw cls-color-blue-tkg" ng-show="!threeWayCall"></i> <div style="float: right !important"> <button class="btn btn-link btn-sm cls-color-red-tkg" ng-click="questionRichard()"><img src="images/icons/end-call-red-icon.26088626.png" class="cls-color-red-tkg" width="20" height="20" alt=""></button> </div> <br> <span>{{contc.phone}}</span> </li> <!--********* LIST ON CALLS **********--> <li class="list-group-item list-group-item-info" ng-show="threeWayCall" ng-repeat="callThree in countCalls"> <div class="row"> <div class="col-lg-6"> <strong style="font-size: 20px">{{callThree.name}}</strong> <br> <span>{{callThree.phoneOpposite}}</span> </div> <div class="col-lg-3"> <strong style="margin-right: 10px"><timer interval="1000">{{hours}}:{{minutes}}:{{seconds}}</timer></strong> </div> <div class="col-lg-3"> <div class="btn-group pull-right" role="group" aria-label="..."> <button type="button" class="btn btn-link btn-sm cls-color-red-tkg" ng-click="hangUpdMultiCalls(callThree.callID); add3Call=!add3Call"><img src="images/icons/end-call-red-icon.26088626.png" class="cls-color-red-tkg" width="20" height="20" alt=""></button> <button type="button" class="btn btn-link btn-sm" ng-click="holdMultiCalls(callThree.callID, showHolded); showHolded=!showHolded" ng-init="showHolded=true ?  callsHolded(callThree.callID)  || vm.content.data.id === callThree.callID   : false"><i class="fa fa-pause fa-stack-1x"></i><i ng-class="\'fa fa-ban fa-stack-2x text-danger\'" ng-show="showHolded " style="margin-top: -3px"></i></button> </div> </div> </div> </li> </ul> </div> </div> </div> <!--\n    <div class="cls-oncall-chrono-dialpad" ng-show="!add3Call || showDialPad">\n        <strong class="pull-left" id="vis">00:00:00</strong>\n        <span class="pull-right" ng-click="showDialPad=!showDialPad" style="margin-top: -15px !important;"  tooltip-placement="left" uib-tooltip="Show Dial Pad"><img src="images/icons/dial-pad30x30.f4ecc84a.png" alt=""/></span>\n    </div>\n    --> <div class="modal-footer" ng-show="!showDialPad"> <center> <div class="cls-oncall-buttons"> <!-- <strong class="pull-left" id="vis" style="margin-top: 10px;">00:00:00</strong>  --> <timer interval="1000">{{hours}}:{{minutes}}:{{seconds}}</timer> <div class="btn-group"> <!-- ***** HANG UP  ***** --> <button class="btn btn-link btn-sm" ng-click="hangupCall(vm.content.data.id)" onclick="stopp()" id="unlikCall" tooltip-placement="top" uib-tooltip="Hang up"> <img src="images/icons/end-call-red-icon.26088626.png" width="24" height="24" alt=""> </button> </div> <div class="btn-group"> <!-- ***** MUTE  ***** --> <!-- ng-disabled="threeWayCall" --> <button class="btn btn-link btn-sm" ng-click="muteCall(); muteDisabledIcon=!muteDisabledIcon" tooltip-placement="top" uib-tooltip="Mute"> <span class="fa-stack"> <i class="fa fa-microphone fa-2x"></i><i ng-class="\'fa fa-ban fa-stack-2x text-danger\'" ng-show="muteDisabledIcon"></i> </span> </button> </div> <div class="btn-group"> <!-- ***** RECORDING  ***** --> <button ng-if="!recording" class="btn btn-link btn-sm" ng-click="startRecordCall(vm.content.data.id)" tooltip-placement="top" uib-tooltip="Start Recording"> <span class="fa-stack fa-1xb" ng-show="voiceAct"> <i class="fa fa-circle fa-stack-2x"></i> <strong class="fa-stack-1x fa-stack-text fa-inverse font-rec">REC</strong> </span> </button> <!-- ***** RECORDING  ***** --> <button ng-if="recording" class="btn btn-link btn-sm" ng-click="stopRecordCall(vm.content.data.id)" tooltip-placement="top" uib-tooltip="Stop Recording"> <span class="fa-stack fa-1xb" ng-show="voiceAct"> <i class="fa fa-circle fa-stack-2x" style="{{recording ? \'color: red;\' : \'\'}}"></i> <strong class="fa-stack-1x fa-stack-text fa-inverse font-rec">REC</strong> </span> </button> </div> <div class="btn-group"> <!-- ***** HOLD  ***** --> <button class="btn btn-link btn-sm" ng-click="holdCall(); holdDisabledIcon=!holdDisabledIcon" ng-disabled="threeWayCall" tooltip-placement="top" uib-tooltip="Hold"> <span class="fa-stack"> <!--  <i ng-class="holdDisabledIcon"></i> --> <i class="fa fa-pause fa-2x"></i><i ng-class="\'fa fa-ban fa-stack-2x text-danger\'" ng-show="holdDisabledIcon"></i> </span> </button> </div> <!-- ***** TRANSFER CALL  ***** --> <button class="btn btn-link btn-sm" ng-click="showTransfer=!showTransfer; transferCall()" ng-hide="showThreeWay || threeWayCall" tooltip-placement="top" uib-tooltip="Transfer call"> <img src="images/icons/transfer2-blue-icon.f1007b4d.png" width="24" height="24" alt=""> </button> <!-- ***** NEW CALL  ***** --> <div class="btn-group" ng-disabled="showTransfer"> <!--  holdCall(vm.content.data.id);   --> <button class="btn btn-link btn-md" ng-model="radioModel" ng-click="showThreeWay=!showThreeWay" ng-hide="threeWayCall" uib-btn-radio="\'Right\'" tooltip-placement="top" uib-tooltip="New Call"> <i class="fa fa-user-plus fa-2x"></i> </button> </div> <!-- ***** DIAL PAD  ***** --> <!--  ng-show="threeWayCall"  --> <button class="btn btn-link btn-sm" ng-click="showDialPad=!showDialPad" tooltip-placement="top" uib-tooltip="Show Dial Pad"> <img src="images/icons/dial-pad.b411ed09.png" width="27" height="27" alt=""> </button> </div> <!-- ******************** TRANSFER CALL ********************* --> <div class="cls-oncall-transfer" ng-show="showTransfer"> <div class="cls-input-transfer"> <form name="frmTransfer" ng-submit="transferCall(contsUsr.contSelTrans, optTransfer)"> <input type="text" id="txtContactSelTrans" uib-typeahead="contsUsr as contsUsr.contact_name_full for contsUsr in userContacts | filter:{contact_name_full:$viewValue} | limitTo:8" ng-model="contsUsr.contSelTrans" ng-click="setFocus(\'tranfer\')" class="form-control" required> <button type="submit" class="btn btn-success cls-btn-transfer" ng-click="connectTo2=!connectTo2" ng-disabled="frmTransfer.$invalid" ng-hide="connectTo2">{{btnTransfer}}</button> <button class="btn btn-link btn-sm" ng-click="hangupCall()" onclick="stopp()" ng-show="connectTo2" tooltip-placement="top" uib-tooltip="Transfer Call"> <img src="images/icons/transfer-icon.e2a1f3b1.png" width="30" height="30" alt="" style="margin-top: -3px"> </button> <div class="cls-opt-transfer"> <label ng-click="selectOpt(\'S\')"> <input type="radio" name="optTranfer" ng-value="S" ng-checked="true"> Supervised transfer</label> <label ng-click="selectOpt(\'B\')"> <input type="radio" name="optTranfer" ng-value="B"> Blind transfer</label> </div> </form> </div> </div> </center> </div> </div> <script>var hour = 0, min = 0, sec = 0, dec = 0;\nvar vis = "";\nvar stop = true;\n\nrun() ;\n\nfunction run() {\n    if(stop === true) {\n            stop = false;\n            cronometro();\n    }\n}\n\nfunction cronometro() {\n    if(stop === false) {\n        dec++;\n        if(dec > 9) {\n                dec = 0;\n                sec++;\n        }\n        if(sec > 59) {\n                sec = 0;\n                min++;\n        }\n        if(min > 59) {\n                min = 0;\n                hour++;\n        }\n        show();\n        setTimeout("cronometro()", 100);\n    }\n}\nfunction show() {\n    if(hour < 10) vis = "0"; else vis = hour;\n    if(min < 10) vis = vis + ":" +"0";\n    vis = vis + min + ":";\n    if(sec < 10) vis = vis + "0";\n    vis = vis + sec;\n    //vis = vis + sec + ":" + dec;\n    //document.getElementById("vis").innerHTML = vis;\n    document.getElementById("vis2").innerHTML = vis;\n}\nfunction stopp() {\n    stop = true;\n}\nfunction reset() {\n    if(stop === false) {\n                stop = true;\n    }\n    hour = min = sec = dec = 0;\n    vis = "";\n    show();\n}</script>'),a.put("views/calls/outgoing-call-box.html",'<div class="cls-cont-img-incomingcall"> <div class="phone-shake"> <i class="mdi mdi-phone-outgoing mdi-48px faa-ring animated pull-right"> </i> </div> <div class="arrow-point"> <i class="fa fa-long-arrow-right faa-passing animated"> </i> </div> <div class="conference-avatar" ng-show="call.isConferenceCall"> <span class="fa-stack fa-3x cls-color-blue-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> </div> <div class="avatar" ng-if="!call.isConferenceCall"> <i class="fa fa-user-circle-o pull-left" ng-if="!call.contact.contact_profile_image"> </i> <div class="cls-circle-arround-1 pull-left" ng-if="call.contact.contact_profile_image"> <img ng-src="{{pathImgProfile + call.contact.contact_profile_image}}" class="cls-img-incomingcall"> </div> </div> <div class="current-call-info"> <center> <strong ng-if="call.contact.contact_name_full"> {{call.contact.contact_name_full}} </strong> <strong ng-if="!call.contact.contact_name_full && !call.isConferenceCall"> Unknown </strong> <strong ng-if="call.isConferenceCall"> Conference Call </strong> <br> <label> {{call.number | tel}} </label> </center> </div> <div class="cls-outgoingcall-buttons"> <button class="btn btn-link btn-sm mdi mdi-phone-hangup mdi-24px cls-color-red-tkg" ng-click="hangUp()" style="margin-top: 5px !important" tooltip-placement="left" uib-tooltip="Hang up call"> </button> </div> </div>'),a.put("views/calls/outgoingcall.html",'<div> <div class="modal-body" id="modal-body"> <div><span class="cls-incomingcall-name">Calling... {{phoneNumber}}</span></div> <div class="cls-cont-img-incomingcall"> <center> <span class="cls-color-green-tkg"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></span> </center> </div> </div> <div class="modal-footer"> <center> <div class="cls-oncall-buttons"> <!--\n               <button class="btn btn-danger btn-md" ng-click="hangUp();"><i class="fa fa-phone" style="margin-right: 10px;"></i>Hang up</button>\n                --> <div class="btn-group"> <button class="btn btn-link btn-sm" ng-click="hangUp()" onclick="stopp()" id="unlikCall" tooltip-placement="top" uib-tooltip="Hang Up Call"> <img src="images/icons/end-call-red-icon.26088626.png" width="35" height="35" alt=""> </button> </div> </div> </center> </div> </div>'),a.put("views/calls/queue-incoming-calls-display.html",'<div ng-if="calls.showQueueIncomingCalls"> <div class="row"> <span> On call with: </span> <strong class="cls-color-blue-tkg"> {{call.contact.contact_name_full}} </strong> <strong class="cls-color-blue-tkg" ng-show="!calls.contactOncall.name"> {{call.params.remote_caller_id_name | callerId}} </strong> </div> <div class="cls-queue-incoming-calls"> <div style="border: lavender solid 1px; margin-bottom: 15px"> <div layout="row" ng-if="calls.queueIncomingCalls.length > 1" ng-repeat="queueInCalls in calls.queueIncomingCalls" style="height: 55px !important; padding-top: 10px; background-color: #F5FBEF"> <div layout-md="column" flex="60"> <span class="cls-list-3way-call" ng-if="queueInCalls.name"> {{::queueInCalls.name}} </span> <span class="cls-list-3way-call" ng-if="!queueInCalls.name"> {{::queueInCalls.phone_number}} </span> <br> <span style="margin-top: -20px !important; font-size: 10px"> {{::queueInCalls.phone_number | tel}} </span> </div> <div layout-md="column" flex="15"> <button class="btn btn-link btn-sm mdi mdi-phone-incoming mdi-24px faa-ring animated cls-color-green-tkg" ng-click="calls.answerCall(queueInCalls)" tooltip-placement="top" uib-tooltip="Answer call  {{queueInCalls.id}}"> </button> </div> <div layout-md="column" flex="15"> <button class="btn btn-link btn-sm mdi mdi-voicemail mdi-24px cls-color-blue-tkg" ng-click="calls.sendToVoicemail(queueInCalls.id)" tooltip-placement="top" uib-tooltip="Send to voicemail"> </button> </div> <div layout-md="column" flex="25"> <!--  hangUpdMultiCalls(queueInCalls.id) --> <button class="btn btn-link btn-sm mdi mdi-phone-missed mdi-24px cls-color-red-tkg" ng-click="calls.declineCall(queueInCalls.id)" tooltip-placement="top" uib-tooltip="Decline call"> </button> </div> </div> </div> </div> </div>'),a.put("views/calls/three-way-call-display.html",'<div class="cls-incomingcall-oncall"> <div style="border: lavender solid 1px; margin-bottom: 15px"> <div layout="row" ng-repeat="call in calls()" style="height: 55px !important; padding-top: 10px; background-color: #F5FBEF"> <div layout-md="column" flex="60" style="text-align: center"> <span class="cls-list-3way-call" ng-if="call.contact.contact_name_full"> {{call.contact.contact_name_full}} </span> <span class="cls-list-3way-call" ng-if="!call.contact.contact_name_full"> {{call.params.remote_caller_id_name | callerId}} </span> <br> </div> <div layout-md="column" flex="15"> <timer interval="1000" ng-if="call.startTime" start-time="call.startTime" style="margin-top: 5px"> {{mminutes}}:{{sseconds}} </timer> </div> <div layout-md="column" flex="25"> <div class="btn-group" role="group" aria-label="..."> <button type="button" class="btn btn-link btn-sm cls-color-red-tkg" ng-if="call.startTime" ng-click="hangUpCallById(call.callID)" tooltip-placement="top" uib-tooltip="Hangup"> <img src="images/icons/end-call-red-icon.26088626.png" class="cls-color-red-tkg" width="20" height="20" alt=""> </button> <button type="button" class="btn btn-link btn-sm" ng-if="call.startTime" style="cursor: default"> <!-- tooltip-placement="top-right" --> <!-- uib-tooltip="{{call.onHold ? \'Remove from Hold\' : \'Put on Hold\'}}"> --> <i class="fa fa-pause fa-stack-1x"></i> <i ng-class="\'fa fa-ban fa-stack-2x text-danger\'" ng-show="call.onHold" style="margin-top: -3px"> </i> </button> <i class="fa fa-spinner fa-pulse fa-2x fa-fw cls-color-blue-tkg" ng-show="!call.startTime"> </i> <button class="btn btn-link btn-sm cls-color-red-tkg" ng-show="!call.startTime" tooltip-placement="top" uib-tooltip="Cancel"> <i class="fa fa-times-circle fa-2x" ng-click="hangUpCallBeforeAnswer(call)"></i> </button> </div> </div> </div> <button class="btn btn-primary callbtn" ng-click="swap()" ng-style="swapButtonStyle()" tooltip-placement="top" uib-tooltip="Swap call"> <i class="fa fa-refresh" aria-hidden="true"> </i> Swap Call </button> <button class="btn mdi mdi-call-merge callbtn" ng-click="mergeCalls()" ng-if="!onConferenceCall()" tooltip-placement="top" uib-tooltip="Merge calls"> Merge Calls </button> </div> </div>'),a.put("views/calls/transfer-call-display.html",'<div class="transfer-container"> <div class="on-call-with"> <span>On call with: </span> <strong class="contact-name cls-color-blue-tkg"> {{call.contact.contact_name_full}} </strong> <strong class="cls-color-blue-tkg" ng-show="!call.contact.contact_name_full"> {{call.params.remote_caller_id_name | callerId}} </strong> </div> <div class="transfer-controls-container"> <form name="frmTransfer"> <div class="cls-opt-transfer"> <label> <input type="radio" ng-model="type" ng-value="\'supervised\'"> Supervised transfer </label> <label> <input type="radio" ng-model="type" ng-value="\'blind\'"> Blind transfer </label> </div> <md-input-container> <label>Enter phone number here</label> <input name="phoneNumber" phone-input ng-model="inputNumber" style="text-align: center" required> </md-input-container> <div class="call-action-buttons-container"> <button class="btn btn-default btn-sm" type="submit" ng-click="transferCall()" ng-disabled="" ng-show="!callServiceData.transferringCall"> <i class="fa fa-phone" style="margin-right: 10px"> </i> Transfer Call </button> <button class="btn btn-default btn-sm" ng-click="confirmTransfer()" ng-show="callServiceData.transferringCall" ng-disabled="supervisedTransferCalling" tooltip-placement="top" uib-tooltip="Transfer Call"> <i class="fa fa-check" style="margin-right: 10px"> </i> Confirm </button> <button type="button" class="btn btn-default btn-sm cls-color-blue-tkg" ng-click="cancelTransfer()" tooltip-placement="top" uib-tooltip="Cancel"> Cancel <i class="fa fa-times cls-color-red-tkg" style="margin-left: 10px"> </i> </button></div> </form> </div> </div>'),a.put("views/calls/video-invite.html",'<div class="video-invite"> <p> You have been invited to a video conference </p> <i class="fa fa-user-circle-o" ng-show="!contact.contact_profile_image" style="color: #2E9AFE; font-size: 60px"> </i> <div class="cls-circle-arround-1" ng-if="contact.contact_profile_image"> <img ng-src="{{avatarPath}}" class="cls-img-incomingcall" alt=""> </div> <center> <strong> <p ng-if="contact.contact_name_full"> {{contact.contact_name_full}} </p> </strong> </center> <div class="options incoming-call-buttons"> <button class="btn-link mdi mdi-phone-incoming cls-color-green-tkg" ng-click="acceptInvite()" tooltip-placement="top" uib-tooltip="Go to video conference"> </button> <button class="btn-link mdi mdi-phone-missed cls-color-red-tkg" ng-click="declineInvite()" tooltip-placement="top" uib-tooltip="Decline video conference"> </button> </div> </div>'),a.put("views/calls/videocall.html",'<style>.opcVideoCallActivo a i {\n        color: #0073a5;\n    }</style> <div style="background-color: #E7E9E3; padding-top: 0"> <div class="row cls-header-nav-bar-video-call"> <div class="col-lg-8 col-md-6 col-sm-5"> <div class="input-group cls-input-group-header-video-call" ng-show="textBoxNotify"> <input class="form-control" type="text" name="txtNameGiven" placeholder="Enter a name or e-mail address"> <span class="input-group-addon" tooltip-placement="bottom" uib-tooltip="Send Mail"><i class="fa fa-envelope"></i></span> <span class="input-group-addon" tooltip-placement="bottom" uib-tooltip="Notify"><i class="fa fa-bell"></i></span> </div> <div class="cls-mnu-functions-video-call" data-toggle="buttons" ng-hide="textBoxNotify"> <nav> <ul> <li ng-class="{opcVideoCallActivo : micActive}"><a href="" ng-click="opcActiveTools(\'mic\')"><i class="fa fa-microphone"></i></a></li> <li ng-class="{opcVideoCallActivo : cameraActive}"><a href="" ng-click="opcActiveTools(\'cam\')"><i class="fa fa-video-camera"></i></a></li> <li ng-class="{opcVideoCallActivo : arrActive}"><a href="" ng-click="opcActiveTools(\'arr\')"><i class="fa fa-arrows-alt"></i></a></li> <li ng-class="{opcVideoCallActivo : deskActive}"><a href="" ng-click="opcActiveTools(\'des\')"><i class="fa fa-desktop"></i></a></li> <li ng-class="{opcVideoCallActivo : headActive}"><a href=""><i class="fa fa-headphones"></i></a></li> </ul> </nav> </div> </div> <div class="col-lg-4 col-md-6 col-sm-5 cls-header-video-call-mnu-opc"> <nav> <ul> <li ng-class="{opcVideoCallActivo : textBoxNotify}"><a href="" ng-click="opcActiveTools(\'tex\')"><i class="fa fa-user-plus"></i></a></li> <li ng-class="{opcVideoCallActivo : chatVidCall}"><a href="" ng-click="opcActiveTools(\'cha\')"><i class="fa fa-wechat"></i></a></li> <li ng-class="{opcVideoCallActivo : chkCualq}"><a href="" ng-click="opcActiveTools(\'chk\')"><i class="fa fa-check-circle"></i></a></li> <li ng-class="{opcVideoCallActivo : settingVidCall}"><a href="" ng-click="opcActiveTools(\'set\')"><i class="fa fa-gears"></i></a></li> </ul> </nav> </div> </div> <div class="row container cls-cont-participants-video-call"> <!--********** VIDEO CALL PARTICIPANTS  **********--> <div> <video id="video-container" autoplay></video> </div> </div> <div class="row"> </div> </div> <!--******************** VIDEO CALL CHAT  ********************--> <div class="cls-video-call-chat" ng-show="chatVidCall"> <div class="row"> <!--********** header chat  **********--> <uib-tabset active="active" justified="true"> <uib-tab index="0"> <uib-tab-heading> <i class="fa fa-users cls-color-green-tkg" style="margin-right: 10px"></i> Members </uib-tab-heading> <div class="cls-video-call-cont-chat"> <span>Members List</span> </div> </uib-tab> <uib-tab index="1"> <uib-tab-heading> <i class="fa fa-commenting cls-color-green-tkg" style="margin-right: 10px"></i>Chat </uib-tab-heading> <div class="cls-video-call-cont-chat"> <span>Content Chat</span> </div> <div class="cls-video-call-chat-type-tex-div"> <div> <textarea class="form-control"></textarea> </div> </div> </uib-tab> </uib-tabset> </div> <div class="row"> <!--********** body participants  **********--> </div> <div class="row"> <!--********** body chat  **********--> </div> </div>'),a.put("views/chat-avatar.html",'<div class="postphoto clearfix"> <div class="dropdown"> <div class="post-time" ng-if="isConsecutivePost"> {{post.create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}} </div> <div ng-if="!isConsecutivePost"> <a ng-bind-html="showMemberPhoto(contact, \'\')" class="dropdown-toggle"> </a> </div> <!-- <div class="dropdown-menu" aria-labelledby="dropdownMenuLink"> --> <!-- <chat-options --> <!-- item="item"> --> <!-- </chat-options> --> <!-- </div> --> </div> </div>'),a.put("views/chat-channels-list.html",'<div class="chat-block-side-header"> @{{::chatUserProfile.username}}<br> <span class="chat-team-name"> {{::chatUserProfile.team.display_name}} </span> </div> <div class="chat-block-side-content"> <ul class="chat-contacts-list"> <li class="cat" ng-show="favoritesExist()"> <span ng-click="toggleFavorites()"> FAVORITES <i class="fa fa-chevron-down" ng-show="showFavorites"> </i> <i class="fa fa-chevron-right" ng-show="!showFavorites"> </i> </span> <favorite-channels-list class="favorite-channels-list" toggle-favorite-channel="toggleFavoriteChannel" ng-show="showFavorites" is-favorite-channel="isFavoriteChannel"> </favorite-channels-list> </li> <li class="cat"> <span ng-click="toggleTopicChannels()"> CHANNELS <i class="fa fa-chevron-down" ng-show="showTopicChannels"> </i> <i class="fa fa-chevron-right" ng-show="!showTopicChannels"> </i> </span> <span class="add-option" ng-click="addChannel()" tooltip-placement="top" ng-show="showTopicChannels" uib-tooltip="{{::tips.chat.create_channel}}"> <i class="fa fa-plus"></i> </span> <topic-channels-list ng-show="showTopicChannels" toggle-favorite-channel="toggleFavoriteChannel" is-favorite-channel="isFavoriteChannel"> </topic-channels-list> </li> <li class="cat"> <span ng-click="toggleDMChannels()"> DIRECT MESSAGES <i class="fa fa-chevron-down" ng-show="showDMChannels"> </i> <i class="fa fa-chevron-right" ng-show="!showDMChannels"> </i> </span> <span class="add-option" ng-click="addDirectMessage()" tooltip-placement="top" ng-if="showDMChannels" uib-tooltip="{{::tips.chat.create_direct_message}}"> <i class="fa fa-plus"></i> </span> <dm-channels-list ng-show="showDMChannels" toggle-favorite-channel="toggleFavoriteChannel" is-favorite-channel="isFavoriteChannel"> </dm-channels-list> </li> </ul> </div>'),a.put("views/chat-options.html",'<button class="btn btn-default btn-sm postactiongroup" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tooltip-placement="bottom-right" uib-tooltip="show message actions..."> <i class="fa fa-ellipsis-h"></i> </button> <ul class="dropdown-menu pull-right"> <li ng-if="isCurrentUsersPost()"> <a ng-click="showModalWithData(\'/chat/editpost.html\',posts[item])"> <i class="fa fa-pencil fa-lg" style="color: #0c6c2c"> </i> Edit Message </a> </li> <li ng-if="isCurrentUsersPost()"> <a ng-click="showModalWithData(\'/chat/deletepost.html\',posts[item])"> <i class="fa fa-minus-circle fa-lg" style="color: #e30400"> </i> Delete Message </a> </li> <li tooltip-placement="top" uib-tooltip="Text" ng-if="getContact().smsnumber" ng-click="startSmsModal()"> <a> <i class="fa fa-paper-plane fa-lg" style="color: #f8a632"></i> Send Text </a> </li> <li tooltip-placement="top" ng-if="!getContact().contact_mobile_number" uib-tooltip="No Mobile Number Available"> <a> <i class="fa fa-paper-plane fa-lg" style="color: grey"></i> Send Text </a> </li> <li ng-repeat="phone in getContact().phones" class="dropdown-item chat-option" ng-click="makeCall(phone.phone_number)" ng-if="phone.phone_label && phone.phone_number"> <a> <i class="fa fa-phone" style="color: #8adbf6"></i> {{phone.phone_number | tel}} </a> </li> <li ng-if="getContact().contact_email_address && getContact().contact_email_address!=\'\'" tooltip-placement="top" uib-tooltip="{{::getContact().contact_email_address}}" ng-click="startEmailClient()" class="dropdown-item chat-option"> <a> <i class="fa fa-envelope-o fa-lg" style="color: #64d76c"></i> Send Email </a> </li> <li tooltip-placement="top" style="display: inline-block" ng-if="getContact().contact_type==\'user\'" uib-tooltip="Videoconference" ng-click="sendVideoInvite(getContact())"> <a> <i class="fa fa-video-camera fa-lg" style="color: #f8a632"></i> Send Video Invite </a> </li> </ul> <button class="btn btn-default btn-sm postactiongroup" ng-click="openThread()(post)" tooltip-placement="bottom-right" uib-tooltip="{{isThreadPost(posts[item]) ? \'Reply to Thread\' : \'Start a Thread\'}}"> <i class="fa fa-mail-reply"></i> </button>'),
a.put("views/chat-post.html",'<div class="date-separator datedisplay" ng-if="isFirstDayPost"> <hr class="separator__hr"> <div class="separator__text"> <span>{{post.create_at | date:\'EEE MMM d, y\' }}</span> </div> </div> <div class="chat-post-container" ng-class="{\'is-consecutive-post\': isConsecutive(),\n                \'highlight-item\': (highlightPost && highlightPost === post.id),\n                 \'is-own-post\': isCurrentUsersPost()}"> <div class="post-profile-image"> <chat-avatar ng-if="contact()" post="post" contact="contact()" chat-user="user()" is-consecutive-post="isConsecutive()"> </chat-avatar> </div> <p class="post-info" data-prev-id="{{prevId}}" ng-if="!isConsecutive()"> <span class="post-author-name"> {{user().first_name}} {{user().last_name}} </span> <span class="postdate"> {{post.create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}} </span> <span class="postdate" am-time-ago="post.create_at"></span> </p> <p ng-if="isFirstThreadPost(post)" class="commented-root-message"> Commented on {{rootPostUser().first_name + \' \' + rootPostUser().last_name + "\'s" }} message: <a href ng-click="openThread()(rootPost())">{{rootPost().message}}</a> </p> <div class="post-message" ng-if="post"> <span ng-if="post.delete_at">(message deleted)</span> <div ng-if="!post.delete_at" marked="isEdited(post) | linky:\'_blank\' | nl2br | emojis | callouts" compile="true" class="post-message-text"> </div> <!-- <div class="giphy-img-container"> --> <giphy-img ng-if="!post.delete_at && isGiphyLink(post.message) && post.message" post="post"> </giphy-img> <!-- </div> --> <chat-post-files-display show="showFilesDisplayForPost(post)" post="post"> </chat-post-files-display> </div> <div class="post-actions"> <post-actions post="post" is-threaded="isThreaded" open-thread="openThread()" chat-user="user()"> </post-actions> </div> <div class="post-files" ng-if="post.file_ids"> </div> </div>'),a.put("views/chat/addchannel.html",'<div class="chat-modal"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Add a New Channel </span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <form name="addChannelForm"> <div class="row"> <md-radio-group ng-model="addChannel.channel_type" ng-required="true"> <div class="col-sm-6"> <md-radio-button value="O" class="md-primary"> <strong>Public Channel</strong> <br> <span class="smfont"> For all organization members </span> </md-radio-button> </div> <div class="col-sm-6"> <md-radio-button value="P"> <strong>Private Channel</strong> <br> <span class="smfont"> Restricted membership </span> </md-radio-button> </div> </md-radio-group> </div> <md-input-container class="md-block" flex-gt-sm> <label>Channel Name</label> <input ng-model="addChannel.display_name" required> </md-input-container> <md-input-container class="md-block"> <label> Purpose of the Channel (optional) </label> <textarea ng-model="addChannel.purpose" md-maxlength="150" rows="2" md-select-on-focus>\n                </textarea> </md-input-container> <md-input-container class="md-block"> <label> Channel Subtitle (optional) </label> <textarea ng-model="addChannel.header" md-maxlength="150" rows="2" md-select-on-focus>\n                </textarea> </md-input-container> <div ng-if="addChannel.channel_type===\'P\'"> <strong> Select Members of the Private Channel: </strong> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.username" placeholder="Search by contact name"> </div> <table id="contact-groups-table" class="table table-bordered table-hover table-striped"> <tbody> <tr ng-if="member.id != mmProfile.id && member.roles" ng-repeat="member in vm.content.data.teamMembers | filter:search | orderBy : \'first_name\' :false"> <td class="col-sm-9"> <strong> {{member.first_name}} {{member.last_name}} ({{member.username}}) </strong> </td> <td class="col-sm-3"> <md-checkbox ng-model="addChannel.channelmember[member.id]" ng-init="addChannel.channelmember[member.id]=isChannelMember(members, member.id)" aria-label="Member" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </form> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="vm.content.data.createChannel(addChannel)" ng-disabled="addChannelForm.$invalid"> <i class="fa fa-save" style="margin-right: 10px"></i> Create Channel </button> </div> </div>'),a.put("views/chat/addfilemodal.html",'<div> <div ng-controller="ChatPlusCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-file fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Upload a File?</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="row clearfix"> <div class="col-sm-12"> <div ng-show="showBrowse"> <div class="input-group"> <span class="input-group-addon" title="File"><i class="fa fa-file"></i></span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="image/*" type="file" multiple name="files" style="display: none" onchange="angular.element(this).scope().uploadPostFile(this.files)"> </label> </div> </div> <div ng-show="!showBrowse"> <i ng-show="showSpinner" class="fa fa-spinner fa-spin fa-6x"></i> <div ng-show="!showSpinner"> <div class="col-md-4"> <img ng-if="fileUpload.has_preview_image" src="{{chatApiUrl}}/teams/{{teamId}}/files/get{{fileUpload.fullpath}}" style="max-height:150px"> <span ng-if="!fileUpload.has_preview_image"><i class="fa fa-fle-{{fileUpload.extension}}-o fa-4x"></i></span> </div> <div class="col-md-8"> <span>File Size: {{fileUpload.size/1000 | number:0}}kb<br> File Type: {{fileUpload.extension}}</span> </div> </div> </div> </div> </div> <div class="row"> <div class="col-sm-12"> Add Comment (optional): <div class="input-group"> <span class="input-group-addon"><i class="fa fa-comments"></i></span> <textarea class="form-control" type="text" ng-model="chat.addfile.comments" placeholder="Add Comments if desired"></textarea> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="submitPostWithFile(chat.addfile.comments, fileUpload)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload File</button> </div> </div> </div>'),a.put("views/chat/addtoprivatechannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Add Members</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.channel.display_name}}</h4> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="search.username" placeholder="Search by name"> </div> <table class="table table-bordered table-hover table-striped"> <tr ng-if="!vm.content.data.isMemberOf(member.id)" ng-repeat="member in vm.content.data.teamMembers | filter:search"> <td class="col-sm-8"> {{member.first_name}} {{member.last_name}}<br> {{member.email}} </td> <td class="col-sm-4"> <button class="btn btn-success btn-xs" ng-click="vm.content.data.doAddMember(vm.content.data.channel.id, member)"><i class="fa fa-plus"></i> Add Member</button> </td> </tr> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div>'),a.put("views/chat/changechannelheader.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-edit fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Edit Channel Header</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> Set text that will appear in the header of the Channel beside the Channel name. For example, include frequently used links by typing [Link Title](http://example.com). <div class="input-group"> <span class="input-group-addon" title="first name"><i class="fa fa-edit"></i></span> <textarea class="form-control" type="text" ng-init="vm.content.channel.header=vm.content.data.header" ng-model="vm.content.channel.header" placeholder="Header for the Channel (optional)"></textarea> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="modifyChannel(\'header\', vm.content)"><i class="fa fa-save" style="margin-right: 10px"></i>Save Changes</button> </div> </div> </div>'),a.put("views/chat/changechannelname.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-edit fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Rename Channel</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> Display Name <div class="input-group"> <span class="input-group-addon"><i class="fa fa-edit"></i></span> <input class="form-control" type="text" ng-model="vm.content.channel.display_name" ng-value="vm.content.data.display_name" required> </div> <slug from="vm.content.channel.display_name" to="vm.content.channel.handle"></slug> Handle - Cannot be edited <div class="input-group"> <span class="input-group-addon"><i class="fa fa-edit"></i></span> <input class="form-control" type="text" ng-model="vm.content.channel.handle" ng-disabled="true" required> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="modifyChannel(\'display_name\', vm.content)"><i class="fa fa-save" style="margin-right: 10px"></i>Save Changes</button> </div> </div> </div>'),a.put("views/chat/changechannelpurpose.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Edit Channel Purpose</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> Describe how this Channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join. <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question"></i></span> <textarea class="form-control" type="text" ng-init="vm.content.channel.purpose=vm.content.data.purpose" ng-model="vm.content.channel.purpose" placeholder="Purpose of the Channel (optional)" required></textarea> </div> </div> <div class="modal-footer"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="modifyChannel(\'purpose\', vm.content)"><i class="fa fa-save" style="margin-right: 10px"></i>Save Changes</button> </div> </div> </div>'),a.put("views/chat/chat-channels-suggestion-list.html",'<div class="suggestion-list" ng-style="styleObj"> <div class="suggestion-list-content"> <div class="suggestion-list-header"> Channels <span class="pull-right light-font right-text"> <span class="pad-right-15"> <i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate </span> <span class="pad-right-15">tab to select</span> <span class="pad-right-15">esc to dismiss</span> </span> </div> <div class="suggestion-list-items"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: parentData.channels[parentData.selectedIndex].id === channel.id}" ng-repeat="channel in parentData.channels track by $index" ng-click="parentData.select($index)"> <span class="suggest-icon"> <i class="fa fa-{{channel.type == \'P\' ? \'lock\' : \'globe\'}} fa-lg" style="font-size: 18px; width: 25px; text-align: center"> </i> </span> <strong>#{{channel.name}}</strong> <span>{{channel.display_name}}</span> </div> </div> </div> </div>'),a.put("views/chat/chat-macro-suggestion-list.html",'<div class="suggestion-list" ng-style="styleObj"> <div class="suggestion-list-content"> <div class="suggestion-list-header"> <span class="pull-right light-font right-text"> <span class="pad-right-15"> <i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate </span> <span class="pad-right-15"> tab to select </span> <span class="pad-right-15"> esc to dismiss </span> </span> </div> <div class="suggestion-list-items"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: parentData.suggestions[parentData.selectedIndex] === suggestion}" ng-repeat="suggestion in parentData.suggestions track by $index" ng-click="parentData.select($index, suggestion)"> <strong> {{suggestion.text_choice_text}} </strong> </div> </div> </div> </div>'),a.put("views/chat/chat-people-suggestion-list.html",'<div class="suggestion-list" ng-style="styleObj"> <div class="suggestion-list-content"> <div class="suggestion-list-header">People <span class="pull-right light-font right-text"> <span class="pad-right-15"> <i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate </span> <span class="pad-right-15">tab to select</span> <span class="pad-right-15">esc to dismiss</span> </span> </div> <div class="suggestion-list-items"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: parentData.people[parentData.selectedIndex].id === person.id}" ng-repeat="person in parentData.people track by $index" ng-click="parentData.select($index)"> <span class="suggest-icon" ng-bind-html="showMemberPhoto(person, \'-sm\')"> </span> <span style="margin: 0 15px"> <strong>@{{person.username}}</strong> <span>{{person.first_name}} {{person.last_name}}</span> </span> </div> </div> </div> </div>'),a.put("views/chat/chat-post-files-display.html",'<div class="chat-post-file-container" ng-if="show"> <div ng-repeat="file in post.fileinfoposts" class="chat-post-file"> <div ng-if="file.has_preview_image" class="chat-post-file-thumb"> <a href="" ng-click="showModalWithData(\'/chat/previewfile.html\',file.obj)"> <img src="{{file.link}}" style="{{thumbDimensions(file.link, \'thumb\')}}; max-width: 100%"> </a> </div> <div ng-if="!file.has_preview_image" class="chat-post-file-thumb"> <a href="{{file.link}}" target="_blank"> <div class="file-icon file-icon-lg" data-type="{{file.extension}}"> </div> </a> </div> <div class="chat-post-file-details" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.download_file}}"> <a href="{{file.link}}" target="_blank"> {{file.name}} <br> <i class="fa fa-download"></i> {{file.extension | uppercase}} {{file.size/1000 | number:0}}KB </a> </div> </div> </div>'),a.put("views/chat/chat-post-upload-preview.html",'<div class="chat-post-create-footer"> <div class="chat-post-upload-preview" ng-show="show"> <div class="light-font"> Type a message above describing the files and hit enter. -- or -- <button class="btn btn-default btn-xs" ng-click="sendMessage()"> Send Files </button> </div> <uib-progressbar max="max" value="progressBarPercentage" type="success" class="cloud-progress-bar" ng-show="progressBarPercentage > 0"> <span style="color:white; white-space:nowrap; font-weight: bold"> {{progressBarPercentage}}% </span> </uib-progressbar> <div ng-repeat="item in uploader.queue" class="chat-file-preview"> <div ng-if="!uploadIsImage(item._file)" class="file-icon file-icon-lg" data-type="{{item._file.name | extension}}"> </div> <div ng-if="uploadIsImage(item._file)" ng-thumb="{ file: item._file, height: 100, width: 120 }" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.remove_temp_upload}}"> </div> <span class="file-preview-remove" ng-click="item.remove()"> <i class="fa fa-remove"></i> </span> </div> </div> </div>'),a.put("views/chat/chat-search-result.html",'<div class="result-date search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span>{{post.create_at | date:\'EEE MMM d, y\' }}</span> </div> </div> <div class="result-channel"> {{showChannelName(post)}} </div> <div class="result-content"> <div class="avatar"> <chat-avatar ng-if="contact" post="post" contact="contact" chat-user="user" is-consecutive-post="isConsecutive()"> </chat-avatar> </div> <div class="message"> <ul class="headerinfo"> <li ng-if="user" class="chatprofilename">{{user.first_name + \' \' + user.last_name}}</li> <li ng-if="!user" class="chatprofilename">Deleted User</li> <li><span class="postdate">{{post.create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}}</span></li>\' </ul> <div marked="post.message | linky:\'_blank\' | nl2br | emojis | callouts" compile="true"> </div> </div> <div class="jump"> <span ng-click="showPostInChannel()(post)" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.jump_to_result}}"> <i class="fa fa-reply"></i> Jump </span> </div> </div>'),a.put("views/chat/createdirectmessagechannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-comments fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Open a Direct Message</span> <button type="button" class="close" ng-click="vm.content.data.closeModal()"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="search.username" placeholder="Search by name"> </div> <table class="table table-bordered table-hover table-striped"> <tbody ng-style="{height: modalTableHeight + \'px\'}"> <tr ng-if="member.id !== vm.content.data.chatUserProfile.id && member.roles" ng-repeat="member in vm.content.data.teamMembers | filter:search | filter:vm.content.data.dmExists | orderBy : predicate :reverse"> <td class="col-sm-9"> {{member.first_name}} {{member.last_name}}<br> {{member.email}} </td> <td class="col-sm-3"> <button class="btn btn-success btn-sm" ng-click="vm.content.data.createDirectMessage(member)"> <i class="fa fa-plus"></i> Start Chat </button> </td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> </div> </div>'),a.put("views/chat/deletechannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Channel Delete?</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.channel.display_name}}</h4> <div class="cls-title-cont-modal">Are you sure you want to delete this Channel? All Posts will be lost!</div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="vm.content.data.doDeleteChannel(vm.content.data.channel)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Delete</button> </div> </div>'),a.put("views/chat/deletepost.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Post Delete?</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Are you sure you want to delete this Post?</div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="vm.content.data.doDeletePost(vm.content.data.post)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Delete</button> </div> </div>'),a.put("views/chat/editchannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Edit Channel</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <md-input-container class="md-block" flex-gt-sm> <label>Channel Name</label> <input ng-model="vm.content.data.channel.display_name" required> </md-input-container> <md-input-container class="md-block"> <label>Purpose of the Channel (optional)</label> <textarea ng-model="vm.content.data.channel.purpose" md-maxlength="150" rows="2" md-select-on-focus></textarea> </md-input-container> <md-input-container class="md-block"> <label>Channel Subtitle (optional)</label> <textarea ng-model="vm.content.data.channel.header" md-maxlength="150" rows="2" md-select-on-focus></textarea> </md-input-container> <div ng-if="1==3 && vm.content.data.channel.type===\'P\'"> <strong>Select Members of the Private Channel:</strong> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="search.contact_name_full" placeholder="Search by contact name"> </div> <table id="contact-groups-table" class="table table-bordered table-hover table-striped"> <tbody> <tr ng-if="member.id !== memberId && member.roles" ng-repeat="member in vm.content.data.teamMembers | filter:search | orderBy : \'first_name\' :false"> <td class="col-sm-9"> <strong>{{member.first_name}} {{member.last_name}}</strong> </td> <td class="col-sm-3"> <md-checkbox ng-model="vm.content.data.channel.channelmember[member.id]" aria-label="Member" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-success btn-md" ng-click="vm.content.data.doEditChannel(vm.content.data.channel)"><i class="fa fa-save" style="margin-right: 10px"></i>Save Channel</button> </div> </div>'),a.put("views/chat/editpost.html",'<div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-edit fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Edit Post </span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon" title="post content"> <i class="fa fa-edit"></i> </span> <textarea class="form-control" ng-model="vm.content.data.message">\n        </textarea> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="vm.content.data.doEditPost(vm.content.data.post, vm.content.data.message)"> <i class="fa fa-save" style="margin-right: 10px"></i> Save Changes </button> </div>'),a.put("views/chat/manage-channel.html",'<div class="btn-group"> <span data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.manage_channel}}"> <i class="fa fa-gear fa-2x" style="opacity: 0.5"></i> </span> <ul class="dropdown-menu"> <li ng-if="chatData.currentChannel.isAdmin"><a ng-click="editChannel()"><i class="fa fa-edit"></i>Edit Channel</a></li> <li ng-if="chatData.currentChannel.isAdmin"><a ng-click="addMembers()"><i class="fa fa-plus"></i> Add Members</a></li> <li ng-if="chatData.currentChannel.isAdmin"><a ng-click="manageMembers()"><i class="fa fa-users"></i> Manage Members</a></li> <li ng-if="!chatData.currentChannel.isAdmin"> <a ng-if="chatData.currentChannel.name !== \'town-square\'" ng-click="leaveChannel()"> <i class="fa fa-external-link"></i>Leave {{chatData.currentChannel.type==\'D\' ? \'Direct Message\' : \'Channel\'}} </a> <span ng-if="chatData.currentChannel.name === \'town-square\'">Can Not Leave Town Square</span> </li> <li ng-if="chatData.currentChannel.isAdmin"><a ng-click="deleteChannel()"><i class="fa fa-trash redfont"></i>Delete Channel</a></li> </ul> </div>'),a.put("views/chat/managechannelmembers.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Manage Channel Members</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.display_name}}</h4> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="search.username" placeholder="Search by name"> </div> <div ng-repeat="message in vm.content.data.messages" uib-alert ng-class="\'alert-\'+ message.type" dismiss-on-timeout="5000" close="vm.content.data.closeMessages($index)"> <span>{{message.note}}</span> </div> <div class="modal-scroll-container" ng-style="{height: modalTableHeight + \'px\'}"> <table class="table table-bordered table-hover table-striped table-buttons"> <tbody> <tr ng-repeat="member in vm.content.data.teamMembers | filter:search"> <td class="col-sm-6"> {{member.first_name}} {{member.last_name}} ({{member.username}})<br> {{member.email}} </td> <td class="col-sm-3"> <div ng-if="vm.content.data.isMemberOf(member.id)"> <button ng-if="!vm.content.data.isAdminOf(member.id)" class="btn btn-success btn-sm btn-block" ng-click="vm.content.data.doChangeRole(member.id, vm.content.data.channel.id, \'channel_user channel_admin\')"> <i class="fa fa-plus-square-o"></i> Make Admin </button> <button ng-if="vm.content.data.isAdminOf(member.id)" class="btn btn-danger btn-sm btn-block" ng-click="vm.content.data.doChangeRole(member.id, vm.content.data.channel.id, \'channel_user\')" ng-disabled="member.id == vm.content.data.user.id"> <i class="fa fa-minus-square-o"></i> Revoke Admin </button> </div> </td> <td class="col-sm-3"> <div> <button ng-if="!vm.content.data.isMemberOf(member.id)" class="btn btn-success btn-sm btn-block" ng-click="vm.content.data.doAddMember(vm.content.data.channel.id, member)"> <i class="fa fa-plus-square-o"></i> Add Member </button> <button ng-if="vm.content.data.isMemberOf(member.id)" class="btn btn-danger btn-sm btn-block" ng-click="vm.content.data.doRemoveMember(vm.content.data.channel.id, member)" ng-disabled="member.id == vm.content.data.user.id"> <i class="fa fa-minus-square-o"></i> Remove Member </button> </div> </td> </tr> </tbody> </table> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div>'),a.put("views/chat/managesubscriptions.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Manage Channel Subscriptions </span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.display_name" placeholder="Search by channel name"> </div> <div class="modal-scroll-container" ng-style="{height: modalTableHeight + \'px\'}"> <table class="table table-bordered table-hover table-striped table-buttons"> <tbody> <tr ng-repeat="channel in vm.content.data.channels | filter:search | orderBy: \'display_name\'"> <td class="col-sm-9"> {{channel.display_name}} <span ng-if="vm.content.data.isChannelAdmin(channel)">(You are admin) <i class="fa fa-question-circle" tooltip-placement="top" uib-tooltip="{{tips.chatplus.adminsubscription}}"></i></span> <span ng-if="channel.purpose"> <br>{{channel.purpose}} </span> </td> <td class="col-sm-3"> <div ng-if="channel.name !== \'town-square\' && !vm.content.data.isChannelAdmin(channel)"> <button ng-if="vm.content.data.isSubscribed(channel)" class="btn btn-warning btn-sm btn-block" ng-click="vm.content.data.leaveChannel(channel)"><i class="fa fa-minus-square-o"></i> Leave Channel</button> <button ng-if="!vm.content.data.isSubscribed(channel)" class="btn btn-success btn-sm btn-block" ng-click="vm.content.data.joinChannel(channel)"><i class="fa fa-plus-square-o"></i> Join Channel</button> </div> </td> </tr> </tbody> </table> </div> </div> <div class="modal-footer"> <button class="btn btn-success btn-md" ng-click="vm.content.data.addChannel()"> <i class="fa fa-plus" style="margin-right: 10px"> </i> Create New Channel </button> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Close Window </button> </div> </div>'),a.put("views/chat/post-action.html",'<div class="showactions btn-group dropup" ng-style="showActionsStyle"> <i class="pointer fa fa-ellipsis-h dktealfont" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.show_actions}}"></i> <ul class="dropdown-menu pull-right"> <li ng-click="openThread()(post)" ng-if="!isThreaded" tooltip-placement="bottom-right" uib-tooltip="{{isThreadPost(post) ? \'Reply to Thread\' : \'Start a Thread\'}}"> <a> <i class="fa fa-mail-reply fa-lg dktealfont"></i> Reply </a> </li> <li tooltip-placement="top" uib-tooltip="Text" ng-if="getContact().smsnumber" ng-click="startSmsModal()"> <a> <i class="fa fa-paper-plane fa-lg" style="color: #f8a632"></i> Send Text </a> </li> <li tooltip-placement="top" ng-if="!getContact().contact_mobile_number" uib-tooltip="No Mobile Number Available"> <a> <i class="fa fa-paper-plane fa-lg" style="color: grey"></i> Send Text </a> </li> <li ng-repeat="phone in getContact().phones" class="dropdown-item chat-option" ng-click="makeCall(phone.phone_number)" ng-if="phone.phone_label && phone.phone_number"> <a> <i class="fa fa-phone" style="color: #8adbf6"></i> {{phone.phone_number | tel}} </a> </li> <li ng-if="getContact().contact_email_address && getContact().contact_email_address!=\'\'" tooltip-placement="top" uib-tooltip="{{::getContact().contact_email_address}}" ng-click="startEmailClient()" class="dropdown-item chat-option"> <a> <i class="fa fa-envelope-o fa-lg" style="color: #64d76c"></i> Send Email </a> </li> <li tooltip-placement="top" style="display: inline-block" ng-if="getContact().contact_type==\'user\'" uib-tooltip="Videoconference" ng-click="sendVideoInvite(getContact())"> <a> <i class="fa fa-video-camera fa-lg" style="color: #f8a632"></i> Send Video Invite </a> </li> <li ng-if="isCurrentUsersPost()" class="divider"></li> <li ng-if="isCurrentUsersPost()"> <a ng-click="editMessage(post)"> <i class="fa fa-pencil fa-lg primaryfont"></i> Edit Message </a> </li> <li ng-if="isCurrentUsersPost()"> <a ng-click="deleteMessage(post)"> <i class="fa fa-minus-circle redfont"></i> Delete Message </a> </li> </ul> <i class="fa fa-mail-reply dktealfont" ng-click="openThread()(post)" ng-if="!isThreaded" tooltip-placement="bottom-right" uib-tooltip="{{isThreadPost(posts[item]) ? \'Reply to Thread\' : \'Start a Thread\'}}"> </i> </div>'),
a.put("views/chat/previewfile.html",'<div> <div class="modal-body" id="modal-body"> <div style="width: 100%; height: 100%; text-align: center" id="imagetocopy"> <img src="{{vm.content.data.obj}}" style="{{thumbDimensions(mediaUrl+vm.content.data, \'preview\')}}; max-width: 100%"> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <button class="btn btn-primary btn-md" id="copyimage"><i class="fa fa-copy" style="margin-right: 10px"></i>Copy Image</button> <a class="btn btn-primary btn-md" href="{{vm.content.data.obj}}" download target="_blank"><i class="fa fa-download" style="margin-right: 10px"></i>Download</a> </div> </div> <script>function SelectText(element) {\n            var doc = document;\n            if (doc.body.createTextRange) {\n                var range = document.body.createTextRange();\n                range.moveToElementText(element);\n                range.select();\n            } else if (window.getSelection) {\n                var selection = window.getSelection();\n                var range = document.createRange();\n                range.selectNodeContents(element);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n        $("#copyimage").click(function (e) {\n            //Make the container Div contenteditable\n            $(\'#imagetocopy\').attr("contenteditable", true);\n            //Select the image\n            SelectText($(\'#imagetocopy\').get(0));\n            //Execute copy Command\n            //Note: This will ONLY work directly inside a click listenner\n            document.execCommand(\'copy\');\n            //Unselect the content\n            window.getSelection().removeAllRanges();\n            //Make the container Div uneditable again\n            $(\'#imagetocopy\').removeAttr("contenteditable");\n            //Success!!\n            alert("Image copied!");\n        });</script>'),a.put("views/chat/search-message-display.html",'<div class="chat-search-header"> <div class="input-group"> <span class="input-group-addon" title="search"><i class="fa fa-search"></i></span> <input class="form-control" type="text" ng-enter="search.sendSearch(search.searchText)" ng-model="search.searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> <div class="chat-search-subheader"> <p class="title">Search Results: {{search.results.order.length}} Result(s) Found</p> <i class="fa fa-sign-out md-icon" ng-click="closeDisplay()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.close_search}}"></i> </div> <div class="chat-search-content"> <chat-search-result ng-repeat="result in search.results.order" post-id="result" results="search.results" show-post-in-channel="showPostInChannel"> </chat-search-result> </div>'),a.put("views/chat/sharepost.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-share fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Share Message</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-wechat"></i></span> <textarea class="form-control" type="text" ng-model="chat.sharepost.newmessage" placeholder="Add a message if you would like"></textarea> </div> Share in: <div class="input-group"> <span class="input-group-addon" title="Voicemail Language"><i class="fa fa-edit"></i></span> <select class="selectpicker form-control" ng-model="vmLanguage"> <optgroup label="Channels"> <option ng-repeat="channel in availableChannels" value="{{channel.id}}"># {{channel.name}}</option> </optgroup> <optgroup label="Direct Messages"> <option ng-repeat="user in directMessageList" value="{{user.id}}">{{user.first_name}} {{user.last_name}} (@{{user.username}})</option> </optgroup> </select> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click=""><i class="fa fa-save" style="margin-right: 10px"></i>Share</button> </div> </div> </div>'),a.put("views/chat/subscribechannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Subscribe to Available Channels </span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.display_name" placeholder="Search by channel name"> </div> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="channel in unsubscribedChannels | filter:search"> <td class="col-sm-9"> {{channel.display_name}}<br> <span ng-if="channel.purpose != \'\'"> {{channel.purpose}} </span> </td> <td class="col-sm-3"> <button class="btn btn-success btn-sm" ng-click="subscribeToChannel(channel)"> <i class="fa fa-plus"></i> Subscribe </button> </td> </tr> <tr ng-if="unsubscribedChannels.length===0"> <td colspan="2"> <h4>No more channels to join</h4> Click \'Create New Channel\' to make a new one </td> </tr> </table> </div> <div class="modal-footer"> <button class="btn btn-success btn-md" ng-click="closeModal();showModal(\'/chat/addchannel.html\');"> <i class="fa fa-plus" style="margin-right: 10px"> </i> Create New Channel </button> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Close Window </button> </div> </div>'),a.put("views/chat/threaded-message-display.html",'<div class="top-thread-display-bar"> <h4 class="message-thread">Message Thread</h4> <i class="fa fa-sign-out md-icon" ng-click="closeDisplay()()" tooltip-placement="bottom-right" uib-tooltip="Close thread"> </i> </div> <div class="posts-container"> <chat-post class="root-post" channel="channel()" data-post-id="{{rootPost.id}}" ng-if="rootPost" class="threaded-root-post" is-threaded="true" is-threaded-root-post="true" post="rootPost"> </chat-post> <chat-post ng-repeat="order in rootPost.postInfo.order" ng-class="{\'is-consecutive-post\': getOrderPost(order).isConsecutive}" channel="channel()" data-threaded-post-id="{{getOrderPost(order).id}}" is-threaded="true" post="getOrderPost(order)"> </chat-post> </div> <chat-macro-suggestion-list ng-if="showMacrosList && inputElement" input-element="inputElement" parent-data="macrosListData"> </chat-macro-suggestion-list> <chat-people-suggestion-list ng-if="showPeopleList && inputElement" input-element="inputElement" parent-data="peopleListData"> </chat-people-suggestion-list> <chat-channels-suggestion-list ng-if="showChannelList && inputElement" input-element="inputElement" parent-data="channelListData"> </chat-channels-suggestion-list> <div class="input-container"> <span class="chat-input"> <textarea class="include-emojis" name="chatMessage" placeholder="Write a message" class="chat-input" rows="2" ng-show="rootPost" send-post="sendPost()" uploader="uploader" root-post="rootPost" key-press-event-fns="keyPressFns" people-data="peopleListData" channel-data="channelListData" macro-data="macrosListData" ng-if="keyPressFns" is-threaded-input="true" key-press-chat>\n        </textarea> </span> <span class="chat-upload"> <label tooltip-placement="left" uib-tooltip="Upload files to channel"> <i class="fa fa-paperclip"></i> <input ng-if="uploader" type="file" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </span> <span class="chat-send"> <button class="btn btn-default btn-xs" ng-click="sendPost()(inputElement, channel(), sendPostOpts)"> Send </button> </span> <!-- <p class="users-currently-typing">{{currentTypingMessage()}}</p> --> <div class="post-uploading" ng-if="showUploadingFiles"> <chat-post-upload-preview show="showUploadingFiles" sendmessage="sendMessage" uploader="uploader"> </chat-post-upload-preview> </div> </div>'),a.put("views/chat/unsubscribechannel.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Unsubscribe?</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.display_name}}</h4> <div ng-if="vm.content.data.channel.type!=\'D\'" class="cls-title-cont-modal">Are you sure you want to unsubscribe from this Channel? </div> <div ng-if="vm.content.data.channel.type==\'D\'" class="cls-title-cont-modal">Are you sure you want to close the direct message with {{vm.content.data.channel.memberstring}}? </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="vm.content.data.unsubscribeChannel(vm.content.data.channel)"><i class="fa fa-external-link" style="margin-right: 10px"></i>Confirm </button> </div> </div>'),a.put("views/chat/viewchannelinfo.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Edit Purpose for {{channel.name}}</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> Describe how this Channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join. <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question"></i></span> <textarea class="form-control" type="text" ng-model="chat.editchannel.purpose" placeholder="Purpose of the Channel (optional)"></textarea> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="modifyChannelPurpose()"><i class="fa fa-save" style="margin-right: 10px"></i>Schedule</button> </div> </div> </div>'),a.put("views/chat/viewmember.html",'<div ng-controller="ChatPlusCtrl"> <div class="modal-member-image"> <div ng-bind-html="viewMemberPhoto(vm.content.data.contact)"></div> </div> <div class="modal-body" id="modal-body"> <span class="view-member-header">{{vm.content.data.user.first_name}} {{vm.content.data.user.last_name}}</span> <ul class="chat-view-member"> <li ng-click="vm.content.data.createDirectChannel(vm.content.data.user)">Direct Message</li> <li ng-click="vm.content.data.makeCall(vm.content.data.contact.extension)">Call User at Ext: {{vm.content.data.contact.extension}}</li> <li ng-if="vm.content.data.contact.smsnumber" ng-click="showModalWithData(\'/sms/sendsmstop.html\', vm.content.data.contact)">Send SMS ({{vm.content.data.contact.contact_mobile_number | tel}})</li> <li><a ng-click="startEmailClient(vm.content.data.contact.contact_email-address)">Send Email to {{vm.content.data.contact.contact_email_address}}</a></li> <li>Video Chat (Coming)</li> </ul> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div>'),a.put("views/chatcontact.html","<script>// ********** PARA EL SCROLL TIPO FACEBOOK **********//    \n    // $(function() {  \n    //         $('.cls-chat-box').jScrollPane({\n    //             verticalGutter: 5,\n    //             'showArrows': false,\n    //             autoReinitialise: true\n    //         });\n\n    //         $('.jspDrag').hide();\n    //         $('.jspScrollable').mouseenter(function(){\n    //             $(this).find('.jspDrag').stop(true, true).fadeIn('slow');\n    //         });\n    //         $('.jspScrollable').mouseleave(function(){\n    //             $(this).find('.jspDrag').stop(true, true).fadeOut('slow');\n    //         });\n"+'    // });</script> <div> <div class="cls-chat-contact-sel"> <div class="cls-mnu-contact-selected" ng-controller="ContactDetailsCtrl"> <div ng-include="\'views/contactdetails.html\'"></div> </div> <div class="cls-chat-box" ng-controller="ContactDetailsCtrl"> <div> <div ng-repeat="persons in contacts"> <span>{{persons.name}}</span> </div> <div ng-repeat="persons in contacts"> <span>{{persons.name}}</span> </div> <div ng-repeat="persons in contacts"> <span>{{persons.name}}</span> </div> </div> </div> <div class="cls-chat-type-tex-div"> <div class="col-lg-6"> <textarea class="cls-chat-type-tex-box"></textarea> </div> <div class="col-lg-2"> <button class="btn btn-lg btn-default cls-color-blue-tkg"><i class="fa fa-commenting"></i> send</button> </div> </div> </div> </div>'),a.put("views/chatplus.html",'<div ng-show="chatDisabled"> {{::DisableChatMessage}} </div> <div ng-show="!chatDisabled" class="{\'withchatsearch\': (showSearchBox || showThreadedMessagePanel), \'well\':1===1, \'my-drop-zone\':1===1" nv-file-drop="" nv-file-over="" uploader="uploader" id="chat-content-container" ng-controller="ChatPlusCtrl"> <div id="main-chat-container"> <div id="chat-channel-header"> <div ng-class="{\'col-md-12\': (showSearchBox || showThreadedMessagePanel), \'col-xs-7\': (!showSearchBox && !showThreadedMessagePanel)}"> <div ng-if="curChannel.type!=\'D\'" class="channeloptions btn-group"> <span> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu"> <li ng-class="{hideentity : channel.display_name == \'\' }" ng-repeat="channel in availableChannels track by $index"><a ng-click="displayChannel(channel)"><i class="fa fa-{{channel.type == \'P\' ? \'lock\' : \'globe\'}} fa-lg channeltype"></i> {{channel.display_name}}</a></li> </ul> </span> <span><i class="fa fa-{{curChannel.type === \'P\' ? \'lock\' : \'globe\'}} fa-lg channeltype"></i> {{curChannel.display_name}}</span> </div> <div ng-if="curChannel.type ==\'D\'" class="channeloptions btn-group"> <span> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-if="preference.value==\'true\'" ng-repeat="preference in allPreferences | filter : {\'category\' : \'direct_channel_show\'} "><a ng-click="showDirectMessage(preference.name)"><i class="fa fa-wechat fa-lg" style="color: #0073a5"></i> {{teamUsers[preference.name].first_name+\' \'+teamUsers[preference.name].last_name}}</a></li> </ul> </span> <span>Direct Message: {{curChannel.memberstring }} </span> </div> <span ng-if="curChannel && (curChannel.members|numKeys)>0"> ({{curChannel.members|numKeys}} Members)</span> <div style="float: right"> <span ng-show="(copySelected | objLength)>0" class="chat-save-box"> <i ng-show="user.exportType.partner_code == \'hawksoft\'" class="fa fa-floppy-o fa-2x" ng-click="saveCopiedMessages()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.copy_to_hawksoft}}"></i> <i ng-show="user.exportType.partner_code == \'generic\'" class="fa fa-floppy-o fa-2x" ng-click="saveCopiedMessages()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.copy_to_management}}"></i> </span> <span ng-hide="(copySelected | objLength)>0" class="chat-copy-box" ng-click="toggleCopyMode()"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_hawksoft_copy}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_generic_export}}"> </span> <div class="btn-group"> <span data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.manage_channel}}"> <i class="fa fa-gear fa-2x" style="opacity: 0.5"></i> </span> <ul class="dropdown-menu"> <li ng-if="curChannel.isAdmin"><a ng-click="showModalWithData(\'/chat/editchannel.html\',curChannel)"><i class="fa fa-edit"></i>Edit Channel{{curChannel.type==\'P\' ? \' / Members\' : \'\' }}</a></li> <li ng-if="curChannel.isAdmin && curChannel.type==\'O\'"><a ng-click="showModalWithData(\'/chat/managechannelmembers.html\',curChannel)"><i class="fa fa-plus"></i>Add Members to Channel</a></li> <li ng-if="!curChannel.isAdmin"><a ng-click="showModalWithData(\'/chat/unsubscribechannel.html\',curChannel)"><i class="fa fa-external-link"></i>Leave {{curChannel.type==\'D\' ? \'Direct Message\' : \'Channel\'}}</a></li> <li class="divider"></li> <li ng-if="curChannel.isAdmin"><a ng-click="showModalWithData(\'/chat/deletechannel.html\',curChannel)"><i class="fa fa-trash fa-lg" style="color: red"></i>Delete Channel</a></li> </ul> </div> </div> </div> <div class="col-md-5" ng-show="enableCopyMode && user.exportType.partner_code == \'hawksoft\'"> Select the chat messages you want to export to HawkSoft Inbox<br> <span ng-show="(copySelected | objLength)>0">{{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to HawkSoft Inbox</span> </div> <div class="col-md-5" ng-show="enableCopyMode && user.exportType.partner_code == \'generic\'"> Select the chat messages you want to export to Management System Inbox<br> <span ng-show="(copySelected | objLength)>0">{{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to Management System Inbox</span> </div> <div class="col-md-5" ng-show="!showSearchBox && !enableCopyMode && !showThreadedMessagePanel"> <div class="input-group"> <span class="input-group-addon" title="search"><i class="fa fa-search"></i></span> <input class="form-control" type="text" ng-enter="doSearch(searchText)" ng-model="searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> </div> <div id="chat-post-list" ng-class="{\'shrunk-chat-post-list\': showUploadingFiles}"> <div class="postareatopheader" ng-if="curChannel.header!=\'\' || curChannel.purpose!=\'\'"> <h4 ng-if="curChannel.header != \'\'" ng-bind-html="curChannel.header | linky:\'_blank\'"></h4> <p ng-if="curChannel.purpose != \'\'" ng-bind-html="curChannel.purpose | linky:\'_blank\'"></p> </div> <div class="cls-cont-table-main" ng-show="loadingChannel" style="text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i><br> Loading... </div> <div class="cls-cont-table-main" ng-show="!loadingChannel"> <div ng-if="teamId == \'\'"> Your user profile is not currently associated with a Chat Team Group. Please contact your site administrator. </div> <div ng-if="curChannel.type===\'O\'" class="currentuserpost" style="padding: 10px" ng-show="order.length == 0"> <h4>Beginning of {{curChannel.display_name}}</h4> This is the start of the {{curChannel.display_name}} channel, created on {{curChannel.create_at | amUtc | amLocal | amDateFormat:\'dddd, MMMM Do YYYY\'}}. Any team member can join and read this channel. </div> <div ng-if="curChannel.type===\'P\'" class="currentuserpost" style="padding: 10px" ng-show="order.length == 0"> <h4>Beginning of {{curChannel.display_name}}</h4> This is the start of the {{curChannel.display_name}} channel, created on {{curChannel.create_at | amUtc | amLocal | amDateFormat:\'dddd, MMMM Do YYYY\'}}. This channel is Private so only team members you invite can participate in the channel. </div> <div ng-if="curChannel.type===\'D\'" class="currentuserpost" style="padding: 10px" ng-show="order.length == 0"> <h4>This is the start of your direct message history with <strong>{{curChannel.memberstring}}</strong></h4> Direct messages and files shared here are not shown to people outside this area. </div> <div ng-if="curChannel.total_msg_count>50 && order.length<curChannel.total_msg_count" class="date-separator datedisplay"> <div class="separator__text"> <a href="" ng-click="loadPreviousMessages()"> Load Earlier Messages </a> </div> </div> <div ng-show="teamId != \'\'" ng-repeat="item in order" on-finish-render="ngRepeatFinished" my-scroll-directive> <div class="date-separator datedisplay" ng-if="showDateSeparator[item]"> <hr class="separator__hr"> <div class="separator__text"> <span>{{posts[item].create_at | date:\'EEE MMM d, y\' }}</span> </div> </div> <div class="date-separator datedisplay" ng-if="newMessagesStart[curChannel.id] == item"> <hr class="separator__hr"> <div class="separator__text"> <span>New Messages</span> </div> </div> <div id="post_{{item}}" class="post {{copySelected[item] ? \'copy-highlight\' : \'\'}}" ng-click="enableCopyMode && copyMessage(item)" style="{{posts[item].searchItem ? \'background-color: rgba(0, 115, 165, 0.2);\' : \'\'}}"> <div class="postphoto clearfix"> <div class="padded dropdown"> <div ng-class="showProfileInfo[item] || $index==0 ? \'postdatehide\' : \'postdateshow\'">{{posts[item].create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}}</div> <a ng-bind-html="showMemberPhoto(u[item], \'\')" class="dropdown-toggle" ng-if="(uid[item] != puid[item] || showProfileInfo[item] || $index==0)"> </a> <div class="dropdown-menu" aria-labelledby="dropdownMenuLink"> <chat-options item="item"> </chat-options> </div> </div> </div> <div class="postbody clearfix"> <div ng-show="(uid[item] != puid[item] || showProfileInfo[item] || $index==0) && !isFirstThreadPost(posts[item], $index)" class="postheader"> <ul class="headerinfo"> <li class="chatprofilename"> {{u[item].first_name}} {{u[item].last_name}}</li> <li><span class="postdate">{{posts[item].create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}}</span> <span class="postdate" am-time-ago="posts[item].create_at"></span></li> </ul> </div> <div ng-show="isFirstThreadPost(posts[item], $index)" class="postheader"> <ul class="headerinfo"> <li class="chatprofilename"> {{u[item].first_name}} {{u[item].last_name}}</li> <li> <span class="postdate"> {{posts[item].create_at | amUtc | amLocal | amDateFormat:\'h:mm a\'}} </span> <span class="postdate" am-time-ago="posts[item].create_at"></span> </li> </ul> <p>Commented on {{threadPostRootUserName(posts[item])}}\'s message: <a ng-click="openThread(item)">{{threadPostRootPost(posts[item]).message}}</a></p> </div> <div ng-class="{currentuserpost : uid[item] == mmProfile.id, postmessage : uid[item] == uid[item], \'thread-post\': isThreadPost(posts[item]), \'first-thread-post\': isFirstThreadPost(posts[item], $index)}" ng-if="emojisInitialized"> <div marked="posts[item].message | linky:\'_blank\' | nl2br | emojis | callouts" compile="true"> </div> <div class="giphy-img-container" ng-if="isGiphyLink(posts[item].message) && posts[item].message"> <img class="giphy-img" src="{{posts[item].message}}"> </div> <chat-post-files-display show="showFilesDisplayForPost(posts[item])" post="posts[item]"> </chat-post-files-display> </div> </div> <div class="postaction"> <div class="rowdisplay"> <div class="btn-group dropup"> <button class="btn btn-default btn-sm postactiongroup" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.show_actions}}"><i class="fa fa-ellipsis-h"></i></button> <ul class="dropdown-menu pull-right"> <li class="divider"></li> <li ng-if="uid[item] == mmProfile.id"> <a ng-click="showModalWithData(\'/chat/editpost.html\',posts[item])"> <i class="fa fa-pencil fa-lg" style="color: #0c6c2c"></i> Edit Message </a> </li> <li ng-if="uid[item] == mmProfile.id"> <a ng-click="showModalWithData(\'/chat/deletepost.html\',posts[item])"> <i class="fa fa-minus-circle fa-lg" style="color: #e30400"></i> Delete Message </a> </li> </ul> <button class="btn btn-default btn-sm postactiongroup" ng-click="openThread(item)" tooltip-placement="bottom-right" uib-tooltip="{{isThreadPost(posts[item]) ? \'Reply to Thread\' : \'Start a Thread\'}}"> <i class="fa fa-mail-reply"></i> </button> </div> </div> </div> <div class="cleared"></div> </div> </div> <div ng-if="showingSearchResult" class="date-separator datedisplay"> <div class="separator__text"> <a href="" ng-click="loadAfterMessages()"> Load More Messages </a> </div> </div> <div ng-if="showingSearchResult" class="date-separator datedisplay"> <div class="separator__text"> <a href="" ng-click="goToCurrentPosts()"> Go To Current Messages </a> </div> </div> <div id="chat-bottom">&nbsp;</div> </div> {{done}} <br> </div> <div id="chat-post-create"> <div class="textarea-wrapper"> <div class="suggestion-list" ng-show="suggestionData.showPeopleSuggestionList"> <div class="suggestion-list-content"> <div class="suggestion-list-header">People <span class="pull-right light-font right-text"><span class="pad-right-15"><i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate</span><span class="pad-right-15">tab to select</span><span class="pad-right-15">esc to dismiss</span></span> </div> <div class="suggestion-list-items" ng-init="predicate=\'username\'; reverse=false;"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: suggestionData.filterPersonData[suggestionData.selectedIndex].id === member.id}" ng-repeat="member in suggestionData.filterPersonData = (teamUsersArray | orderBy : predicate :reverse  | filter:filterCallouts)" ng-click="insertMention(member.username)"><span class="suggest-icon" ng-bind-html="showMemberPhoto(member, \'-sm\')"></span> <span style="margin: 0 15px"><strong>@{{member.username}}</strong> <span>{{member.first_name}} {{member.last_name}}</span></span> </div> </div> </div> </div> <div class="suggestion-list" ng-show="suggestionData.showChannelSuggestionList"> <div class="suggestion-list-content"> <div class="suggestion-list-header">Channels <span class="pull-right light-font right-text"><span class="pad-right-15"><i class="fa fa-long-arrow-up"></i> <i class="fa fa-long-arrow-down"></i> to navigate</span><span class="pad-right-15">tab to select</span><span class="pad-right-15">esc to dismiss</span></span> </div> <div class="suggestion-list-items"> <div class="suggestion-list-mention member-mention" ng-class="{selectedperson: suggestionData.filterChannelData[suggestionData.selectedIndex].id === channel.id}" ng-repeat="channel in suggestionData.filterChannelData = (availableChannels | filter:filterChannelCallouts) track by $index" ng-click="insertMention(channel.name)"><span class="suggest-icon"><i class="fa fa-{{channel.type == \'P\' ? \'lock\' : \'globe\'}} fa-lg" style="font-size: 18px; width: 25px; text-align: center"></i></span><strong> #{{channel.name}}</strong> <span>{{channel.display_name}}</span></div> </div> </div> </div> <chat-macro-suggestion-list></chat-macro-suggestion-list> <div class="chat-post-create-body"> <div class="input-group"> <span class="input-group-addon" style="padding: 0"> <label style="width: 100%; height: 100%; cursor: pointer; padding: 5px" tooltip-placement="top-left" uib-tooltip="{{::tips.chatplus.upload_files_to_channel}}"> <i class="fa fa-plus fa-2x"></i> <input ng-if="uploader" type="file" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </span> <textarea class="form-control include-emojis" key-press-chat send-message="sendMessage" chat-message="" rows="2" suggestion-data="suggestionData" chat-data="chat" name="txtNameGiven" id="chatInput">\n                        </textarea> </div> </div> <p class="users-currently-typing">{{currentTypingMessage()}}</p> <chat-post-upload-preview show="showUploadingFiles" sendmessage="sendMessage" uploader="uploader"> </chat-post-upload-preview> </div> </div> <div class="wdt-emoji-popup" ng-style="{top: emojiLocation + \'px !important\'}"> <a href="#" class="wdt-emoji-popup-mobile-closer"> &times; </a> <div class="wdt-emoji-menu-content"> <div id="wdt-emoji-menu-header"> <a class="wdt-emoji-tab active" data-group-name="Recent"></a> <a class="wdt-emoji-tab" data-group-name="People"></a> <a class="wdt-emoji-tab" data-group-name="Nature"></a> <a class="wdt-emoji-tab" data-group-name="Foods"></a> <a class="wdt-emoji-tab" data-group-name="Activity"></a> <a class="wdt-emoji-tab" data-group-name="Places"></a> <a class="wdt-emoji-tab" data-group-name="Objects"></a> <a class="wdt-emoji-tab" data-group-name="Symbols"></a> <a class="wdt-emoji-tab" data-group-name="Flags"></a> <a class="wdt-emoji-tab" data-group-name="Custom"></a> </div> <div class="wdt-emoji-scroll-wrapper"> <div id="wdt-emoji-menu-items"> <input id="wdt-emoji-search" type="text" placeholder="Search"> <h3 id="wdt-emoji-search-result-title">Search Results</h3> <div class="wdt-emoji-sections"></div> <div id="wdt-emoji-no-result">No emoji found</div> </div> </div> <div id="wdt-emoji-footer"> <div id="wdt-emoji-preview"> <span id="wdt-emoji-preview-img"></span> <div id="wdt-emoji-preview-text"> <span id="wdt-emoji-preview-name"></span><br> <span id="wdt-emoji-preview-aliases"></span> </div> </div> <div id="wdt-emoji-preview-bundle"> </div> </div> </div> </div> </div> <div id="chat-sidebar-container" ng-show="showSearchBox || showThreadedMessagePanel"> <div class="sidebar-content" id="chat-search-results" ng-show="showSearchBox"> <div id="chat-search-container"> <div id="chat-search-header"> <div class="input-group"> <span class="input-group-addon" title="search"><i class="fa fa-search"></i></span> <input class="form-control" type="text" ng-enter="doSearch(searchText)" ng-model="searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> <div id="chat-search-subheader"> <p class="title">Search Results: {{chatSearchResultsOrder.length}} Result(s) Found</p> <i class="fa fa-sign-out md-icon" ng-click="closeSearch()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.close_search}}"></i> </div> <div id="chat-search-content"> <div ng-repeat="result in chatSearchResultsOrder"> <div class="search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span>{{chatSearchResultsPosts[result].create_at | date:\'EEE MMM d, y\' }}</span> </div> </div> <div class="chatSearchItem"> <div ng-bind-html="showSearchChannel(result)"></div> <div class="row"> <div ng-bind-html="showSearchResult(result)" class="col-sm-9"></div> <div class="col-sm-3" ng-click="goToSearchResult(chatSearchResultsPosts[result].channel_id, result)"><span tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.jump_to_result}}"><i class="fa fa-reply"></i> Jump</span></div> </div> </div> </div> </div> </div> </div> <threaded-message-display show="showThreadedMessagePanel" ng-show="showThreadedMessagePanel" root-post="threadPost"> </threaded-message-display> </div> </div>'),a.put("views/cloudstorage/cloudpermissions-modal.html",'<div ng-controller="CloudFileCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Manage Folder Permissions</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-sm-12"> <span class="smfont normal"> <strong>Viewers: </strong>Select the users that can view the folder and it\'s contents.<br> <strong>Managers: </strong>Select users that can add and remove files and folders inside this folder.</span>  <table id="data-table-top" class="table table-bordered table-hover table-striped" style="width: 100%-13px"> <thead> <tr> <th colspan="3"><div class="input-group" style="width: 100%; height: 36px"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control normal" type="text" ng-model="search.contact_name_full" style="height: 36px" placeholder="Filter by Name"> <span class="input-group-addon"><button class="btn btn-default btn-xs" ng-click="clearFilter()">Clear Filter</button></span> </div> </th> </tr> </thead> </table> <div class="scroll-container" ng-style="{height: modalTableHeight + \'px\'}" style="max-height: 300px"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody> <tr ng-if="contact.user_uuid != user.id && contact.user_uuid && vm.content.data.user_uuid != contact.user_uuid" ng-repeat="contact in userContacts | filter:search | filter: {contact_type : \'user\'}"> <td style="width: 33%"> {{contact.contact_name_given}} {{contact.contact_name_family}} </td> <td style="width: 66%" ng-init="permissions[contact.user_uuid] = hasPermission(vm.content.data.permissions, contact.user_uuid)"> <md-radio-group ng-model="permissions[contact.user_uuid]" layout="row"> <md-radio-button value="none" class="md-primary"> N/A</md-radio-button> <md-radio-button value="viewer"> Viewer</md-radio-button> <md-radio-button value="manager"> Manager</md-radio-button> </md-radio-group> </td> </tr> </tbody> </table> </div> </div> </div> <hr> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="storeFolderPermissions(permissions, vm.content.data)"><i class="fa fa-save" style="margin-right: 10px"></i> Update Permissions</button> </div> </div>'),
a.put("views/cloudstorage/cloudstorage.html",'<div id="storeandshare-content-container"> <div id="main-storeandshare-container"> <div class="cloudstorageheader"> <div class="tablecell cloudtitle"> <h3>Store & Share</h3> </div> <div class="tablecell cloud-search" ng-show="!showSearchBox"> <div class="input-group"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-enter="doCloudSearch(cloud.searchText)" ng-model="cloud.searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.storeandshare.submit_search}}"> </div> </div> </div> <div class="fs-user-files"> <div class="row"> <div file-display-table search="showSearchBox" root="userRootFolder" uploader="uploader"> </div> </div> </div> <a id="download_link" style="display:none" download="foo.pdf"> </a> </div> <div id="storeandshare-sidebar-container" ng-show="showSearchBox"> <div id="storeandshare-search-container"> <div id="storeandshare-search-header"> <div class="input-group"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-enter="doCloudSearch(cloud.searchText)" ng-model="cloud.searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.storeandshare.submit_search}}"> </div> </div> <div id="storeandshare-search-subheader"> <p class="title"> Search Results:<br> {{cloud.filesFound.length}} File{{cloud.filesFound.length===1 ? \'\' : \'s\'}} Found & {{cloud.foldersFound.length}} Folder{{cloud.foldersFound.length===1 ? \'\' : \'s\'}} Found </p> <i class="fa fa-sign-out md-icon" ng-click="closeSearch()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.storeandshare.close_search}}"> </i> </div> <div id="storeandshare-search-content"> <div ng-repeat="folder in cloud.foldersFound | orderBy: \'created_at\':false"> <div class="search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span> {{folder.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY, h:mm a\'}} </span> </div> </div> <div class="chatSearchItem"> <div class="row"> <div class="col-sm-9"> <div class="message-container clearfix"> <span class="cloud-item-name cloud-item-image-box"> <img class="cloud-flat-img cloud-{{getFolderType(folder)}}" src="/images/Folders/folder-48.325006e1.png"> </span> <span class="cloud-item-name search-name">{{folder.folder_name}}</span> </div> </div> <div class="col-sm-3" ng-click="goToFolder(folder)"> <span tooltip-placement="bottom-right" uib-tooltip="{{::tips.storeandshare.jump_to_result}}"> <i class="fa fa-reply fa-2x"></i> </span> </div> </div> </div> </div> <div ng-repeat="file in cloud.filesFound | orderBy: \'created_at\':false"> <div class="search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span> {{file.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY, h:mm a\'}} </span> </div> </div> <div class="chatSearchItem"> <div class="row"> <div class="col-sm-9"> <div class="message-container clearfix"> <span class="cloud-item-name cloud-item-image-box"><img class="cloud-flat-img cloud-{{getFileType(file)}}" src="/images/Files/file-48.d309c30a.png"></span> <span class="cloud-item-name search-name">{{file.original_filename}}<br> {{file.file_size}}</span> </div> </div> <div class="col-sm-3" ng-click="goToFile(file)"> <span tooltip-placement="bottom-right" uib-tooltip="{{::tips.storeandshare.jump_to_result}}"> <i class="fa fa-reply fa-2x"></i> </span> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/cloudstorage/file-display-table.html",'<div ng-show="search" class="display-buttons-on-search button-box"> <button class="btn btn-success" ng-class="{\'button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showFileShareModal()"><i class="fa fa-file-o"></i> Share a File</button> <button class="btn btn-success" ng-class="{\'button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showRequestFiles()"><i class="fa fa-copy"></i> Request Files</button> <button class="btn btn-success" ng-class="{\'button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showShareLogs()" ng-if="!display.showingShares"><i class="fa fa-list"></i> Shared File Logs</button> <button class="btn btn-success" ng-class="{\'button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showFolders()" ng-if="display.showingShares"><i class="fa fa-folder-o"></i> View Folders</button> </div> <div class="display-table-info"> <div class="display-table-left"> <div ng-show="!search" class="button-box"> <button class="btn btn-success" ng-class="{\'btn-xs button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showFileShareModal()"><i class="fa fa-file-o"></i> Share a File</button> <button class="btn btn-success" ng-class="{\'btn-xs button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showRequestFiles()"><i class="fa fa-copy"></i> Request Files</button> <button class="btn btn-success" ng-class="{\'btn-xs button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showShareLogs()" ng-if="!display.showingShares"><i class="fa fa-list"></i> Shared File Logs</button> <button class="btn btn-success" ng-class="{\'btn-xs button-pad-right5\': search, \'button-pad-right\': !search}" ng-click="showFolders()" ng-if="display.showingShares"><i class="fa fa-folder-o"></i> View Folders</button> </div> <div class="notices"> <div style=""> <div ng-repeat="success in cloudSuccess" uib-alert ng-class="\'alert-success\'" dismiss-on-timeout="6000" close="closeSuccess($index)">{{success.message}}</div> <!-- <div ng-if="showErrorMsg" uib-alert ng-class="\'alert-danger\'" dismiss-on-timeout="8000" close="closeError()">{{errorMsg}}</div> --> <div ng-if="cloudErrors.length>0" uib-alert ng-class="\'alert-danger\'" close="closeError()"> <ul> <li ng-repeat="error in cloudErrors">{{error.message}}</li> </ul> </div> <uib-progressbar max="max" value="progressBarPercentage" type="success" class="cloud-progress-bar" ng-show="progressBarPercentage > 0"> <span style="color:white; white-space:nowrap; font-weight: bold"> {{progressBarPercentage}}% </span> </uib-progressbar> </div> <div> <div class="folder-back"> <span class="folder-back-icon"> <img src="images/Folders/up_left-48.b9cc6f32.png" class="cloud-flat-img fs-ascend" ng-show="root.parent_folder_uuid" ng-click="ascend()" ng-drop="true" ng-drop-success="onDrop($data, rootParent(), $event)" ng-drag-move="dragMove($event)" ng-drag-stop="stopDrag($event)" ng-drag-start="dragStart($event)" ng-center-anchor="true" scroll-parent="true"> </span> <span class="folder-back-name" ng-click="ascend()" ng-show="root.files && root.parent_folder_uuid"> <b>{{root.folder_name}}</b> </span> </div> <div class="perm-upload-spinner"> <span ng-if="showUploadingSpinner()"> <i class="fa fa-cog fa-spin fa-2x" uib-tooltip="Updating folder permissions"> </i> </span> </div> </div> </div> </div> <div class="cloud-create-btns"> <a ng-click="triggerUpload()" class="cloud-upload-doc-btn" uib-tooltip="Upload File" tooltip-placement="bottom"> <img src="images/Files/add_file-48.87fe979b.png" style="cursor: pointer" class="cloud-flat-img"> </a> <a ng-click="addFolder()" class="cloud-create-folder-btn" uib-tooltip="Create New Folder" tooltip-placement="bottom"> <img src="images/Folders/add_folder-48.f1cab91a.png" style="cursor: pointer" class="cloud-flat-img"> </a> </div> <div class="cloud-storage-totals"> My usage: {{getTotalSpaceUsed()}}<br> Cloud Storage used by my agency: {{domainUsage()}} of {{domainLimit()}} </div> </div> <div ng-show="!display.showingShares"> <div> <table class="table fs-file-table"> <thead> <tr> <th ng-click="sortBy(\'original_filename\', \'folder_name\')" class="cloud-name-col"> Name <i ng-show="!sortDown && sortFile == \'original_filename\'" class="fa fa-arrow-down" style="color: black" aria-hidden="true"> </i> <i ng-show="sortDown && sortFile == \'original_filename\'" class="fa fa-arrow-up" style="color: black" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'created_at\', \'created_at\')" class="cloud-updated-col"> Uploaded <i ng-show="!sortDown && sortFile == \'created_at\'" class="fa fa-arrow-down" style="color: black" aria-hidden="true"> </i> <i ng-show="sortDown && sortFile == \'created_at\'" class="fa fa-arrow-up" style="color: black" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'file_size_in_b\', \'\')" class="cloud-filesize-col-header"> File Size <i ng-show="!sortDown && sortFile == \'file_size_in_b\'" class="fa fa-arrow-down" style="color: black" aria-hidden="true"> </i> <i ng-show="sortDown && sortFile == \'file_size_in_b\'" class="fa fa-arrow-up" style="color: black" aria-hidden="true"> </i> </th> <th ng-show="!search"> Uploaded By </th> </tr> </thead> </table> </div> <div class="cloud-scroll-body" context-menu="tableMenuOptions()" nv-file-drop uploader="uploader"> <table class="fs-file-table"> <thead> <tr> <th class="cloud-name-col"></th> <th class="cloud-updated-col"></th> <th class="cloud-filesize-col"></th> <th ng-show="!search"></th> </tr> </thead> <tbody> <tr ng-repeat="folder in root.dummyFolders" class="cloud-row"> <td ng-click context-menu="dummyFolderMenuOptions()" class="cloud-name-col"> <img class="cloud-flat-img cloud-folder" src="/images/Folders/folder-48.325006e1.png"> {{folder.folder_name}} <input type="text" class="form-control file-rename-input" dummy-folder-input ng-model="folder.folder_name" folder="folder" ng-model-options="{updateOn: \'blur\'}"> </td> <td class="cloud-updated-col">{{folder.created_at | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\' }}</td> </tr> <tr ng-repeat="folder in root.folders | orderBy : sortFolder : sortDown" class="cloud-row" ng-if="hasPermission(folder)" ng-drop="true" ng-drop-success="onDrop($data, folder, $event)" ng-drag-move="dragMove($event)" ng-drag-stop="stopDrag($event)" ng-drag-start="dragStart($event)" ng-center-anchor="true" folder-id="{{folder.folder_uuid}}" scroll-parent="true"> <td ng-click="openFolder(folder)" style="cursor: pointer" ng-show="!folder.renaming" cloud-folder folder="folder" class="cloud-name-col" context-menu="folderMenuOptions(folder)"> <span class="cloud-item-name cloud-item-image-box"> <img class="cloud-flat-img cloud-{{getFolderType(folder)}}" src="/images/Folders/folder-48.325006e1.png"> </span> <span class="cloud-item-name">{{folder.folder_name}}</span> </td> <td ng-show="folder.renaming" class="cloud-name-col"> <span class="cloud-item-name cloud-item-image-box"><img class="cloud-flat-img cloud-{{getFolderType(folder)}}" src="/images/Folders/folder-48.325006e1.png"></span> <span class="cloud-item-name"> <input type="text" class="form-control file-rename-input" ng-model="folder.folder_name" cloud-enter ng-blur="renameFolder(folder)" ng-model-options="{updateOn: \'blur\'}"> </span> </td> <td class="cloud-updated-col">{{folder.created_at | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\'}}</td> <td class="cloud-filesize-col">{{folder.folder_size ? folder.folder_size : getFolderSize(folder)}}</td> <td ng-show="!search"></td> </tr> <tr ng-repeat="file in root.files | orderBy : sortFile : sortDown" class="cloud-row" ng-class="{\'highlight-file\': highlightFile.file_uuid===file.file_uuid}" ng-drag="true" ng-drag-data="file" data-file-uuid="{{file.file_uuid}}" allow-transform="false" ng-show="!file.hide"> <td ng-click="viewFile(file)" ng-show="!file.renaming" class="cloud-name-col" cloud-file stop-digest file="file" context-menu="fileMenuOptions(file)"> <span class="cloud-item-name cloud-item-image-box"><img class="cloud-flat-img cloud-{{getFileType(file)}}" src="/images/Files/file-48.d309c30a.png"></span> <span class="cloud-item-name">{{file.original_filename}}</span> </td> <td ng-show="file.renaming"> <span class="cloud-item-name cloud-item-image-box"><img class="cloud-{{getFileType(file)}} cloud-flat-img" src="/images/Files/file-48.d309c30a.png"></span> <span class="cloud-item-name"><input type="text" class="form-control file-rename-input cloud-name-col" ng-value="removeFileExtensionFromFilename(file.original_filename)" cloud-enter ng-blur="renameFile(file, $event.currentTarget.value)" ng-focus-on model="file" focus-event="file.renaming" ng-model-options="{updateOn: \'blur\'}"></span> <!-- ng-model="file.original_filename" --> </td> <td class="cloud-updated-col">{{file.created_at | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\'}}</td> <td class="cloud-filesize-col">{{file.true_file_size}}</td> <td ng-show="!search">{{file.contact_firstname}} {{file.contact_lastname}}</td> </tr> </tbody> </table> <div class="paste-block"><br></div> </div> <p class="cloud-item-count"><b>{{getItemCount()}}</b> items</p> </div> <div ng-if="display.showingShares"> <file-share-table domain="user.domain_uuid"></file-share-table> </div> <input type="file" nv-file-select uploader="uploader" id="cloud-upload" style="display: none" multiple>'),a.put("views/cloudstorage/file-share-table.html",'<div id="file-share-container"> <div ng-if="!showTable" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i><br> Loading... </div> <div ng-show="showTable"> <table class="table" style="margin-bottom: 0"> <tr> <td style="width: 200px"> <label class="bluecolor" for="search">Files per page:</label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-model="perPage"></select> </td> <td style="width: 200px"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </td> <td style="width: 200px"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" ng-change="processToDate(toDate)" placeholder="To"> </div> </td> <td> <div class="input-group"> <span class="input-group-addon" title="Filter Shares"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="shareSearch" placeholder="Filter by Recipient or Filename"> </div> </td> </tr> </table> <div class="file-table-container"> <div class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 120px" ng-click="sortBy(\'created_at\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"> Date / Time <i ng-class="showChevron(\'created_at\')"></i> </span> </th> <th style="width: 230px" ng-click="sortBy(\'recipient_email\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}"> Recipient / Sender <i ng-class="showChevron(\'recipient_email\')"></i> </span> </th> <th class="direction" style="width: 85px" ng-click="sortBy(\'direction\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydirection}}"> <i class="fa fa-arrow-up orangefont" tooltip-placement="top" uib-tooltip="Inbound"></i>/<i class="fa fa-arrow-down dktealfont" tooltip-placement="top" uib-tooltip="Outbound"></i> <i style="font-size: 14px" ng-class="showChevron(\'direction\')"></i> </span> </th> <th ng-click="sortBy(\'original_filename\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyfilename}}"> File <i ng-class="showChevron(\'original_filename\')"></i> </span> </th> <th style="width: 120px" ng-click="sortBy(\'downloaded_at\')"> <span class="colsort" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydownloaded}}"> Downloaded / Received <i ng-class="showChevron(\'downloaded_at\')"></i> </span> </th> <!--<th>Download IP <i class="fa fa-chevron-down"></i></th>--> <th class="button-column">Resend</th> <th class="button-column">Copy</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="filterData.length===0"> <td colspan="6"> There are no File Shares to display </td> </tr> <tr ng-repeat="fileShare in filterData = (sharedFiles | orderBy : predicate :reverse | filter:searchRecipients | filter:filterByMonth) | limitTo:perPage:perPage*(currentPage-1)"> <td>{{fileShare.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td ng-if="fileShare.contact"> <ul class="profile-display"> <li ng-if="fileShare.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{fileShare.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!fileShare.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{fileShare.contact.contact_name_given}} {{fileShare.contact.contact_name_family}}</strong><br> <a ng-click="startEmailClient(fileShare.contact.contact_email_address)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.contact.contact_email_address}}">{{showEmail(fileShare.contact.contact_email_address)}}</a> </li> </ul> </td> <td ng-if="fileShare.noncontact && !fileShare.contact"> <ul class="profile-display" ng-if="fileShare.recipient_email"> <li class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.noncontact.color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="fileShare.noncontact.name" style="display: inline-block"> <i style="" tooltip-placement="top" uib-tooltip="{{tips.contacts.addcontact}}" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus addcontact-icon"></i> <span class="capitalize"><strong>{{fileShare.noncontact.name}}</strong></span><br> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.recipient_email}}">{{fileShare.recipient_email}}</a> </li> <li ng-if="!fileShare.noncontact.name" style="display: inline-block"> <i tooltip-placement="top" uib-tooltip="{{tips.contacts.addcontact}}" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus addcontact-icon"></i> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail}}">{{fileShare.recipient_email.length>30 ? fileShare.recipient_email.substring(0,13)+\'...\'+fileShare.recipient_email.substring(fileShare.recipient_email.length-13,fileShare.recipient_email.length) : fileShare.recipient_email}}</a></li> <li style="text-align: right"><i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus greenfont"></i></li> </ul> </td> <td class="direction"> <i ng-if="fileShare.direction===\'inbound\'" class="fa fa-arrow-up orangefont" tooltip-placement="top" uib-tooltip="Inbound"></i> <i ng-if="fileShare.direction!==\'inbound\'" class="fa fa-arrow-down dktealfont" tooltip-placement="top" uib-tooltip="Outbound"></i> </td> <td><span tooltip-placement="bottom" uib-tooltip="tips.fileshare.downloadfile"><span ng-bind-html="showFileName(fileShare)"></span></span></td> <td> <span ng-if="fileShare.direction!==\'inbound\' && fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.downloaded_at | toLocalTime | amDateFormat:\'h:mm a\'}}</span> <span ng-if="fileShare.direction===\'inbound\'">{{fileShare.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</span> </td> <!--<td><span ng-if="fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_ip}}</span></td>--> <td class="button-column"> <span ng-if="fileShare.direction!==\'inbound\' && !shareExpired(fileShare)"><i ng-click="resendFileShareNotice(fileShare.shared_file_uuid, fileShare.file_uuid)" class="fa fa-share" style="cursor: pointer; font-size: 18px; color: orange" tooltip-placement="top" uib-tooltip="{{tips.fileshare.resendfileshare}}"></i></span> <span ng-if="fileShare.direction!==\'inbound\' && shareExpired(fileShare)"><i class="fa fa-share" tooltip-placement="top" style="font-size: 18px; color:grey" uib-tooltip="{{tips.fileshare.share_expired}}"></i></span> </td> <td class="button-column"> <span ng-show="user.exportType.partner_code == \'hawksoft\'" ng-click="copyShareToHawksoft(fileShare)"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top-right" uib-tooltip="{{::tips.fileshare.copytohawksoft}}"></span> <span ng-show="user.exportType.partner_code == \'generic\'" ng-click="copyShareToHawksoft(fileShare)"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top-right" uib-tooltip="{{::tips.fileshare.copytomanagement}}"></span> </td> </tr> </tbody> </table> </div> </div> <div ng-show="filterData.length > perPage" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> </div> </div> </div>'),a.put("views/cloudstorage/fileshare-modal.html",'<div ng-controller="FileSharingCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-files-o fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Share File</span> <button type="button" class="close" ng-click="closeFileShareModal()"><i class="fa fa-times"></i></button> </div> <form name="frmFileShare"> <div class="modal-body" id="modal-body"> <div class="alert alert-error" ng-show="invalidContactSelected" role="alert" style="margin-top: 10px; display: block"> {{invalidContactSelected}} </div> <div class="alert alert-success" ng-show="msgEmailSent" role="alert" style="margin-top: 10px; display: block"> You have successfully emailed a link to the file! </div> <div ng-hide="msgEmailSent"> <contact-selector type="\'file\'"></contact-selector> <textarea class="form-control" id="fileShareContactSelect" ng-model="contentEmail" style="height: 100px; margin-top: 12px; resize: none" placeholder="Write your message here (Optional)"></textarea> <div ng-if="alertError && alertError !== \'\'" uib-alert ng-class="\'alert-danger\'" dismiss-on-timeout="5000" close="closeFilterAlert()">{{alertError}}</div> <div class="alert alert-info" role="alert" style="margin-top: 10px; text-align: center; display: block"> You are sharing <strong>{{vm.content.data.original_filename}}</strong> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <div ng-show="!msgEmailSent"> <button class="btn btn-default btn-sm" ng-click="closeFileShareModal()"><i class="fa fa-times" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-sm" ng-disabled="contactsSelected.length < 1" ng-click="sendCloudShareFile(vm.content.data)"> <i class="fa fa-envelope-o" style="margin-right: 10px"> </i> Send File </button> </div> <div ng-show="msgEmailSent"> <button class="btn btn-success btn-sm" ng-click="closeFileShareModal()"><i class="fa fa-check" style="margin-right: 10px"></i>Done</button> </div> </div> </form> </div> </div>'),a.put("views/cloudstorage/permissions-modal.html",'<div class="cloud-permissions-modal"> <div class="row"> <div class="col-sm-12"> <table id="data-table-top" class="table table-bordered table-hover table-striped" style="width: 100%-13px"> <thead> <tr> <th style="width: 33%"><div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control normal" type="text" ng-model="search.contact_name_full" placeholder="Filter by Name"> </div> <button class="btn btn-default btn-xs" ng-click="clearFilter()">Clear Filter</button> </th> <th style="width: 33%"><strong>Managers</strong><br> <span class="smfont normal"> Select the users that can view the communications in this group </span> </th> <th style="width: 33%"><strong>Group Members</strong><br> <span class="smfont normal"> Select users whose communications can be viewed by the managers. </span> </th> </tr> </thead> </table> <div class="scroll-container" ng-style="{height: modalTableHeight + \'px\'}" style="max-height: 300px"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody> <tr ng-repeat="contact in userContacts | filter:search | filter: {contact_type : \'user\'}"> <td style="width: 33%"> {{contact.contact_name_given}} {{contact.contact_name_family}} </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.manager[contact.user_uuid]" ng-init="updateGroup.manager[contact.user_uuid]=isPermGroupMember(editPermissionIndex, contact.user_uuid, \'manager\')" aria-label="Manager" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.member[contact.user_uuid]" ng-init="updateGroup.member[contact.user_uuid]=isPermGroupMember(editPermissionIndex, contact.user_uuid, \'member\')" aria-label="Member" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> </div> </div>'),a.put("views/cloudstorage/request-files-table.html",'<div class="modal-body" id="modal-body"> <div ng-show="!showAddForm && !showSendEmail"> <p>Requesting large files from your clients is easy. Using the tool below, you can create a link to send to your clients. They simply click on the link and then drag and drop the files they wish to send.</p> <p>You can use the same link for everyone or create custom links. It all depends on where you want the files they send you to go. Every Bridge user automatically has a folder called Public Cloud. Any files you receive will default to this folder unless you create and then select sub-folders. Each sub-folder will have its own link. Just send out the link that corresponds to where you want the file to end up. Its that easy! </p> <p>To create a new link, simply right click on any folder in the Public Cloud directory and click Make A Link.</p> <button class="btn btn-success pull-right newpubliclink" ng-click="addNewLink()">Create New Link</button> <h4>Existing Links</h4> <table ng-show="showTable" class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th>Folder</th> <th>Expiry</th> <th style="width: 180px">Action</th> </tr> </thead> <tbody> <tr ng-if="requestLinks.length===0"> <td colspan="5"> There are no links to display. </td> </tr> <tr ng-repeat="link in requestLinks"> <td>{{link.folder_name}}</td> <td><span ng-if="link.expire_at">{{link.expire_at | toLocalTime | amDateFormat: \'MMM D, YYYY\'}}</span> <span ng-if="!link.expire_at">Never</span></td> <td class="cloud-button-icons"> <i class="fa fa-edit dktealfont" ng-click="editLink(link)" tooltip-placement="top-right" uib-tooltip="{{::tips.requestfiles.editlink}}"></i> <i class="fa fa-files-o bridgebluefont" ng-disabled="urlNotAvailable" ng-click="copyLink(link)" tooltip-placement="top-right" uib-tooltip="{{::tips.requestfiles.copylink}}"></i> <i class="fa fa-envelope-o bridgebluefont" ng-disabled="urlNotAvailable" ng-click="showSendLink(link)" tooltip-placement="top-right" uib-tooltip="{{::tips.requestfiles.emaillink}}"></i> <i class="fa fa-trash-o bridgeorangefont" ng-click="removeLink($index)" tooltip-placement="top-right" uib-tooltip="{{::tips.requestfiles.removelink}}"></i> </td> </tr> </tbody> </table> </div> <div ng-if="showAddForm"> <h4>{{newLink.public_cloud_link_uuid ? \'Edit\' : \'Add\'}} Request Files Link</h4> <div class="row link-options"> <div class="col-sm-12 folder-selection"> <p>Choose the folder to which you want to store uploaded files to.</p> <div class="row"> <div class="col-md-6 dir-tree"> <div><i class="icon-folder-close fa fa-folder-open"></i> Imports</div> <div tree-view="structure" preselected-node="preselectedNode" tree-view-options="treeViewOptions"></div> <div class="addsharefolder"><a href ng-click="addFolder()"><i class="icon-folder-close fa fa-plus"></i> Create Folder</a> <input type="text" ng-model="new.folder_name" ng-show="showNewFolder"> <i class="icon-folder-close fa fa-save" ng-show="showNewFolder && !showFolderSpinner" ng-click="saveNewFolder(new.folder_name)"></i> <span ng-show="showFolderSpinner"><i class="icon-folder-close fa fa-spinner fa-spin"></i></span> </div> </div> <div class="col-sm-6"> <h4>Notifications</h4> <md-checkbox style="margin-bottom: 0" ng-model="newLink.options.sendEmail" aria-label="Email me when files are uploaded"> Email me when files are uploaded </md-checkbox> <h4>Security</h4> <md-checkbox style="margin-bottom: 0" ng-model="newLink.options.requireEmail" aria-label="Require recipients to enter name and email"> Require recipients to enter name and email </md-checkbox> <h4>Link Access Expiry</h4> <md-select ng-model="newLink.options.expireAt" style="width: 250px" tooltip-placement="top" uib-tooltip="{{::tips.requestfiles.accessexpiry}}"> <md-option ng-repeat="option in expireOptions" ng-value="option.value"> {{option.display}} </md-option> </md-select> </div> </div> </div> <div ng-if="1==3"> <div class="col-sm-6"> <h4>Notifications</h4> <md-checkbox style="margin-bottom: 0" ng-model="newLink.options.sendEmail" aria-label="Email me when files are uploaded"> Email me when files are uploaded </md-checkbox> </div> <div class="col-sm-6"> <h4>Security</h4> <md-checkbox style="margin-bottom: 0" ng-model="newLink.options.requireEmail" aria-label="Require recipients to enter name and email"> Require recipients to enter name and email </md-checkbox> </div> <div class="col-sm-12"> <h4>Link Access Expiry</h4> <md-select ng-model="newLink.options.expireAt" tooltip-placement="top" uib-tooltip="{{::tips.automated.insertshortcodesms}}"> <md-option ng-repeat="option in expireOptions" ng-value="option.value"> {{option.display}} </md-option> </md-select> </div> </div> </div> <div class="row"> <div class="col-sm-12 right-text"> <button class="btn btn-default button-pad-right" ng-show="showAddForm" ng-click="cancelEditLink()">Cancel</button> <button class="btn btn-success button-pad-right" ng-show="showAddForm" ng-click="saveLink(newLink)">Save Link</button> </div> </div> </div> <div ng-if="showSendEmail"> <h4>Send Request Files Link</h4> <div class="alert alert-error" ng-show="invalidContactSelected" role="alert" style="margin-top: 10px; display: block"> {{invalidContactSelected}} </div> <div class="alert alert-success" ng-show="msgEmailSent" role="alert" style="margin-top: 10px; display: block"> You have successfully emailed a link to the file! </div> <contact-selector type="\'cloudlink\'"></contact-selector> <textarea class="form-control" id="fileShareContactSelect" ng-model="contentEmail" style="height: 100px; margin-top: 12px; resize: none" placeholder="Write your message here (Optional)"></textarea> <div ng-if="alertError && alertError !== \'\'" uib-alert ng-class="\'alert-danger\'" dismiss-on-timeout="5000" close="closeFilterAlert()">{{alertError}}</div> <div class="alert alert-info" role="alert" style="margin-top: 10px; text-align: center; display: block"> You are sharing <strong>{{vm.content.data.original_filename}}</strong> </div> <div class="row"> <div class="col-sm-12 right-text"> <button class="btn btn-default button-pad-right" ng-show="showAddForm" ng-click="cancelEditLink()">Cancel</button> <button class="btn btn-success button-pad-right" ng-show="showAddForm" ng-click="doSendLink(contentEmail)">Save Link</button> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="onCloseModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close Window</button> </div>'),
a.put("views/cloudstorage/sharelink-modal.html",'<div ng-controller="CloudFileCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-files-o fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Send Request Files Link</span> <button type="button" class="close" ng-click="vm.confirm()"><i class="fa fa-times"></i></button> </div> <form name="frmFileShare"> <div class="modal-body" id="modal-body"> <div class="alert alert-error" ng-show="invalidContactSelected" role="alert" style="margin-top: 10px; display: block"> {{invalidContactSelected}} </div> <div ng-hide="msgEmailSent"> <contact-selector type="\'cloudlink\'"></contact-selector> <textarea class="form-control" id="fileShareContactSelect" ng-model="contentEmail" style="height: 100px; margin-top: 12px; resize: none" placeholder="Write your message here (Optional)"></textarea> <div ng-if="alertError && alertError !== \'\'" uib-alert ng-class="\'alert-danger\'" dismiss-on-timeout="5000" close="closeFilterAlert()">{{alertError}}</div> <div class="alert alert-info" role="alert" style="margin-top: 10px; text-align: center; display: block"> You are sending an Upload Link to <strong>{{vm.content.data.link.folder_name}}</strong> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <div> <button class="btn btn-default btn-sm" ng-click="vm.confirm()"><i class="fa fa-times" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-sm" ng-disabled="contactsSelected.length < 1" ng-click="doSendLink(vm.content.data)"> <i class="fa fa-envelope-o" style="margin-right: 10px"> </i> Send Link </button> </div> </div> </form> </div> </div>'),a.put("views/company/addcontact-bak.html",'<div id="addcontact" ng-controller="SettingsCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-user-plus fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Add Contact</span> <button type="button" ng-click="closeAddContact()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <form name="addContactForm" enctype="multipart/form-data"> <div class="row"> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_prefix" placeholder="Prefix"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_given" placeholder="First Name (Required) "> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_family" placeholder="Last Name (Required)"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_suffix" placeholder="Suffix"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_email_address" placeholder="Email Address"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_organization" placeholder="Organization"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_nickname" placeholder="Nickname"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_title" placeholder="Job Title"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <select class="selectpicker form-control" ng-model="contactaddition.contact_timezone" ng-options="option.timezone as option.display for option in timeZones" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_time_zone}}"> <option value="" selected disabled>- Choose Time Zone -</option> </select> </div> </div> <div class="col-sm-3"> <div class="form-check"> <select class="selectpicker form-control" ng-model="contactaddition.contact_type" ng-options="option for option in contactTypes" tooltip-placement="bottom" uib-tooltip="Specify a Contact Type"> <option value="" selected disabled>- Choose Contact Type -</option> </select> </div> </div> <div class="col-sm-3"> <md-checkbox ng-model="contactaddition.contact_category" aria-label="Add to Favorites" ng-true-value="\'favorite\'" ng-false-value="\'\'" class="md-warn md-align-top-left" flex> Add to Favorites <br> {{ data.cb2 }} </md-checkbox> </div> </div> <hr> <div class="row"> <div id="add-contact-phone-numbers" class="col-sm-11"> <add-phone-fields label="contactaddition.contacts[0].phone_label" number="contactaddition.contacts[0].phone_number" extension="contactaddition.contacts[0].phone_extension" typevoice="contactaddition.contacts[0].phone_type_voice" typefax="contactaddition.contacts[0].phone_type_fax" typevideo="contactaddition.contacts[0].phone_type_video" typetext="contactaddition.contacts[0].phone_type_text"> </add-phone-fields> <add-phone-fields ng-if="numPhones>1" label="contactaddition.contacts[1].phone_label" number="contactaddition.contacts[1].phone_number" extension="contactaddition.contacts[1].phone_extension" typevoice="contactaddition.contacts[1].phone_type_voice" typefax="contactaddition.contacts[1].phone_type_fax" typevideo="contactaddition.contacts[1].phone_type_video" typetext="contactaddition.contacts[1].phone_type_text"> </add-phone-fields> <add-phone-fields ng-if="numPhones>2" label="contactaddition.contacts[2].phone_label" number="contactaddition.contacts[2].phone_number" extension="contactaddition.contacts[2].phone_extension" typevoice="contactaddition.contacts[2].phone_type_voice" typefax="contactaddition.contacts[2].phone_type_fax" typevideo="contactaddition.contacts[2].phone_type_video" typetext="contactaddition.contacts[2].phone_type_text"> </add-phone-fields> <add-phone-fields ng-if="numPhones>3" label="contactaddition.contacts[3].phone_label" number="contactaddition.contacts[3].phone_number" extension="contactaddition.contacts[3].phone_extension" typevoice="contactaddition.contacts[3].phone_type_voice" typefax="contactaddition.contacts[3].phone_type_fax" typevideo="contactaddition.contacts[3].phone_type_video" typetext="contactaddition.contacts[3].phone_type_text"> </add-phone-fields> <add-phone-fields ng-if="numPhones>4" label="contactaddition.contacts[4].phone_label" number="contactaddition.contacts[4].phone_number" extension="contactaddition.contacts[4].phone_extension" typevoice="contactaddition.contacts[4].phone_type_voice" typefax="contactaddition.contacts[4].phone_type_fax" typevideo="contactaddition.contacts[4].phone_type_video" typetext="contactaddition.contacts[4].phone_type_text"> </add-phone-fields> </div> <div class="col-sm-1"> <a href="" ng-click="addAnotherPhone()" uib-tooltip="Add another Phone Number" tooltip-placement="top-right"><i class="fa fa-plus fa-2x"></i></a> </div> </div> <hr> <div class="row"> <div class="col-sm-4"> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-sticky-note"></i></span> <textarea class="form-control" uib-tooltip="Save notes about this contact ..." tooltip-placement="top" rows="6" ng-model="contactaddition.contact_notes" placeholder="Submit notes about this contact ..."></textarea> </div> </div> <div class="col-sm-8"> <div class="row"> <div class="col-sm-4"> <div class="settings-avatar"> <img src="{{pathImgProfile + user.profile_image}}" ng-if="contact.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" style="background-color: {{ contact.profile_color ? contact.profile_color : \'\' }}" ng-show="!contact.profile_image"><i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"></i></div> </div> <label class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0"> <i class="fa fa-file"></i> Select a Profile Photo <input type="file" nv-file-select="" uploader="uploader" required style="display: none"> </label> <!--<div ng-show="uploader.isHTML5">\n                             3. nv-file-over uploader="link" over-class="className" \n                            <div class="well my-drop-zone" nv-file-over="" uploader="uploader">\n                                Base drop zone\n                            </div>\n                        </div>--> </div> <div class="col-sm-8"> <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" --> <!--<input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>--> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td> {{ item.file.name }} <!-- Image preview --> <!--auto height--> <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--> <!--auto width--> <!--<div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 100 }"></div>--> <!--fixed width and height --> <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--> </td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <!--<td nowrap>\n                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\n                                            <span class="glyphicon glyphicon-upload"></span> Upload\n                                        </button>\n                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\n                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel\n                                        </button>\n                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\n                                            <span class="glyphicon glyphicon-trash"></span> Remove\n                                        </button>\n                                    </td>--> </tr> <tr ng-if="uploader.queue.length>0"><td colspan="4"><button type="button" class="btn btn-danger btn-xs" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <i class="fa fa-trash"></i> Remove </button></td></tr> </tbody> </table> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeAddContact()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button ng-if="uploader.queue.length>0" type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"><i class="fa fa-upload"></i> Add Contact With Avatar</button> <button ng-if="!uploader.queue.length>0" class="btn btn-primary btn-md" ng-click="addContactSubmit()"><i class="fa fa-save" style="margin-right: 10px"></i>Add Contact </button> </div> </form> </div></div>'),a.put("views/company/addcontact.html",'<div id="addcontact" ng-controller="SettingsCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-user-plus fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Add To Contacts</span> <button type="button" ng-click="closeAddContact()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <p>* Please complete all required fields.</p> <!--<form name="addContactForm" enctype="multipart/form-data">--> <div class="row"> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_prefix" placeholder="Prefix"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_given" required placeholder="* First Name (Required)" ng-init="vm.content.data.first_name ? contactaddition.contact_name_given=vm.content.data.first_name : contactaddition.contact_name_given=\'\'"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_family" required placeholder="* Last Name (Required)" ng-init="vm.content.data.last_name ? contactaddition.contact_name_family=vm.content.data.last_name : contactaddition.contact_name_family=\'\'"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_name_suffix" placeholder="Suffix"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_email_address" ng-init="vm.content.data.email_address ? contactaddition.contact_email_address=vm.content.data.email_address : contactaddition.contact_email_address=\'\'" placeholder="Email Address"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_organization" placeholder="Organization"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_nickname" placeholder="Nickname"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contact_title" placeholder="Job Title"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <select class="selectpicker form-control" ng-model="contactaddition.contact_timezone" ng-options="option.timezone as option.display for option in timeZones" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_time_zone}}"> <option value="" selected disabled>- Choose Time Zone -</option> </select> </div> </div> <div class="col-sm-3"> <div class="form-check"> <select class="selectpicker form-control" ng-model="contactaddition.contact_type" ng-options="option for option in contactTypes" tooltip-placement="bottom" uib-tooltip="Specify a Contact Type"> <option value="" selected disabled>- Choose Contact Type -</option> </select> </div> </div> <div class="col-sm-3"> <md-checkbox ng-model="contactaddition.contact_category" aria-label="Add to Favorites" ng-true-value="\'favorite\'" ng-false-value="\'\'" class="md-warn md-align-top-left" flex> Add to Favorites <br> {{ data.cb2 }} </md-checkbox> </div> </div> <div class="row"> <div class="col-sm-8"> <div class="input-group"> <textarea class="form-control" uib-tooltip="{{tips.contacts.contact_notes}}" tooltip-placement="top" rows="3" ng-model="contactaddition.contact_note" placeholder="Submit notes about this contact ..."></textarea> </div> </div> </div> <hr> <h4>Contact Phone Numbers</h4> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="line in phoneLines"> <td> <div class="input-group"> <select class="selectpicker form-control" ng-model="contactaddition.contacts[line.line].phone_label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_label}}"> <option value="" selected disabled>- Specify Phone Type -</option> <option ng-repeat="phonetype in phoneNumberTypes" value="{{phonetype}}">{{phonetype}}</option> </select> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contacts[line.line].phone_number" ng-required="line.line === 1" phone-input ng-init="vm.content.data.phone_number ? contactaddition.contacts[line.line].phone_number=vm.content.data.phone_number : contactaddition.contacts[line.line].phone_number=\'\'" placeholder="{{line.line === 1 ? \'*\' : \'\'}} Phone Number {{line.line === 1 ? \'(Required)\' : \'\'}}" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_number}}"> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="contactaddition.contacts[line.line].phone_extension" placeholder="Extension" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_extension}}"> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_primary}}"> <input class="form-check-input" type="checkbox" ng-model="contactaddition.contacts[line.line].phone_primary" ng-true-value="\'1\'" ng-false-value="\'0\'"> Primary </label> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_voice}}"> <input class="form-check-input" type="checkbox" ng-model="contactaddition.contacts[line.line].phone_type_voice" ng-true-value="\'1\'" ng-false-value="null"> Voice </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_video}}"> <input class="form-check-input" type="checkbox" ng-model="contactaddition.contacts[line.line].phone_type_video" ng-true-value="\'1\'" ng-false-value="null"> Video </label><br> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_text}}"> <input class="form-check-input" type="checkbox" ng-model="contactaddition.contacts[line.line].phone_type_text" ng-true-value="\'1\'" ng-false-value="null"> SMS </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_fax}}"> <input class="form-check-input" type="checkbox" ng-model="contactaddition.contacts[line.line].phone_type_fax" ng-true-value="\'1\'" ng-false-value="null"> Fax </label> </div> </td> <td> <i class="fa fa-plus fa-2x" ng-click="addNewPhoneLine()" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.add_phone_line}}"></i> </td> </tr> </table> <hr> <h4>Contact Profile</h4> <div class="row"> <div class="col-sm-2 text-center"> Profile Color <div class="settings-avatar"> <div class="cls-settings-img-profile-null" style="background-color: {{ contactaddition.contact_profile_color ? contactaddition.contact_profile_color : \'\' }}"><i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"></i></div> </div> </div> <div class="col-sm-2" ng-init="contactaddition.contact_profile_color=profilecoloroptions[0]"> <div ng-repeat="color in profilecoloroptions" class="coloroptionbox text-center"> <div class="coloroptions" style="background-color: {{color}}">&nbsp;</div> <input type="radio" name="contactaddition.contact_profile_color" ng-selected="$index==0" ng-model="contactaddition.contact_profile_color" value="{{color}}"> </div> </div> <div class="col-sm-1" style="padding-top: 60px"> - OR - </div> <div class="col-sm-7"> <div class="row"> <!--<div ng-show="uploader.isHTML5">\n                             3. nv-file-over uploader="link" over-class="className" \n                            <div class="well my-drop-zone" nv-file-over="" uploader="uploader">\n                                Base drop zone\n                            </div>\n                        </div>--> <label class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0"> <i class="fa fa-file"></i> Upload Photo <input type="file" nv-file-select="" uploader="uploader" required style="display: none"> </label> <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" --> <!--<input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>--> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td> {{ item.file.name.length > 25 ? item.file.name.substring(0, 12) + \' ... \' + item.file.name.substring(item.file.name.length-12) : item.file.name }} <!-- Image preview --> <!--auto height--> <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--> <!--auto width--> <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 100 }"></div> <!--fixed width and height --> <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--> </td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <!--<td nowrap>\n                                        <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\n                                            <span class="glyphicon glyphicon-upload"></span> Upload\n                                        </button>\n                                        <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\n                                            <span class="glyphicon glyphicon-ban-circle"></span> Cancel\n                                        </button>\n                                        <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\n                                            <span class="glyphicon glyphicon-trash"></span> Remove\n                                        </button>\n                                    </td>--> </tr> <tr ng-if="uploader.queue.length>0"><td colspan="4"><button type="button" class="btn btn-danger btn-xs" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <i class="fa fa-trash"></i> Remove </button></td></tr> </tbody> </table> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeAddContact()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button ng-if="uploader.queue.length>0" type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="addContactForm.$invalid || !uploader.getNotUploadedItems().length"><i class="fa fa-upload"></i> Add Contact With Avatar</button> <button ng-if="!uploader.queue.length>0" class="btn btn-primary btn-md" ng-disabled="addContactForm.$invalid" ng-click="addContactSubmit()"><i class="fa fa-save" style="margin-right: 10px"></i>Add Contact </button> </div> <!--</form>--> </div> </div>'),a.put("views/company/addcontactnumber.html",'<div class="row"> <div class="col-sm-3"> <div class="input-group"> <select class="selectpicker form-control" ng-model="label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_label}}"> <option value="" selected disabled>- Specify Phone Type -</option> <option value="Work">Work</option> <option value="Home">Home</option> <option value="Mobile">Mobile</option> <option value="Main">Main</option> <option value="Fax">Fax</option> <option value="Pager">Pager</option> <option value="Voicemail">Voicemail</option> <option value="Text">Text</option> <option value="Other">Other</option> </select> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="number" ng-init="phonedata.phone_number" phone-input placeholder="Phone Number" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_number}}"> </div> </div> <div class="col-sm-2"> <div class="input-group"> <input type="text" class="form-control" ng-model="extension" placeholder="Extension" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_extension}}"> </div> </div> <div class="col-sm-3"> <div class="form-check"> <label class="form-check-label"> <input class="form-check-input" type="checkbox" ng-model="typevoice" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_voice}}"> Voice </label> <label class="form-check-label"> <input class="form-check-input" type="checkbox" ng-model="typevideo" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_video}}"> Video </label> <label class="form-check-label"> <input class="form-check-input" type="checkbox" ng-model="typetext" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_text}}"> SMS </label> <label class="form-check-label"> <input class="form-check-input" type="checkbox" ng-model="typefax" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_fax}}"> Fax </label> </div> </div> </div>'),a.put("views/company/addcontactstogroup.html",'<div ng-controller="SettingsCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Add Multiple Contacts to {{vm.content.data.group_name}}</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="search.contact_name_full" placeholder="Search by contact name"> </div> <table id="contact-groups-table" class="table table-bordered table-hover table-striped"> <tbody> <tr ng-repeat="contact in userContacts | filter:search | filter: {contact_uuid: \'!\'+user.contact_uuid} : true"> <td class="col-sm-9"> <strong>{{contact.contact_name_given}} {{contact.contact_name_family}}</strong> ({{contact.contact_type==\'user\' ? \'User\' : \'Contact\'}}) </td> <td class="col-sm-3"> <md-checkbox ng-model="updategroup.members[contact.contact_uuid]" ng-init="updategroup.members[contact.contact_uuid]=isGroupMember(vm.content.data.members, contact.contact_uuid)" aria-label="Contact" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeCreateGroup()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="updateGroupContacts(vm.content.data.group_uuid, updategroup.members)"><i class="fa fa-save" style="margin-right: 10px"></i>Update Contact List</button> </div> </div>'),a.put("views/company/adduseravatar.html",'<div id="addcontact"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-paper-plane fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Change Profile Photo</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <form name="addUserAvatar" id="addUserAvatar" enctype="multipart/form-data"> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-md-6"> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-user"></i></span> <input type="text" class="form-control" ng-model="avatar.data"> </div> <div class="settings-avatar"> <img src="{{pathImgProfile + user.profile_image}}" ng-show="user.profile_image" class="cls-img-profile" alt=""> <div class="cls-img-full-profile-null" style="{{ user.profile_color ? \'background-color: \'+user.profile_color : \'\' }}" ng-show="!user.profile_image"><i class="fa fa-user" style="font-size: 120px; opacity: 0.4" aria-hidden="true"></i></div> </div> </div> <div class="col-md-6"> <div class="input-group"> <span class="input-group-addon" title="Title"><i class="fa fa-file"></i></span> <input type="file" ng-model="avatar.image"> <label class="btn btn-default btn-file"> Browse for File <input class="form-control" accept="image/*" type="file" ng-model="avatar.contact_image" set-file-data="avatar.contact_image = value;" file-model="avatar.contact_image" value="{{avatar.contact_image}}" style="display: none" required> </label> </div> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="sendUserAvatar(avatar)"><i class="fa fa-save" style="margin-right: 10px"></i>Add Contact</button> </div> </form> </div>'),a.put("views/company/attendant.html",'<div class="auto-attendant" id="edit-auto-attendant" ng-controller="ctrlAutoAttendant"> <div class="auto-attendant-container" ng-if="menu.main"> <div class="row caption"> <div class="col-sm-4"> <h3>Auto Attendant</h3> </div> <div class="col-sm-8 right-text"> <button class="btn btn-primary" ng-click="manageRingGroups()">Manage Ring Groups</button> <button class="btn btn-primary" ng-click="createNewAttendant()">Create New Attendant</button> </div> </div> <div class="panel panel-default"> <div class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 32%">Auto Attendant Title</th> <th style="width: 16%">Responds To</th> <th style="width: 13%">On/Off</th> <th>Progress</th> <th style="width: 18%">Delete</th> </tr> </thead> </table> </div> <div class="scroll-container"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-if="myAttendants.length === 0"> <td colspan="5">You have not created an Auto Attendant yet.</td> </tr> <tr ng-if="myAttendants.length > 0" ng-repeat="attendant in myAttendants | orderBy : \'ivr_menu_name\' : false" class="viewAttendant"> <td style="width: 32%" class="capital" ng-click="editAttendant(attendant)">{{attendant.ivr_menu_name}}</td> <td style="width: 16%" class="capital" ng-click="editAttendant(attendant)">{{attendant.did.phone | tel}}<br>({{attendant.did.name ? attendant.did.name + \' - \' + attendant.did.ext : \'External Number\'}})</td> <td style="width: 13%"> <md-switch ng-model="attendant.ivr_menu_enabled" aria-label="isOn" class="capital" ng-change="toggleEnable(attendant)"> {{ attendant.ivr_menu_enabled ? "On":"Off" }} </md-switch> </td> <td> <table class="table aa-progress"> <tr> <td><i class="fa fa-calendar-o {{checkBuildStatus(attendant, \'weekly_schedule\') ? \'finished\' : \'incomplete\'}}" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{checkBuildStatus(attendant, \'weekly_schedule\') ? \'Schedule has been set\' : \'Schedule has not been set\'}}"></i></td> <td><i class="fa fa-list-ul {{checkBuildStatus(attendant, \'customize_menu\') ? \'finished\' : \'incomplete\'}}" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{checkBuildStatus(attendant, \'customize_menu\') ? \'Menu options created\' : \'Menu option not created\'}}"></i></td> <td><i class="fa fa-microphone {{checkBuildStatus(attendant, \'greeting\') ? \'finished\' : \'incomplete\'}}" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{checkBuildStatus(attendant, \'greeting\') ? \'Greeting has been set\' : \'Greeting has not been set\'}}"></i></td> <td ng-if="!attendant.did.name"><i class="fa fa-volume-down {{checkBuildStatus(attendant, \'voicemail\') ? \'finished\' : \'incomplete\'}}" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{checkBuildStatus(attendant, \'voicemail\') ? \'Voicemail has been setup\' : \'Voicemail has not been setup\'}}"></i></td> </tr> </table> </td> <td style="width: 18%"> <i ng-click="editAttendant(attendant)" class="fa fa-pencil-square-o primaryfont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.editattendant}}"></i> <i ng-click="changeRespondsTo(attendant)" class="fa fa-hashtag orangefont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.changerespondsto}}"></i> <i ng-click="cloneAttendant(attendant)" class="fa fa-clone ltbluefont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.cloneattendant}}"></i> <i ng-click="deleteAttendant(attendant)" class="fa fa-times-circle redfont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.deleteattendant}}"></i> </td> </tr> </tbody> </table> </div> </div> </div> <div class="auto-attendant-container" ng-if="menu.ringgroups"> <div class="row caption"> <div class="col-sm-4"> <h3>Ring Groups</h3> </div> <div class="col-sm-8 right-text"> <button class="btn btn-primary" ng-click="manageAttendants()">Manage Auto Attendants</button> <button class="btn btn-primary" ng-click="createNewRinggroup()">Create New Ring Group</button> </div> </div> <div class="panel panel-default"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th>Title</th> <th>Extension</th> <th>Ring Pattern</th> <th style="width: 18%">Actions</th> </tr> </thead> <tbody> <tr ng-if="availRinggroups.length === 0"> <td colspan="4">You have not created a Ring Group yet.</td> </tr> <tr ng-if="availRinggroups.length > 0" ng-repeat="ringgroup in availRinggroups | orderBy : \'queue_name\' : false"> <td class="capital" ng-click="editRinggroup(ringgroup)">{{ringgroup.queue_name}}</td> <td ng-click="editRinggroup(ringgroup)">{{ringgroup.queue_extension}}</td> <td ng-click="editRinggroup(ringgroup)">{{showStrategy(ringgroup)}}</td> <td style="width: 18%"> <i ng-click="editRinggroup(ringgroup)" class="fa fa-pencil-square-o primaryfont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.editringgroup}}"></i> <i ng-click="restartRinggroup(ringgroup)" class="fa fa-refresh orangefont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.restartringgroup}}"></i> <i ng-click="restartRinggroup2(ringgroup)" class="fa fa-times-circle redfont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.deleteringgroup}}"></i> <!--<i ng-click="cloneRinggroup(ringgroup)" class="fa fa-clone ltbluefont mainopt" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{::tips.autoattendant.cloneringgroup}}"></i>--> </td> </tr> </tbody> </table> </div> </div> <!--Create Attendant Shell--> <div class="auto-attendant-container" ng-if="menu.create"> <div class="createAttendant"> <div class="caption"> <h3>Create New Auto Attendant</h3> </div> <div class="panel panel-primary panelbox"> <div class="panel-heading title-bar"> {{newIvr.ivr_menu_name ? newIvr.ivr_menu_name:"Auto Attendant Name"}} </div> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="row"> <div class="col-sm-4 box1-label"> Set Auto Attendant: </div> <div class="col-sm-4 box1-input"> <md-input-container> <label>Enter a Name</label> <input ng-model="newIvr.ivr_menu_name"> </md-input-container> </div> </div> <div class="row"> <div class="col-sm-4 {{!ordered ? \'box1-label\' : \'\'}}">Responds to this number:</div> <div class="col-sm-5 box1-input"> <!--<span ng-show="editing"> <b>{{newIvr.did.phone | tel}}</b><br></span>--> <md-input-container> <label>Select a Number</label> <md-select ng-model="newIvr.did" ng-change="checkIfExisting()"> <md-option ng-repeat="user in userList.items | orderBy: \'ext\' : false" ng-value="user"> {{user.ext}} - {{user.name}} - {{user.phone | tel}} </md-option> <md-option ng-repeat="user in reusableDids" ng-value="user"> {{user.phone | tel}} - External Number </md-option> </md-select> </md-input-container> </div> <div class="col-sm-3"> <button ng-show="!editing && !orderingNumber" class="pull-right btn btn-default btn-xs newdidbutton" ng-click="newNumber()">Order a new Number</button> <div ng-if="orderingNumber"><i class="fa fa-spinner fa-spin fa-2x"></i><br>Please Wait</div> </div> </div> </div> </div> </div> <div class="attendant-bottom-button-bar"> <div class="pull-right"> <button class="btn btn-success" uib-tooltip="Create attendant" ng-click="sendNewAutoAttendant()"><i class="fa fa-save"></i> Create Auto Attendant</button> <button class="btn btn-danger" ng-click="cancel($event)" uib-tooltip="Cancel creation"><i class="fa fa-undo"></i> Cancel</button> </div> </div> </div> <!-- Do create Clone --> <div class="system-working" ng-if="aaWorking.status"><i class="fa fa-spinner fa-spin fa-5x"></i><br> <span>{{aaWorking.message}}<br> Please Wait</span></div> <div class="auto-attendant-container" ng-if="menu.clone"> <div class="createAttendant"> <div class="caption"> <h3>Clone Auto Attendant</h3> </div> <!--Title--> <div class="panel panel-primary panelbox"> <div class="panel-heading title-bar"> {{newIvr.ivr_menu_name ? newIvr.ivr_menu_name:"Auto Attendant Name"}} </div> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="row"> <div class="col-sm-3 box1-label"> Set Auto Attendant: </div> <div class="col-sm-6 box1-input"> <md-input-container> <label>Enter a Name</label> <input ng-model="newIvr.ivr_menu_name"> </md-input-container> </div> </div> <div class="row"> <div class="col-sm-3 {{!ordered ? \'box1-label\' : \'\'}}">Responds to this number:</div> <div class="col-sm-6 box1-input"> <!--<span ng-show="ordered"> <b>{{newIvr.newdid.phone | tel}}</b><br></span>--> <md-input-container> <label>Select a New Number</label> <md-select ng-model="newIvr.newdid"> <md-option ng-repeat="user in userList.items | orderBy: \'ext\' : false" ng-selected="user.ext == newIvr.newdid.ext ? true : false" ng-value="user"> {{user.ext}} - {{user.name}} - {{user.phone | tel}} </md-option> <md-option ng-repeat="user in reusableDids" ng-selected="user.ext == newIvr.newdid.ext ? true : false" ng-value="user"> {{user.phone | tel}} - External Number </md-option> </md-select> </md-input-container> </div> <div class="col-sm-3"> <button ng-show="!editing && !orderingNumber" class="pull-right btn btn-default btn-xs newdidbutton" ng-click="newNumberForClone()">Order a new Number</button> <div ng-if="orderingNumber"><i class="fa fa-spinner fa-spin fa-2x"></i><br>Please Wait</div> </div> </div> </div> </div> </div> <div class="attendant-bottom-button-bar"> <div class="pull-right"> <button class="btn btn-default" ng-click="cancel($event)" uib-tooltip="Cancel creation"><i class="fa fa-undo"></i> Cancel</button> <button class="btn btn-success" uib-tooltip="Clone attendant" ng-click="postCloneAttendant()"><i class="fa fa-save"></i> Clone Auto Attendant</button> </div> </div> </div> <!-- Edit Responds to --> <div class="auto-attendant-container" ng-if="menu.respondsto"> <div class="createAttendant"> <div class="caption"> <h3>Change Auto Attendant Number</h3> </div> <!--Title--> <div class="panel panel-primary panelbox"> <div class="panel-heading title-bar"> {{newIvr.ivr_menu_name ? newIvr.ivr_menu_name:"Auto Attendant Name"}} </div> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="row"> <div class="col-sm-3 box1-label"> Set Auto Attendant: </div> <div class="col-sm-6 box1-input"> <md-input-container> <label>Enter a Name</label> <input ng-model="newIvr.ivr_menu_name"> </md-input-container> </div> </div> <div class="row"> <div class="col-sm-3 {{!ordered ? \'box1-label\' : \'\'}}"> Responds to this number: <br> <button class="btn btn-default btn-xs" ng-click="addSecondaryNumber()"><i class="fa fa-plus"></i> Add Secondary Number</button> </div> <div class="col-sm-6 box1-input"> <!--<span ng-show="ordered"> <b>{{newIvr.newdid.phone | tel}}</b><br></span>--> <md-input-container> <label>Select a New Number</label> <md-select ng-model="newIvr.newdid"> <md-option ng-repeat="user in userList.items | orderBy: \'ext\' : false" ng-selected="user.ext == newIvr.newdid.ext ? true : false" ng-value="user"> {{user.ext}} - {{user.name}} - {{user.phone | tel}} </md-option> <md-option ng-repeat="user in reusableDids" ng-selected="user.ext == newIvr.newdid.ext ? true : false" ng-value="user"> {{user.phone | tel}} - External Number </md-option> </md-select> </md-input-container> </div> <div class="col-sm-3"> <button ng-show="!editing && !orderingNumber" class="pull-right btn btn-default btn-xs newdidbutton" ng-click="newNumberForRespondsTo()">Order a new Number</button> <div ng-if="orderingNumber"><i class="fa fa-spinner fa-spin fa-2x"></i><br>Please Wait</div> </div> </div> <div class="row" ng-if="addSecondary || newIvr.secondaryNumbers.length > 0"> <div class="col-sm-3 {{!ordered ? \'box1-label\' : \'\'}}"> Secondary number<span ng-if="newIvr.secondaryNumbers.length > 1">s</span>: </div> <div class="col-sm-9 box1-input"> <div class="tableclass" ng-repeat="number in newIvr.secondaryNumbers"> <div class="tablecell"> {{number.did_number | tel}} - {{number.did_ext}}<span ng-if="number.did_name"> - {{number.did_name}}</span> </div> <div class="tablecell"> <i ng-if="!did.auto_attendant_did_uuid" class="fa fa-times-circle redfont mainopt" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.deletesecondary}}" ng-click="deleteSecondaryNumber(number)"></i> </div> </div> <div class="tableclass" ng-if="addSecondary"> <div class="tablecell"> <md-input-container> <label>Select a Number</label> <md-select ng-model="newSecondary"> <md-option ng-repeat="did in availDids | orderBy: \'info.ext\' : false" ng-value="did"> {{did.destination_number | tel}} - {{did.info.ext}}<span ng-if="did.port" class="ltgreyfont capitalize"> - {{did.port.port_status}}</span> </md-option> </md-select> </md-input-container> </div> <div class="tablecell"> <span ng-if="!orderingSecondaryNumber && !savingSecondaryNumber"> <i class="fa fa-hashtag orangefont mainopt" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.ordernewsecondary}}" ng-click="orderNewSecondaryNumber()"></i> <i class="fa fa-floppy-o dktealfont mainopt" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.savenewsecondary}}" ng-click="saveNewSecondaryNumber(newSecondary)"></i> <i class="fa fa-times-circle redfont mainopt" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.cancelnewsecondary}}" ng-click="cancelNewSecondaryNumber()"></i> </span> <span ng-if="savingSecondaryNumber"><i class="fa fa-spinner fa-spin mainopt"></i> Saving</span> <span ng-if="orderingSecondaryNumber"><i class="fa fa-spinner fa-spin mainopt"></i> Please Wait</span> </div> </div> </div> </div> </div> </div> </div> <div class="attendant-bottom-button-bar"> <div class="pull-right"> <button class="btn btn-default" ng-click="cancel()"><i class="fa fa-undo"></i> Cancel</button> <button class="btn btn-success" ng-click="saveChangeAaNumber()"><i class="fa fa-save"></i> Save New Number</button> </div> </div> </div> <!--Edit Attendant--> <div ng-show="!aaWorking.status"> <div class="auto-attendant-container" ng-if="menu.edit"> <div class="createAttendant"> <div class="caption"> <h3>{{newIvr.ivr_menu_uuid ? \'Edit\' : \'Create New\'}} Auto Attendant</h3> </div> <!--Title--> <div class="panel panel-primary panelbox"> <div class="panel-heading title-bar"> {{newIvr.ivr_menu_name ? newIvr.ivr_menu_name:"Auto Attendant Name"}} </div> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="row"> <div class="col-sm-4 box1-label"> Set Auto Attendant: </div> <div class="col-sm-5 box1-input"> <md-input-container> <label>Enter a Name</label> <input ng-model="newIvr.ivr_menu_name"> </md-input-container> </div> </div> <div class="row"> <div class="col-sm-4"> Responds to this number: </div> <div class="col-sm-8 box1-input"> <b>{{newIvr.did.phone | tel}}</b> <span ng-if="newIvr.did.name">({{newIvr.did.name}} - Ext. {{newIvr.did.ext}})<br></span> <span ng-if="!newIvr.did.name">(External Number)</span> </div> </div> </div> </div> <!--Weekly Schedule--> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Weekly Schedule </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="weekly-panel panel panel-default"> <div class="scroll-container-head"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 28%">Week Day</th> <th style="width: 28%">Start Time</th> <th style="width: 28%">End Time</th> <th style="width:16%">Disable</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="week in scheduleType.weekly" ng-class="{\'disabled-schedule\':week.disabled}"> <td style="text-transform:capitalize">{{week.day}}</td> <td class="weekly-timepicker"> <div class="disabled" ng-if="week.disabled">Disabled</div> <div ng-if="!week.disabled" uib-timepicker ng-change="checkForChars(week.times.start)" ng-model="week.times.start" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!week.disabled && !week.times.start">Invalid Date</div> </td> <td class="weekly-timepicker"> <div class="disabled" ng-if="week.disabled">Disabled</div> <div ng-if="!week.disabled" uib-timepicker ng-change="checkForChars(week.times.end)" ng-model="week.times.end" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!week.disabled && !week.times.end">Invalid Date</div> </td> <td class="check"> <md-checkbox style="margin:auto" class="md-warn" ng-model="week.disabled" aria-label="disabled"> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> <div class="attendant-bottom-button-bar"> <div class="pull-right"> <button class="btn btn-default" uib-tooltip="Save attendant" ng-click="saveAttendant(\'continue\')"><i class="fa fa-save"></i> Save Attendant</button> </div> </div> </div> </div> <!--Weekly--> <!--Holidays--> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Holiday Schedule </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <button class="btn btn-primary holiday-button" ng-click="addHoliday()"><i class="fa fa-plus" aria-hidden="true"></i> Add Holiday</button> <div class="weekly-panel panel panel-default" ng-if="scheduleType.holiday.length>0"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th>Start Date</th> <th>End Date</th> <th style="width:16%">Manage</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="newDate in scheduleType.holiday"> <td> <span ng-if="!holidayEdited(newDate)">{{newDate.timeStart | amDateFormat: \'MMMM D\'}}</span> <div ng-if="holidayEdited(newDate)" class="input-group"> <span class="input-group-addon" ng-click="open1()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-click="open1()" ng-change="changeEnd(newDate.timeStart)" uib-datepicker-popup="{{format}}" ng-model="newDate.timeStart" placeholder="Start Date" datepicker-options="startDateOptions" is-open="popup1.opened" close-text="Close" ng-required="true"> </div> </td> <td> <span ng-if="!holidayEdited(newDate)">{{newDate.timeEnd | amDateFormat: \'MMMM D\'}}</span> <div ng-if="holidayEdited(newDate)" class="input-group"> <span class="input-group-addon" ng-click="open2()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-click="open2()" ng-change="changeStart(newDate.timeEnd)" uib-datepicker-popup="{{format}}" ng-model="newDate.timeEnd" placeholder="End Date" datepicker-options="endDateOptions" is-open="popup2.opened" close-text="Close" ng-required="true"> </div> </td> <td> <span ng-if="!holidayEdited(newDate)"><i ng-click="editHoliday(newDate)" class="fa fa-pencil-square-o deleteopt" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.holidayeditrecord}}"></i></span> <span ng-if="!holidayEdited(newDate)"><i ng-click="removeHoliday(newDate)" class="fa fa-times-circle redfont deleteopt" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.holidayremoverecord}}"></i></span> <span ng-if="holidayEdited(newDate)"><i ng-click="saveHoliday(newDate)" class="fa fa-save deleteopt" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.holidaysavechanges}}"></i></span> <span ng-if="holidayEdited(newDate)"><i ng-click="cancelEditingHoliday()" class="fa fa-ban deleteopt" aria-hidden="true" tooltip-placement="top" uib-tooltip="{{::tips.autoattendant.holidaycancelediting}}"></i></span> </td> </tr> </tbody> </table> </div> <div class="row"> <div class="col-sm-3 preset-holidays" ng-repeat="holiday in newIvr.presetHolidays"> <md-switch class="md-warn" ng-model="holiday.status" ng-click="togglePresetStatus(holiday)" aria-hidden="true" tooltip-placement="top" uib-tooltip="Enable {{holiday.title}}"> {{holiday.title}} </md-switch> </div> </div> </div> </div> <!--Holiday--> <!--Actions--> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Customize Your Menu </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <!--Menu Action--> <div class="action-menu" id="menu-options"> <div class="mainAttendant"> <button class="btn btn-primary options-button" ng-show="!showAddOptions" ng-click="addNewOption()"><i class="fa fa-plus" aria-hidden="true"></i> Add New Option</button> <div> <table class="table table-bordered table-hover table-striped cls-tab-call-history customize" ng-show="optionsList.length>0 || showAddOptions"> <thead> <tr> <th style="width: 120px">Menu Options</th> <th style="width: 180px">Description</th> <th>Send Call To</th> <th style="width: 100px"></th> </tr> </thead> <tbody> <tr ng-repeat="myOptions in optionsList | orderBy : \'ivr_menu_option_digits\' : false"> <td ng-click="beingEdited(myOptions) || setEditing(myOptions)"> <input type="hidden" ng-model="myOptions.ivr_menu_option_uuid"> <div ng-show="!beingEdited(myOptions)"><strong>{{myOptions.ivr_menu_option_digits}}</strong></div> <md-input-container ng-show="beingEdited(myOptions)"> <label>Select a Number</label> <md-select ng-model="myOptions.ivr_menu_option_digits" class="directoryOptions"> <md-option ng-repeat="digits in directoryOpts" ng-value="digits.digit" ng-disabled="!digits.available"> {{digits.digit}} </md-option> </md-select> </md-input-container> </td> <td ng-click="beingEdited(myOptions) || setEditing(myOptions)"> <div ng-show="!beingEdited(myOptions)"><strong>{{myOptions.ivr_menu_option_description}}</strong></div> <md-input-container ng-show="beingEdited(myOptions)"> <label>Enter a Description</label> <input ng-model="myOptions.ivr_menu_option_description"> </md-input-container> </td> <td ng-if="!beingEdited(myOptions) || (beingEdited(myOptions) && myOptions.action === \'Dial By Name\')" ng-click="beingEdited(myOptions) || setEditing(myOptions)"> <strong>{{myOptions.action}}</strong> <span ng-if="myOptions.action !== \'Dial By Name\' && !beingEdited(myOptions)">: {{showOptionsParams(myOptions)}}</span> </td> <td ng-if="beingEdited(myOptions) && (myOptions.action !== \'Dial By Name\')"> <div ng-show="myOptions.action === \'Transfer to an Extension\'"> <strong>{{myOptions.action}}</strong>: <md-input-container> <label>Pick a Number</label> <md-select ng-model="myOptions.ivr_menu_option_param"> <md-option ng-repeat="user in userList2.items" ng-value="user.ext"> {{user.ext}} - {{user.name}} - {{user.phone}} </md-option> </md-select> </md-input-container> </div> <!--Transfer--> <div ng-if="myOptions.action == \'Transfer to External Number\'" ng-init="myOptions.ivr_menu_option_param = myOptions.ivr_menu_option_param.substring(4)"> <strong>{{myOptions.action}}</strong>: <md-input-container> <label>Enter a Number</label> <input md-input phone-input ng-model="editedOption.external_number"> </md-input-container> </div> <div ng-show="myOptions.action === \'Ring Group\'"> <strong>{{myOptions.action}}</strong>: <md-input-container> <label>Select a Ring Group</label> <md-select ng-model="myOptions.ivr_menu_option_param"> <md-option ng-repeat="ringgroup in availRinggroups" ng-value="ringgroup.queue_extension"> {{ringgroup.queue_name}} - {{ringgroup.queue_extension}} </md-option> </md-select> </md-input-container> </div> </td> <td style="width: 100px"> <i ng-show="!beingEdited(myOptions)" class="fa fa-times-circle redfont pull-right deleteopt" aria-hidden="true" ng-click="deleteOption(myOptions)" tooltip-placement="top" uib-tooltip="Delete Option"></i> <i ng-show="!beingEdited(myOptions)" class="fa fa-pencil-square-o pull-right deleteopt" aria-hidden="true" ng-click="setEditing(myOptions)" tooltip-placement="top" uib-tooltip="Edit Option"></i> <i ng-show="beingEdited(myOptions)" class="fa fa-ban pull-right cancelopt" aria-hidden="true" ng-click="cancelEditing()" tooltip-placement="top" uib-tooltip="Cancel Edit"></i> <i ng-show="beingEdited(myOptions)" class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveOption(myOptions, editedOption)" tooltip-placement="top" uib-tooltip="Save Changes"></i> </td> </tr> </tbody> <tbody uib-collapse="!showAddOptions"> <tr class="cls-table-comp-setting-status"> <td> <md-input-container> <label>Select a Number</label> <md-select ng-model="myOptions.ivr_menu_option_digits" class="directoryOptions"> <md-option ng-repeat="digits in directoryOpts" ng-value="digits.digit" ng-disabled="!digits.available"> {{digits.digit}} </md-option> </md-select> </md-input-container> </td> <td> <md-input-container> <label>Enter a Description</label> <input ng-model="myOptions.ivr_menu_option_description"> </md-input-container> </td> <td style="padding: 0"> <table class="table table-bordered masterdata"> <tr> <td> <md-input-container> <label>Options</label> <md-select ng-model="myOptions.action"> <md-option ng-repeat="sendTo in sendToOpts" ng-value="sendTo.name" ng-click="selectSendCallTo(this, sendTo.name, myOptions)"> {{sendTo.name}} </md-option> </md-select> </md-input-container> </td> <td ng-show="myOptions.action && myOptions.action !== \'Dial By Name\'"> <span ng-show="myOptions.action === \'Transfer to an Extension\'"> <md-input-container> <label>Pick a Number</label> <md-select ng-model="myOptions.ivr_menu_option_param"> <md-option ng-repeat="user in userList2.items" ng-value="user.ext"> {{user.ext}} - {{user.name}} - {{user.phone}} </md-option> </md-select> </md-input-container> </span> <!--Transfer--> <span ng-if="myOptions.action == \'Transfer to External Number\'"> <div><md-input-container> <label>Enter a Number</label> <input md-input phone-input ng-model="addedOption.external_number"> </md-input-container></div> </span> <div ng-show="myOptions.action === \'Ring Group\'"> <md-input-container> <label>Select a Ring Group</label> <md-select ng-model="myOptions.ivr_menu_option_param"> <md-option ng-repeat="ringgroup in availRinggroups" ng-value="ringgroup.queue_extension"> {{ringgroup.queue_name}} - {{ringgroup.queue_extension}} </md-option> </md-select> </md-input-container> </div> </td> </tr> </table> </td> <td> <i class="fa fa-ban pull-right cancelopt" aria-hidden="true" ng-click="cancelInsertOption()" tooltip-placement="top" uib-tooltip="Cancel Edit"></i> <i class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveOption(myOptions, addedOption)" tooltip-placement="top" uib-tooltip="Save Changes"></i> </td> </tr> </tbody> </table> </div> </div> </div> <br> <br> </div> </div> <!--Actions--> <!--Greetings--> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Record Greeting </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <div class="row"> <div class="col-md-5"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-hand-o-up" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Click an Option Below</strong></div> <ul class="list-group"> <li class="list-group-item" ng-click="setOpcMessageBroadcast(1)"><i class="fa fa-microphone" style="margin-right: 10px"></i>Record a New Message <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(2)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload an Audio File <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(3)"><i class="fa fa-book" style="margin-right: 10px"></i> Select from Audio Library <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"></i></li> </ul> </div> </div> <div class="col-md-7"> <div ng-if="newIvr.greeting && !opcBroadcast" class="center-text show-player"> {{newIvr.greeting.file_title}}<br> <button class="btn btn-default" ng-click="playRecording(newIvr.ivr_menu_greet_long)"><i class="fa fa-play"></i> Play Current Recording</button> </div> <div class="panel" ng-if="opcBroadcast" style="border: #cfdef0 solid 1px"> <div class="panel-heading"> <strong class="cls-color-blue-tkg">{{opcBroadcastTitle}}</strong> <button class="btn btn-default pull-right" ng-click="cancelAddAudio()"><i class="fa fa-undo"></i> Cancel</button> </div> <div class="panel-body"> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron recording"> <div ng-audio-recorder id="singleAudio" myindex="0" keith="\'James\'" audio-model="recordedSingle" show-player="false" class="container" kotter-start="recordingService.start" kotter-stop="recordingService.stop"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div> <md-input-container style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="recording.title"> </md-input-container> </div> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-init="savingRecord = false;" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Record\'}} </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="savingRecord || recorder.status.isRecording || !recorder.audioModel" ng-click="savingRecord = !savingRecord; recorder.savetoServer(0, recording.title)"> <i class="glyphicon glyphicon-download"></i> Save </button> <span ng-if="savingRecord"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> <button id="btnDownload" style="display: none"></button> </div> <div class="clearfix"></div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> </div> <div ng-if="opcBroadcast===\'audiolibrary\'"> <div class="scroll-container-head"> <table class="table table-bordered table-hover table-striped data-table-top" style="width: 100%"> <thead> <tr> <th style="width: 45px">Play</th> <th>File</th> <th style="width: 100px">Choose</th> <th style="width: 90px"></th> <th ng-if="audioLibrary.length>5" style="width: 10px; padding: 0px; border-left: 0"></th> </tr> </thead> </table> </div> <div class="scroll-container" style="height: 225px"> <table class="table table-bordered table-hover table-striped" style="width: 100%"> <tbody> <tr ng-repeat="row in audioLibrary"> <td style="width: 45px"> <span ng-if="audioFilePlaying!==row.audio_library_uuid" ng-click="playAudioFile(row.filepath, row.audio_library_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"> <i class="fa fa-play-circle fa-2x"></i> </span> <span ng-if="audioFilePlaying===row.audio_library_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"> <i class="fa fa-stop-circle fa-2x"></i> </span> </td> <td><span ng-if="!greetingBeingEdited(row)">{{row.file_title}} <span ng-if="row.used ===\'true\'" aria-hidden="true" tooltip-placement="top" uib-tooltip="This greeting is being used in an Auto Attendant"><i class="fa fa-check"></i></span></span> <md-input-container ng-if="greetingBeingEdited(row)" style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="row.file_title"> </md-input-container> </td> <td style="width: 100px"> <button class="btn btn-success btn-xs" ng-click="selectAudioLibraryFile(row)"> <i class="fa fa-plus"></i> Select </button> </td> <td style="width: 90px"> <i ng-if="row.original_filename !== \'ivrgreeting_default.mp3\' && !greetingBeingEdited(row)" class="fa fa-times-circle pull-right {{row.used === \'true\' ? \'ltredfont\' : \'redfont\'}} deleteopt" ng-click="row.used ===\'true\' || deleteGreeting(row)" aria-hidden="true" tooltip-placement="top-right" uib-tooltip="{{row.used ===\'true\' ? \'This greeting is being used and can not be deleted\' : \'Delete Greeting\'}}"></i> <i ng-if="greetingBeingEdited(row)" class="fa fa-ban pull-right cancelopt" aria-hidden="true" ng-click="cancelEditGreeting()" tooltip-placement="top-right" uib-tooltip="Cancel Edit"></i> <i ng-if="greetingBeingEdited(row)" class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveEditGreeting(row)" tooltip-placement="top-right" uib-tooltip="Save Changes"></i> <i ng-if="!greetingBeingEdited(row)" class="fa fa-pencil-square-o pull-right deleteopt" aria-hidden="true" ng-click="setEditGreeting(row)" tooltip-placement="bottom-right" uib-tooltip="Edit Audio File"></i> </td> </tr> </tbody> </table> </div> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron center-text"> <div><md-input-container style="width: 100%; text-align: center"> <label>Recording Title</label> <input ng-model="recording.title"> </md-input-container></div> <span ng-if="audioRecording.name"><p><strong>{{audioRecording.name}}</strong></p></span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="audio/*" type="file" name="useravatar" style="display: none" file-model="audioRecording"> </label> <button class="btn btn-success" ng-disabled="uploadingLibrary || !audioRecording" ng-click="uploadAudioFile(audioRecording, recording.title)">Upload File</button> <span ng-if="uploadingLibrary"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </div> </div> </div> </div> </div> </div> </div> </div> <!--End of Greetings--> <!--Voicemail Greeting for New Did --> <div ng-material-collapse ng-if="true" ng-show="!newIvr.did.name"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Manage Voicemail Greeting for Attendant DID </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <form name="voicemailForm" id="voicemailForm"> <md-input-container> <input type="password" name="voicemail_password" ng-model="newIvr.voicemail.voicemail_password" ng-minlength="4" md-minlength="4" placeholder="4-digit PIN"> <div ng-messages="voicemailForm.voicemail_password.$error"> <div ng-message="minlength"> PIN must be 4 digits </div> </div> </md-input-container> <md-input-container> <input type="email" name="voicemail_mail_to" ng-model="newIvr.voicemail.voicemail_mail_to" placeholder="Forwarding Email"> <div ng-messages="voicemailForm.voicemail_mail_to.$error"> <div ng-message="email"> Must be valid email address </div> </div> </md-input-container> <div ng-if="1==2" class="attendant-bottom-button-bar"> <div class="pull-right"> <button class="btn btn-default" uib-tooltip="Save attendant" ng-click="saveAttendant(\'continue\')"><i class="fa fa-save"></i> Save Attendant</button> </div> </div> <md-button ng-if="1==2" class="md-primary md-raised" ng-click="updateVoicemail()" form="voicemailForm" type="submit"> Update Information </md-button> <br> <div class="audio-selector-container"> <md-button ng-if="newIvr.vmgreeting" class="md-default md-raised vm-button" ng-click="showAudioModal(newIvr.vmgreeting, \'voicemail-greeting1\')"> <i class="fa fa-play-circle"></i> Play Current Voicemail Greeting </md-button> <md-button class="md-default md-raised vm-button" ng-click="showVoicemailSelector = !showVoicemailSelector"> <i class="fa fa-edit"></i> Change Voicemail Greeting </md-button> <br> <div class="row" ng-show="showVoicemailSelector"> <div class="col-md-5"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-hand-o-up" style="padding-right: 10px"></i><strong class="cls-color-blue-tkg">Click an Option Below</strong></div> <ul class="list-group"> <li class="list-group-item" ng-click="setOpcMessageBroadcast(1)"><i class="fa fa-microphone" style="margin-right: 10px"></i>Record a New Message <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(2)"><i class="fa fa-upload" style="margin-right: 10px"></i>Upload an Audio File <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"></i></li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(3)"><i class="fa fa-book" style="margin-right: 10px"></i> Select from Audio Library <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"></i></li> </ul> </div> </div> <div class="col-md-7"> <div ng-if="newIvr.vmgreeting && !opcBroadcast" class="center-text show-player"> <span ng-if="newIvr.vmgreeting">{{newIvr.vmgreeting.greeting_name}}</span><br> <button class="btn btn-default" ng-click="showAudioModal(newIvr.vmgreeting, \'voicemail-greeting1\')"><i class="fa fa-play"></i> Play Current Recording</button> </div> <div class="panel" ng-if="opcBroadcast" style="border: #cfdef0 solid 1px"> <div class="panel-heading"> <strong class="cls-color-blue-tkg">{{opcBroadcastTitle}}</strong> <button class="btn btn-default pull-right" ng-click="cancelAddAudio()"><i class="fa fa-undo"></i> Cancel</button> </div> <div class="panel-body"> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron recording"> <div ng-audio-recorder id="singleAudio" myindex="0" keith="\'James\'" audio-model="recordedSingle" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div><md-input-container style="width: 100%; text-align: center"> <label>Greeting Description</label> <input ng-model="recording.title"> </md-input-container> </div> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Record\'}} </button> <button class="btn" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-disabled="recorder.status.isRecording || !recorder.audioModel" ng-click="recorder.savetoServer(getaudioModel, recording.title)"> <i class="glyphicon glyphicon-download"></i> Save </button> <button id="btnDownload" style="display: none"></button> </div> <div class="clearfix"></div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"></ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank">Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/">Adobe Flash</a> to use this feature. </div> </div> </div> </div> <div ng-if="opcBroadcast===\'audiolibrary\'"> <div class="scroll-container-head"> <table class="table table-bordered table-hover table-striped data-table-top" style="width: 100%"> <thead> <tr> <th style="width: 45px">Play</th> <th>Description</th> <th style="width: 100px">Choose</th> <th style="width: 90px"></th> <th ng-if="voicemailGreetings.length>4" style="width: 10px; padding: 0px; border-left: 0"></th> </tr> </thead> </table> </div> <div class="scroll-container" style="height: 225px"> <table class="table table-bordered table-hover table-striped" style="width: 100%"> <tbody> <tr ng-repeat="row in voicemailGreetings"> <td style="width: 45px"> <span ng-if="audioFilePlaying!==row.voicemail_greeting_uuid" ng-click="playAudioFile(getGreetingFilepath(row.greeting_filename), row.voicemail_greeting_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"> <i class="fa fa-play-circle fa-2x"></i> </span> <span ng-if="audioFilePlaying===row.voicemail_greeting_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"> <i class="fa fa-stop-circle fa-2x audiofileoption"></i> </span> </td> <td><span ng-if="!vmGreetingBeingEdited(row)">{{row.greeting_description !== \'\' ? row.greeting_description : row.greeting_name}} <span ng-if="currentVoicemailGreeting(row)" aria-hidden="true" tooltip-placement="top" uib-tooltip="This is the current voicemail greeting"><i class="fa fa-check"></i></span></span> <md-input-container ng-if="vmGreetingBeingEdited(row)" style="width: 100%; text-align: center"> <label>Greeting Description</label> <input ng-model="row.greeting_name"> </md-input-container> </td> <td style="width: 100px"> <button class="btn btn-success btn-xs" ng-click="selectVoicemailGreeting(row)"> <i class="fa fa-plus"></i> Select </button> </td> <td style="width: 90px"> <i ng-show="!vmGreetingBeingEdited(row)" class="fa fa-times-circle pull-right {{currentVoicemailGreeting(row) ? \'ltredfont\' : \'redfont\'}} deleteopt" aria-hidden="true" ng-click="currentVoicemailGreeting(row) || deleteVmGreeting(row)" tooltip-placement="top-right" uib-tooltip="{{currentVoicemailGreeting(row) ? \'This is the current greeting so it can not be deleted\' : \'Delete Greeting\'}}"></i> <i ng-show="vmGreetingBeingEdited(row)" class="fa fa-ban pull-right cancelopt" aria-hidden="true" ng-click="cancelEditVmGreeting()" tooltip-placement="top-right" uib-tooltip="Cancel Edit"></i> <i ng-show="vmGreetingBeingEdited(row)" class="fa fa-save pull-right deleteopt" aria-hidden="true" ng-click="saveEditVmGreeting(row)" tooltip-placement="top-right" uib-tooltip="Save Changes"></i> <i ng-show="!vmGreetingBeingEdited(row)" class="fa fa-pencil-square-o pull-right deleteopt" aria-hidden="true" ng-click="setEditVmGreeting(row)" tooltip-placement="top-right" uib-tooltip="Edit Greeting"></i> </td> </tr> </tbody> </table> </div> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron center-text"> <div><md-input-container style="width: 100%; text-align: center"> <label>Greeting Description</label> <input ng-model="recording.title"> </md-input-container> </div> <span ng-if="audioRecording.name"><p><strong>{{audioRecording.name}}</strong></p></span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="audio/*" type="file" name="useravatar" style="display: none" file-model="audioRecording"> </label> <button class="btn btn-success" ng-disabled="!audioRecording" ng-click="uploadVoicemailAudio(audioRecording)">Upload File</button> </div> </div> </div> </div> </div> </div> </div> <br> </form> </div> </div> </div> <div class="attendant-bottom-button-bar" style="padding-bottom: 80px"> <hr> <div class="pull-right"> <button class="btn btn-default" ng-click="cancel($event)" uib-tooltip="Cancel attendant"><i class="fa fa-undo"></i> Cancel</button> <button class="btn btn-primary" uib-tooltip="Save attendant" ng-click="saveAttendant(\'continue\')"><i class="fa fa-save"></i> Save & Continue</button> <button class="btn btn-success" uib-tooltip="Save attendant" ng-click="saveAttendant(\'close\')"><i class="fa fa-save"></i> Save & Close</button> </div> </div> </div> </div> </div>'),
a.put("views/company/audio-manage-table.html",'<md-button ng-if="categories.indexOf(\'ringtones\')!== -1 && isAdminGroupOrGreater() && accessLevels == \'company\'" ng-click="filteredLibraries().length>0 && showDefaultRingtonesModal();filteredLibraries().length==0 && showNoRingtones()" class="md-primary md-raised modal-btn pull-right"> Set Default Company Ringtones <i class="fa fa-gear"></i> </md-button> <div class="audio-table-container table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th ng-click="sortBy(\'file_title\')" class="file-name-cell"> File Name <i class="fa fa-chevron-up" ng-show="sortDirection"> </i> <i class="fa fa-chevron-down" ng-show="!sortDirection"> </i> </th> <th class="preview">Preview</th> <th class="download-file">Download</th> <th ng-if="option === \'ringtone\'" class="default-cell">Default</th> <th class="delete-file"> Delete </th> </tr> </thead> </table> </div> <div class="audio-table-container table-body-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <tbody> <tr> <td colspan="5" class="add-audio-cell" ng-click="triggerUpload()"> <span ng-if="!uploadingLibrary"> <i class="fa fa-plus-circle fa-2x"></i> </span> <span ng-if="uploadingLibrary"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </td> <simple-uploader upload-fn="uploadAudioLibrary" trigger="triggerUploader" accept="\'audio/*\'"> </simple-uploader> </tr> <tr class="cls-table-comp-setting-status" ng-if="(library.access_level===\'personal\' && library.user_uuid===user.id) || library.access_level===\'company\'" ng-repeat="library in filteredLibraries() | orderBy: sortCol : sortDirection"> <td class="file-name-cell"> <div class="file-name-container"> <p ng-click="editLibrary(library, getNeighboringInputByEvent($event))" ng-show="!library.editing"> {{library.file_title}} </p> <input type="text" ng-show="library.editing" ng-value="removeFileExtensionFromFilename(library.file_title)" ng-blur="stopEditingLibrary(library, $event.currentTarget)" on-enter="renameLibrary(library)" oninput="angular.element(this).scope().setLibraryToEdited(angular.element(this).scope().library)"> <i class="fa fa-check-square" ng-show="library.edited" ng-click="renameLibrary(library)"> </i> </div> </td> <td class="preview"> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="libraryPlaying !== library" ng-click="playAudioLibrary(library)"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="libraryPlaying === library" ng-click="stopPlayingLibrary()"> </i> </td> <td class="download-file"> <i class="fa fa-download" ng-click="downloadAudioFile(library)"> </i> </td> <td ng-if="option === \'ringtone\'" class="default-cell"> <span ng-if="calldefault && calldefault.audio_library_uuid === library.audio_library_uuid"><i class="fa fa-check"></i> Call</span> <span ng-if="textdefault && textdefault.audio_library_uuid === library.audio_library_uuid"><i class="fa fa-check"></i> Text</span> <span ng-if="chatdefault && chatdefault.audio_library_uuid === library.audio_library_uuid"><i class="fa fa-check"></i> Chat</span> </td> <td class="delete-file"> <i class="fa fa-times" ng-show="libraryAllowed(library)" ng-click="deleteAudioLibrary(library)"> </i> <p ng-show="!libraryAllowed(library)"> Company Ringtone </p> </td> </tr> </tbody> </table> </div>'),a.put("views/company/chat-macros.html",'<div class="chat-macros-table table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th class="hot-keys-header">Hot Keys</th> <th class="text-choices-header">Text Choices</th> </tr> </thead> </table> </div> <div class="chat-macros-table table-body-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <tbody> <tr class="cls-table-comp-setting-status"> <td class="hot-keys-header"> <md-input-container> <input type="text" ng-model="hotKeyText" placeholder="Add hot key text"> </md-input-container> </td> <td class="text-choice-cell"> <div class="text-choice-container"> <md-input-container class="text-choice-text"> <input type="text" ng-model="textChoiceText" placeholder="Text choice"> </md-input-container> <i class="fa fa-lg fa-check-square" ng-click="createFullMacro()" ng-show="hotKeyText && textChoiceText"></i> </div> </td> </tr> <tr class="cls-table-comp-setting-status" ng-repeat="(key, value) in chatMacros"> <td ng-repeat="(subkey, macroHotKey) in value"> <md-input-container> <input type="text" ng-value="macroHotKey[0].hot_key_text"> </md-input-container> </td> <td class="text-choice-cell" ng-repeat="(subkey, macroHotKey) in value"> <div class="text-choice-container" ng-repeat="macro in macroHotKey"> <md-input-container class="text-choice-text"> <input type="text" my-ng-change="setMacroToEditing(macro)" ng-blur="updateMacro(macro)" ng-model="macro.text_choice_text"> </md-input-container> <i class="fa fa-lg fa-check-square" ng-show="macro.editing" uib-tooltip="Update this text choice"></i> <i class="fa fa-lg fa-window-close" ng-click="removeMacro(macro)" ng-show="!macro.editing" uib-tooltip="Delete this text choice"></i> </div> <div class="text-choice-container"> <md-input-container class="text-choice-text"> <input type="text" ng-model="newTextChoiceBranch" placeholder="Text choice"> </md-input-container> <i class="fa fa-lg fa-check-square" ng-click="createTextChoiceMacro(macroHotKey[0].hot_key_text, this)" uib-tooltip="Add new text choice to macro"></i> </div> </td> </tr> </tbody> </table> </div>'),a.put("views/company/company-setup-audio-tab.html","<button class=\"btn btn-sm\" ng-class=\"state==='ringtones' ? 'btn-success' : 'btn-primary'\" ng-click=\"state = 'ringtones'\"> Company Ringtones </button> <button class=\"btn btn-sm\" ng-class=\"state==='music-on-hold' ? 'btn-success' : 'btn-primary'\" ng-click=\"state = 'music-on-hold'\"> Music On Hold </button> <audio-manage-table access-levels=\"['company']\" domain=\"domain\" option=\"'ringtone'\" categories=\"['ringtones']\" ng-if=\"state === 'ringtones'\"> </audio-manage-table> <music-on-hold-manage-table domain=\"domain\" ng-if=\"state === 'music-on-hold'\"> </music-on-hold-manage-table>"),a.put("views/company/company-setup-number-setup-tab.html",'<p>Set the outbound caller ID for each of your DIDs. Each phone number with a unique CallerID must be associated with a physical address for 911 service. There is a $1/month fee for each number with a unqiue CallerID to cover the cost of 911 service.</p> <div class="users-table"> <div class="table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th class="user-name-col">User Name</th> <th class="extension-col">Extension</th> <th class="did-col">User DID</th> <th class="outbound-col">Outbound CallerID</th> <th class="address-col">E911 Address</th> </tr> </thead> <!-- </table>\n    </div>\n    <div class="table-body-container">\n        <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> --> <tbody> <tr ng-if="loading"> <td colspan="5"> <span class="spinner" ng-show="loading"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </td> </tr> <tr ng-show="!loading" ng-repeat="user in users track by user.id"> <td class="user-name-col"> <md-input-container> {{user.contact_name_given + \' \' + user.contact_name_family}} </md-input-container> </td> <td class="extension-col"> <md-input-container> {{user.user_ext}} </md-input-container> </td> <td class="did-col"> <div class="tableclass"> <div class="tablecell"> <md-input-container ng-show="editingDid !== user.id"> {{user.did | tel}} </md-input-container> <md-input-container ng-show="editingDid === user.id"> <md-select ng-model="userDIDChoices[user.id]" aria-label="choices" md-on-close="doChangeUserDid(user)"> <md-option ng-show="isAvailDid(did, user)" ng-repeat="did in validDids" ng-value="did"> {{did.destination_number | tel}} <span class="greyfont"> - {{did.destination_description}}</span> <span class="greyfont capitalize" ng-if="did.port"> - {{did.port.port_status}} </span> <span class="greyfont capitalize" ng-if="did.destination_number === user.did"> - Current </span> </md-option> </md-select> </md-input-container> </div> <div class="tablecell right-text"> <i class="fa fa-pencil-square-o" ng-click="editDid(user)" ng-if="editingDid !== user.id" tooltip-placement="top" uib-tooltip="Change {{user.contact_name_given + \' \' + user.contact_name_family}}\'s DID"></i> <i class="fa fa-undo dktealfont" ng-click="cancelEditUserDid(user)" ng-if="editingDid === user.id" tooltip-placement="top" uib-tooltip="Save changes to {{user.contact_name_given + \' \' + user.contact_name_family}}\'s DID"></i> </div> </div> </td> <td class="outbound-col"> <md-input-container> <md-select ng-model="outboundDIDChoices[user.id]" aria-label="choices" ng-change="setCallerId(user, did)"> <md-option ng-if="!did.port_status || did.port_status == \'porting\'" ng-repeat="did in validDids" ng-value="did"> {{did.destination_number | tel}} <span class="greyfont capitalize" ng-if="did.port"> - {{did.port.port_status}} </span> </md-option> </md-select> </md-input-container> </td> <td class="address-col"> <md-input-container> <md-select ng-model="emergencyDidChoices[user.id]" aria-label="choices" ng-change="assignCallerIdNumber(user, false)"> <md-option ng-repeat="reg in e911Registrations" ng-value="reg"> {{reg.address}}, {{reg.city}}, {{reg.state}} </md-option> <md-option ng-value="null"> Add New Address </md-option> </md-select> </md-input-container> </td> </tr> </tbody> </table> </div> </div> <div class="tableclass addresses"> <div class="tablecell"> Edit E911 physical addresses below as needed for each outgoing Caller ID number listed below. </div> <div class="tablecell button"> <md-button ng-click="showNewE911Modal()" class="pull-right md-default md-raised"> <i class="fa fa-plus"></i> Add New Address </md-button> </div> </div> <div class="address-table"> <div class="table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th>Address</th> <th class="city-col">City</th> <th class="state-col">State</th> <th class="zip-col">Zipcode</th> <th class="options-col">Default</th> <th class="options-col"></th> </tr> </thead> <tbody> <tr ng-if="loading"> <td colspan="5"> <span class="spinner" ng-show="loading"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </td> </tr> <tr ng-if="showAddE911"> <td> <md-input-container> <input type="text" ng-model="newE911Number.address1" placeholder="address"> </md-input-container> </td> <td> <md-input-container> <input type="text" ng-model="newE911Number.community" placeholder="city"> </md-input-container> </td> <td> <md-input-container> <md-select ng-model="newE911Number.state" name="e911State" required placeholder="state"> <md-option ng-repeat="state in billingStates" ng-value="state.state_abbr"> {{state.state_name}} </md-option> </md-select> <div ng-messages="registerE911.state.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> </td> <td> <md-input-container> <input type="text" ng-model="newE911Number.postalcode" placeholder="zipcode"> </md-input-container> </td> <td class="options-col"> <div class="options-container"> <i class="fa fa-ban pull-right cancelopt" ng-click="cancelAddE911()" tooltip-placement="top" uib-tooltip="Cancel Edit"> </i> <i class="fa fa-save pull-right deleteopt" ng-click="registerE911Phone()" tooltip-placement="top" uib-tooltip="Save Changes"> </i> </div> </td> </tr> <tr ng-show="!loading" ng-repeat="(destinationUuid, registration) in e911Registrations"> <!-- <td class="number-col">\n                        {{e911CandidateDIDs[destinationUuid].destination_number | tel}}\n                    </td> --> <td ng-if="!registration.editing"> {{registration.address}} <span ng-if="registration.domain_default===\'true\'"> - (Default)</span> </td> <td class="full-md-container" ng-if="registration.editing"> <md-input-container> <input type="text" ng-model="editE911Number.address1" placeholder="address"> </md-input-container> </td> <td ng-if="!registration.editing"> {{registration.city}} </td> <td ng-if="registration.editing"> <md-input-container> <input type="text" ng-model="editE911Number.community" placeholder="city"> </md-input-container> </td> <td ng-if="!registration.editing"> {{registration.state}} </td> <td ng-if="registration.editing"> <md-input-container> <input type="text" ng-model="editE911Number.state" placeholder="state"> </md-input-container> </td> <td ng-if="!registration.editing"> {{registration.zipcode}} </td> <td ng-if="registration.editing"> <md-input-container> <input type="text" ng-model="editE911Number.postalcode" placeholder="zipcode"> </md-input-container> </td> <td> <i class="fa fa-square-o orangefont mainopt" ng-if="!registration.domain_default" ng-click="setDefaultE911Address(registration)" tooltip-placement="top" uib-tooltip="Set {{registration.address}} as Default Address"></i> <i class="fa fa-check-square-o orangefont mainopt" ng-if="registration.domain_default === \'true\'" tooltip-placement="top" uib-tooltip="{{registration.address}} is the Default Address"></i> </td> <td ng-show="!registration.editing"> <span ng-click="editE911(registration)"> <i class="fa fa-pencil-square-o primaryfont mainopt"></i> </span> </td> <td ng-show="registration.editing"> <div class="options-container"> <i class="fa fa-save mainopt" ng-click="saveEditE911(registration)" tooltip-placement="top" uib-tooltip="Save Changes"> </i> <i class="fa fa-ban mainopt" ng-click="cancelEditE911(registration)" tooltip-placement="top" uib-tooltip="Cancel Edit"> </i> </div> </td> </tr> </tbody> </table> </div> </div> <p>Call customer support to port in additional phone numbers by dialing 411 or clicking "Talk to Support" above</p>'),a.put("views/company/company-setup-user-edit.html",'<md-button ng-click="back()" class="user-edit-back-btn"> <md-icon> arrow_back </md-icon> </md-button> <div class="user-edit"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> {{user.contact_name_full}} </h2> </div> </md-toolbar> <md-content class="user-edit-content"> <md-input-container> <input type="text" ng-value="user.contact_name_given" ng-change="userInfoChanged = true" ng-model="settings.firstName" placeholder="first name"> </md-input-container> <md-input-container> <input type="text" ng-value="user.contact_name_family" ng-change="userInfoChanged = true" ng-model="settings.lastName" placeholder="last name"> </md-input-container> <md-input-container> <input type="text" ng-change="userInfoChanged = true" phone-input ng-value="user.phones[0].phone_number" ng-model="settings.phoneNumber" autocomplete="off" id="phone-input" placeholder="phone number"> </md-input-container> <md-divider></md-divider> <md-label class="sub-header"> Password </md-label> <br> <form name="passwordForm" id="passwordForm"> <div class="row"> <div class="col-md-6"> <md-input-container class="password-input"> <input type="password" name="password" ng-model="fields.password" autocomplete="off" ng-change="analyze(fields.password)" md-minlength="8" ng-minlength="8" ng-maxlength="20" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" placeholder="new password"> <div ng-messages="passwordForm.password.$error"> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> </md-input-container> </div> <div class="col-md-6"> <md-input-container class="password-input"> <input type="password" name="passwordConfirmation" md-minlength="8" ng-minlength="8" ng-maxlength="20" autocomplete="off" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" ng-model="fields.password_confirmation" placeholder="confirm new password"> <div ng-messages="passwordForm.passwordConfirmation.$error"> <small ng-show="passwordForm.passwordConfirmation.$dirty && fields.password != fields.password_confirmation"> Password confirmation does not match. </small> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> </md-input-container> </div> </div> </form> <md-divider></md-divider> <br> <md-label class="sub-header"> Administration Settings </md-label> <div class="administration-settings"> <div class="switches"> <md-switch class="md-warn" ng-change="userInfoChanged = true" ng-model="settings.userProfileStatus"> <p ng-if="settings.userProfileStatus">User Enabled</p> <p ng-if="!settings.userProfileStatus">User Disabled</p> </md-switch> <md-switch class="md-warn" ng-change="userInfoChanged = true" ng-model="settings.recordAll"> Record All Calls </md-switch> <md-switch class="md-warn" ng-change="userInfoChanged = true" ng-model="settings.userIsAdmin"> <p>User is Company Admin</p> </md-switch> </div> <md-button class="md-warn md-raised delete-user-btn" ng-click="deleteUserProfile()"> Delete User </md-button> <div class="change-extension"> <md-checkbox style="margin:auto" class="md-warn" ng-model="extensionchange.confirm" aria-label="changeextension"> Change User\'s Extension </md-checkbox><br> <br> <md-input-container ng-init="settings.userExt"> <input type="number" ng-disabled="!extensionchange.confirm" ng-value="user.user_ext" ng-change="userInfoChanged = true" ng-model="newUserExt" placeholder="User Extension"> </md-input-container> <br> <md-button class="md-warn md-raised delete-user-btn" ng-click="changeUserExtension(newUserExt)"> Change Extension </md-button> </div> </div> <br> <md-divider></md-divider> <md-button ng-click="triggerUpdate()" class="md-primary md-raised"> Update Information </md-button> <br><br><br> </md-content> </div>'),a.put("views/company/company-setup-users-table.html",'<div class="table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th class="first-name-col"> <a href ng-click="sortBy(\'contact_name_given\')" tooltip-placement="top-left" uib-tooltip="{{tips.sortby.sortbyfirstname}}"> First Name <i class="fa fa-{{!reverse && predicate===\'contact_name_given\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th class="last-name-col"> <a href ng-click="sortBy(\'contact_name_family\')" tooltip-placement="top-left" uib-tooltip="{{tips.sortby.sortbylastname}}"> Last Name <i class="fa fa-{{!reverse && predicate===\'contact_name_family\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th class="email-col"> <a href ng-click="sortBy(\'contact_email_address\')" tooltip-placement="top-left" uib-tooltip="{{tips.sortby.sortbyemail}}"> Email <i class="fa fa-{{!reverse && predicate===\'contact_email_address\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th class="extension-col"> <a href ng-click="sortBy(\'user_ext\')" tooltip-placement="top-left" uib-tooltip="{{tips.sortby.sortbyextension}}"> Extension <i class="fa fa-{{!reverse && predicate===\'user_ext\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th class="mobile-number-col"> <a href ng-click="sortBy(\'did\')" tooltip-placement="top-left" uib-tooltip="{{tips.sortby.sortbydid}}"> DID <i class="fa fa-{{!reverse && predicate===\'did\'?\'chevron-up\':\'chevron-down\'}}"> </i> </a> </th> <th class="add-user-col"> <md-button class="md-fab md-mini md-success toggle-add-user-btn" ng-click="toggleAddUserRow()" tooltip-placement="top" uib-tooltip="Add New User"> <md-icon> person_add </md-icon> </md-button> </th> </tr> </thead> </table> </div> <div uib-collapse="!showAddUserRow" class="add-user-table"> <table class="table table-bordered table-hover table-striped"> <tbody> <tr class="add-user-row"> <td class="first-name-col"> <md-input-container> <input type="text" ng-model="newUser.txtNameGiven" placeholder="first name"> </md-input-container> </td> <td class="last-name-col"> <md-input-container> <input type="text" ng-model="newUser.txtNameFamily" placeholder="last name"> </md-input-container> </td> <td class="email-col"> <md-input-container> <input type="text" ng-model="newUser.txtEmail" placeholder="email"> </md-input-container> </td> <td class="extension-col"> <md-input-container> <input type="text" ng-model="newUser.txtExtension" placeholder="extension"> </md-input-container> </td> <td class="mobile-number-col" style="padding:20px"> <button ng-if="!showSpinner" class="btn btn-success btn-block" ng-click="addUser()" style="padding"> Save User </button> <span ng-if="showSpinner"> <i class="fa fa-spinner fa-spin fa-2x"></i> </span> </td> <td class="add-user-col"></td> </tr> </tbody> </table> </div> <div class="table-body-container"> <table class="table table-bordered table-hover table-striped"> <tbody> <tr ng-repeat="user in filtered = (users | filter:search | orderBy : predicate :reverse) | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit" ng-class="user.user_enabled !== \'true\' ? \'userdisabled\' : null"> <td class="first-name-col" ng-click="editUser(user)"> {{user.contact_name_given}} {{user.user_enabled !== \'true\' ? \'(Disabled)\' : \'\'}} </td> <td class="last-name-col" ng-click="editUser(user)"> {{user.contact_name_family}} </td> <td class="email-col" ng-click="editUser(user)"> {{user.contact_email_address}} </td> <td class="extension-col" ng-click="editUser(user)"> {{user.user_ext}} </td> <td class="mobile-number-col" ng-click="editUser(user)"> {{user.did | tel}} </td> <td class="add-user-col" ng-if="isKotterTechOrGreater()"> <md-button class="md-raised"> <md-icon ng-click="showUserProfileInfo(user)"> person_outline </md-icon> </md-button> </td> </tr> </tbody> </table> </div>'),a.put("views/company/company-status.html",'<div class="table-head-container" ng-init="getDomainsStatus()"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th>Status Name</th> <th>Status Description</th> <th>Receive Calls</th> <th>Timer</th> <th>Status Enabled?</th> <th>Icon</th> </tr> </thead> <tbody uib-collapse="!showAddStatus"> <tr class="cls-table-comp-setting-status"> <td> <md-input-container style="padding: 0px !important; margin: 0px !important; height: 25px !important; width: 100%"> <input type="text" ng-model="NEWstatus.status_name" maxlength="20"> </md-input-container> </td> <td> <md-input-container style="padding: 0px !important; margin: 0px !important; height: 25px !important; width: 100%"> <input type="text" ng-model="NEWstatus.status_description"> </md-input-container> </td> <td style="text-align: center !important"> <md-switch class="md-primary" name="special" ng-model="NEWstatus.receive_calls" required style="padding: 0px !important; margin: 0px !important; height: 25px !important"> </md-switch> </td> <td style="text-align: center !important"> <md-switch class="md-warn" name="special" ng-model="NEWstatus.start_timer" required style="padding: 0px !important; margin: 0px !important; height: 25px !important"> </md-switch> </td> <td style="text-align: center !important"> <md-checkbox name="tos" ng-model="NEWstatus.status_active" required style="padding: 0px !important; margin: 0px !important; height: 25px !important; text-align: center !important"> </md-checkbox> </td> <td> <md-input-container class="md-block" flex-gt-sm style="padding: 0px !important; margin: 0px !important; height: 25px !important"> <md-select ng-model="NEWstatus.status_icon"> <md-option ng-repeat="icons in statusSuggestedIcons" value="{{icons.description}}"> <i class="fa {{icons.description}} fa-2x" style="color: {{icons.color}}"> </i> </md-option> </md-select> </md-input-container> </td> </tr> </tbody> <tbody> <tr ng-repeat="RSTstatus in domainsStatus" ng-init="varIndexRecord = RSTstatus.status_uuid;  varIndexRecord= false"> <td ng-click="varIndexRecord1=true"> <form name="myform"> <input type="hidden" ng-model="RSTstatus.status_uuid"> <strong ng-show="!varIndexRecord1" tooltip-placement="top" uib-tooltip="Edit Record"> {{RSTstatus.status_name}} </strong> <md-input-container style="padding: 0px !important; margin: 0px !important; height: 25px !important; width: 100%" ng-show="varIndexRecord1"> <input type="text" name="statusname" ng-model="RSTstatus.status_name" ng-minlength="2" maxlength="20" required ng-blur="!myform.statusname.$error.required? updDomainsStatus(RSTstatus): varIndexRecord1=true"> </md-input-container> <small ng-show="myform.statusname.$error.required"> Please enter something! </small> </form> </td> <td ng-click="varIndexRecord2=true"> <form name="myform1"> <span ng-show="!varIndexRecord2" tooltip-placement="top" uib-tooltip="Edit Record"> {{RSTstatus.status_description}} </span> <md-input-container style="padding: 0px !important; margin: 0px !important; height: 25px !important; width: 100%" ng-show="varIndexRecord2"> <input type="text" name="statusd" ng-model="RSTstatus.status_description" ng-minlength="2" required ng-blur="!myform1.statusd.$error.required? updDomainsStatus(RSTstatus): varIndexRecord2=true"> </md-input-container> <small ng-show="myform1.statusd.$error.required"> Please enter something! </small> </form> </td> <td style="text-align: center !important"> <md-switch class="md-primary" ng-model="RSTstatus.receive_calls" ng-change="updDomainsStatus(RSTstatus)" name="special" required style="padding: 0px !important; margin: 0px !important; height: 25px !important"></md-switch> </td> <td style="text-align: center !important"> <md-switch class="md-warn" ng-model="RSTstatus.start_timer" ng-change="updDomainsStatus(RSTstatus)" name="special" required style="padding: 0px !important; margin: 0px !important; height: 25px !important"></md-switch> </td> <td style="text-align: center !important"> <md-checkbox ng-model="RSTstatus.status_active" ng-change="updDomainsStatus(RSTstatus)" name="tos" style="padding: 0px !important; margin: 0px !important; height: 25px !important; text-align: center !important"> </md-checkbox> </td> <td style="text-align: center"> <span ng-show="!varIndexRecord3" ng-click="varIndexRecord3=true" tooltip-placement="top" uib-tooltip="Edit Record"> <i class="fa {{RSTstatus.status_icon}} cls-color-blue-tkg"></i> </span> <md-input-container class="md-block" flex-gt-sm style="padding: 0px !important; margin: 0px !important; height: 25px !important" ng-show="varIndexRecord3"> <md-select ng-model="RSTstatus.status_icon" ng-change="updDomainsStatus(RSTstatus); varIndexRecord3=false"> <md-option ng-repeat="icons in statusSuggestedIcons" value="{{icons.description}}" class="statusAvailable" ng-disabled="!icons.available"> <i class="fa {{icons.description}} fa-2x" ng-style="icons.available==true && {\'cursor\':\'pointer\'} || {\'cursor\':\'no-drop\'}"> </i> &nbsp; {{icons.available ? \'Available\':\'Used\'}} </md-option> </md-select> </md-input-container> </td> </tr> </tbody> </table> <button class="btn btn-primary" ng-click="addStatus()" ng-show="!showAddStatus" tooltip-placement="top" uib-tooltip="New Status" style="margin-bottom: 20px"> <i class="fa fa-address-card-o"></i> Add Status </button> <button class="btn btn-success" ng-click="insDomainsStatus(NEWstatus)" ng-show="showAddStatus" tooltip-placement="top" uib-tooltip="Save New Status" style="margin-bottom: 20px"> <i class="fa fa-save"></i> Save Status </button> <button class="btn btn-danger" ng-click="cancelInsertStatus();" ng-show="showAddStatus" tooltip-placement="top" uib-tooltip="Cancel" style="margin-bottom: 20px; margin-left: 20px"> <i class="fa fa-undo"></i> Cancel Insert </button> </div>'),a.put("views/company/confirmdeletecontact.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Removal of Contact?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Are you sure you want to delete this contact? This is not reversible!<br> <strong>{{vm.content.data.contact_name_given+\' \'+vm.content.data.contact_name_family}}</strong></div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="removeContact(vm.content.data.contact_uuid)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Delete</button> </div> </div> </div>'),a.put("views/company/confirmdeletecontactphone.html",'<div> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Removal of Contact Phone Number?</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Are you sure you want to delete the following phone number?<br> {{vm.content.data.phone_number | tel}}</div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="deleteContactPhone(vm.content.data)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Delete</button> </div> </div> </div>'),a.put("views/company/confirmdissolvegroup.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Dissolution?</span> <button type="button" ng-click="closeThisModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <h4>Dissolving {{vm.content.data.group.group_name}}?</h4> <div class="cls-title-cont-modal"> Are you sure you want to dissolve this group? This is not reversible! </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-danger btn-md" ng-click="vm.content.data.dissolveGroup(vm.content.data.group)"> <i class="fa fa-times" style="margin-right: 10px"></i> Confirm Dissolve </button> </div> </div>'),a.put("views/company/contact-spreadsheet-importer-modal.html",'<div class="modal-header" id="modal-screen-share"> <span class="cls-header-modal"> Spreadsheet Contact Import </span> <button type="button" ng-click="vm.content.data.close()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <contact-spreadsheet-importer></contact-spreadsheet-importer> </div>'),a.put("views/company/contact-spreadsheet-importer.html",'<div ng-if="displayLineErrors.length>0" uib-alert ng-class="\'alert-warning\'" close="closeMessage()" dismiss-on-timeout="15000" ng-bind-html="displayLineErrors"> </div> <div class="row"> <div class="col-md-6"> <div class="jumbotron import" ng-show="!gridOptions.data.length && !csv.result"> <div class="row"> <div class="col-lg-12"> <label class="btn btn-default btn-file btn-block" style="border-top-left-radius: 5; border-bottom-left-radius: 5"> <span class="cls-color-blue-tkg"> <i class="fa fa-file-excel-o cls-color-blue-tkg" style="margin-right: 10px"></i> Import spreadsheet file </span> <input type="file" accept=".xls,.xlsx,.ods" fileread="" opts="gridOptions" multiple style="display: none"> </label> <span class="smfont"> NOTE: First row of file must contain the headers for the columns. </span> </div> </div> </div> </div> <div class="col-md-6"> <div class="jumbotron import" ng-show="!gridOptions.data.length && !csv.result"> <div class="row"> <div class="col-lg-12"> <ng-csv-import class="csv-import" content="csv.content" separator="csv.separator" accept="csv.accept" separator-visible="csv.separatorVisible" result="csv.result" encoding="csv.encoding"> </ng-csv-import> </div> </div> </div> </div> </div> <div class="cls-company-setup-mnu"> <div class="cls-cont-company-setup" ng-if="gridOptions.data.length"> <xlsx-import-processor xlsx="gridOptions" column-defs="gridOptions.columnDefs" close-message="closeMessage" common-contact-functions="commonContactFunctions"> </xlsx-import-processor> </div> <div class="cls-cont-company-setup" ng-if="csv.result"> <csv-import-processor csv="csv.result" close-message="closeMessage" common-contact-functions="commonContactFunctions"> </csv-import-processor> </div> </div>'),
a.put("views/company/contactsmaster.html",'<div id="addcontact" ng-controller="SettingsCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x cls-color-blue-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">{{action}}</span> <button type="button" ng-click="closeAddContact()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body-contacts-master" ng-show="!confirmDelete"> <form name="frmContacts" ng-show="!importContact"> <!-- input type="text" class="form-control" ng-model="contactUser.contact_nickname" placeholder="Nickname"  --> <input type="hidden" ng-model="contactUser.contact_uuid"> <md-tabs md-dynamic-height> <md-tab label="General Information" style="background: red"> <!-- //////////////////// GENERAL INFORMATION TAB \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ --> <div id="tabContContacts"> <div class="row"> <div class="col-lg-3 col-md-6"> <md-input-container> <label>Prefix</label> <input name="" ng-model="contactUser.contact_name_prefix"> <div ng-messages="frmContacts.favoriteColor.$error"> <div ng-message="required">This Field is required!</div> </div> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container> <label>First Name</label> <input name="txtName" ng-model="contactUser.contact_name_given" required> <div ng-messages="frmContacts.txtName.$error"> <div ng-message="required">First name is required!</div> </div> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container> <label>Last Name</label> <input name="txtLastName" ng-model="contactUser.contact_name_family" required> <div ng-messages="frmContacts.txtLastName.$error"> <div ng-message="required">Last name is required!</div> </div> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container> <label>Suffix</label> <input name="" ng-model="contactUser.contact_name_suffix"> <div ng-messages="frmContacts.favoriteColor.$error"> <div ng-message="required">This Field is required!</div> </div> </md-input-container> </div> </div> <div class="row"> <div class="col-lg-3 col-md-6"> <md-input-container class="md-block"> <label>Email Address</label> <input type="email" name="txtEmail" ng-model="contactUser.contact_email_address" minlength="5" maxlength="100" ng-pattern="/^.+@.+\\..+$/"> <div ng-messages="frmContacts.txtEmail.$error" role="alert"> <div ng-message-exp="[\'required\', \'minlength\', \'maxlength\', \'pattern\']">You must enter a valid email!</div> </div> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container> <label>Organization</label> <input name="txtOrganization" ng-model="contactUser.contact_organization"> <div ng-messages="frmContacts.txtName.$error"></div> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container> <label>Time Zone</label> <md-select name="type" ng-model="contactUser.contact_time_zone"> <md-option><em>None</em></md-option> <md-option ng-repeat="timeZone in timeZones" ng-value="timeZone.timezone"> {{timeZone.display}} - {{timeZone.timezone}} </md-option> </md-select> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-checkbox style="margin-left: 25px" ng-model="contactUser.favorite" aria-label="Add to Favorites" class="md-warn md-align-top-left" flex> Add to Favorites <br> {{ data.cb2 }} </md-checkbox> </div> </div> <div class="row"> <div class="col-lg-6"> <div class="col-lg-6 text-center"> <center> <!-- img src="{{pathImgProfile + contactUser.contact_profile_image}}" ng-if="contactUser.contact_profile_image && contactUser.contact_profile_image!==\'0\' && actionContact===\'edit\'" class="cls-img-profile" alt=""/  --> <div class="settings-avatar" ng-if="uploader.queue.length===0 "> <div ng-if="contactUser.contact_profile_image" class="settings-avatar"> <img src="{{pathImgProfile + contactUser.contact_profile_image}}" class="cls-settings-img-profile" alt=""> </div> <div ng-if="!contactUser.contact_profile_image" class="cls-settings-img-profile-null" style="background-color: {{ contactUser.contact_profile_color ? contactUser.contact_profile_color : \'\' }}"> <i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"></i> </div> </div> <div ng-show="uploader.isHTML5" ng-repeat="item in uploader.queue" style="width: 120px !important; height: 120px !important" s> <span class="cls-contact-previous-avatar" ng-thumb="{file: item._file, width: 100, height: 100}"></span> </div> <!-- label class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0;" ng-if="uploader.queue.length===0">\n                                            <i class="fa fa-photo"></i> Upload Image \n                                            <input type="file" nv-file-select="" uploader="uploader" style="display: none;" />\n                                        </label  --> </center> </div> <div class="col-lg-6" ng-init="contactUser.contact_profile_color ? contactUser.contact_profile_color : contactUser.contact_profile_color=profilecoloroptions[0]"> <center> <div ng-if="contactUser.contact_profile_image"> <button class="btn btn-danger" ng-click="removeAvatar()"><i class="fa fa-trash"></i> Remove Image</button> </div> <div ng-show="uploader.queue.length===0 && !contactUser.contact_profile_image"> <div ng-repeat="color in profilecoloroptions" class="coloroptionbox text-center"> <div class="coloroptions" style="background-color: {{color}}"> <input type="radio" name="contactUser.contact_profile_color" ng-selected="$index=0" ng-model="contactUser.contact_profile_color" value="{{color}}" style="margin-top: 8px"> </div> </div> </div> </center> <div> <div ng-repeat="item in uploader.queue"> <label ng-show="never">{{contactUser.contact_profile_image=item.file.name}}</label> <input type="hidden" ng-model="contactUser.contact_profile_image"> <span>{{ item.file.name.length > 25 ? item.file.name.substring(0, 12) + \' ... \' + item.file.name.substring(item.file.name.length-12) : item.file.name }}</span> <br> <span>{{ item.file.size/1024/1024|number:2 }} MB</span> </div> </div> </div> </div> <div class="col-lg-6"> <div class="input-group"> <textarea class="form-control" rows="5" ng-model="contactUser.contact_note" placeholder="Submit notes about this contact ..."></textarea> </div> </div> </div> <div class="row" ng-if="uploader.queue.length===0"> <div class="col-lg-3"> <label class="btn btn-default btn-file btn-block cls-color-blue-tkg"> <i class="fa fa-photo"></i> {{!contactUser.contact_profile_image ? \'Upload\' : \'Change\'}} Image <input type="file" nv-file-select="" uploader="uploader" style="display: none"> </label> </div> <div class="col-lg-4" ng-if="!contactUser.contact_profile_image"> <label style="margin-top: 10px; color: navy">-OR- Select a color for generic avatar</label> </div> </div> </div> </md-tab> <md-tab label="Phone Numbers"> <!-- //////////////////// PHONE NUMBERS TAB \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ --> <div id="tabContContacts"> <div class="row" style="padding-top: 10px; border: lavender solid 1px"> <div class="col-lg-3 col-md-6"> <md-input-container style="width: 100% !important"> <label>Phone Type</label> <md-select name="type" ng-model="contactPhone.phone_label"> <md-option><em>None</em></md-option> <md-option ng-repeat="phonetype in phoneNumberTypes" value="{{phonetype}}"> {{phonetype}} </md-option> </md-select> </md-input-container> </div> <div class="col-lg-3 col-md-6"> <md-input-container style="width: 100% !important"> <label>Phone Number</label> <input name="txtPhoneNumber" phone-input ng-model="contactPhone.phone_number"> <div ng-messages="frmContacts.txtPhoneNumber.$error"> <div ng-message="required">Phone Number is required!</div> </div> </md-input-container> </div> <div class="col-lg-2 col-md-6"> <md-input-container style="width: 100% !important"> <label>Extension</label> <input name="txtExtension" ng-model="contactPhone.phone_extension" ng-disabled="contactPhone.phone_label ===\'Mobile\'"> <div ng-messages="frmContacts.txtExtension.$error"> </div> </md-input-container> </div> <div class="col-lg-2 col-md-6"> <md-checkbox ng-model="contactPhone.phone_primary" aria-label="Primary Number" ng-true-value="1" ng-false-value="0" class="md-warn md-align-top-left" flex> Primary Number </md-checkbox> <md-checkbox ng-model="contactPhone.phone_type_text" aria-label="Receive Texts" ng-true-value="1" ng-false-value="0" class="md-warn md-align-top-left" flex> Receive Texts </md-checkbox> </div> <div class="col-lg-2 col-md-6"> <button class="btn btn-primary btn-md" ng-disabled="!contactPhone.phone_label || !contactPhone.phone_number" ng-click="listPhoneNumber(contactPhone, editingPhoneIndex)" style="text-decoration: none"> <i class="fa fa-list-ol" style="margin-right: 10px"></i> {{editingPhoneIndex != null ? \'Update in\' : \'Add to\'}} list </button> </div> </div> <md-list ng-cloak ng-if="phoneList.length > 0"> <md-subheader class="md-no-sticky"><strong class="cls-color-blue-tkg">Phone List</strong></md-subheader> <md-list-item ng-repeat="phone in phoneList"> <div class="col-lg-2 cls-row-list-phone">{{phone.phone_label}}<input type="hidden" ng-modal="phone.contact_phone_uuid"></div> <!--  verificar DB  --> <div class="col-lg-3 cls-row-list-phone">{{phone.phone_number | tel }} <span class="badge" style="font-size: 8px" ng-if="!phone.contact_phone_uuid">New</span></div> <div class="col-lg-2 cls-row-list-phone"><span ng-if="phone.phone_extension">{{ phone.phone_extension | tel}}</span> </div> <div class="col-lg-3 cls-row-list-phone">{{phone.phone_primary == 1 ? \'Primary Number\' : \'\'}} <br ng-if="phone.phone_primary == 1"> {{phone.phone_type_text == 1 ? \'Receive Texts\' : \'\'}} </div> <div class="col-lg-2 right-text" style="font-size: 20px"> <i class="btn btn-md fa fa-trash cls-color-red-tkg" style="margin-right: 10px" ng-click="showAlertDelete(\'phone\', phone, $index)"></i> <i class="btn btn-md fa fa-edit cls-color-blue-tkg" ng-click="editPhone(phone, $index)"></i> </div> </md-list-item> </md-list> </div> </md-tab> </md-tabs> </form> <div ng-show="importContact"> <!--<md-toolbar id="contact-groups-toolbar">--> <md-button ng-click="toggleState=\'spreadsheet\'" class="md-primary md-raised" ng-disabled="userContactTotalMaxedOut()"> Import From Spreadsheet </md-button> <md-button ng-click="obtainTargetGroup()" class="md-primary md-raised" ng-disabled="userContactTotalMaxedOut()"> Import Google Contacts </md-button> <!--<md-button ng-init="initializeGoogle()" ng-click="toggleState=\'google\'; authGoogleNew();" class="md-primary md-raised">\n                New Import Google Contacts\n            </md-button>--> <!--</md-toolbar>--> <contact-spreadsheet-importer ng-show="toggleState==\'spreadsheet\'"> </contact-spreadsheet-importer> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <div ng-show="!confirmDelete"> <button ng-if="!importContact && !contactUser.contact_uuid" class="btn btn-warning importBtn" ng-click="import()"> Import Contact </button> <p style="font-style: italic; display: inline-block" ng-if="!userContactTotalMaxedOut()"> NOTE: The Pilot version of Bridge allows a maximum of 300 contacts per user. </p> <button ng-if="importContact && !contactUser.contact_uuid" class="btn btn-warning importBtn" ng-click="import()"> Create User </button> <!-- button ng-if="uploader.queue.length>0" type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="addContactForm.$invalid || !uploader.getNotUploadedItems().length"><i class="fa fa-upload"></i> Save Contact With Avatar</button --> <!-- button class="btn btn-danger btn-md" ng-if="contactUser.contact_uuid" ng-click="showModalFull(\'/company/confirmdeletecontact.html\', userContacts[vm.content.data], \'\')"><i class="fa fa-trash" style="margin-right: 10px;"></i>Delete Contact</button  --> <button class="btn btn-danger btn-md" ng-if="contactUser.contact_uuid" ng-click="showAlertDelete(\'contact\', contactUser.contact_uuid)"> <i class="fa fa-trash" style="margin-right: 10px"></i> Delete Contact </button> <!-- button ng-if="uploader.queue.length>0" type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="addContactForm.$invalid || !uploader.getNotUploadedItems().length"><i class="fa fa-upload"></i> Save Contact With Avatar</button --> <button class="btn btn-primary btn-md" ng-if="importContact" ng-click="closeContacts()"> Done </button> <button class="btn btn-primary btn-md" ng-if="!contactUser.contact_uuid && !importContact" ng-disabled="frmContacts.$invalid || phoneList.length === 0" ng-click="addContactSubmit(contactUser)"> <i class="fa fa-save" style="margin-right: 10px"></i> Add Contact </button> <button class="btn btn-primary btn-md" ng-if="contactUser.contact_uuid && !importContact" ng-disabled="frmContacts.$invalid || phoneList.length === 0" ng-click="saveContactUser(contactUser,phoneList)"> <i class="fa fa-save" style="margin-right: 10px"></i> Save Contact </button> <p style="font-style: italic; display: inline-block; color: red; font-size: 1.2rem" ng-if="userContactTotalMaxedOut()"> NOTE: You have met the maximum number of 300 contacts per user. Please delete some contacts if you would like to add more. </p> </div> <div class="alert alert-danger" role="alert" ng-show="confirmDelete"> <div class="row"> <div class="col-lg-1"><i class="fa fa-trash fa-3x cls-color-red-tkg"></i> </div> <div class="col-lg-7"> <h4>{{deleteMsg}}</h4> </div> <div class="col-lg-3"></div> </div> <div class="row"> <center> <button class="btn btn-success" ng-click="confirmDelete=!confirmDelete"> <i class="fa fa-mail-reply" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-danger" ng-click="confirmDeleteFunct();"> <i class="fa fa-trash" style="margin-right: 10px"></i> Confirm </button> </center> </div> </div> </div> </div>'),a.put("views/company/csv-import-processor.html",'<p> Match the columns to your data and then click Import Contacts to add them to your Contacts. </p> <div class="jumbotron"> <md-checkbox ng-model="includeFirstRow" aria-label="Include First Row"> Include First Row? </md-checkbox> <md-select class="csv-group-select" ng-model="importDestination"> <md-option ng-value="undefined">{{\'Import To Contacts List\'}}</md-option> <md-option ng-repeat="group in groups" ng-value="group"> Import to {{group.group_name}} Group </md-option> </md-select> <div class="csv-container"> <table class="csv-table table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-repeat="n in [] | range:colHeaders.length"> <select ng-model="colSelect[n]" ng-options="option.key as option.value for option in colOptions"> </select> </th> </tr> </thead> <tbody> <tr ng-repeat="row in csv"> <td ng-repeat="col in row"> {{col}} </td> </tr> </tbody> </table> </div> <div class="button-box right-text"> <button class="btn btn-default" ng-click="endImport()"> <i class="fa fa-times"></i> Cancel Import </button> <button class="btn btn-success" ng-click="importContacts()"> <i class="fa fa-upload"></i> Import Contacts </button> </div> </div>'),a.put("views/company/docontactgroup.html",'<div ng-controller="SettingsCtrl"> <div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> {{editGroupIndex !==null ? \'Edit\' : \'Create New\'}} Contact Group </span> <button type="button" ng-click="closeCreateGroup()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-sitemap"></i> </span> <input class="form-control" type="text" ng-model="vm.content.data.updateGroup.group_name" ng-init="vm.content.data.updateGroup.group_name=contactGroups[editGroupIndex].group_name" placeholder="Group Name"> </div> <strong> Group Image - OR - Group Color </strong> <div class="row"> <div class="col-sm-4"> <div class="settings-avatar"> <div ng-repeat="item in uploader.queue"> <div ng-show="uploader.isHTML5" class="center-text" ng-thumb="{ file: item._file, height: 80, width: 80 }"> </div> </div> <img src="{{pathImgProfile + vm.content.data.updateGroup.group_image}}" ng-if="vm.content.data.updateGroup.group_image && !uploader.queue.length" class="group_image_add" alt=""> <div ng-if="!vm.content.data.updateGroup.group_image && !uploader.queue.length" class="group_image_add_null" ng-style="{\'background-color\': vm.content.data.updateGroup.group_color && vm.content.data.updateGroup.group_color}" ng-show="!contact.profile_image"> <i class="fa fa-user" style="font-size: px; opacity: 0.4" aria-hidden="true"> </i> </div> <button ng-if="uploader.queue.length>0" type="button" class="btn btn-danger btn-xs" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <i class="fa fa-trash"></i> Remove </button> </div> <label ng-if="!uploader.queue.length" class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0"> <i class="fa fa-file"></i> Upload Image <input type="file" nv-file-select="" uploader="uploader" required style="display: none"> </label> </div> <div class="col-sm-2 text-center"> - OR - </div> <div class="col-sm-5" ng-init="vm.content.data.updateGroup.group_color=(editGroupIndex !==null ? (contactGroups[editGroupIndex].group_color !== null ? contactGroups[editGroupIndex].group_color : profilecoloroptions[0]) : profilecoloroptions[0])"> <div ng-if="!showNewGroup && contactGroups[editGroupIndex].group_color!==null" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': contactGroups[editGroupIndex].group_color && contactGroups[editGroupIndex].group_color}"> &nbsp; </div> <input type="radio" name="vm.content.data.updateGroup.group_color" ng-model="vm.content.data.updateGroup.group_color" value="{{contactGroups[editGroupIndex].group_color}}"> </div> <div ng-if="!showNewGroup && contactGroups[editGroupIndex].group_color!==null" ng-repeat="color in profilecoloroptions | limitTo: 9" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': color && color}"> &nbsp; </div> <input type="radio" name="vm.content.data.updateGroup.group_color" ng-model="vm.content.data.updateGroup.group_color" value="{{color}}"> </div> <div ng-if="showNewGroup || (!showNewGroup && contactGroups[editGroupIndex].group_color===null)" ng-repeat="color in profilecoloroptions | limitTo: 10" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': color && color}"> &nbsp; </div> <input type="radio" name="vm.content.data.updateGroup.group_color" ng-model="vm.content.data.updateGroup.group_color" value="{{color}}"> </div> </div> </div> <div class="user-tables-container"> <div ng-show="contactGroups.length > 0" class="new-contact-group-table"> <strong> Anyone in these groups: </strong> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="group in contactGroups"> <td class="col-sm-9"> <strong> {{group.group_name}} </strong> ({{group.members.length}} Members) </td> <td class="col-sm-3"> <md-checkbox ng-model="vm.content.data.updateGroup.group_list[group.group_uuid]" aria-label="Group" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </table> </div> <!-- <hr /> --> <div class="new-contact-group-table"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.contact_name_full" placeholder="Search by contact name"> </div> <table id="contact-groups-table" id="create-permissions-table" class="table table-bordered table-hover table-striped"> <tbody ng-style="{height: modalTableHeight + \'px\'}"> <tr ng-repeat="contact in userContacts | filter:search | filter: contact.contact_uuid != user.contact_uuid"> <td class="col-sm-9"> <strong> {{contact.contact_name_given}} {{contact.contact_name_family}} </strong> ({{contact.contact_type==\'user\' ? \'User\' : \'Contact\'}}) </td> <td class="col-sm-3"> <md-checkbox ng-model="vm.content.data.updateGroup.member_list[contact.contact_uuid]" ng-init="!!vm.content.data.updateGroup.member_list[contact.contact_uuid]" aria-label="Contact" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeCreateGroup()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-if="showNewGroup && !uploader.queue.length" ng-click="createNewGroup(vm.content.data.updateGroup, closeModal)"> <i class="fa fa-save" style="margin-right: 10px"></i> Create Group </button> <button class="btn btn-primary btn-md" ng-if="showNewGroup && uploader.queue.length>0" ng-click="createGroupWithImage(vm.content.data.updateGroup, closeModal)"> <i class="fa fa-save" style="margin-right: 10px"> </i> Create Group with Image </button> <button class="btn btn-primary btn-md" ng-if="!showNewGroup && uploader.queue.length>0" ng-click="updateGroupWithImage(vm.content.data.updateGroup, closeModal)"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Group with Image </button> <button class="btn btn-primary btn-md" ng-if="!showNewGroup && !uploader.queue.length" ng-click="updateContactGroup(vm.content.data.updateGroup, editGroupIndex, closeModal)"> <i class="fa fa-save" style="margin-right: 10px"> </i> Update Group </button> </div> </div>'),a.put("views/company/dopermissionsgroup.html",'<div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> {{vm.content.data.editPermissionIndex ? \'Edit\' : \'Create New\'}} Permissions Group </span> <button type="button" ng-click="vm.content.data.closeCreateGroup()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-sitemap"></i> </span> <input class="form-control" type="text" ng-model="updateGroup.group_name" ng-init="updateGroup.group_name=vm.content.data.permissionsGroups[vm.content.data.editPermissionIndex].group_name" placeholder="Group Name"> </div> </div> </div> <p>Group Color - OR - Group Image</p> <div class="row"> <div class="col-sm-2 text-center"> <div class="settings-avatar"> <div class="group_image_add_null" style="background-color: {{ updateGroup.group_color }}"><i class="fa fa-sitemap" style="font-size: px; opacity: 0.4" aria-hidden="true"></i></div> </div> </div> <div class="col-sm-5" ng-init="updateGroup.group_color=(vm.content.data.editPermissionIndex !==null ? vm.content.data.permissionsGroups[vm.content.data.editPermissionIndex].group_color : vm.content.data.profilecoloroptions[0])"> <div ng-if="!vm.content.data.showNewGroup" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': vm.content.data.permissionsGroups[vm.content.data.editPermissionIndex].group_color && vm.content.data.permissionsGroups[vm.content.data.editPermissionIndex].group_color}">&nbsp;</div> <input type="radio" name="updateGroup.group_color" ng-model="updateGroup.group_color" value="{{vm.content.data.permissionsGroups[vm.content.data.editPermissionIndex].group_color}}"> </div> <div ng-if="!vm.content.data.showNewGroup" ng-repeat="color in vm.content.data.profilecoloroptions | limitTo: 9" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': color && color}">&nbsp;</div> <input type="radio" name="updateGroup.group_color" ng-model="updateGroup.group_color" value="{{color}}"> </div> <div ng-if="vm.content.data.showNewGroup" ng-repeat="color in vm.content.data.profilecoloroptions | limitTo: 10" class="coloroptionbox2 text-center"> <div class="coloroptions" ng-style="{\'background-color\': color && color}">&nbsp;</div> <input type="radio" name="updateGroup.group_color" ng-model="updateGroup.group_color" value="{{color}}"> </div> </div> <div class="col-sm-1 text-center" style="padding-top: 20px"> - OR - </div> <div class="col-sm-4"> <div class="settings-avatar"> <div ng-repeat="item in vm.content.data.uploader.queue"> <div ng-show="vm.content.data.uploader.isHTML5" class="center-text" ng-thumb="{ file: item._file, height: 80, width: 80 }"></div> </div> <img src="{{pathImgProfile + user.profile_image}}" ng-if="contact.profile_image" class="group_image_add" alt=""> <div ng-if="!vm.content.data.uploader.queue.length" class="group_image_add_null" ng-style="{\'background-color\': updateGroup.group_color && updateGroup.group_color}" ng-show="!contact.profile_image"><i class="fa fa-user" style="font-size: px; opacity: 0.4" aria-hidden="true"></i></div> <button ng-if="vm.content.data.uploader.queue.length>0" type="button" class="btn btn-danger btn-xs" ng-click="vm.content.data.uploader.clearQueue()" ng-disabled="!vm.content.data.uploader.queue.length"> <i class="fa fa-trash"></i> Remove </button> </div> <label ng-if="!vm.content.data.uploader.queue.length" class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0"> <i class="fa fa-file"></i> Upload Image <input type="file" nv-file-select="" uploader="vm.content.data.uploader" required style="display: none"> </label> </div> </div> <div class="row"> <div class="col-sm-12"> <p>Communications Viewable by this Group</p> <div class="col-md-4" ng-repeat="perm in vm.content.data.permissionCommunications"> <md-checkbox ng-model="updateGroup.communication_options[perm.var_value]" ng-init="updateGroup.communication_options[perm.var_value]=vm.content.data.isPermCommunication(vm.content.data.editPermissionIndex, perm.var_value)" aria-label="Communications Viewable" class="md-warn md-align-top-left" flex> {{perm.var_name}} </md-checkbox> </div> </div> </div> <div class="row"> <div class="col-sm-12"> <table id="data-table-top" class="table table-bordered table-hover table-striped" style="width: 100%-13px"> <thead> <tr> <th style="width: 33%"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control normal" type="text" ng-model="vm.content.data.search.contact_name_full" placeholder="Filter by Name"> </div> <button class="btn btn-default btn-xs" ng-click="vm.content.data.clearFilter()"> Clear Filter </button> </th> <th style="width: 33%"><strong>Managers</strong><br> <span class="smfont normal">Select the users that can view the communications in this group</span></th> <th style="width: 33%"><strong>Group Members</strong><br> <span class="smfont normal">Select users whose communications can be viewed by the managers.</span></th> </tr> </thead> </table> <div class="scroll-container" ng-style="{height: vm.content.data.modalTableHeight + \'px\'}" style="min-height: 125px; max-height: 300px"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody> <tr ng-repeat="contact in userContacts | filter:vm.content.data.search |\n                                       filter: {contact_type : \'user\'}"> <td style="width: 33%"> {{contact.contact_name_given}} {{contact.contact_name_family}} </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.manager[contact.user_uuid]" ng-init="updateGroup.manager[contact.user_uuid]=vm.content.data.isPermGroupMember(vm.content.data.editPermissionIndex, contact.user_uuid, \'manager\')" aria-label="Manager" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.member[contact.user_uuid]" ng-init="updateGroup.member[contact.user_uuid]=vm.content.data.isPermGroupMember(vm.content.data.editPermissionIndex, contact.user_uuid, \'member\')" aria-label="Member" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> </div> <hr> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeCreateGroup()"> <i class="fa fa-remove" style="margin-right: 10px"> </i> Cancel</button> <button class="btn btn-primary btn-md" ng-if="!vm.content.data.showNewGroup && !vm.content.data.uploader.queue.length" ng-click="vm.content.data.updatePermissionsGroup(updateGroup, vm.content.data.editPermissionIndex)"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Group </button> <button class="btn btn-primary btn-md" ng-if="!vm.content.data.showNewGroup && vm.content.data.uploader.queue.length>0" ng-click="vm.content.data.uploader.uploadAll()"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Group with Image </button> <button class="btn btn-primary btn-md" ng-if="vm.content.data.showNewGroup && vm.content.data.uploader.queue.length>0" ng-click="vm.content.data.createNewPermissionsGroup(updateGroup)"> <i class="fa fa-save" style="margin-right: 10px"></i> Create Group with Image </button> <button class="btn btn-primary btn-md" ng-if="vm.content.data.showNewGroup && !vm.content.data.uploader.queue.length" ng-click="vm.content.data.createNewPermissionsGroup(updateGroup)"> <i class="fa fa-save" style="margin-right: 10px"></i> Create Group </button> </div>'),a.put("views/company/editcontact.html",'<div id="addcontact" ng-controller="SettingsCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-user fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Edit Contact</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>Contact Information</h4> <div class="row"> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_name_prefix" placeholder="Prefix" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_name_prefix}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_name_given" placeholder="First Name" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_name_given}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_name_family" placeholder="Last Name" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_name_family}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_name_suffix" placeholder="Suffix" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_name_suffix}}"> </div> </div> </div> <div class="row"> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_email_address" placeholder="Email Address" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_email_address}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_organization" placeholder="Organization" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_organization}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_nickname" placeholder="Nickname" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_nickname}}"> </div> </div> <div class="col-sm-3"> <div class="input-group"> <input type="text" class="form-control" ng-model="userContacts[vm.content.data].contact_title" placeholder="Job Title" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_title}}"> </div> </div> </div> <div class="row"> <div class="col-sm-3"> <div class="input-group"> <select class="selectpicker form-control" ng-model="userContacts[vm.content.data].contact_time_zone" ng-options="option.timezone as option.display for option in timeZones" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_time_zone}}"> <option value="" selected disabled>- Choose Time Zone -</option> </select> </div> </div> <div class="col-sm-3"> <div class="form-check"> <select class="selectpicker form-control" ng-model="userContacts[vm.content.data].contact_type" ng-options="option for option in contactTypes" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_type}}"> <option value="" selected disabled>- Choose Contact Type -</option> </select> </div> </div> <div class="col-sm-3"> <md-checkbox ng-model="userContacts[vm.content.data].contact_category" aria-label="Add to Favorites" ng-true-value="\'favorite\'" ng-false-value="\'\'" class="md-warn md-align-top-left" flex tooltip-placement="bottom" uib-tooltip="{{tips.contacts.contact_category}}"> Add to Favorites <br> {{ data.cb2 }} </md-checkbox> </div> </div> <div class="row"> <div class="col-sm-8"> <div class="input-group"> <textarea class="form-control" uib-tooltip="Save notes about this contact ..." tooltip-placement="top" rows="3" ng-model="userContacts[vm.content.data].contact_note" placeholder="Submit notes about this contact ..."></textarea> </div> </div> <div class="col-sm-4"> <button ng-click="updateContactInfo(userContacts[vm.content.data])" class="btn btn-success btn-sm">Update Info</button> </div> </div> <hr> <h4>Contact Phone Numbers</h4> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="phone in userContacts[vm.content.data].phones"> <td> <div class="input-group"> <select class="selectpicker form-control" ng-model="phone.phone_label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_label}}"> <option ng-repeat="phonetype in phoneNumberTypes" ng-selected="{{phone.phone_label == phonetype}}" value="{{phonetype}}">{{phonetype}}</option> </select> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="phone.phone_number" ng-value="{{phone.phone_number}}" phone-input placeholder="Phone Number" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_number}}"> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="phone.phone_extension" ng-value="{{phone.phone_extension}}" placeholder="Extension" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_extension}}"> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_primary}}"> <input class="form-check-input" type="checkbox" ng-model="phone.phone_primary" ng-true-value="\'1\'" ng-false-value="\'0\'"> Primary </label> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_voice}}"> <input class="form-check-input" type="checkbox" ng-model="phone.phone_type_voice" ng-true-value="\'1\'" ng-false-value="null"> Voice </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_video}}"> <input class="form-check-input" type="checkbox" ng-model="phone.phone_type_video" ng-true-value="\'1\'" ng-false-value="null"> Video </label><br> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_text}}"> <input class="form-check-input" type="checkbox" ng-model="phone.phone_type_text" ng-true-value="\'1\'" ng-false-value="null"> SMS </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_fax}}"> <input class="form-check-input" type="checkbox" ng-model="phone.phone_type_fax" ng-true-value="\'1\'" ng-false-value="null"> Fax </label> </div> </td> <td> <button ng-click="updateContactPhone(phone, userContacts[vm.content.data].contact_uuid)" class="btn btn-success btn-xs">Update</button> <button ng-click="showModalFull(\'/company/confirmdeletecontactphone.html\', phone, \'\')" class="btn btn-danger btn-xs">Delete</button> </td> </tr> <tr> <td> <div class="input-group"> <select class="selectpicker form-control" ng-model="newphone.phone_label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_label}}"> <option ng-repeat="phonetype in phoneNumberTypes" value="{{phonetype}}">{{phonetype}}</option> </select> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="newphone.phone_number" phone-input placeholder="Phone Number" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_number}}"> </div> </td> <td> <div class="input-group"> <input type="text" class="form-control" ng-model="newphone.phone_extension" placeholder="Extension" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_extension}}"> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_primary}}"> <input class="form-check-input" type="checkbox" ng-model="newphone.phone_primary" ng-true-value="\'1\'" ng-false-value="\'0\'"> Primary </label> </div> </td> <td> <div class="form-check"> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_voice}}"> <input class="form-check-input" type="checkbox" ng-model="newphone.phone_type_voice" ng-true-value="\'1\'" ng-false-value="null"> Voice </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_video}}"> <input class="form-check-input" type="checkbox" ng-model="newphone.phone_type_video" ng-true-value="\'1\'" ng-false-value="null"> Video </label><br> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_type_text}}"> <input class="form-check-input" type="checkbox" ng-model="newphone.phone_type_text" ng-true-value="\'1\'" ng-false-value="null"> SMS </label> <label class="form-check-label" tooltip-placement="bottom" uib-tooltip="{{tips.contacts.phone_fax}}"> <input class="form-check-input" type="checkbox" ng-model="newphone.phone_type_fax" ng-true-value="\'1\'" ng-false-value="null"> Fax </label> </div> </td> <td> <button ng-click="updateContactPhone(newphone, userContacts[vm.content.data].contact_uuid)" class="btn btn-primary btn-xs">Add Number</button> </td> </tr> </table> <hr> <h4>Contact Profile</h4> <div class="row"> <div class="col-sm-2 text-center"> Profile Color <div class="settings-avatar"> <div class="cls-settings-img-profile-null" style="background-color: {{ profile.contact_profile_color ? profile.contact_profile_color : \'\' }}"><i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"></i></div> </div> <button ng-click="updateContactColor(userContacts[vm.content.data].contact_uuid, profile.contct_profile.color)" class="btn btn-success btn-xs">Update Color</button> </div> <div class="col-sm-2" ng-init="profile.contact_profile_color=userContacts[vm.content.data].contact_profile_color"> <div ng-if="userContacts[vm.content.data].contact_profile_color" class="coloroptionbox text-center"> <div class="coloroptions" style="background-color: {{userContacts[vm.content.data].contact_profile_color}}">&nbsp;</div> <input type="radio" name="profile.contact_profile_color" ng-model="profile.contact_profile_color" value="{{userContacts[vm.content.data].contact_profile_color}}"> </div> <div ng-repeat="color in profilecoloroptions | limitTo:11" class="coloroptionbox text-center"> <div class="coloroptions" style="background-color: {{color}}">&nbsp;</div> <input type="radio" name="profile.contact_profile_color" ng-model="profile.contact_profile_color" value="{{color}}"> </div> </div> <div class="col-sm-1" style="padding-top: 60px"> - OR - </div> <div class="col-sm-2 text-center"> Profile Photo <div class="settings-avatar"> <img src="{{pathImgProfile + userContacts[vm.content.data].contact_profile_image}}" ng-if="userContacts[vm.content.data].contact_profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" ng-if="!userContacts[vm.content.data].contact_profile_image"><i class="fa fa-user" style="font-size: 75px; opacity: 0.6" aria-hidden="true"></i></div> </div> </div> <div class="col-sm-5"> <label class="btn btn-default btn-file btn-block" style="border-bottom-left-radius: 0; border-top-left-radius: 0"> <i class="fa fa-file"></i> Select a Profile Photo <input type="file" nv-file-select="" uploader="uploader" required style="display: none"> </label> <span class="smfont">NOTE: Max file size is 2MB and image must be a jpg, bmp or png file.</span> <!--<div ng-show="uploader.isHTML5">\n                        3. nv-file-over uploader="link" over-class="className" \n                    <div class="well my-drop-zone" nv-file-over="" uploader="uploader">\n                        Base drop zone\n                    </div>\n                </div>--> <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" --> <!--<input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>--> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td> {{ item.file.name.length > 25 ? item.file.name.substring(0, 12) + \' ... \' + item.file.name.substring(item.file.name.length-12) : item.file.name }} <!-- Image preview --> <!--auto height--> <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>--> <!--auto width--> <!--<div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 100 }"></div>--> <!--fixed width and height --> <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>--> </td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <!--<td nowrap>\n                                <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\n                                    <span class="glyphicon glyphicon-upload"></span> Upload\n                                </button>\n                                <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\n                                    <span class="glyphicon glyphicon-ban-circle"></span> Cancel\n                                </button>\n                                <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\n                                    <span class="glyphicon glyphicon-trash"></span> Remove\n                                </button>\n                            </td>--> </tr> <tr ng-if="uploader.queue.length>0"><td colspan="4"><button type="button" class="btn btn-danger btn-xs" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <i class="fa fa-trash"></i> Remove </button></td></tr> </tbody> </table> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> <input type="text" ng-model="updateAvatar.contact_uuid" ng-init="userContacts[vm.content.data].contact_uuid" style="display: none"> </div> <button ng-disabled="!uploader.queue.length>0" type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"><i class="fa fa-upload"></i> Update Avatar</button> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="showModalFull(\'/company/confirmdeletecontact.html\', userContacts[vm.content.data], \'\')"><i class="fa fa-remove" style="margin-right: 10px"></i>Delete Contact</button> <button class="btn btn-primary btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Done</button> </div> </div></div>'),
a.put("views/company/googlecontacts%20copy.html",'<div class="md-dialog-container" id="functionality"> <md-dialog aria-label="Dialog"> <md-dialog-content class="md-dialog-content"> <h2 class="md-title ng-binding">Where should the contacts be imported to?</h2> <div class="md-dialog-content-body"> <p>{{validMessage}}</p> <p ng-if="invalidMessage.length>0">{{invalidMessage}}</p> <md-select ng-model="contactTarget"> <md-option ng-value="undefined">{{\'Import To Contacts List\'}}</md-option> <md-option ng-value="group.group_uuid" ng-repeat="group in MyParam.groups"> Import to {{group.group_name}} Group</md-option> </md-select> </div> </md-dialog-content> <md-dialog-actions> <md-button class="md-raised md-default" ng-click="cancelDialog()" style="">Cancel Import</md-button> <md-button class="md-raised md-primary" type="button" ng-transclude="" ng-click="answer(contactTarget)">Complete Import</md-button> </md-dialog-actions> </md-dialog> </div>'),a.put("views/company/googlecontacts.html",'<choose-group-google-import></choose-group-google-import> <script type="text/ng-template" id="group-dialog-template.html"><div>\n        <div class="modal-header"\n             id="modal-screen-share">\n            <span class="cls-header-modal">\n                Where should the contacts be imported to?\n            </span>\n            <button type="button" ng-click="cancel()" class="close">\n                <i class="fa fa-times"></i>\n            </button>\n        </div>\n        <div class="modal-body" id="modal-body">\n            <p>{{validMessage}}</p>\n            <p style="font-style: italic;"\n               ng-if="!vm.content.data.userContactTotalMaxedOut()">\n                NOTE: The Pilot version of Bridge allows a maximum of 300 contacts per user.\n            </p>\n            <p style="font-style: italic; color: red;"\n               ng-if="vm.content.data.userContactTotalMaxedOut()">\n                NOTE: You have met the maximum number of 300 contacts per user. Please delete some contacts if you would like to add more.\n            </p>\n            <p ng-if="invalidMessage.length>0">{{invalidMessage}}</p>\n            <md-select ng-model="contactTarget">\n                <md-option ng-value="undefined">Import To Contacts List</md-option>\n                <md-option ng-value="group.group_uuid" ng-repeat="group in groups">\n                    Import to {{group.group_name}} Group</md-option>\n            </md-select>\n        </div>\n        <div class="modal-footer cls-incomingcall-buttons">\n            <md-button class="md-raised md-default" ng-click="cancel()" style="">\n                Cancel Import\n            </md-button>\n            <md-button class="md-raised md-primary" type="button" ng-click="submit(contactTarget)"\n                       ng-disabled="vm.content.data.userContactTotalMaxedOut()">\n                Complete Import\n            </md-button>\n        </div>\n    </div></script>'),a.put("views/company/groupmanager.html",'<md-toolbar id="contact-groups-toolbar"> <div class="md-toolbar-tools"> <h3 class="header"> Contact Groups </h3> <!-- <md-select class="group-state-select" --> <!-- ng-model="state"> --> <!-- <md-option ng-value="\'table\'"> --> <!-- Show Contacts Table --> <!-- </md-option> --> <!-- <md-option ng-value="\'spreadsheet\'"> --> <!-- Import From Spreadsheet --> <!-- </md-option> --> <!-- </md-select> --> <div class="groups-actions"> <!-- <md-button ng-click="state = \'table\'" --> <!-- ng-show="stateIsShowing(\'spreadsheet\')" --> <!-- class="md-raised"> --> <!-- Back --> <!-- </md-button> --> <md-button ng-click="showEditGroup(null)" class="md-primary md-raised"> Create Group </md-button> <md-button ng-click="obtainTargetGroup()" class="md-primary md-raised"> Import Google Contacts </md-button> <md-button ng-click="showSpreadsheetImport()" class="md-primary md-raised"> Import From Spreadsheet </md-button> </div> </div> </md-toolbar> <md-content class="contact-groups-content"> <table class="table table-bordered table-hover table-striped"> <thead> <tr> <th>Group Image</th> <th>Group Name</th> <th>Managers</th> <th>Members</th> <th>Who can see this group?</th> <th>Dissolve Group</th> <th>Hide Group</th> </tr> </thead> <tr ng-repeat="group in contactGroups"> <td> <div class="settings-avatar"> <div ng-if="group.group_image"> <img class="group_image_add" src="{{pathImgProfile + group.group_image}}"> </div> <div class="group_image_add_null" ng-if="!group.group_image" ng-style="{\'background-color\': group.group_color && group.group_color}"> <i class="fa fa-object-group" style="font-size: px; opacity: 0.4" aria-hidden="true"> </i> </div> </div> </td> <td> {{group.group_name}} <i ng-show="userIsManagerOfGroup(group)" class="fa fa-edit grouptableicon-right table-green" ng-click="showEditGroup($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.edit_group}}"> </i> </td> <td> <i class="fa fa-user-circle-o grouptableicon-left table-ltblue"> </i> <i ng-if="!group.showManagers" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="toggleShowGroupManagers(group)" tooltip-placement="bottom"> </i> <i ng-if="group.showManagers" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="toggleShowGroupManagers(group)" tooltip-placement="bottom"> </i> <i ng-if="group.showManagers && userIsManagerOfGroup(group)" class="fa fa-user-plus grouptableicon-right table-green" ng-click="openGroupManagerModal(group)" tooltip-placement="bottom"> </i> <div ng-if="group.showManagers"> <table class="table"> <tr ng-if="contact.contact_uuid !== user.contact_uuid" ng-repeat="contact in group.managers"> <td> {{getMemberName(contact.contact_uuid)}} </td> <td> <i ng-show="userIsManagerOfGroup(group)" ng-click="removeManager(contact, group)" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"> </i> </td> </tr> </table> </div> </td> <td> <i class="fa fa-user-circle-o grouptableicon-left table-ltblue"> </i> <i ng-if="!group.showGroupMembers" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="toggleShowGroupMembers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_members}}"> </i> <i ng-if="group.showGroupMembers" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="toggleShowGroupMembers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.hide_members}}"> </i> <i ng-if="group.showGroupMembers && userIsManagerOfGroup(group)" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showEditGroup($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_members}}"> </i> <div ng-if="group.showGroupMembers"> <table class="table"> <tr ng-if="contact.contact_uuid !== user.contact_uuid" ng-repeat="contact in group.members"> <td> {{getMemberName(contact.contact_uuid)}} </td> <td> <i ng-show="userIsManagerOfGroup(group)" ng-click="removeGroupContact(group.group_uuid, contact.contact_uuid)" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"> </i> </td> </tr> </table> </div> </td> <td> <i class="fa fa-lock grouptableicon-left table-ltblue"> </i> <i ng-if="!group.showViewAccessMembers" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="toggleShowViewAccessMembers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_viewers}}"> </i> <i ng-if="group.showViewAccessMembers" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="toggleShowViewAccessMembers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.hide_viewers}}"> </i> <i ng-if="group.showViewAccessMembers && userIsManagerOfGroup(group)" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showModalWithData(\'/company/setcontactgroupviewers.html\', group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_viewers}}"> </i> <div ng-if="group.showViewAccessMembers"> <table class="table"> <tr ng-repeat="item in group.viewer_groups"> <td> {{getGroupName(item.view_group_uuid)}} members </td> <td> <i ng-show="userIsManagerOfGroup(group)" ng-click="removeGroupFromViewGroup(group.group_uuid, item.view_group_uuid)" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"> </i> </td> </tr> </table> <table class="table"> <tr ng-repeat="contact in group.viewer_users"> <td> {{getMemberName(contact.view_contact_uuid)}} </td> <td> <i ng-show="userIsManagerOfGroup(group)" ng-click="removeUserFromViewGroup(group.group_uuid, contact.view_contact_uuid)" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"> </i> </td> </tr> </table> </div> </td> <td> <i ng-show="userIsManagerOfGroup(group)" class="fa fa-window-close-o grouptableicon-left table-red" ng-click="dissolveContactGroup(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.dissolve_group}}"> </i> </td> <td> <i class="fa fa-eye-slash grouptableicon-left table-red" ng-show="group.hidden" ng-click="hideGroup(group)"> </i> <i class="fa fa-eye grouptableicon-left" ng-show="!group.hidden" ng-click="hideGroup(group)"> </i> </td> </tr> </table> </md-content>'),a.put("views/company/music-on-hold-manage-table.html",'<div class="audio-table-container table-head-container"> <table class="table table-bordered table-hover table-striped cls-tab-comp-setup-users"> <thead> <tr> <th>File Name</th> <th>Preview</th> <th>Download</th> <th>Delete</th> </tr> </thead> <tbody> <tr> <td colspan="5" class="add-audio-cell" ng-click="triggerUpload()"> <span ng-if="!uploadingRecord"> <i class="fa fa-plus-circle fa-2x"></i> </span> <span ng-if="uploadingRecord"> <i class="fa fa-cog fa-spin fa-lg"></i> </span> </td> <simple-uploader upload-fn="createMusicOnHoldRecord" trigger="triggerUploader" accept="\'audio/*\'"> </simple-uploader> </tr> <tr ng-if="record.files" ng-repeat="file in record.files"> <td class="file-name-cell"> <div class="file-name-container"> <p ng-click="editFile(file, getNeighboringInputByEvent($event), record)" ng-show="currentFileEditing !== file"> {{file}} </p> <input type="text" ng-show="currentFileEditing === file" ng-value="removeFileExtensionFromFilename(file)" ng-blur="stopEditing()" on-enter="renameFile(currentEditInput[0].value, currentRecordEditing)" oninput="angular.element(this).scope().setFileToEdited()"> <i class="fa fa-check-square" ng-show="fileEdited && (currentFileEditing == file)" ng-click="renameFile(currentEditInput[0].value, currentRecordEditing)"> </i> </div> </td> <td class="preview"> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="file !== filePlaying" ng-click="playMusicFile(record, file)"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="file === filePlaying" ng-click="stopPlayingFile()"> </i> </td> <td class="download-file"> <i class="fa fa-download" ng-click="downloadMusicFile(record, file)"> </i> </td> <td class="delete-file"> <i class="fa fa-times" ng-if="!isDefaultMOHFile(file)" ng-click="deleteMusicFile(record.music_on_hold_uuid, file)"> </i> </td> </tr> </tbody> </table> </div>'),a.put("views/company/permissions.html",'<div ng-if="!isAdminGroupOrGreater()"> You do not have access to this page. </div> <button ng-if="isAdminGroupOrGreater()" class="btn btn-primary btn-sm" style="margin-bottom: 10px" ng-click="showEditPermissions(null)"> Add Permission Group </button> <div ng-if="isAdminGroupOrGreater()" class="permissions-table table-head-container"> <table class="table table-bordered table-hover table-striped"> <thead> <tr> <th class="group-image">Group Image</th> <th class="group-name">Group Name</th> <th class="members">Members</th> <th class="managers">Managers</th> <th class="dissolve-group">Dissolve Group</th> </tr> </thead> </table> </div> <div ng-if="isAdminGroupOrGreater()" class="permissions-table table-body-container"> <table class="table table-bordered table-hover table-striped"> <tr ng-if="permissionsGroups.length===0"> <td colspan="5"> No permission groups have been created yet. Use the button above to create the first group. </td> </tr> <tr ng-repeat="group in permissionsGroups"> <td class="group-image"> <div class="settings-avatar"> <div ng-if="group.group_image"> <img class="group_image_add" src="{{pathImgProfile + group.group_image}}"> </div> <div class="group_image_add_null" ng-if="!group.group_image" ng-style="{\'background-color\': group.group_color && group.group_color}"> <i class="fa fa-sitemap" style="font-size: px; opacity: 0.4" aria-hidden="true"> </i> </div> </div> </td> <td class="group-name"> <strong>{{group.group_name}}</strong> <i class="fa fa-edit grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.edit_group}}"></i> <br> {{showCommunications($index)}} </td> <td class="members"> <i class="fa fa-user-circle-o grouptableicon-left table-ltblue" style=""> </i> <i ng-if="!groupActive[group.permissions_group_uuid]" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="showAllMembers(group, \'permissions\')" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_members}}"> </i> <i ng-if="groupActive[group.permissions_group_uuid]" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="hideMembers(group, \'permissions\')" tooltip-placement="bottom" uib-tooltip="{{tips.groups.hide_members}}"> </i> <i ng-if="groupActive[group.permissions_group_uuid]" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_members}}"> </i> <div ng-if="groupActive[group.permissions_group_uuid]"> <table class="table"> <tr ng-repeat="contact in group.members"> <td>{{getUserName(contact.user_uuid)}}</td> <td><i ng-if="contact !== user.user_uuid" ng-click="postRemovePermissionGroupMember(group, $index, \'member\')" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"></i> </td> </tr> </table> </div> </td> <td class="managers"> <i class="fa fa-lock grouptableicon-left table-ltblue"></i> <i ng-if="!groupActive[group.permissions_group_uuid]" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="showAllMembers(group, \'permissions\')" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_managers}}"> </i> <i ng-if="groupActive[group.permissions_group_uuid]" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="hideMembers(group, \'permissions\')" tooltip-placement="bottom" uib-tooltip="{{tips.groups.hide_managers}}"> </i> <i ng-if="groupActive[group.permissions_group_uuid]" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_managers}}"></i> <div ng-if="groupActive[group.permissions_group_uuid]"> <table class="table"> <tr ng-repeat="manager in group.managers"> <td>{{getUserName(manager.user_uuid)}}</td> <td><i ng-if="manager !== user.user_uuid" ng-click="postRemovePermissionGroupMember(group, $index, \'manager\')" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_manager}}"></i> </td> </tr> </table> </div> </td> <td class="dissolve-group"> <i class="fa fa-window-close-o grouptableicon-left table-red" ng-click="openDissolveGroupModal(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.dissolve_group}}"> </i> </td> </tr> </table> </div>'),a.put("views/company/queues.html",'<div ng-controller="ContactDetailsCtrl"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th id="cls-tab-">Queues Name</th> <th id="cls-tab-">Queues Extension</th> <th id="cls-tab-">Ring Strategy</th> <th id="cls-tab-">Calls Always Recorded</th> <th id="cls-tab-actions"> <div class="btn-group" uib-dropdown> <button id="split-button" type="button" class="btn btn-success btn-xs"> Actions </button> <button type="button" class="btn btn-success btn-xs" uib-dropdown-toggle> <span class="caret"></span> <span class="sr-only"> Split button! </span> </button> <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button"> <li role="menuitem"> <a href="" ng-click="showFrmQueues=true"> <i class="fa fa-user-plus cls-color-blue-tkg"></i> Add User </a> </li> </ul> </div> </th> </tr> <tr ng-show="showFrmQueues"> <th> <input type="text" style="width: 150px"> </th> <th> <input type="text" style="width: 150px"> </th> <th> <input type="text" style="width: 150px"> </th> <th> <input type="text" style="width: 150px"> </th> <th id="cls-tab-actions"> <button class="btn btn-success btn-xs" ng-click="showFrmQueues=false"> Save </button> <button class="btn btn-danger btn-xs" ng-click="showFrmQueues=false"> Cancel </button> </th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="persons in filtered = (userContacts | filter:search | orderBy : predicate :reverse) | startFrom:(currentPage-1)*entryLimit | limitTo:entryLimit"> <td>{{persons.name}}</td> <td>{{}}</td> <td>{{}}</td> <td>{{}}</td> <td> <a href="" style="padding: 0 5px 0 5px" title="edit this record"> <i class="fa fa-edit cls-color-gris2-tkg"></i> </a> <a href="" style="padding: 0 5px 0 5px" title="delete this user"> <i class="fa fa-times cls-color-red-tkg"></i> </a> </td> </tr> </tbody> </table> </div>'),a.put("views/company/ringGroup.html",'<div ng-controller="ctrlRingGroup"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Ring Group</span> <button type="button" ng-click="cancelCreateGroup()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <!--Ring Group--> <div class="row"> <!--<div ng-include="" src="\'views/company/attendant/ring-group.html\'"></div>--> <!--Ring Group--> <div class="action-pad"> <div class="row col-md-12"> <div class="trashbox"> <!-- If you use [] as referenced list, the dropped elements will be lost --> <ul class="trash" dnd-list="[]"> <i class="fa fa-trash" aria-hidden="true"></i> <div class="attendant-drop col-md-12 no-select"> <div class="attend-row"> <div class="col-sm-12"> <div class="panel panel-info container-element"> <div class="panel-heading"> <h2 class="panel-title">Ring Group Name</h2> </div> <div class="panel-body"> <md-input-container style="width: 100%; margin-bottom: 0"> <label>Enter a Name</label> <input ng-model="ringGroupOption.name" required> </md-input-container> </div> </div> </div> </div> <div class="attend-row"> <!--Auto Attendant--> <div class="col-md-6"> <div class="panel panel-info container-element box box-blue"> <div class="panel-heading"> <h3 class="panel-title">Build Area</h3> </div> <div class="panel-body"> <p>Build your Ring Group here by first dragging a Ring Pattern and then adding contacts to this box.</p> <!--Container--> <ul class="holder" dnd-list="ringGroupOption.containers" dnd-allowed-types="[\'container\']" dnd-external-sources="true" dnd-drop="dropContainCallback(index, item, external, type);"> <li style="border: none" ng-repeat="container in ringGroupOption.containers" dnd-draggable="container" dnd-type="\'container\'" dnd-effect-allowed="copyMove" dnd-moved="removeContainer(event, $index, container)" dnd-callback="container.items.length"> <!--<li ng-repeat="container in myOptions[currentIndex].containers" dnd-draggable="container" dnd-type="\'container\'" dnd-effect-allowed="copyMove" dnd-callback="container.items.length">--> <div class="panel panel-info"> <div class="panel-heading"> <h3 class="panel-title">{{container.label | capitalize}}</h3> </div> <!--Elements--> <div class="panel-body"> <ul class="itemlist ring" dnd-list="container.items" dnd-allowed-types="[\'items\']" dnd-dragover="dragoverCallback(index, external, type)" dnd-drop="dropRingCallback(index, item, external, type)"> <li ng-repeat="attendant in container.items" dnd-type="\'items\'" dnd-draggable="attendant" dnd-effect-allowed="copyMove" dnd-moved="removeFromContainer(event, $index)" tooltip-placement="top" uib-tooltip="Drag to rearrange"> {{attendant.name}} <strong> {{attendant.ext}} </strong> </li> <li class="dndPlaceholder1"> </li> <li class="dndPlaceholder"> Drop any <strong>Contact</strong> here </li> </ul> </div> </div> </li> <li class="dndPlaceholder"> <!--Drop any <strong>{{list.allowedTypes.join(\' or \')}}</strong> here--> Drop <strong>Ring Pattern</strong> here </li> </ul> </div> </div> <div class="panel panel-info container-element"> <div class="panel-heading"> <h3 class="panel-title">What if no one answers?</h3> </div> <div class="panel-body"> <div class="col-md-12 default-top"> <div class="panel-heading"> <h3 class="panel-title"><b>Max hold time for caller</b></h3> </div> <md-input-container> <label>Set Timeout in Seconds</label> <input type="number" ng-model="ringGroupOption.timeout"> </md-input-container> </div> <div class="col-md-12 default-top" ng-if="ringGroupOption.containers && \n                                                    ringGroupOption.containers[0] && \n                                                    (ringGroupOption.containers[0].label === \'sequence\' || ringGroupOption.containers[0].label === \'random\')"> <div class="panel-heading"> <h3 class="panel-title"><b>Max ring time per agent</b></h3> </div> <md-input-container> <label>Set Ring Time in Seconds</label> <input type="number" ng-model="ringGroupOption.agent_call_timeout"> </md-input-container> </div> <div class="col-md-12 default-bottom"> <div class="panel-heading"> <h3 class="panel-title"><b>Redirect call to</b></h3> </div> <md-input-container ng-init="!ringGroupOption.noAnswer ? ringGroupOption.noAnswer = \'Hangup\' : ringGroupOption.noAnswer"> <label>Select option</label> <md-select ng-model="ringGroupOption.noAnswer"> <md-option ng-repeat="selection in options.noAnswer" ng-value="selection"> {{selection}} </md-option> </md-select> </md-input-container> </div> </div> </div> </div> <!--Options--> <div class="col-md-6"> <div class="col-sm-12"> <div class="panel panel-info container-element"> <div class="panel-heading"> <h2 class="panel-title">Ring Pattern Options</h2> </div> <div class="panel-body"> <p>Drag a pattern to the Build Area on the left to get started.</p> <!--<ul dnd-list="options">--> <ul dnd-list="containers" dnd-horizontal-list="true" dnd-disable-if="true" class="itemlist dnd-services"> <li class="dnd-box" ng-repeat="option in options.services.items" style="text-transform:capitalize" dnd-draggable="option" dnd-type="\'container\'" dnd-effect-allowed="copy" tooltip-placement="top" uib-tooltip="{{option.tip}}"> {{option.label}} </li> </ul> </div> </div> </div> <!--User List--> <div class="col-sm-12"> <div class="panel panel-info"> <div class="panel-heading"> <h2 class="panel-title">Contacts</h2> </div> <div class="action-contact"> <p style="padding: 10px">Drag contacts into the ring pattern box in Build Area on the left.</p> <ul dnd-list="options.users.items" dnd-disable-if="true" class="itemlist"> <li ng-repeat="user in options.users.items | orderBy:\'ext\':false" dnd-draggable="user" dnd-type="\'items\'" dnd-moved="removeFromUsers($index)"> <div> {{user.name}} {{user.ext}} </div> </li> </ul> </div> </div> </div> </div> </div> <div view-source="simple"></div> </div> </ul> </div> </div> </div> <!--End--> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="cancelCreateGroup()"><i class="fa fa-undo" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-success btn-md" ng-click="saveRinggroup()"><i class="fa fa-save" style="margin-right: 10px"></i>Save</button> </div> </div>'),a.put("views/company/setcontactgroupmanagers.html",'<div> <div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Who can manage this group? </span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.group.group_name}}</h4> <div ng-show="contactGroups.length > 1"> <strong> Anyone in these groups: </strong> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="group in contactGroups | filter: {group_uuid: \'!\'+vm.content.data.group.group_uuid} : true "> <td class="col-sm-9"> <strong> {{group.group_name}} </strong> ({{group.members.length}} Members) </td> <td class="col-sm-3"> <md-checkbox ng-model="vm.content.data.managerGroups[group.group_uuid]" aria-label="Group" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </table> </div> <hr> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.contact_name_full" placeholder="Search by contact name"> </div> <table id="contact-groups-table" class="table table-bordered table-hover table-striped"> <tbody> <tr ng-repeat="contact in userContacts | filter:search | filter: {contact_uuid: \'!\'+user.contact_uuid} : true | filter: {contact_type: \'user\'} : true"> <td class="col-sm-9"> <strong> {{contact.contact_name_given}} {{contact.contact_name_family}} </strong> ({{contact.contact_type==\'user\' ? \'User\' : \'Contact\'}}) </td> <td class="col-sm-3"> <md-checkbox ng-model="vm.content.data.managers[contact.contact_uuid]" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"> </i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="vm.content.data.updateGroupManagers(vm.content.data.group,\n                          vm.content.data.managers,\n                          vm.content.data.managerGroups,\n                          closeModal)"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Manager List </button> </div> </div>'),a.put("views/company/setcontactgroupviewers.html",'<div ng-controller="SettingsCtrl"> <div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> Who can see this group? </span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.group_name}}</h4> <div ng-if="contactGroups.length > 1"> <strong> Anyone in these groups: </strong> <table class="table table-bordered table-hover table-striped"> <tr ng-repeat="group in contactGroups | filter: {group_uuid: \'!\'+vm.content.data.group_uuid} : true "> <td class="col-sm-9"> <strong> {{group.group_name}} </strong> ({{group.members.length}} Members) </td> <td class="col-sm-3"> <md-checkbox ng-model="updateviewgroup.groups[group.group_uuid]" ng-init="updateviewgroup.groups[group.group_uuid]=isGroupViewGroup(vm.content.data.viewer_groups, group.group_uuid)" aria-label="Group" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </table> </div> <hr> <strong>As well as these contacts:</strong> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-question-circle"></i> </span> <input class="form-control" type="text" ng-model="search.contact_name_full" placeholder="Search by contact name"> </div> <table id="contact-groups-table" class="table table-bordered table-hover table-striped"> <tbody> <tr ng-repeat="contact in userContacts | filter:search | filter: {contact_uuid: \'!\'+user.contact_uuid} : true | filter: {contact_type: \'user\'} : true"> <td class="col-sm-9"> <strong> {{contact.contact_name_given}} {{contact.contact_name_family}} </strong> ({{contact.contact_type==\'user\' ? \'User\' : \'Contact\'}}) </td> <td class="col-sm-3"> <md-checkbox ng-model="updateviewgroup.members[contact.contact_uuid]" ng-init="updateviewgroup.members[contact.contact_uuid]=isGroupViewMember(vm.content.data.viewer_users, contact.contact_uuid)" aria-label="Contact" class="md-warn md-align-top-left" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="updateGroupViewers(vm.content.data.group_uuid, updateviewgroup.groups, updateviewgroup.members)"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Viewer List </button> </div> </div>'),a.put("views/company/users.html",'<company-setup-users-table id="company-setup-user-table-container" ng-show="!editingUser && !emulateProfileEditing" domain="domain" editing-user="editingUser"> </company-setup-users-table> <company-setup-user-edit user="editingUser" ng-show="editingUser"> </company-setup-user-edit> <md-button ng-click="back()" ng-if="emulateProfileEditing" class="user-edit-back-btn"> <md-icon> arrow_back </md-icon> </md-button> <user-profile-edit uploader="uploader" user="emulateProfileEditing" class="user" ng-if="emulateProfileEditing" trigger-upload="triggerUpload()" uploader-option="uploaderOption"> </user-profile-edit>'),a.put("views/company/xlsx-import-processor.html",'<p> Match the columns to your data and then click Import Contacts to add them to your Contacts. </p> <div class="jumbotron"> <md-select class="csv-group-select" ng-model="importDestination"> <md-option ng-value="undefined">{{\'Import To Contacts List\'}}</md-option> <md-option ng-repeat="group in groups" ng-value="group"> Import to {{group.group_name}} Group </md-option> </md-select> <div class="csv-container"> <table class="csv-table table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-repeat="n in [] | range:xlsx.columnDefs.length"> <select ng-model="colSelect[n]" ng-options="option.key as option.value for option in colOptions"> </select> </th> </tr> </thead> <tbody> <tr ng-repeat="row in xlsx.data"> <td ng-repeat="col in xlsx.columnDefs"> {{row[col.field]}} </td> </tr> <!--   <tr ng-repeat="row in xlsx">\n                    <td ng-repeat="col in row">\n                      {{col.field}}\n                    </td>\n                </tr>--> </tbody> </table> </div> <div class="button-box right-text"> <button class="btn btn-default" ng-click="endImport()"> <i class="fa fa-times"></i> Cancel Import </button> <button class="btn btn-success" ng-click="importContacts()"> <i class="fa fa-upload"></i> Import Contacts </button> </div> </div>'),a.put("views/company_setup_wizard.html",'<!DOCTYPE html> <html ng-app="UserApp"> <!--<html  ng-app="app">--> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Add User</title> <!-- Fonts --> <!-- Styles --> <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script> <script src="../scripts/custom.js"></script> <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.2.4.js"></script> <link href="../styles/style.css" rel="stylesheet" type="text/css"> <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link href="../styles/app.css" rel="stylesheet" type="text/css"> <script>document.write(\'<base href="\' + document.location + \'" />\');</script> </head> <body>  <div class="container companysetup" ng-controller="CompanySetupCtrl"> <center><label class="bluecolor">Company Setup</label> <div> <nav class="navbar"> <div class="container-fluid"> <ul class="nav navbar-nav"> <li><a href="#" ng-click="showNext(\'AddUserTab\')">Add /Edit User</a></li> <li class="wizard-nav"><a href="#" ng-click="showNext(\'AttentionSetupTab\')">Auto Attention Setup</a></li> <li class="wizard-nav"><a href="#" ng-click="showNext(\'CallQueueTab\')">Call Queues</a></li> <li class="wizard-nav"><a href="#" ng-click="showNext(\'UploadTab\')">Upload / Record Audio</a></li> </ul> </div> </nav> </div> </center> <div ng-show="AddUserTab"> <div class="container"> <label class="bluecolor">Add New User </label> <p> <!--                         //   <button   class="btn btn-default btn-sm">--> <span ng-click="foo()" ng-confirm-click="All you Sure to Delete All!!!" class="glyphicon glyphicon-trash"></span> Delete All <!--                            </button>--> </p> <div ng-controller="usersCtrl"> <table id="users" class="table table-striped table-bordered" cellspacing="0" width="50%"> <thead> <tr> <th><input type="checkbox" ng-model="model.user.allItemsSelected" ng-change="selectAll()"></th> <th> <a href="#" ng-click="sortType = \'extension\'; sortReverse = !sortReverse">Extension #<span ng-show="sortType == \'extension\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'extension\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th> <a href="#" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Name<span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-up"></span></a></th> <th><a href="#" ng-click="sortType = \'username\'; sortReverse = !sortReverse">Username <span ng-show="sortType == \'username\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'username\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th><a href="#" ng-click="sortType = \'password\'; sortReverse = !sortReverse">Password <span ng-show="sortType == \'password\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'password\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th><a href="#" ng-click="sortType = \'recordopt\'; sortReverse = !sortReverse">Record user\'s calls? <span ng-show="sortType == \'recordopt\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'recordopt\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="roll in model.user| orderBy:sortType:sortReverse | startFrom:currentPage * pageSize | limitTo:pageSize" ng-include="getTemplate(roll)"> </tr> </tbody> </table> <script type="text/ng-template" id="display"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()" ></td>\n                            <td  ng-click="editContact(roll)">{{ roll.extension}}</td>\n                            <td  ng-click="editContact(roll)">{{ roll.name}}</td>\n                            <td ng-click="editContact(roll)">{{ roll.username}}</td>\n                            <td ng-click="editContact(roll)">{{ roll.password}}</td>\n                            <td ng-click="editContact(roll)">{{ roll.recordopt}}</td> \n                            \n                            <td>  <a href="#">\n                            <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <script type="text/ng-template" id="edit"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()" ></td>\n\n                            <td><input type="text" ng-model="model.selected.extension" /></td>\n                            <td><input type="text" ng-model="model.selected.name" /></td>\n                            <td><input type="text" ng-model="model.selected.username" /></td>\n                            <td><input type="text" ng-model="model.selected.password" /></td>\n                            <td><input type="text" ng-model="model.selected.recordopt" /></td> \n                            <td>  <a href="#">\n                            <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <!--                                 </tr> \n                                                     </tbody>\n                                                 </table>--> <div class="col-xs-2"> <label class="bluecolor" for="search">Items per page:</label> <select name="psize" id="psize" ng-model="pageSize"> <option value="10" ng-selected="true">10</option><option value="25">25</option><option value="50">50</option><option value="100000000">All</option></select> </div> <center> <button class="btn btn-sm" ng-disabled="currentPage == 0" ng-click="currentPage = currentPage - 1"> Previous </button> {{currentPage + 1}}/{{numberOfPages()}} <button class="btn btn-sm" ng-disabled="currentPage >= model.user.length / pageSize - 1" ng-click="currentPage = currentPage + 1"> Next </button> </center> </div> </div> <div class="container"> <form style="border: 1px solid #a1a1a1; margin-top: 15px" action="importExcel" class="form-horizontal" method="post" enctype="multipart/form-data"> <input type="file" class="inputfile" name="import_file">  <button class="btn">Import Extension</button> </form> </div> </div> <div ng-show="AttentionSetupTab"> <div class="container"> <label class="bluecolor">Add Auto Attendant</label> <p> <span ng-click="foo()" ng-confirm-click="All you Sure to Delete All!!!" class="glyphicon glyphicon-trash"></span> Delete All <!--                            </button>--> </p> <div ng-controller="attentionCtrl"> <table id="attention" class="table table-striped table-bordered" cellspacing="0" width="50%"> <thead> <tr> <th><input type="checkbox" ng-model="model.attention.allItemsSelected" ng-change="selectAll()"></th> <th> <a href="#" ng-click="sortType = \'name\'; sortReverse = !sortReverse">Auto Attendant Name<span ng-show="sortType == \'name\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'name\' && sortReverse" class="fa fa-caret-up"></span></a></th> <th><a href="#" ng-click="sortType = \'message\'; sortReverse = !sortReverse">Welcome Message File <span ng-show="sortType == \'message\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'message\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="roll in model.attention| orderBy:sortType:sortReverse | startFrom:currentPage * pageSize | limitTo:pageSize" ng-include="getAttentionTemplate(roll)"> </tr> </tbody> </table> <script type="text/ng-template" id="displayAttention"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()"></td>\n                            <td ng-click="editContact(roll)">{{ roll.name}}</td>\n                            <td ng-click="editContact(roll)">{{ roll.message}}</td> \n                            <td> <a href="#">\n                            <span class="glyphicon glyphicon-remove"></span>\n                            </a></td>\n                            <td>  <a href="#">\n                            <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <script type="text/ng-template" id="editAttention"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()" ></td>\n\n                            <td><input type="text" ng-model="model.selected.name" /></td>\n                            <td><input type="text" ng-model="model.selected.message" /></td> \n                            <td  ng-click="reset()"> <a href="#">\n                            <span class="glyphicon glyphicon-remove"></span>\n                            </a></td>\n                            <td><a href="#"> <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <div class="col-xs-2"> <label class="bluecolor" for="search">Items per page:</label> <select name="psize" id="psize" ng-model="pageSize"> <option value="10" ng-selected="true">10</option><option value="25">25</option><option value="50">50</option><option value="100000000">All</option></select> </div> <center> <button class="btn btn-sm" ng-disabled="currentPage == 0" ng-click="currentPage = currentPage - 1"> Previous </button> {{currentPage + 1}}/{{numberOfPages()}} <button class="btn btn-sm" ng-disabled="currentPage >= model.attention.length / pageSize - 1" ng-click="currentPage = currentPage + 1"> Next </button> </center> </div> </div> </div> <div ng-show="CallQueueTab"> <div class="container"> <label class="bluecolor">Call Queue</label> <p> <span ng-click="foo()" ng-confirm-click="All you Sure to Delete All!!!" class="glyphicon glyphicon-trash"></span> Delete All <!--                            </button>--> </p> <div ng-controller="queueCtrl"> <table id="queue" class="table table-striped table-bordered" cellspacing="0" width="50%"> <thead> <tr> <th><input type="checkbox" ng-model="model.queue.allItemsSelected" ng-change="selectAll()"></th> <th> <a href="#" ng-click="sortType = \'queue_name\'; sortReverse = !sortReverse">Queue Name<span ng-show="sortType == \'queue_name\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'queue_name\' && sortReverse" class="fa fa-caret-up"></span></a></th> <th><a href="#" ng-click="sortType = \'queue_extension\'; sortReverse = !sortReverse">Queue Extension<span ng-show="sortType == \'queue_extension\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'queue_extension\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th><a href="#" ng-click="sortType = \'ring_strategy\'; sortReverse = !sortReverse">Ring strategy<span ng-show="sortType == \'ring_strategy\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'ring_strategy\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th><a href="#" ng-click="sortType = \'call_recorded\'; sortReverse = !sortReverse">Calls Always Recorded<span ng-show="sortType == \'call_recorded\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'call_recorded\' && sortReverse" class="fa fa-caret-up"></span> </a></th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="roll in model.queue| orderBy:sortType:sortReverse | startFrom:currentPage * pageSize | limitTo:pageSize" ng-include="getQueueTemplate(roll)"> </tr> </tbody> </table> <script type="text/ng-template" id="displayQueue"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()"></td>\n                            <td ng-click="editContact(roll)">{{ roll.queue_name}}</td>\n                            <td ng-click="editContact(roll)">{{ roll.queue_extension}}</td> \n                            <td ng-click="editContact(roll)">{{ roll.ring_strategy}}</td> \n                            <td ng-click="editContact(roll)">{{ roll.call_recorded}}</td> \n                            <td> <a href="#">\n                            <span class="glyphicon glyphicon-remove"></span>\n                            </a></td>\n                            <td>  <a href="#">\n                            <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <script type="text/ng-template" id="editQueue"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()" ></td>\n\n                            <td><input type="text" ng-model="model.selected.queue_name" /></td>\n                            <td><input type="text" ng-model="model.selected.queue_extension" /></td> \n                            <td><input type="text" ng-model="model.selected.ring_strategy" /></td>\n                            <td><input type="text" ng-model="model.selected.call_recorded" /></td   \n                            <td  ng-click="reset()"> <a href="#"><span class="glyphicon glyphicon-remove"></span></a></td>\n                            <td><a href="#"> <span class="glyphicon glyphicon-edit"></span>\n                            </a></td></script> <div class="col-xs-2"> <label class="bluecolor" for="search">Items per page:</label> <select name="psize" id="psize" ng-model="pageSize"> <option value="10" ng-selected="true">10</option><option value="25">25</option><option value="50">50</option><option value="100000000">All</option></select> </div> <center> <button class="btn btn-sm" ng-disabled="currentPage == 0" ng-click="currentPage = currentPage - 1"> Previous </button> {{currentPage + 1}}/{{numberOfPages()}} <button class="btn btn-sm" ng-disabled="currentPage >= model.queue.length / pageSize - 1" ng-click="currentPage = currentPage + 1"> Next </button> </center> </div> </div> </div> <div ng-show="AudioUploadTab"> <div class="container"> <label class="bluecolor">Audio Upload</label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a>Create new audio file using Text to Speech </a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a>Upload new audio file</a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a>Record new message</a>  <p> <span ng-click="foo()" ng-confirm-click="All you Sure to Delete All!!!" class="glyphicon glyphicon-trash"></span> Delete All <!--                            </button>--> </p> <div ng-controller="audioUploadCtrl"> <table id="audioupload" class="table table-striped table-bordered" cellspacing="0" width="50%"> <thead> <tr> <th><input type="checkbox" ng-model="model.audioupload.allItemsSelected" ng-change="selectAll()"></th> <th> <a href="#" ng-click="sortType = \'file_name\'; sortReverse = !sortReverse">File Name<span ng-show="sortType == \'file_name\' && !sortReverse" class="fa fa-caret-down"></span> <span ng-show="sortType == \'file_name\' && sortReverse" class="fa fa-caret-up"></span></a></th> <th></th> <th></th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="roll in model.audioupload| orderBy:sortType:sortReverse | startFrom:currentPage * pageSize | limitTo:pageSize" ng-include="getAudioTemplate(roll)"> </tr> </tbody> </table> <script type="text/ng-template" id="displayAudio"><td  class="col-md-1"><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()"></td>\n                            <td ng-click="editContact(roll)">{{ roll.file_name}}</td> \n                            <td  class="col-md-1"> <a href="#">\n                            <span class="glyphicon  glyphicon-volume-up"></span>\n                            </a></td>\n                            <td  class="col-md-1">  <a href="#">\n                            <span class="glyphicon glyphicon-download-alt"></span>\n                            </a></td>\n                            <td   class="col-md-1"> <a href="#">\n                            <span class="glyphicon glyphicon-remove"></span>\n                            </a></td></script> <script type="text/ng-template" id="editAudio"><td><input type="checkbox" ng-model="roll.isChecked" ng-change="selectEntity()" ></td>\n\n                            <td><input type="text" ng-model="model.selected.file_name" /></td> \n                            <td  class="col-md-1"> <a href="#">\n                            <span class="glyphicon  glyphicon-volume-up"></span>\n                            </a></td>\n                            <td  class="col-md-1">  <a href="#">\n                            <span class="glyphicon glyphicon-download-alt"></span>\n                            </a></td>\n                            <td  ng-click="reset()"> <a href="#"><span class="glyphicon glyphicon-remove"></span></a></td></script> <div class="col-xs-2"> <label class="bluecolor" for="search">Items per page:</label> <select name="psize" id="psize" ng-model="pageSize"> <option value="10" ng-selected="true">10</option><option value="25">25</option><option value="50">50</option><option value="100000000">All</option></select> </div> <center> <button class="btn btn-sm" ng-disabled="currentPage == 0" ng-click="currentPage = currentPage - 1"> Previous </button> {{currentPage + 1}}/{{numberOfPages()}} <button class="btn btn-sm" ng-disabled="currentPage >= model.audioupload.length / pageSize - 1" ng-click="currentPage = currentPage + 1"> Next </button> </center> </div> </div> </div> </div> </body> </html>'),
a.put("views/contact-list.html",'<div uib-accordion class="contact-list" ng-if="contactType !== \'group\'"> <p ng-click="showPreviousContacts()" ng-if="(beginIndex - limit) >= 0" class="more-contacts-btn"> <a href>See More Contacts</a> </p> <div ng-if="contact.contact_uuid !== user.contact_uuid" uib-accordion-group close-others="true" ng-click="contactHeadingClicked($index, filteredContacts.length)" ng-repeat="contact in filteredContacts() track by $index"> <div uib-accordion-heading style="text-decoration: none; border: none"> <div style="display: block; padding: 10px 15px" class="contact-item clearfix"> <img ng-if="contact.contact_profile_image" ng-src="{{pathImgProfile + contact.contact_profile_image}}" class="cls-img-lst-contact" alt=""> <label class="cls-img-lst-contact-null" ng-show="!contact.contact_profile_image" style="{{ setProfileColor(contact.contact_profile_color) }}"> {{contact.contact_name_given.substring(0,1).toUpperCase()}} {{contact.contact_name_family.substring(0,1).toUpperCase()}} </label> <label class="name-lst-contact"> {{contact.contact_name_given}} {{contact.contact_name_family}} </label> <i class="{{ showicon(contact.status, \'\') }}" style="font-size: 24px; float: right; margin-top: 6px" tooltip-placement="bottom" uib-tooltip="{{contact.status}}"> </i> </div> </div> <div class="cls-contact-btn-options"> <ul> <span ng-if="contact.contact_type==\'user\'"> <li tooltip-placement="top" uib-tooltip="Chat" ng-click="startDirectMessageFromContact(contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-comments fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="contact.contact_type!=\'user\'"> <li tooltip-placement="top" uib-tooltip="Chat"> <h4> <span style="color: grey"> <i class="fa fa-comments fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="contact.smsnumber"> <li tooltip-placement="top" uib-tooltip="Text" ng-click="showModalWithData(\'/sms/sendsmstop.html\',contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-paper-plane fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="!contact.contact_mobile_number"> <li tooltip-placement="top" uib-tooltip="No Mobile Number Available"> <h4> <span style="color: grey"> <i class="fa fa-paper-plane fa-lg"> </i> </span> </h4> </li> </span> <span class="btn-group"> <li ng-init="getPhonesContact(contact.contact_uuid) "> <button class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border: none !important; background: transparent !important"> <span style="color: #8adbf6; font-size: 20px"> <i class="fa fa-phone"></i> </span> </button> <ul class="dropdown-menu"> <li ng-if="contact.user_ext"> <a href="" ng-click="makeCall(contact.user_ext)"> <strong> Extension: ( {{contact.user_ext}} ) </strong> </a> </li> <li ng-repeat="phone in contact.phones"> <a href="" ng-click="makeCall(phone.phone_number)"> {{phone.phone_label}} {{phone.phone_number | tel}} </a> </li> </ul> </li> </span> <li ng-if="contact.contact_email_address && contact.contact_email_address!=\'\'" tooltip-placement="top" uib-tooltip="{{::contact.contact_email_address}}"> <a ng-click="startEmailClient(contact.contact_email_address)"> <h4> <span style="color: #64d76c"> <i class="fa fa-envelope-o fa-lg"></i> </span> </h4> </a> </li> <li ng-if="!contact.contact_email_address || contact.contact_email_address==\'\'" tooltip-placement="top" uib-tooltip="no email available... "> <h4> <span style="color: grey"> <i class="fa fa-envelope-o fa-lg"> </i> </span> </h4> </li> <span ng-if="contact.contact_type==\'user\'"> <li tooltip-placement="top" uib-tooltip="Videoconference" ng-click="sendVideoInvite(contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-video-camera fa-lg"> </i> </span> </h4> </li> </span> <li tooltip-placement="top-right" uib-tooltip="Edit/View contact" style="float: right"> <h4> <span style="color: orangered"> <i ng-if="contact.contact_type!=\'user\'" class="fa fa-pencil-square-o fa-lg" ng-click="showEditContactForm(contact)"></i> </span> </h4> </li> <li tooltip-placement="top" uib-tooltip="{{contact.favorite==true ? \'Remove From Favorites\' : \'Add to Favorites\'}}" style="float: right"> <h4> <span style="color: orangered"> <i class="fa {{contact.favorite==true ? \'fa-star\' : \'fa-star-o\'}} fa-lg" ng-click="toggleContactasFavorite(contact.contact_uuid)"> </i> </span> </h4> </li> </ul> </div> </div> <p ng-click="addMoreContacts()" ng-if="lastLength > 0" class="more-contacts-btn"> <a href>See More Contacts</a> </p> </div> <div ng-if="contactGroups.length > 0 && contactType === \'group\'" class="accordion" uib-accordion> <div uib-accordion-group close-others="true" ng-repeat="group in contactGroups\n                                           | orderBy: \'group_name\'\n                                           | groupIsHidden"> <div uib-accordion-heading style="text-decoration: none; border: none"> <div style="display: block; padding: 10px 15px" class="contact-item clearfix"> <img ng-src="{{pathImgProfile + group.group_image}}" ng-if="group.group_image" class="group-image-side" alt=""> <label class="group-image-side-null" style="background-color: {{group.group_color}}" ng-show="!group.group_image"> <i ng-if="!group.group_image" class="fa fa-object-group fx-5x"> </i> </label> <label class="name-lst-contact"> {{group.group_name}} </label> </div> </div> <div class="cls-contact-btn-options"> <div uib-accordion class="contact-list"> <p ng-click="showPreviousContacts()" ng-if="(beginIndex - limit) >= 0" class="more-contacts-btn"> <a href>See More Contacts</a> </p> <div uib-accordion-group close-others="true" ng-repeat="contact in filteredGroupContacts(group.contacts())"> <div uib-accordion-heading style="text-decoration: none; border: none"> <div style="display: block; padding: 10px 15px" class="contact-item clearfix"> <img ng-if="contact.contact_profile_image" ng-src="{{pathImgProfile + contact.contact_profile_image}}" class="cls-img-lst-contact" alt=""> <label class="cls-img-lst-contact-null" ng-show="!contact.contact_profile_image" style="{{ setProfileColor(contact.contact_profile_color) }}"> {{contact.contact_name_given.substring(0,1).toUpperCase()}} {{contact.contact_name_family.substring(0,1).toUpperCase()}} </label> <label class="name-lst-contact"> {{contact.contact_name_given}} {{contact.contact_name_family}} </label> <i class="{{ showicon(contact.status, \'\') }}" style="font-size: 24px; float: right; margin-top: 6px" tooltip-placement="bottom" uib-tooltip="{{contact.status}}"> </i> </div> </div> <div class="cls-contact-btn-options"> <ul> <span ng-if="contact.contact_type==\'user\'"> <li tooltip-placement="top" uib-tooltip="Chat" ng-click="startDirectMessageFromContact(contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-comments fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="contact.contact_type!=\'user\'"> <li> <h4> <span style="color: grey"> <i class="fa fa-comments fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="contact.smsnumber"> <li tooltip-placement="top" uib-tooltip="Text" ng-click="showModalWithData(\'/sms/sendsmstop.html\',contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-paper-plane fa-lg"> </i> </span> </h4> </li> </span> <span ng-if="!contact.smsnumber"> <li tooltip-placement="top" uib-tooltip="No Mobile Number Available"> <h4> <span style="color: grey"> <i class="fa fa-paper-plane fa-lg"> </i> </span> </h4> </li> </span> <span class="btn-group"> <li ng-init="getPhonesContact(contact.contact_uuid) "> <button class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border: none !important; background: transparent !important"> <span style="color: #8adbf6; font-size: 20px"> <i class="fa fa-phone"></i> </span> </button> <ul class="dropdown-menu"> <li ng-if="contact.user_ext"> <a href="" ng-click="makeCall(contact.user_ext)"> <strong> Extension: ( {{contact.user_ext}} ) </strong> </a> </li> <li ng-repeat="phone in contact.phones"> <a href="" ng-click="makeCall(phone.phone_number)"> {{phone.phone_label}} {{phone.phone_number | tel}} </a> </li> </ul> </li> </span> <li ng-if="contact.contact_email_address && contact.contact_email_address!=\'\'" tooltip-placement="top" uib-tooltip="{{::contact.contact_email_address}}"> <a ng-click="startEmailClient(contact.contact_email_address)"> <h4> <span style="color: #64d76c"> <i class="fa fa-envelope-o fa-lg"> </i> </span> </h4> </a> </li> <li ng-if="!contact.contact_email_address || contact.contact_email_address==\'\'" tooltip-placement="top" uib-tooltip="no email available... "> <h4> <span style="color: grey"> <i class="fa fa-envelope-o fa-lg"> </i> </span> </h4> </li> <span ng-if="contact.contact_type==\'user\'"> <li tooltip-placement="top" uib-tooltip="Video conference" ng-click="sendVideoInvite(contact)"> <h4> <span style="color: #f8a632"> <i class="fa fa-video-camera fa-lg"> </i> </span> </h4> </li> </span> <li tooltip-placement="top-right" uib-tooltip="Edit/View contact" style="float: right"> <h4> <span style="color: orangered"> <i ng-if="contact.contact_type!=\'user\'" class="fa fa-pencil-square-o fa-lg" ng-click="showEditContactForm(contact)"> </i> </span> </h4> </li> <li tooltip-placement="top" uib-tooltip="{{contact.favorite== true ? \'Remove From Favorites\' : \'Add to Favorites\'}}" style="float: right"> <h4> <span style="color: orangered"> <i class="fa {{contact.favorite== true ? \'fa-star\' : \'fa-star-o\'}} fa-lg" ng-click="toggleContactasFavorite(contact.contact_uuid)"> </i> </span> </h4> </li> </ul> </div> </div> <p ng-click="addMoreContacts()" ng-if="lastLength > 0" class="more-contacts-btn"> <a href>See More Contacts</a> </p> </div> </div> </div> </div>'),a.put("views/contact-selector.html",'<div class="contact-search-container"> <div class="input-group"> <input type="text" style="min-height: 40px" contact-select ng-model="contact.recipients" class="form-control" placeholder="{{inputPlaceholder}}"> <span class="input-group-addon" ng-click="showModal(\'/modals/selectContacts.html\')" ng-if="!contact.recipients || contact.recipients.length===0"> <label style="width: 100%; height: 100%; cursor: pointer; padding: 0 10px"> <i class="fa fa-user" style="font-size: 20px"></i> </label> </span> <span class="input-group-addon" ng-if="contact.recipients.length>0"> <label ng-click="addContact()" style="width: 100%; height: 100%; cursor: pointer; padding: 0 10px"> <i class="fa fa-plus" style="font-size: 20px"> </i> </label> </span> </div> <div class="contact-options" ng-show="showContactSelection || contact.recipients.length>0"> <div class="list-group"> <a ng-repeat="contact in filterContactData = (userContacts | orderBy : contact_name_full | filter :searchRecipients)" href="" ng-if="contact.contact_name_given !==\'\' && contact.contact_name_family !==\'\'" ng-click="addContact(contact)" class="list-group-item" ng-class="{selectedperson: filterContactData[selectedIndex].contact_uuid === contact.contact_uuid}"> <div class="thread-list-item"> <div class="thread-list-circle"> <span ng-bind-html="showContactPhoto(contact, \'small\')"></span> </div> <div class="thread-list-body"> <span style="padding-top: 16px"> {{contact.contact_name_full}} <br> </span> <span class="recent-message"> <span ng-if="contact.contact_email_address"> Email: {{contact.contact_email_address}} </span> <span ng-if="phone.phone_number" ng-repeat="phone in contact.phones"> {{phone.phone_label}}: {{phone.phone_number | tel2}} </span> </span> </div> </div> </a> </div> </div> <div class="clearfix"> <span class="selected-contact" ng-repeat="contact in contactsSelected"> <span ng-if="contact.contact_name_full"> {{contact.contact_name_full}} </span> <!-- <span ng-if="!contact.contact_name_full && type===\'sms\'"> --> <span ng-if="type===\'sms\'"> <span ng-if="contact.contact_name_full">: </span>{{contact.contact_mobile_number | tel2}} </span> <!-- <span ng-if="!contact.contact_name_full && (type===\'file\' || type===\'cloudlink\')"> --> <span ng-if="(type===\'file\' || type===\'cloudlink\')"> <span ng-if="contact.contact_name_full">: </span>{{contact.contact_email_address}} </span> <i class="fa fa-times" ng-click="removeSelectedContact(contact)"> </i> </span> </div> </div>'),a.put("views/contactdetails.html",'<div class="cls-profile-contact-sel" ng-repeat="contSel in contactSelected"> <div class="cls-name-contact-sel"> <strong style="color: grey">{{contSel.name}}</strong> <i ng-class="funcPutIcon(contSel.status)" style="font-size: 25px; margin-top: 5px"></i> <button tooltip-placement="right" uib-tooltip="add favorite" ng-show="contSel.favorite===0" class="btn btn-link btn-lg" style="border: none !important"><i class="fa fa-star-o fa-lg"></i></button> <button tooltip-placement="right" uib-tooltip="remove favorite" ng-show="contSel.favorite===1" class="btn btn-link btn-lg" style="color: orangered; border: none !important"><i class="fa fa-star fa-lg"></i></button> </div> <div class="cls-contact-btn-options"> <div> <a href="chatcontact/{{contSel.cntID}}" type="button" class="btn btn-warning btn-sm" tooltip-placement="bottom" uib-tooltip="chat plus"><i class="fa fa-comments"></i></a> <a href="sms/{{contSel.cntID}}" type="button" class="btn btn-warning btn-sm" tooltip-placement="bottom" uib-tooltip="send SMS"><i class="fa fa-paper-plane"></i></a> <div class="btn-group"> <button type="button" class="btn btn-success btn-sm" tooltip-placement="bottom" uib-tooltip="call phone set default"><i class="fa fa-phone"></i></button> <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" ng-init="searchPhones(contSel.cntID)"> <li ng-repeat="contSelPhones in contactSelectedPhones"><a href=""><i ng-class="funcPutIconPhones(contSelPhones.type)" style="margin-top: 5px"></i>{{contSelPhones.number}}<i class="fa fa-asterisk cls-color-blue-tkg" style="margin-left: 5px" ng-if="contSelPhones.default===1"></i></a></li> </ul> </div> <button type="button" class="btn btn-success btn-sm" tooltip-placement="bottom" uib-tooltip="start video call"><i class="fa fa-video-camera"></i></button> <div class="btn-group"> <button type="button" class="btn btn-info btn-sm" tooltip-placement="bottom" uib-tooltip="send email set default"><i class="fa fa-envelope-o"></i></button> <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" ng-init="seachEmails(contSel.cntID)"> <li ng-repeat="contSelEmails in contactSelectedEmails"><a ng-click="startEmailClient(contSelEmails.email)">{{contSelEmails.email}}<i class="fa fa-asterisk cls-color-blue-tkg" style="margin-left: 5px" ng-if="contSelEmails.default===1"></i></a></li> </ul> </div> <div class="btn-group"> <label class="btn btn-default btn-sm disabled" ng-model="radioModel" uib-btn-radio="\'Left\'" tooltip-placement="bottom" uib-tooltip="listen"><i class="fa fa-headphones" style="font-size: 17px"></i></label> <label class="btn btn-default btn-sm disabled" ng-model="radioModel" uib-btn-radio="\'Middle\'" tooltip-placement="bottom" uib-tooltip="barge"><i class="fa fa-bullhorn" style="font-size: 17px"></i></label> <label class="btn btn-default btn-sm disabled" ng-model="radioModel" uib-btn-radio="\'Right\'" tooltip-placement="bottom" uib-tooltip="whisper"><i class="fa fa-assistive-listening-systems" style="font-size: 17px"></i></label> </div> </div> </div> </div>'),a.put("views/conversations.html",'<div style="width: 100%" ng-controller="CommunicationsCtrl"> <div class="row"> <div class="col-sm-8"><h3>Search Communications - {{contactCommSearch.contact_name_full}} <span ng-if="showTable && selectEmulateUser!==null && selectEmulateUser !== user.id">- Emulating: {{getNameByUUID(selectEmulateUser)}}</span></h3></div> <div class="col-sm-4" ng-if="emulationStatus[\'voicemail\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{::tips.voicemail.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'voicemail\')"> <md-option ng-value="user.id"><strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong></md-option> <md-option ng-repeat="emUser in emulationStatus[\'voicemail\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <div class="comm-search"> <h4>Filter Criteria</h4> <table class="table page-actions"> <tr> <td> <md-checkbox ng-model="search.channel.calls" aria-label="Calls" class="md-warn md-align-top-left" flex> Calls </md-checkbox> <md-checkbox ng-model="search.channel.texts" aria-label="Text Messages" class="md-warn md-align-top-left" flex> Text Messages </md-checkbox> <md-checkbox ng-model="search.channel.fileshares" aria-label="File Shares" class="md-warn md-align-top-left" flex> File Shares </md-checkbox> <md-checkbox ng-model="search.channel.faxes" aria-label="Faxes" class="md-warn md-align-top-left" flex> Faxes </md-checkbox> <md-checkbox ng-if="1===2" ng-model="search.channel.videos" aria-label="Video Conferences" class="md-warn md-align-top-left" flex> Video Conferences </md-checkbox> <md-checkbox ng-if="1===2" ng-model="search.channel.chats" aria-label="Chatplus Messages" class="md-warn md-align-top-left" flex> Chatplus </md-checkbox> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="changeToMinDate(fromDate)" placeholder="From"> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" ng-change="processToDate(toDate)" placeholder="To"> </div> </td> </tr> <tr> <td> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="search.filterText" placeholder="Filter Results"> </div> </td> <td><md-select ng-model="search.contact_uuid" placeholder="- Choose Contact -" tooltip-placement="bottom" uib-tooltip="{{::tips.voicemail.select_months}}"> <md-option ng-repeat="contact in userContacts" ng-value="contact.contact_uuid"> {{contact.contact_name_full}} </md-option> </md-select></td> <td> <button class="btn btn-primary btn-s searchbtn" ng-click="doSearch()">Search</button> </td> </tr> </table> </div> <div class="comm-results-container clearfix"> <div class="system-working" ng-if="copyingToHs.status"><i class="fa fa-spinner fa-spin fa-5x"></i><br> <span>{{copyingToHs.message}}<br> Please Wait</span></div> <div ng-if="!copyingToHs.status"> <div id="convoloading" class="row" ng-if="communicationsList || searching"> <div class="col-sm-3" ng-if="search.channel.texts"> <div class="textloading"> <div class="icon"> <i class="fa fa-paper-plane fa-2x ltgreenfont fa-3x" style="padding-top:10px"></i> </div> <div class="note"> <h5>Text Messaging</h5> <span ng-if="!showTextTable"><i class="fa fa-spinner fa-spin"></i> Loading</span> <span ng-if="showTextTable"><i class="fa fa-check greenfont"></i> Done</span> </div> </div> </div> <div class="col-sm-3" ng-if="search.channel.calls"> <div class="callloading"> <i class="fa fa-phone ltbluefont fa-3x pull-left" style="padding-top:10px"></i> <h5>Calling</h5> <span ng-if="!showCallTable"><i class="fa fa-spinner fa-spin"></i> Loading</span> <span ng-if="showCallTable"><i class="fa fa-check greenfont"></i> Done</span> </div> </div> <div class="col-sm-3" ng-if="search.channel.fileshares"> <div class="fileloading"> <i class="fa fa-files-o orangefont fa-3x pull-left" style="padding-top:10px"></i> <h5>File Sharing</h5> <span ng-if="!showFileTable"><i class="fa fa-spinner fa-spin"></i> Loading</span> <span ng-if="showFileTable"><i class="fa fa-check greenfont"></i> Done</span> </div> </div> <div class="col-sm-3" ng-if="search.channel.faxes"> <div class="faxloading"> <i class="fa fa-fax greenfont fa-3x pull-left" style="padding-top:10px"></i> <h5>Faxing</h5> <span ng-if="!showFaxTable"><i class="fa fa-spinner fa-spin"></i> Loading</span> <span ng-if="showFaxTable"><i class="fa fa-check greenfont"></i> Done</span> </div> </div> </div> <div ng-if="showList" class="clearfix"> <div style="width: 100%"> <button ng-show="user.exportType.partner_code == \'hawksoft\'" class="btn btn-default pull-right" ng-click="exportFilteredToHawksoft(filterAllData)" tooltip-placement="top" uib-tooltip="{{::tips.conversation.copytohawksoft}}"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"></button> <button ng-show="user.exportType.partner_code == \'generic\'" class="btn btn-default pull-right" ng-click="exportFilteredToHawksoft(filterAllData)" tooltip-placement="top-right" uib-tooltip="{{::tips.conversation.copytomanagement}}"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px"></button> </div> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th class="button-column-sm"><a href ng-click="sortAllBy(\'type\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"><i class="fa fa-{{!reverse.all && predicate.all===\'type\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 150px"><a href ng-click="sortAllBy(\'date\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">Date <i class="fa fa-{{!reverse.all && predicate.all===\'date\' ?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Data</th> </tr> </thead> <tbody> <tr ng-repeat="item in filterAllData = (communicationsList | orderBy : predicate.all :reverse.all | filter: searchAll) | limitTo:perPage:perPage*(currentPage-1)"> <td class="button-column-sm center-text"> <i ng-if="item.type===\'sms\'" class="fa fa-paper-plane fa-2x ltgreenfont"></i> <i ng-if="item.type===\'fileshare\'" class="fa fa-files-o fa-2x orangefont"></i> <i ng-if="item.type===\'call\'" class="fa fa-phone fa-2x ltbluefont"></i> <i ng-if="item.type===\'fax\'" class="fa fa-fax fa-2x greenfont"></i> <i ng-if="item.type===\'video\'" class="fa fa-video-camera fa-2x redfont"></i> </td> <td> {{item.date | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{item.date | toLocalTime | amDateFormat:\'h:mm a\'}} </td> <td style="padding: 0px"> <table class="table table-bordered masterdata" ng-if="item.type===\'sms\'"> <tr> <td style="width: 50px" class="center-text"> <i ng-if="item.data.message_direction===\'in\'" class="fa fa-arrow-down fa-2x greenfont" tooltip-placement="top" uib-tooltip="Inbound"></i> <i ng-if="item.data.message_direction===\'out\'" class="fa fa-arrow-up fa-2x redfont" tooltip-placement="top" uib-tooltip="Outbound"></i> </td> <td style="width: 200px" ng-if="item.data.message_direction===\'in\'"> <ul class="profile-display"> <li ng-if="item.data.from_contact && item.data.from_contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{item.data.from_contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!item.data.from_contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{item.data.from_contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{item.data.from_contact.contact_name_full}}</strong><br> {{item.data.from_number | tel}} </li> </ul> </td> <td style="width: 200px" ng-if="item.data.message_direction===\'out\'"> <ul class="profile-display"> <li ng-if="item.data.to_contact && item.data.to_contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{item.data.to_contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!item.data.to_contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{item.data.to_contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{item.data.to_contact.contact_name_full}}</strong><br> {{item.data.to_number | tel}} </li> </ul> </td> <td>{{item.data.message}}</td> </tr> </table> <table class="table table-bordered masterdata" ng-if="item.type===\'fileshare\'"> <tr> <td style="width: 240px" ng-if="item.data.contact"> <ul class="profile-display"> <li ng-if="item.data.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{item.data.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!item.data.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{item.data.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{::item.data.contact.contact_name_given}} {{::item.data.contact.contact_name_family}}</strong><br> <a ng-click="startEmailClient(item.data.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.item.data.sendanemail + item.data.recipient_email}}">{{item.data.recipient_email.length>30 ? item.data.recipient_email.substring(0,13)+\'...\'+item.data.recipient_email.substring(item.data.recipient_email.length-13,item.data.recipient_email.length) : item.data.recipient_email}}</a> </li> </ul> </td> <td style="width: 240px" ng-if="item.data.noncontact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon" style="background-color: {{item.data.noncontact.color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="item.data.noncontact.name" style="display: inline-block"><span class="capitalize"><strong>{{::item.data.noncontact.name}}</strong></span><br> <a ng-click="startEmailClient(item.data.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.item.data.sendanemail + item.data.recipient_email}}">{{item.data.recipient_email}}</a> </li> <li ng-if="!item.data.noncontact.name" style="display: inline-block"><a ng-click="startEmailClient(item.data.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.item.data.sendanemail}}">{{item.data.recipient_email.length>30 ? item.data.recipient_email.substring(0,13)+\'...\'+item.data.recipient_email.substring(item.data.recipient_email.length-13,item.data.recipient_email.length) : item.data.recipient_email}}</a></li> </ul> <span style="color: #64d76c"><i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus"></i></span> </td> <td style="width: 200px" ng-bind-html="showFileName(item.data)"></td> <td style="width: 150px"> <span ng-if="item.data.downloaded_at">{{::item.data.downloaded_at | amDateFormat:\'MMM D, YYYY\'}}<br> {{::item.data.downloaded_at | amDateFormat:\'h:mm a\'}}</span> <span ng-if="!item.data.downloaded_at">Not Downloaded</span> </td> <td class="button-column" ng-if="!shareExpired(item.data)"><i ng-click="resendFileShareNotice(item.data.shared_file_uuid, item.data.file_uuid)" class="fa fa-share" style="cursor: pointer; font-size: 18px; color: orange" tooltip-placement="top" uib-tooltip="{{tips.fileshare.resendfileshare}}"></i></td> <td class="button-column" ng-if="shareExpired(item.data)"><i class="fa fa-share" tooltip-placement="top" style="font-size: 18px; color:grey" uib-tooltip="{{tips.fileshare.share_expired}}"></i></td> </tr> </table> <table class="table table-bordered masterdata" ng-if="item.type===\'call\'"> <tr> <td style="width: 200px"> <ul class="profile-display"> <li ng-if="item.data.contact && item.data.contact.contact_profile_image" class="profile_display_45"><img ng-src="{{pathImgProfile + item.data.contact.contact_profile_image}}" class="cls-img-lst-contact" alt=""></li> <li ng-if="item.data.contact && !item.data.contact.contact_profile_image" class="profile_display_45"><label class="cls-img-lst-contact-null" style="{{ setProfileColor(item.data.contact.contact_profile_color) }}">{{item.data.contact.contact_name_given.substring(0,1).toUpperCase() + item.data.contact.contact_name_family.substring(0,1).toUpperCase()}}</label></li> <li ng-if="item.data.noncontact" class="profile_display_45"><label class="cls-icon-lst-contact-null" style="{{ setProfileColor(item.data.noncontact.color) }}"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"> <span ng-if="item.data.contact && item.data.contact_name"><a href="" ng-click="showEditContactForm(item.data.contact)"><strong>{{item.data.contact_name}}</strong></a><br></span> <span ng-if="!item.data.contact && item.data.contact_name && !isPhoneNumber(item.data.contact_name)"><strong>{{item.data.contact_name}}</strong><br></span> <span ng-if="item.data.contact && item.data.contact_name" style="font-size: smaller"><span ng-if="item.data.contact_number.length<10">Ext: </span>{{item.data.contact_number | tel}}</span><span ng-if="item.data.destination_number==10000 || item.data.destination_number==\'1\'+recording.caller_id_number"> (Conference Call)</span> <!--   <span ng-if="!item.data.contact_name"><strong>{{item.data.direction ==\'local\' ? \'Ext: \' : \'\'}}{{returnAvatarName(item.data.contact_number, \'nam\')}}</strong><br></span> --> <span ng-if="item.data.contact && !item.data.contact_name"><strong><span ng-if="item.data.contact_number.length<10">Ext: </span>{{item.data.contact_number | tel}}</strong><br></span> <span ng-if="!item.data.contact && (item.data.contact_name && isPhoneNumber(item.data.contact_name)) || !item.data.contact_name"><strong><span ng-if="item.data.contact_number.length<10">Ext: </span>{{item.data.contact_number | tel}}</strong><br></span> </li> </ul> </td> <td class="button-column-lg"> <span ng-bind="formatTime(item.data.duration) |  date:\'MM/dd/yyyy h:m\'"> </span> </td> <td class="button-column-md"> <span id="statusCall"> <span ng-if="item.data.call_direction === \'outbound\'"> <span ng-if="item.data.call_status ===\'answered\'" class="fa-stack bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundanswered}}" alt="{{tips.history.outboundanswered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-up fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="item.data.call_status ===\'unanswered\'" class="fa fa-phone fa-2x bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundunanswered}}" alt="{{tips.history.outboundunanswered}}"></i> </span> <span ng-if="item.data.call_direction === \'inbound\'"> <span ng-if="item.data.call_status === \'missed\' || item.data.call_status === \'unanswered\'" class="fa-stack redfont" tooltip-placement="top" uib-tooltip="{{tips.history.missed}}"> <i class="fa fa-phone fa-rotate-135 fa-stack-2x" style="margin-top: 5px"></i> <i class="fa fa-minus fa-rotate-135 fa-stack-1x" style="margin-top: -7px;padding-right: 5px"></i> <i class="fa fa-arrow-left fa-rotate-45 fa-stack-1x" style="margin-top: -9px; margin-left: -3px"></i> </span> <span ng-if="item.data.call_status === \'answered\'" class="fa-stack greenfont" tooltip-placement="top" uib-tooltip="{{tips.history.answered}}" alt="{{tips.history.answered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-down fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="!item.data.voicemail_filepath && item.data.call_status === \'sent_to_voicemail\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.sent_to_voicemail}}" alt="{{tips.history.sent_to_voicemail}}"></i> <i ng-if="item.data.call_status === \'declined\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.declined}}" alt="{{tips.history.declined}}"></i> <a href ng-if="item.data.voicemail_filepath" ng-click="showAudioModal(call, \'history-voicemail\')"><img ng-src="images/icons/record-icon.068506d9.png" tooltip-placement="top" uib-tooltip="{{tips.history.voicemail}}" class="cls-img-call-history" alt="{{tips.history.voicemail}}"></a> </span> </span> </td> <td class="button-column-md"> <span ng-if="item.data.recording_filepath && audioPlaying!==item.data.recording_filepath" ng-click="showAudioModal(item.data, \'history-recording\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="item.data.recording_filepath && audioPlaying===item.data.recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> <span ng-if="item.data.manual_recording_filepath && audioPlaying!==item.data.manual_recording_filepath" ng-click="showAudioModal(item.data, \'history-recording-manual\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="item.data.manual_recording_filepath && audioPlaying===item.data.manual_recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> </td> </tr> </table> <table class="table table-bordered masterdata" ng-if="item.type===\'fax\'"> <tr> <td style="width: 50px" class="center-text"> <i ng-if="item.data.direction===\'inbound\'" class="fa fa-arrow-down fa-2x greenfont"></i> <i ng-if="item.data.direction===\'outbound\'" class="fa fa-arrow-up fa-2x redfont"></i> </td> <td style="width: 200px" ng-if="item.data.contact"> <ul class="profile-display"> <li ng-if="item.data.contact && item.data.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{item.data.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!item.data.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{item.data.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{item.data.contact.contact_name_full}}</strong><br> <span ng-if="item.data.direction===\'outbound\'">{{item.data.destination_number | tel}}</span> <span ng-if="item.data.direction===\'inbound\'">{{item.data.source_number | tel}}</span> </li> </ul> </td> <td style="width: 200px" ng-if="!item.data.contact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"> <strong><span ng-if="item.data.direction===\'outbound\'">{{item.data.destination_number | tel}}</span> <span ng-if="item.data.direction===\'inbound\'">{{item.data.source_number | tel}}</span></strong> </li> </ul> </td> <td> <a href ng-click="viewMessageImage(message.vfax_message_uuid)">{{showFaxFile(item.data)}}</a> </td> <td style="width: 100px">{{item.data.status}}</td> </tr> </table> </td> </tr> </tbody> </table> <div style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="communicationsList.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> </div> </div> <div ng-if="showTextTable" class="clearfix"> <div> <div class="col-sm-8"> <h4>Text Message Log</h4> <p>{{filterSmsData.length}} sms messages match your query.</p> </div> <div class="col-sm-4 right-text"> <button class="btn btn-default" ng-click="showSms = false" ng-show="filterSmsData.length>0 && showSms">Collapse <i class="fa fa-chevron-up"></i></button> <button class="btn btn-default" ng-click="showSms = true" ng-show="filterSmsData.length>0 && !showSms">Expand <i class="fa fa-chevron-down"></i></button> </div> </div> <table ng-show="filterSmsData.length>0 && showSms" id="data-table-under" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 50px"><a href ng-click="sortSmsBy(\'message_direction\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"><i class="fa fa-{{!reverse.sms && predicate.sms===\'message_direction\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 180px"><a href ng-click="sortSmsBySender()" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">Sender <i class="fa fa-{{!reverse.sms && sendersort ?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 180px"><a href ng-click="sortSmsByRecipient()" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyfilename}}">Recipient<i class="fa fa-{{!reverse.sms && recipientsort ?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 150px"><a href ng-click="sortSmsBy(\'sent_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydownloaded}}">Date / Time<i class="fa fa-{{!reverse.sms && predicate.sms===\'sent_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Message</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="sms in filterSmsData = (masterDisplayMessages | orderBy : predicate.sms :reverse.sms | filter:searchTexts) | limitTo:perPage:perPage*(currentPage-1)"> <td class="center-text"> <i ng-if="sms.message_direction===\'in\'" class="fa fa-arrow-down fa-2x greenfont"></i> <i ng-if="sms.message_direction===\'out\'" class="fa fa-arrow-up fa-2x redfont"></i> </td> <td> <ul class="profile-display"> <li ng-if="sms.from_contact && sms.from_contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{sms.from_contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!sms.from_contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{sms.from_contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{sms.from_contact.contact_name_full}}</strong><br> {{sms.from_number | tel}} </li> </ul> </td> <td><ul class="profile-display"> <li ng-if="sms.to_contact && sms.to_contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{sms.to_contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!sms.to_contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{sms.to_contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{sms.to_contact.contact_name_full}}</strong><br> {{sms.to_number | tel}} </li> </ul> </td> <td>{{sms.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{sms.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td>{{sms.message}}</td> </tr> </tbody> </table> </div> <hr> <div ng-if="showFileTable" class="clearfix"> <div> <div class="col-sm-8"> <h4>File Sharing Log</h4> <p>{{filterFileData.length}} shared files were found that match your query.</p> </div> <div class="col-sm-4 right-text"> <button class="btn btn-default" ng-click="showFs = false" ng-show="filterFileData.length>0 && showFs">Collapse <i class="fa fa-chevron-up"></i></button> <button class="btn btn-default" ng-click="showFs = true" ng-show="filterFileData.length>0 && !showFs">Expand <i class="fa fa-chevron-down"></i></button> </div> </div> <div class="scroll-container-head" ng-show="filterFileData.length>0 && showFs"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 13%"><a href ng-click="sortFileBy(\'created_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"> Date / Time <i class="fa fa-{{!reverse.file && predicate.file===\'created_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 28%"><a href ng-click="sortFileBy(\'recipient_email\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">Recipient <i class="fa fa-{{!reverse.file && predicate.file===\'recipient_email\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 20%"><a href ng-click="sortFileBy(\'original_filename\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyfilename}}">File <i class="fa fa-{{!reverse.file && predicate.file===\'original_filename\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 13%"><a href ng-click="sortFileBy(\'downloaded_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydownloaded}}">Downloaded<i class="fa fa-{{!reverse.file && predicate.file===\'downloaded_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <!--<th>Download IP <i class="fa fa-chevron-down"></i></th>--> <th class="button-column">Resend</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="fileShare.upload_type.substring(0,6) !== \'hscopy\'" ng-repeat="fileShare in filterFileData = (fileShareList | orderBy : predicate.fileshare :reverse.fileshare | filter:searchRecipients | filter:filterByMonth) | limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 13%">{{fileShare.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td style="width: 28%" ng-if="fileShare.contact"> <ul class="profile-display"> <li ng-if="fileShare.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{fileShare.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!fileShare.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{fileShare.contact.contact_name_given}} {{fileShare.contact.contact_name_family}}</strong><br> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.recipient_email}}">{{fileShare.recipient_email.length>30 ? fileShare.recipient_email.substring(0,13)+\'...\'+fileShare.recipient_email.substring(fileShare.recipient_email.length-13,fileShare.recipient_email.length) : fileShare.recipient_email}}</a> </li> </ul> </td> <td style="width: 29%" ng-if="fileShare.noncontact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.noncontact.color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="fileShare.noncontact.name" style="display: inline-block"><span class="capitalize"><strong>{{fileShare.noncontact.name}}</strong></span><br> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.recipient_email}}">{{fileShare.recipient_email}}</a> </li> <li ng-if="!fileShare.noncontact.name" style="display: inline-block"><a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail}}">{{fileShare.recipient_email.length>30 ? fileShare.recipient_email.substring(0,13)+\'...\'+fileShare.recipient_email.substring(fileShare.recipient_email.length-13,fileShare.recipient_email.length) : fileShare.recipient_email}}</a></li> </ul> <span style="color: #64d76c"><i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus"></i></span> </td> <td style="width: 20%" ng-bind-html="showFileName(fileShare)"></td> <td style="width: 13%"><span ng-if="fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.downloaded_at | toLocalTime | amDateFormat:\'h:mm a\'}}</span></td> <!--<td><span ng-if="fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_ip}}</span></td>--> <td class="button-column" ng-if="!shareExpired(fileShare)"><i ng-click="resendFileShareNotice(fileShare.shared_file_uuid, fileShare.file_uuid)" class="fa fa-share" style="cursor: pointer; font-size: 18px; color: orange" tooltip-placement="top" uib-tooltip="{{tips.fileshare.resendfileshare}}"></i></td> <td class="button-column" ng-if="shareExpired(fileShare)"><i class="fa fa-share" tooltip-placement="top" style="font-size: 18px; color:grey" uib-tooltip="{{tips.fileshare.share_expired}}"></i></td> </tr> </tbody> </table> </div> </div> <hr> <div ng-if="showCallTable" class="clearfix"> <div> <div class="col-sm-8"> <h4>Call Log</h4> <p>{{filterCallData.length}} calls were found that match your query.</p> </div> <div class="col-sm-4 right-text"> <button class="btn btn-default" ng-click="showCalls = false" ng-show="filterCallData.length>0 && showCalls">Collapse <i class="fa fa-chevron-up"></i></button> <button class="btn btn-default" ng-click="showCalls = true" ng-show="filterCallData.length>0 && !showCalls">Expand <i class="fa fa-chevron-down"></i></button> </div> </div> <table ng-show="filterCallData.length>0 && showCalls" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 6%">&nbsp;</th> <th style="width: 33%" id="cls-tab-from"><a href ng-click="sortCallBy(\'contact.contact_name_full\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyfrom}}">From / To <i class="fa fa-{{!reverse.call && predicate.call===\'contact.contact_name_full\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 20%" id="cls-tab-date"><a href ng-click="sortCallBy(\'start_stamp\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbydate}}">Date / Time <i class="fa fa-{{!reverse.call && predicate.call===\'start_stamp\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 11%" id="cls-tab-dura"><a href ng-click="sortCallBy(\'duration\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyduration}}">Duration <i class="fa fa-{{!reverse.call && predicate.call===\'duration\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="button-column-md" id="cls-tab-stat"><a href ng-click="sortCallBy(\'icon\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbystatus}}">Status <i class="fa fa-{{!reverse.call && predicate.call===\'icon\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="button-column-md" id="cls-tab-reco"><a href ng-click="sortCallBy(\'recording_file\')" tooltip-placement="top-left" uib-tooltip="{{tips.history.sortbyrecording}}">Recording <i class="fa fa-{{!reverse.call && predicate.call===\'recording_file\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> </tr> </thead> <tbody class="data-table-body"> <tr ng-if="call.contact_number!==\'0000000000\'" ng-repeat="call in filterCallData = (contactCallHistory | orderBy : predicate.call :reverse.call | filter : vmSearch)"> <td style="width: 6%"> <span class="cls-img-contact-call-history"> <img ng-if="call.contact && call.contact.contact_profile_image" ng-src="{{pathImgProfile + call.contact.contact_profile_image}}" class="cls-img-lst-contact" alt=""> <label ng-if=" call.contact && !call.contact.contact_profile_image" class="cls-img-lst-contact-null" style="{{ setProfileColor(call.contact.contact_profile_color) }}">{{call.contact.contact_name_given.substring(0,1).toUpperCase() + call.contact.contact_name_family.substring(0,1).toUpperCase()}}</label> <label ng-if="call.noncontact" class="cls-icon-lst-contact-null" style="{{ setProfileColor(call.noncontact.color) }}"><i class="fa fa-user"></i></label> </span> </td> <td style="width: 33%"> <span ng-if="call.contact && call.contact_name"><a href="" ng-click="showEditContactForm(call.contact)"><strong>{{call.contact_name}}</strong><span ng-if="1==2 && call.contact.contact_uuid === user.contact_uuid"> (You)</span></a><br></span> <span ng-if="call.noncontact && call.contact_name && !isPhoneNumber(call.contact_name)"><strong>{{call.contact_name}}</strong><br></span> <span ng-if="call.contact && call.contact_name" style="font-size: smaller"><span ng-if="call.contact_number.length<10">Ext: </span>{{call.contact_number | tel}} <span ng-if="call.description.length>0">{{call.description}}</span></span> <span ng-if="call.contact && !call.contact_name"><strong><span ng-if="call.contact_number.length<10">Ext: </span>{{call.contact_number | tel}}</strong><br><span ng-if="call.description.length>0">{{call.description}}</span></span> <span ng-if="call.noncontact && (call.contact_name && isPhoneNumber(call.contact_name)) || !call.contact_name"><strong><span ng-if="call.contact_number.length<10">Ext: </span>{{call.contact_number | tel}}</strong><span ng-if="call.description.length>0"><br>{{call.description}}</span></span> </td> <!--  --> <td style="width: 20%">{{call.start_stamp | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\'}}</td> <td style="width: 11%; text-align: center"> <span ng-bind="formatTime(call.duration) |  date:\'MM/dd/yyyy h:m\'"> </span> </td> <td class="button-column-md"> <span id="statusCall"> <span ng-if="call.call_direction === \'outbound\'"> <span ng-if="call.call_status ===\'answered\'" class="fa-stack bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundanswered}}" alt="{{tips.history.outboundanswered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-up fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="call.call_status ===\'unanswered\'" class="fa fa-phone fa-2x bluefont" tooltip-placement="top" uib-tooltip="{{tips.history.outboundunanswered}}" alt="{{tips.history.outboundunanswered}}"></i> </span> <span ng-if="call.call_direction === \'inbound\'"> <span ng-if="call.call_status === \'missed\' || call.call_status === \'unanswered\'" class="fa-stack redfont" tooltip-placement="top" uib-tooltip="{{tips.history.missed}}"> <i class="fa fa-phone fa-rotate-135 fa-stack-2x" style="margin-top: 5px"></i> <i class="fa fa-minus fa-rotate-135 fa-stack-1x" style="margin-top: -7px;padding-right: 5px"></i> <i class="fa fa-arrow-left fa-rotate-45 fa-stack-1x" style="margin-top: -9px; margin-left: -3px"></i> </span> <span ng-if="call.call_status === \'answered\'" class="fa-stack greenfont" tooltip-placement="top" uib-tooltip="{{tips.history.answered}}" alt="{{tips.history.answered}}"> <i class="fa fa-phone fa-stack-2x"></i> <i class="fa fa-arrow-down fa-rotate-45 fa-stack-1x" style="padding-left:12px; margin-top: -10px"></i> </span> <i ng-if="!call.voicemail_filepath && call.call_status === \'sent_to_voicemail\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.sent_to_voicemail}}" alt="{{tips.history.sent_to_voicemail}}"></i> <i ng-if="call.call_status === \'declined\'" class="fa fa-phone fa-rotate-135 fa-2x redfont" tooltip-placement="top" uib-tooltip="{{tips.history.declined}}" alt="{{tips.history.declined}}"></i> <a href ng-if="call.voicemail_filepath" ng-click="showAudioModal(call, \'history-voicemail\')"><img ng-src="images/icons/record-icon.068506d9.png" tooltip-placement="top" uib-tooltip="{{tips.history.voicemail}}" class="cls-img-call-history" alt="{{tips.history.voicemail}}"></a> </span> </span> </td> <td class="button-column-md"> <span ng-if="call.recording_filepath && audioPlaying!==call.recording_filepath" ng-click="showAudioModal(call, \'history-recording\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="call.recording_filepath && audioPlaying===call.recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> <span ng-if="call.manual_recording_filepath && audioPlaying!==call.manual_recording_filepath" ng-click="showAudioModal(call, \'history-recording-manual\')" tooltip-placement="top" uib-tooltip="Listen to Recording"><i class="fa fa-play-circle fa-2x"></i></span> <span ng-if="call.manual_recording_filepath && audioPlaying===call.manual_recording_filepath" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Recording"><i class="fa fa-stop-circle fa-2x"></i></span> </td> </tr> </tbody> </table> </div> <hr> <div ng-if="showFaxTable" class="clearfix"> <div> <div class="col-sm-8"> <h4>Faxing Log</h4> <p>{{filterFaxData.length}} faxes were found that match your query.</p> </div> <div class="col-sm-4 right-text"> <button class="btn btn-default" ng-click="showFs = false" ng-show="filterFaxData.length>0 && showFs">Collapse <i class="fa fa-chevron-up"></i></button> <button class="btn btn-default" ng-click="showFs = true" ng-show="filterFaxData.length>0 && !showFs">Expand <i class="fa fa-chevron-down"></i></button> </div> </div> <div class="scroll-container-head" ng-show="filterFaxData.length>0 && showFs"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 13%"><a href ng-click="sortFaxBy(\'created_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"> Date / Time <i class="fa fa-{{!reverse.fax && predicate.fax===\'created_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 50px"><a href ng-click="sortFaxBy(\'direction\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"> Date / Time <i class="fa fa-{{!reverse.fax && predicate.fax===\'direction\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 28%"><a href ng-click="sortFaxBy(\'recipient_email\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">Recipient <i class="fa fa-{{!reverse.fax && predicate.fax===\'recipient_email\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 20%"><a href ng-click="sortFaxBy(\'original_filename\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyfilename}}">File <i class="fa fa-{{!reverse.fax && predicate.fax===\'original_filename\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 13%"><a href ng-click="sortFaxBy(\'downloaded_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydownloaded}}">Downloaded<i class="fa fa-{{!reverse.fax && predicate.fax===\'downloaded_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="fax in filterFaxData = (faxList | orderBy : predicate.fax :reverse.fax | filter:searchFax) | limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 13%">{{fax.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fax.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td style="width: 50px" class="center-text"> <i ng-if="fax.direction===\'inbound\'" class="fa fa-arrow-down fa-2x greenfont"></i> <i ng-if="fax.direction===\'outbound\'" class="fa fa-arrow-up fa-2x redfont"></i> </td> <td style="width: 200px" ng-if="fax.contact"> <ul class="profile-display"> <li ng-if="fax.contact && fax.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{fax.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!fax.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{fax.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{fax.contact.contact_name_full}}</strong><br> <span ng-if="fax.direction===\'outbound\'">{{fax.destination_number | tel}}</span> <span ng-if="fax.direction===\'inbound\'">{{fax.source_number | tel}}</span> </li> </ul> </td> <td style="width: 200px" ng-if="!fax.contact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"> <strong><span ng-if="fax.direction===\'outbound\'">{{fax.destination_number | tel}}</span> <span ng-if="fax.direction===\'inbound\'">{{fax.source_number | tel}}</span></strong> </li> </ul> </td> <td> <a href ng-click="viewMessageImage(message.vfax_message_uuid)">{{showFaxFile(fax)}}</a> </td> <td style="width: 100px">{{fax.status}}</td> </tr> </tbody> </table> </div> </div> </div> </div> </div>'),
a.put("views/dm-channels-list.html",'<ul class="channellist"> <li ng-if="channel.showDirect && (!favoritesOnly || (favoritesOnly && isFavoriteChannel(channel)))" ng-repeat="channel in channels() | orderBy: \'display_name\'" ng-class="{channelbold : channel.getUnreadCount() > 0 }" ng-click="setChannel(channel)"> <i ng-class="showChatStatus(teamMembers[channel.partner_id])" style="opacity: 0.6; font-size: 16px"></i> <span> {{channel.display_name}} </span> <span ng-if="channel.getUnreadCount() > 0"> ({{channel.getUnreadCount()}}) </span> <span ng-click="hideDirectMessage(channel)"> <i class="fa fa-times showonhover" style="color: #888; float: right; padding: 4px 10px" tooltip-placement="top" uib-tooltip="{{::tips.chat.leave_direct_message}}"> </i> </span> <span ng-click="toggleFavoriteChannel(channel)"> <span class="fa-stack" ng-if="!isFavoriteChannel(channel)" tooltip-placement="top" uib-tooltip="Add to Favorites"> <i class="fa fa-star-o fa-stack-1x showonhover"></i> <i class="fa fa-star fa-stack-1x bg-icon"></i> </span> <span class="fa-stack" ng-if="isFavoriteChannel(channel)" tooltip-placement="top" uib-tooltip="Remove from Favorites"> <i class="fa fa-star fa-stack-1x showonhover"></i> <i class="fa fa-star fa-stack-1x bg-icon"></i> </span> </span> </li> </ul>'),a.put("views/emoji-popup.html",'<div class="wdt-emoji-popup"> <a href="#" class="wdt-emoji-popup-mobile-closer"> &times; </a> <div class="wdt-emoji-menu-content"> <div id="wdt-emoji-menu-header"> <a class="wdt-emoji-tab active" data-group-name="Recent"></a> <a class="wdt-emoji-tab" data-group-name="People"></a> <a class="wdt-emoji-tab" data-group-name="Nature"></a> <a class="wdt-emoji-tab" data-group-name="Foods"></a> <a class="wdt-emoji-tab" data-group-name="Activity"></a> <a class="wdt-emoji-tab" data-group-name="Places"></a> <a class="wdt-emoji-tab" data-group-name="Objects"></a> <a class="wdt-emoji-tab" data-group-name="Symbols"></a> <a class="wdt-emoji-tab" data-group-name="Flags"></a> <a class="wdt-emoji-tab" data-group-name="Custom"></a> </div> <div class="wdt-emoji-scroll-wrapper"> <div id="wdt-emoji-menu-items"> <input id="wdt-emoji-search" type="text" placeholder="Search"> <h3 id="wdt-emoji-search-result-title">Search Results</h3> <div class="wdt-emoji-sections"></div> <div id="wdt-emoji-no-result">No emoji found</div> </div> </div> <div id="wdt-emoji-footer"> <div id="wdt-emoji-preview"> <span id="wdt-emoji-preview-img"></span> <div id="wdt-emoji-preview-text"> <span id="wdt-emoji-preview-name"></span><br> <span id="wdt-emoji-preview-aliases"></span> </div> </div> <div id="wdt-emoji-preview-bundle"> </div> </div> </div> </div>'),a.put("views/favorite-channels-list.html",'<ul class="fa-ul channellist"> <topic-channels-list channels="favoriteTopicChannels" favorites-only="true" toggle-favorite-channel="toggleFavoriteChannel" is-favorite-channel="isFavoriteChannel" favorites-only="true"> </topic-channels-list> <dm-channels-list channels="favoriteDirectChannels" favorites-only="true" toggle-favorite-channel="toggleFavoriteChannel" is-favorite-channel="isFavoriteChannel" favorites-only="true"> </dm-channels-list> </ul>'),a.put("views/fax/faxhowtomodal.html",'<div id="fax-how-to-modal" class="fax-modal"> <h3>How To Send Fax Via E-Mail</h3> <hr> <p> To send a fax using our Email-to-Fax service simply send an email using the following parameters. Email-to-Fax supports up to 5 attachments. Attachments may be sent in JPG, PDF, Adobe PostScript, TIFF, Microsoft Word, Excel, CSV, HTML & Plain Text formats.</p> <ul> <li>To: 10_digits_fax_number@emailyourfax.com</li> <li>From: authorized@email_address.com</li> <li>Subject: your_10_digits_vfax_number</li> <li>{You may now add \'cover page\' to the subject line to have our system utilize the email body as a cover page)</li> <li>Body:</li> </ul> <p>You may only send faxes from the email address associated with your Symphony account.</p> <p>Upon submission our system will reply with a confirmation or rejection notice.</p> </div>'),a.put("views/fax/faxorderdirective.html",'<div class="fax-modal-title"> <h3>Order Fax Number</h3> <button type="button" ng-click="close()" class="close"><i class="fa fa-times"></i></button> </div> <hr> <div ng-show="!(ordering)"> <div id="fax-order-actions"> <p class="fax-order-label">State: </p> <select ng-model="state" class="form-control fax-order-dropdown"> <option ng-repeat="availableState in availableStates">{{availableState}}</option> </select> <br> <p ng-show="state" class="fax-order-label">Ratecenter: </p> <select ng-show="state" ng-model="ratecenter" class="form-control fax-order-dropdown"> <option ng-repeat="availableRatecenter in availableRatecenters">{{availableRatecenter}}</option> </select> <br> <p ng-show="ratecenter" class="fax-order-label">DID: </p> <select ng-show="ratecenter" ng-model="did" class="form-control fax-order-dropdown"> <option ng-repeat="availableDid in availableDids">{{availableDid}}</option> </select> <br> </div> <button ng-click="startOrder()" class="btn btn-primary order-button fax-order-btn">Order</button> <!-- <h4>Available DID\'s</h4> --> <!-- <table> --> <!-- <tr ng-repeat="did in dids.slice(0, dids.length/2)"> --> <!-- <td> --> <!-- {{did}}<button ng-click="startOrder(did)" class="btn btn-primary order-button">Order</button> --> <!-- </td> --> <!-- <td class="right-td"> --> <!-- {{dids[$index + dids.length/2]}}<button ng-click="startOrder(dids[ $index + dids.length/2 ])" class="btn btn-primary order-button">Order</button> --> <!-- </td> --> <!-- </tr> --> <!-- </table> --> </div> <div ng-show="ordering"> <p>Would you like to order did number: {{orderDid}} ?</p> <div id="fax-did-order-form"> <div> <p>Your Name:</p> <input type="text" class="form-control" ng-model="senderName"> </div> <div> <p>Your Email:</p> <input type="text" class="form-control" ng-model="emailAddress"> </div> <button class="btn btn-success" ng-click="postOrderDid()">Order</button> </div> </div>'),a.put("views/fax/faxordermodal.html",'<div id="fax-order-modal" class="fax-modal" fax-order dids="vm.content.data"> </div>'),a.put("views/fax/vfax.html",'<div class="fax-container" ng-controller="FaxCtrl"> <div class="row" id="fax-actions-container"> <div class="col-sm-12"> <div class="row"> <h3 class="fax-header">Fax</h3> <a href class="how-to-fax-link" ng-click="showModal(\'/fax/faxhowtomodal.html\')"> How To Send Fax Via E-Mail </a> </div> <div class="row"> <div class="col-sm-7"> <h4 style="display: inline-block">Send A Fax</h4><br> <input type="text" placeholder="Recipient Fax Number" class="form-control fax-send-input" ng-disabled="!(userFaxNumber)" ng-model="destinationNumber" phone-input> <input type="file" ng-show="" nv-file-select uploader="uploader" id="fax-upload"> <button type="file" class="btn btn-default btn-s fax-btn fax-upload-btn" ng-disabled="!(userFaxNumber)" ng-click="handleFileUploaderButton()" tooltip-placement="top" uib-tooltip="\n                                        Allowed File Types:\n                                        jpg, jpeg, pdf, doc, docx, xls, csv, txt, tif, tiff\n                                        "> {{fileInQueue() ? queueFileName : \'Select File To Fax\'}} </button> <button class="btn btn-primary btn-s fax-btn sendbtn" ng-disabled="!(userFaxNumber) || !(validDestinationNumber()) || !(fileInQueue())" ng-click="sendFax()"> Send </button> <span ng-show="sending"> <i class="fa fa-cog fa-spin fa-3x fa-fw fax-sending"></i> </span> <br> <md-checkbox ng-model="useCoverPage" aria-label="Use a Cover Page" ng-true-value="true" ng-false-value="false" class="md-warn md-align-top-left" flex> Use a Cover Page </md-checkbox> (<a href="{{getCoverPreviewUrl()}}" target="_blank">View Sample</a>) <div ng-show="useCoverPage" id="cover-page"> <strong>Cover Page Info.<br></strong> <md-input-container> <label>Recipient Name</label> <input name="faxRecipient" style="width: 100%" ng-model="faxRecipient"> </md-input-container> <md-input-container> <label>Subject</label> <input name="faxSubject" style="width: 100%" ng-model="faxSubject"> </md-input-container> <md-input-container> <label>Fax Message</label> <textarea name="faxMessage" style="width: 100%" ng-model="faxMessage"></textarea> </md-input-container> </div> <div ng-if="showSuccessMsg" class="fax-success-alert" uib-alert ng-class="\'alert-success\'" dismiss-on-timeout="8000" close="closeSuccess()"> <p>Your document has been uploaded and queued to be sent. The delivery status will be displayed below.</p> </div> </div> <div class="col-sm-5"> <a href ng-if="!(userFaxNumber) && isAdminGroupOrGreater()" class="fax-account-info" ng-click="showOrderFaxNumber()"> Order Fax Number </a> <div class="fax-account-info-container" ng-show="userFaxNumber"> <p ng-show="userFaxNumber" class="fax-account-info"> My Fax Number: <strong>{{userFaxNumber | tel2}}</strong> </p> <p ng-show="isAdminGroupOrGreater()" class="fax-account-info"> Authorized Email Address: <strong ng-if="!editingAuthorizedEmail">{{authorizedEmailAddress}}</strong> <input type="text" ng-show="editingAuthorizedEmail" ng-model="authorizedEmailAddress" ng-blur="toggleEditingAuthorizedEmail()" focus-on="editing.authorized" ng-keydown="loseFocusIfEnter($event)" ng-model-options="{ updateOn: \'blur\' }"> <i class="fa fa-pencil-square-o" ng-click="toggleEditingAuthorizedEmail()" ng-show="!editingAuthorizedEmail"> </i> </p> <p ng-show="isAdminGroupOrGreater()" class="fax-account-info"> Incoming faxes go to this e-mail: <strong ng-show="!editingForwardEmail">{{forwardEmailAddress}}</strong> <input type="text" ng-show="editingForwardEmail" ng-model="forwardEmailAddress" focus-on="editing.forward" ng-blur="toggleEditingForwardEmail()" ng-keydown="loseFocusIfEnter($event)" ng-model-options="{ updateOn: \'blur\' }"> <i class="fa fa-pencil-square-o" ng-click="toggleEditingForwardEmail()" ng-show="!editingForwardEmail"> </i> </p> </div> </div> </div> </div> </div> <div id="fax-history-container"> <div class="fax-actions"> <div class="fax-calls-per-page"> <p>Calls per page: </p> <select class="form-control" ng-model="callsPerPage" convert-to-number> <option value="5">5</option> <option value="10">10</option> <option value="15">15</option> </select> </div> <div class="date-picker fax-date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </div> <div class="date-picker call-stats-date"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" placeholder="To"> </div> </div> <div class="fax-search-filter"> <div class="input-group"> <span class="input-group-addon" title="Filter calls"> <i class="fa fa-filter"></i> </span> <input class="form-control" type="text" placeholder="Filter Results By Fax Number" ng-model="searchFilter"> </div> </div> </div> <table class="fax-history-table table table-bordered table-hover table-striped"> <thead> <tr> <th id="fax-tab-pic"></th> <th ng-click="sortBy(\'source_number\')" id="fax-tab-from"> From <i ng-show="sortDown && sortCol == \'source_number\'" class="fa fa-arrow-down" aria-hidden="true"> </i> <i ng-show="!(sortDown) && sortCol == \'source_number\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'destination_number\')" id="fax-tab-to"> To <i ng-show="sortDown && sortCol == \'destination_number\'" class="fa fa-arrow-down" aria-hidden="true"></i> <i ng-show="!(sortDown) && sortCol == \'destination_number\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'updated_at\')" id="fax-tab-date">Date/Time <i ng-show="sortDown && sortCol == \'updated_at\'" class="fa fa-arrow-down" aria-hidden="true"> </i> <i ng-show="!(sortDown) && sortCol == \'updated_at\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'direction\')">Original File Sent <i ng-show="sortDown && sortCol == \'original_filename\'" class="fa fa-arrow-down" aria-hidden="true"> </i> <i ng-show="!(sortDown) && sortCol == \'original_filename\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'direction\')" id="fax-tab-dura">Direction <i ng-show="sortDown && sortCol == \'direction\'" class="fa fa-arrow-down" aria-hidden="true"> </i> <i ng-show="!(sortDown) && sortCol == \'direction\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> <th ng-click="sortBy(\'status\')" id="fax-tab-stat"> Status <i ng-show="sortDown && sortCol == \'status\'" class="fa fa-arrow-down" aria-hidden="true"> </i> <i ng-show="!(sortDown) && sortCol == \'status\'" class="fa fa-arrow-up" aria-hidden="true"> </i> </th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-repeat="message in faxMessages | filter : dateFilter | filter : {destination_number: searchFilter} | orderBy : sortCol : sortDown | limitTo : callsPerPage : messagesBegin()"> <td> <a href="main" style="text-decoration: none"> <img src="{{pathImgProfile + user.profile_image}}" ng-if="user.profile_image" class="cls-img-profile fax-profile-img"> </a></td> <td ng-if="message.direction === \'outbound\'"> {{getUserContact(message).contact_name_full}} </td> <td ng-if="message.direction === \'outbound\'"> {{message.destination_number | tel}} </td> <td ng-if="message.direction === \'inbound\'"> {{message.source_number | tel}} </td> <td ng-if="message.direction === \'inbound\'"> {{domain.domain_name}} </td> <td>{{message.updated_at | toLocalTime | amDateFormat: \'MMM D, YYYY\'}}<br> {{message.updated_at | toLocalTime | amDateFormat: \'h:mm a\'}}</td> <td>{{showFileName(message)}}</td> <td>{{message.direction}}</td> <td>{{showMessageStatus(message)}} <hr> <div class="tableclass sharetable" ng-if="message.direction === \'outbound\'"> <span class="tablecell"> <i class="fa fa-refresh greenfont" style="font-size: 20px" ng-click="resendMessage(message.vfax_message_uuid)" tooltip-placement="top-right" uib-tooltip="{{::tips.vfax.resend}}"> </i> </span> <span class="tablecell" ng-if="1==2 && message.direction === \'outbound\'"><i class="fa fa-eye ltbluefont" style="font-size: 20px" ng-click="viewMessageImage(message.vfax_message_uuid)" tooltip-placement="top-right" uib-tooltip="{{::tips.vfax.viewfax}}"></i></span> <span class="tablecell"><a href="{{getPdfUrl(message)}}" target="_blank"><i class="fa fa-eye ltbluefont" style="font-size: 20px" tooltip-placement="top-right" uib-tooltip="{{::tips.vfax.viewfax}}"></i></a></span> <span class="tablecell"> <img ng-click="copyFaxToManagementSystem(message)" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top-right" uib-tooltip="Copy fax entry to {{showCopyTooltip()}}"> </span> </div> </td> </tr> </tbody> <tfoot> <tr> <td colspan="6"> <center> <ul uib-pagination total-items="totalItems" ng-model="currentPage" items-per-page="callsPerPage"></ul> </center> </td> </tr> </tfoot> </table> </div> <a id="download_link" style="display:none" download="foo.pdf"></a> </div>'),a.put("views/fax/viewfaximage.html",'<div id="fax-image-view" class="modal-body"> <img class="fax-file" src="{{vm.content.data.obj}}" style="max-width: 100%; max-height: 100%"> </div>'),a.put("views/filesharing.html",'<div id="file-share-container" ng-controller="FileSharingCtrl"> <div class="row top-row"> <div class="col-sm-4"> <h3> File Sharing <span ng-if="showTable && selectEmulateUser!==null && selectEmulateUser !== user.id"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> </div> <div class="col-sm-4 share-file-btn" ng-show="showTable" style="text-align: center; margin-top: 15px"> <button class="btn btn-primary sharefilebtn" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showFileShareModal()"> <i class="fa fa-files-o" style="margin-right: 10px"></i> Share a File </button> </div> <div class="col-sm-4 right-text" ng-if="showTable && emulationStatus[\'fileshare\'].manager===\'true\'"> <div class="input-group pull-right"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'fileshare\')"> <md-option ng-value="user.id"> <strong> {{user.contact_name_given}} {{user.contact_name_family}} </strong> </md-option> <md-option ng-repeat="emUser in emulationStatus[\'fileshare\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <div ng-if="!showTable" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i><br> Loading... </div> <div class="cls-notify" ng-show="showTable && totalItemsFS === 0"> <i class="fa fa-bullhorn fa-3x cls-color-yellow-tkg" id="iconNotify"></i> <!-- <span id="productName"> Symphony</span>  --> <spam>You do not have any shared files. Get started by clicking "Share a File".</spam> </div> <table class="table page-actions" ng-show="showTable"> <tr> <td> <div class="col-lg-3"> <label class="bluecolor" for="search">Files per page:</label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-model="perPage"></select> </div> <div class="col-lg-3"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </div> <div class="col-lg-3"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" ng-change="processToDate(toDate)" placeholder="To"> </div> </div> <div class="col-lg-3"> <div class="input-group"> <span class="input-group-addon" title="Filter Shares"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="shareSearch" placeholder="Filter by Recipient Email"> </div> </div> </td> </tr> </table> <div class="file-table-container"> <div class="scroll-container-head" ng-show="showTable && totalItemsFS > 0"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 13%"><a href ng-click="sortBy(\'created_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydate}}"> Date / Time <i class="fa fa-{{!reverse && predicate===\'created_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 28%"><a href ng-click="sortBy(\'recipient_email\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">Recipient <i class="fa fa-{{!reverse && predicate===\'recipient_email\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style="width: 30%"><a href ng-click="sortBy(\'original_filename\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbyfilename}}">File <i class="fa fa-{{!reverse && predicate===\'original_filename\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th style=""><a href ng-click="sortBy(\'downloaded_at\')" tooltip-placement="top-left" uib-tooltip="{{tips.fileshare.sortbydownloaded}}">Downloaded<i class="fa fa-{{!reverse && predicate===\'downloaded_at\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <!--<th>Download IP <i class="fa fa-chevron-down"></i></th>--> <th class="button-column">Resend</th> <th class="button-column">Copy</th> <!-- <th style="width: 6px;"></th> --> <th ng-if="1==2" style="width: 14%">From</th> </tr> </thead> </table> </div> <div ng-show="showTable" class="scroll-container" ng-style="{\'height\': fsTableHeight && fsTableHeight}"> <table id="data-table-under" class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-repeat="fileShare in filterData = (fileSharingList | orderBy : predicate :reverse | filter:searchRecipients | filter:filterByMonth) | limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 13%">{{fileShare.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td style="width: 28%" ng-if="fileShare.contact"> <ul class="profile-display"> <li ng-if="fileShare.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{fileShare.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!fileShare.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li style="display: inline-block"><strong>{{fileShare.contact.contact_name_given}} {{fileShare.contact.contact_name_family}}</strong><br> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.recipient_email}}">{{fileShare.recipient_email.length>30 ? fileShare.recipient_email.substring(0,13)+\'...\'+fileShare.recipient_email.substring(fileShare.recipient_email.length-13,fileShare.recipient_email.length) : fileShare.recipient_email}}</a> </li> </ul> </td> <td style="width: 29%" ng-if="fileShare.noncontact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon" style="background-color: {{fileShare.noncontact.color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="fileShare.noncontact.name" style="display: inline-block"><span class="capitalize"><strong>{{fileShare.noncontact.name}}</strong></span><br> <a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail + fileShare.recipient_email}}">{{fileShare.recipient_email}}</a> </li> <li ng-if="!fileShare.noncontact.name" style="display: inline-block"><a ng-click="startEmailClient(fileShare.recipient_email)" tooltip-placement="bottom" uib-tooltip="{{tips.fileshare.sendanemail}}">{{fileShare.recipient_email.length>30 ? fileShare.recipient_email.substring(0,13)+\'...\'+fileShare.recipient_email.substring(fileShare.recipient_email.length-13,fileShare.recipient_email.length) : fileShare.recipient_email}}</a></li> <li style="text-align: right"><span style="color: #64d76c"><i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'fileshare\', fileShare)" class="fa fa-user-plus"></i></span></li> </ul> </td> <td style="width: 30%"><span tooltip-placement="bottom" uib-tooltip="tips.fileshare.downloadfile"><span ng-bind-html="showFileName(fileShare)"></span></span></td> <td style=""><span ng-if="fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{fileShare.downloaded_at | toLocalTime | amDateFormat:\'h:mm a\'}}</span></td> <!--<td><span ng-if="fileShare.downloaded_at!=\'\'">{{fileShare.downloaded_ip}}</span></td>--> <td class="button-column" ng-if="!shareExpired(fileShare)"><i ng-click="resendFileShareNotice(fileShare.shared_file_uuid, fileShare.file_uuid)" class="fa fa-share" style="cursor: pointer; font-size: 18px; color: orange" tooltip-placement="top" uib-tooltip="{{tips.fileshare.resendfileshare}}"></i></td> <td class="button-column" ng-if="shareExpired(fileShare)"><i class="fa fa-share" tooltip-placement="top" style="font-size: 18px; color:grey" uib-tooltip="{{tips.fileshare.share_expired}}"></i></td> <td class="button-column"> <span ng-show="user.exportType.partner_code == \'hawksoft\'" ng-click="copyShareToHawksoft(fileShare)"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.fileshare.copytohawksoft}}"></span> <span ng-show="user.exportType.partner_code == \'generic\'" ng-click="copyShareToHawksoft(fileShare)"><img src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.fileshare.copytomanagement}}"></span> </td> <td ng-if="1==2" style="width: 14%">{{user.contact_name_given}} {{user.contact_name_family}}</td> </tr> </tbody> </table> </div> </div> <div ng-show="showTable" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> </div> </div>'),a.put("views/giphy-img.html",'<img class="giphy-img" src="{{post.message}}">'),a.put("views/header.html",'<header> <div class="cls-menu-dev"> <a href="#" class="bt-menu"> <span class="fa fa-bars" style="border: none !important"> </span> <img src="images/Kotter-logoSN.64fddf3f.png" width="40" height="40" alt="Logo" style="border: none !important"> <i class="fa fa-ellipsis-v" ng-click="showHideMenuConfig()" style="border: none !important"> </i> </a> </div> <div class="wrapper"> <div class="topnavlist"> <ul class="topnav1"> <li ng-class="{lnkActivo : activePath===\'/main\'}"> <a href="main" class="caption"> <i class="fa fa-tachometer fa-lg"></i> Dashboard </a> </li> <li ng-class="{lnkActivo : activePath===\'/chatplus\'}"> <a href="chatplus"> <i class="fa fa-wechat fa-lg"></i> Chat Plus <span>{{totalMentionCount()}}</span> </a> </li> <li ng-class="{lnkActivo : activePath===\'/sms\'}"> <a href="sms"> <i class="fa fa-paper-plane fa-lg"></i> Text Messages <span ng-if="unreadSms() > 0"> ({{unreadSms()}}) </span> </a> </li> <li ng-class="{lnkActivo : activePath===\'/messenger\'}"> <a href ng-click="showMessengerModal()"> <img src="/images/icons/fbmsgicon.fd6d1eb4.png" class="messengericon"> Facebook Messenger </a> </li> <li ng-class="{lnkActivo : activePath===\'/callhistory\'}"> <a href="callhistory"> <i class="fa fa-history fa-lg"></i> Call History </a> </li> <li ng-class="{lnkActivo : activePath===\'/settings\'}"> <a href="settings"> <i class="fa fa-cog fa-lg"></i> Settings </a> </li> </ul> <div class="topnavhamb" ng-controller="ctrlNavBar" ng-click="openNav()"> <i class="fa fa-bars" aria-hidden="true"></i> <div class="menu-text">MENU</div> <div class="menu" ng-if="menuOpen"> <ul class="menu-nav"> <li ng-class="{lnkActivo : activePath===\'/chatplus\'}"> <a href="chatplus"> <i class="fa fa-wechat fa-lg"></i> Chat Plus <span ng-bind-html="showChatTotalMentions()"></span> </a> </li> <li ng-class="{lnkActivo : activePath===\'/sms\'}"> <a href="sms"> <i class="fa fa-paper-plane fa-lg"></i> Text Messages <span ng-if="unreadSms() > 0"> ({{unreadSms()}}) </span> </a> </li> <li ng-class="{lnkActivo : activePath===\'/messenger\'}"> <a href ng-click="showMessengerModal()"> <img src="/images/icons/fbmsgicon.fd6d1eb4.png" class="messengericon"> Facebook Messenger </a> </li> <li ng-class="{lnkActivo : activePath===\'/callhistory\'}"> <a href="callhistory"> <i class="fa fa-history fa-lg"></i> Call History </a> </li> <li ng-class="{lnkActivo : activePath===\'/settings\'}"> <a href="settings"> <i class="fa fa-cog fa-lg"></i> Settings </a> </li> </ul> </div> </div> </div> <div id="element2"> <!--<div id="element2" ng-controller="ctrlSupport">--> <div class="support-actions-container"> <!--<div class="cls-logo-tkg"></div>--> <div class="support-actions-body"> <md-button class="support-btn feedback-btn" ng-click="triggerFeedbackEmail()" uib-tooltip="Leave feedback about the pilot version of Bridge" tooltip-placement="left"> <md-icon>email</md-icon> <p>Bridge <br> Feedback</p> </md-button> <md-button class="support-btn talk-support-btn" ng-click="callSupport()" uib-tooltip="Talk to our support team" tooltip-placement="bottom"> <md-icon>phone_in_talk</md-icon> <p>Talk To <br> Support</p> </md-button> <md-button class="support-btn chat-support-btn" ng-click="toggleChat()" uib-tooltip="Chat with our support team" tooltip-placement="bottom"> <md-icon>chat</md-icon> <p>Chat With <br> Support</p> </md-button> </div> </div> </div> </div> </header>'),a.put("views/leftbar.html",'<div class="vertical-flex-container"> <div class="left-column-user"> <div class="left-container"> <div class="logo-container"> <a href="main"> <img src="/images/logo.e544bb64.png"> </a> </div> <div class="bottom-controls"> <div class="call-btns"> <div ng-click="gotoMissedCalls()" class="missed-call-btn" tooltip-placement="bottom-left" uib-tooltip="You have missed {{missedCalls}} calls. Click to View."> <div class="missed-call-img-container"> <img src="/images/icons/miscall-icon.3eaf2399.png" class="missed-call-img"> </div> <div class="badge-container"> <span class="badge">{{missedCalls}}</span> </div> </div> <div ng-click="goToOption(\'visualvoicemail\')" class="voicemail-btn" tooltip-placement="bottom-left" uib-tooltip="You have {{unreadVoicemails}} unread voicemail(s). Click to View."> <div class="voicemail-img-container"> <img src="/images/icons/record-icon.068506d9.png" class="voicemail-img"> </div> <div class="badge-container"> <span class="badge">{{unreadVoicemails}}</span> </div> </div> </div> </div> </div> <div class="right-container"> <div class="did-container"> {{user.symphony_user_settings.sms_phone_number | tel}} </div> <div class="profile-avatar-container1"> <a style="text-decoration: none; cursor: pointer" ng-click="goToMyProfile()"> <img ng-if="user.profile_image" src="{{pathImgProfile + user.profile_image}}" class="profile-avatar" alt=""> <div class="profile-avatar-initials" style="background-color: {{ user.profile_color ? user.profile_color : \'\' }}" ng-show="!user.profile_image"> {{user.contact_name_given.substring(0,1)}} {{user.contact_name_family.substring(0,1)}} </div> </a> </div> <div class="bottom-controls"> <div class="dropdown"> <button class="btn btn-default btn-sm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="{{userStatusIconClass}} userstatusicon"></i> <span class="top-profile-text"> {{user.user_status}} </span> <i class="fa fa-caret-down fa-lg" style="margin-left: 10px"> </i> </button> <ul class="dropdown-menu profilestatus" role="menu"> <li ng-click="changeUserStatus(\'Available\')"> <i class="fa fa-check-circle fa-lg" style="color: #0c6c2c"></i> Available </li> <li ng-click="changeUserStatus(\'Away\')"> <i class="fa fa-clock-o fa-lg" style="color: #e38500"></i> Away </li> <li ng-click="changeUserStatus(\'Do Not Disturb\')"> <i class="fa fa-minus-circle fa-lg" style="color: #e30400"></i> Do Not Disturb </li> <li> <i class="fa fa-volume-control-phone fa-lg" style="color: #e30400"></i> Busy on call </li> <li ng-repeat="RSTstatus in domainsStatus" ng-if="RSTstatus.status_active" ng-click="changeUserStatus(RSTstatus.status_name)"> <i class="fa fa-lg {{RSTstatus.status_icon}}"></i> {{RSTstatus.status_name}} </li> <li class="divider"></li> <li> <a href="logout"> <i class="fa fa-sign-out fa-lg cls-color-blue-tkg"></i> Log Out </a> </li> </ul> </div> </div> <div class="timer" ng-if="showTimer"> <i class="mdi mdi-timetable" style="color: {{start_timer ? \'darkgreen\' : \'red\'}}"></i><span>Timer {{start_timer ? "On" : "Off"}}</span> </div> </div> </div> <!-- **********   CALLS   ********** --> <div class="left-column-calling" ng-controller="ChatPlusSideCtrl"> <div class="call-box-container"> <call-box></call-box> </div> </div> <chat-channels-list class="left-column-chat" ng-show="showChatContacts && !chatDisabled"> </chat-channels-list> <div class="left-column-contacts" ng-if="showContacts" ng-controller="ContactDetailsCtrl"> <div class="input-group filter-contact-group"> <input class="form-control filter-contact" type="text" ng-model="searchText" placeholder="Filter contacts"> <span class="input-group-addon"> <a class="fa fa-sitemap" ng-click="showManageGroups()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.leftbar.manage_groups}}"> </a> <!--Originally it had ng-class="{opcSelFilter : btnFiltAct===\'1\'}" --> <a class="fa fa-star" ng-class="{\'red\' : btnFiltAct===\'1\'}" ng-click="filterOpcSelected(\'1\')" tooltip-placement="bottom-right" uib-tooltip="{{btnFiltAct===\'1\' ? tips.leftbar.show_all_contacts : tips.leftbar.show_favorite_contacts}}"> </a> <a class="fa fa-plus" ng-class="{opcSelFilter : btnFiltAct===\'3\'}" href="" ng-click="showAddContactForm()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.leftbar.add_contact}}"> </a> </span> </div> <p class="contact-loading-message" ng-if="contactLoadInfo.loading"> Loaded {{contacts.length}} of {{contactLoadInfo.totalContacts}} total contacts </p> <div class="list-contacts" infinite-scroll> <div class="list-group contactsside"> <!-- <div class="fa-spinner-container" --> <!-- ng-if="!showContactsList"> --> <!-- <i class="fa fa-spinner fa-4x fa-spin"></i> --> <!-- </div> --> <contact-list contacts="group.contacts" contact-groups="contactGroups" contact-type="\'group\'" search-text="searchText" filter-for-groups="filterForGroups" contact-list-info="contactListInfo" limit="limit"> </contact-list> <contact-list contacts="contacts" contact-type="\'user\'" search-text="searchText" filter-for-groups="filterForGroups" contact-list-info="contactListInfo" limit="limit"> </contact-list> <contact-list contacts="contacts" contact-type="\'nonUser\'" search-text="searchText" filter-for-groups="filterForGroups" contact-list-info="contactListInfo" limit="limit"> </contact-list> <div id="contacts-bottom">&nbsp;</div> <script type="text/ng-template" id="warning-dialog.html"><div class="modal-header">\n                        <h3>You\'re Idle. Click or Move your mouse to stay online!</h3>\n                    </div>\n                    <div idle-countdown="countdown" ng-init="countdown=30" class="modal-body">\n                        <uib-progressbar max="30" value="30" animate="false" class="progress-striped active">You\'ll be logged out in {{countdown}} second(s).</uib-progressbar>\n                    </div></script> <script type="text/ng-template" id="timedout-dialog.html"><div class="modal-header">\n                        <h3>You\'ve Timed Out!</h3>\n                    </div>\n                    <div class="modal-body">\n                        <p>\n                            You were idle too long and for security you have been logged out.\n                        </p>\n                    </div></script> </div> </div> </div> <div id="ModalContainer" ng-controller="ModalCtrl"> </div> </div>'),
a.put("views/login.html",'<div class="cls-cont-login-page"> <div class="header cls-logo-tkg-login-page"> <img src="images/Kotter-logo.73506dca.jpg"> </div> <div class="container login-container"> <div class="row"> <div ng-class="{\'col-md-7 cls-welcome-msg\' : currentState.substring(0,6)!==\'signUp\', \'col-md-6 cls-welcome-msg-small\' : currentState.substring(0,6)===\'signUp\'}"> <div class="panel panel-default"> <div class="panel-body"> <h1>Welcome to Bridge, powered by <b>The Kotter Group</b> </h1> </div> </div> <div class="bridge-logo"> <img src="/images/logo.e544bb64.png"> </div> </div> <div class="cls-form-login" ng-class="{\'col-md-5\' : currentState.substring(0,6)!==\'signUp\', \'col-md-6\' : currentState.substring(0,6)===\'signUp\'}"> <div ng-if="currentState === \'loginForm\'"> <div class="panel panel-primary"> <div class="panel-body"> <div ng-if="logoutMessage && logoutMessage !== \'\'" uib-alert ng-class="\'alert-info\'" dismiss-on-timeout="5000" close="closeLogout()" class="logoutmsg"> {{logoutMessage}} </div> <h4>Please Login</h4> <form ng-show="!loginSpinner" class="login-container" ng-submit="!loginForm.$invalid && loginUser(login)" name="loginForm" method="post"> <md-input-container> <input type="text" ng-model="login.email" placeholder="email" required name="email" aria-describedby="sizing-addon1"> <div ng-messages="loginForm.email.$error"> <div ng-message="required">This is required!</div> <div ng-message="email">Must be a valid email!</div> </div> </md-input-container> <md-input-container> <input type="password" placeholder="password" required name="password" ng-model="login.password" aria-describedby="sizing-addon1"> <div ng-messages="loginForm.password.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-button type="submit" class="md-primary md-raised login-login-btn"> Login </md-button> <br> </form> <div class="login-spinner" ng-if="loginSpinner"> <i class="fa fa-spinner fa-4x fa-spin"></i> </div> <div ng-show="showLogout" class="alert alert-info"> <strong>You have Logged Out</strong> </div> <div class="row"> <div class="col-lg-6"> <md-button class="md-button md-secondary login-secondary" ng-click="transition(\'forgotPassword\')" style="width: 100% !important"> Forgot your password? </md-button> </div> <div class="col-lg-6"> <md-button class="md-button md-secondary login-secondary" ng-click="transition(\'signUpStep1\')" style="width: 100% !important"> Sign up now </md-button> </div> </div> </div> </div> </div> <div ng-if="currentState === \'forgotPassword\'"> <div class="panel panel-primary"> <div class="panel-body"> <h4>Reset Your Password</h4> <form ng-submit="!forgot.$invalid && forgotPassword(forgotemail)" name="forgot" method="post"> <md-input-container id="login-forgot-email-input"> <input type="text" ng-model="forgotemail" required name="forgotemail" placeholder="email"> <div ng-messages="forgot.forgotemail.$error"> <div ng-message="required">This is required!</div> <div ng-message="email">Must be a valid email!</div> </div> </md-input-container> <md-button type="submit" ng-disabled="forgot.$invalid" class="md-primary md-raised login-forgot-btn"> Submit Request </md-button> <br> </form> <div> <md-button class="md-button md-secondary" ng-click="transition(\'loginForm\')"> Ready to login? </md-button> </div> </div> </div> </div> <div ng-if="currentState === \'signUpStep1\'" class="signup-form"> <div class="panel panel-primary"> <div class="panel-body"> <h4>Create Your Agency\'s Account</h4> <!-- <p>This form will create a Bridge account for your agency. Once you have logged in, you may set up individual users.</p> --> <p>Step 1 of 2: Create agency and first admin user</p> <p class="processing-box" ng-show="processingSignup"> <i class="fa fa-spinner fa-spin" style="font-size: 50px"> </i> </p> <div ng-show="!processingSignup"> <form class="signup" name="SignupStep1" ng-submit="SignupStep1.$valid && submitStep1(signup)" novalidate> <md-input-container> <input type="text" ng-model="signup.txtNameGiven" placeholder="first name" required name="firstName" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep1.firstName.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="signup.txtNameFamily" placeholder="last name" required name="lastName" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep1.lastName.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="email" ng-model="signup.txtEmail" required name="emailAddress" placeholder="email address" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep1.emailAddress.$error"> <div ng-message="required">This is required!</div> <div ng-message="email">Must be a valid email!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="signup.txtCompany" required name="company" placeholder="company name" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep1.company.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="tel" ng-model="signup.txtMobile" phone-input required name="phoneNumber" minlength="10" placeholder="phone number" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep1.phoneNumber.$error"> <div ng-message="required">This is required!</div> <div ng-message="minlength">A phone number must be 10 numbers!</div> </div> </md-input-container> <md-input-container> <input type="zipcode" ng-model="signup.zipcode" required name="zipCode" minlength="5" placeholder="zipcode"> <div ng-messages="SignupStep1.zipCode.$error"> <div ng-message="minlength">Zip code must be 5 numbers!</div> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="signup.groupcode" placeholder="group code" tooltip-placement="top" uib-tooltip="{{::tips.signup.groupcode}}"> </md-input-container> <br> <md-button class="md-primary md-raised login-signup-btn" ng-disabled="SignupStep1.$invalid" type="submit"> Next </md-button> </form> </div> <div ng-hide="hidesignupForm"> <md-button class="md-button md-secondary" ng-click="transition(\'loginForm\')"> Ready to login? </md-button> </div> </div> </div> </div> <div ng-if="currentState === \'signUpStep2\'" class="signup-form" ng-style="signUpStep2Style"> <div class="panel panel-primary"> <div class="panel-body"> <h4>Create Your Agency\'s Account</h4> <p>Step 2 of 2: Payment info</p> <div class="processing-box" ng-if="processingSignupStep2"> <p>We are working hard to set up your agency and first Bridge user. <br>This may take a minute</p> <i class="fa fa-spinner fa-spin" style="font-size: 50px"> </i> </div> <div ng-show="!processingSignupStep2 && !showMessage"> <p class="pricing">You will be paying <span class="main-price">${{lead.code.per_seat}}</span> plus ${{totalFees.toFixed(2)}} <a href ng-click="showTaxes()">taxes and fees</a> for the first full month of Bridge service for one user. You may add or remove users at any time from within Bridge, and your monthly bill will be pro-rated accordingly. Unless you cancel, this credit card/checking account will be charged on the 1st of every month. </p> <p>Enjoy our 30-day money-back guarantee! 100% refund of any payments made. No questions asked.</p> <form class="signup" stripe-form="handleStripe" name="SignupStep2" novalidate> <md-input-container class="card-num"> <input type="text" ng-model="number" placeholder="card number" name="number" required payments-validate="card" payments-format="card" payments-type-model="type" ng-class="SignupStep2.number.$card.type" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.number.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container class="card-exp"> <input type="text" class="input-block-level" ng-model="expiry" placeholder="card expiry mm yy" payments-validate="expiry" payments-format="expiry" name="expiry" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.expiry.$error"> <div ng-message="required">This is required!</div> <div ng-message="number">Only numbers please!</div> </div> </md-input-container> <md-input-container class="card-cvc"> <input type="text" ng-model="cvc" placeholder="cvc code" payments-validate="cvc" payments-format="cvc" name="cvc" required payments-type-model="type"> <div ng-messages="SignupStep2.cvc.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="name" placeholder="name on card" name="billingName" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.billingName.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="billing.address1" ng-change="addressLine1 = billing.address1" placeholder="billing address" name="billingAddress" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.billingAddress.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="billing.community" ng-change="addressCity = billing.community" placeholder="billing city" name="billingCity" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.billingCity.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container class="signup-select"> <md-select ng-model="billing.state" ng-change="addressState = billing.state" name="billingState" required placeholder="billing state"> <md-option ng-repeat="state in billingStates" ng-value="state.state_abbr"> {{state.state_name}} </md-option> </md-select> <div ng-messages="SignupStep2.billingState.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="billing.postalcode" ng-change="addressZip = billing.postalcode" placeholder="billing zip" name="billingZip" minlength="5" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.billingZip.$error"> <div ng-message="minlength">Zip code must be 5 numbers!</div> <div ng-message="required">This is required!</div> </div> </md-input-container> <input style="display: none" ng-model="addressLine1" type="text"> <input style="display: none" ng-model="addressState" type="text"> <input style="display: none" ng-model="addressZip" type="text"> <input style="display: none" ng-model="addressCity" type="text"> <p>Primary physical address for E911 service: <i class="fa fa-question-circle-o" tooltip-placement="top" uib-tooltip="{{::tips.signup.e911service}}"></i></p> <md-checkbox ng-model="e911Address.billingSameAsCompanyAddress"> Company Address is the same as Billing Address </md-checkbox> <br> <div ng-if="!e911Address.billingSameAsCompanyAddress"> <md-input-container> <input type="text" ng-model="e911Address.address1" placeholder="address" name="e911Address" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.e911Address.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="e911Address.community" placeholder="city" name="e911City" required aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.e911City.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container class="signup-select"> <md-select ng-model="e911Address.state" name="e911State" required placeholder="state"> <md-option ng-repeat="state in billingStates" ng-value="state.state_abbr"> {{state.state_name}} </md-option> </md-select> <div ng-messages="SignupStep2.e911State.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" ng-model="e911Address.postalcode" name="e911Zip" required placeholder="zipcode" aria-describedby="sizing-addon1"> <div ng-messages="SignupStep2.e911Zip.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> </div> <p>By clicking "Pay Now and Sign Up" below, you agree to the <a href ng-click="showTOS()">terms of service</a> and authorize The Kotter Group to charge your credit card the amount of ${{totalCharge.toFixed(2)}}.</p> <p>You may cancel at any time by emailing us at <a href="mailto:support@kotter.net">support@kotter.net</a>, calling us at 770-717-1777, or clicking Talk to Support or Chat with Support from within Bridge. </p> <md-button class="md-button md-secondary" style="float: left !important" ng-click="transition(\'signUpStep1\')"> Back </md-button> <md-button class="md-primary md-raised login-signup-btn" ng-disabled="SignupStep2.$invalid" type="submit"> Pay Now and Sign Up </md-button> </form> </div> <div ng-if="showMessage"> <div ng-if="logoutMessage && logoutMessage !== \'\'" uib-alert ng-class="\'alert-info\'" dismiss-on-timeout="5000" close="closeLogout()" class="logoutmsg"> {{logoutMessage}} </div> </div> <div ng-hide="hidesignupForm"> </div> </div> </div> </div> <div ng-if="currentState === \'confirmPass\'"> <div class="panel panel-primary"> <div class="panel-body"> <h4> <span ng-show="showConfirm"> Confirm Your Account: </span> Reset Your Password </h4> <div ng-show="showConfirm" class="alert alert-info"> <strong>Welcome: </strong> Please set your password below for {{resetEmail}} to confirm your account. </div> <div ng-show="showResetPassword" class="alert alert-info"> Please set your password below for {{resetEmail}}. </div> <form name="passwordForm"> <div class="input-group input-group-lg"> <span class="input-group-addon" id="sizing-addon1"> <i class="fa fa-key"></i> </span> <input type="password" name="password" class="form-control" ng-model="info.password" md-minlength="8" ng-minlength="8" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" placeholder="password" ng-maxlength="20" aria-describedby="sizing-addon1"> </div> <div class="errormessage" ng-messages="passwordForm.password.$error"> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> <div class="input-group input-group-lg"> <span class="input-group-addon" id="sizing-addon1"> <i class="fa fa-key"></i> </span> <input type="password" name="passwordConformation" class="form-control" ng-model="info.password_confirmation" md-minlength="8" ng-minlength="8" ng-maxlength="20" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" placeholder="confirm your password" aria-describedby="sizing-addon1"> </div> <div class="errormessage" ng-messages="passwordForm.passwordConformation.$error"> <small ng-show="passwordForm.passwordConfirmation.$dirty && info.password != info.password_confirmation"> Password confirmation does not match. </small> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> <button ng-click="resetPassword(info)" class="btn btn-primary btn-block"> Reset </button> <br> </form> <div> <button class="btn btn-default btn-small" ng-show="showForgotButton" ng-click="transition(\'forgotPassword\')"> Get New Token </button> <button class="btn btn-default btn-small" ng-click="transition(\'loginForm\')"> Ready to login? </button> </div> </div> </div> </div> </div> </div> </div> </div> <script type="text/ng-template" id="generaldialog.tmpl.html"><md-dialog ng-class="dialogClass" aria-label="{{title}}">\n        <form ng-cloak>\n            <md-toolbar class="modal-window">\n                <div class="md-toolbar-tools">\n                    <h2>{{title}}</h2>\n                    <span flex></span>\n                    <md-button class="md-icon-button" ng-click="cancel()">\n                        <i class="fa fa-times" style="font-size: 20px;"></i>\n                    </md-button>\n                </div>\n            </md-toolbar>\n        \n            <md-dialog-content>\n                <div class="md-dialog-content">\n                    <h2 ng-if="subTitle">{{subTitle}}</h2>\n                    <div ng-bind-html="body"></div>\n                </div>\n            </md-dialog-content>\n        \n            <md-dialog-actions layout="row">\n                <span flex></span>\n                <md-button ng-click="cancel()">\n                Got it\n                </md-button>\n            </md-dialog-actions>\n        </form>\n    </md-dialog></script> <div id="tos" ng-show="1==2"> <h3>Terms of Service and License Agreement</h3> <p>&nbsp;</p> <p><strong>These terms (collectively, Agreement) are a binding contract</strong> between you and your end users on the one hand (you or Customer), and The Kotter Group, LLC (Kotter), on the other hand, and are for the Kotter Group Bridge suite of products and services, which may include one or more of the following: telephone dialing platforms and solutions, computer software, telephone and other equipment, certain telecommunications services, associated hosted online services and access to same, media, printed materials, and online or electronic documentation (collectively, the Service). This Agreement also covers any future orders subsequent to your initial order. By agreeing to purchase the Service, you acknowledge and represent that you have read, understand, have the legal capacity to, and hereby agree to be legally bound by this Agreement. You represent that you have consulted with legal counsel about this Agreement, or at least had the time and opportunity, yet chose not to.</p> <ol> <li><strong>TERM</strong></li> </ol> <p><strong>1.1</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subject to the termination provisions herein, the term of this Agreement is perpetual month-to-month. Customer agrees to purchase the Service until terminated by either Customer or Kotter, payable in accordance with the payment schedule in the Order or Estimate (that certain document to which Customer has agreed and accepted, either by electronic or physical signature, electronic approval (online click through) or other means mutually agreed to, and which contains a detailed description of Customers ordered Service).</p> <p><strong>1.2</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Customer may terminate the Service at any time by 1) providing thirty (30) days written notice prior to the desired termination date to <a href="mailto:accounting@kotter.net" target="_blank"><strong>accounting@kotter.net</strong></a>, and 2) paying the full amount of the monthly recurring charges for the terminated Service for the month of the effective termination (regardless of whether the termination date is mid-billing cycle (such charges shall be charged to your Credit Card).</p> <ol start="2"> <li><strong>911 &amp; SERVICE LIMITATIONS</strong></li> </ol> <p>You are responsible for compliance with e911 services. Depending on your specific installation and configuration, may not send and receive e911 calls reliably, and may not pass correct location information to emergency services. It is the sole responsibility of the customer and user to ensure compliance with all local codes, and to inform users of any limitations or issues regarding 911 use. Kotter is not liable for any resulting damages related to 911 use.</p> <ol start="3"> <li><strong>BILLING &amp; PAYMENTS</strong></li> </ol> <p><strong>3.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Orders.</strong>&nbsp;Customers signature (electronic or physical) of an Estimate is a non-cancellable Order by Customer for Service.&nbsp;<strong>Orders are not binding until accepted by Kotter, in its sole discretion.</strong>&nbsp;All Orders and/or shipments shall be FOB Kotter. Except in the case of a breach, as provided herein, once an Order is accepted by Kotter, it may be changed or cancelled ONLY with the written consent of Kotter.</p> <p><strong>3.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Payment by Credit Card Only.</strong>&nbsp;All Orders require a valid credit card number (Credit Card). Customer authorizes Kotter to charge the Credit Card for all fees and charges arising from Customers use of the Service. Customer agrees to notify Kotter of any change to the Credit Card information including, but not limited to, changes in account number, expiration date or billing address. Kotter shall not be responsible for any damages resulting from cancellation of Service arising from unreported changes to Credit Card information, credit limitation or other inability to charge the Credit Card.</p> <p><strong>3.3</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Customer acknowledges and agrees that the Service is provided AS IS, as described herein. Credit allowances for interruption of Service is not required or warranted and shall be provided at the sole discretion of Kotter.</strong></p> <p><strong>3.4</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; From time to time in its sole discretion, Kotter may offer promotions or discounts of activation or other fees. Customer shall not be entitled to a subsequent credit for such promotions or discounts, if not available and/or issued at the time of purchase.</p> <p><strong>3.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Billing.</strong>&nbsp;Kotter will bill all fees and charges (described below) to Customers Credit Card</p> <p><strong>3.5.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Monthly Recurring Fees.</strong>&nbsp;Monthly service fees including any associated taxes and fees are paid in advance of each months service.</p> <p><strong>3.5.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Non-Recurring Charges.</strong>&nbsp;Toll charges (as defined in section 3.9), and any other applicable charges which may include, but may not be limited to, usage charges, fax charges, activation fees, shipping charges, disconnection fees, equipment charges, and any other applicable charges are billed subsequent to the end of each months service. The Credit Card will be charged prior to the end of the month if at any time Customers cumulative Non-Recurring Charges exceed two hundred fifty dollars ($250.00). The Credit Card will be charged for any additional Non-Recurring Charges at the end of the month.</p> <p><strong>3.5.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add-on Orders.</strong>&nbsp;Any additional Orders, software or licenses added after the commencement of Service will be billed pro-rata for the initial month.</p> <p><strong>3.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Non-Payment</strong>. If payment cannot be charged to the Credit Card for any reason then, without any notice to Customer, Kotter reserves the right to either suspend or terminate Customers access to and/or use of the Service and to terminate this Agreement. Delinquent payments are subject to a late-payment charge of the greater of 1.5% of the outstanding balance, or the maximum amount allowed by law, whichever is higher. Kotter shall not be responsible for any third party costs incurred by Customer for exceeding credit limit, insufficient funds or other reasons. An activation fee may be imposed prior to reinstatement of any Service.</p> <p><strong>3.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Taxes and Fees</strong></p> <p><strong>3.7.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Taxes.</strong>&nbsp;Amounts contained in the Estimate do not include any customs duties, sales, use, value added, excise, federal, state, local, public utility, or other similar taxes. All such taxes shall be paid by Customer and will be added to any amounts otherwise charged to Customer, and Customer will be liable for and will pay in full all such amounts.</p> <p><strong>3.7.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; e911.</strong>&nbsp;All Customers are required to subscribe to Kotters e911 service and will be subject to a monthly e911 service charge. The monthly e911 service fee shall be included in the applicable business plan charges for the associated line and Customer shall reimburse Kotter for the direct costs it incurs in providing e911 service, including state, county and municipal e911 surcharges, e911 automatic location information (ALI) database storage, line information database and caller id (LIDB/CNAM) expenses, and any other taxes or surcharges directly or indirectly associated with the provision of e911 service. Kotter reserves the right to adjust the level of charges associated with the provision of e911 service to reflect increases or decreases in the costs Kotter incurs. Other fees may apply for usage of e911 service as outlined herein.</p> <p><strong>3.7.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Regulatory Recovery Fee.</strong>&nbsp;A Regulatory Recovery Fee of 5% of all monthly recurring charges will be charged monthly to offset costs incurred by Kotter in complying with inquiries and obligations imposed by federal, state and municipal regulatory bodies/governments and the related legal and billing expenses. The Regulatory Recovery Fee will apply to every phone number assigned, including toll free and virtual numbers.</p> <p><strong>3.7.4</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>Onsite Installation and Training.</strong>&nbsp;If onsite installation and/or training is purchased (see Order or Estimate), Customer shall also be responsible for reasonable and customary travel and travel-related expenses (T&amp;E costs). T&amp;E costs are not included in the onsite installation or onsite training fee and shall be charged to the Credit Card (or invoiced) upon completion of installation and/or training.</p> <p><strong>3.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Toll Charges.</strong>&nbsp;Every call to or from Equipment using the Service that originates or terminates in the Public Switched Telephone Network (PSTN), including other VoIP networks and inbound toll free number calls to Customers toll free number (if applicable), is considered a Toll Call. The duration of each call is to be calculated in one-minute increments and rounded up to the nearest one-minute increment for any fraction of minutes used. If the computed charge for a call includes a fraction of a cent, the fraction is rounded up to the nearest whole cent. Subject to the provisions below.&nbsp; The Unlimited calling plan only includes calls made within the United States. As noted therein, certain types of calls, including but not limited to some mobile phones and premium rate phones, will not be included in the unlimited calls program, and will be billed in accordance with these terms.</p> <p><strong>3.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; International rates.</strong>&nbsp;When Customer dials an international PSTN phone number or mobile phone number, charges may apply regardless of whether the party on the other line answers the call. Calls made by a Customer to an international mobile or premium rate international telephone number may result in higher toll charges. International rates vary by destination country, city, and band, and are subject to change by Kotter from time-to-time without prior notice. You will be charged for all calls to any international destination, excluding inclusive countries, in full-minute increments at Kotters then-current rate as posted at www.kotter.net. Note that certain limitations apply to Customers ability to place calls to certain international destinations and types of phones, including but not limited to, satellite phones. Contact&nbsp;<a href="mailto:accounting@kotter.net" target="_blank"><strong>accounting@kotter.net</strong></a> for details or to make arrangements to pre-pay for such services.</p> <p><strong>3.11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Price Changes and other Modifications.</strong>&nbsp;Changes to charges, fees or taxes for the Service (other than international calling rates which are updated from time to time at&nbsp;<a href="https://kotter.net/international-rates" target="_blank"><strong>https://kotter.net/international-rates</strong></a>) are effective after fifteen (15) days notice has been sent to Customer via email to the authorized email address for Customers account. Kotter may decrease prices without providing advance notice.</p> <p><strong>3.12</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Customer must dispute mistakes in charges, fees or taxes in writing within thirty (30) days of the date of the charge, fee or tax by Kotter. After thirty (30) days from the date of the charge, fee or tax, Customer waives any objection and further recourse. Written statements disputing charges must be sent to:&nbsp;<a href="mailto:accounting@kotter.net" target="_blank"><strong>accounting@kotter.net</strong></a>&nbsp;. The existence of a validly filed dispute shall in no way relieve Customer of its obligation to pay all amounts billed by Kotter, including any disputed amounts.</p> <ol start="4"> <li><strong>REASONABLE USE, PROHIBITED USE, AND FRAUD</strong></li> </ol> <p><strong>4.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Reasonable Business Use.</strong>&nbsp;Any of Kotters service plans that offer unlimited minutes of PSTN calls (Unlimited Plans) are for reasonable business use of Customer only. Activities such as: autodialing, continuous or extensive call forwarding, use of virtual extensions for regular business use, continuous connectivity, fax broadcast, fax blasting, unlawful or unauthorized telemarketing, junk faxing, fax spamming, calling/faxing any person (through the use of distribution lists or otherwise) who has not given specific permission to be included in such a process,&nbsp;<u>AND</u>&nbsp;where Customers average outbound minutes per user (defined as the total number of outbound minutes used by Customer divided by the number seats/licenses purchased by Customer) exceed 1500 minutes a month, are NOT Reasonable Business Use as intended for the Service If Kotter determines that Customer use of the Service is not within the scope of Reasonable Business Use, Kotter reserves the right to invoice Customer for any additional users or usage (including the right to charge Customers Credit Card at the then current per-minute rate and/or to terminate or modify the terms of Customers Service.</p> <p><strong>4.2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Prohibited Use.</strong>&nbsp;Any use of the Service or any other action that causes a disruption in the network integrity of Kotter or its vendors, whether directly or indirectly, is strictly prohibited and may result in termination of the Service at the sole discretion of Kotter. Customer understands that neither Kotter nor its vendors are responsible for the content of the transmissions that may pass through the Internet and/or the Service. Customer agrees that it will NOT use the Service in ways that violate any law or regulation (including but not limited to laws prohibiting transmission of unsolicited fax advertisements), infringe the rights of others, or interfere with the users, services, or equipment of the network. Customer agrees and represents that it is purchasing the Service for its own internal use, and shall not resell, transfer or make a charge for the Service without the advance written permission of Kotter. Customer shall not transmit through the Service any unlawful, harassing, libelous, abusive, threatening, harmful, vulgar, obscene or otherwise objectionable material of any kind or nature. Customer further agrees not to transmit any material that encourages conduct that could constitute a criminal offense, give rise to civil liability or otherwise violate any applicable local, state, national or international law or regulation. Any use found to be inconsistent with this restriction will result in termination of the Service.</p> <p>4.21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Compliance with Law.</strong>&nbsp; Customer is required to use the Service in full compliance with all applicable laws and regulations, including without limitation, all state, federal and international: (a) Do-Not-Call (DNC) list prohibitions; (b) telemarketer licensing and bonding requirements; (c) consumer cancellation rights; (d) mandatory disclosures; (e) wireless calling restrictions; (f) restrictions on the use of automatic telephone dialing systems, pre-recorded messages, and soundboard technology; (g) internal opt-out rules; (h) intellectual property rights and restrictions; and (i) other product and industry specific rules and disclosures.&nbsp; By making any use of the Service, Customer expressly warrants to Kotter that Customer is and shall continue to act in full compliance with the law. All Kotter offers are void where prohibited by law. Customer has read, understands, and will comply with the FTCs Telemarketing Sales Rule (TSR), the Federal Communication Commissions (FCC) Telephone Consumer Protection Act (TCPA), and all other applicable laws and regulations. Customer has reviewed these rules with Customers own legal counsel to ensure that Customer understands and is fully compliant.&nbsp; Kotter does not assume responsibility for ensuring that Customers marketing campaigns meet applicable legal requirements. Customer shall defend, indemnify and hold Kotter harmless, if Customer is ever held guilty or liable for any violation of the law. Notwithstanding the foregoing, Customer agrees that Kotter has and is taking active steps to ensure the compliance of its customers, including by having Customer agree to these terms and otherwise. If Kotter discovers evidence that Customer has or may have violated the law, Kotter may, in its sole discretion, suspend or terminate the Customers use of the Service immediately.&nbsp; Customer agrees that Kotter may disclose information which relates to Customer in order to comply with a judicial order, governmental order or otherwise as required by law.</p> <p>4.22&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<strong>No Legal, Financial or Tax Advice Provided</strong>.&nbsp; No financial, legal, or tax advice or counsel is given, or shall be deemed to have been given by Kotter or its affiliates and contractors.</p> <p><strong>4.3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fraud:</strong>&nbsp;It is the express intention of the parties that Customer, and not Kotter, shall bear the risk of loss arising from any unauthorized or fraudulent usage of the Service. Kotter reserves the right, but is not required, to take any and all action it deems appropriate (including blocking access to particular calling numbers or geographic areas) to prevent or terminate any fraud or abuse in connection with the Service, or any use thereof, provided, however, that any such action shall be consistent with applicable federal and state laws, rules, and regulations and provided further that the failure to take any such action shall not limit Customers responsibility for all usage of the Service.</p> <ol start="5"> <li><strong>TELEPHONE NUMBER.</strong></li> </ol> <p><strong>5.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ownership.</strong>&nbsp;Any telephone number provided by Kotter to the Customer (Number) shall be leased and not sold. Kotter reserves the right to change, cancel or move the Number at its sole discretion. Where customer wishes to port in telephone number(s) for use with the Service, Customer should NOT cancel service with the current/previous service provider(s) until Kotter confirms to Customer that the numbers have been successfully ported to Kotter. Customer is responsible for the timely termination of all services with current/previous service provider and the settlement of any charges owed to their current/previous service provider. Additionally, Customer is responsible for the verification that the Number(s) provided to Customer meet the necessary requirements of Customer (i.e., such Number will be considered a local number to Customer in Customers area or such number is sufficiently different from a customer competitors number, etc.). Kotter will reasonably accommodate Customer with a particular number selection, prefix or sequence, as available and able to accommodate. Kotter accepts no responsibility or liability in the number ultimately issued or selected for the Service.</p> <p><strong>5.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Listing.</strong>&nbsp;Customers Number will likely NOT be listed in any local or regional telephone book unless Customer has taken independent steps to pay for telephone number or business advertisement. Numbers associated with the Service are not utilized with a traditional wire line/carrier. Kotter makes no warranty and accepts no responsibility or liability for Customers Number(s) NOT being listed in telephone books or other directories.</p> <p><strong>5.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Porting.</strong>&nbsp;Customers porting away of a telephone number does not extinguish Customers obligations and/or limitations under this Agreement, including the notice requirements contained herein.</p> <ol start="6"> <li><strong>TECHNICAL SUPPORT AND SCHEDULED MAINTENANCE</strong></li> </ol> <p><strong>6.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Technical Support.</strong>&nbsp;Kotter provides technical support to Customer via telephone and e-mail for the Service only and support for other applications and uses is not provided or implied. Items outside the scope of Technical Support include, but are not limited to: your router (if not purchased from Kotter), your cable modem or DSL modem, any other type of modem providing Internet service to your location, any network switches or hubs, electricity, any wall outlets or jacks for power or Internet connectivity, grounding cables not supplied with the Service, and any other environmental variable related to, but not required for, operation of the Service.</p> <p><strong>6.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scheduled Maintenance</strong>. From time-to-time, Kotter performs maintenance to update servers and software that are part of the Service. <strong>Kotter performs scheduled maintenance between 8:00 pm to 2:00 am PST/PDT every Tuesday and Thursday.</strong>&nbsp;&nbsp;Kotter may, in certain circumstances, need to perform maintenance at other times. At any time that Kotter is required to perform emergency or un-planned maintenance, Kotter will make reasonable efforts to notify the account contact that has been listed by the Customer under the Options tab of Customers online administrative control panel or via email to such Customer email address on file. However, at times, emergency or un-planned maintenance may have to be done before Kotter can give any notice to Customer.&nbsp;&nbsp; In any event, Kotter will not be liable (under this Agreement or any uptime service agreement) for service interruptions where maintenance is prudent to perform.</p> <ol start="7"> <li><strong>TERMINATION</strong></li> </ol> <p><strong>7.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; By Customer.</strong>&nbsp;Customer may terminate this Agreement in accordance with section 1 of this Agreement. Customer is responsible for all Termination Charges and Service related charges, including usage, until the termination date.</p> <p><strong>7.2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; By Kotter.</strong>&nbsp;Kotter reserves the right, at its sole discretion, to suspend, terminate or change the Service without advanced notice for any reason, including without limitation, misuse of the Service in any way, Customers breach of this Agreement, Customers failure to pay any sum due hereunder, suspected fraud or other activity by Customer that adversely affects the Service, Kotter, Kotters network or other Customers use of the Service. Kotter reserves the right to determine, at its sole discretion, what constitutes misuse of the Service and Customer agrees that Kotters determination is final and binding on Customer. Kotter may charge an activation fee to reactivate a terminated service. Additionally, in the event of termination due to a Customer breach, Customer shall remain fully obligated for the payment of all taxes, fees, and charges for Service ordered for the remainder of the billing cycle.</p> <p><strong>7.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Termination Charges.</strong>&nbsp;Upon Termination, in addition to any outstanding balance incurred or due on your account, Customer shall pay the full amount of the monthly recurring charges for the terminated Service for the month of the effective termination (regardless of whether the termination date is mid-billing cycle), in addition to any additional charges incurred under this Agreement. You agree that Kotter may charge such unpaid balance to the Credit Card.</p> <p><strong>7.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Liability after Termination.</strong>&nbsp;Termination or expiration of this Agreement will not extinguish Customers obligations or liability arising prior to such termination or expiration. Notwithstanding, and after the effective date of any termination, Kotter shall not be liable to Customer for any obligations under this Agreement, including continued provision of Service.</p> <ol start="8"> <li><strong>INDEMNIFICATION</strong></li> </ol> <p><strong>8.1</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>INDEMNITY BY CUSTOMER.</strong>&nbsp;Customer agrees to defend, indemnify, release and hold harmless, Kotter, along with all of its directors, officers, members, owners, employees, agents, affiliates, contractors, successors and assigns from and against any and all liabilities, damages, claims, suits, settlements, judgments, investigations, costs, and expenses (including reasonable attorneys fees and court costs) arising out of or relating to, directly or indirectly, this Agreement, Customers use of the Service, or Customers actual or alleged violation of the law, including without limitation any private or government T.C.P.A. or T.S.R. claim.</p> <p><strong>8.2</strong>.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>INDEMNITY BY KOTTER.</strong></p> <p><strong>8.2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong>Kotter shall defend Customer, and its officers, directors and employees, against any third party action alleging that the Service infringe(s) any valid U.S. patent or copyright, and Kotter shall pay all settlements entered into, and all costs (including reasonable attorneys fees) in connection with such action. If any Service, or parts thereof, becomes, or in Kotters opinion may become, the subject of an infringement claim, Kotter may, at its option, (a) procure for Customer the right to continue using such Product/Service, (b) modify or replace such Service with substantially equivalent non-infringing products, or (c) require the return of such Service and refund to Customer a pro-rata portion of the purchase price of such Service based on a three-year straight line amortization of the purchase price.</p> <p><strong>8.2.2</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Kotter shall have no indemnification obligations with respect to any third party action alleging that the use of any Service, or any part thereof, in combination with products not supplied by Kotter infringes any third party intellectual property right provided that the infringement is (a) due solely to the combination and use of such products together, if the use of the Service independent of any product not supplied by Kotter would not have given rise to the claim; or (b) Customer is advised by Kotter either directly or by means of Documentation, marketing or other published materials that the use of Kotter Service in tandem with such products represents a risk of infringement; and (c) Customer combines and uses such products with Kotters Service in contravention of Kotters disclaimer.</p> <p><strong>8.2.3</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Kotters indemnification obligations pursuant to this section shall be subject to the indemnified party (a) notifying the indemnifying party promptly in writing of such action, (b) giving the indemnifying party exclusive control and authority over the defense or settlement of such action, (c) not entering into any settlement or compromise of any such action without the indemnifying partys prior written consent and (d) providing all reasonable assistance to the indemnifying party (provided that the indemnifying party reimburses the indemnified party for its out-of-pocket expenses incurred in providing such assistance).</p> <ol> <li><strong>DISCLAIMERS AND LIMITATION OF LIABILITY</strong></li> </ol> <p><strong>9.1</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>DISCLAIMER OF WARRANTIES</strong>. EXCEPT AS EXPRESSLY SET FORTH HEREIN, KOTTER PROVIDES THE SERVICE AS IS AND WITH ALL FAULTS. KOTTER HEREBY EXPRESSLY DISCLAIMS, AND CUSTOMER HEREBY WAIVES, RELEASES AND RENOUNCES ALL OTHER REMEDIES, WARRANTIES, GUARANTEES, OBLIGATIONS, REPRESENTATIONS AND LIABILITIES, EXPRESS OR IMPLIED, ARISING IN FACT, LAW, EQUITY, CONTRACT, TORT, UNDER STATUTE, UNDER WARRANTY OR OTHERWISE, INCLUDING BUT NOT LIMITED TO: (A) ANY IMPLIED WARRANTY OR CONDITION OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE, (B) ANY IMPLIED WARRANTY OR CONDITION ARISING FROM COURSE OF PERFORMANCE, COURSE OF DEALING OR USAGE OR TRADE, (C) ANY OBLIGATION, LIABILITY RIGHT, CLAIM OR REMEDY IN TORT, WHETHER OR NOT ARISING FROM ACTIVE, PASSIVE OR IMPUTED NEGLIGENCE, CONTRIBUTORY NEGLIGENCE, VICARIOUS LIABILITY OR STRICT PRODUCTS LIABILITY OF KOTTER AND ITS OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, AND REPRESENTATIVES, AND (D) ANY OBLIGATION, LIABILITY OR RESPONSIBILITY FOR LOSS OF SERVICE OR DAMAGE TO ANY EQUIPMENT OR PART THEREOF, OR ANY SERVICE DELIVERED OR PROVIDED UNDER THIS AGREEMENT OR THE ORDER. FURTHER, KOTTER DOES NOT WARRANT THAT THE SERVICE WILL BE FREE OF BUGS, ERRORS, VIRUSES OR OTHER DEFECTS, OR THAT THE SERVICE WILL BE COMPATIBLE WITH CUSTOMERS EXISTING INTERNET CONNECTION, NETWORK, OR COMMUNICATIONS INFRASTRUCTURE OR ENVIRONMENT.</p> <p><strong>9.2</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>DISCLAIMER OF CERTAIN DAMAGES</strong>. IN NO EVENT WILL KOTTER OR ITS OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, REPRESENTATIVES, VENDORS AND CONTRACTORS BE LIABLE FOR THE COST OF COVER OR FOR ANY INCIDENTAL, INDIRECT, SPECIAL, AGGRAVATED, PUNITIVE, CONSEQUENTIAL OR SIMILAR DAMAGES OR LIABILITIES WHATSOEVER (INCLUDING, BUT NOT LIMITED TO LOSS OF DATA, INFORMATION, REVENUE, PROFIT OR BUSINESS) ARISING OUT OF OR RELATING TO THE USE OR INABILITY TO USE THE SERVICE OR OTHERWISE UNDER OR IN CONNECTION WITH THIS AGREEMENT, WHETHER ARISING IN FACT, LAW, EQUITY, CONTRACT, TORT (INCLUDING NEGLIGENCE AS DESCRIBED ABOVE), STRICT LIABILITY, UNDER STATUTE, UNDER WARRANTY OR OTHER THEORY EVEN IF KOTTER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p> <p><strong>9.3</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>LIMITATION OF LIABILITY</strong>. WITHOUT LIMITING THE FOREGOING, KOTTERS (INCLUDING ITS OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, AND REPRESENTATIVES) LIABILITY ARISING OUT OF OR RELATING TO THE SERVICE, THIS AGREEMENT IS LIMITED TO THE AMOUNT ACTUALLY PAID BY CUSTOMER FOR THE SERVICE REGARDLESS OF THE AMOUNT OF DAMAGES CUSTOMER MAY INCUR AND WHETHER SUCH DAMAGES ARISE IN FACT, LAW, EQUITY, CONTRACT, TORT (INCLUDING NEGLIGENCE AS DESCRIBED ABOVE), STRICT LIABILITY, UNDER STATUTE, UNDER WARRANTY OR OTHER THEORY. FURTHER, CUSTOMER ACKNOWLEDGES AND UNDERSTANDS THAT KOTTER (INCLUDING ITS OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, AND REPRESENTATIVES) WILL NOT BE LIABLE FOR ANY SERVICE OUTAGE, INCLUDING E911 SERVICE OUTAGE AND/OR INABILITY TO DIAL 911 OR ANY OTHER EMERGENCY TELEPHONE NUMBER USING THE SERVICE OR TO ACCESS AN EMERGENCY SERVICE OPERATOR DUE TO THE E911 DIALING CHARACTERISTICS AND LIMITATIONS SET FORTH IN THIS AGREEMENT.</p> <p><strong>9.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Disclaimer of Third Party Actions and Control (including your selected carrier).</strong>&nbsp;Kotter does not and cannot control the flow or quality of data to or from the network and other portions of the Internet. Such flow depends in large part on the performance of Internet services selected by you and provided or controlled by third parties. At times, the quality of carrier, and/or the actions or inactions caused by third parties can produce occurrences in which Customers connection to the Internet (or portions thereof) may be impaired or disrupted.</p> <p><strong>9.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Security and Fraud Prevention.</strong>&nbsp;Kotter maintains fraud and security monitoring protocols. However, Kotter cannot and does not warrant complete security and fraud prevention of its Service, including any server, equipment or the Kotter network. Accordingly, Kotter disclaims any and all liability resulting from or related to unauthorized intrusions or access and related security events.</p> <p><strong>9.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Disclaimer Regarding Voicemail Transcription.</strong>&nbsp;Kotter is not responsible for external communications received through Kotters voicemail transcription service. Kotter does not control the content and is therefore not responsible for any errors or omissions in any transcription content provided. Some voicemail messages may be mis-transcribed. This may occur because of poor dictation, noisy environment, poor phone connection or drop-outs, language, or simple transcription error. Accordingly, Kotter disclaims any and all liability resulting from or related to mis-transcription and you agree to hold Kotter harmless in such events.</p> <p><strong>9.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Disclaimer Regarding Call Recording.&nbsp;</strong>The call recording feature of the Service is provided to Customer as is with no proscription or restriction(s) of its use by Customer. Customer is responsible and liable for legal compliance of call recording, such as lawful use and requisite notice to employees, agents or third parties. Kotter shall not be liable to Customer or third party(s) involving call recording feature(s) of the Service, as selected by Customer. Accordingly, Kotter disclaims any and all liability, claims, or damages resulting from or related to call recording and you agree to hold Kotter harmless in such events.</p> <p>The foregoing disclaimers and limitation of liability will apply to the maximum extent permitted by applicable law. The laws of some states/jurisdictions do not allow the exclusion of implied warranties or the exclusion or limitation of certain damages. To the extent that those laws apply to this Agreement, the exclusions and limitations set forth above may not apply to you. For further Equipment warranty information, you may contact Kotter at 6900 North Dallas Parkway, Suite 250, Plano, Texas 75023. Any warranty DOES NOT apply to any beta software, software made available for testing or demonstration purposes, or any temporary software modules. All such software is provided AS IS without any warranty whatsoever.</p> <p><strong>INTELLECTUAL PROPERTY</strong></p> <p><strong>10.1</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; For the purpose of this section, the term Kotter Intellectual Property shall include but is not limited to any and all tangible and intangible: (i) rights associated with works of authorship throughout the world, including but not limited to copyrights, neighboring rights, moral rights, and mask works, and all derivative works thereof, (ii) trademark and trade name rights and similar rights, (iii) trade secret rights, (iv) patents, designs, algorithms and other industrial property rights, (v) all other intellectual and industrial property rights (of every kind and nature throughout the world and however designated) whether arising by operation of law, contract, license, or otherwise, and (vi) all registrations, initial applications, renewals, extensions, continuations, divisions or reissues thereof now or hereafter in force (including any rights in any of the foregoing), including software or programming delivered hereunder. Any software distributed by Kotter which is licensed under the GNU General Public License (GPL) is specifically excluded from this definition.</p> <p><strong>10.2</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; All Kotter Intellectual Property is solely for use by Customer as shipped, and may not be used as a replication master or otherwise copied without the written consent of Kotter. Use of software delivered in conjunction with the Service or as a separate item shall be subject to this Agreement and a separate license agreement that Customer shall be required to accept prior to delivery/installation. Customer acknowledges that all Kotter Intellectual Property furnished by Kotter hereunder and the contents thereof are the proprietary property of Kotter, and Customer has no right or interest therein except that Customer is granted a perpetual, non-exclusive, worldwide, non-transferable, and non-sublicenseable license to use the Service (including the applicable Kotter Intellectual Property) for Customers internal business purposes. This license shall terminate or expire in the same manner this Agreement may expire or be terminated, according to the applicable provisions. All Customer employees may exercise the license granted. No other license(s) are granted by implication, estoppel or otherwise. Customer agrees not to directly or indirectly reproduce, decompile or provide or otherwise make available to any third party any Kotter Intellectual Property. Customer shall be liable for all damages, including loss of anticipatory profits, incurred by Kotter as a result of such unauthorized use, copy or replication. The rights granted hereunder or use of Service (including the Equipment) does not convey any rights or ownership in Kotter patents, copyrights, trademarks, intellectual property or know-how.</p> <p><strong>11&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EXPORT CONTROLS.</strong>You acknowledge that the Service is subject to export controls under the laws and regulations of the U.S. and any other applicable countries laws and regulations. . You agree to comply with all applicable laws and regulations that apply to the Service, including without limitation the U.S. Export Administration Regulations and, as applicable, will obtain all required U.S. and local authorizations, permits, or licenses. The parties agree to provide to each other information as may be reasonably required by the other in connection with obtaining authorizations or licenses.</p> <p><strong>12.&nbsp; U.S. GOVERNMENT LICENSE RIGHTS.</strong>All Service provided to the U.S. Government is provided with the commercial license rights and restrictions described in this Agreement. The U.S. Government has deemed that by installing, copying or using the Service, the Service is commercial computer software or commercial computer software documentation within the meaning of DFAR Section 226.7202 and FAR Section 11.212, as applicable. Any use, modification, reproduction release, performance, display or disclosure of the Service by the U.S. Government shall be governed solely by the term of this Agreement and shall be prohibited except to the extent expressly permitted by the terms of this Agreement.</p> <p><strong>13.&nbsp; &nbsp;FORCE MAJEURE.</strong>Kotter will not be liable for delay or failure to furnish the Service(s) contemplated by this Agreement when the delay or failure is caused by circumstances that are not reasonably within Kotters control, including an act of God, strike or lockout or other labor dispute, act of the public enemy, war (declared or undeclared), blockade, revolution, civil commotion, lightning, fire, storm, flood, earthquake, explosion, governmental restraint, embargo, inability to obtain or delay in obtaining governmental approvals, permits, or licenses.</p> <p><strong>14.&nbsp; GOVERNING LAW, JURISDICTION, AND FEES.</strong>This Agreement, the related Estimate(s), Order(s), add-on Orders, and the entire relationship of the parties, shall be governed by and construed under the laws of the State of Georgia without giving effect to its choice of law principles. The parties disclaim the application of the 1980 U.N. Convention on Contracts for the International Sale of Goods or any successor thereto is disclaimed. Any litigation arising directly or indirectly out of this Agreement, the related Estimate(s), Order(s), add-on Orders, and/or the entire relationship of the parties will be litigated in the Georgia State Courts, Gwinnett County, Georgia or, if original jurisdiction can be established, in the us district court northern district of Georgia. THE PARTIES VOLUNTARILY, KNOWINGLY AND IRREVOCABLY WAIVE THEIR RIGHT TO TRIAL BY JURY IN ANY LEGAL PROCEEDING TO WHICH THEY MAY BE A PARTY INVOLVING ANY THE AGREEMENT, THE RELATED ESTIMATE(S), ORDER(S), ADD-ON ORDERS, AND/OR THE RELATIONSHIP OF THE PARTIES. In any formal action or proceeding to enforce rights under this Agreement, the prevailing party will be entitled to recover costs and reasonable attorney(s) fees.</p> <p><strong>15.&nbsp; ENTIRE AGREEMENT.</strong>The Agreement and the Estimate set forth the entire agreement of Kotter and you with respect to the Service, and the subject matter hereof, and supersedes all prior and contemporaneous understandings and agreements, including, without limitation, purchase orders and specifications, whether written or oral. No amendment, modification or waiver of any of the provisions of this Agreement by Customer will be valid unless set forth in a written instrument signed by the parties.</p> <p>16.&nbsp; If any provision of this Agreement is held by a court of competent jurisdiction to be invalid, illegal, void, or unenforceable, the remainder of this Agreement will remain in full force and effect and shall control.</p> <p>17.&nbsp; Any notice required or permitted to be sent under this Agreement shall be delivered by first class mail, return receipt requested, or via an international courier service (e.g. FedEx, DHL, UPS, etc.) to the addresses of the parties: 1) if Customer, the address Customer provided to Kotter in the Order; 2) if to Kotter, 3100 Five Forks Trickum Rd. Ste. 403, Lilburn, GA 30047. Notice so sent will be deemed effective three days following deposit in the mail, proper postage prepaid or one day following delivery to an international courier, prepaid for overnight delivery.</p> <p>18.&nbsp; KOTTER RESERVES THE RIGHT, AT KOTTERS SOLE DISCRETION, TO CHANGE, MODIFY OR OTHERWISE ALTER THESE TERMS AND CONDITIONS AT ANY TIME. YOU CAN FIND THE MOST RECENT VERSION OF THESE TERMS AND CONDITIONS AT <a href="https://kotter.net/legal" target="_blank"><strong>WWW.KOTTER.NET/LEGAL</strong></a>&nbsp;(THE WEBSITE). SUCH MODIFICATIONS SHALL BECOME EFFECTIVE IMMEDIATELY UPON POSTING SUCH TO THE WEBSITE. IF YOU DO NOT AGREE TO THE POSTED, REVISED TERMS AND CONDITIONS, YOUR SOLE RECOURSE IS TO TERMINATE THIS AGREEMENT, SUBJECT TO SECTIONS 1, 8, AND 19 OF THIS AGREEMENT. CONTINUED USE OF THE SERVICE FOLLOWING THE POSTING OF MODIFICATIONS WILL CONSTITUTE YOUR ACCEPTANCE OF THE REVISED TERMS AND CONDITIONS. SHOULD YOU HAVE ANY QUESTIONS, PLEASE CONTACT US AT:&nbsp;<a href="mailto:info@kotter.net" target="_blank"><strong>INFO@KOTTER.NET</strong></a>.</p> </div>'),
a.put("views/mailtemplate.html",'<html> <head> <title>Symphony</title> <meta charset="UTF-8"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"> <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script> <script src="https://use.fontawesome.com/54f7838f7f.js"></script> </head> <body> <div class="container" style="background-color: #f6f6f6"> <div class="row"> <div class="page-header" style="padding-left: 30px"> <a href="https://staging.kotter.net/symphony"> <img src="https://staging.kotter.net/symphony/images/Kotter-logo.d3674eba.png" width="200" height="60" alt=""></a> </div> </div> <div class="row" style="padding: 0px 100px 0px 100px !important"> <div class="jumbotron" style="text-align: center; background-image: url(http://www.escstatsports.com.ve/images/contenido/background_pelota.jpg) !important; background: no-repeat"> <span style="color: green; font-size: 30px; width: 300px !important; text-align: center"> ... </span> </div> </div> <div class="row" style="padding: 0px 100px 0px 100px !important"> <div class="jumbotron" style="text-align: center"> <a href="" target="_blank"> <img src="https://staging.kotter.net/symphony/images/fuze.c1a49884.png" width="400" height="250" alt=""> </a> </div> </div> <div class="row" style="text-align: center"> <div class="panel-footer"> <p style="color: #B80000; font-weight: bold">Follow us</p> <div> <a href="" class="btn btn-social-icon btn-facebook" target="_blank"> <span class="fa-stack fa-lg"> <i class="fa fa-square-o fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x"></i> </span> </a> <a href="" class="btn btn-social-icon btn-twitter" target="_blank"> <span class="fa-stack fa-lg"> <i class="fa fa-square-o fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x"></i> </span> </a> </div> </div> </div> </div> </body> </html>'),a.put("views/main.html",'<div id="advfeatures2"> <div class="row"> <!--<button ng-click="doremove()">Remove</button>--> <div id="mainoptions" style="padding: 30px"> <ul class="draglist"> <li ng-if="obj.active===\'true\'\n                    && obj.name !== \'fileshare\'\n                    && (obj.restricted === \'false\'\n                    || (user.accessgroup == \'admin\'\n                    || user.accessgroup == \'superuser\'\n                    || (emulationStatus && emulationStatus[obj.name] && emulationStatus[obj.name].manager === \'true\')))" ng-repeat="obj in user.symphony_user_settings.dashboard_order | orderBy: $index: false" ng-drop="true" ng-drop-success="onDropComplete($index, $data,$event)"> <div ng-drag="true" ng-drag-data="obj"> <ng-include src="\'dashboard.\'+obj.name+\'.html\'" context-menu="tileOptions($index, \'false\')"><div ng-drag-handle="true"></div></ng-include> </div> </li> </ul> <div class="buttons"> <button class="btn btn-default" ng-click="showHiddenTiles = !showHiddenTiles"><i ng-show="!showHiddenTiles" class="fa fa-eye"></i><i ng-show="showHiddenTiles" class="fa fa-eye-slash"></i> {{showHiddenTiles ? \'Show Only Active\' : \'Show All\'}}</button> <button class="btn btn-default reset" ng-click="sortTilesAlphabetically()"><i class="fa fa-sort-alpha-asc"></i> Sort Alphabetically</button> <button class="btn btn-default reset" ng-click="resetTiles()"><i class="fa fa-refresh"></i> Reset</button> </div> <ul ng-if="showHiddenTiles" class="draglist"> <li ng-if="obj.active===\'false\'\n                    && obj.name !== \'fileshare\'\n                    && (obj.restricted === \'false\'\n                    || (user.accessgroup == \'admin\'\n                    || user.accessgroup == \'superuser\'\n                    || (emulationStatus && emulationStatus[obj.name] && emulationStatus[obj.name].manager === \'true\')))" ng-repeat="obj in user.symphony_user_settings.dashboard_order" ng-drop="true" ng-drop-success="onDropComplete($index, $data,$event)"> <div ng-drag="true" ng-drag-data="obj"> <!-- <div class="add-tile" ng-click="toggleTile($index, \'true\')"><i class="fa fa-plus"></i></div> --> <ng-include src="\'dashboard.\'+obj.name+\'.html\'" context-menu="tileOptions($index, \'true\')"><div ng-drag-handle="true"></div></ng-include> </div> </li> </ul> </div> </div> </div> <script type="text/ng-template" id="dashboard.automatedmessaging.html"><div class="thumbnail" ng-dblclick="goToOption(\'/automatedmessaging\');">\n        <span class="cls-descrip-valores" ng-show="thum8">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum8">\n            <i class="fa fa-angle-double-right fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Automated Messaging\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.sms.html"><div class="thumbnail" ng-dblclick="goToOption(\'/sms\');">\n        <span class="cls-descrip-valores" ng-show="thum2">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum2">\n            <i class="fa fa-paper-plane fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Text Messaging\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.voicemail.html"><div class="thumbnail" ng-dblclick="goToOption(\'/visualvoicemail\');">\n        <span class="cls-descrip-valores" ng-show="thum2">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum2">\n            <span class="fa-stack fa-stack voicemail-icon">\n                <i style="transform: scale(2.1,1);"\n                   class="fa fa-minus fa-stack-2x">\n                </i>\n                <i class="fa fa-circle-o fa-stack-2x left-circle"></i>\n                <i class="fa fa-circle-o fa-stack-2x right-circle"></i>\n            </span>\n        </span>\n        <div class="caption">\n            Visual Voicemail\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.callrecording.html"><div class="thumbnail" ng-dblclick="goToOption(\'/callrecording\');">\n        <span class="cls-descrip-valores" ng-show="thum2">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum2">\n            <i class="fa fa-microphone fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Call Recording\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.quote-sheet.html"><div class="thumbnail" ng-dblclick="goToOption(\'/quote-sheet\');">\n        <span class="cls-descrip-valores" ng-show="thum2">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum2">\n            <i class="fa fa-pencil fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Quote Sheet\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.callhistory.html"><div class="thumbnail center-text" ng-dblclick="goToOption(\'/callhistory\');">\n        <span class="cls-descrip-valores" ng-show="thum3">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum3">\n            <i class="fa fa-history fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Call History\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.callcenter.html"><div class="thumbnail" ng-dblclick="goToOption(\'/callcenter\');">\n        <span class="cls-descrip-valores" ng-show="thum10">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum10">\n            <i class="mdi mdi-headset mdi-48px iconcolor"></i>\n        </span>\n        <div class="caption">\n            Call Centre\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.chatplus.html"><div class="thumbnail" ng-dblclick="goToOption(\'/chatplus\');">\n        <span class="cls-help-thumbnail" ng-show="thum1">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum1">\n            <i class="fa fa-comments fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Chat Plus\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.storeandshare.html"><div class="thumbnail" ng-dblclick="goToOption(\'/cloudstorage\');">\n        <span class="cls-descrip-valores" ng-show="thum9">\n            <p>Save your files in the cloud and access them anywhere</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum9">\n            <i class="fa fa-cloud-upload fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Store & Share\n        </div>\n        </a>\n    </div></script> <script type="text/ng-template" id="dashboard.conferencecall.html"><div class="thumbnail" ng-dblclick="goToOption(\'/conferencecall\');">\n        <span class="cls-descrip-valores" ng-show="thum8">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum8">\n            <i class="fa fa-volume-control-phone fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Conference Calls\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.faxing.html"><div class="thumbnail" ng-dblclick="goToOption(\'/fax\');">\n        <span class="cls-descrip-valores" ng-show="thum8">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum8">\n            <i class="fa fa-fax fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Faxing\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.screenshare.html"><div class="thumbnail" ng-dblclick="goToOption(\'/screenshare\');">\n        <span class="cls-descrip-valores" ng-show="thum4">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum4">\n            <i class="fa fa-clone fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Screen Share\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.conversations.html"><div class="thumbnail" ng-dblclick="goToOption(\'/conversations\');">\n        <span class="cls-descrip-valores" ng-show="thum10">\n            <p>Any short description...</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum10">\n            <i class="fa fa-connectdevelop fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Unified Conversation View\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.videoconference.html"><div class="thumbnail" ng-dblclick="goToOption(\'/videoconference\');">\n        <span class="cls-descrip-valores" ng-show="thum9">\n            <p>Video chat with your friends from anyhwere in the world</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum9">\n            <i class="fa fa-video-camera fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Video Call\n        </div>\n    </div></script> <script type="text/ng-template" id="dashboard.messenger.html"><div class="thumbnail" ng-dblclick="showMessengerModal()">\n        <!-- <a ng-href="{{messengerurl}}" ng-dblclick="goToUrl()" class="fb-message-blue"\n                    target="_blank"> -->\n        <span class="cls-descrip-valores" ng-show="thum9">\n            <p>Facebook Messenger</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum9">\n            <img src="/images/icons/fbmsg.248baba1.png" class="messengerimg">\n        </span>\n        <div class="caption">\n            Facebook Messenger\n        </div>\n        </a>\n    </div></script> <script type="text/ng-template" id="dashboard.timeclockpro.html"><div class="thumbnail" ng-dblclick="goToOption(\'/timeclockpro\');">\n        <span class="cls-descrip-valores" ng-show="thum9">\n            <p>Keeps track of each employee\'s working time.</p>\n        </span>\n        <span class="fa-stack fa-5x" ng-hide="thum9">\n            <i class="fa fa-clock-o fa-stack-1x iconcolor"></i>\n        </span>\n        <div class="caption">\n            Time Clock Pro\n        </div>\n    </div></script>'),a.put("views/mobileupload.html",'<div class="fax-container" ng-controller="MainCtrl"> <div> <h3>Mobile upload</h3> <input type="file" nv-file-select="" uploader="uploader"> <div class="col-md-9" style="margin-bottom: 40px"> <h3>Upload queue</h3> <p>Queue length: {{ uploader.queue.length }}</p> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td><strong>{{ item.file.name }}</strong></td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"> <span class="glyphicon glyphicon-trash"></span> Remove </button> </td> </tr> </tbody> </table> </div> </div> <div> <h3>Screenshot upload</h3> <input type="file" nv-file-select="" uploader="uploader"> <div class="col-md-9" style="margin-bottom: 40px"> <h3>Upload queue</h3> <p>Queue length: {{ uploader.queue.length }}</p> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td><strong>{{ item.file.name }}</strong></td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"> <span class="glyphicon glyphicon-trash"></span> Remove </button> </td> </tr> </tbody> </table> </div> </div> </div>'),a.put("views/modals/basicModal.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-question fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">{{vm.content.title}}</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> {{vm.content.message}} </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.cancel()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="vm.confirm()"><i class="fa fa-save" style="margin-right: 10px"></i>Ok</button> </div> </div>'),a.put("views/modals/blacklist-table-modal.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-times fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Manage SMS Blacklist</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <blacklist-table input="vm.content.data"></blacklist-table> </div>'),a.put("views/modals/confirmModal.html",'<div class="modal-body" id="modal-body"> <div class="row" style="padding: 0px 20px"> <center> <div class="col-lg-12 alert alert-warning" role="alert" style="margin-top: 10px; display: block"> <span class="col-lg-2 fa-stack fa-2x cls-color-yellow-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-warning fa-stack-1x fa-inverse"></i> </span> <span style="margin-top: 20px !important"></span>Do you want delete the calls selected? </div> </center> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="deleteCallSelected()"><i class="fa fa-remove" style="margin-right: 10px"></i>Confirm</button> <!-- <button class="btn btn-primary btn-md" ng-click=""><i class="fa fa-undo" style="margin-right: 10px;"></i>Cancel</button>  --> </div>'),a.put("views/modals/default-ringtones-modal.html",'<div id="ringtone-manage-modal"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-phone fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Set Default Company Ringtones</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <default-ringtones domain="vm.content.data.domain" user="vm.content.data.user" restricted="vm.content.data.restricted"> </default-ringtones> </div>'),a.put("views/modals/dialpadmodal.html",'<div modaldraggable> <div class="modal-header" id="modal-screen-share" style="border-radius: 6px 6px 0px 0px"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-calculator fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Dial Pad</span> <button type="button" class="close" id="iconClose" ng-click="closeInComingCall()"><i class="fa fa-times"></i></button> </div> <div class="phone"> <input type="tel" ng-model="phone_number" name="name" id="telNumber" class="form-control tel" value=""> <div class="num-pad"> <div class="span4"> <div class="num" ng-click="dialPadClick(\'1\')"><div class="txt"> 1 tetst </div></div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'2\')"> 2 <span class="small"><p>ABC</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'3\')"> 3 <span class="small"><p>DEF</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'4\')"> 4 <span class="small"><p>GHI</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'5\')"> 5 <span class="small"><p>JKL</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'6\')"> 6 <span class="small"><p>MNO</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'7\')"> 7 <span class="small"><p>PQRS</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'8\')"> 8 <span class="small"><p>TUV</p></span></div> </div> </div> <div class="span4"> <div class="num"> <div class="txt" ng-click="dialPadClick(\'9\')"> 9 <span class="small"><p>WXYZ</p></span></div> </div> </div> <div class="span4"> <div class="num" ng-click="dialPadClick(\'*\')"><div class="txt"> * </div></div> </div> <div class="span4"> <div class="num" ng-click="dialPadClick(\'0\')"> <div class="txt"> 0 <span class="small"><p> + </p></span></div> </div> </div> <div class="span4"> <div class="num" ng-click="dialPadClick(\'#\')"><div class="txt"> # </div></div> </div> </div> <div class="clearfix"></div> <!-- <a href="" class="btn btn-success btn-block flatbtn" ng-click="makeCall()">CALL</a>   --> <div class="btn-toolbar" role="group" aria-label="..."> <button ng-click="makeCall()" type="button" class="btn btn-success pull-left" style="width: 40%; margin-left: 20px"><i class="fa fa-phone"></i></button> <button type="button" class="btn btn-primary pull-right" ng-click="backSpace()" style="width: 40%; margin-right: 20px"><i class="fa fa-arrow-left"> </i></button> </div> <div class="clearfix"></div> </div> </div> <!--\n            <div class="row">\n                <div class="col-md-12">\n                    <div>\n                        <div class="spanicons">\n                            <span class="glyphicon glyphicon-star"></span><span class="small">\n                                <p>\n                                    Favorites</p>\n                            </span>\n                        </div>\n                        <div class="spanicons">\n                            <span class="glyphicon glyphicon-earphone"></span><span class="small">\n                                <p>\n                                    Calls</p>\n                            </span>\n                        </div>\n                        <div class="spanicons">\n                            <span class="glyphicon glyphicon-user"></span><span class="small">\n                                <p>\n                                    Contacts</p>\n                            </span>\n                        </div>\n                        <div class="spanicons active">\n                            <span class="glyphicon glyphicon-th"></span><span class="small">\n                                <p>\n                                    Keyboard</p>\n                            </span>\n                        </div>\n                        <div class="spanicons">\n                            <i class="fa fa-microphone"></i><span class="small">\n                                <p>\n                                    Voice mail</p>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            -->'),a.put("views/modals/dialpadmodalOnCall.html",'<!-- <div ng-controller="CallsCtrl" modaldraggable>  --> <div> <center> <div class="phone"> <input type="tel" ng-model="onCallDialPad" name="name" id="telNumber" class="form-control tel" value=""> <table class="table"> <tr ng-repeat="row in pad"> <td ng-repeat="key in row"> <center> <button class="btn cls-btn-dial-pad" ng-mousedown="press(key)" ng-mouseup="release(key)" ng-click="currentCallDTMF(vm.content.data.id, key)"> <span>{{key}}</span> <p ng-repeat="val in lttBtn" ng-if="key===val.id">{{val.val}}</p> </button> </center> </td> </tr> </table> <div class="btn-toolbar" role="group" aria-label="..."> <button ng-click="makeCall()" type="button" class="btn btn-success pull-left" style="width: 40%; margin-left: 20px"><i class="fa fa-arrow-right" style="margin-right: 10px"></i>Call</button> <button type="button" class="btn btn-primary pull-right" ng-click="backSpaceOnCall()" style="width: 40%; margin-right: 20px"><i class="fa fa-arrow-left" style="margin-right: 10px"> </i>Backspace</button> </div> </div> </center> </div> <!-- \n\n<div ng-controller="CallsCtrl" modaldraggable>\n  \n    <div class=" phone">\n        <input type="tel" ng-model="onCallDialPad" name="name" id="telNumber" class="form-control tel" value="" />\n        <div class="num-pad">\n            <div class="span4">\n                <div class="num" ng-click="currentCallDTMF(vm.content.data.id, \'1\')"><div class="txt"> 1 </div></div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'2\')"> 2 <span class="small"><p>ABC</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'3\')"> 3 <span class="small"><p>DEF</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'4\')"> 4 <span class="small"><p>GHI</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'5\')"> 5 <span class="small"><p>JKL</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'6\')"> 6 <span class="small"><p>MNO</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'7\')"> 7 <span class="small"><p>PQRS</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'8\')"> 8 <span class="small"><p>TUV</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num">\n                    <div class="txt" ng-click="currentCallDTMF(vm.content.data.id, \'9\')"> 9 <span class="small"><p>WXYZ</p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num" ng-click="currentCallDTMF(vm.content.data.id, \'*\')"><div class="txt"> * </div></div>\n            </div>\n            <div class="span4">\n                <div class="num" ng-click="currentCallDTMF(vm.content.data.id, \'0\')">\n                    <div class="txt"> 0 <span class="small"><p> + </p></span></div>\n                </div>\n            </div>\n            <div class="span4">\n                <div class="num" ng-click="currentCallDTMF(vm.content.data.id, \'#\')"><div class="txt"> # </div></div>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n        <!-- <a href="" class="btn btn-success btn-block flatbtn" ng-click="makeCall()">CALL</a>   --> <!--        \n            <div class="btn-toolbar" role="group" aria-label="...">\n                <button ng-click="makeCall()" type="button" class="btn btn-success pull-left" style="width: 40%; margin-left: 20px"><i class="fa fa-arrow-right" style="margin-right: 15px;"></i>Call</button>\n                <button type="button" class="btn btn-primary pull-right" ng-click="backSpaceOnCall()"  style="width: 40%; margin-right: 20px"><i class="fa fa-arrow-left"> </i></button>\n            </div>            \n        \n\n        \n        <div class="clearfix"></div>\n    </div>\n</div>\n\n\n-->'),a.put("views/modals/facebookmessenger.html",'<div> <div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x cls-color-green-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Facebook Messenger</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <p>While in Facebook messenger you can make copies of any text and download them directly into your management system. With The Kotter Group Screen Capture extension, you can select any part of the screen, mark it up or annotate it and then capture it directly to your management system. <a href="https://chrome.google.com/webstore/detail/the-kotter-group-screensh/emkhfdblfibefdhibmbeiefiolojmjbm" target="_blank">Click here to download</a></p> <button class="btn btn-primary" ng-click="openMessenger(hideFacebookModal)" target="_blank">Open Messenger Now</button> <md-checkbox ng-model="hideFacebookModal" aria-label="Hide Facebook Messenger Modal" ng-true-value="true" ng-false-value="false" class="md-warn md-align-top-left" flex> Check to hide this message and load Facebook Messenger immediately </md-checkbox> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.cancel()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> </div> </div>'),a.put("views/modals/filesharingmodal.html",'<div ng-controller="FileSharingCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-files-o fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">File Sharing</span> <!--<button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button>--> <button type="button" class="close" ng-click="closeFileShareModal()"><i class="fa fa-times"></i></button> </div> <form name="frmFileShare"> <div class="modal-body" id="modal-body"> <div class="alert alert-error" ng-show="invalidContactSelected" role="alert" style="margin-top: 10px; display: block"> {{invalidContactSelected}} </div> <div class="alert alert-success" ng-show="msgEmailSent" role="alert" style="margin-top: 10px; display: block"> You have successfully emailed a link to the file! </div> <div ng-hide="msgEmailSent"> <contact-selector type="\'file\'"></contact-selector> <textarea class="form-control" id="fileShareContactSelect" ng-model="contentEmail" style="height: 200px; margin-top: 12px; resize: none" placeholder="Write your message here (Optional)"></textarea> <div ng-if="alertError && alertError !== \'\'" uib-alert ng-class="\'alert-danger\'" dismiss-on-timeout="5000" close="closeFilterAlert()">{{alertError}}</div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <label class="btn btn-default btn-file btn-block" ng-show="!msgEmailSent && uploader.queue.length ==0 " style="border-top-left-radius: 5; border-bottom-left-radius: 5"> <span ng-hide="uploader.queue.length >= 1" class="cls-color-blue-tkg">Click to select file (max size 250 MB)</span> <input type="file" class="form-control" ng-if="uploader.queue.length < 1" accept="file_extension|audio/*|video/*|image/*|media_type" nv-file-select="" uploader="uploader" filters="enforceMaxFileSize,enforceFileType" style="display: none" ng-disabled="frmFileShare.$invalid"> </label> <div class="alert alert-info" style="padding: 10px; text-align: center" ng-show="uploader.queue.length >= 1"> <span ng-repeat="item in uploader.queue"> <strong>{{ item.file.name.length > 75 ? item.file.name.substring(0, 35) + \' ... \' + item.file.name.substring(item.file.name.length-35) : item.file.name }}</strong> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </span> </div> <div ng-repeat="item in uploader.queue" ng-show="uploader.queue.length >= 1" style="margin-top: 10px"> <button type="button" class="btn btn-danger btn-sm" ng-click="item.remove()" ng-show="uploader.queue.length >= 1" ng-disabled="item.isReady || item.isUploading || item.isSuccess"><i class="fa fa-trash" style="margin-right: 10px"></i>Remove file selected</button> <button class="btn btn-primary btn-sm" ng-click="contactsSelected.length < 1 ? null : item.upload(); " ng-hide="msgEmailSent" ng-disabled="item.isReady || item.isUploading || item.isSuccess || contactsSelected.length < 1"> <i class="fa fa-paper-plane-o" style="margin-right: 10px"></i> Send file </button> </div> <!--  item.upload(); sendEmail(contactsUsr, contentEmail);--> <div ng-show="msgEmailSent"> <button class="btn btn-primary btn-sm" ng-click="closeFileShareModal()"><i class="fa fa-check" style="margin-right: 10px"></i>Done</button> </div> <!--\n            <div nv-file-drop="" uploader="uploader" options="uploadOptions" removeAfterUpload="true" >\n                <div nv-file-over="" uploader="uploader" over-class="another-file-over-class" class="well my-drop-zone" >\n                You may drag drop files here\n                </div>\n            </div>\n            --> </div> </form> </div> </div>'),
a.put("views/modals/keith.html",'<div ng-controller="FileSharingCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-question fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">testing</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <md-chips ng-model="selectedVegetables" md-autocomplete-snap="" md-require-match=""> <md-autocomplete md-selected-item="selectedItem" md-search-text="searchText" md-items="item in querySearch(searchText)" md-item-text="item.name" placeholder="Search for a vegetable" md-autoselect="true"> <span md-highlight-text="searchText">{{item.name}} :: {{item.type}}</span> </md-autocomplete> <md-chip-template> <span> <strong>{{$chip.name}}</strong> <em>({{$chip.type}})</em> </span> </md-chip-template> </md-chips> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.cancel()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="vm.confirm()"><i class="fa fa-save" style="margin-right: 10px"></i>Ok</button> </div> </div>'),a.put("views/modals/playaudio.html",'<div ng-controller="ModalCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-music fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">{{vm.content.data.title}}</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="audio-body"> <h4>{{vm.content.data.description}}</h4> <p><span ng-if="vm.content.data.date">{{::vm.content.data.date | amDateFormat:\'MMM D, YYYY h:mm a\' : \'\'}}</span></p> <video controls autoplay name="media"><source src="{{::vm.content.data.url}}" type="audio/x-wav"></source></video> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <a href="{{::vm.content.data.url}}" class="btn btn-primary btn-md" download><i class="fa fa-download" style="margin-right: 10px"></i>Download</a> </div> </div>'),a.put("views/modals/request-files-modal.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-cloud-upload fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Request Large Files</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <request-files-table input="vm.content.data"></request-files-table> </div>'),a.put("views/modals/ringtone-manager-modal.html",'<div id="ringtone-manage-modal"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-phone fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Add New Ringtones</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <audio-manage-table class="company-setup-audio-tab company-setup-tab" access-levels="[\'personal\']" domain="vm.content.data.domain" option="\'ringtone\'" audio-libraries="vm.content.data.libraries" user="vm.content.data.user" restricted="vm.content.data.restricted"> </audio-manage-table> </div>'),a.put("views/modals/selectContacts.html",'<div ng-controller="ModalCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-users fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Select Contacts</span> {{contactsSelected.length}}/{{userContacts.length}} Contacts Selected <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="audio-body"> <div id="contact-list" class="scrollable-content"> <div class="list-group"> <a ng-repeat="contact in userContacts | orderBy : contact_name_full" href="" ng-click="selectContact(contact)" class="list-group-item"> <div class="thread-list-item"> <div class="thread-list-checkbox"> <md-checkbox ng-click="selectContact(contact)" ng-model="selectedContacts[contact.contact_uuid]" ng-init="" aria-label="Contact" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </div> <div class="thread-list-circle"> <span ng-bind-html="showContactPhoto(contact, \'small\')"></span> </div> <div class="thread-list-body"> <span style="padding-top: 16px">{{contact.contact_name_full}}<br></span> <span class="recent-message"><span ng-repeat="phone in contact.phones">{{phone.phone_label}}: {{phone.phone_number | tel2}} </span></span> </div> </div> </a> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div>'),a.put("views/new-chatplus.html",'<div class="chat-container" ng-class="getClassObj()" nv-file-drop="" nv-file-over="" uploader="uploader"> <div class="chat-header" ng-class="{\'two-col-header\' : (search.showSearch || showThreadedMessagePanel)}"> <div ng-if="chatData.currentChannel.type!=\'D\'" class="channeloptions btn-group header-title"> <span> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu"> <li ng-class="{hideentity : channel.display_name == \'\' }" ng-repeat="channel in publicChannels()"> <a ng-click="setChannel(channel)"> <i class="fa fa-globe fa-lg channeltype"></i> {{channel.display_name}} </a> </li> <li ng-class="{hideentity : channel.display_name == \'\' }" ng-repeat="channel in privateChannels()"> <a ng-click="setChannel(channel)"> <i class="fa fa-lock fa-lg channeltype"></i> {{channel.display_name}} </a> </li> </ul> </span> <span> <i class="fa fa-{{chatData.currentChannel.type === \'P\' ? \'lock\' : \'globe\'}} fa-lg channeltype"> </i> {{chatData.currentChannel.display_name}} </span> </div> <div ng-if="chatData.currentChannel.type ==\'D\'" class="channeloptions btn-group header-title"> <span> <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-if="channel.showDirect" ng-repeat="channel in directChannels()"> <a ng-click="setChannel(channel)"> <i class="fa fa-wechat fa-lg channeltype"> </i> {{channel.display_name}} <i ng-class="showChatStatus(teamMembers[channel.partner_id])" style="opacity: 0.6; font-size: 16px"></i> </a> </li> </ul> </span> <span> Direct Message: {{chatData.currentChannel.display_name }} </span> <span ng-if="chatData.currentChannel && (chatData.currentChannel.members|numKeys)>0"> ({{showMemberCount()}}) </span> </div> <div class="header-options"> <ul class="header-icons"> <li ng-if="enableCopyMode" ng-click="cancelCopyMessages()"> <i class="fa fa-undo" style="font-size: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.cancel_copy}}"> </i> </li> <li ng-if="(copySelected | objLength)>0" ng-click="saveCopiedMessages()"> <i ng-if="user.exportType.partner_code == \'hawksoft\'" class="fa fa-floppy-o" style="font-size: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.copy_to_hawksoft}}"> </i> <i ng-if="user.exportType.partner_code == \'generic\'" class="fa fa-floppy-o" style="font-size: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.copy_to_management}}"> </i> </li> <li ng-if="!enableCopyMode || (copySelected | objLength)===0" ng-click="toggleCopyMode()"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_hawksoft_copy}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_generic_export}}"> </li> <li> <manage-channel></manage-channel> </li> </ul> </div> <div class="header-search" ng-if="(!search.showSearch && !showThreadedMessagePanel) || enableCopyMode"> <div ng-show="enableCopyMode && user.exportType.partner_code == \'hawksoft\'"> Select the chat messages you want to export to HawkSoft Inbox<br> <span ng-show="(copySelected | objLength)>0"> {{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to HawkSoft Inbox </span> </div> <div ng-show="enableCopyMode && user.exportType.partner_code == \'generic\'"> Select the chat messages you want to export to Management System Inbox<br> <span ng-show="(copySelected | objLength)>0">{{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to Management System Inbox </span> </div> <div ng-show="!search.showSearch && !enableCopyMode && !showThreadedMessagePanel"> <div class="input-group"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-enter="sendSearch()" ng-model="search.searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> </div> </div> <div class="posts-container" ng-class="{\'pad-posts-container\' : hasSearchResults()}"> <div class="posts-top"> <h4 class="channel-name">{{chatData.currentChannel.display_name}}</h4> <p class="channel-purpose">{{chatData.currentChannel.purpose}}</p> <a href class="previous-messages" ng-if="showLoadEarlierButton()" ng-click="showMorePosts()"> Load Earlier Messages </a> </div> <chat-post ng-if="!hasSearchResults() && getOrderPost(order)" ng-repeat="order in chatData.currentChannel.postInfo.order" ng-class="{\'is-consecutive-post\': getOrderPost(order).isConsecutive,\n                          \'sub-thread-post\': !!getOrderPost(order).root_id,\n                          \'copy-highlight\': copySelected[order]}" channel="chatData.currentChannel" scroll-to-bottom="scrollToBottom" data-post-id="{{getOrderPost(order).id}}" open-thread="openThread" highlight-post="search.highlightPost" ng-click="enableCopyMode && copyMessage(order)" post="getOrderPost(order)"> </chat-post> <chat-post ng-if="hasSearchResults()" ng-class="{\'is-consecutive-post\': getOrderPost(order).isConsecutive,\n                          \'sub-thread-post\': !!getOrderPost(order).root_id,\n                          \'copy-highlight\': copySelected[order]}" ng-repeat="order in chatData.currentChannel.searchInfo.order" channel="chatData.currentChannel" data-post-id="{{getSearchOrderPost(order).id}}" is-search="1==1" open-thread="openThread" ng-click="enableCopyMode && copyMessage(order)" highlight-post="search.highlightPost" post="getSearchOrderPost(order)"> </chat-post> <div id="bottom-scroll-anchor"></div> </div> <div ng-if="hasSearchResults()" ng-click="goToRecentMessages()" class="go-to-current"> Click Here to jump to recent messages. <i class="fa fa-down-arrow"></i> </div> <chat-macro-suggestion-list ng-if="showMacrosList && mainChatInput" input-element="mainChatInput" parent-data="macrosListData"> </chat-macro-suggestion-list> <chat-channels-suggestion-list ng-if="showChannelList && mainChatInput" input-element="mainChatInput" parent-data="channelListData"> </chat-channels-suggestion-list> <chat-people-suggestion-list ng-if="showPeopleList && mainChatInput" input-element="mainChatInput" parent-data="peopleListData"> </chat-people-suggestion-list> <div class="input-container"> <span class="chat-input"> <textarea class="include-emojis" name="chatMessage" key-press-chat key-press-event-fns="keyPressChatFns" send-post="sendPost" rows="2" placeholder="Write a message" people-data="peopleListData" channel-data="channelListData" macro-data="macrosListData" chat-view="chatView" chat-data="chat" id="chatInput">\n            </textarea> </span> <span class="chat-upload"> <label tooltip-placement="left" uib-tooltip="{{::tips.chatplus.upload_files_to_channel}}"> <i class="fa fa-paperclip"></i> <input ng-if="uploader" type="file" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </span> <span class="chat-send"> <button class="btn btn-default btn-xs" chat-send-button send-post="sendPost" input-element="mainChatInput"> Send </button> </span> <p class="users-currently-typing">{{currentTypingMessage()}}</p> <div class="post-uploading" ng-if="showUploadingFiles"> <chat-post-upload-preview show="showUploadingFiles" sendmessage="sendMessage" uploader="uploader"> </chat-post-upload-preview> </div> </div> <emoji-popup></emoji-popup> <div class="side-panel" ng-show="search.showSearch || threadPost"> <threaded-message-display ng-show="threadPost" ng-class="threadedClassObj" class-obj="threadedClassObj" get-key-press-fns="getKeyPressChatFns" send-post="sendPost" close-display="closeThreadedDisplay" select-current-selection="selectCurrentSelection" select-macro-selection="selectMacroSelection" root-post="threadPost"> </threaded-message-display> <search-message-display ng-show="search.showSearch" search="search" close-display="closeSearchDisplay()" root-post="threadPost"> </search-message-display> </div> </div>'),a.put("views/profile/user.html",'<div id="profileUpdate"> <div ng-material-collapse ng-if="true" open> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> My Profile Info </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <user-info-settings></user-info-settings> </div> </div> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Change Password </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <change-password-settings></change-password-settings> </div> </div> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex>Voicemail</h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <voicemail-settings></voicemail-settings> </div> </div> <div ng-material-collapse ng-if="true" id="other-settings-dropdown"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Notifications </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <ringtone-settings></ringtone-settings> </div> </div> </div>'),a.put("views/public.html",'<div ng-controller="PublicCtrl"> <header class="public"> <div class="row"> <div class="col-md-6"><h3>Symphony - {{pageTitle}}</h3></div> <div class="col-md-6"><div class="cls-logo-tkg"></div></div> </div> </header> <div class="public-container"> <div ng-show="showWaitingForVideo" class="text-center alert-info" style="padding:10px"> <h2>Waiting for Moderator to Open Room</h2> <p>You will join the room automatically when it is ready.</p> <p><i class="fa fa-spinner fa-spin fa-5x"></i></p> </div> <div ng-show="showInvalidRoom" class="text-center alert-warning" style="padding:10px"> <h2>Invalid Room ID</h2> <p>An invalid room id was sent. Please confirm the video conference room link and try again.</p> </div> </div> </div>'),a.put("views/publiccloud.html",'<div id="public-container"> <div id="public-header"> <div class="logo-container"> <a href="http://www.kotter.net" title="Visit Kotter.net"><img src="/images/logo.e544bb64.png"></a> </div> </div> <div id="public-body"> <div class="share-title"> File Request from {{linkInfo.usersName}} at {{linkInfo.company}} </div> <div ng-if="!showContactInfo && linkInfo.requireName === \'true\'" class="show-edit-contact"> <a href ng-click="editContactInfo()">Edit Contact Info</a> </div> <div ng-if="showContactInfo" class="contact-form"> <form name="contactInfoForm"> <p style="text-align: center">To continue, please enter your information below.</p> <div class="row"> <div class="col-sm-6"> <md-input-container style="width: 100% !important"> <label>First Name</label> <input name="firstName" ng-model="contactInfo.firstName" required> <div ng-messages="contactInfoForm.firstName.$error"> <div ng-message="required">The first name is required!</div> </div> </md-input-container> </div> <div class="col-sm-6"> <md-input-container style="width: 100% !important"> <label>Last Name</label> <input name="lastName" ng-model="contactInfo.lastName" required> <div ng-messages="contactInfoForm.lastName.$error"> <div ng-message="required">The last name is required!</div> </div> </md-input-container> </div> <div class="col-sm-6"> <md-input-container style="width: 100% !important"> <label>Email Address</label> <input name="emailAddress" type="email" ng-model="contactInfo.emailAddress" required> <div ng-messages="contactInfoForm.emailAddress.$error"> <div ng-message="required">The email address is required!</div> </div> </md-input-container> </div> <div class="col-sm-6"> <md-input-container style="width: 100% !important"> <label>Company</label> <input name="Company" ng-model="contactInfo.company"> </md-input-container> </div> </div> <div class="row"> <div class="col-sm-2"> <button form="contactInfoForm" ng-disabled="contactInfoForm.$invalid" class="btn btn-success" ng-click="showDropZoneArea(contactInfo)">Next</button> </div> <div class="col-sm-10"> <md-checkbox ng-model="contactInfo.rememberMe" aria-label="Remember Me"> Remember Me </md-checkbox> </div> </div> </form> </div> <div ng-if="showDropZone" class="well share-drop-zone my-drop-zone" nv-file-drop="" nv-file-over="" uploader="uploader"> <div ng-if="messages.length > 0"> <div ng-repeat="message in messages" uib-alert ng-class="\'alert-{{message.class}}\'" class="logoutmsg">{{message.message}}</div> </div> <div ng-if="uploader.queue.length===0"> <h1><i class="fa fa-files-o fa-3x"></i></h1> <h2>Drag Your Files Here</h2> <label class="btn btn-default btn-file"> <i class="fa fa-upload"></i> Browse Files <input type="file" nv-file-select="" uploader="uploader" multiple style="display: none"> </label> </div> <table ng-if="uploader.queue.length>0" class="table public-cloud-table"> <tbody> <tr> <td colspan="3"> {{uploader.queue.length}} item<span ng-if="uploader.queue.length>1">s</span> (<a href ng-click="uploader.clearQueue()">Clear All</a>) </td> <td colspan="2"> <label class="pull-right btn btn-default btn-file btn-xs"> <i class="fa fa-plus"></i> Add More <input type="file" nv-file-select="" uploader="uploader" multiple style="display: none"> </label> </td> </tr> <tr ng-repeat="item in uploader.queue"> <td style="width: 40px"><a href ng-click="item.remove()"><i class="fa fa-times"></i></a></td> <td><img class="cloud-flat-img cloud-{{getFileType(item.file)}}" src="/images/Files/file-48.d309c30a.png"> {{ item.file.name }}</td> <td style="width: 100px" ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td style="width: 40px" class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td style="width: 100px; text-align: right" ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> </tr> </tbody> </table> <div ng-if="uploader.queue.length>0"> <div ng-if="1==2"> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"> <span class="glyphicon glyphicon-upload"></span> Upload all </button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel all </button> </div> </div> </div> </div>'),a.put("views/quote-sheet-message.html",'<h1 style="text-align: center">Coming Soon.</h1>'),a.put("views/reports.html",'<div> <div class="col-lg-6"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-user-secret cls-color-green-tkg" style="padding-right: 10px"></i>Manager Reports</div> <ul class="list-group"> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Cras justo odio</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Dapibus ac facilisis in</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Morbi leo risus</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Porta ac consectetur ac</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Vestibulum at eros</li> </ul> </div> </div> <div class="col-lg-6"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-user cls-color-green-tkg" style="padding-right: 10px"></i>Personal Reports</div> <ul class="list-group"> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Cras justo odio</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Dapibus ac facilisis in</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Morbi leo risus</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Porta ac consectetur ac</li> <li class="list-group-item"><i class="fa fa-file-text cls-color-blue-tkg" style="padding-right: 10px"></i>Vestibulum at eros</li> </ul> </div> </div> <div class="col-lg-6"> <div class="panel cls-panels-header"> <div class="panel-heading"><i class="fa fa-question-circle cls-color-green-tkg" style="padding-right: 10px"></i>FAQ\'s</div> <ul class="list-group"> <li class="list-group-item">Cras justo odio</li> <li class="list-group-item">Dapibus ac facilisis in</li> <li class="list-group-item">Morbi leo risus</li> <li class="list-group-item">Porta ac consectetur ac</li> <li class="list-group-item">Vestibulum at eros</li> <li class="list-group-item">Cras justo odio</li> <li class="list-group-item">Dapibus ac facilisis in</li> <li class="list-group-item">Morbi leo risus</li> <li class="list-group-item">Porta ac consectetur ac</li> <li class="list-group-item">Vestibulum at eros</li> <li class="list-group-item">Cras justo odio</li> <li class="list-group-item">Dapibus ac facilisis in</li> <li class="list-group-item">Morbi leo risus</li> <li class="list-group-item">Porta ac consectetur ac</li> <li class="list-group-item">Vestibulum at eros</li> </ul> </div> </div> </div>'),a.put("views/resetpassword.html",'<div class="cls-cont-login-page"> <div class="header cls-logo-tkg-login-page"> <img src="images/Kotter-logo.73506dca.jpg"> </div> <div class="container"> <div class="row"> <div class="col-lg-7 cls-welcome-msg"> <div class="panel panel-default"> <div class="panel-body"> <h1>Welcome to Symphony</h1> <!--\n                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc non lacus et lorem dignissim egestas. In vehicula maximus urna ac interdum. In libero quam, placerat vitae feugiat ac, scelerisque at nulla. Donec eu eleifend magna. Donec tincidunt enim id facilisis interdum. Integer eget molestie metus, non auctor massa. Duis ut placerat nisi, at luctus urna. Nunc tincidunt cursus nulla id ornare. Suspendisse potenti. Fusce tempor eros fermentum ullamcorper eleifend. Vestibulum non mi sollicitudin, placerat magna in, molestie nisl. Ut auctor cursus consectetur. Cras tincidunt convallis sapien.</p>\n\n                        <p>PAliquam a condimentum ipsum. Morbi non sapien eu ante tristique sagittis vel at lorem. Mauris eu finibus justo, vitae sodales odio. Donec quis semper ligula. Proin pellentesque convallis ipsum sit amet aliquam. Nunc blandit risus sed ultrices accumsan. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Morbi porttitor dolor a aliquam malesuada. Integer purus sem, iaculis ut lacus et, luctus euismod elit.</p>\n--> <span ng-repeat="user in users"> {{user.email}} <br> </span> </div> </div> </div> <div class="col-lg-5 cls-form-login"> <div class="panel panel-primary"> <div class="panel-body"> <h4><span ng-show="showConfirm">Confirm Your Account: </span>Reset Your Password</h4> <div ng-show="showConfirm" class="alert alert-info"> <strong>Welcome: </strong> Please set your password below for {{resetEmail}} to confirm your account. </div> <div ng-show="showResetPassword" class="alert alert-info"> Please set your password below for {{resetEmail}}. </div> <form name="passwordForm"> <div class="input-group input-group-lg"> <span class="input-group-addon" id="sizing-addon1"><i class="fa fa-key"></i></span> <input type="password" name="password" class="form-control" ng-model="info.password" md-minlength="8" ng-minlength="8" ng-maxlength="20" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" placeholder="password" aria-describedby="sizing-addon1"> <div class="errormessage" ng-messages="passwordForm.password.$error"> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> </div> <div class="input-group input-group-lg"> <span class="input-group-addon" id="sizing-addon1"><i class="fa fa-key"></i></span> <input type="password" name="passwordConfirmation" class="form-control" ng-model="info.password_confirmation" md-minlength="8" ng-minlength="8" ng-maxlength="20" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" placeholder="confirm your password" aria-describedby="sizing-addon1"> <div class="errormessage" ng-messages="passwordForm.passwordConfirmation.$error"> <small ng-show="passwordForm.passwordConfirmation.$dirty && info.password != info.password_confirmation"> Password confirmation does not match. </small> <div ng-message="minlength"> Password must be at least 8 characters. </div> <div ng-message="maxlength"> Password must be less than 20 characters. </div> <div ng-message="pattern"> Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ). </div> </div> </div> <button ng-click="resetPassword(info)" class="btn btn-primary btn-block">Reset</button> <br> </form> <div ng-show="showSuccess" class="alert alert-success"> <strong>Success!</strong> {{successMessage}} <a href="/login" class="btn btn-default btn-small">Ready to login?</a> </div> <div ng-show="showFailure" class="alert alert-danger"> <strong>Problem</strong> {{failureMessage}} </div> </div> </div> </div> </div> </div> </div>'),a.put("views/screenshare-public.html",'<style>.opcVideoCallActivo a i {\n        color: #0073a5;\n    }</style> <div ng-controller="PublicCtrl"> <header class="public"> <div class="row"> <div class="col-md-6"><h3>Symphony Screen Sharing</h3></div> <div class="col-md-6"><div class="cls-logo-tkg"></div></div> </div> </header> <div class="public-container"> <div class="screenshare-action-bar"> <h4>Sharing Screen with {{screenShareInfo.symphony_user}}</h4> <button class="btn btn-primary" ng-if="roomActive" ng-click="leaveRoom()">Leave Room</button> <button class="btn btn-primary" ng-if="!roomActive" ng-click="openRoom(roomId)">Share Your Screen</button> <button class="btn btn-danger" ng-click="showspinner()">Toggle</button> <div class="col-lg-8 col-md-6 col-sm-5"> <div class="cls-mnu-functions-video-call" data-toggle="buttons" ng-hide="textBoxNotify"> <nav> <div class="input-group"> <span class="input-group-addon" title="name"><i class="fa fa-desktop"></i></span> <input class="form-control" type="text" id="room-id" style="width: 100px" placeholder="Input name room" required> <span class="input-group-addon btn" id="open-room" ng-click="openRoom()" tooltip-placement="bottom-left" uib-tooltip="Click to Open new room"><i class="fa fa-exchange"></i></span> <span class="input-group-addon btn" id="join-room" ng-click="joinRoom()" tooltip-placement="bottom-right" uib-tooltip="Click to Join room opened"><i class="fa fa-compress"></i></span> </div> </nav> </div> </div> </div> <div ng-show="!roomActive" class="large-spinner"><h2>Joining Room</h2><i class="fa fa-spinner fa-spin fa-5x"></i></div> <div id="screenshare" class="screenshare-container" ng-style="fullscreen && {\'position\': \'absolute\', \'width\': \'100%\'}"> <div id="fulltoggle-screenshare" ng-click="toggleFullscreen()" tooltip-placement="bottom-right" uib-tooltip="Toggle Fullscreen"><i class="fa fa-arrows-alt fa-3x"></i></div> <div id="videos-container"></div> </div> </div> </div>'),a.put("views/screensharing/incomingscreenshare.html",'<div ng-controller="ScreenSharingCtrl"> <div> <div class="modal-header color-header" id="modal-screen-share-incoming"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-clone fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Incoming Screensharing Request</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="invite-url-box"> <div class="cls-title-cont-modal">{{vm.content.data.symphony_user}} has invited you to join a screen sharing session with them.</div> <a class="btn btn-primary btn-lg" href="{{vm.content.data.room_url}}" target="_blank">Join the Room Now</a> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeVideoCallModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div> </div>'),a.put("views/screensharing/screenshare.html",'<div ng-controller="ScreenShareCtrl"> <div class="row"> <div class="col-sm-8"> <h3>Screen Share</h3> </div> </div> <div ng-if="!showTable()" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i> <br> Loading... </div> <div ng-if="showTable()"> <div class="row"> <div class="col-sm-8"> <label for="conferenceroom"> Customize your conference room name: </label> <div class="input-group"> <span class="input-group-addon" id="basic-addon3"> {{ssUrl}} </span> <input class="form-control" type="text" ng-keyup="isRoomAvailable(conference.room)" id="conferenceroom" ng-model="conference.room" ng-init="conference.room=videoConference.name" placeholder="Choose a custom conference room name" aria-describedby="basic-addon3"> <span class="input-group-addon" ng-if="urlNotAvailable"> {{availMessage}} </span> <span class="input-group-addon" ng-if="!urlNotAvailable"> <i class="fa fa-check" style="color: green" tooltip-placement="top" uib-tooltip="{{tips.video.roomsuccess}}"> </i> </span> </div> <span class="smfont"> {{ssUrl}}/{{conference.room}} (<button class="btn btn-default btn-xs" ng-disabled="urlNotAvailable" ng-click="clickHandler()"> Copy to Clipboard </button>) </span> </div> </div> <div class="row"> <div class="col-sm-12 video-button"> <button class="btn btn-primary btn-lg screensharebtn" ng-disabled="urlNotAvailable" ng-click="joinConference()"> Start Screen Share </button> </div> </div> <h4>Recorded Screen Shares</h4> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-click="sortBy(\'created_at\')"> Date <i class="fa fa-chevron-down" ng-show="showChevronDown(\'created_at\')"></i> <i class="fa fa-chevron-up" ng-show="showChevronUp(\'created_at\')"> </i> </th> <th ng-click="sortBy(\'name\')"> Name <i class="fa fa-chevron-down" ng-show="showChevronDown(\'name\')"> </i> <i class="fa fa-chevron-up" ng-show="showChevronUp(\'name\')"> </i> </th> <th>View</th> <th class="button-column-md">Copy</th> <th class="button-column-md">Remove</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="videoArchives.length===0"> <td colspan="4">There are no video recordings available at this time.</td> </tr> <tr ng-repeat="recording in filtered = (videoArchives | orderBy : category :sortDirection)"> <td>{{::recording.created_at | stringDateToDate}}</td> <!-- <td>{{ \'2017-01-21 11:28:33\' | stringDateToDate}}</td> --> <td>{{::recording.name}}</td> <td> <button class="btn btn-primary btn-xs" ng-click="viewArchive($index)" tooltip-placement="top" uib-tooltip="{{::tips.screenshare.playrecording}}"> <i class="fa fa-eye" style="margin-right: 10px"> </i> View Recording </button> </td> <td class="button-column-md"> <span ng-click="copyConferenceToHawksoft(recording)"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.screenshare.copytohawksoft}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.screenshare.copytomanagement}}"> </span> </td> <td class="button-column-md"> <i ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeArchive($index)" class="fa fa-minus-circle fa-2x redfont" tooltip-placement="top" uib-tooltip="{{::tips.screenshare.remove}}"> </i> </td> </tr> </tbody> </table> </div> </div>'),
a.put("views/screensharing/screensharemodal.html",'<div ng-controller="ScreenSharingCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-clone fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Screen Share</span> <button type="button" class="close" ng-click="closeScreenShareModal()"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div ng-show="!invitesSent"> <!-- <h4>Who is going to Share their Screen?</h4>\n                <div class="row">\n                    <md-radio-group ng-model="roomType">\n                    <div class="col-sm-6">\n                        <md-radio-button value="user" class="md-primary">Share your screen with your invitee(s).</md-radio-button>\n                    </div>\n                    <div class="col-sm-6">\n                        <md-radio-button value="contact">Your invitee will share their screen with you.</md-radio-button>\n                    </div>\n                    </md-radio-group>\n                </div>--> <strong>Room ID:</strong> <div class="input-group"> <span class="input-group-addon" title="name"><i class="fa fa-desktop"></i></span> <input class="form-control" type="text" id="room-id" ng-model="roomId" ng-keyup="slugifyRoomId()" placeholder="Input name room" required> </div> <p><strong>Invite Stored Contacts</strong><br> <span class="smfont">Start typing a contact\'s name to search your contacts and then select from provided results.</span></p> <tags-input ng-model="delivery.messageContacts" display-property="contact_name_full" key-property="contact_uuid" placeholder="Start typing the name of a contact to select" replace-spaces-with-dashes="false"> <auto-complete source="loadTags($query)" min-length="0" load-on-focus="false" load-on-empty="false" max-results-to-show="10" template="autocomplete-template"></auto-complete> </tags-input> <script type="text/ng-template" id="autocomplete-template"><div class="autocomplete-template">\n                        <span ng-bind-html="$highlight($getDisplayText())"></span> <span ng-if="data.contact_email_address!=\'\'" class="smfont">(Email: {{data.contact_email_address}})</span><span ng-if="data.contact_email_address==\'\'" class="smfont">(No Email Address Available)</span>\n                    </div></script> <p><strong>Invite Non-Contacts</strong><br> <span class="smfont">Enter a name and email and click Include to add to the Invitee List.</span></p> <div class="row"> <div class="col-md-5"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-user"></i></span> <input class="form-control" type="text" ng-model="invitee.name" placeholder="Invitee Name"> </div> </div> <div class="col-md-5"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-envelope"></i></span> <input class="form-control" type="text" ng-model="invitee.email" placeholder="Invitee Email"> </div> </div> <div class="col-md-2"> <button class="btn btn-success btn-sm" ng-click="addNonContactInvitee(invitee)"><i class="fa fa-plus-circle"></i> Include</button> </div> </div> <table ng-if="addedInvitees.length>0" class="table table-bordered table-hover table-striped"> <thead><tr><th>Name</th><th>Email</th><th></th></tr></thead> <tbody> <tr ng-repeat="person in addedInvitees"><td>{{person.name}}</td><td>Email: {{person.email}}</td><td><button class="btn btn-danger btn-xs" ng-click="removeInvitee($index)"><i class="fa fa-times"></i> Remove</button></td></tr> </tbody> </table> </div> <div ng-if="invitesSent" uib-alert ng-class="\'alert-info\'" dismiss-on-timeout="5000" close="closeLogout()"><strong>Invitations have been Sent!</strong></div> <div ng-if="invitesSent" class="invite-url-box" ng-bind-html="showRoomURL()"></div> <!-- <span class="input-group-addon btn" id="open-room" ng-click="openRoom()" tooltip-placement="bottom-right" uib-tooltip="Click to Open a New Room"><i class="fa fa-exchange"></i></span> \n                <span class="input-group-addon btn" id="join-room" ng-click="joinRoom()"  ng-show="xxx999" tooltip-placement="bottom-right" uib-tooltip="Click to Join room opened"><i class="fa fa-compress"></i></span> \n                <span class="input-group-addon btn" id="open-or-join-room" ng-click="openOrJoinRoom()" ng-show="xxx999" tooltip-placement="bottom-right" uib-tooltip="Click to Join room opened"><i class="fa fa-compress"></i></span> --> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-show="!invitesSent" ng-click="closeScreenShareModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-default btn-md" ng-show="invitesSent" ng-click="closeScreenShareModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <button class="btn btn-primary btn-md" ng-show="!invitesSent" ng-click="sendScreenSharing(delivery)"><i class="fa fa-desktop" style="margin-right: 10px"></i>Send Invitation<span ng-if="contactsUsr.length + addedInvitees.length > 1">s</span></button> <!-- <button class="btn btn-primary btn-md"><i class="fa fa-compress" style="margin-right: 10px;"></i>Join Room</button>  --> </div> </div> </div>'),a.put("views/settings/audio-selector.html",'<div class="audio-selector"> <div class="panel cls-panels-header"> <div class="panel-heading"> <i class="fa fa-hand-o-up" style="padding-right: 10px"> </i> <strong class="cls-color-blue-tkg"> Click an Option Below </strong> </div> <ul class="list-group"> <li class="list-group-item" ng-click="setOpcMessageBroadcast(1)"> <i class="fa fa-microphone" style="margin-right: 10px"> </i> Record a New Message <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'newrecord\'"> </i> </li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(2)"> <i class="fa fa-upload" style="margin-right: 10px"> </i> Upload an Audio File <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'uploadfile\'"> </i> </li> <li class="list-group-item" ng-click="setOpcMessageBroadcast(3)"> <i class="fa fa-book" style="margin-right: 10px"> </i> Select from Audio Library <i class="fa fa-bullseye pull-right" ng-show="opcBroadcast === \'audiolibrary\'"> </i> </li> </ul> </div> </div> <div class="audio-selector-options"> <div ng-if="schedule.recording_file && !opcBroadcast" class="center-text show-player"> <button class="btn btn-default" ng-click="showAudioModal(schedule.recording_file, \'robocall-recording\')"> <i class="fa fa-play"></i> Play Current Recording </button> </div> <div class="panel" ng-if="opcBroadcast" style="border: #cfdef0 solid 1px"> <div class="panel-heading"> <strong class="cls-color-blue-tkg"> {{opcBroadcastTitle}} </strong> </div> <div class="panel-body"> <div ng-if="opcBroadcast===\'newrecord\'"> <div class="jumbotron recording"> <div ng-audio-recorder id="mainAudio{{$index}}" myindex="$index" audio-model="recorded[$index]" show-player="false" class="container"> <div ng-if="recorder.isAvailable"> <div class="panel panel-primary"> <div class="panel-body"> <div> <h3 style="float: right; /*font-family: sans-serif*/; text-align: center; width: 50px; border-radius: 30px; border: solid 2px #333; padding: 10px; margin: 0; background: #337ab7; color: #fff" ng-if="recorder.status.isRecording"> {{recorder.elapsedTime >= 10 ? recorder.elapsedTime : (\'0\'+recorder.elapsedTime)}} </h3> <div class="alert alert-danger" ng-if="recorder.status.isDenied === true"> Permission to use your microphone was declined, please refresh this page to grant permission. </div> <div class="controls text-center" style="padding-top: 10px" ng-hide="recorder.status.isDenied === true"> <button ng-click="recorder.status.isRecording ? recorder.stopRecord() : recorder.startRecord()" type="button" class="btn" ng-class="{\'btn-primary\': !recorder.status.isRecording, \'btn-danger\': recorder.status.isRecording}"> <i class="glyphicon glyphicon-record"></i> {{recorder.status.isRecording ? \'Stop\' : \'Record\'}} </button> <button class="btn" ng-hide="recorder.status.isRecording" ng-class="{\'btn-primary\': (recorder.status.isPaused || recorder.status.isStopped), \'btn-warning\': recorder.status.isPlaying}" ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()" type="button" ng-disabled="recorder.status.isRecording || !recorder.audioModel"> <span ng-if="recorder.status.isPaused || recorder.status.isStopped"> <i class="glyphicon glyphicon-play"></i> Play </span> <span ng-if="recorder.status.isPlaying"> <i class="glyphicon glyphicon-pause"></i> Pause </span> </button> <button class="btn btn-success" ng-hide="recorder.status.isRecording" ng-disabled="recorder.status.isRecording || !recorder.audioModel" ng-click="recorder.savetoServer(getaudioModel, null)"> <i class="glyphicon glyphicon-download"></i> Save </button> <button id="btnDownload" style="display: none"> </button> </div> <div class="clearfix"></div> </div> <br> <div ng-if="recorder.status.isConverting"> <p class="text-center"> Please wait while we process your recording </p> </div> <div class="panels" canvas-sizer> <div ng-show="recorder.status.isRecording"> <ng-audio-recorder-analyzer></ng-audio-recorder-analyzer> </div> <div ng-show="!recorder.status.isRecording && recorder.audioModel"> <ng-audio-recorder-wave-view wave-color="silver" bar-color="red"> </ng-audio-recorder-wave-view> </div> </div> </div> </div> </div> <div ng-if="!recorder.isAvailable" class="alert alert-warning"> Your browser does not support this feature natively, please use latest version of <a href="https://www.google.com/chrome/browser" target="_blank"> Google Chrome</a> or <a href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Mozilla Firefox</a>. If you\'re on Safari or Internet Explorer, you can install <a href="https://get.adobe.com/flashplayer/"> Adobe Flash </a> to use this feature. </div> </div> </div> </div> <div ng-if="opcBroadcast===\'audiolibrary\'"> Audio Library... <table class="table table-bordered table-hover table-striped" id="voicemail-audio-recordings-table"> <thead> <tr> <th style="width: 45px"></th> <th>File</th> <th style="width: 90px">Options</th> </tr> </thead> <tbody> <tr ng-repeat="row in audioLibrary"> <td><span ng-click="selectFile(row)" ng-if="user.voicemail.greeting_id !== row.greeting_id" tooltip-placement="top" uib-tooltip="Set Audio File as Greeting"> <i class="fa fa-plus-circle fa-2x audiofileoption greenfont"></i> </span> <span ng-if="user.voicemail.greeting_id === row.greeting_id" tooltip-placement="top" uib-tooltip="Current Greeting"> <i class="fa fa-check-circle fa-2x audiofileoption primaryfont"></i> </span> </td> <td>{{row.greeting_name}}</td> <td> <span ng-if="audioFilePlaying!==row.voicemail_greeting_uuid" ng-click="playAudioFile(getGreetingFilepath(row.greeting_filename), row.voicemail_greeting_uuid)" tooltip-placement="top" uib-tooltip="Listen to Audio File"> <i class="fa fa-play-circle fa-2x"></i> </span> <span ng-if="audioFilePlaying===row.voicemail_greeting_uuid" ng-click="stopPlaying()" tooltip-placement="top" uib-tooltip="Stop Playing Audio File"> <i class="fa fa-stop-circle fa-2x"></i> </span> <span ng-click="removeGreeting(row)" tooltip-placement="top" uib-tooltip="Remove Audio File"> <i class="fa fa-times-circle fa-2x redfont"></i> </span> </td> </tr> </tbody> </table> </div> <div ng-if="opcBroadcast===\'uploadfile\'"> <div class="jumbotron center-text"> <span ng-if="audioRecording.name"> <p> <strong> {{audioRecording.name}} </strong> </p> </span> <label class="btn btn-primary btn-file"> Browse for File <input class="form-control" accept="audio/*" type="file" name="useravatar" style="display: none" file-model="audioRecording"> </label> <button class="btn btn-success" ng-click="uploadAudioFile(audioRecording, schedule.robocall_schedule_uuid)"> Upload File </button> </div> </div> </div> </div> <div ng-if="successMessage && successMessage !== \'\'" uib-alert ng-class="\'alert-success\'" close="closeLogout()"> {{successMessage}} </div> <div ng-if="errorMessage && errorMessage !== \'\'" uib-alert ng-class="\'alert-failure\'" close="closeLogout()"> {{errorMessage}} </div> <div ng-show="showPlayer && schedule.recording_file" class="center-text show-player"> <button class="btn btn-success" ng-if="!recordingPlaying" ng-click="playRecording(schedule.recording_file)"> <i class="fa fa-play fa-lg"></i> Play Recording </button> <button class="btn btn-danger" ng-if="recordingPlaying" ng-click="stopPlaying()"> <i class="fa fa-stop fa-lg"></i> Stop Playing </button> </div> </div>'),a.put("views/settings/avatar-upload.html",'<div class="cls-profile-info" ng-show="!showAvatarUpload"> <div class="settings-avatar"> <img src="{{pathImgProfile + user.profile_image}}" ng-show="user.profile_image" class="cls-settings-img-profile" alt=""> <div class="cls-settings-img-profile-null" style="background-color: {{ user.profile_color ? user.profile_color : \'\' }}" ng-show="!user.profile_image"> <i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"></i> </div> </div> <md-button ng-click="triggerUpload()" class="md-raised md-secondary"> Change Avatar </md-button> </div> <input type="file" nv-file-select uploader="uploader" id="cloud-upload" style="display: none">'),a.put("views/settings/change-password-settings.html",'<md-content class="user-settings-content password" id="user-settings-content"> <form name="passwordForm" id="passwordForm"> <md-input-container class="password-input"> <input type="password" name="password" ng-model="fields.password" md-minlength="8" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" ng-minlength="8" ng-maxlength="20" placeholder="new password"> <div ng-messages="passwordForm.password.$error"> <div ng-message="minlength">Password must be at least 8 characters.</div> <div ng-message="maxlength">Password must be less than 20 characters.</div> <div ng-message="pattern">Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ).</div> </div> </md-input-container> <md-input-container class="password-input"> <input type="password" name="passwordConfirmation" md-minlength="8" ng-pattern="/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@.#,\\$%\\^&\\*()_+[\\]{}<>=?;:|\'&quot;\\-`~])(?=.{8,})^[^/\\\\]+$/" ng-minlength="8" ng-maxlength="20" ng-model="fields.password_confirmation" placeholder="confirm new password"> <div ng-messages="passwordForm.passwordConfirmation.$error"> <small ng-show="passwordForm.passwordConfirmation.$dirty && fields.password != fields.password_confirmation">Password confirmation does not match.</small> <div ng-message="minlength">Password must be at least 8 characters.</div> <div ng-message="maxlength">Password must be less than 20 characters.</div> <div ng-message="pattern">Password must contain 1 Uppercase Character, 1 Lowercase Character, 1 Number, and 1 Special character ( \\ / are not allowed ).</div> </div> </md-input-container> <br> <md-button ng-click="triggerUpdate()" type="submit" form="passwordForm" ng-disabled="passwordForm.$invalid || fields.password != fields.password_confirmation" class="md-warn md-raised"> Update Password </md-button> </form> </md-content>'),a.put("views/settings/default-ringtones.html",'<div class="modal-body" id="modal-body"> <md-content class="user-settings-content ringtones"> <md-input-container class="ringtone-select-container"> <label>Call Ringtone</label> <md-select ng-model="callRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'call\'" ng-click="playRingtone(callRingtone, \'call\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'call\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="callRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-input-container class="ringtone-select-container"> <label>Text Ringtone</label> <md-select ng-model="textRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone">{{ringtone.file_title}}</md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'text\'" ng-click="playRingtone(textRingtone, \'text\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'text\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="textRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-input-container class="ringtone-select-container"> <label>Chat Ringtone</label> <md-select ng-model="chatRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone">{{ringtone.file_title}}</md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'chat\'" ng-click="playRingtone(chatRingtone, \'chat\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'chat\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="chatRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-input-container class="ringtone-select-container"> <label>Video Invite Ringtone</label> <md-select ng-model="videoInviteRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'videoInvite\'" ng-click="playRingtone(videoInviteRingtone, \'videoInvite\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'videoInvite\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="videoInviteRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> </md-content> </div> <div class="modal-footer cls-incomingcall-buttons"> <md-button class="md-primary md-raised" ng-click="updateRingtones()"> Update Information </md-button> </div>'),a.put("views/settings/order-e911-modal.html",'<div class="modal-header"> <span class="cls-header-modal">Register E911 Address</span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <form name="registerE911" id="register-e911-modal" ng-submit="vm.content.data.modalRegister(vm.content.data.user)"> <div class="modal-body" id="modal-body"> <md-input-container> <md-checkbox ng-model="vm.content.data.newE911Number.default"> Set as Default Company E911 Address </md-checkbox> </md-input-container> <br> <md-input-container> <input type="text" name="address1" required ng-model="vm.content.data.newE911Number.address1" placeholder="address"> <div ng-messages="registerE911.address1.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" name="city" required ng-model="vm.content.data.newE911Number.community" placeholder="city"> <div ng-messages="registerE911.city.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <br> <md-input-container> <md-select ng-model="vm.content.data.newE911Number.state" class="bottom-border-only" name="e911State" required placeholder="state"> <md-option ng-repeat="state in vm.content.data.billingStates" ng-value="state.state_abbr"> {{state.state_name}} </md-option> </md-select> <div ng-messages="registerE911.state.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" name="zipcode" required ng-model="vm.content.data.newE911Number.postalcode" placeholder="zipcode"> <div ng-messages="registerE911.zipcode.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"> </i> Cancel </button> <button class="btn btn-primary btn-md" ng-disabled="registerE911.$invalid" type="submit"> <i class="fa fa-save" style="margin-right: 10px"></i> Register </button> </div> </form>'),a.put("views/settings/out-of-office-settings.html",'<md-switch class="md-warn" ng-model="currentStatus" ng-click="setOutOfOfficeStatus()"> {{ currentStatus ? \'Responder ON\' : \'Responder OFF\'}} </md-switch> <md-input-container style="width: 50%"> <textarea type="text" ng-model="response" placeholder="Put your out of office response here..."></textarea> </md-input-container> <br> <md-button ng-click="updateResponse()" class="md-primary md-raised"> Update Information </md-button>'),a.put("views/settings/register-e911-modal.html",'<div class="modal-header"> <!-- <span class="fa-stack fa-2x modal-icon"> --> <!-- <i class="fa fa-circle fa-stack-2x"></i> --> <!-- <i class="fa fa-paper-plane fa-stack-1x fa-inverse"></i> --> <!-- </span> --> <span class="cls-header-modal">Register E911 Phone Number</span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <form name="registerE911" id="register-e911-modal" ng-submit="vm.content.data.modalRegister(vm.content.data.user)"> <div class="modal-body" id="modal-body"> <md-input-container> <md-select ng-model="vm.content.data.newE911Number.number" name="number" required placeholder="Select Telephone Number"> <md-option ng-repeat="(uuid, did) in vm.content.data.e911CandidateDIDs" ng-if="vm.content.data.DIDIsUnregistered(did)" ng-value="did"> {{did.destination_number | tel}} </md-option> </md-select> <div ng-messages="registerE911.number.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <br> <md-input-container> <input type="text" name="address1" required ng-model="vm.content.data.newE911Number.address1" placeholder="address"> <div ng-messages="registerE911.address1.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" name="city" required ng-model="vm.content.data.newE911Number.community" placeholder="city"> <div ng-messages="registerE911.city.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <br> <md-input-container> <md-select ng-model="vm.content.data.newE911Number.state" class="bottom-border-only" name="e911State" required placeholder="state"> <md-option ng-repeat="state in vm.content.data.billingStates" ng-value="state.state_abbr"> {{state.state_name}} </md-option> </md-select> <div ng-messages="registerE911.state.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" name="zipcode" required ng-model="vm.content.data.newE911Number.postalcode" placeholder="zipcode"> <div ng-messages="registerE911.zipcode.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"> </i> Cancel </button> <button class="btn btn-primary btn-md" ng-disabled="registerE911.$invalid" type="submit"> <i class="fa fa-save" style="margin-right: 10px"></i> Register </button> </div> </form>'),a.put("views/settings/ringtone-settings.html",'<md-content class="user-settings-content ringtones"> <md-switch class="md-warn" ng-model="show_notifications" ng-click="setNotificationsStatus()"> {{ show_notifications ? \'Notifications ON\' : \'Notifications OFF\'}} </md-switch> <md-button ng-click="showRingtonesModal()" class="md-primary md-raised modal-btn"> Manage My Ringtones <i class="fa fa-gear"></i> </md-button> <br> <md-input-container class="ringtone-select-container"> <label>Call Ringtone</label> <md-select ng-model="callRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} <span ng-if="isDomainDefault(ringtone, \'call\')"> (Default) </span> </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'call\'" ng-click="playRingtone(callRingtone, \'call\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'call\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="callRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-input-container class="ringtone-select-container"> <label>Text Ringtone</label> <md-select ng-model="textRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} <span ng-if="isDomainDefault(ringtone, \'text\')"> (Default) </span> </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'text\'" ng-click="playRingtone(textRingtone, \'text\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'text\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="textRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-input-container class="ringtone-select-container"> <label>Chat Ringtone</label> <md-select ng-model="chatRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} <span ng-if="isDomainDefault(ringtone, \'chat\')"> (Default) </span> </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'chat\'" ng-click="playRingtone(chatRingtone, \'chat\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'chat\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="chatRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <md-input-container class="ringtone-select-container"> <label>Video Invite Ringtone</label> <md-select ng-model="videoInviteRingtone" class="ringtone-select"> <md-option ng-repeat="ringtone in ringtones()" ng-value="ringtone"> {{ringtone.file_title}} <span ng-if="isDomainDefault(ringtone, \'videoInvite\')"> (Default) </span> </md-option> </md-select> <i class="fa fa-lg fa-play-circle ringtone-play-btn" ng-show="ringtonePlaying != \'videoInvite\'" ng-click="playRingtone(videoInviteRingtone, \'videoInvite\')"> </i> <i class="fa fa-lg fa-stop-circle ringtone-stop-btn" ng-show="ringtonePlaying == \'videoInvite\'" ng-click="stopRingtone()"> </i> <rzslider rz-slider-model="videoInviteRingtoneVolume" rz-slider-options="{floor: 0, ceil: 10}" class="ringtone-slider"> </rzslider> </md-input-container> <br> <md-button class="md-primary md-raised" ng-click="updateRingtones()"> Update Information </md-button> </md-content>'),a.put("views/settings/settings.html",'<div id="settings-container"> <md-tabs active="activeTab" md-selected="activeSettingTab" ng-show="!emulateProfileEditing" justified="false" class="settings-tabset"> <md-tab index="0" label="My Profile" ng-init="setUploaderOption()"> <user-profile-edit uploader="uploader" user="user" trigger-upload="triggerUpload()" uploader-option="uploaderOption"> </user-profile-edit> </md-tab> <!--Company Setup--> <md-tab index="1" label="Company Setup" ng-if="isAdminGroupOrGreater()" class="clearfix"> <div class="settings-content-container"> <div class="menu-box cls-company-setup-mnu"> <div class="btn-group" ng-model="tabs.activeTab" bs-radio-group> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'users\'}" ng-click="changeTemplate(\'users\')" tooltip-placement="bottom" uib-tooltip="Add / edit users"> <i class="fa fa-users cls-color-blue-tkg" style="margin-right: 10px"> </i> Users </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'chat-macros\'}" ng-click="changeTemplate(\'chat-macros\')" tooltip-placement="bottom" uib-tooltip="Add / Edit Chat Macros"> <i class="fa fa-keyboard-o cls-color-blue-tkg" style="margin-right: 10px"> </i> Chat Macros </button> <button ng-if="1==2" class="btn btn-default" ng-class="{currentbutton : templateInclude===\'queues\'}" ng-click="changeTemplate(\'queues\')" tooltip-placement="bottom" uib-tooltip="Manage incoming calls"> <i class="fa fa-signal cls-color-blue-tkg" style="margin-right: 10px"> </i> Call Queues </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'audio\'}" ng-click="changeTemplate(\'audio\')" tooltip-placement="bottom" uib-tooltip="Manage your sound files"> <i class="fa fa-file-sound-o cls-color-blue-tkg" style="margin-right: 10px"> </i> Audio </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'permissions\'}" ng-click="changeTemplate(\'permissions\')" tooltip-placement="bottom" uib-tooltip="Who can view what"> <i class="fa fa-file-sound-o cls-color-blue-tkg" style="margin-right: 10px"> </i> Permissions </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'status\'}" ng-click="changeTemplate(\'status\')" tooltip-placement="bottom" uib-tooltip="Availability options"> <i class="fa fa-address-card-o cls-color-blue-tkg" style="margin-right: 10px"> </i> Status </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'attendant\'}" ng-click="changeTemplate(\'attendant\')" tooltip-placement="bottom" uib-tooltip="Set up Auto Attendant"> <i class="fa fa-gears cls-color-blue-tkg" style="margin-right: 10px"> </i> Auto Attendant Setup </button> <button class="btn btn-default" ng-class="{currentbutton : templateInclude===\'number-setup\'}" ng-click="changeTemplate(\'number-setup\')" tooltip-placement="bottom" uib-tooltip="Number Setup"> <i class="fa fa-phone cls-color-blue-tkg" style="margin-right: 10px"> </i> Number Setup </button> <div class="admin-company-controls" ng-show="isKotterTechOrGreater() && templateInclude!==\'attendant\'"> <md-autocomplete class="company-emulate" md-selected-item="test.emulatedCompany" md-search-text-change="searchTextChange(test.searchText)" md-search-text="test.searchText" md-selected-item-change="setEmulatedCompany(test.emulatedCompany)" md-items="domain in getDomainsBySearchText()" md-item-text="domain.domain_name" md-min-length="0" placeholder="- Emulate Company -"> <md-item-template> <span md-highlight-text="test.searchText" md-highlight-flags="^i"> {{domain.domain_name}} </span> </md-item-template> <md-not-found> No domains matching "{{test.searchText}}" were found. </md-not-found> </md-autocomplete> <md-switch class="md-warn" class="company-disable" ng-show="!isKotterGroupCompany() && test.emulatedCompany" ng-model="currentDomainStatus" ng-click="setCompanyStatus()"> {{ currentDomainStatus ? \'Company Enabled\' : \'Company Disabled\'}} </md-switch> <md-button class="md-warn md-danger md-raised delete-user-btn" ng-show="!isKotterGroupCompany() && test.emulatedCompany" ng-click="deleteDomain()"> Delete Company </md-button> </div> </div> </div> <company-setup-user-tab class="company-setup-user-tab company-setup-tab" domain="getCurrentDomain()" uploader="uploader" trigger-upload="triggerUpload()" ng-if="templateInclude === \'users\'"> </company-setup-user-tab> <company-setup-chat-macros class="company-setup-chat-macros-tab company-setup-tab" domain="getCurrentDomain()" ng-if="templateInclude === \'chat-macros\'"> </company-setup-chat-macros> <company-setup-auto-attendant class="company-setup-auto-attendant company-setup-tab" ng-if="templateInclude === \'attendant\'"> </company-setup-auto-attendant> <company-setup-call-queues class="company-setup-call-queues company-setup-tab" ng-if="templateInclude === \'queues\'"> </company-setup-call-queues> <company-setup-audio-tab class="company-setup-audio-tab company-setup-tab" domain="getCurrentDomain()" ng-if="templateInclude === \'audio\'"> </company-setup-audio-tab> <company-setup-permissions class="company-setup-permissions company-setup-tab" ng-if="templateInclude === \'permissions\' && isAdminGroupOrGreater()"> </company-setup-permissions> <company-setup-status-tab class="company-setup-user-tab company-setup-tab" ng-if="templateInclude === \'status\'"> </company-setup-status-tab> <company-setup-number-setup-tab class="company-setup-number-tab company-setup-tab" domain="getCurrentDomain()" ng-if="templateInclude === \'number-setup\'"> </company-setup-number-setup-tab> </div> <div class="col-md-12" style="display: none"> <ul uib-pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"> </ul> </div> </md-tab> <md-tab index="2" label="Contact Groups" md-active="tabContactGroup" md-on-select="clearSelectionTab()"> <div class="cls-company-setup-mnu"> <div class="cls-cont-contact-groups" ng-if="templateInclude"> <contact-groups-manager update-group-viewers="updateGroupViewers"> </contact-groups-manager> </div> </div> </md-tab> <md-tab ng-if="1==3" index="3" label="Billing"> <div class="cls-company-setup-mnu"> <div class="btn-group" ng-model="tabs.activeTab" bs-radio-group> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuActBill===\'1\'}" ng-click="mnuSelectedBill(\'1\')" tooltip-placement="bottom" uib-tooltip="summary..."> <i class="fa fa-align-left cls-color-blue-tkg" style="margin-right: 10px"> </i> Summary </button> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuActBill===\'2\'}" ng-click="mnuSelectedBill(\'2\')" tooltip-placement="bottom" uib-tooltip="make a payment..."> <i class="fa fa-money cls-color-blue-tkg" style="margin-right: 10px"> </i> Make a Payment </button> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuActBill===\'3\'}" ng-click="mnuSelectedBill(\'3\')" tooltip-placement="bottom" uib-tooltip="services..."> <i class="fa fa-hand-o-right cls-color-blue-tkg" style="margin-right: 10px"> </i> Services </button> <button class="btn btn-default" ng-class="{opcSelComp : btnMnuActBill===\'4\'}" ng-click="mnuSelectedBill(\'4\')" tooltip-placement="bottom" uib-tooltip="dashboard..."> <i class="fa fa-pie-chart cls-color-blue-tkg" style="margin-right: 10px"> </i> Dashboard </button> </div> <div class="cls-cont-company-setup" ng-if="templateIncludeBill" ng-controller="BillingCtrl"> <div ng-include="\'views/billing/\'+templateIncludeBill+\'.html\'"></div> </div> </div> </md-tab> <!-- <md-tab index="4" label="User Productivity Report" class="call-stats-tab">\n            <div class="productivity-stats-container">\n                <div class="date-picker  col-md-3">\n                    <div class="input-group">\n                        <span class="input-group-addon"\n                              ng-click="OpenfromDate()">\n                            <i class="fa fa-calendar"></i>\n                        </span>\n                        <input type="text"\n                               class="form-control"\n                               uib-datepicker-popup="{{dateFormat}}"\n                               ng-model="fromDate"\n                               name="fromDate"\n                               is-open="fromDatePopup.opened"\n                               datepicker-options="fromDateOptions"\n                               ng-required="true"\n                               close-text="Close"\n                               ng-click="OpenfromDate()"\n                               ng-change="ChangeToMinDate(fromDate)"\n                               placeholder="From" />\n                    </div>\n                </div>\n                <div class="date-picker col-md-3">\n                    <div class="input-group">\n                        <span class="input-group-addon"\n                              ng-click="OpentoDate()">\n                            <i class="fa fa-calendar"></i>\n                        </span>\n                        <input type="text"\n                               class="form-control"\n                               uib-datepicker-popup="{{dateFormat}}"\n                               ng-model="toDate"\n                               name="toDate"\n                               is-open="toDatePopup.opened"\n                               datepicker-options="toDateOptions"\n                               ng-required="true"\n                               close-text="Close"\n                               ng-click="OpentoDate()"\n                               placeholder="To"\n                        />\n                    </div>\n                </div>\n                <div class="col-md-2">\n                    <button class="btn btn-default"\n                            ng-click="updateProductivityDateRange()"\n                            ng-disabled="">\n                        Update\n                    </button>\n                </div>\n                <div class=" col-md-4">\n                    <md-input-container ng-init="prodStatsUser==user.id">\n                        <label>Choose a User</label>\n                        <md-select ng-model="prodStatsUser"\n                                   tooltip-placement="bottom"\n                                   uib-tooltip="{{tips.settings.select_user}}"\n                                   ng-change="changeProductivityStatsUser()">\n                            <md-option ng-value="user.id">\n                                <strong>\n                                    {{user.contact_name_given}}\n                                    {{user.contact_name_family}}\n                                </strong>\n                            </md-option>\n                            <md-option ng-if="contact.contact_type==\'user\' && contact.user_uuid !== user.id"\n                                       ng-repeat="contact in userContacts"\n                                       ng-value="contact.user_uuid">\n                                {{contact.contact_name_full}}\n                            </md-option>\n                        </md-select>\n                    </md-input-container>\n                </div>\n                <div id="user-productivity"\n                     ng-show="showStats">\n                    <div class="col-sm-12">\n                        <h4>Productivity Report - {{prodTitle}}</h4>\n                    </div>\n                    <div class="col-sm-12">\n                        <button class="btn btn-default"\n                                ng-show="productivityStats"\n                                ng-click="loadCompanyProductivity()">\n                            Show Company Stats\n                        </button>\n                        <button class="btn btn-default"\n                                ng-show="productivityCompanyStats"\n                                ng-click="loadUserProductivity(user.id)">\n                            Show User Stats\n                        </button>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-5 col-sm-12 productivity-user">\n                            <div class="settings-avatar">\n                                <div ng-if="productivityStats && productivityUser.contact_profile_image"\n                                     class="settings-avatar" >\n                                    <img src="{{pathImgProfile + productivityUser.contact_profile_image}}"\n                                         class="cls-settings-img-profile"\n                                         alt=""/>\n                                </div>\n                                <div ng-if="productivityStats && !productivityUser.contact_profile_image"\n                                     class="cls-settings-img-profile-null"\n                                     style="background-color: {{ productivityUser.contact_profile_color ? productivityUser.contact_profile_color : \'\' }};" >\n                                    <i class="fa fa-user"\n                                       style="font-size: 75px; opacity: 0.6;"\n                                       aria-hidden="true" >\n                                    </i>\n                                </div>\n                                <div ng-if="productivityCompanyStats"\n                                     class="cls-settings-img-profile-null"\n                                     style="background-color: #033860;" >\n                                    <i class="fa fa-users"\n                                       style="font-size: 65px; opacity: 0.6;"\n                                       aria-hidden="true" >\n                                    </i>\n                                </div>\n                            </div>\n                            <span ng-if="productivityStats"\n                                  class="staff-name-display">\n                                {{productivityUser.contact_name_full}}\n                            </span>\n                            <span ng-if="productivityCompanyStats"\n                                  class="staff-name-display">\n                                {{user.domain.domain_description}}\n                            </span>\n                        </div>\n                        <div class="col-lg-7 col-md-12 productivity-chart">\n                            <div google-chart chart="myChartObject"\n                                 style="border:1px inset black;padding:0; max-width:400px">\n                            </div>\n                        </div>\n                    </div>\n                    <table id = "data-table-under"\n                           ng-if="productivityStats"\n                           class="table table-bordered table-hover table-striped cls-tab-call-history">\n                        <thead>\n                            <tr>\n                                <th>\n                                    <a href\n                                       ng-click="sortBy(\'created_at\')"\n                                       tooltip-placement="top-left"\n                                       uib-tooltip="{{tips.fileshare.sortbydate}}">\n                                        Date / Time\n                                        <i class="fa fa-{{!reverse && predicate===\'created_at\'?\'chevron-up\':\'chevron-down\'}}">\n                                        </i>\n                                    </a>\n                                </th>\n                                <th>\n                                    <a href\n                                       ng-click="sortBy(\'recipient_email\')"\n                                       tooltip-placement="top-left"\n                                       uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">\n                                        Status\n                                        <i class="fa fa-{{!reverse && predicate===\'recipient_email\'?\'chevron-up\':\'chevron-down\'}}">\n                                        </i>\n                                    </a>\n                                </th>\n                                <th>Duration</th>\n                            </tr>\n                        </thead>\n                        <tbody class="cls-body-table-pos">\n                            <tr ng-repeat="status in filterData = (productivityStats | orderBy : predicate :reverse)">\n                                <td>{{::status.changed_at | amDateFormat:\'MMM D, YYYY h:mm a\'}}</td>\n                                <td>{{status.status_name}}</td>\n                                <td>{{status.duration}}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <table ng-if="productivityCompanyStats"\n                           class="table table-bordered table-hover table-striped cls-tab-call-history">\n                        <thead>\n                            <tr>\n                                <th>\n                                    <a href\n                                       ng-click="sortBy(\'created_at\')"\n                                       tooltip-placement="top-left"\n                                       uib-tooltip="{{tips.fileshare.sortbydate}}">\n                                        Date / Time\n                                        <i class="fa fa-{{!reverse && predicate===\'created_at\'?\'chevron-up\':\'chevron-down\'}}">\n                                        </i>\n                                    </a>\n                                </th>\n                                <th>\n                                    <a href ng-click="sortBy(\'recipient_email\')"\n                                       tooltip-placement="top-left"\n                                       uib-tooltip="{{tips.fileshare.sortbyrecipientemail}}">\n                                        Status\n                                        <i class="fa fa-{{!reverse && predicate===\'recipient_email\'?\'chevron-up\':\'chevron-down\'}}"></i>\n                                    </a>\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody class="cls-body-table-pos">\n                            <tr ng-if="contact.contact_type==\'user\' && contact.contact_name_full"\n                                ng-repeat="contact in filterData = (userContacts | orderBy : predicate :reverse)">\n                                <td class="col-sm-3">\n                                    {{contact.contact_name_full}}\n                                </td>\n                                <td class="col-sm-9">\n                                    <table class="table table-bordered table-striped status-table">\n                                        <thead>\n                                            <tr>\n                                                <th ng-repeat="userStats in companyUserStats[contact.user_uuid]"\n                                                    class="status-column">\n                                                    {{userStats.status}}\n                                                </th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr>\n                                                <td ng-repeat="userStats in companyUserStats[contact.user_uuid]">\n                                                    {{userStats.duration | number : 2}}\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <div ng-show="showTable" style="text-align: center">\n                        <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul>\n                    </div>\n                </div>\n            </div>\n        </md-tab> --> <md-tab ng-if="1==2" index="5" label="Call Statistics" class="call-stats-tab"> <div class="call-stats-container"> <div class="date-picker call-stats-date"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </div> <div class="date-picker call-stats-date"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"> <i class="fa fa-calendar"></i> </span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" placeholder="To"> </div> </div> <div class="call-stats-filter"> <div class="input-group"> <span class="input-group-addon" title="Filter calls"> <i class="fa fa-filter"></i> </span> <input class="form-control" type="text" ng-model="callStatsEmployee" placeholder="Filter Results By Employee"> </div> </div> <stats-table search-field="callStatsEmployee" from-date="fromDate" to-date="toDate"> </stats-table> </div> </md-tab> <md-tab ng-if="isKotterTechOrGreater()" index="6" label="TKG Admin" class=""> <div class="settings-content-container"> <div class="menu-box cls-company-setup-mnu"> <div class="btn-group" ng-model="tabs.activeTab" bs-radio-group> <button class="btn btn-default" ng-class="{currentbutton : btnMnuActAdmin===\'1\'}" ng-click="mnuSelectedAdmin(\'1\')" tooltip-placement="bottom" uib-tooltip="manage agencies ..."> <i class="fa fa-users cls-color-blue-tkg" style="margin-right: 10px"> </i> Agencies </button> <button class="btn btn-default" ng-class="{currentbutton : btnMnuActAdmin===\'2\'}" ng-click="mnuSelectedAdmin(\'2\')" tooltip-placement="bottom" uib-tooltip="group codes ..."> <i class="fa fa-key cls-color-blue-tkg" style="margin-right: 10px"> </i> Group Codes </button> <button ng-if="1==2" class="btn btn-default" ng-class="{currentbutton : btnMnuActAdmin===\'3\'}" ng-click="mnuSelectedAdmin(\'3\')" tooltip-placement="bottom" uib-tooltip="services..."> <i class="fa fa-magic cls-color-blue-tkg" style="margin-right: 10px"> </i> ...???... </button> <button ng-if="1==2" class="btn btn-default" ng-class="{currentbutton : btnMnuActAdmin===\'4\'}" ng-click="mnuSelectedAdmin(\'4\')" tooltip-placement="bottom" uib-tooltip="dashboard..."> <i class="fa fa-lock cls-color-blue-tkg" style="margin-right: 10px"> </i> ...???... </button> </div> </div> <admin-agencies-tab class="content-box company-setup-user-tab company-setup-tab" ng-show="templateIncludeAdmin === \'agencies\'"> </admin-agencies-tab> <admin-group-codes-tab class="content-box company-setup-user-tab company-setup-tab" ng-show="templateIncludeAdmin === \'groupcodes\'"> </admin-group-codes-tab> </div> </md-tab> <md-tab index="7" label="Bridge Downloads" class="call-stats-tab"> <div class="settings-content-container"> <h3>Available Bridge Downloads</h3> <div class="col-sm-6 offset-sm-3"> <div class="jumbotron" style="padding: 20px"> <ul style="margin-left: 25px"> <li>Bridge Desktop: <a href="https://onescreen.kotter.net/BridgeDesktopSetup-Current.exe" alt="Download Bridge Desktop" title="Click to download Bridge Desktop">Download Here</a></li> <li>Bridge Mobile (Android): Coming Soon!</li> <li>Bridge Mobile (iOS): Coming Soon!</li> <li>Bridge Screenshot : <a href="https://chrome.google.com/webstore/detail/the-kotter-group-screensh/emkhfdblfibefdhibmbeiefiolojmjbm" target="_blank">Download Here </a></li> </ul> </div> </div> </div> </md-tab> </md-tabs> </div>'),
a.put("views/settings/user-info-settings.html",'<md-content class="user-settings-content"> <md-input-container> <input type="text" ng-value="user.contact_name_given" ng-model="settings.firstName" placeholder="first name"> </md-input-container> <md-input-container> <input type="text" ng-value="user.contact_name_family" ng-model="settings.lastName" placeholder="last name"> </md-input-container> <md-input-container> <input type="text" ng-value="user.user_ext" ng-model="settings.phoneExtension" placeholder="extension" ng-readonly="true"> </md-input-container> <md-input-container> <input type="text" ng-value="user.email_address" ng-model="settings.email" placeholder="email"> </md-input-container> <md-input-container> <input type="text" phone-input ng-value="user.phone_number" ng-model="settings.phoneNumber" placeholder="phone number"> </md-input-container> <md-input-container> <label>Time zone</label> <md-select ng-model="settings.timeZone"> <md-option ng-repeat="timezone in timeZones" ng-value="timezone.display"> {{timezone.display}} </md-option> </md-select> </md-input-container> <md-input-container> <input type="text" ng-model="did_extension" ng-value="::user.symphony_user_settings.sms_phone_number | tel" placeholder="DID extension" ng-readonly="true"> </md-input-container> <br> <md-button ng-click="triggerUpdate()" class="md-primary md-raised"> Update Information </md-button> </md-content>'),a.put("views/settings/user-profile-edit.html",'<div class="settings-profile-row"> <div class="settings-avatar"> <img ng-src="{{avatarPath}}" ng-show="avatarPath" class="settings-avatar-img" alt=""> <div class="cls-settings-img-profile-null" style="background-color: {{ user.profile_color ? user.profile_color : \'\' }}" ng-show="!avatarPath"> <i class="fa fa-user" style="font-size: 75px; opacity: 0.4" aria-hidden="true"> </i> </div> <md-button ng-if="uploader.queue.length>0" ng-click="uploader.uploadAll()" class="md-raised md-secondary"> Upload </md-button> <md-button ng-click="triggerContactUpload()" class="md-raised md-secondary"> Change Avatar </md-button> <input type="file" nv-file-select uploader="uploader" id="cloud-upload" style="display: none"> </div> <div class="profile-update-include"> <div id="profileUpdate"> <div ng-material-collapse ng-if="true" open> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> My Profile Info </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <user-info-settings user="user"> </user-info-settings> </div> </div> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Change Password </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <change-password-settings user="user"> </change-password-settings> </div> </div> <div ng-material-collapse ng-if="true"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex>Voicemail</h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <voicemail-settings user="user"> </voicemail-settings> </div> </div> <div ng-material-collapse ng-if="true" id="other-settings-dropdown"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Notifications </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <ringtone-settings user="user"> </ringtone-settings> </div> </div> <div ng-material-collapse ng-if="true" id="other-settings-dropdown"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> Out Of Office Text Responder </h2> </div> </md-toolbar> <div uib-collapse="isCollapsedVertical" class="collapsible-content"> <out-of-office-settings user="user"> </out-of-office-settings> </div> </div> </div> </div> </div>'),a.put("views/settings/voicemail-settings.html",'<md-content class="user-settings-content voicemail"> <form name="voicemailForm" id="voicemailForm"> <md-switch class="md-warn" ng-model="isActive" ng-click="setVoicemailStatus()"> {{ isActive ? \'Voicemail is ON\' : \'Voicemail is OFF\'}} </md-switch> <md-input-container> <input type="password" name="voicemail_password" ng-value="user.voicemail.voicemail_password" ng-model="settings.voicemail_password" ng-minlength="4" md-minlength="4" ng-disabled="!isActive" placeholder="4-digit PIN"> <div ng-messages="voicemailForm.voicemail_password.$error"> <div ng-message="minlength"> PIN must be 4 digits </div> </div> </md-input-container> <md-input-container> <input type="email" name="voicemail_mail_to" ng-value="user.voicemail.voicemail_mail_to" ng-model="settings.voicemail_mail_to" ng-disabled="!isActive" placeholder="Forwarding Email"> <div ng-messages="voicemailForm.voicemail_mail_to.$error"> <div ng-message="email"> Must be valid email address </div> </div> </md-input-container> <br> <!--  For FMFM, to be re-enabled later.\n        <md-switch class="md-warn"\n                   ng-model="settings.isNoAnswerActive"\n                   ng-click="setNoAnswerStatus()">\n            {{ settings.isNoAnswerActive ? \'No Answer is ON\' : \'No Answer is OFF\'}}\n        </md-switch>\n\n        <md-input-container>\n            <input type="text"\n                   phone-input\n                   ng-value="user.extension.forward_no_answer_destination"\n                   ng-model="settings.noAnsNumber"\n                   placeholder="No Answer Number"\n                   ng-disabled="!settings.isNoAnswerActive">\n        </md-input-container>\n        \n        <md-switch class="md-warn"\n                   ng-model="settings.isNotRegisterActive"\n                   ng-click="setNotRegisteredStatus()">\n            {{ settings.isNotRegisterActive ? \'Not Registered is ON\' : \'Not Registered is OFF\'}}\n        </md-switch>\n\n        <md-input-container>\n            <input type="text"\n                   phone-input\n                   ng-value="user.extension.forward_user_not_registered_destination"\n                   ng-model="settings.noRegNumber"\n                   placeholder="Not Registered  Number"\n                   ng-disabled="!settings.isNotRegisterActive">\n        </md-input-container>\n--> <md-button class="md-primary md-raised" ng-click="triggerUpdate()" ng-disabled="!isActive" form="voicemailForm" type="submit"> Update Information </md-button> <br> <div class="audio-selector-container"> <md-button class="md-default md-raised vm-button" ng-click="showAudioModal(getCurrentGreeting(user.voicemail.greeting_id), \'voicemail-greeting\')" ng-if="user.voicemail.greeting_id" type="submit"> <i class="fa fa-play"></i> Play Current Greeting </md-button> <md-button class="md-default md-raised vm-button" ng-click="showAudioSelector = !showAudioSelector" type="submit"> <i class="fa fa-edit"></i> Change Voicemail Greeting </md-button> <br> <audio-selector category="\'voicemail\'" settings="settings" ng-show="showAudioSelector" user="user"> </audio-selector> </div> <br> </form> </md-content>'),a.put("views/simple-uploader.html",'<input class="form-control" accept="accept" type="file" style="display: none" file-model="fileModel">'),a.put("views/sms-new.html",'<div class="sms-container" ng-if="!showCompose" ng-class="{\'with-input-container\' : currentThread(), \n        \'with-side-panel\' : search.showSearch}"> <div class="sms-header"> <div class="header-title"> <h3>Text Messages <span ng-if="isEmulatedUser()"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> </div> <div class="header-contact"> <div ng-if="currentThread()"> <sms-contact> </sms-contact> </div> <div ng-if="!currentThread()"> <button class="btn btn-success" ng-show="!currentThread() && !isEmulatedUser()" ng-click="toggleComposeMode()"> <i class="fa fa-paper-plane" aria-hidden="true"></i> New Text</button> </div> </div> <div class="header-middle"> <div ng-if="currentThread()"> <button class="btn btn-success btn-sm" ng-click="showAllConversations()"> Return to Conversations </button> </div> <div ng-if="!currentThread()"> <div class="input-group" ng-if="emulationStatus[\'sms\'].manager===\'true\'"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{::tips.emulate.choose_emulate_user}}" ng-change="setEmulationUser(selectEmulateUser, \'sms\')"> <md-option ng-value="user.id"> <strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong> </md-option> <md-option ng-repeat="emUser in emulationStatus[\'sms\'].watched" ng-if="emUser.user_uuid !== user.id" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <div class="header-search" ng-if="!search.showSearch"> <div class="input-group sms-search" ng-show="!enableCopyMode"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-model="search.searchText" ng-enter="sendSearch()" placeholder="Search Messages" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.submit_search}}"> </div> <div ng-show="enableCopyMode"> Select the text messages you want to export to {{showExportTarget()}}<br> <span ng-show="(copySelected | objLength)>0"> {{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to {{showExportTarget()}} </span> </div> </div> </div> <div class="sms-thread-list" ng-if="!currentThread()"> <div class="thread-header"> <div class="announce"> <h4>Conversations</h4> <p>Click a row to view the messages in the conversation.</p> </div> <div class="blacklist"> <button class="btn btn-default" tooltip-placement="left" uib-tooltip="{{::tips.sms.manage_blacklist}}" ng-click="showBlacklistTableModal()">Blacklist</button> </div> </div> <div class="table-header"> <table class="table table-bordered table-hover table-striped cls-tab-call-history" style="margin-bottom: 0px"> <thead> <tr> <th style="width: 40%"> <a href ng-click="sortThreadBy(\'contact\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbycontact}}"> Contact <i class="fa fa-{{!threadreverse && threadpredicate===\'contact\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 10%"> <a href ng-click="sortThreadBy(\'unread\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbyunread}}"> Unread <i class="fa fa-{{!threadreverse && threadpredicate===\'unread\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th style="width: 50%"> <a href ng-click="sortThreadBy(\'mostrecent\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbymostrecent}}"> Most Recent Message <i class="fa fa-{{!threadreverse && threadpredicate===\'mostrecent\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> </tr> </thead> </table> </div> <div class="thread-content"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-if="availThreads().length==0"> <td colspan="3"> You do not have any active threads at this time. </td> </tr> <tr ng-repeat="thread in filteredThreads = (availThreads() | orderBy : threadSortFunction : threadreverse)" ng-show="thread.deleted!==\'true\'" ng-click="setCurrentThread(thread.thread_uuid)"> <td ng-if="thread.contact" style="width: 40%"> <ul class="profile-display"> <li ng-if="thread.contact.contact_profile_image" class="profile_display_45"> <img src="{{imageBaseUrl}}{{thread.contact.contact_profile_image}}" class="sms_profile_image"></li> <li ng-if="!thread.contact.contact_profile_image" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{thread.contact.contact_profile_color}} !important"> <i class="fa fa-user"></i> </label> </li> <li style="display: inline-block"> <strong> {{thread.contact.contact_name_given}} {{thread.contact.contact_name_family}} </strong> <br> {{thread.contact_phone_number | tel}} </li> </ul> </td> <td ng-if="thread.noncontact" style="width: 40%"> <ul class="profile-display"> <li class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{thread.noncontact.color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="thread.noncontact.name" style="display: inline-block"> <span class="capitalize"> {{thread.noncontact.name}} </span> <br> <strong> {{thread.contact_phone_number | tel}} </strong> </li> <li ng-if="!thread.noncontact.name" style="display: inline-block"> <strong> {{thread.contact_phone_number | tel}} </strong> </li> </ul> </td> <td ng-if="!thread.noncontact && !thread.contact" style="width: 40%"> <ul class="profile-display"> <li class="profile_display_45"> <label class="sms_profile_icon" style=""> <i class="fa fa-user"></i> </label> </li> <li style="display: inline-block"> <strong> {{thread.contact_phone_number | tel}} </strong> </li> </ul> </td> <td style="width: 10%">{{thread.unread_count}}</td> <td style="width: 50%"> <span class="smfont cls-color-blue-tkg" ng-if="isToday(thread.most_recent.created_at)"> {{thread.most_recent.created_at | toLocalTime | amDateFormat: \'h:mm a\'}} </span> <span class="smfont cls-color-blue-tkg" ng-if="!isToday(thread.most_recent.created_at)"> {{thread.most_recent.created_at | toLocalTime | amDateFormat: \'ddd, MMM D, h:mm a\'}} </span> <br> {{thread.most_recent.message.length > 75 ? thread.most_recent.message.substring(0,75)+\' ...\' : thread.most_recent.message}}</td> </tr> </tbody> </table> </div> </div> <div class="sms-message-actions tableclass" ng-if="currentThread()"> <span class="tablecell" ng-show="!enableCopyMode" ng-click="toggleCopyMode()"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_hawksoft_copy}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.toggle_generic_copy}}"> </span> <span class="tablecell" ng-show="enableCopyMode"> <i class="fa fa-undo fa-2x" ng-click="toggleCopyMode()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.cancel_copy_sms}}"></i> </span> <span class="tablecell" ng-show="enableCopyMode"> <i class="fa fa-floppy-o fa-2x" ng-click="saveCopiedTexts()" tooltip-placement="bottom-right" uib-tooltip="{{showSaveCopyToolTip()}}"></i> </span> <span class="tablecell" ng-if="!hasSearchResults() && !isEmulatedUser()"> <i class="fa fa-trash-o fa-2x" ng-click="removeThread()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.delete_thread}}"></i> </span> </div> <div class="blacklist-box" ng-if="currentThread() && !hasSearchResults() && !isEmulatedUser()"> <i class="fa fa-times fa-2x" ng-click="addThreadToBlackList()" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.blacklist}}"></i> </div> <div class="sms-message-list" ng-if="currentThread()"> <sms-message id="sms-{{message.message_uuid}}" ng-if="!hasSearchResults()" ng-repeat="message in currentThread().messages | filter:filterText" message="message" ng-click="enableCopyMode && copyText(message.message_uuid)" ng-class="{\'copy-highlight\': (search.highlightMessage === message.message_uuid \n            || copySelected[message.message_uuid])}" highlight-message="search.highlight" copy-selected="copySelected" copy-text="copyText" remove-message="removeMessage" data-message-uuid="{{message.message_uuid}}"> </sms-message> <sms-message id="sms-{{message.message_uuid}}" ng-if="hasSearchResults()" ng-repeat="message in currentThread().searchInfo.messages | filter:filterText" message="message" ng-click="enableCopyMode && copyText(message.message_uuid)" ng-class="{\'copy-highlight\': (search.highlightMessage === message.message_uuid \n                || copySelected[message.message_uuid])}" copy-text="copyText" remove-message="removeMessage" data-message-uuid="{{message.message_uuid}}"> </sms-message> <div id="sms-bottom">&nbsp;</div> </div> <div ng-if="currentThread() && hasSearchResults()" ng-click="goToRecentMessages()" class="go-to-current"> Click Here to jump to recent messages. <i class="fa fa-down-arrow"></i> </div> <div class="input-container" ng-if="currentThread()"> <span class="sms-input"> <div class="textarea-wrapper"> <div class="sms-create-body"> <div class="input-group message-input-container"> <span class="input-group-addon mms"> <label style="width: 100%; height: 100%; cursor: pointer; padding: 5px" tooltip-placement="top-left" uib-tooltip="{{::tips.sms.add_media}}"> <i class="fa fa-paperclip" style="font-size: 20px"></i> <input ng-if="uploader" type="file" ng-disabled="isDisabled()" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </span> <textarea class="form-control" ng-disabled="isDisabled()" sms-enter="deliverSmsMessage(\'thread\')" style="padding-right: 35px" ng-model="delivery.message" ng-attr-placeholder="Type your message here" msd-elastic id="smsInput">\n                        </textarea> <span style="margin-left: -30px; z-index: 999999; padding-top: 5px; height:22px" emoji-picker="delivery.message" placement="right" title="Emoji" recent-limit="10" output-format="unicode"> </span> <span class="input-group-addon send"> <button class="btn btn-default btn-sm" ng-disabled="isDisabled()" ng-click="deliverSmsMessage(\'thread\')"> Send </button> </span> </div> </div> </div> </span> <div class="sms-uploading" ng-if="showUploadingFiles"> <sms-message-upload-preview deliver-sms-message="deliverSmsMessage" uploader="uploader" total-size="totalSize"> </sms-message-upload-preview> </div> </div> <div class="" ng-show="search.showSearch"> <sms-search-message-display search="search" close-display="closeSearchDisplay()"> </sms-search-message-display> </div> </div> <div class="sms-compose" ng-if="showCompose"> <div class="sms-header"> <div class="header-title"> <h3 class="compose-header"> Compose </h3> </div> <div class="header-button"> <button class="btn btn-success btn-sm" ng-click="toggleComposeMode()"> Return to Conversations </button> </div> </div> <div class="compose-body"> <contact-selector type="\'sms\'"></contact-selector> <div class="sms-create"> <div class="textarea-wrapper"> <div class="input-group message-input-container"> <textarea class="form-control" ng-disabled="isDisabled()" sms-enter="deliverSmsMessage(\'compose\')" ng-model="delivery.message" ng-attr-placeholder="Type your message here" msd-elastic rows="6" id="smsInput">\n                    </textarea> <span style="position: absolute; margin-left: -30px; z-index: 999999; padding-top: 5px; height:22px" emoji-picker="delivery.message" placement="left-relative" title="Emoji" recent-limit="10" output-format="unicode"> </span> <span class="input-group-addon"> <div> <label style="width: 100%; height: 100%; cursor: pointer; padding: 5px" tooltip-placement="top-left" uib-tooltip="{{::tips.sms.add_media}}"> <i class="fa fa-paperclip" style="font-size: 20px"></i> <input ng-if="uploader" type="file" ng-disabled="isDisabled()" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </div> <div> <button class="btn btn-default btn-sm" ng-disabled="isEmulatedUser() || totalSize > 1500000" ng-click="deliverSmsMessage(\'compose\')"> Send </button> </div> </span> </div> <div class="chat-post-create-footer"> <div class="chat-post-upload-preview" ng-show="showUploadingFiles"> <div class="light-font"> Type a message above describing the files and hit enter. -- or -- <button ng-disabled="isDisabled()" class="btn btn-default btn-xs" ng-click="deliverSmsMessage(\'compose\')"> Send Files </button> - Total Size: {{totalSize/1000}} KB <div ng-if="totalSize>1500000" style="display: inline-block" uib-alert ng-class="\'alert-danger\'"> ALERT: Total Media Size must be under 1,500KB. </div> </div> <div ng-repeat="item in uploader.queue" class="chat-file-preview"> <div ng-if="!uploadIsImage(item._file)" class="file-icon file-icon-lg" data-type="{{item._file.name | extension}}"> </div> <div ng-if="uploadIsImage(item._file)" ng-thumb="{ file: item._file, height: 100, width: 120 }" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.remove_temp_upload}}"> </div> <span class="file-preview-remove" ng-click="item.remove()"> <i class="fa fa-remove"></i> </span> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/sms.html",'<div id="sms-content-container"> <div id="main-sms-container" ng-show="!showCompose"> <div id="sms-channel-header"> <div class="sms-content-area" class="clearfix"> <div ng-class="{\'col-md-4\' : !displayThread }"> <h3> Text Messages <span ng-if="isEmulatedUser()"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> <button class="btn btn-primary smsbtns" ng-show="!showCompose && !currentThread" ng-click="toggleComposeMode()"> <i class="fa fa-paper-plane" aria-hidden="true"></i> New Text</button> </div> <div class="col-md-4" style="padding-top: 25px" ng-if="!displayThread"> <div class="input-group" ng-if="emulationStatus[\'sms\'].manager===\'true\'"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'sms\')"> <md-option ng-value="user.id"> <strong>{{user.contact_name_given}} {{user.contact_name_family}} </strong> </md-option> <md-option ng-repeat="emUser in emulationStatus[\'sms\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> <div class="col-md-4" style="padding-top: 40px" ng-if="!displayThread"> <div ng-show="!showSearchBox"> <div class="input-group sms-search" ng-show="!enableCopyMode"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-model="searchText" ng-enter="doSmsSearch(searchText)" placeholder="Search Messages" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> </div> </div> <div ng-show="displayThread"> <div class="col-md-5"> <div class="sms_contact"> <ul class="profile-display"> <li ng-if="currentThread.contact && currentThread.contact.contact_profile_image" class="profile_display_45"> <img src="{{pathImgProfile}}{{currentThread.contact.contact_profile_image}}" class="sms_profile_image"> </li> <li ng-if="currentThread.contact && !currentThread.contact.contact_profile_image" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{currentThread.contact.contact_profile_color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.noncontact" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{currentThread.noncontact.color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.contact" class="pull-left"> {{currentThread.contact.contact_name_given}} {{currentThread.contact.contact_name_family}} <br> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li ng-if="currentThread.noncontact" class="pull-left"> <span ng-if="currentThread.noncontact.name"> {{currentThread.noncontact.name}} <br> </span> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li class="pull-left"> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && !currentThread.contact" ng-click="showAddContactForm(\'sms\', currentThread.contact_phone_number.substring(1))"> Add to Contacts </button> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && currentThread.contact && currentThread.contact.contact_type !== \'user\'" ng-click="showEditContactForm(currentThread.contact)"> Edit Contact </button> </li> </ul> </div> </div> <div class="col-md-3"> <button class="btn btn-primary btn-sm smsbtns" ng-click="showAllConversations()"> Return to Conversations </button> </div> <div class="col-md-4"> <div class="input-group sms-search" ng-show="!enableCopyMode"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-model="filterText" placeholder="Search Messages" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> <div ng-show="enableCopyMode && user.exportType.partner_code == \'hawksoft\'"> Select the text messages you want to export to Hawksoft Inbox<br> <span ng-show="(copySelected | objLength)>0"> {{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to Hawksoft Inbox </span> </div> <div ng-show="enableCopyMode && user.exportType.partner_code == \'generic\'"> Select the text messages you want to export to Management System Inbox<br> <span ng-show="(copySelected | objLength)>0"> {{copySelected | objLength}} item{{(copySelected | objLength)>1 ? \'s\' : \'\'}} selected - Click Save Icon to send to Management System Inbox </span> </div> </div> </div> <div ng-show="displayThread && !isEmulatedUser()"> <div class="delete-box"> <i class="fa fa-trash-o fa-2x" ng-click="showModalWithData(\'/sms/confirmdeletethread.html\', currentThread)" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.delete_thread}}"></i> </div> <div class="copy-box"> <span ng-hide="(copySelected | objLength)>0" ng-click="toggleCopyMode()"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.toggle_hawksoft_copy}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 26px; height: 26px" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.toggle_generic_copy}}"> </span> <span ng-show="(copySelected | objLength)>0"> <i ng-show="user.exportType.partner_code == \'hawksoft\'" class="fa fa-floppy-o fa-2x" ng-click="saveCopiedTexts()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.copy_to_hawksoft}}"></i> <i ng-show="user.exportType.partner_code == \'generic\'" class="fa fa-floppy-o fa-2x" ng-click="saveCopiedTexts()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.copy_to_management}}"></i> </span> </div> </div> </div> <div ng-if="!displayThread"> <div class="col-sm-12"> <div class="row"> <div class="col-sm-10"> <h4>Conversations</h4> <p>Click a row to view the messages in the conversation.</p> </div> <div class="col-sm-2"> <button class="btn btn-default blacklist-btn" ng-if="!isEmulatedUser()" tooltip-placement="left" uib-tooltip="{{::tips.sms.manage_blacklist}}" ng-click="showBlacklistTableModal()">Blacklist</button> </div> </div> </div> <table class="table table-bordered table-hover table-striped cls-tab-call-history" style="margin-bottom: 0px"> <thead> <tr> <th class="col-sm-5"> <a href ng-click="sortThreadBy(\'contact\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbycontact}}"> Contact <i class="fa fa-{{!threadreverse && threadpredicate===\'contact\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th class="col-sm-1"> <a href ng-click="sortThreadBy(\'unread\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbyunread}}"> Unread <i class="fa fa-{{!threadreverse && threadpredicate===\'unread\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> <th class="col-sm-6"> <a href ng-click="sortThreadBy(\'mostrecent\')" tooltip-placement="top-left" uib-tooltip="{{tips.sms.sortbymostrecent}}"> Most Recent Message <i class="fa fa-{{!threadreverse && threadpredicate===\'mostrecent\'?\'chevron-up\':\'chevron-down\'}}"></i> </a> </th> </tr> </thead> </table> </div> <div id="sms-content"> <div class="sms"> <div class="sms-content-area" ng-if="!displayThread"> <div> <div ng-if="!displayThread"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-if="availThreads().length==0"> <td colspan="3"> You do not have any active threads at this time. </td> </tr> <tr ng-repeat="thread in filteredThreads = (toArray(availThreads()) | orderBy : threadSortFunction : threadreverse)" ng-if="thread.deleted!==\'true\'" ng-click="showThread(thread.thread_uuid)"> <td ng-if="thread.contact" class="col-sm-5"> <ul class="profile-display"> <li ng-if="thread.contact.contact_profile_image" class="profile_display_45"> <img src="{{::pathImgProfile}}{{thread.contact.contact_profile_image}}" class="sms_profile_image"></li> <li ng-if="!thread.contact.contact_profile_image" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{thread.contact.contact_profile_color}} !important"> <i class="fa fa-user"></i> </label> </li> <li style="display: inline-block"> <strong> {{thread.contact.contact_name_given}} {{thread.contact.contact_name_family}} </strong> <br> {{thread.contact_phone_number | tel}} </li> </ul> </td> <td ng-if="thread.noncontact" class="col-sm-5"> <ul class="profile-display"> <li class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{thread.noncontact.color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="thread.noncontact.name" style="display: inline-block"> <span class="capitalize"> {{thread.noncontact.name}} </span> <br> <strong> {{thread.contact_phone_number | tel}} </strong> </li> <li ng-if="!thread.noncontact.name" style="display: inline-block"> <strong> {{thread.contact_phone_number | tel}} </strong> </li> </ul> </td> <td ng-if="!thread.noncontact && !thread.contact" class="col-sm-5"> <ul class="profile-display"> <li class="profile_display_45"> <label class="sms_profile_icon" style=""> <i class="fa fa-user"></i> </label> </li> <li style="display: inline-block"> <strong> {{thread.contact_phone_number | tel}} </strong> </li> </ul> </td> <td class="col-sm-1">{{thread.unread_count}}</td> <td class="col-sm-6"> <span class="smfont cls-color-blue-tkg" ng-if="isToday(thread.most_recent.created_at)"> {{thread.most_recent.created_at | toLocalTime | amDateFormat: \'h:mm a\'}} </span> <span class="smfont cls-color-blue-tkg" ng-if="!isToday(thread.most_recent.created_at)"> {{thread.most_recent.created_at | toLocalTime | amDateFormat: \'ddd, MMM D, h:mm a\'}} </span> <br> {{thread.most_recent.message.length > 75 ? thread.most_recent.message.substring(0,75)+\' ...\' : thread.most_recent.message}}</td> </tr> </tbody> </table> </div> </div> </div> <div ng-show="displayThread"> <div class="thread-container"> <div id="sms_{{message.message_uuid}}" ng-repeat="message in displayMessages | filter:filterText" style="{{message.message_uuid === highlightSmsMessage ? \'background-color: rgba(0, 115, 165, 0.2);\' : \'\'}}"> <div class="sms-anchor"> <div class="date-separator datedisplay" ng-if="showSmsDateSeparator[$index]"> <hr class="separator__hr"> <div class="separator__text"> <span> {{message.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY\'}} </span> </div> </div> </div> <div class="message-container clearfix {{copySelected[message.message_uuid] ? \'copy-highlight\' : \'\'}}" ng-click="enableCopyMode && copyText(message.message_uuid)"> <div class="contact-photo" ng-class="message.message_direction == \'in\' ? \'pull-left\' : \'pull-right\'"> <span ng-if="message.message_direction == \'in\'"> <span ng-if="currentThread.contact && currentThread.contact.contact_profile_image"> <img src="{{pathImgProfile}}{{currentThread.contact.contact_profile_image}}" class="sms_profile_image" alt=""> </span> <span ng-if="currentThread.contact && !currentThread.contact.contact_profile_image"> <label class="sms_profile_icon" style="background-color: {{currentThread.contact.contact_profile_color}}"> <i class="fa fa-user"></i> </label> </span> <span ng-if="currentThread.noncontact"> <label class="sms_profile_icon" style="background-color: {{currentThread.noncontact.color}}"> <i class="fa fa-user"></i> </label> </span> </span> <span ng-if="message.message_direction == \'out\'"> <span ng-if="currentThread.user.contact_profile_image"> <img src="{{pathImgProfile}}{{currentThread.user.contact_profile_image}}" class="sms_profile_image"> </span> <span ng-if="!currentThread.user.contact_profile_image"> <label class="sms_profile_icon" style="background-color: {{currentThread.user.contact_profile_color}}"> <i class="fa fa-user"></i> </label> </span> </span> </div> <div class="{{message.message_direction===\'in\' ? \'pull-left left-text\' : \'pull-right right-text\'}} sms-message-box clearfix"> <div ng-if="message.message_direction===\'out\' && !isEmulatedUser()" class="remove-sms-inline"> <i class="fa fa-trash-o" ng-click="removeMessage($index)" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.delete_message}}"></i> </div> <div class="textmessage talk-bubble tri-right round border {{message.message_direction===\'in\' ? \'left-in incoming\' : \'right-in outgoing\'}}"> <div class="talktext"> <div ng-if="message.message"> {{message.message}} </div> <div ng-if="message.message_type === \'mms\' " class="chat-post-file-container"> <div ng-repeat="media in message.media" ng-if="media.mime_type !==\'application/smil\' && media.mime_type !==\'text/plain\'" class="chat-post-file"> <div ng-if="media.mime_type.substring(0,5).toLowerCase()===\'image\'" class="chat-post-file-thumb"> <a href="" ng-click="showModalWithData(\'/chat/previewfile.html\',{obj:mediaUrl+media.url})"> <img src="{{mediaUrl}}{{media.url}}" style="{{thumbDimensions(mediaUrl+media.url, \'thumb\')}}"></a> </div> <div ng-if="media.mime_type.substring(0,5).toLowerCase()!==\'image\'" class="chat-post-file-thumb"> <a href="{{mediaUrl + media.url}}" download> <div class="file-icon file-icon-lg" data-type="{{media.mime_type}}"> </div> </a> </div> <div class="chat-post-file-details" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.download_file}}"> <a href="{{mediaUrl + media.url}}" download> <br> <i class="fa fa-download"></i> {{media.mime_type | uppercase}} {{media.size/1000 | number:0}}KB </a> </div> </div> </div> </div> </div> <div ng-if="message.message_direction===\'in\' && !isEmulatedUser()" class="remove-sms-inline"> <i class="fa fa-trash-o" ng-click="removeMessage($index)" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.delete_message}}"></i> </div> <div class="messagetime {{message.message_direction===\'in\' ? \'pad-left\' : \'pad-right\'}}"> {{message.created_at | toLocalTime | amDateFormat: \'h:mm a\'}} </div> </div> </div> </div> <div id="sms-bottom"> &nbsp; </div> </div> </div> </div> </div> <div id="sms-create" ng-show="displayThread"> <div class="textarea-wrapper"> <div class="blacklist-box" ng-if="!isEmulatedUser()"> <i class="fa fa-times fa-2x" ng-click="showModalWithData(\'/modals/blacklist-sms-number-modal.html\', currentThread)" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.blacklist}}"></i> </div> <div class="sms-create-body"> <div class="input-group message-input-container"> <span class="input-group-addon mms"> <label style="width: 100%; height: 100%; cursor: pointer; padding: 5px" tooltip-placement="top-left" uib-tooltip="{{::tips.sms.add_media}}"> <i class="fa fa-paperclip" style="font-size: 20px"></i> <input ng-if="uploader" type="file" ng-disabled="(contactsSelected.length<1 && !recipient) ||  isEmulatedUser() || totalSize>1500000" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </span> <textarea class="form-control" ng-disabled="(contactsSelected.length<1 && !recipient) ||  isEmulatedUser() || totalSize>1500000" sms-enter="" name="txtNameGiven" style="padding-right: 35px" ng-model="delivery.message" ng-attr-placeholder="{{contactsSelected.length < 1 && !currentThread ? \'Select a contact above to get started\' : \'Type your message here\'}}" msd-elastic>\n                        </textarea> <span style="margin-left: -30px; z-index: 999999; padding-top: 5px; height:22px" emoji-picker="delivery.message" placement="right" title="Emoji" recent-limit="10" output-format="unicode"> </span> <span class="input-group-addon send"> <button class="btn btn-default btn-sm" ng-disabled="contactsSelected.length<1 && !recipient ||  isEmulatedUser() || totalSize>1500000" ng-click="deliverSmsMessage(delivery)"> Send </button> </span> </div> <div class="chat-post-create-footer"> <div class="chat-post-upload-preview" ng-show="showUploadingFiles"> <div class="light-font"> Type a message above describing the files and hit enter. -- or -- <button ng-disabled="contactsSelected.length<1 && !recipient ||  isEmulatedUser() || totalSize>1500000" class="btn btn-default btn-xs" ng-click="deliverSmsMessage(delivery)"> Send Files </button> - Total Size: {{totalSize/1000}} KB <div ng-if="totalSize>1500000" style="display: inline-block" uib-alert ng-class="\'alert-danger\'"> ALERT: Total Media Size must be under 1,500KB. </div> </div> <div ng-repeat="item in uploader.queue" class="chat-file-preview"> <div ng-if="!uploadIsImage(item._file)" class="file-icon file-icon-lg" data-type="{{item._file.name | extension}}"> </div> <div ng-if="uploadIsImage(item._file)" ng-thumb="{ file: item._file, height: 100, width: 120 }" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.remove_temp_upload}}"> </div> <span class="file-preview-remove" ng-click="item.remove()"> <i class="fa fa-remove"></i> </span> </div> </div> </div> </div> <script type="text/ng-template" id="tag-template"><div class="tag-template">\n                        <label class="selectprofileicon"\n                               style="background: {{data.contact_profile_color}}">\n                            {{data.contact_name_family.substring(0,1)}}\n                        </label>\n                        <span>{{$getDisplayText()}}</span>\n                        <a class="remove-button"\n                           ng-click="$removeTag()">\n                            &#10006;\n                        </a>\n                    </div></script> <script type="text/ng-template" id="autocomplete-template"><div class="autocomplete-template">\n                        <span ng-bind-html="$highlight($getDisplayText())"></span>\n                        <span ng-if="data.contact_mobile_number!=\'\'"\n                              class="smfont">\n                            (Mobile: {{data.contact_mobile_number | tel}})\n                        </span>\n                        <span ng-if="data.contact_mobile_number==\'\'"\n                              class="smfont">\n                            (Mobile: Not Available)\n                        </span>\n                    </div></script> </div> </div> </div> <div id="sms-sidebar-container" ng-show="showSearchBox"> <div id="sms-search-container"> <div id="sms-search-header"> <div class="input-group"> <span class="input-group-addon" title="search"> <i class="fa fa-search"></i> </span> <input class="form-control" type="text" ng-enter="doSmsSearch(searchText)" ng-model="searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> <div id="sms-search-subheader"> <p class="title"> Search Results: {{smsSearchResults.length}} Result(s) Found </p> <i class="fa fa-sign-out md-icon" ng-click="closeSearch()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.close_search}}"> </i> </div> <div id="sms-search-content"> <div ng-repeat="result in smsSearchResults | orderBy: \'created_at\':false"> <div class="search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span> {{result.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY\'}} </span> </div> </div> <div class="chatSearchItem"> <div class="row"> <div class="col-sm-9"> <div class="message-container clearfix"> <div ng-class="setTextClass(result)"> <div class="talktext"> <span class="smfont" style="line-height: 1.0"> <p> <span ng-if="result.contact"> <strong> {{result.contact.contact_name_full}} </strong> <br> </span> {{result.thread.contact_phone_number | tel}} </p> </span> <p style="margin-top: 8px"> {{result.message}} </p> </div> </div> </div> </div> <div class="col-sm-3" ng-click="goToSmsSearchResult(result)"> <span tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.jump_to_result}}"> <i class="fa fa-reply"></i> Jump </span> </div> </div> </div> </div> </div> </div> </div> <div class="sms-compose-container" ng-show="showCompose"> <h3 class="compose-header"> Compose </h3> <button class="btn btn-primary btn-sm return-to-convo-btn" ng-click="toggleComposeMode()"> Return to Conversations </button> <contact-selector type="\'sms\'"></contact-selector> <div id="sms-create"> <div class="textarea-wrapper"> <div class="sms-create-body"> <div class="input-group message-input-container"> <textarea id="enterText" class="form-control compose-message-text" ng-disabled="(contactsSelected.length<1 && !recipient) ||  isEmulatedUser() || totalSize>1500000" sms-enter="" name="txtNameGiven" style="padding-right: 35px" ng-model="delivery.message" ng-attr-placeholder="{{contactsSelected.length < 1 && !currentThread ? \'Select a contact above to get started\' : \'Type your message here\'}}" msd-elastic>\n                        </textarea> <span style="margin-left: -30px; z-index: 999999; padding-top: 5px; height:22px" emoji-picker="delivery.message" placement="right" title="Emoji" recent-limit="10" output-format="unicode"> </span> <span class="input-group-addon"> <div> <label style="cursor: pointer; padding: 5px" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.add_media}}"> <i class="fa fa-paperclip" style="font-size: 20px"></i> <input ng-if="uploader" type="file" ng-disabled="(contactsSelected.length<1 && !recipient) ||  isEmulatedUser() || totalSize>1500000" nv-file-select="" multiple uploader="uploader" required style="display: none"> </label> </div> <div> <button class="btn btn-default btn-sm" ng-disabled="contactsSelected.length<1 && !recipient ||  isEmulatedUser() || totalSize > 1500000" ng-click="deliverSmsMessage(delivery)"> Send </button> </div> </span> </div> <div class="chat-post-create-footer"> <div class="chat-post-upload-preview" ng-show="showUploadingFiles"> <div class="light-font"> Type a message above describing the files and hit enter. -- or -- <button ng-disabled="contactsSelected.length<1 && !recipient ||  isEmulatedUser() || totalSize>1500000" class="btn btn-default btn-xs" ng-click="deliverSmsMessage(delivery)"> Send Files </button> - Total Size: {{totalSize/1000}} KB <div ng-if="totalSize>1500000" style="display: inline-block" uib-alert ng-class="\'alert-danger\'"> ALERT: Total Media Size must be under 1,500KB. </div> </div> <div ng-repeat="item in uploader.queue" class="chat-file-preview"> <div ng-if="!uploadIsImage(item._file)" class="file-icon file-icon-lg" data-type="{{item._file.name | extension}}"> </div> <div ng-if="uploadIsImage(item._file)" ng-thumb="{ file: item._file, height: 100, width: 120 }" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.remove_temp_upload}}"> </div> <span class="file-preview-remove" ng-click="item.remove()"> <i class="fa fa-remove"></i> </span> </div> </div> </div> </div> <script type="text/ng-template" id="tag-template"><div class="tag-template">\n                        <label class="selectprofileicon"\n                               style="background: {{data.contact_profile_color}}">\n                            {{data.contact_name_family.substring(0,1)}}\n                        </label>\n                        <span>{{$getDisplayText()}}</span>\n                        <a class="remove-button"\n                           ng-click="$removeTag()">\n                            &#10006;\n                        </a>\n                    </div></script> <script type="text/ng-template" id="autocomplete-template"><div class="autocomplete-template">\n                        <span ng-bind-html="$highlight($getDisplayText())"></span>\n                        <span ng-if="data.contact_mobile_number!=\'\'"\n                              class="smfont">\n                            (Mobile: {{data.contact_mobile_number | tel}})\n                        </span>\n                        <span ng-if="data.contact_mobile_number==\'\'"\n                              class="smfont">\n                            (Mobile: Not Available)\n                        </span>\n                    </div></script> </div> </div> </div> </div>'),
a.put("views/sms/blacklist-sms-number.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-times fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Blacklisting</span> <button type="button" ng-click="vm.content.data.closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Are you sure you want to blacklist <strong>{{vm.content.data.thread.contact_phone_number | tel}}</strong> from sending additional messages?</div> <div> <md-radio-group ng-model="blacklist.reach" ng-required="true" ng-init="blacklist.reach === \'domain\'"> <div class="row"> <div class="col-sm-3 offset-sm-3"> <md-radio-button value="domain" class="md-primary"> Domain Wide</md-radio-button> </div> <div class="col-sm-3"> <md-radio-button value="did"> My DID only</md-radio-button> </div> </div> </md-radio-group> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="vm.content.data.closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="vm.content.data.blacklistNumber(blacklist.reach)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Blacklist</button> </div> </div>'),a.put("views/sms/blacklist-table.html",'<div class="modal-body" id="modal-body"> <table id="add-blacklist" class="table table-bordered table-hover table-striped" ng-show="showAddForm"> <tr> <td> <md-input-container> <label>Number to Add</label> <input phone-input ng-model="blacklist.numberToAdd"> </md-input-container> </td> <td style="padding-top: 18px"> <md-radio-group ng-model="blacklist.reach" ng-required="true" ng-init="blacklist.reach === \'domain\'"> <div class="col-sm-6" style="font-size: 12px !important"><md-radio-button value="domain" class="md-primary"> Domain Wide</md-radio-button></div> <div class="col-sm-6" style="font-size: 12px !important"><md-radio-button value="did"> My DID only</md-radio-button></div> </md-radio-group> </td> <td style="width: 90px; padding-top: 18px"> <button class="btn btn-default btn-xs" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.cancel_blacklist_add}}" ng-click="cancelAdd()"> <i class="fa fa-ban"></i> </button> <button class="btn btn-success btn-xs" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.save_blacklist}}" ng-click="blacklistNumber(blacklist)"> <i class="fa fa-floppy-o"></i> </button> </td> </tr> </table> <div class="input-group" ng-show="!showAddForm"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control" type="text" ng-model="blacklistSearch" placeholder="Search by number"> </div> <table ng-show="showBlTable && !showAddForm" class="table table-bordered table-hover table-striped"> <thead> <tr> <th>Number</th> <th>Added</th> <th>Reach</th> <th># Blocked Messages</th> <th style="width: 90px">Action <button class="btn btn-default btn-xs" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.new_blacklist}}" ng-click="showAddForm = !showAddForm"> <i class="fa fa-plus"></i> </button></th> </tr> </thead> <tbody> <tr ng-if="blacklistedNumbers.length===0"> <td colspan="5"> There are no numbers currently blacklisted. </td> </tr> <tr ng-repeat="blacklist in filterData = (blacklistedNumbers | filter:searchBlNumbers)"> <td>{{blacklist.number | tel}}</td> <td>{{blacklist.created_at}}</td> <td>{{blacklist.reach}}</td> <td>{{blacklist.blocks}}</td> <td><button class="btn btn-danger btn-xs" tooltip-placement="top-right" uib-tooltip="{{::tips.sms.remove_from_blacklist}}" ng-click="removeBlacklist(blacklist)"> <i class="fa fa-trash-o"></i> </button> </td> </tr> </tbody> </table> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div>'),a.put("views/sms/blacklist.html",'<div ng-controller="ModalCtrl"> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-times fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Confirm Blacklisting</span> <button type="button" ng-click="closeThisModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">Are you sure you want to blacklist <strong>{{vm.content.data.contact_phone_number | tel}}</strong> from sending additional messages?</div> <div> <md-radio-group ng-model="blacklist.reach" ng-required="true" ng-init="blacklist.reach === \'domain\'"> <div class="row"> <div class="col-sm-3 offset-sm-3"> <md-radio-button value="domain" class="md-primary"> Domain Wide</md-radio-button> </div> <div class="col-sm-3"> <md-radio-button value="did"> My DID only</md-radio-button> </div> </div> </md-radio-group> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeThisModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-danger btn-md" ng-click="blacklistNumber(vm.content.data, blacklist.reach)"><i class="fa fa-times" style="margin-right: 10px"></i>Confirm Blacklist</button> </div> </div>'),a.put("views/sms/sendsmscontact.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-paper-plane fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Send SMS Text</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h4>{{vm.content.data.contact_name_given}} {{vm.content.data.contact_name_family}}</h4> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-user"></i></span> <input type="text" class="form-control" ng-model="vm.content.data.contact_mobile.number"> </div> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-paper-plane"></i></span> <textarea class="form-control" ng-model="vm.content.message" placeholder="Compose your message text here ..."></textarea> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Cancel</button> <button class="btn btn-primary btn-md" ng-click="sendSmsTop(vm.content)"><i class="fa fa-save" style="margin-right: 10px"></i>Send Now</button> </div> </div>'),a.put("views/sms/sendsmstop.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-paper-plane fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Send SMS Text</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body" ng-init="vm.content.data.message=\'\'"> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-user"></i></span> <input type="text" phone-input class="form-control" ng-model="vm.content.data.smsnumber" placeholder="Enter recipient mobile number ..."> </div> <div class="input-group"> <span class="input-group-addon" title="post content"><i class="fa fa-paper-plane"></i></span> <textarea class="form-control" ng-model="vm.content.data.message" placeholder="Compose your message text here ..."></textarea> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="sendSmsTop(vm.content.data)"> <i class="fa fa-save" style="margin-right: 10px"></i> Send Now </button> </div> </div>'),a.put("views/sms/sms-contact-title.html",'<div class="sms_contact"> <ul class="profile-display"> <li ng-if="currentThread.contact && currentThread.contact.contact_profile_image" class="profile_display_45"> <img src="{{pathImgProfile}}{{currentThread.contact.contact_profile_image}}" class="sms_profile_image"> </li> <li ng-if="currentThread.contact && !currentThread.contact.contact_profile_image" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{currentThread.contact.contact_profile_color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.noncontact" class="profile_display_45"> <label class="sms_profile_icon" style="background-color: {{currentThread.noncontact.color}} !important"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.contact" class="pull-left"> {{currentThread.contact.contact_name_given}} {{currentThread.contact.contact_name_family}} <br> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li ng-if="currentThread.noncontact" class="pull-left"> <span ng-if="currentThread.noncontact.name"> {{currentThread.noncontact.name}} <br> </span> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li class="pull-left"> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && !currentThread.contact" ng-click="showAddContactForm(\'sms\', currentThread.contact_phone_number.substring(1))"> Add to Contacts </button> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && currentThread.contact && currentThread.contact.contact_type !== \'user\'" ng-click="showEditContactForm(currentThread.contact)"> Edit Contact </button> </li> </ul> </div>'),a.put("views/sms/sms-contact.html",'<div class="sms_contact"> <ul class="profile-display"> <li ng-if="currentThread.contact && currentThread.contact.contact_profile_image" class="profile_display_45"> <img src="{{pathImgProfile}}{{currentThread.contact.contact_profile_image}}" class="sms_profile_image"> </li> <li ng-if="currentThread.contact && !currentThread.contact.contact_profile_image" class="profile_display_45"> <label class="sms_profile_icon" ng-style="{\'background-color\': currentThread.contact.contact_profile_color}"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.noncontact" class="profile_display_45"> <label class="sms_profile_icon" ng-style="{\'background-color\': currentThread.noncontact.color}"> <i class="fa fa-user"></i> </label> </li> <li ng-if="currentThread.contact" class="pull-left"> {{currentThread.contact.contact_name_given}} {{currentThread.contact.contact_name_family}} <br> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li ng-if="currentThread.noncontact" class="pull-left"> <span ng-if="currentThread.noncontact.name"> {{currentThread.noncontact.name}} <br> </span> <strong>{{currentThread.contact_phone_number | tel}}</strong> </li> <li class="pull-left"> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && !currentThread.contact" ng-click="showAddContactForm(\'sms\', currentThread.contact_phone_number.substring(1))"> Add to Contacts </button> <button class="btn btn-default btn-xs" ng-if="!isEmulatedUser() && currentThread.contact && currentThread.contact.contact_type !== \'user\'" ng-click="showEditContactForm(currentThread.contact)"> Edit Contact </button> </li> </ul> </div>'),a.put("views/sms/sms-message-upload-preview.html",'<div class="chat-post-create-footer"> <div class="chat-post-upload-preview"> <div class="light-font"> Type a message above describing the files and hit enter. -- or -- <button ng-disabled="isDisabled()" class="btn btn-default btn-xs" ng-click="deliverSmsMessage(\'thread\')"> Send Files </button> - Total Size: {{totalSize}} KB<br> <span ng-if="totalSize>1000" class="smfont"> <i class="fa fa-exclamation-triangle bridgeorangefont" style="font-size: 20px"> </i> ALERT: Total MMS size must be under 1,000KB. We will spread your delivery over multiple messages. </span> </div> <div ng-repeat="item in uploader.queue" class="chat-file-preview"> <div ng-if="!uploadIsImage(item._file)" class="file-icon file-icon-lg" data-type="{{item._file.name | extension}}"> </div> <div ng-if="uploadIsImage(item._file)" ng-thumb="{ file: item._file, height: 100, width: 120 }" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.remove_temp_upload}}"> </div> <span class="file-preview-remove" ng-click="item.remove()"> <i class="fa fa-remove"></i> </span> </div> </div> </div>'),a.put("views/sms/sms-message.html",'<div class="sms-anchor"> <div class="date-separator datedisplay" ng-if="message.newDay"> <hr class="separator__hr"> <div class="separator__text"> <span> {{message.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY\'}} </span> </div> </div> </div> <div class="message-container clearfix" ng-class="{\'outbound\' : message.message_direction===\'out\', \n            \'inbound\' : message.message_direction===\'in\' }" ng-click="enableCopyMode && copyText(message.message_uuid)"> <div class="contact-photo"> <span ng-if="message.message_direction == \'in\'"> <span ng-if="currentThread.contact && currentThread.contact.contact_profile_image"> <img src="{{imageBaseUrl}}{{currentThread.contact.contact_profile_image}}" class="sms_profile_image"> </span> <span ng-if="currentThread.contact && !currentThread.contact.contact_profile_image"> <label class="sms_profile_icon" ng-style="{\'background-color\': currentThread.contact.contact_profile_color }"> <i class="fa fa-user"></i> </label> </span> <span ng-if="currentThread.noncontact"> <label class="sms_profile_icon" ng-style="{\'background-color\': currentThread.noncontact.color }"> <i class="fa fa-user"></i> </label> </span> </span> <span ng-if="message.message_direction == \'out\'"> <span ng-if="currentUser.contact_profile_image"> <img src="{{imageBaseUrl}}{{currentUser.contact_profile_image}}" class="sms_profile_image"> </span> <span ng-if="!currentUser.contact_profile_image"> <label class="sms_profile_icon" ng-style="{\'background-color\': currentUser.contact_profile_color}"> <i class="fa fa-user"></i> </label> </span> </span> </div> <div class="sms-message-box clearfix"> <div class="remove-sms-inline" ng-if="message.message_direction===\'out\' && !isEmulatedUser()"> <i class="fa fa-trash-o" ng-if="!isEmulatedUser()" ng-click="removeMessage()(message)" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.delete_message}}"></i> </div> <div class="textmessage talk-bubble tri-right round border {{message.message_direction===\'in\' ? \'left-in incoming\' : \'right-in outgoing\'}}"> <div class="talktext"> <div ng-if="message.message"> {{message.message}} </div> <div ng-if="message.message_type === \'mms\' " class="sms-message-file-container"> <div ng-repeat="media in message.media" ng-if="media.mime_type !==\'application/smil\' && media.mime_type !==\'text/plain\'" class="sms-message-file"> <div ng-if="media.mime_type.substring(0,5).toLowerCase()===\'image\'" class="sms-message-image-thumb"> <a href="" ng-click="showModalWithData(\'/chat/previewfile.html\',{obj:mediaUrl+media.url})"> <img src="{{mediaUrl}}{{media.url}}" style="{{thumbDimensions(mediaUrl+media.url, \'thumb\')}}"></a> </div> <div ng-if="media.mime_type.substring(0,5).toLowerCase()!==\'image\'" class="sms-message-file-thumb"> <a href="{{mediaUrl + media.url}}" download> <div class="file-icon file-icon-lg" data-type="{{showMediaType(media).toLowerCase()}}"> </div> </a> </div> <div ng-class="{\'sms-message-file-details\': media.mime_type.substring(0,5).toLowerCase()!==\'image\', \n                                \'sms-message-image-details\': media.mime_type.substring(0,5).toLowerCase()===\'image\'}" tooltip-placement="top" uib-tooltip="{{::tips.chatplus.download_file}}"> <a href="{{mediaUrl + media.url}}" download> {{getFileName(media)}} <br> <i class="fa fa-download"></i> {{showMediaType(media)}} {{media.size/1000 | number:0}}KB </a> </div> </div> </div> </div> </div> <div class="remove-sms-inline" ng-if="message.message_direction===\'in\' && !isEmulatedUser()"> <i class="fa fa-trash-o" ng-if="!isEmulatedUser()" ng-click="removeMessage()(message)" tooltip-placement="bottom" uib-tooltip="{{::tips.sms.delete_message}}"></i> </div> <div class="messagetime {{message.message_direction===\'in\' ? \'pad-left\' : \'pad-right\'}}"> {{message.created_at | toLocalTime | amDateFormat: \'h:mm a\'}} </div> </div> </div>'),a.put("views/sms/sms-search-message-display.html",'<div class="sms-search-header"> <div class="input-group"> <span class="input-group-addon" title="search"><i class="fa fa-search"></i></span> <input class="form-control" type="text" ng-enter="search.sendSearch(search.searchText)" ng-model="search.searchText" placeholder="Search" tooltip-placement="bottom" uib-tooltip="{{::tips.chatplus.submit_search}}"> </div> </div> <div class="sms-search-subheader"> <p class="title">Search Results: {{search.results.length}} Result(s) Found</p> <i class="fa fa-sign-out md-icon" ng-click="closeDisplay()" tooltip-placement="bottom-right" uib-tooltip="{{::tips.chatplus.close_search}}"></i> </div> <div class="sms-search-content"> <sms-search-result ng-repeat="message in search.results" message="message" search="search" show-message-in-thread="showMessageInThread"> </sms-search-result> </div>'),a.put("views/sms/sms-search-result.html",'<div class="date-separator search-date-separator datedisplay"> <hr class="separator__hr"> <div class="separator__text"> <span style="font-weight: normal"> {{message.created_at | toLocalTime | amDateFormat:\'ddd, MMM Do YYYY h:mm a\'}} </span> </div> </div> <div class="result-content"> <div class="chatSearchItem"> <div class="row"> <div class="col-sm-9"> <div class="message-container clearfix"> <div ng-class="setTextClass(message)"> <div class="talktext"> <span class="smfont" style="line-height: 1.0"> <p> <span ng-if="message.thread.contact"> <strong> {{message.thread.contact.contact_name_full}} </strong> <br> </span> {{message.thread.contact_phone_number | tel}} </p> </span> <p style="margin-top: 8px"> {{message.message}} </p> </div> </div> </div> </div> <div class="col-sm-3" ng-click="showMessageInThread()(message)"> <span tooltip-placement="bottom-right" uib-tooltip="{{::tips.sms.jump_to_result}}"> <i class="fa fa-reply"></i> Jump </span> </div> </div> </div> </div>'),a.put("views/stats_table.html",'<div class="call-stats-panel panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Total Calls <span ng-show="showingStat.name != \'Average\'">for </span> <span>{{showingStat.name}}</span> </h3> <div id="stats-icons"> <i class="fa fa-file-pdf-o" aria-hidden="true" ng-click="generate()"></i> <i class="fa fa-file-excel-o" aria-hidden="true" ng-csv="getDataArray()" filename="statistics.csv"></i> </div> </div> <div class="panel-body"> <table class="call-stats-table table table-bordered table-hover table-striped"> <tbody> <tr> <td>Number of Received Calls:</td> <td class="stat-data-col">{{showingStat.receivedCalls | number : 3}}</td> </tr> <tr> <td>Number of Answered Calls:</td> <td class="stat-data-col">{{showingStat.answered | number : 3 }}</td> </tr> <tr> <td>Number of Unanswered Calls:</td> <td class="stat-data-col">{{showingStat.unanswered | number : 3 }}</td> </tr> <tr> <td>Number of Abandoned Calls:</td> <td class="stat-data-col">{{showingStat.abandoned | number : 3 }}</td> </tr> <tr> <td>Number of Transferred Calls:</td> <td class="stat-data-col">{{showingStat.transferred | number : 3 }}</td> </tr> <tr> <td>Abandon Rate:</td> <td class="stat-data-col">{{showingStat.abandonRate | number : 3 }}</td> </tr> <tr> <td>Number of Agent Logins:</td> <td class="stat-data-col">{{showingStat.agentLogins | number : 3 }}</td> </tr> <tr> <td>Number of Agent Logoffs:</td> <td class="stat-data-col">{{showingStat.agentLogouts | number : 3 }}</td> </tr> <tr> <td>Avg Talk:</td> <td class="stat-data-col">{{showingStat.avgTalk | number : 3 }}</td> </tr> <tr> <td>% Answered:</td> <td class="stat-data-col">{{showingStat.pctAnswered | number : 3 }}</td> </tr> <tr> <td>% Unanswered:</td> <td class="stat-data-col">{{showingStat.pctUnanswered | number : 3 }}</td> </tr> <tr> <td>Answered Talk Time:</td> <td class="stat-data-col">{{showingStat.talkTime | number : 3 }}</td> </tr> </tbody> </table> </div> </div> <div class="call-stats-panel panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Outbound Calls</h3> </div> <div class="panel-body"> <table class="call-stats-table table table-bordered table-hover table-striped"> <tbody> <tr> <td>Number of Outbound Calls:</td> <td class="stat-data-col">{{showingStat.outboundCalls | number : 3 }}</td> </tr> <tr> <td>Number of Answered Calls:</td> <td class="stat-data-col">{{showingStat.outboundAnswered | number : 3 }}</td> </tr> <tr> <td>Number of Unanswered Calls:</td> <td class="stat-data-col">{{showingStat.outboundUnanswered | number : 3 }}</td> </tr> </tbody> </table> </div> </div> <!-- <div id="queue-stats-panel" class="call-stats-panel panel panel-default"> --> <!-- <div class="panel-heading"> --> <!-- <i ng-show="true" class="fa fa-arrow-up" aria-hidden="true"></i> --> <!-- <i ng-show="true" class="fa fa-arrow-down" aria-hidden="true"></i> --> <!-- <h3 class="panel-title">Distribution by Queue</h3> --> <!-- </div> --> <!-- <div class="panel-body"> --> <!-- <table class="call-stats-table table table-bordered table-hover table-striped"> --> <!-- <tbody> --> <!-- <tr ng-repeat="queue in queueStats"> --> <!-- <td>{{queue.received}}</td> --> <!-- <td>{{queue.answered}}</td> --> <!-- <td>{{queue.unanswered}}</td> --> <!-- <td>{{queue.abanonded}}</td> --> <!-- <td>{{queue.transferred}}</td> --> <!-- <td>{{queue.avgWait}}</td> --> <!-- <td>{{queue.avtTalk}}</td> --> <!-- <td>{{queue.maxCallers}}</td> --> <!-- <td>{{queue.pctAnswered}}</td> --> <!-- <td>{{queue.pctUnanswered}}</td> --> <!-- <td>{{queue.answeredTalkTime}}</td> --> <!-- </tr> --> <!-- </tbody> --> <!-- </table> --> <!-- </div> --> <!-- </div> -->'),a.put("views/timeclockpro/addEditRecord.html",'<div ng-controller="TimeKeeperCtrl"> <div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x cls-color-green-tkg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-clock-o fa-stack-1x fa-inverse" style="color: white"></i> </span> <span class="cls-header-modal"> {{vm.content.data.action}} Time </span> <button type="button" ng-click="closeAddEditRecord()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <label ng-if="vm.content.data.action == \'Add\'"> Time range will appear on your timeline. </label> <label ng-if="vm.content.data.action == \'Edit\'"> You can trim Activity time. </label> <div> <table class="table tk-record"> <thead> <th>Start Time</th> <th>End Time</th> </thead> <tbody ng-if="vm.content.data.action == \'Add\'"> <td> <div uib-timepicker ng-model="time.start_stamp" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!time.start_stamp">Invalid Date</div> </td> <td> <div uib-timepicker ng-model="time.end_stamp" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!time.end_stamp">Invalid Date</div> </td> </tbody> <tbody ng-if="vm.content.data.action == \'Edit\'"> <td> <div uib-timepicker ng-model="vm.content.data.record.start_stamp" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!vm.content.data.record.start_stamp">Invalid Date</div> </td> <td> <div uib-timepicker ng-model="vm.content.data.record.end_stamp" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"> </div> <div ng-if="!vm.content.data.record.end_stamp">Invalid Date</div> </td> </tbody> </table> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeAddEditRecord()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Cancel </button> <button class="btn btn-primary btn-md" ng-click="addEditRecord(time, vm.content.data, closeModal)" ng-disabled="!time.start_stamp || !time.end_stamp" ng-if="vm.content.data.action == \'Add\'"> <i class="fa fa-save" style="margin-right: 10px"></i> Add time </button> <button class="btn btn-primary btn-md" ng-click="addEditRecord(time, vm.content.data, closeModal)" ng-disabled="!vm.content.data.record.start_stamp || !vm.content.data.record.end_stamp" ng-if="vm.content.data.action == \'Edit\'"> <i class="fa fa-save" style="margin-right: 10px"></i> Save Changes </button> </div> </div>'),a.put("views/timeclockpro/adminview.html",'<div class="panel panel-default"> <div class="panel-heading"> <h4>Individual Settings</h4> </div> </div> <div class="user-list"> <h5>Active Time Clock Pro Users</h5> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-search"></i></span> <input class="form-control normal" type="text" ng-model="search.contact_name_full" placeholder="Filter by Name"> </div> <button class="btn btn-default btn-xs" ng-click="clearFilter()"> Clear Filter </button> <div class="team_list-item" ng-repeat="user in tkusers | filter:search | orderBy : predicate :reverse " ng-class="getTabClass($index)" ng-click="setActiveTab(user)"> <span class="container_team-value" data-toggle="tab">{{user.contact_name_full}}</span> </div> </div> <div class="user-details"> <div ng-class="getTabPaneClass()" id="tabing"> <h2>{{selectedContact.contact_name_full}}</h2> <div ng-if="!selectedContact"> <h3>Please select a contact to edit</h3> </div> <div ng-if="selectedContact"> <div class="payratediv"> <h4>Payrate </h4> <span id="payrate" class="payrate" ng-show="setpay" ng-click="setPayRateInput()">Set pay rate</span> <span ng-if="!setpay" ng-show="setpayinput" style="font-size: 18px"><input type="number" name="payrate" class="form-control" style="width: 80px; float: left" ng-model="selectedContact.user_rate" min="0" step="any" ng-blur="selectedContact.user_rate != null ? changePayRate(selectedContact): setPayRate()" autofocus> $/hr</span> <span class="inputvalue" ng-if="!setpay && !setpayinput">{{selectedContact.user_rate}} $/hr <span class="payrate" ng-click="changePayInput()"> Edit</span> </span> </div> <hr> <div ng-if="enabled"> <h4>Screenshot Frequency </h4> <span id="frequency" class="payrate" ng-show="setfrequency" ng-click="setFrequencyInput()">Set Screenshot Frequency</span> <span style="font-size: 18px" ng-show="setfrequencyinput"><input type="number" ng-model="selectedContact.screenshot_frequency" class="form-control" style="width: 80px; float: left" ng-blur="selectedContact.screenshot_frequency == null ? setFrequency(): changeFrequency(selectedContact)" min="30" max="3600" autofocus> Seconds </span> <span class="inputvalue" ng-if="!setfrequency && !setfrequencyinput">{{selectedContact.screenshot_frequency}} Seconds <span class="payrate" ng-click="changeFrequencyInput()"> Edit</span> </span> </div> <div class="screenshot"> <button class="btn btn-default" ng-class="{enabled : enabled === false}" ng-click="disableScreenshot(selectedContact)">{{enabled? \'Disable Screenshot\' : \'Enable Screenshot\'}}</button> </div> </div> </div> </div>'),a.put("views/timeclockpro/createupdategroup.html",'<div class="modal-header" id="modal-screen-share"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-sitemap fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal"> {{vm.content.data.editPermissionIndex ? \'Edit\' : \'Create New\'}} Team for Time Clock Pro </span> <button type="button" ng-click="vm.content.data.closeCreateGroup()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <div class="row"> <div class="col-sm-12"> <div class="input-group"> <span class="input-group-addon"> <i class="fa fa-sitemap"></i> </span> <input class="form-control" type="text" ng-model="updateGroup.group_name" ng-init="updateGroup.group_name=vm.content.data.tkGroups[vm.content.data.editPermissionIndex].group_name" placeholder="Team Name"> </div> </div> </div> <div class="row"> <div class="col-sm-12"> <table id="data-table-top" class="table table-bordered table-hover table-striped" style="width: 100%-13px"> <thead> <tr> <th style="width: 33%"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-question-circle"></i></span> <input class="form-control normal" type="text" ng-model="vm.content.data.search.contact_name_full" placeholder="Filter by Name"> </div> <button class="btn btn-default btn-xs" ng-click="vm.content.data.clearFilter()"> Clear Filter </button> </th> <th style="width: 33%"><strong>Managers</strong><br> <span class="smfont normal">Select the users who are Managers of this Team</span></th> <th style="width: 33%"><strong>Team Members</strong><br> <span class="smfont normal">Select users who can be viewed by the managers.</span></th> </tr> </thead> </table> <div class="scroll-container" ng-style="{height: vm.content.data.modalTableHeight + \'px\'}" style="min-height: 125px; max-height: 300px"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody> <tr ng-repeat="contact in userContacts | filter:vm.content.data.search |\n                                       filter: {contact_type : \'user\'}"> <td style="width: 33%"> {{contact.contact_name_given}} {{contact.contact_name_family}} </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.manager[contact.user_uuid]" ng-init="updateGroup.manager[contact.user_uuid]=vm.content.data.isTkGroupMember(vm.content.data.editPermissionIndex, contact.user_uuid, \'manager\')" aria-label="Manager" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> <td style="width: 33%"> <md-checkbox ng-model="updateGroup.member[contact.user_uuid]" ng-init="updateGroup.member[contact.user_uuid]=vm.content.data.isTkGroupMember(vm.content.data.editPermissionIndex, contact.user_uuid, \'member\')" aria-label="Member" class="md-warn md-align-top-left permissions" flex> </md-checkbox> </td> </tr> </tbody> </table> </div> </div> </div> <hr> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="vm.content.data.closeCreateGroup()"> <i class="fa fa-remove" style="margin-right: 10px"> </i> Cancel</button> <button class="btn btn-primary btn-md" ng-if="!vm.content.data.showNewGroup && !vm.content.data.uploader.queue.length" ng-click="vm.content.data.updateTkGroup(updateGroup, vm.content.data.editPermissionIndex)"> <i class="fa fa-save" style="margin-right: 10px"></i> Update Team </button> <button class="btn btn-primary btn-md" ng-if="vm.content.data.showNewGroup && !vm.content.data.uploader.queue.length" ng-click="vm.content.data.createNewTkGroup(updateGroup)"> <i class="fa fa-save" style="margin-right: 10px"></i> Create Team </button> </div>'),a.put("views/timeclockpro/dashboard.html",'<div id="timekeeper-container"> <div class="dashboard-menu" ng-show="isTkUserOrGreater()"> <md-tabs active="activeTab" md-selected="activeTimekeeperTab" justified="false" class="timekeeper-tabs"> <md-tab index="0" label="My Team"> <my-team> </my-team> </md-tab> <md-tab index="1" label="Timeline"> <timeline-view> </timeline-view> </md-tab> <md-tab index="2" label="Teams" ng-if="isAdmin()"> <team-settings> </team-settings> </md-tab> <md-tab index="3" label="Individual Settings" ng-if="isAdminOrManager()"> <admin-view> </admin-view> </md-tab> </md-tabs> </div> <div ng-show="!isTkUserOrGreater()"> <h1 ng-show="message" style="text-align: center"> Admin has not enabled this feature for you. </h1> </div> </div>'),a.put("views/timeclockpro/myteam.html",'<div class="panel panel-default"> <div class="panel-heading"> <h4>My Team Dashboard</h4> </div> </div> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-search"></i></span> <input class="form-control normal" type="text" ng-model="search.contact_name_full" placeholder="Filter by Name" style="width: 30%"> <button class="btn btn-default" ng-click="clearFilter()"> Clear Filter </button> </div> <div class="table-head-container"> <table class="table tk-myteam"> <thead> <tr> <th class="employee-name"><a href ng-click="sort_by(\'contact_name_full\')" tooltip-placement="top-left" uib-tooltip="Sort by Name">Employee Name <i class="fa fa-{{!reverse && predicate===\'contact_name_full\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="last-active"><a href ng-click="sort_by(\'lastActive.seconds\')" tooltip-placement="top-left" uib-tooltip="Displays time of last screenshot / status change">Last Active <i class="fa fa-{{!reverse && predicate===\'lastActive.seconds\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="today"><a href ng-click="sort_by(\'todaysData.seconds\')" tooltip-placement="top-left" uib-tooltip="Sort by Today\'s Data">Today <i class="fa fa-{{!reverse && predicate===\'todaysData.seconds\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="yesterday"><a href ng-click="sort_by(\'yestData.seconds\')" tooltip-placement="top-left" uib-tooltip="Sort by Yesterday\'s Data">Yesterday <i class="fa fa-{{!reverse && predicate===\'yestData.seconds\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="this-week"><a href ng-click="sort_by(\'weeklyData.seconds\')" tooltip-placement="top-left" uib-tooltip="Sort by Weekly Data">This week <i class="fa fa-{{!reverse && predicate===\'weeklyData.seconds\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th class="this-month"><a href ng-click="sort_by(\'monthlyData.seconds\')" tooltip-placement="top-left" uib-tooltip="Sort by Monthly Data">This month <i class="fa fa-{{!reverse && predicate===\'monthlyData.seconds\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> </tr> </thead> </table> </div> <div class="table-body-container"> <table class="table tk-myteam"> <tbody> <tr ng-repeat="user in tkusersList | filter:search | orderBy : predicate :reverse"> <td class="employee-name"> <h4><span class="username" ng-click="showTimeLine(user)">{{user.contact_name_full}}</span></h4> </td> <td ng-click="showTimeLine(user)" class="last-active"> <div ng-if="user.lastActive.screenshot" class="screen-src"> <div class="text" ng-if="user.lastActive.timedays">{{user.lastActive.timedays}} days ago</div> <div class="text" ng-if="user.lastActive.timehours > 0">{{user.lastActive.timehours}}h {{user.lastActive.timemins}}m ago</div> <div class="text" ng-if="user.lastActive.timehours == 0">{{user.lastActive.timemins}}m ago</div> <img ng-src="{{thumbnailUrl(user.lastActive.screenshot)}}" style="width: 180px; height: 101px"> </div> <div ng-if="!user.lastActive.screenshot" class="screen-src"> <div class="text" ng-if="user.lastActive.timedays">{{user.lastActive.timedays}} days ago</div> <div class="text" ng-if="user.lastActive.timehours > 0">{{user.lastActive.timehours}}h {{user.lastActive.timemins}}m ago</div> <div class="text" ng-if="user.lastActive.timehours < 1">{{user.lastActive.timemins}}m ago</div> <div>-----</div> </div> </td> <td class="today"> <div class="time-data">{{user.todaysData.hours}}h {{user.todaysData.minutes}}m</div> <div ng-if="user.todaysData.salary">$ {{user.todaysData.salary}}</div> </td> <td class="yesterday"> <div class="time-data">{{user.yestData.hours}}h {{user.yestData.minutes}}m</div> <div ng-if="user.yestData.salary">$ {{user.yestData.salary}}</div> </td> <td class="this-week"> <div class="time-data">{{user.weeklyData.hours}}h {{user.weeklyData.minutes}}m</div> <div ng-if="user.weeklyData.salary">$ {{user.weeklyData.salary}}</div> </td> <td class="this-month"> <div class="time-data">{{user.monthlyData.hours}}h {{user.monthlyData.minutes}}m</div> <div ng-if="user.monthlyData.salary">$ {{user.monthlyData.salary}}</div> </td> </tr> </tbody> </table> </div>'),
a.put("views/timeclockpro/screenshot-preview.html",'<div ng-controller="TimeKeeperCtrl"> <div class="modal-body" id="modal-body"> <div style="width: 100%; height: 100%; text-align: center" id="imagetocopy"> <img src="{{vm.content.data.obj}}" style="{{thumbDimensions(mediaUrl+vm.content.data, \'preview\')}}; max-width: 100%"> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <button class="btn btn-primary btn-md" id="copyimage"><i class="fa fa-copy" style="margin-right: 10px"></i>Copy Image</button> <a class="btn btn-primary btn-md" href="{{downloadUrl(vm.content.data.screenshot)}}" download target="_blank"><i class="fa fa-download" style="margin-right: 10px"></i>Download</a> </div> </div> <script>function SelectText(element) {\n            var doc = document;\n            if (doc.body.createTextRange) {\n                var range = document.body.createTextRange();\n                range.moveToElementText(element);\n                range.select();\n            } else if (window.getSelection) {\n                var selection = window.getSelection();\n                var range = document.createRange();\n                range.selectNodeContents(element);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n        }\n        $("#copyimage").click(function (e) {\n            //Make the container Div contenteditable\n            $(\'#imagetocopy\').attr("contenteditable", true);\n            //Select the image\n            SelectText($(\'#imagetocopy\').get(0));\n            //Execute copy Command\n            //Note: This will ONLY work directly inside a click listenner\n            document.execCommand(\'copy\');\n            //Unselect the content\n            window.getSelection().removeAllRanges();\n            //Make the container Div uneditable again\n            $(\'#imagetocopy\').removeAttr("contenteditable");\n            //Success!!\n            alert("Image copied!");\n        });</script>'),a.put("views/timeclockpro/team-settings.html",'<div ng-if="!isAdmin()"> You do not have access to this page. </div> <button ng-if="isAdmin()" class="btn btn-primary btn-sm" style="margin-bottom: 10px" ng-click="showEditPermissions(null)"> Add Team Permissions </button> <div ng-if="isAdmin()" class="permissions-table table-head-container"> <table class="table table-bordered table-hover table-striped"> <thead> <tr> <th class="group-name">Team Name</th> <th class="managers">Managers</th> <th class="members">Members</th> <th class="dissolve-group">Dissolve Team</th> </tr> </thead> </table> </div> <div ng-if="isAdmin()" class="permissions-table table-body-container"> <table class="table table-bordered table-hover table-striped"> <tr ng-if="tkGroups.length===0"> <td colspan="5"> No permission team have been created yet. Use the button above to create the first team. </td> </tr> <tr ng-repeat="group in tkGroups"> <td class="group-name"> <strong>{{group.group_name}}</strong> <i class="fa fa-edit grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="Edit Team"></i> <br> </td> <td class="managers"> <i class="fa fa-lock grouptableicon-left table-ltblue"></i> <i ng-if="!group.showManagers" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="toggleShowGroupManagers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_managers}}"> </i> <i ng-if="group.showManagers" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="toggleShowGroupManagers(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.show_managers}}"> </i> <i ng-if="group.showManagers" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_managers}}"></i> <div ng-if="group.showManagers"> <table class="table"> <tr ng-repeat="manager in group.managers"> <td>{{getUserName(manager.user_uuid)}}</td> <td><i ng-if="manager !== user.user_uuid" ng-click="postRemoveTkGroupMember(group, $index, \'manager\')" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_manager}}"></i> </td> </tr> </table> </div> </td> <td class="members"> <i class="fa fa-user-circle-o grouptableicon-left table-ltblue" style=""> </i> <i ng-if="!group.showMembers" class="fa fa-chevron-down grouptableicon-left table-orange" ng-click="toggleShowGroupMembers(group)" tooltip-placement="bottom" uib-tooltip="Show All Members"> </i> <i ng-if="group.showMembers" class="fa fa-chevron-up grouptableicon-left table-orange" ng-click="toggleShowGroupMembers(group)" tooltip-placement="bottom" uib-tooltip="Hide All Members"> </i> <i ng-if="group.showMembers" class="fa fa-user-plus grouptableicon-right table-green" ng-click="showEditPermissions($index)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.manage_members}}"> </i> <div ng-if="group.showMembers"> <table class="table"> <tr ng-repeat="contact in group.members"> <td>{{getUserName(contact.user_uuid)}}</td> <td><i ng-if="contact !== user.user_uuid" ng-click="postRemoveTkGroupMember(group, $index, \'member\')" class="fa fa-user-times grouptableicon-right table-red" tooltip-placement="bottom" uib-tooltip="{{tips.groups.remove_member}}"></i> </td> </tr> </table> </div> </td> <td class="dissolve-group"> <i class="fa fa-window-close-o grouptableicon-left table-red" ng-click="openDissolveGroupModal(group)" tooltip-placement="bottom" uib-tooltip="{{tips.groups.dissolve_group}}"> </i> </td> </tr> </table> </div>'),a.put("views/timeclockpro/timeline-view.html",'<div class="timeline-controller"> <div class="panel panel-default"> <div class="panel-heading"> <h4 style="display: inline-block">{{user.contact_name_full}}</h4> </div> <div class="panel-body"> <div class="month"> <a href="" ng-click="previous(today)"><i class="fa fa-caret-left" aria-hidden="true"></i></a> <span> {{today.tmonthname}} {{today.tyear}} </span> <a href="" ng-click="next(today)"><i class="fa fa-caret-right" aria-hidden="true"></i></a> <a href="" ng-click="initializeDate()">Today</a> <div class="add-offline-bottom" ng-if="isAdminOrManager()"> <span ng-click="addOfflineTime(user)"> <i class="fa fa-plus"></i>&nbsp;<a href class="weaklink"> Add time</a> </span> </div> </div> <div class="calendar-wrapper"> <table class="calendar"> <tbody> <tr> <td ng-repeat="day in days" ng-class="{selected : day === selectedDay}" ng-click="selectedDate(day)"><a href=""><small>{{day.day}}</small><br><span>{{day.date}}</span></a></td> </tr> </tbody> </table> </div> <div class="timeline-overview"> <div class="info-outer"> <table class="info"> <tbody> <tr ng-if="records.length > 0"> <td class="big" rowspan="2"> <div class="day"> {{fulldate1}} <span> </span> </div> <!-- <div class="dur"> {{user.total_time.hours()}}h {{user.total_time.minutes()}}m</div> --> <div class="dur"> {{userRecords.activity.totalTime}}</div> </td> <td class="tsk-outer" rowspan="2"> <table class="timeline-overview-tsk"> <tbody> <tr ng-repeat="activity in userRecords.activity.activityData"> <td> <div class="note"> <span class="status-label"> {{activity.status_name}} </span> </div> </td> <td style="width: 70%"> <div class="progressBar" ng-style="{width: activity.width +\'%\'}"> &nbsp; </div> <span class="progressTime">{{activity.duration}}</span> </td> </tr> </tbody> </table> </td> </tr> <tr ng-if="records.length == 0"> <td class="big" rowspan="1"> <div class="dur">0h 0m</div> </td> <td class="big2"> <div class="day">{{fulldate1}}</div> </td> </tr> </tbody> </table> </div> </div> <div class="timeline-screens"> <div class="activity" ng-repeat="record in records"> <a ng-if="isAdminOrManager()" class="head" href tooltip-placement="top-left" uib-tooltip="Edit time" ng-click="editRecord(record, user)"> <span class="time">{{record.stime | date : \'hh:mm a\'}} - {{record.etime | date : \'hh:mm a\'}} </span> <span class="note">{{record.status_name}} </span><i class="fa fa-pencil edit"></i> </a> <a ng-if="!isAdminOrManager()" class="head" href> <span class="time">{{record.stime | date : \'hh:mm a\'}} - {{record.etime | date : \'hh:mm a\'}} </span> <span class="note">{{record.status_name}} </span> </a> <div ng-if="record.screenshots.length == 0"> <h4>No Screenshots Available.</h4> </div> <div class="screens" ng-if="record.screenshots.length > 0"> <div class="timeline-screen" ng-repeat="screenshot in record.screenshots"> <span class="time"> {{screenshot.time}} <span><small>{{screenshot.screenshot_title != null ? screenshot.screenshot_title : \'\' }}</small></span> </span> <a class="delete fa fa-trash" href title="Delete Screenshot" ng-click="deleteScreenshot(screenshot, record)"></a> <a class="delete fa fa-download" href="{{downloadUrl(screenshot)}}" download title="Download Screenshot"></a> <div> <a class="image" href="{{snapshotUrl(screenshot)}}" data-lightbox="screenshot" data-title="{{screenshot.screenshot_title}}"><img ng-src="{{thumbnailUrl(screenshot)}}" class="timeline-src"> </a> </div> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/tkgadmin/agencies.html",'<div ng-show="!editingDomain"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex>{{title()}}</h2> <md-button ng-click="showEditCode()" class="md-primary md-raised"> Create New Agency </md-button> </div> </md-toolbar> <md-content class="contact-groups-content"> <div class="row"> <div class="col-lg-5 pull-right"> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="domainSearch" placeholder="Filter agencies by keyword"> </div> </div> </div> <table class="table table-bordered table-striped cls-tab-call-history" ng-show="stateIsShowing(\'table\')"> <thead> <tr> <th ng-click="sortBy(\'domain_description\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbycompany}}"> Company Name <i ng-class="showChevron(\'domain_description\')"></i> </span> </th> <th ng-click="sortBy(\'domain_name\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbydomain}}"> Domain <i ng-class="showChevron(\'domain_name\')"></i> </span> </th> <th ng-click="sortBy(\'customerSettings.customer_group_code\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbycode}}"> Group Code <i ng-class="showChevron(\'customerSettings.customer_group_code\')"></i> </span> </th> <th ng-click="sortBy(\'activeUsers\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbyactiveusers}}"> Active Users <i ng-class="showChevron(\'activeUsers\')"></i> </span> </th> <th>Manage</th> </tr> </thead> <tbody> <tr ng-click="editDomain(domain)" ng-if="domain.customerSettings && domain.domain_enabled === \'true\'" ng-repeat="domain in filterData = (domains | filter: filterDomains | orderBy: predicate :reverse) | limitTo:perPage:perPage*(currentPage-1)"> <td>{{domain.domain_description}}</td> <td>{{domain.domain_name}}</td> <td>{{domain.customerSettings.customer_group_code}}</td> <td>{{domain.activeUsers.length}}</td> <td><button class="btn btn-xs btn-success" ng-click="editDomain(domain)">Edit</button> </td> </tr> </tbody> </table> <div ng-show="filterData.length > perPage" style="text-align: center"> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> </div> <!-- <div style="text-align: center">\n            <ul uib-pagination class="pagination-sm pagination" total-items="domains.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul>\n        </div> --> </md-content> </div> <div ng-show="editingDomain"> <md-button ng-click="back()" class="user-edit-back-btn"> <md-icon> arrow_back </md-icon> </md-button> <div class="user-edit"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> {{thedomain.domain_description}} </h2> </div> </md-toolbar> <md-content class="user-edit-content"> <md-input-container> <input type="text" ng-change="userInfoChanged = true" ng-model="thedomain.domain_description" placeholder="Company Name"> </md-input-container> <md-input-container> <md-select ng-model="thedomain.customerSettings.customer_group_code" placeholder="- Choose Group Code -"> <md-option ng-if="code.enabled" ng-repeat="code in customerGroupCodes" ng-value="code.customer_group_code"> {{code.customer_group_code}} </md-option> </md-select> </md-input-container> <br> <md-button ng-click="updateDomain(thedomain)" class="md-primary md-raised"> Update Information </md-button> <br> <h4>Porting Numbers: <md-button ng-click="showNewPort()" class="pull-right md-default md-raised"> <i class="fa fa-plus"></i> Add New Port </md-button> </h4> <p ng-if="portingNumbers.length === 0">No active ports to display.</p> <table ng-if="portingNumbers.length > 0" class="table table-bordered table-striped cls-tab-call-history"> <thead> <tr> <th><a href ng-click="sortBy(\'number\')" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbynumber}}">Number <i class="fa fa-{{!reverse && predicate===\'customer_group_code\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'created_at\')" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbydate}}">Started <i class="fa fa-{{!reverse && predicate===\'description\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Description</th> <th><a href ng-click="sortBy(\'type\')" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbynumbertype}}">Type<i class="fa fa-{{!reverse && predicate===\'usecount\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'status\')" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbyportstatus}}">Status <i class="fa fa-{{!reverse && predicate===\'enabled\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Manage</th> </tr> </thead> <tbody> <tr ng-repeat="port in portingNumbers"> <td>{{port.number | tel}}</td> <td>{{port.created_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{port.created_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td>{{port.description}}</td> <td class="capitalize">{{port.number_type}}</td> <td class="capitalize"> <span ng-if="port.port_status === \'porting\'" ng-click="activatePortingNumber(port)" tooltip-placement="top" uib-tooltip="{{tips.numberporting.porting}}"> <i class="fa fa-arrow-up dktealfont mainopt"></i> {{port.port_status}} </span> <span ng-if="port.port_status === \'ported\'"> <i class="fa fa-check orangefont mainopt"></i> {{port.port_status}} </span> </td> <td> <i ng-click="deletePortingNumber(port)" ng-if="port.port_status === \'porting\'" class="fa fa-times-circle redfont mainopt" tooltip-placement="top" uib-tooltip="{{tips.numberporting.cancelport}}"></i> </td> </tr> </tbody> </table> <h4>Domain Numbers: </h4> <table class="table table-bordered table-striped cls-tab-call-history"> <thead> <tr> <th ng-click="numsortBy(\'number\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbynumber}}"> Number <i style="font-size: 14px" ng-class="showNumChevron(\'number\')"></i> </span> </th> <th ng-click="numsortBy(\'type\')"> <span class="colsort" tooltip-placement="top" uib-tooltip="{{tips.numberporting.sortbynumbertype}}"> Type <i style="font-size: 14px" ng-class="showNumChevron(\'type\')"></i> </span> </th> <th>Description</th> <th>Status</th> <th>Manage</th> </tr> </thead> <tbody> <tr ng-repeat="number in domainNumbers | orderBy : numpredicate :numreverse"> <td>{{number.number | tel}} <span class="greyfont capitalize" ng-if="number.port"> - {{number.port.port_status}} </span> </td> <td class="capitalize">{{number.type}}</td> <td>{{showNumberDescription(number)}}</td> <td>{{showNumberStatus(number)}}</td> <td> <i ng-if="showNumberStatus(number) === \'Inactive\'" ng-click="deleteDid(number)" class="fa fa-times-circle redfont mainopt" tooltip-placement="top-right" ib-tooltip="{{tips.numberporting.deletedid}}"></i> </td> </tr> </tbody> </table> </md-content> </div> </div>'),a.put("views/tkgadmin/company-edit.html",'<md-button ng-click="back()" class="user-edit-back-btn"> <md-icon> arrow_back </md-icon> </md-button> <div class="user-edit"> <md-toolbar> <div class="md-toolbar-tools"> <h2 md-truncate flex> {{domain.domain_description}} </h2> </div> </md-toolbar> <md-content class="user-edit-content"> <md-input-container> <input type="text" ng-value="domain.domain_description" ng-change="userInfoChanged = true" ng-model="settings.domain_description" placeholder="Company Name"> </md-input-container> <md-input-container> <input type="text" ng-value="domain.customerSettings.customer_group_code" ng-change="userInfoChanged = true" ng-model="settings.group_code" placeholder="Group Code"> </md-input-container> <br> <md-divider></md-divider> <md-button ng-click="triggerUpdate()" class="md-primary md-raised"> Update Information </md-button> <br><br><br> </md-content> </div>'),a.put("views/tkgadmin/groupcodes.html",'<md-toolbar id="contact-groups-toolbar"> <div class="md-toolbar-tools"> <h2 md-truncate flex>{{title()}}</h2> <md-button ng-click="showEditCode()" class="md-primary md-raised"> Create New Code </md-button> </div> </md-toolbar> <md-content class="contact-groups-content"> <div class="row"> <div class="col-lg-5 pull-right"> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="codeSearch" placeholder="Filter group codes by keyword"> </div> </div> </div> <table class="table table-bordered table-striped cls-tab-call-history" ng-show="stateIsShowing(\'table\')"> <thead> <tr> <th><a href ng-click="sortBy(\'customer_group_code\')" tooltip-placement="top" uib-tooltip="{{tips.groupcodes.sortbycode}}">Code <i class="fa fa-{{!reverse && predicate===\'customer_group_code\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'description\')" tooltip-placement="top" uib-tooltip="{{tips.groupcodes.sortbycode}}">Group Description <i class="fa fa-{{!reverse && predicate===\'description\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Details</th> <th><a href ng-click="sortBy(\'usecount\')" tooltip-placement="top" uib-tooltip="{{tips.groupcodes.sortbycode}}">Uses <i class="fa fa-{{!reverse && predicate===\'usecount\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th><a href ng-click="sortBy(\'enabled\')" tooltip-placement="top" uib-tooltip="{{tips.groupcodes.sortbycode}}">Status <i class="fa fa-{{!reverse && predicate===\'enabled\'?\'chevron-up\':\'chevron-down\'}}"></i></a></th> <th>Manage</th> </tr> </thead> <tbody> <tr ng-if="customerGroupCodes.length === 0"> <td colspan="6">There are no Group Codes created yet.</td> </tr> <tr ng-if="customerGroupCodes.length>0" ng-repeat="code in filterData = (customerGroupCodes | orderBy:customer_group_code:true | filter: filterCodes | orderBy: predicate :reverse)"> <td>{{code.customer_group_code}}</td> <td>{{code.description}}</td> <td class="xsmfont">Partner App: {{code.partner.partner_name}}<br> Per Seat: {{code.per_seat | currency}}<br> Per Fax Line: {{code.per_fax_line | currency}}<br> Per E911 Reg: {{code.per_e911 | currency}}<br> Automated Marketing: {{code.automated_marketing | currency}}<br></td> <td>{{code.usecount}}</td> <td> <md-switch ng-model="code.enabled" aria-label="isOn" class="capital" ng-change="getToggleGroupCodeStatus(code.customer_group_code_uuid)"> {{ code.enabled ? "Enabled":"Disabled" }} </md-switch> </td> <td><button class="btn btn-xs btn-success" ng-click="showEditCode(code)">Edit</button> </td> </tr> </tbody> </table> </md-content> <script type="text/ng-template" id="managecodes.html"><div>\n            <div class="modal-header">\n                <span class="fa-stack fa-2x cls-color-blue-tkg">\n                    <i class="fa fa-circle fa-stack-2x"></i>\n                    <i class="fa fa-key fa-stack-1x fa-inverse"></i>\n                </span>\n                <span class="cls-header-modal">Manage Group Code</span>\n                <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button>\n            </div>\n        \n            \n                <edit-group-code code="vm.content.data"></edit-group-code>\n            \n        </div></script> <script type="text/ng-template" id="editgroupcode.html"><form id="addGroupCode" name="addGroupCode">\n    <div class="modal-body" id="modal-body">\n        \n        <md-input-container class="md-block" flex-gt-sm>\n            <label>Group Code</label>\n            <input name="groupcode" ng-model="groupcode.customer_group_code" md-maxlength="30" required>\n            <div ng-messages="addGroupCode.groupcode.$error">\n                <div ng-message="missing">The group code is required</div>\n            </div>\n        </md-input-container>\n        <md-input-container class="md-block">\n            <label>Description of Group</label>\n            <input ng-model="groupcode.description" md-maxlength="250" >\n        </md-input-container>\n        <md-input-container class="md-block">\n            <label>Total Cloud Storage Allocated Per User (MB)</label>\n            <input ng-model="groupcode.storage_per_user" required>\n        </md-input-container>\n        <div layout-gt-sm="row">\n            <md-input-container class="md-block" flex-gt-sm>\n                <label>Price Per Seat {{groupcode.per_seat}}</label>\n                <input ng-model="groupcode.per_seat" currency-formatter required>\n            </md-input-container>\n\n            <md-input-container class="md-block" flex-gt-sm>\n                <label>Price Per Fax Line</label>\n                <input ng-model="groupcode.per_fax_line" currency-formatter required>\n            </md-input-container>\n\n            <md-input-container class="md-block" flex-gt-sm>\n                <label>Price Per E911 Reg</label>\n                <input ng-model="groupcode.per_e911" currency-formatter required>\n            </md-input-container>\n\n            <md-input-container class="md-block" flex-gt-sm>\n                <label>Price for AM</label>\n                <input ng-model="groupcode.automated_marketing" currency-formatter required>\n            </md-input-container>\n        </div>\n        <md-input-container class="md-input-has-value md-block">\n            <label>Content Copy Process</label>\n            <md-radio-group ng-model="groupcode.management_app_partner_uuid" ng-required="true">\n                <div class="col-sm-4" ng-repeat="app in partnerApps">\n                    <md-radio-button ng-value="app.management_app_partner_uuid" class="md-primary">{{app.partner_name}}</md-radio-button>\n                </div>\n            </md-radio-group>\n        </md-input-container> \n    </div>\n    <div class="modal-footer cls-incomingcall-buttons">\n        <button class="btn btn-danger btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px;"></i>Cancel</button>\n        <button class="btn btn-primary btn-md" ng-click="saveGroupCode(groupcode)" ng-disabled="addGroupCode.$invalid"><i class="fa fa-save" style="margin-right: 10px;"></i>Save Code</button>\n    </div>\n    </form></script>'),a.put("views/tkgadmin/numberport.html",'<div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-cloud-upload fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Port New Number</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <form name="numberport" id="numberport" ng-submit="numberport.$valid && vm.content.data.createPortNumber(portInfo)"> <div class="modal-body" id="modal-body"> <p>Adding a new number for {{vm.content.data.domain.domain_description}}.</p> <div class="port-info"> <md-input-container> <input type="text" required phone-input name="didNumber" ng-model="portInfo.number" placeholder="Did number being ported"> <div ng-messages="numberport.didNumber.$error"> <div ng-message="required">This is required!</div> </div> </md-input-container> <md-input-container> <input type="text" name="Description" ng-model="portInfo.description" placeholder="Did description"> </md-input-container> </div> <div class="radio-buttons"> Number Type: <md-input-container ng-init="portInfo.number_type = \'did\'"> <md-radio-group layout="row" ng-model="portInfo.number_type" ng-required="true"> <md-radio-button value="did" class="md-primary">Did</md-radio-button> <md-radio-button value="fax" class="md-primary">Fax Number</md-radio-button> </md-radio-group> </md-input-container> <div ng-if="portInfo.number_type === \'did\'"> Target:<br> <span class="smfont">Optional: Specify if the did should transfer to a User or an Auto Attendant</span> <md-input-container> <md-select ng-model="portInfo.target_ext" placeholder="User"> <md-option ng-repeat="user in vm.content.data.users" ng-value="user.extension.extension"> User: {{user.contact.contact_name_given}} {{user.contact.contact_name_family}} - Ext: {{user.extension.extension}} </md-option> <md-option ng-repeat="attendant in vm.content.data.attendants" ng-value="attendant.ivr_menu_extension"> Attendant: {{attendant.ivr_menu_name}} </md-option> </md-select> </md-input-container> </div> </div> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeModal()"><i class="fa fa-remove" style="margin-right: 10px"></i> Close Window</button> <button class="btn btn-success btn-md" ng-disabled="numberport.$invalid" type="submit"> <i class="fa fa-floppy-o" style="margin-right: 10px"></i> Save Port </button> </div> </form> </div>'),a.put("views/topic-channels-list.html",'<ul class="fa-ul channellist"> <li ng-if="!favoritesOnly || (favoritesOnly && isFavoriteChannel(channel))" ng-click="setChannel(channel)" ng-repeat="channel in channels() | orderBy: \'display_name\'" ng-class="{hideentity : channel.display_name === \'\',\n                    channelbold : channel.getUnreadCount() > 0 }"> <i class="fa-li fa fa-{{channel.type == \'P\' ? \'lock\' : \'globe\'}} fa-lg" style="font-size: 14px; width: 25px; text-align: center"> </i> <span> {{channel.display_name}} </span> <span ng-if="channel.getUnreadCount() > 0"> ({{channel.getUnreadCount()}}) </span> <span ng-click="toggleFavoriteChannel(channel)" class="favorite-star"> <span class="fa-stack" ng-if="!isFavoriteChannel(channel)" tooltip-placement="top" uib-tooltip="Add to Favorites"> <i class="fa fa-star-o fa-stack-1x showonhover"></i> <i class="fa fa-star fa-stack-1x bg-icon"></i> </span> <span class="fa-stack" ng-if="isFavoriteChannel(channel)" tooltip-placement="top" uib-tooltip="Remove from Favorites"> <i class="fa fa-star fa-stack-1x showonhover"></i> <i class="fa fa-star fa-stack-1x bg-icon"></i> </span> </span> </li> <li ng-if="!favoritesOnly"> <a href="" ng-click="manageSubscriptions()"> Subscribe to More ... </a> </li> </ul>'),a.put("views/try-mobile.html",'<div class="bridge-logo"> <img src="/images/bridge-logo-new.09e65ecf.png"> </div> <div class="message"> <h2>Welcome to Bridge, powered by </h2> <h2><b>The Kotter Group</b></h2> <h3> Our web application supports devices with a minimum screen resolution of 800 x 480. </h3> <!-- To view Bridge on this device, please download the mobile version for Android <a>here</a> or iOS <a>here</a>. Thanks! --> </div>'),a.put("views/video/incomingvideochatmodal.html",'<div ng-controller="VideoConferenceCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Incoming Video Call</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <div class="cls-title-cont-modal">{{vm.content.data.message}}</div> <span style="width: 100%; text-align: center"><a href="{{symphonyUrl}}/video/{{vm.content.data.data.invite_hash}}" class="btn btn-success btn-lg" target="_blank">Click Here to Join The Conference</a></span> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeVideoCallModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div> </div>'),a.put("views/video/outgoingvideocallmodal.html",'<div ng-controller="VideoConferenceCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Outgoing Video Call</span> <button type="button" ng-click="closeModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body"> <h3>An email invitation has been sent to {{vm.content.data[0].recipient_name}} at {{vm.content.data[0].recipient_email}}. </h3> <p>{{vm.content.data[0].recipient_name}} has also been notified via Symphony.</p> <span style="width: 100%; text-align: center"><a href="{{symphonyUrl}}/video/{{user.videoConference.moderator_hash}}" class="btn btn-success btn-lg" target="_blank">Click Here to Join The Conference</a></span> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeVideoCallModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> </div> </div> </div>'),a.put("views/video/playrecording.html",'<div ng-controller="VideoConferenceCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal" ng-if=""> {{vm.content.data.name ? \'Incoming Video Call\' : \'Playing Video Message\'}} </span> <span class="cls-header-modal" ng-if="vm.content.data.screenshareArchive"> Screen Share Recording </span> <span class="cls-header-modal" ng-if="vm.content.data.videoArchive"> Videoconference Recording </span> <span class="cls-header-modal" ng-if="vm.content.data.smsVideo"> Sms Video Message </span> <button type="button" ng-click="closeModal()" class="close"> <i class="fa fa-times"></i> </button> </div> <div class="modal-body" id="modal-body"> <p ng-if="vm.content.data.name"> <strong>Room: </strong> {{vm.content.data.name}}, <strong>Date: </strong> {{vm.content.data.created_at | amDateFormat:\'MMM D, YYYY h:mm a\'}} </p> <video controls autoplay name="media"> <source src="{{vm.content.data.publicurl}}" type="video/mp4"> </source></video> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeVideoCallModal()"> <i class="fa fa-remove" style="margin-right: 10px"></i> Close </button> <a href="{{vm.content.data.publicurl}}" class="btn btn-primary btn-md" download> <i class="fa fa-remove" style="margin-right: 10px"> </i> Download </a> </div> </div> </div>'),a.put("views/video/videocallmodal.html",'<div ng-controller="VideoConferenceCtrl"> <div> <div class="modal-header"> <span class="fa-stack fa-2x modal-icon"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-video-camera fa-stack-1x fa-inverse"></i> </span> <span class="cls-header-modal">Video Conference</span> <button type="button" ng-click="closeVideoCallModal()" class="close"><i class="fa fa-times"></i></button> </div> <div class="modal-body" id="modal-body" ng-show="!emailsSent"> <div class="cls-title-cont-modal">Add People to your Video Conference Room</div> <p><strong>Choose Contacts to Send to</strong><br> <span class="smfont">Start typing a contact name to search and select.</span></p> <tags-input ng-model="delivery.messageContacts" display-property="contact_name_full" key-property="contact_uuid" placeholder="Select contacts" replace-spaces-with-dashes="false"> <auto-complete source="loadTags($query)" min-length="0" load-on-focus="false" load-on-empty="false" max-results-to-show="10" template="autocomplete-template"></auto-complete> </tags-input> <script type="text/ng-template" id="autocomplete-template"><div class="autocomplete-template">\n                    <span ng-bind-html="$highlight($getDisplayText())"></span> <span ng-if="data.contact_email_address!=\'\'" class="smfont">(Email: {{data.contact_email_address}})</span><span ng-if="data.contact_email_address==\'\'" class="smfont">(No Email Address Available)</span>\n                </div></script> <hr> <p><strong>Send to Non-Contacts</strong><br> <span class="smfont">Enter a name and email and click Include to add to the Invitee List.</span></p> <div class="row"> <div class="col-md-5"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-user"></i></span> <input class="form-control" type="text" ng-model="invitee.name" placeholder="Invitee Name"> </div> </div> <div class="col-md-5"> <div class="input-group"> <span class="input-group-addon"><i class="fa fa-envelope"></i></span> <input class="form-control" type="text" ng-model="invitee.email" placeholder="Invitee Email"> </div> </div> <div class="col-md-2"> <button class="btn btn-success btn-sm" ng-click="addNonContactInvitee(invitee)"><i class="fa fa-plus-circle"></i> Include</button> </div> </div> <table ng-if="addedInvitees.length>0" class="table table-bordered table-hover table-striped"> <thead><tr><th>Name</th><th>Email</th><th></th></tr></thead> <tbody> <tr ng-repeat="person in addedInvitees"><td>{{person.name}}</td><td>Email: {{person.email}}</td><td><button class="btn btn-danger btn-xs" ng-click="removeInvitee($index)"><i class="fa fa-times"></i> Remove</button></td></tr> </tbody> </table> <p><strong>Include a message to your invitees</strong> <span class="light-font">Optional</span></p> <textarea class="form-control" ng-model="delivery.videoInviteBody" style="height: 100px; resize: none" placeholder="Write a message here..."></textarea> </div> <div class="modal-footer cls-incomingcall-buttons"> <button class="btn btn-default btn-md" ng-click="closeVideoCallModal()"><i class="fa fa-remove" style="margin-right: 10px"></i>Close</button> <button class="btn btn-primary btn-md" ng-click="sendVideoInvites(delivery)"><i class="fa fa-paper-plane-o" style="margin-right: 10px"></i>Send Invites</button> </div> </div> </div>'),
a.put("views/videoconference-old.html",'<div ng-include="\'header.html\'"></div> <div ng-include="\'leftbar.html\'"></div> <div ng-controller="VideoConferenceCtrl"> <div class="row"> <div class="col-sm-8"><h3>Video Conferencing <span ng-if="selectEmulateUser!==null && selectEmulateUser !== user.id">- Emulating: {{getNameByUUID(selectEmulateUser)}}</span></h3></div> <div class="col-sm-4" ng-if="emulationStatus[\'videoconference\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="" ng-change="setEmulationUser(selectEmulateUser, \'videoconference\')"> <md-option ng-value="user.id"><strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong></md-option> <md-option ng-repeat="emUser in emulationStatus[\'videoconference\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <div ng-if="!videoConference.moderator_hash && showTable" uib-alert ng-class="\'alert-info\'">This user has not setup their Video Conference Room yet so there are no conference sessions to display.</div> <div ng-if="videoConference.moderator_hash && showTable"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr style="background-color: white !important"> <th colspan="7"> <div class="col-md-4"> <button class="btn btn-primary" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showModalWithData(\'/video/videocallmodal.html\',\'\')"><i class="fa fa-plus" style="margin-right: 10px"></i> Invite More</button> </div> <div class="col-md-3"> <a class="btn btn-success btn-block" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" href="{{symphonyURL}}/video/{{videoConference.moderator_hash}}" target="_blank"><strong>Join Conference</strong></a> </div> </th> </tr> </thead> <thead> <tr> <th style="width: 250px" ng-click="sort_by(\'\')">Participant <i class="fa fa-chevron-down"></i></th> <th>Invitation URL</th> <th ng-click="sort_by(\'\')">Joined At</th> <th>Invitation Management</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr> <td><strong>Conference Administrator</strong></td> <td><a href="{{symphonyURL}}/video/{{videoConference.moderator_hash}}" target="_blank" tooltip-placement="top" uib-tooltip="{{tips.videoconference.joinconference}}">{{symphonyURL}}/video/{{videoConference.moderator_hash}}</a></td> <td></td> <td><button class="btn btn-primary btn-xs" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="resetAdminLink()" tooltip-placement="top" uib-tooltip="{{tips.videoconference.resetadminlink}}">Reset Admin Link</button></td> </tr> <tr ng-if="participant.invite_hash !== videoConference.moderator_hash" ng-repeat="participant in filtered = (videoConference.participants | orderBy : predicate :reverse)"> <td ng-if="participant.recipient_contact_uuid === null"><div ng-bind-html="showNonContact(participant.recipient_email, \'\', participant.recipient_name)" style="width: 75%; display: inline-block"></div><div style="color: #64d76c; width: 25%; display: inline-block"><i style="float: right; padding-left: 10px;font-size: 18px" tooltip-placement="top" uib-tooltip="{{tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'videoconference\', participant)" class="fa fa-user-plus"></i></div></td> <td ng-if="participant.recipient_contact_uuid !== null"><span ng-bind-html="showContact(participant.recipient_contact_uuid)"></span></td> <td><a href="{{symphonyURL}}/video/{{participant.invite_hash}}" target="_blank">{{symphonyURL}}/video/{{participant.invite_hash}}</a></td> <td><span ng-if="!particpant.accepted_at">Not Logged In</span><span ng-if="particpant.accepted_at">{{particpant.accepted_at | amDateFormat:\'MMM D, YYYY h:mm a\'}}</span></td> <td><button class="btn btn-primary btn-xs btn-space" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="resendInvitation($index)" tooltip-placement="top" uib-tooltip="{{tips.videoconference.resendinvitation}} {{participant.recipient_name!==\'\' ? participant.recipient_name : participant.recipient_email}}"><i class="fa fa-envelope" style="margin-right: 10px"></i>Resend</button><button class="btn btn-danger btn-xs btn-space" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeInvitation($index)" tooltip-placement="top" uib-tooltip="{{tips.videoconference.disableinvitation}}"><i class="fa fa-minus-circle" style="margin-right: 10px"></i>Disable</button></td> </tr> </tbody> </table> <h3>Conference Sessions</h3> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-click="sort_by(\'\')">Started At <i class="fa fa-chevron-down"></i></th> <th>Ended At</th> <th ng-click="sort_by(\'\')">Duration</th> <th>Number of Attendees</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="session in filtered = (vcSessions | orderBy : predicate :reverse)"> <td>{{session.started_at | amDateFormat:\'MMM D, YYYY h:mm a\'}}</td> <td>{{session.ended_at | amDateFormat:\'MMM D, YYYY h:mm a\'}}</td> <td><span ng-if="session.duration !== null">{{session.duration | secondsToDateTime | date:\'HH:mm:ss\'}}</span></td> <td>{{session.contactsessions.length}} <button class="btn btn-default btn-xs" ng-click="showSessionDetail($index)">Details</button></td> <td><button class="btn btn-danger btn-xs" ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeSession($index)"><i class="fa fa-minus-circle"></i> Remove</button></td> </tr> </tbody> </table> </div> </div>'),a.put("views/videoconference.html",'<div id="videoconference-container" ng-controller="VideoConferenceCtrl"> <div class="row top-row"> <div class="col-sm-8"> <h3> Video Conferencing <span ng-if="showTable() && selectEmulateUser!==null && selectEmulateUser !== user.id"> - Emulating: {{getNameByUUID(selectEmulateUser)}} </span> </h3> </div> <div class="col-sm-4" ng-if="emulationStatus[\'videoconference\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="" ng-change="setEmulationUser(selectEmulateUser, \'videoconference\')"> <md-option ng-value="user.id"> <strong> {{user.contact_name_given}} {{user.contact_name_family}} </strong> </md-option> <md-option ng-repeat="emUser in emulationStatus[\'videoconference\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> <div class="col-sm-4 instructions-text" ng-if="emulationStatus[\'videoconference\'].manager===\'false\'"> <a href> Instructions on how to Video Conference </a> </div> </div> <div ng-if="!showTable()" style="width: 250px; text-align: center; opacity: 0.6; margin: 40px"> <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i> <br> Loading... </div> <div ng-if="showTable()"> <div class="row"> <div class="col-sm-8"> <label for="conferenceroom"> Customize your conference room name: </label> <div class="input-group"> <span class="input-group-addon" id="basic-addon3"> {{vcUrl}} </span> <input class="form-control" type="text" ng-keyup="isRoomAvailable(conference.room)" id="conferenceroom" ng-model="conference.room" ng-init="conference.room=videoConference.name" placeholder="Choose a custom conference room name" aria-describedby="basic-addon3"> <span class="input-group-addon" ng-if="urlNotAvailable"> {{availMessage}} </span> <span class="input-group-addon" ng-if="!urlNotAvailable"> <i class="fa fa-check" style="color: green" tooltip-placement="top" uib-tooltip="{{::tips.videoconference.roomsuccess}}"> </i> </span> </div> <span class="smfont"> {{vcUrl}}/{{conference.room}} (<button class="btn btn-default btn-xs" ng-disabled="urlNotAvailable" ng-click="clickHandler()"> Copy to Clipboard </button>) </span> </div> </div> <div class="row"> <div class="col-sm-12 video-button"> <button class="btn btn-primary btn-lg startbtn" ng-disabled="urlNotAvailable" ng-click="joinConference()"> Start Video Call </button> </div> </div> <h4>Recorded Video Conferences</h4> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th ng-click="sortBy(\'created_at\')"> Date <i class="fa fa-chevron-down" ng-show="showChevronDown(\'created_at\')"> </i> <i class="fa fa-chevron-up" ng-show="showChevronUp(\'created_at\')"> </i> </th> <th ng-click="sortBy(\'name\')"> Name <i class="fa fa-chevron-down" ng-show="showChevronDown(\'name\')"> </i> <i class="fa fa-chevron-up" ng-show="showChevronUp(\'name\')"> </i> </th> <th>View</th> <th class="button-column-md"> Copy </th> <th class="button-column-md"> Remove </th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr ng-if="videoArchives.length===0"> <td colspan="4"> There are no video recordings available at this time. </td> </tr> <tr ng-repeat="recording in filtered = (videoArchives | orderBy : category : sortDirection)"> <td> {{::recording.created_at | toLocalTime | amDateFormat: \'MMM D, YYYY, h:mm a\'}} </td> <td> {{::recording.name}} </td> <td> <button class="btn btn-primary btn-xs" ng-click="viewArchive($index)" tooltip-placement="top" uib-tooltip="{{::tips.videoconference.playrecording}}"> <i class="fa fa-eye" style="margin-right: 10px"></i> View Recording </button> </td> <td class="button-column-md"> <span ng-click="copyConferenceToHawksoft(recording)"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.videoconference.copytohawksoft}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.videoconference.copytomanagement}}"> </span> </td> <td class="button-column-md"> <i ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeArchive($index)" class="fa fa-minus-circle fa-2x redfont" tooltip-placement="top" uib-tooltip="{{::tips.videoconference.remove}}"> </i> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/visualvoicemail.html",'<div class="" ng-controller="VisualVoiceMailCtrl"> <div class="row"> <div class="col-sm-8"><h3>Visual Voicemail <span ng-if="showTable && selectEmulateUser!==null && selectEmulateUser !== user.id">- Emulating: {{getNameByUUID(selectEmulateUser)}}</span></h3></div> <div class="col-sm-4" ng-if="emulationStatus[\'voicemail\'].manager===\'true\'"> <div class="input-group"> <md-select ng-model="selectEmulateUser" class="emulate" placeholder="- Emulate User -" tooltip-placement="bottom" uib-tooltip="{{::tips.voicemail.select_months}}" ng-change="setEmulationUser(selectEmulateUser, \'voicemail\')"> <md-option ng-value="user.id"><strong>{{user.contact_name_given}} {{user.contact_name_family}}</strong></md-option> <md-option ng-repeat="emUser in emulationStatus[\'voicemail\'].watched" ng-value="emUser.user_uuid"> {{getNameByUUID(emUser.user_uuid)}} </md-option> </md-select> </div> </div> </div> <table ng-show="showTable" class="table page-actions"> <tr> <td class="entries-per-page"> <div ng-show="!showBtnDelCalls"> <label class="bluecolor" for="search">Calls per page:</label> <select class="selectpicker form-control per-page" ng-options="page as page for page in ppOptions" ng-model="perPage"></select> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpenfromDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="fromDate" name="fromDate" is-open="fromDatePopup.opened" datepicker-options="fromDateOptions" ng-required="true" close-text="Close" ng-click="OpenfromDate()" ng-change="ChangeToMinDate(fromDate)" placeholder="From"> </div> </td> <td class="date-picker"> <div class="input-group"> <span class="input-group-addon" ng-click="OpentoDate()"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" uib-datepicker-popup="{{dateFormat}}" ng-model="toDate" name="toDate" is-open="toDatePopup.opened" datepicker-options="toDateOptions" ng-required="true" close-text="Close" ng-click="OpentoDate()" placeholder="To"> </div> </td> <td> <div class="input-group"> <span class="input-group-addon" title="Filter calls"><i class="fa fa-filter"></i></span> <input class="form-control" type="text" ng-model="vmSearch" placeholder="Filter Results"> </div> </td> </tr> </table> <div ng-show="showTable" class="scroll-container-head"> <table id="data-table-top" class="table table-bordered table-hover table-striped cls-tab-call-history"> <thead> <tr> <th style="width: 24%" ng-click="sort_by(\'caller_sort\')"> Caller <i ng-class="showChevron(\'caller_sort\')"></i> </th> <th style="width: 12%" ng-click="sort_by(\'left_at\')"> Date/Time <i ng-class="showChevron(\'left_at\')"></i> </th> <th style="width: 11%" ng-click="sort_by(\'message_length\')"> Duration <i ng-class="showChevron(\'message_length\')"></i> </th> <th style="width: 33%">Transcription</th> <th class="button-column">Play</th> <th class="button-column">Copy</th> <th class="button-column">Remove</th> </tr> </thead> <tbody class="cls-body-table-pos"> <tr> <td colspan="7"> Showing {{visualVoicemail.length}} Voicemail Records for the period from <strong ng-if="fromDate">{{fromDate | date:\'EEE MMM d, y\'}}</strong> to <strong ng-if="toDate">{{toDate | date:\'EEE MMM d, y\'}}. </strong></td> </tr> </tbody> </table> </div> <div ng-show="showTable && visualVoicemail.length>0" class="scroll-container" ng-style="{\'height\': vvmTableHeight && vvmTableHeight}"> <table class="table table-bordered table-hover table-striped cls-tab-call-history"> <tbody class="cls-body-table-pos"> <tr ng-class="{boldrow: call.vm_status===\'unread\'}" ng-repeat="call in filterData = (visualVoicemail | orderBy : predicate :reverse | filter : searchVoicemail) |  limitTo:perPage:perPage*(currentPage-1)"> <td style="width: 24%"> <ul class="profile-display"> <li ng-if="call.contact.contact_profile_image" class="profile_display_30"><img src="{{pathImgProfile}}{{call.contact.contact_profile_image}}" class="profile_image"></li> <li ng-if="!call.contact.contact_profile_image" class="profile_display_30"><label class="profile_icon" style="background-color: {{call.contact.contact_profile_color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="call.contact" style="display: inline-block"><strong>{{call.contact.contact_name_given}} {{call.contact.contact_name_family}}</strong><br> <span ng-click="makeCall(call.caller_id_number)" tooltip-placement="bottom" uib-tooltip="{{::tips.call.makecall}} {{call.caller_id_number | tel}}">{{call.caller_id_number | tel}}</span> </li> <li ng-if="!call.contact" style="display: inline-block"><span ng-if="call.contact_name"><strong>{{call.contact_name}}</strong><br></span> <span ng-click="makeCall(call.caller_id_number)" tooltip-placement="bottom" uib-tooltip="{{::tips.call.makecall}} {{call.caller_id_number | tel}}">{{call.caller_id_number | tel}}</span> </li> </ul> </td> <td style="width: 24%" ng-if="call.noncontact"> <ul class="profile-display"> <li class="profile_display_30"><label class="profile_icon" style="background-color: {{call.noncontact.color}} !important"><i class="fa fa-user"></i></label></li> <li ng-if="call.noncontact.name" style="display: inline-block"><span class="capitalize"><strong>{{call.noncontact.name != call.caller_id_number? call.noncontact.name : call.caller_id_number | tel}}</strong></span><br> <span ng-click="makeCall(call.caller_id_number)" tooltip-placement="bottom" uib-tooltip="{{::tips.call.makecall}} {{call.caller_id_number | tel}}">{{call.caller_id_number | tel}}</span> </li> <li ng-if="!call.noncontact.name" style="display: inline-block"><span ng-click="makeCall(call.caller_id_number)" tooltip-placement="bottom" uib-tooltip="{{::tips.call.makecall}} {{call.caller_id_number | tel}}">{{call.caller_id_number | tel}}</span></li> <li style="display: inline-block"><span style="color: #64d76c"><i tooltip-placement="top" style="float: right; padding-left: 10px;font-size: 18px" uib-tooltip="{{::tips.contacts.addcontact}}" ng-hide="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="showAddContactForm(\'visualvoicemail\', call)" class="fa fa-user-plus"></i></span></li> </ul> </td> <td style="width: 12%">{{call.left_at | toLocalTime | amDateFormat:\'MMM D, YYYY\'}}<br> {{call.left_at | toLocalTime | amDateFormat:\'h:mm a\'}}</td> <td style="width: 11%">{{formatTime(call.message_length)}}</td> <td style="width: 33%"> <span ng-click="copyVmInfoToHawksoft(call)"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" class="voicemail-info-copy-btn" style="width: 16px; height: 16px" tooltip-placement="top" uib-tooltip="Export Voicemail Transcription to HawkSoft"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" class="voicemail-info-copy-btn" style="width: 16px; height: 16px" tooltip-placement="top" uib-tooltip="Export Voicemail Transcription to Management System"> </span> {{call.vm_transcript !== null ? \'"\'+call.vm_transcript+\'"\' : call.notes}} </td> <td class="button-column"><span ng-if="playingVoicemail!==$index" ng-click="playVoicemail($index)"><i class="fa fa-play-circle fa-2x cls-color-green-tkg" tooltip-placement="top" uib-tooltip="{{::tips.voicemail.playvoicemail}}"></i></span> <span ng-if="playingVoicemail===$index" ng-click="stopVoicemail($index)" tooltip-placement="top" uib-tooltip="{{::tips.voicemail.stopvoicemail}}"><i class="fa fa-stop-circle fa-2x cls-color-red-tkg"></i></span></td> <td class="button-column"> <span ng-click="copyVmToHawksoft(call)"> <img ng-show="user.exportType.partner_code == \'hawksoft\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.voicemail.copytohawksoft}}"> <img ng-show="user.exportType.partner_code == \'generic\'" src="{{onescreenBaseUrl}}{{user.exportType.partner_icon}}" style="width: 24px; height: 24px" tooltip-placement="top" uib-tooltip="{{::tips.voicemail.copytomanagement}}"> </span> </td> <td class="button-column"><i ng-disabled="selectEmulateUser!==null && selectEmulateUser !== user.id" ng-click="removeVoicemail($index)" class="fa fa-minus-circle fa-2x redfont" tooltip-placement="top" uib-tooltip="{{::tips.voicemail.remove}}"></i></td> </tr> </tbody> </table> </div> <div ng-show="showTable" style="text-align: center"> <!--<uib-pagination total-items="filtered.length" items-per-page="20" next-text="Next" previous-text="Previous" ng-model="currentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true"></uib-pagination>--> <ul uib-pagination class="pagination-sm pagination" total-items="filterData.length" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" items-per-page="perPage"></ul> <!--<ul uib-pagination total-items="filtered.length" items-per-page="perPage" ng-model="currentPage" previous-text="&lsaquo;" next-text="&rsaquo;" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true"></ul>--> </div> </div>')}]);